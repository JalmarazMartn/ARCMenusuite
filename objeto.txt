OBJECT Table 18 Customer
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=12:19:40;
    Modified=Yes;
    Version List=NAVW114.07,NAVES14.07,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    Permissions=TableData 21=r,
                TableData 167=r,
                TableData 249=rd,
                TableData 5900=r,
                TableData 5907=r,
                TableData 5940=rm,
                TableData 5965=rm,
                TableData 7002=rd,
                TableData 7004=rd;
    DataCaptionFields=No.,Name;
    OnInsert=BEGIN
               IF "No." = '' THEN BEGIN
               //++ BAIN-0009
                 FuncionesBAINES.T18CambiarSerieEmpresa(SalesSetup,NoSeriesMgt);
               //-- BAIN-0009
                 SalesSetup.GET;
                 SalesSetup.TESTFIELD("Customer Nos.");
                 NoSeriesMgt.InitSeries(SalesSetup."Customer Nos.",xRec."No. Series",0D,"No.","No. Series");
               //++ BAIN-0009
                 FuncionesBAINES.T18DescambiarSerieEmpresa(SalesSetup);
               //-- BAIN-0009

               END;

               IF "Invoice Disc. Code" = '' THEN
                 "Invoice Disc. Code" := "No.";

               "Payment Days Code" := "No.";
               "Non-Paymt. Periods Code" := "No.";

               IF (NOT (InsertFromContact OR (InsertFromTemplate AND (Contact <> '')) OR ISTEMPORARY)) OR ForceUpdateContact THEN
                 UpdateContFromCust.OnInsert(Rec);

               IF "Salesperson Code" = '' THEN
                 SetDefaultSalesperson;

               DimMgt.UpdateDefaultDim(
                 DATABASE::Customer,"No.",
                 "Global Dimension 1 Code","Global Dimension 2 Code");

               UpdateReferencedIds;
               SetLastModifiedDateTime;
               // VNTES.i
               IF TPV.READPERMISSION THEN
                 GestTPV.T18OnInsert(Rec);
               // VNTES.f
             END;

    OnModify=BEGIN
               UpdateReferencedIds;
               SetLastModifiedDateTime;
               IF IsContactUpdateNeeded THEN BEGIN
                 MODIFY;
                 UpdateContFromCust.OnModify(Rec);
                 IF NOT FIND THEN BEGIN
                   RESET;
                   IF FIND THEN;
                 END;
               END;
               //I-BAIN-0009
               FuncionesBAINES.T18PasarAEmpresa(CurrFieldNo,Rec);
               //F-BAIN-0009
             END;

    OnDelete=VAR
               CampaignTargetGr@1000 : Record 7030;
               ContactBusRel@1001 : Record 5054;
               Job@1004 : Record 167;
               SocialListeningSearchTopic@1007 : Record 871;
               StdCustSalesCode@1003 : Record 172;
               CustomReportSelection@1008 : Record 9657;
               MyCustomer@1005 : Record 9150;
               ServHeader@1009 : Record 5900;
               CampaignTargetGrMgmt@1002 : Codeunit 7030;
               VATRegistrationLogMgt@1006 : Codeunit 249;
               ConfirmManagement@1010 : Codeunit 27;
               DocumentMove@1100000 : Codeunit 7000004;
             BEGIN
               ApprovalsMgmt.OnCancelCustomerApprovalRequest(Rec);

               ServiceItem.SETRANGE("Customer No.","No.");
               IF ServiceItem.FINDFIRST THEN
                 IF ConfirmManagement.ConfirmProcess(
                      STRSUBSTNO(Text008,TABLECAPTION,"No.",ServiceItem.FIELDCAPTION("Customer No.")),TRUE)
                 THEN
                   ServiceItem.MODIFYALL("Customer No.",'')
                 ELSE
                   ERROR(Text009);

               Job.SETRANGE("Bill-to Customer No.","No.");
               IF NOT Job.ISEMPTY THEN
                 ERROR(Text015,TABLECAPTION,"No.",Job.TABLECAPTION);

               MoveEntries.MoveCustEntries(Rec);

               DocumentMove.MoveReceivableDocs(Rec);

               CommentLine.SETRANGE("Table Name",CommentLine."Table Name"::Customer);
               CommentLine.SETRANGE("No.","No.");
               CommentLine.DELETEALL;

               CustBankAcc.SETRANGE("Customer No.","No.");
               CustBankAcc.DELETEALL;

               ShipToAddr.SETRANGE("Customer No.","No.");
               ShipToAddr.DELETEALL;

               SalesPrice.SETRANGE("Sales Type",SalesPrice."Sales Type"::Customer);
               SalesPrice.SETRANGE("Sales Code","No.");
               SalesPrice.DELETEALL;

               SalesLineDisc.SETRANGE("Sales Type",SalesLineDisc."Sales Type"::Customer);
               SalesLineDisc.SETRANGE("Sales Code","No.");
               SalesLineDisc.DELETEALL;

               SalesPrepmtPct.SETCURRENTKEY("Sales Type","Sales Code");
               SalesPrepmtPct.SETRANGE("Sales Type",SalesPrepmtPct."Sales Type"::Customer);
               SalesPrepmtPct.SETRANGE("Sales Code","No.");
               SalesPrepmtPct.DELETEALL;

               StdCustSalesCode.SETRANGE("Customer No.","No.");
               StdCustSalesCode.DELETEALL(TRUE);

               CustPmtAddress.SETRANGE("Customer No.","No.");
               IF CustPmtAddress.FINDFIRST THEN
                 CustPmtAddress.DELETEALL;

               ItemCrossReference.SETCURRENTKEY("Cross-Reference Type","Cross-Reference Type No.");
               ItemCrossReference.SETRANGE("Cross-Reference Type",ItemCrossReference."Cross-Reference Type"::Customer);
               ItemCrossReference.SETRANGE("Cross-Reference Type No.","No.");
               ItemCrossReference.DELETEALL;

               IF NOT SocialListeningSearchTopic.ISEMPTY THEN BEGIN
                 SocialListeningSearchTopic.FindSearchTopic(SocialListeningSearchTopic."Source Type"::Customer,"No.");
                 SocialListeningSearchTopic.DELETEALL;
               END;

               SalesOrderLine.SETCURRENTKEY("Document Type","Bill-to Customer No.");
               SalesOrderLine.SETRANGE("Bill-to Customer No.","No.");
               IF SalesOrderLine.FINDFIRST THEN
                 ERROR(
                   Text000,
                   TABLECAPTION,"No.",SalesOrderLine."Document Type");

               SalesOrderLine.SETRANGE("Bill-to Customer No.");
               SalesOrderLine.SETRANGE("Sell-to Customer No.","No.");
               IF SalesOrderLine.FINDFIRST THEN
                 ERROR(
                   Text000,
                   TABLECAPTION,"No.",SalesOrderLine."Document Type");

               CampaignTargetGr.SETRANGE("No.","No.");
               CampaignTargetGr.SETRANGE(Type,CampaignTargetGr.Type::Customer);
               IF CampaignTargetGr.FIND('-') THEN BEGIN
                 ContactBusRel.SETRANGE("Link to Table",ContactBusRel."Link to Table"::Customer);
                 ContactBusRel.SETRANGE("No.","No.");
                 ContactBusRel.FINDFIRST;
                 REPEAT
                   CampaignTargetGrMgmt.ConverttoContact(Rec,ContactBusRel."Contact No.");
                 UNTIL CampaignTargetGr.NEXT = 0;
               END;

               ServContract.SETFILTER(Status,'<>%1',ServContract.Status::Canceled);
               ServContract.SETRANGE("Customer No.","No.");
               IF NOT ServContract.ISEMPTY THEN
                 ERROR(
                   Text007,
                   TABLECAPTION,"No.");

               ServContract.SETRANGE(Status);
               ServContract.MODIFYALL("Customer No.",'');

               ServContract.SETFILTER(Status,'<>%1',ServContract.Status::Canceled);
               ServContract.SETRANGE("Bill-to Customer No.","No.");
               IF NOT ServContract.ISEMPTY THEN
                 ERROR(
                   Text007,
                   TABLECAPTION,"No.");

               ServContract.SETRANGE(Status);
               ServContract.MODIFYALL("Bill-to Customer No.",'');

               ServHeader.SETCURRENTKEY("Customer No.","Order Date");
               ServHeader.SETRANGE("Customer No.","No.");
               IF ServHeader.FINDFIRST THEN
                 ERROR(
                   Text013,
                   TABLECAPTION,"No.",ServHeader."Document Type");

               ServHeader.SETRANGE("Bill-to Customer No.");
               IF ServHeader.FINDFIRST THEN
                 ERROR(
                   Text013,
                   TABLECAPTION,"No.",ServHeader."Document Type");

               UpdateContFromCust.OnDelete(Rec);

               CustomReportSelection.SETRANGE("Source Type",DATABASE::Customer);
               CustomReportSelection.SETRANGE("Source No.","No.");
               CustomReportSelection.DELETEALL;

               MyCustomer.SETRANGE("Customer No.","No.");
               MyCustomer.DELETEALL;
               VATRegistrationLogMgt.DeleteCustomerLog(Rec);

               DimMgt.DeleteDefaultDim(DATABASE::Customer,"No.");
               CalendarManagement.DeleteCustomizedBaseCalendarData(CustomizedCalendarChange."Source Type"::Customer,"No.");
             END;

    OnRename=VAR
               CustomerTemplate@1000 : Record 5105;
             BEGIN
               ApprovalsMgmt.OnRenameRecordInApprovalRequest(xRec.RECORDID,RECORDID);
               DimMgt.RenameDefaultDim(DATABASE::Customer,xRec."No.","No.");

               SetLastModifiedDateTime;
               IF xRec."Invoice Disc. Code" = xRec."No." THEN
                 "Invoice Disc. Code" := "No.";
               CustomerTemplate.SETRANGE("Invoice Disc. Code",xRec."No.");
               CustomerTemplate.MODIFYALL("Invoice Disc. Code","No.");

               CalendarManagement.RenameCustomizedBaseCalendarData(CustomizedCalendarChange."Source Type"::Customer,"No.",xRec."No.");
             END;

    CaptionML=[ENU=Customer;
               ESP=Cliente];
    LookupPageID=Page33;
    DrillDownPageID=Page22;
  }
  FIELDS
  {
    { 1   ;   ;No.                 ;Code20        ;OnValidate=BEGIN
                                                                IF "No." <> xRec."No." THEN BEGIN
                                                                //++ BAIN-0009
                                                                  FuncionesBAINES.T18CambiarSerieEmpresa(SalesSetup,NoSeriesMgt);
                                                                //-- BAIN-0009
                                                                  SalesSetup.GET;
                                                                  NoSeriesMgt.TestManual(SalesSetup."Customer Nos.");
                                                                  "No. Series" := '';
                                                                //++ BAIN-0009
                                                                  FuncionesBAINES.T18DescambiarSerieEmpresa(SalesSetup);
                                                                //-- BAIN-0009
                                                                END;
                                                                IF "Invoice Disc. Code" = '' THEN
                                                                  "Invoice Disc. Code" := "No.";

                                                                "Payment Days Code" := "No.";
                                                                "Non-Paymt. Periods Code" := "No.";
                                                              END;

                                                   AltSearchField=Search Name;
                                                   CaptionML=[ENU=No.;
                                                              ESP=N§] }
    { 2   ;   ;Name                ;Text100       ;OnValidate=BEGIN
                                                                IF ("Search Name" = UPPERCASE(xRec.Name)) OR ("Search Name" = '') THEN
                                                                  "Search Name" := Name;
                                                              END;

                                                   CaptionML=[ENU=Name;
                                                              ESP=Nombre] }
    { 3   ;   ;Search Name         ;Code100       ;CaptionML=[ENU=Search Name;
                                                              ESP=Alias] }
    { 4   ;   ;Name 2              ;Text50        ;CaptionML=[ENU=Name 2;
                                                              ESP=Nombre 2] }
    { 5   ;   ;Address             ;Text100       ;CaptionML=[ENU=Address;
                                                              ESP=Direcci¢n] }
    { 6   ;   ;Address 2           ;Text50        ;CaptionML=[ENU=Address 2;
                                                              ESP=Direcci¢n 2] }
    { 7   ;   ;City                ;Text30        ;TableRelation=IF (Country/Region Code=CONST()) "Post Code".City
                                                                 ELSE IF (Country/Region Code=FILTER(<>'')) "Post Code".City WHERE (Country/Region Code=FIELD(Country/Region Code));
                                                   OnValidate=BEGIN
                                                                PostCode.ValidateCity(City,"Post Code",County,"Country/Region Code",(CurrFieldNo <> 0) AND GUIALLOWED);

                                                                OnAfterValidateCity(Rec,xRec);
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookupPostCode(City,"Post Code",County,"Country/Region Code");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=City;
                                                              ESP=Poblaci¢n] }
    { 8   ;   ;Contact             ;Text100       ;OnValidate=BEGIN
                                                                IF RMSetup.GET THEN
                                                                  IF RMSetup."Bus. Rel. Code for Customers" <> '' THEN
                                                                    IF (xRec.Contact = '') AND (xRec."Primary Contact No." = '') AND (Contact <> '') THEN BEGIN
                                                                      MODIFY;
                                                                      UpdateContFromCust.OnModify(Rec);
                                                                      UpdateContFromCust.InsertNewContactPerson(Rec,FALSE);
                                                                      MODIFY(TRUE);
                                                                    END
                                                              END;

                                                   OnLookup=VAR
                                                              ContactBusinessRelation@1001 : Record 5054;
                                                              Cont@1000 : Record 5050;
                                                              TempCust@1002 : TEMPORARY Record 18;
                                                            BEGIN
                                                              IF ContactBusinessRelation.FindByRelation(ContactBusinessRelation."Link to Table"::Customer,"No.") THEN BEGIN
                                                                Cont.FILTERGROUP(2);
                                                                Cont.SETRANGE("Company No.",ContactBusinessRelation."Contact No.");
                                                              END ELSE
                                                                Cont.SETRANGE("Company No.",'');

                                                              IF "Primary Contact No." <> '' THEN
                                                                IF Cont.GET("Primary Contact No.") THEN ;
                                                              IF PAGE.RUNMODAL(0,Cont) = ACTION::LookupOK THEN BEGIN
                                                                TempCust.COPY(Rec);
                                                                FIND;
                                                                TRANSFERFIELDS(TempCust,FALSE);
                                                                VALIDATE("Primary Contact No.",Cont."No.");
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Contact;
                                                              ESP=Contacto] }
    { 9   ;   ;Phone No.           ;Text30        ;OnValidate=VAR
                                                                Char@1000 : DotNet "'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Char";
                                                                i@1001 : Integer;
                                                              BEGIN
                                                                FOR i := 1 TO STRLEN("Phone No.") DO
                                                                  IF Char.IsLetter("Phone No."[i]) THEN
                                                                    FIELDERROR("Phone No.",PhoneNoCannotContainLettersErr);
                                                              END;

                                                   ExtendedDatatype=Phone No.;
                                                   CaptionML=[ENU=Phone No.;
                                                              ESP=N§ tel‚fono] }
    { 10  ;   ;Telex No.           ;Text20        ;CaptionML=[ENU=Telex No.;
                                                              ESP=N§ t‚lex] }
    { 11  ;   ;Document Sending Profile;Code20    ;TableRelation="Document Sending Profile".Code;
                                                   CaptionML=[ENU=Document Sending Profile;
                                                              ESP=Perfil de env¡o de documentos] }
    { 12  ;   ;Ship-to Code        ;Code10        ;TableRelation="Ship-to Address".Code WHERE (Customer No.=FIELD(No.));
                                                   CaptionML=[ENU=Ship-to Code;
                                                              ESP=C¢d. direcci¢n env¡o cliente] }
    { 14  ;   ;Our Account No.     ;Text20        ;CaptionML=[ENU=Our Account No.;
                                                              ESP=Ntro. n§ cuenta] }
    { 15  ;   ;Territory Code      ;Code10        ;TableRelation=Territory;
                                                   CaptionML=[ENU=Territory Code;
                                                              ESP=C¢d. territorio] }
    { 16  ;   ;Global Dimension 1 Code;Code20     ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(1,"Global Dimension 1 Code");
                                                              END;

                                                   CaptionML=[ENU=Global Dimension 1 Code;
                                                              ESP=C¢d. dimensi¢n global 1];
                                                   CaptionClass='1,1,1' }
    { 17  ;   ;Global Dimension 2 Code;Code20     ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(2,"Global Dimension 2 Code");
                                                              END;

                                                   CaptionML=[ENU=Global Dimension 2 Code;
                                                              ESP=C¢d. dimensi¢n global 2];
                                                   CaptionClass='1,1,2' }
    { 18  ;   ;Chain Name          ;Code10        ;CaptionML=[ENU=Chain Name;
                                                              ESP=C¢d. cadena] }
    { 19  ;   ;Budgeted Amount     ;Decimal       ;CaptionML=[ENU=Budgeted Amount;
                                                              ESP=Importe pptdo.];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 20  ;   ;Credit Limit (LCY)  ;Decimal       ;CaptionML=[ENU=Credit Limit (LCY);
                                                              ESP=Cr‚dito m ximo (DL)];
                                                   AutoFormatType=1 }
    { 21  ;   ;Customer Posting Group;Code20      ;TableRelation="Customer Posting Group";
                                                   OnValidate=BEGIN
                                                                GestVtas.T18TestSaldo(Rec); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Customer Posting Group;
                                                              ESP=Grupo registro cliente] }
    { 22  ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   OnValidate=BEGIN
                                                                UpdateCurrencyId;
                                                              END;

                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa] }
    { 23  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   CaptionML=[ENU=Customer Price Group;
                                                              ESP=Grupo precio cliente] }
    { 24  ;   ;Language Code       ;Code10        ;TableRelation=Language;
                                                   CaptionML=[ENU=Language Code;
                                                              ESP=C¢d. idioma] }
    { 26  ;   ;Statistics Group    ;Integer       ;CaptionML=[ENU=Statistics Group;
                                                              ESP=N§ grupo estad¡stico] }
    { 27  ;   ;Payment Terms Code  ;Code10        ;TableRelation="Payment Terms";
                                                   OnValidate=BEGIN
                                                                UpdatePaymentTermsId;
                                                              END;

                                                   CaptionML=[ENU=Payment Terms Code;
                                                              ESP=C¢d. t‚rminos pago] }
    { 28  ;   ;Fin. Charge Terms Code;Code10      ;TableRelation="Finance Charge Terms";
                                                   CaptionML=[ENU=Fin. Charge Terms Code;
                                                              ESP=C¢d. inter‚s] }
    { 29  ;   ;Salesperson Code    ;Code20        ;TableRelation=Salesperson/Purchaser;
                                                   OnValidate=BEGIN
                                                                ValidateSalesPersonCode;
                                                              END;

                                                   CaptionML=[ENU=Salesperson Code;
                                                              ESP=C¢d. vendedor] }
    { 30  ;   ;Shipment Method Code;Code10        ;TableRelation="Shipment Method";
                                                   OnValidate=BEGIN
                                                                UpdateShipmentMethodId;
                                                              END;

                                                   CaptionML=[ENU=Shipment Method Code;
                                                              ESP=C¢d. condiciones env¡o] }
    { 31  ;   ;Shipping Agent Code ;Code10        ;TableRelation="Shipping Agent";
                                                   OnValidate=BEGIN
                                                                IF "Shipping Agent Code" <> xRec."Shipping Agent Code" THEN
                                                                  VALIDATE("Shipping Agent Service Code",'');
                                                              END;

                                                   AccessByPermission=TableData 5790=R;
                                                   CaptionML=[ENU=Shipping Agent Code;
                                                              ESP=C¢d. transportista] }
    { 32  ;   ;Place of Export     ;Code20        ;CaptionML=[ENU=Place of Export;
                                                              ESP=Lugar de salida] }
    { 33  ;   ;Invoice Disc. Code  ;Code20        ;TableRelation=Customer;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Invoice Disc. Code;
                                                              ESP=C¢d. dto. factura] }
    { 34  ;   ;Customer Disc. Group;Code20        ;TableRelation="Customer Discount Group";
                                                   CaptionML=[ENU=Customer Disc. Group;
                                                              ESP=Grupo dto. cliente] }
    { 35  ;   ;Country/Region Code ;Code10        ;TableRelation=Country/Region;
                                                   OnValidate=BEGIN
                                                                PostCode.ValidateCountryCode(City,"Post Code",County,"Country/Region Code");
                                                                PostCode.ValidateCountryCode(City,"Post Code",County,"Country/Region Code");
                                                                PostCode.CheckClearPostCodeCityCounty(City,"Post Code",County,"Country/Region Code",xRec."Country/Region Code");

                                                                IF "Country/Region Code" <> xRec."Country/Region Code" THEN
                                                                  VATRegistrationValidation;
                                                              END;

                                                   CaptionML=[ENU=Country/Region Code;
                                                              ESP=C¢d. pa¡s/regi¢n] }
    { 36  ;   ;Collection Method   ;Code20        ;CaptionML=[ENU=Collection Method;
                                                              ESP=Modo pago] }
    { 37  ;   ;Amount              ;Decimal       ;CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 38  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Comment Line" WHERE (Table Name=CONST(Customer),
                                                                                           No.=FIELD(No.)));
                                                   CaptionML=[ENU=Comment;
                                                              ESP=Comentario];
                                                   Editable=No }
    { 39  ;   ;Blocked             ;Option        ;OnValidate=BEGIN
                                                                IF (Blocked <> Blocked::All) AND "Privacy Blocked" THEN
                                                                  IF GUIALLOWED THEN
                                                                    IF CONFIRM(ConfirmBlockedPrivacyBlockedQst) THEN
                                                                      "Privacy Blocked" := FALSE
                                                                    ELSE
                                                                      ERROR('')
                                                                  ELSE
                                                                    ERROR(CanNotChangeBlockedDueToPrivacyBlockedErr);
                                                              END;

                                                   CaptionML=[ENU=Blocked;
                                                              ESP=Bloqueado];
                                                   OptionCaptionML=[ENU=" ,Ship,Invoice,All";
                                                                    ESP=" ,Env¡ar,Facturar,Todos"];
                                                   OptionString=[ ,Ship,Invoice,All] }
    { 40  ;   ;Invoice Copies      ;Integer       ;CaptionML=[ENU=Invoice Copies;
                                                              ESP=N§ copias factura] }
    { 41  ;   ;Last Statement No.  ;Integer       ;CaptionML=[ENU=Last Statement No.;
                                                              ESP=élt. n§ extracto] }
    { 42  ;   ;Print Statements    ;Boolean       ;CaptionML=[ENU=Print Statements;
                                                              ESP=Imprimir extractos] }
    { 45  ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Bill-to Customer No.;
                                                              ESP=Factura-a N§ cliente] }
    { 46  ;   ;Priority            ;Integer       ;CaptionML=[ENU=Priority;
                                                              ESP=Prioridad] }
    { 47  ;   ;Payment Method Code ;Code10        ;TableRelation="Payment Method";
                                                   OnValidate=VAR
                                                                PaymentMethod@1000 : Record 289;
                                                              BEGIN
                                                                UpdatePaymentMethodId;

                                                                IF "Payment Method Code" = '' THEN
                                                                  EXIT;

                                                                PaymentMethod.GET("Payment Method Code");
                                                                IF PaymentMethod."Direct Debit" AND ("Payment Terms Code" = '') THEN
                                                                  VALIDATE("Payment Terms Code",PaymentMethod."Direct Debit Pmt. Terms Code");
                                                              END;

                                                   CaptionML=[ENU=Payment Method Code;
                                                              ESP=C¢d. forma pago] }
    { 53  ;   ;Last Modified Date Time;DateTime   ;CaptionML=[ENU=Last Modified Date Time;
                                                              ESP=Fecha y hora de £ltima modificaci¢n];
                                                   Editable=No }
    { 54  ;   ;Last Date Modified  ;Date          ;CaptionML=[ENU=Last Date Modified;
                                                              ESP=Fecha £lt. modificaci¢n];
                                                   Editable=No }
    { 55  ;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Date Filter;
                                                              ESP=Filtro fecha] }
    { 56  ;   ;Global Dimension 1 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Global Dimension 1 Filter;
                                                              ESP=Filtro dimensi¢n global 1];
                                                   CaptionClass='1,3,1' }
    { 57  ;   ;Global Dimension 2 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Global Dimension 2 Filter;
                                                              ESP=Filtro dimensi¢n global  2];
                                                   CaptionClass='1,3,2' }
    { 58  ;   ;Balance             ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Customer No.=FIELD(No.),
                                                                                                              Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                              Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                              Currency Code=FIELD(Currency Filter),
                                                                                                              Excluded from calculation=CONST(No),
                                                                                                              C¢d. cosecha=FIELD(Filtro cosecha)));
                                                   CaptionML=[ENU=Balance;
                                                              ESP=Saldo];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 59  ;   ;Balance (LCY)       ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter),
                                                                                                                      Excluded from calculation=CONST(No),
                                                                                                                      C¢d. cosecha=FIELD(Filtro cosecha)));
                                                   CaptionML=[ENU=Balance (LCY);
                                                              ESP=Saldo (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 60  ;   ;Net Change          ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Customer No.=FIELD(No.),
                                                                                                              Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                              Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                              Posting Date=FIELD(Date Filter),
                                                                                                              Currency Code=FIELD(Currency Filter),
                                                                                                              Excluded from calculation=CONST(No)));
                                                   CaptionML=[ENU=Net Change;
                                                              ESP=Saldo periodo];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 61  ;   ;Net Change (LCY)    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Posting Date=FIELD(Date Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter),
                                                                                                                      Excluded from calculation=CONST(No)));
                                                   CaptionML=[ENU=Net Change (LCY);
                                                              ESP=Saldo periodo (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 62  ;   ;Sales (LCY)         ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Cust. Ledger Entry"."Sales (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                             Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                             Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                             Posting Date=FIELD(Date Filter),
                                                                                                             Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Sales (LCY);
                                                              ESP=Ventas (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 63  ;   ;Profit (LCY)        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Cust. Ledger Entry"."Profit (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                              Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                              Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                              Posting Date=FIELD(Date Filter),
                                                                                                              Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Profit (LCY);
                                                              ESP=Bf§ bruto (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 64  ;   ;Inv. Discounts (LCY);Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Cust. Ledger Entry"."Inv. Discount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                     Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Posting Date=FIELD(Date Filter),
                                                                                                                     Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Inv. Discounts (LCY);
                                                              ESP=Dtos. factura (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 65  ;   ;Pmt. Discounts (LCY);Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                       Entry Type=FILTER(Payment Discount..'Payment Discount (VAT Adjustment)'),
                                                                                                                       Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                       Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                       Posting Date=FIELD(Date Filter),
                                                                                                                       Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Pmt. Discounts (LCY);
                                                              ESP=Dto. P.P. (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 66  ;   ;Balance Due         ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Customer No.=FIELD(No.),
                                                                                                              Initial Entry Due Date=FIELD(UPPERLIMIT(Date Filter)),
                                                                                                              Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                              Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                              Currency Code=FIELD(Currency Filter),
                                                                                                              Excluded from calculation=CONST(No)));
                                                   CaptionML=[ENU=Balance Due;
                                                              ESP=Saldo vencido];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 67  ;   ;Balance Due (LCY)   ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                      Initial Entry Due Date=FIELD(UPPERLIMIT(Date Filter)),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter),
                                                                                                                      Excluded from calculation=CONST(No)));
                                                   CaptionML=[ENU=Balance Due (LCY);
                                                              ESP=Saldo vencido (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 69  ;   ;Payments            ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Initial Document Type=CONST(Payment),
                                                                                                               Entry Type=CONST(Initial Entry),
                                                                                                               Customer No.=FIELD(No.),
                                                                                                               Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                               Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                               Posting Date=FIELD(Date Filter),
                                                                                                               Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Payments;
                                                              ESP=Pagos];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 70  ;   ;Invoice Amounts     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Initial Document Type=CONST(Invoice),
                                                                                                              Entry Type=CONST(Initial Entry),
                                                                                                              Customer No.=FIELD(No.),
                                                                                                              Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                              Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                              Posting Date=FIELD(Date Filter),
                                                                                                              Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Invoice Amounts;
                                                              ESP=Facturado];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 71  ;   ;Cr. Memo Amounts    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Initial Document Type=CONST(Credit Memo),
                                                                                                               Entry Type=CONST(Initial Entry),
                                                                                                               Customer No.=FIELD(No.),
                                                                                                               Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                               Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                               Posting Date=FIELD(Date Filter),
                                                                                                               Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Cr. Memo Amounts;
                                                              ESP=Imp. abonos];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 72  ;   ;Finance Charge Memo Amounts;Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Initial Document Type=CONST(Finance Charge Memo),
                                                                                                              Entry Type=CONST(Initial Entry),
                                                                                                              Customer No.=FIELD(No.),
                                                                                                              Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                              Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                              Posting Date=FIELD(Date Filter),
                                                                                                              Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Finance Charge Memo Amounts;
                                                              ESP=Importes doc. inter‚s];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 74  ;   ;Payments (LCY)      ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Initial Document Type=CONST(Payment),
                                                                                                                       Entry Type=CONST(Initial Entry),
                                                                                                                       Customer No.=FIELD(No.),
                                                                                                                       Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                       Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                       Posting Date=FIELD(Date Filter),
                                                                                                                       Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Payments (LCY);
                                                              ESP=Pagos (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 75  ;   ;Inv. Amounts (LCY)  ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Initial Document Type=CONST(Invoice),
                                                                                                                      Entry Type=CONST(Initial Entry),
                                                                                                                      Customer No.=FIELD(No.),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Posting Date=FIELD(Date Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Inv. Amounts (LCY);
                                                              ESP=Facturado (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 76  ;   ;Cr. Memo Amounts (LCY);Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Initial Document Type=CONST(Credit Memo),
                                                                                                                       Entry Type=CONST(Initial Entry),
                                                                                                                       Customer No.=FIELD(No.),
                                                                                                                       Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                       Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                       Posting Date=FIELD(Date Filter),
                                                                                                                       Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Cr. Memo Amounts (LCY);
                                                              ESP=Abonos (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 77  ;   ;Fin. Charge Memo Amounts (LCY);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Initial Document Type=CONST(Finance Charge Memo),
                                                                                                                      Entry Type=CONST(Initial Entry),
                                                                                                                      Customer No.=FIELD(No.),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Posting Date=FIELD(Date Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Fin. Charge Memo Amounts (LCY);
                                                              ESP=Importes doc. inter‚s (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 78  ;   ;Outstanding Orders  ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Amount" WHERE (Document Type=CONST(Order),
                                                                                                            Bill-to Customer No.=FIELD(No.),
                                                                                                            Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                            Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                            Currency Code=FIELD(Currency Filter)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Outstanding Orders;
                                                              ESP=Importe pedidos pendientes];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 79  ;   ;Shipped Not Invoiced;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Shipped Not Invoiced" WHERE (Document Type=CONST(Order),
                                                                                                              Bill-to Customer No.=FIELD(No.),
                                                                                                              Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                              Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                              Currency Code=FIELD(Currency Filter)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipped Not Invoiced;
                                                              ESP=Enviado no facturado];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 80  ;   ;Application Method  ;Option        ;CaptionML=[ENU=Application Method;
                                                              ESP=M‚todo liquidaci¢n];
                                                   OptionCaptionML=[ENU=Manual,Apply to Oldest;
                                                                    ESP=Manual,Por antigedad];
                                                   OptionString=Manual,Apply to Oldest }
    { 82  ;   ;Prices Including VAT;Boolean       ;CaptionML=[ENU=Prices Including VAT;
                                                              ESP=Precios IVA incluido] }
    { 83  ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 84  ;   ;Fax No.             ;Text30        ;CaptionML=[ENU=Fax No.;
                                                              ESP=N§ fax] }
    { 85  ;   ;Telex Answer Back   ;Text20        ;CaptionML=[ENU=Telex Answer Back;
                                                              ESP=N§ t‚lex respuesta] }
    { 86  ;   ;VAT Registration No.;Text20        ;OnValidate=BEGIN
                                                                "VAT Registration No." := UPPERCASE("VAT Registration No.");
                                                                IF "VAT Registration No." <> xRec."VAT Registration No." THEN
                                                                  VATRegistrationValidation;
                                                              END;

                                                   CaptionML=[ENU=VAT Registration No.;
                                                              ESP=CIF/NIF] }
    { 87  ;   ;Combine Shipments   ;Boolean       ;AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Combine Shipments;
                                                              ESP=Fact. autom tica] }
    { 88  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   OnValidate=BEGIN
                                                                IF xRec."Gen. Bus. Posting Group" <> "Gen. Bus. Posting Group" THEN
                                                                  IF GenBusPostingGrp.ValidateVatBusPostingGroup(GenBusPostingGrp,"Gen. Bus. Posting Group") THEN
                                                                    VALIDATE("VAT Bus. Posting Group",GenBusPostingGrp."Def. VAT Bus. Posting Group");
                                                              END;

                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESP=Grupo registro neg. gen.] }
    { 89  ;   ;Picture             ;BLOB          ;ObsoleteState=Pending;
                                                   ObsoleteReason=Replaced by Image field;
                                                   CaptionML=[ENU=Picture;
                                                              ESP=Foto];
                                                   SubType=Bitmap }
    { 90  ;   ;GLN                 ;Code13        ;OnValidate=VAR
                                                                GLNCalculator@1000 : Codeunit 1607;
                                                              BEGIN
                                                                IF GLN <> '' THEN
                                                                  GLNCalculator.AssertValidCheckDigit13(GLN);
                                                              END;

                                                   CaptionML=[ENU=GLN;
                                                              ESP=GLN];
                                                   Numeric=Yes }
    { 91  ;   ;Post Code           ;Code20        ;TableRelation=IF (Country/Region Code=CONST()) "Post Code"
                                                                 ELSE IF (Country/Region Code=FILTER(<>'')) "Post Code" WHERE (Country/Region Code=FIELD(Country/Region Code));
                                                   OnValidate=BEGIN
                                                                PostCode.ValidatePostCode(City,"Post Code",County,"Country/Region Code",(CurrFieldNo <> 0) AND GUIALLOWED);

                                                                OnAfterValidatePostCode(Rec,xRec);
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookupPostCode(City,"Post Code",County,"Country/Region Code");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Post Code;
                                                              ESP=C¢digo postal] }
    { 92  ;   ;County              ;Text30        ;CaptionML=[ENU=County;
                                                              ESP=Provincia];
                                                   CaptionClass='5,1,' + "Country/Region Code" }
    { 97  ;   ;Debit Amount        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Debit Amount" WHERE (Customer No.=FIELD(No.),
                                                                                                                      Entry Type=FILTER(<>Application),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Posting Date=FIELD(Date Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Debit Amount;
                                                              ESP=Importe debe];
                                                   BlankZero=Yes;
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 98  ;   ;Credit Amount       ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Credit Amount" WHERE (Customer No.=FIELD(No.),
                                                                                                                       Entry Type=FILTER(<>Application),
                                                                                                                       Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                       Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                       Posting Date=FIELD(Date Filter),
                                                                                                                       Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Credit Amount;
                                                              ESP=Importe haber];
                                                   BlankZero=Yes;
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 99  ;   ;Debit Amount (LCY)  ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Debit Amount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                            Entry Type=FILTER(<>Application),
                                                                                                                            Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                            Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                            Posting Date=FIELD(Date Filter),
                                                                                                                            Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Debit Amount (LCY);
                                                              ESP=Importe debe (DL)];
                                                   BlankZero=Yes;
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 100 ;   ;Credit Amount (LCY) ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Credit Amount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                             Entry Type=FILTER(<>Application),
                                                                                                                             Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                             Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                             Posting Date=FIELD(Date Filter),
                                                                                                                             Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Credit Amount (LCY);
                                                              ESP=Importe haber (DL)];
                                                   BlankZero=Yes;
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 102 ;   ;E-Mail              ;Text80        ;OnValidate=VAR
                                                                MailManagement@1000 : Codeunit 9520;
                                                              BEGIN
                                                                MailManagement.ValidateEmailAddressField("E-Mail");
                                                              END;

                                                   ExtendedDatatype=E-Mail;
                                                   CaptionML=[ENU=E-Mail;
                                                              ESP=Correo electr¢nico] }
    { 103 ;   ;Home Page           ;Text80        ;ExtendedDatatype=URL;
                                                   CaptionML=[ENU=Home Page;
                                                              ESP=P gina Web] }
    { 104 ;   ;Reminder Terms Code ;Code10        ;TableRelation="Reminder Terms";
                                                   CaptionML=[ENU=Reminder Terms Code;
                                                              ESP=C¢d. recordatorio] }
    { 105 ;   ;Reminder Amounts    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Initial Document Type=CONST(Reminder),
                                                                                                              Entry Type=CONST(Initial Entry),
                                                                                                              Customer No.=FIELD(No.),
                                                                                                              Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                              Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                              Posting Date=FIELD(Date Filter),
                                                                                                              Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Reminder Amounts;
                                                              ESP=Importe recordatorio];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 106 ;   ;Reminder Amounts (LCY);Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Initial Document Type=CONST(Reminder),
                                                                                                                      Entry Type=CONST(Initial Entry),
                                                                                                                      Customer No.=FIELD(No.),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Posting Date=FIELD(Date Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Reminder Amounts (LCY);
                                                              ESP=Importe recordatorio (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 107 ;   ;No. Series          ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. Series;
                                                              ESP=Nos. serie];
                                                   Editable=No }
    { 108 ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   OnValidate=BEGIN
                                                                UpdateTaxAreaId;
                                                              END;

                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESP=C¢d.  rea impuesto] }
    { 109 ;   ;Tax Liable          ;Boolean       ;CaptionML=[ENU=Tax Liable;
                                                              ESP=Sujeto a impuesto] }
    { 110 ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   OnValidate=BEGIN
                                                                UpdateTaxAreaId;
                                                              END;

                                                   CaptionML=[ENU=VAT Bus. Posting Group;
                                                              ESP=Grupo registro IVA neg.] }
    { 111 ;   ;Currency Filter     ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation=Currency;
                                                   CaptionML=[ENU=Currency Filter;
                                                              ESP=Filtro divisa] }
    { 113 ;   ;Outstanding Orders (LCY);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Amount (LCY)" WHERE (Document Type=CONST(Order),
                                                                                                                  Bill-to Customer No.=FIELD(No.),
                                                                                                                  Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                  Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                  Currency Code=FIELD(Currency Filter)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Outstanding Orders (LCY);
                                                              ESP=Pedidos pendientes (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 114 ;   ;Shipped Not Invoiced (LCY);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Shipped Not Invoiced (LCY)" WHERE (Document Type=CONST(Order),
                                                                                                                    Bill-to Customer No.=FIELD(No.),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Currency Code=FIELD(Currency Filter)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipped Not Invoiced (LCY);
                                                              ESP=Enviado no facturado (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 115 ;   ;Reserve             ;Option        ;InitValue=Optional;
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Reserve;
                                                              ESP=Reserva];
                                                   OptionCaptionML=[ENU=Never,Optional,Always;
                                                                    ESP=Nunca,Opcional,Siempre];
                                                   OptionString=Never,Optional,Always }
    { 116 ;   ;Block Payment Tolerance;Boolean    ;OnValidate=BEGIN
                                                                UpdatePaymentTolerance((CurrFieldNo <> 0) AND GUIALLOWED);
                                                              END;

                                                   CaptionML=[ENU=Block Payment Tolerance;
                                                              ESP=Bloquear tolerancia pagos] }
    { 117 ;   ;Pmt. Disc. Tolerance (LCY);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                       Entry Type=FILTER(Payment Discount Tolerance|'Payment Discount Tolerance (VAT Adjustment)'|'Payment Discount Tolerance (VAT Excl.)'),
                                                                                                                       Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                       Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                       Posting Date=FIELD(Date Filter),
                                                                                                                       Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Pmt. Disc. Tolerance (LCY);
                                                              ESP=Tolerancia dto. P.P (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 118 ;   ;Pmt. Tolerance (LCY);Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Customer No.=FIELD(No.),
                                                                                                                       Entry Type=FILTER(Payment Tolerance|'Payment Tolerance (VAT Adjustment)'|'Payment Tolerance (VAT Excl.)'),
                                                                                                                       Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                       Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                       Posting Date=FIELD(Date Filter),
                                                                                                                       Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Pmt. Tolerance (LCY);
                                                              ESP=Tolerancia pagos (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 119 ;   ;IC Partner Code     ;Code20        ;TableRelation="IC Partner";
                                                   OnValidate=VAR
                                                                CustLedgEntry@1001 : Record 21;
                                                                AccountingPeriod@1000 : Record 50;
                                                                ICPartner@1002 : Record 413;
                                                                ConfirmManagement@1003 : Codeunit 27;
                                                              BEGIN
                                                                IF xRec."IC Partner Code" <> "IC Partner Code" THEN BEGIN
                                                                  IF NOT CustLedgEntry.SETCURRENTKEY("Customer No.",Open) THEN
                                                                    CustLedgEntry.SETCURRENTKEY("Customer No.");
                                                                  CustLedgEntry.SETRANGE("Customer No.","No.");
                                                                  CustLedgEntry.SETRANGE(Open,TRUE);
                                                                  IF CustLedgEntry.FINDLAST THEN
                                                                    ERROR(Text012,FIELDCAPTION("IC Partner Code"),TABLECAPTION);

                                                                  CustLedgEntry.RESET;
                                                                  CustLedgEntry.SETCURRENTKEY("Customer No.","Posting Date");
                                                                  CustLedgEntry.SETRANGE("Customer No.","No.");
                                                                  AccountingPeriod.SETRANGE(Closed,FALSE);
                                                                  IF AccountingPeriod.FINDFIRST THEN BEGIN
                                                                    CustLedgEntry.SETFILTER("Posting Date",'>=%1',AccountingPeriod."Starting Date");
                                                                    IF CustLedgEntry.FINDFIRST THEN
                                                                      IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text011,TABLECAPTION),TRUE) THEN
                                                                        "IC Partner Code" := xRec."IC Partner Code";
                                                                  END;
                                                                END;

                                                                IF "IC Partner Code" <> '' THEN BEGIN
                                                                  ICPartner.GET("IC Partner Code");
                                                                  IF (ICPartner."Customer No." <> '') AND (ICPartner."Customer No." <> "No.") THEN
                                                                    ERROR(Text010,FIELDCAPTION("IC Partner Code"),"IC Partner Code",TABLECAPTION,ICPartner."Customer No.");
                                                                  ICPartner."Customer No." := "No.";
                                                                  ICPartner.MODIFY;
                                                                END;

                                                                IF (xRec."IC Partner Code" <> "IC Partner Code") AND ICPartner.GET(xRec."IC Partner Code") THEN BEGIN
                                                                  ICPartner."Customer No." := '';
                                                                  ICPartner.MODIFY;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=IC Partner Code;
                                                              ESP=C¢digo socio IC] }
    { 120 ;   ;Refunds             ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Initial Document Type=CONST(Refund),
                                                                                                              Entry Type=CONST(Initial Entry),
                                                                                                              Customer No.=FIELD(No.),
                                                                                                              Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                              Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                              Posting Date=FIELD(Date Filter),
                                                                                                              Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Refunds;
                                                              ESP=Reembolsos] }
    { 121 ;   ;Refunds (LCY)       ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Initial Document Type=CONST(Refund),
                                                                                                                      Entry Type=CONST(Initial Entry),
                                                                                                                      Customer No.=FIELD(No.),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Posting Date=FIELD(Date Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Refunds (LCY);
                                                              ESP=Reembolsos (DL)] }
    { 122 ;   ;Other Amounts       ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Initial Document Type=CONST(" "),
                                                                                                              Entry Type=CONST(Initial Entry),
                                                                                                              Customer No.=FIELD(No.),
                                                                                                              Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                              Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                              Posting Date=FIELD(Date Filter),
                                                                                                              Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Other Amounts;
                                                              ESP=Otros importes] }
    { 123 ;   ;Other Amounts (LCY) ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Initial Document Type=CONST(" "),
                                                                                                                      Entry Type=CONST(Initial Entry),
                                                                                                                      Customer No.=FIELD(No.),
                                                                                                                      Initial Entry Global Dim. 1=FIELD(Global Dimension 1 Filter),
                                                                                                                      Initial Entry Global Dim. 2=FIELD(Global Dimension 2 Filter),
                                                                                                                      Posting Date=FIELD(Date Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Other Amounts (LCY);
                                                              ESP=Otros importes (DL)] }
    { 124 ;   ;Prepayment %        ;Decimal       ;CaptionML=[ENU=Prepayment %;
                                                              ESP=% prepago];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 125 ;   ;Outstanding Invoices (LCY);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Amount (LCY)" WHERE (Document Type=CONST(Invoice),
                                                                                                                  Bill-to Customer No.=FIELD(No.),
                                                                                                                  Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                  Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                  Currency Code=FIELD(Currency Filter)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Outstanding Invoices (LCY);
                                                              ESP=Facturas pendientes (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 126 ;   ;Outstanding Invoices;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Amount" WHERE (Document Type=CONST(Invoice),
                                                                                                            Bill-to Customer No.=FIELD(No.),
                                                                                                            Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                            Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                            Currency Code=FIELD(Currency Filter)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Outstanding Invoices;
                                                              ESP=Facturas pendientes];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 130 ;   ;Bill-to No. Of Archived Doc.;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header Archive" WHERE (Document Type=CONST(Order),
                                                                                                   Bill-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Bill-to No. Of Archived Doc.;
                                                              ESP=Factura a-N§ de doc. archivado] }
    { 131 ;   ;Sell-to No. Of Archived Doc.;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header Archive" WHERE (Document Type=CONST(Order),
                                                                                                   Sell-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Sell-to No. Of Archived Doc.;
                                                              ESP=Venta a-N§ de doc. archivado] }
    { 132 ;   ;Partner Type        ;Option        ;CaptionML=[ENU=Partner Type;
                                                              ESP=Tipo socio];
                                                   OptionCaptionML=[ENU=" ,Company,Person";
                                                                    ESP=" ,Empresa,Persona"];
                                                   OptionString=[ ,Company,Person] }
    { 140 ;   ;Image               ;Media         ;ExtendedDatatype=Person;
                                                   CaptionML=[ENU=Image;
                                                              ESP=Imagen] }
    { 150 ;   ;Privacy Blocked     ;Boolean       ;OnValidate=BEGIN
                                                                IF "Privacy Blocked" THEN
                                                                  Blocked := Blocked::All
                                                                ELSE
                                                                  Blocked := Blocked::" ";
                                                              END;

                                                   CaptionML=[ENU=Privacy Blocked;
                                                              ESP=Privacidad bloqueada] }
    { 160 ;   ;Disable Search by Name;Boolean     ;DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Disable Search by Name;
                                                              ESP=Deshabilitar la b£squeda por nombre] }
    { 288 ;   ;Preferred Bank Account Code;Code20 ;TableRelation="Customer Bank Account".Code WHERE (Customer No.=FIELD(No.));
                                                   CaptionML=[ENU=Preferred Bank Account;
                                                              ESP=C¢digo de cuenta bancaria preferida] }
    { 840 ;   ;Cash Flow Payment Terms Code;Code10;TableRelation="Payment Terms";
                                                   CaptionML=[ENU=Cash Flow Payment Terms Code;
                                                              ESP=C¢d. condiciones de pago de flujo de efectivo] }
    { 5049;   ;Primary Contact No. ;Code20        ;TableRelation=Contact;
                                                   OnValidate=VAR
                                                                Cont@1000 : Record 5050;
                                                                ContBusRel@1001 : Record 5054;
                                                              BEGIN
                                                                Contact := '';
                                                                IF "Primary Contact No." <> '' THEN BEGIN
                                                                  Cont.GET("Primary Contact No.");

                                                                  ContBusRel.FindOrRestoreContactBusinessRelation(Cont,Rec,ContBusRel."Link to Table"::Customer);

                                                                  IF Cont."Company No." <> ContBusRel."Contact No." THEN
                                                                    ERROR(Text003,Cont."No.",Cont.Name,"No.",Name);

                                                                  IF Cont.Type = Cont.Type::Person THEN
                                                                    Contact := Cont.Name;

                                                                  IF Cont.Image.HASVALUE THEN
                                                                    CopyContactPicture(Cont);

                                                                  IF Cont."Phone No." <> '' THEN
                                                                    "Phone No." := Cont."Phone No.";
                                                                  IF Cont."E-Mail" <> '' THEN
                                                                    "E-Mail" := Cont."E-Mail";
                                                                END ELSE
                                                                  IF Image.HASVALUE THEN
                                                                    CLEAR(Image);
                                                              END;

                                                   OnLookup=VAR
                                                              Cont@1000 : Record 5050;
                                                              ContBusRel@1001 : Record 5054;
                                                              TempCust@1002 : TEMPORARY Record 18;
                                                            BEGIN
                                                              ContBusRel.SETCURRENTKEY("Link to Table","No.");
                                                              ContBusRel.SETRANGE("Link to Table",ContBusRel."Link to Table"::Customer);
                                                              ContBusRel.SETRANGE("No.","No.");
                                                              IF ContBusRel.FINDFIRST THEN BEGIN
                                                                Cont.FILTERGROUP(2);
                                                                Cont.SETRANGE("Company No.",ContBusRel."Contact No.");
                                                              END ELSE
                                                                Cont.SETRANGE("No.",'');

                                                              IF "Primary Contact No." <> '' THEN
                                                                IF Cont.GET("Primary Contact No.") THEN ;
                                                              IF PAGE.RUNMODAL(0,Cont) = ACTION::LookupOK THEN BEGIN
                                                                TempCust.COPY(Rec);
                                                                FIND;
                                                                TRANSFERFIELDS(TempCust,FALSE);
                                                                VALIDATE("Primary Contact No.",Cont."No.");
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Primary Contact No.;
                                                              ESP=N§ contacto principal] }
    { 5050;   ;Contact Type        ;Option        ;OnValidate=VAR
                                                                SalesHeader@1000 : Record 36;
                                                              BEGIN
                                                                IF IdentityManagement.IsInvAppId THEN BEGIN
                                                                  VALIDATE("Prices Including VAT","Contact Type" = "Contact Type"::Person);
                                                                  SalesHeader.SETRANGE("Sell-to Customer No.","No.");
                                                                  IF SalesHeader.FINDSET THEN
                                                                    REPEAT
                                                                      SalesHeader.VALIDATE("Prices Including VAT","Prices Including VAT");
                                                                      SalesHeader.MODIFY(TRUE);
                                                                    UNTIL SalesHeader.NEXT = 0;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Contact Type;
                                                              ESP=Tipo de contacto];
                                                   OptionCaptionML=[ENU=Company,Person;
                                                                    ESP=Empresa,Persona];
                                                   OptionString=Company,Person }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   CaptionML=[ENU=Responsibility Center;
                                                              ESP=Centro responsabilidad] }
    { 5750;   ;Shipping Advice     ;Option        ;AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipping Advice;
                                                              ESP=Aviso env¡o];
                                                   OptionCaptionML=[ENU=Partial,Complete;
                                                                    ESP=Parcial,Completo];
                                                   OptionString=Partial,Complete }
    { 5790;   ;Shipping Time       ;DateFormula   ;AccessByPermission=TableData 5790=R;
                                                   CaptionML=[ENU=Shipping Time;
                                                              ESP=Tiempo env¡o] }
    { 5792;   ;Shipping Agent Service Code;Code10 ;TableRelation="Shipping Agent Services".Code WHERE (Shipping Agent Code=FIELD(Shipping Agent Code));
                                                   OnValidate=BEGIN
                                                                IF ("Shipping Agent Code" <> '') AND
                                                                   ("Shipping Agent Service Code" <> '')
                                                                THEN
                                                                  IF ShippingAgentService.GET("Shipping Agent Code","Shipping Agent Service Code") THEN
                                                                    "Shipping Time" := ShippingAgentService."Shipping Time"
                                                                  ELSE
                                                                    EVALUATE("Shipping Time",'<>');
                                                              END;

                                                   CaptionML=[ENU=Shipping Agent Service Code;
                                                              ESP=C¢d. servicio transportista] }
    { 5900;   ;Service Zone Code   ;Code10        ;TableRelation="Service Zone";
                                                   CaptionML=[ENU=Service Zone Code;
                                                              ESP=C¢d. zona servicio] }
    { 5902;   ;Contract Gain/Loss Amount;Decimal  ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Contract Gain/Loss Entry".Amount WHERE (Customer No.=FIELD(No.),
                                                                                                            Ship-to Code=FIELD(Ship-to Filter),
                                                                                                            Change Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Contract Gain/Loss Amount;
                                                              ESP=Imp. p‚rdidas/gananc. contrato];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 5903;   ;Ship-to Filter      ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation="Ship-to Address".Code WHERE (Customer No.=FIELD(No.));
                                                   CaptionML=[ENU=Ship-to Filter;
                                                              ESP=Filtro direcci¢n de env¡o] }
    { 5910;   ;Outstanding Serv. Orders (LCY);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Service Line"."Outstanding Amount (LCY)" WHERE (Document Type=CONST(Order),
                                                                                                                    Bill-to Customer No.=FIELD(No.),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Outstanding Serv. Orders (LCY);
                                                              ESP=Pedidos servicio pendientes (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 5911;   ;Serv Shipped Not Invoiced(LCY);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Service Line"."Shipped Not Invoiced (LCY)" WHERE (Document Type=CONST(Order),
                                                                                                                      Bill-to Customer No.=FIELD(No.),
                                                                                                                      Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                      Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                      Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Serv Shipped Not Invoiced(LCY);
                                                              ESP=Servicio enviado no facturado(DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 5912;   ;Outstanding Serv.Invoices(LCY);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Service Line"."Outstanding Amount (LCY)" WHERE (Document Type=CONST(Invoice),
                                                                                                                    Bill-to Customer No.=FIELD(No.),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Currency Code=FIELD(Currency Filter)));
                                                   CaptionML=[ENU=Outstanding Serv.Invoices(LCY);
                                                              ESP=Facturas de serv. pendientes (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 7171;   ;No. of Quotes       ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Quote),
                                                                                           Sell-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Quotes;
                                                              ESP=N§ de ofertas];
                                                   Editable=No }
    { 7172;   ;No. of Blanket Orders;Integer      ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Blanket Order),
                                                                                           Sell-to Customer No.=FIELD(No.)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=No. of Blanket Orders;
                                                              ESP=N§ de pedidos abiertos];
                                                   Editable=No }
    { 7173;   ;No. of Orders       ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Order),
                                                                                           Sell-to Customer No.=FIELD(No.)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=No. of Orders;
                                                              ESP=N§ de pedidos];
                                                   Editable=No }
    { 7174;   ;No. of Invoices     ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Invoice),
                                                                                           Sell-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Invoices;
                                                              ESP=N§ de facturas];
                                                   Editable=No }
    { 7175;   ;No. of Return Orders;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Return Order),
                                                                                           Sell-to Customer No.=FIELD(No.)));
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=No. of Return Orders;
                                                              ESP=N§ de devoluciones];
                                                   Editable=No }
    { 7176;   ;No. of Credit Memos ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Credit Memo),
                                                                                           Sell-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Credit Memos;
                                                              ESP=N§ de abonos];
                                                   Editable=No }
    { 7177;   ;No. of Pstd. Shipments;Integer     ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Shipment Header" WHERE (Sell-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Pstd. Shipments;
                                                              ESP=N§ de env¡os registrados];
                                                   Editable=No }
    { 7178;   ;No. of Pstd. Invoices;Integer      ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Invoice Header" WHERE (Sell-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Pstd. Invoices;
                                                              ESP=N§ de facturas registradas];
                                                   Editable=No }
    { 7179;   ;No. of Pstd. Return Receipts;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Return Receipt Header" WHERE (Sell-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Pstd. Return Receipts;
                                                              ESP=N§ recep. devol. registradas];
                                                   Editable=No }
    { 7180;   ;No. of Pstd. Credit Memos;Integer  ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Cr.Memo Header" WHERE (Sell-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Pstd. Credit Memos;
                                                              ESP=N§ de abonos registrados];
                                                   Editable=No }
    { 7181;   ;No. of Ship-to Addresses;Integer   ;FieldClass=FlowField;
                                                   CalcFormula=Count("Ship-to Address" WHERE (Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Ship-to Addresses;
                                                              ESP=N§ de direcciones de env¡o];
                                                   Editable=No }
    { 7182;   ;Bill-To No. of Quotes;Integer      ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Quote),
                                                                                           Bill-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Bill-To No. of Quotes;
                                                              ESP=Factura a N§ de ofertas];
                                                   Editable=No }
    { 7183;   ;Bill-To No. of Blanket Orders;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Blanket Order),
                                                                                           Bill-to Customer No.=FIELD(No.)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Bill-To No. of Blanket Orders;
                                                              ESP=Factura a N§ de pedidos abiertos];
                                                   Editable=No }
    { 7184;   ;Bill-To No. of Orders;Integer      ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Order),
                                                                                           Bill-to Customer No.=FIELD(No.)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Bill-To No. of Orders;
                                                              ESP=Factura a n§ de pedidos];
                                                   Editable=No }
    { 7185;   ;Bill-To No. of Invoices;Integer    ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Invoice),
                                                                                           Bill-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Bill-To No. of Invoices;
                                                              ESP=Factura a n§ de facturas];
                                                   Editable=No }
    { 7186;   ;Bill-To No. of Return Orders;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Return Order),
                                                                                           Bill-to Customer No.=FIELD(No.)));
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Bill-To No. of Return Orders;
                                                              ESP=Factura a n§ de devoluciones];
                                                   Editable=No }
    { 7187;   ;Bill-To No. of Credit Memos;Integer;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Header" WHERE (Document Type=CONST(Credit Memo),
                                                                                           Bill-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Bill-To No. of Credit Memos;
                                                              ESP=Factura a n§ de abonos];
                                                   Editable=No }
    { 7188;   ;Bill-To No. of Pstd. Shipments;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Shipment Header" WHERE (Bill-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Bill-To No. of Pstd. Shipments;
                                                              ESP=Factura a n§ de env¡os registrados];
                                                   Editable=No }
    { 7189;   ;Bill-To No. of Pstd. Invoices;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Invoice Header" WHERE (Bill-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Bill-To No. of Pstd. Invoices;
                                                              ESP=Factura a n§ de facturas registradas];
                                                   Editable=No }
    { 7190;   ;Bill-To No. of Pstd. Return R.;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Return Receipt Header" WHERE (Bill-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Bill-To No. of Pstd. Return R.;
                                                              ESP=Fact. a-N§ r. devol. registradas];
                                                   Editable=No }
    { 7191;   ;Bill-To No. of Pstd. Cr. Memos;Integer;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Cr.Memo Header" WHERE (Bill-to Customer No.=FIELD(No.)));
                                                   CaptionML=[ENU=Bill-To No. of Pstd. Cr. Memos;
                                                              ESP=Factura a-N§ abonos registrados];
                                                   Editable=No }
    { 7600;   ;Base Calendar Code  ;Code10        ;TableRelation="Base Calendar";
                                                   CaptionML=[ENU=Base Calendar Code;
                                                              ESP=C¢digo calendario base] }
    { 7601;   ;Copy Sell-to Addr. to Qte From;Option;
                                                   AccessByPermission=TableData 5050=R;
                                                   CaptionML=[ENU=Copy Sell-to Addr. to Qte From;
                                                              ESP=Copiar en Ofertas desde Dir. venta];
                                                   OptionCaptionML=[ENU=Company,Person;
                                                                    ESP=Empresa,Persona];
                                                   OptionString=Company,Person }
    { 7602;   ;Validate EU Vat Reg. No.;Boolean   ;CaptionML=[ENU=Validate EU Vat Reg. No.;
                                                              ESP=Validar CIF/NIF de la UE] }
    { 8000;   ;Id                  ;GUID          ;CaptionML=[ENU=Id;
                                                              ESP=Id.] }
    { 8001;   ;Currency Id         ;GUID          ;TableRelation=Currency.Id;
                                                   OnValidate=BEGIN
                                                                UpdateCurrencyCode;
                                                              END;

                                                   CaptionML=[ENU=Currency Id;
                                                              ESP=Id. de divisa] }
    { 8002;   ;Payment Terms Id    ;GUID          ;TableRelation="Payment Terms".Id;
                                                   OnValidate=BEGIN
                                                                UpdatePaymentTermsCode;
                                                              END;

                                                   CaptionML=[ENU=Payment Terms Id;
                                                              ESP=Id. de condiciones de pago] }
    { 8003;   ;Shipment Method Id  ;GUID          ;TableRelation="Shipment Method".Id;
                                                   OnValidate=BEGIN
                                                                UpdateShipmentMethodCode;
                                                              END;

                                                   CaptionML=[ENU=Shipment Method Id;
                                                              ESP=Id. de condiciones de env¡o] }
    { 8004;   ;Payment Method Id   ;GUID          ;TableRelation="Payment Method".Id;
                                                   OnValidate=BEGIN
                                                                UpdatePaymentMethodCode;
                                                              END;

                                                   CaptionML=[ENU=Payment Method Id;
                                                              ESP=Id. de forma pago] }
    { 9003;   ;Tax Area ID         ;GUID          ;OnValidate=BEGIN
                                                                UpdateTaxAreaCode;
                                                              END;

                                                   CaptionML=[ENU=Tax Area ID;
                                                              ESP=Id.  rea impuesto] }
    { 9004;   ;Tax Area Display Name;Text100      ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Tax Area".Description WHERE (Code=FIELD(Tax Area Code)));
                                                   ObsoleteState=Removed;
                                                   ObsoleteReason=This field is not needed and it should not be used.;
                                                   CaptionML=[ENU=Tax Area Display Name;
                                                              ESP=Nombre para mostrar de  rea de impuesto] }
    { 9005;   ;Contact ID          ;GUID          ;CaptionML=[ENU=Contact ID;
                                                              ESP=Id. de contacto] }
    { 9006;   ;Contact Graph Id    ;Text250       ;CaptionML=[ENU=Contact Graph Id;
                                                              ESP=Id. de Graph de contacto] }
    { 10700;  ;Payment Days Code   ;Code20        ;TableRelation=Customer;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Payment Days Code;
                                                              ESP=C¢d. d¡as pago] }
    { 10701;  ;Non-Paymt. Periods Code;Code20     ;TableRelation=Customer;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Non-Paymt. Periods Code;
                                                              ESP=C¢d. periodo no pago] }
    { 10702;  ;Not in AEAT         ;Boolean       ;CaptionML=[ENU=Not in AEAT;
                                                              ESP=No est  en la AEAT] }
    { 50000;  ;C¢d. tipo cliente   ;Code20        ;TableRelation="Tipo Cliente";
                                                   OnValidate=BEGIN
                                                                //I-BAIN-0022
                                                                IF "C¢d. tipo cliente" <> xRec."C¢d. tipo cliente" THEN
                                                                  "C¢d. subtipo cliente" := '';
                                                                //F-BAIN-0022
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0022 }
    { 50001;  ;C¢d. subtipo cliente;Code20        ;TableRelation="Subtipo cliente".C¢digo WHERE (C¢d. tipo cliente=FIELD(C¢d. tipo cliente));
                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0022 }
    { 50002;  ;Tipo facturaci¢n    ;Option        ;DataClassification=ToBeClassified;
                                                   OptionString=Agrupar albaranes,Factura por albar n;
                                                   Description=BAIN-0022 }
    { 50003;  ;Periodo facturaci¢n ;Option        ;DataClassification=ToBeClassified;
                                                   OptionString=Diaria,Semanal,Quincenal,Mensual;
                                                   Description=BAIN-0022 }
    { 50004;  ;Fecha alta          ;Date          ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0022;
                                                   Editable=No }
    { 50005;  ;Pendiente revisar   ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0009 }
    { 50006;  ;Asegurado por Mapfre;Boolean       ;OnValidate=BEGIN
                                                                //I-BAIN-0017
                                                                IF NOT "Asegurado por Mapfre" THEN BEGIN
                                                                  TESTFIELD("C¢d. cliente Mapfre",'');
                                                                  TESTFIELD("Riesgo concedido Mapfre",0);
                                                                  TESTFIELD("Limite concedido Mapfre (%)",0);
                                                                END;
                                                                //F-BAIN-0017
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0017 }
    { 50007;  ;C¢d. cliente Mapfre ;Code20        ;DataClassification=ToBeClassified;
                                                   Numeric=Yes;
                                                   Description=BAIN-0017 }
    { 50008;  ;Nominativo/An¢nimo  ;Option        ;DataClassification=ToBeClassified;
                                                   OptionString=Nominativo,An¢nimo;
                                                   Description=BAIN-0017 }
    { 50009;  ;Riesgo concedido Mapfre;Decimal    ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0017;
                                                   AutoFormatType=1 }
    { 50010;  ;Limite concedido Mapfre (%);Decimal;DataClassification=ToBeClassified;
                                                   MinValue=0;
                                                   MaxValue=100;
                                                   Description=BAIN-0017 }
    { 50014;  ;C¢d. direcci¢n postal;Code20       ;TableRelation="Customer Pmt. Address".Code WHERE (Customer No.=FIELD(No.));
                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0023 }
    { 50021;  ;C¢d. zona comisi¢n cliente;Code20  ;TableRelation="Zona comisi¢n cliente".C¢digo;
                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 7014490;;Tipo destinatario   ;Option        ;OnValidate=BEGIN
                                                                GestVtas.T18ValidateTipoDest(Rec,xRec); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Consignee type;
                                                              ESP=Tipo destinatario;
                                                              PTG=Tipo Destinat rio];
                                                   OptionCaptionML=[ENU=Warehouse,customs;
                                                                    ESP=Dep¢sito fiscal,Aduana;
                                                                    PTG=Deposit rio Autorizado,Alfƒndega,Entreposto Autorizado,,,Outros];
                                                   OptionString=Dep¢sito fiscal,Aduana;
                                                   Description=VNTES }
    { 7014491;;C¢d. destinatario   ;Code10        ;TableRelation=Destinatario.C¢digo WHERE (Tipo destinatario=FIELD(Tipo destinatario));
                                                   OnValidate=BEGIN
                                                                GestVtas.T18ValidateCodDest(Rec,xRec); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Consignee code;
                                                              ESP=C¢d. destinatario;
                                                              PTG=C¢d. Destinat rio];
                                                   Description=VNTES }
    { 7014492;;C¢d. lugar entrega  ;Code10        ;TableRelation=IF (Tipo destinatario=CONST(Dep¢sito fiscal)) "Almac‚n anejo".C¢digo WHERE (C¢d. almac‚n fiscal=FIELD(C¢d. destinatario));
                                                   CaptionML=[ENU=Delivery place code;
                                                              ESP=C¢d. lugar entrega;
                                                              PTG=C¢d. Local Entrega];
                                                   Description=VNTES }
    { 7014494;;C¢d. r‚gimen fiscal ;Code10        ;TableRelation="R‚gimen fiscal".C¢digo;
                                                   CaptionML=[ENU=Tax Regime code;
                                                              ESP=C¢d. r‚gimen fiscal;
                                                              PTG=C¢d. Regime Fiscal];
                                                   Description=VNTES }
    { 7014520;;Grupo precio abono distr.;Code10   ;TableRelation="Customer Price Group";
                                                   CaptionML=[ENU=Distrib. Credit Memo Pr. Group;
                                                              ESP=Grupo precio abono distr.];
                                                   Description=VNTES }
    { 7014563;;Filtro producto     ;Code20        ;FieldClass=FlowFilter;
                                                   TableRelation=Item.No.;
                                                   CaptionML=[ENU=Item filter;
                                                              ESP=Filtro producto;
                                                              PTG=Filtro Produto];
                                                   Description=VNTES }
    { 7014566;;Cantidad vendida    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Item Ledger Entry".Quantity WHERE (Source Type=CONST(Customer),
                                                                                                        Source No.=FIELD(No.),
                                                                                                        Item No.=FIELD(Filtro producto),
                                                                                                        Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                        Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                        Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Quantity Sold;
                                                              ESP=Cantidad vendida;
                                                              PTG=Quantidade Vendida];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014796;;Grupo descuento promocional;Code10 ;TableRelation="Grupo dto. promoci¢n cliente";
                                                   CaptionML=[ENU=Promotional discount group;
                                                              ESP=Grupo descuento promocional;
                                                              PTG=Grupo Desconto Promo‡Æo];
                                                   Description=VNTES }
    { 7014797;;Filtro promoci¢n    ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation=Promoci¢n;
                                                   CaptionML=[ENU=Promotion filter;
                                                              ESP=Filtro promoci¢n;
                                                              PTG=Filtro Promo‡Æo];
                                                   Description=VNTES }
    { 7014798;;Cantidad promoci¢n  ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Item Ledger Entry".Quantity WHERE (Source Type=CONST(Customer),
                                                                                                        Source No.=FIELD(No.),
                                                                                                        Item No.=FIELD(Filtro producto),
                                                                                                        C¢d. promoci¢n=FIELD(Filtro promoci¢n),
                                                                                                        Promoci¢n=CONST(Yes),
                                                                                                        Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Quantity promotion;
                                                              ESP=Cantidad promoci¢n;
                                                              PTG=Quantidade Promo‡Æo];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014800;;Importe vendido     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Value Entry"."Sales Amount (Actual)" WHERE (Source Type=CONST(Customer),
                                                                                                                Source No.=FIELD(No.),
                                                                                                                Item No.=FIELD(Filtro producto),
                                                                                                                C¢d. promoci¢n=FIELD(Filtro promoci¢n),
                                                                                                                Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Amount sold;
                                                              ESP=Importe vendido;
                                                              PTG=Valor Vendido];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014801;;Importe promoci¢n   ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Value Entry"."Discount Amount" WHERE (Source Type=CONST(Customer),
                                                                                                           Source No.=FIELD(No.),
                                                                                                           Item No.=FIELD(Filtro producto),
                                                                                                           C¢d. promoci¢n=FIELD(Filtro promoci¢n),
                                                                                                           Promoci¢n=CONST(Yes),
                                                                                                           Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Promotion amount;
                                                              ESP=Importe promoci¢n;
                                                              PTG=Valor Promo‡Æo];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014825;;Filtro cosecha      ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation=Cosecha;
                                                   CaptionML=[ENU=Filter Harvest;
                                                              ESP=Filtro cosecha];
                                                   Description=VNTES }
    { 7014834;;No. contacto        ;Code20        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Contact Business Relation"."Contact No." WHERE (Link to Table=CONST(Customer),
                                                                                                                       No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. Contact;
                                                              ESP=No. contacto];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014850;;Ignora punto verde  ;Boolean       ;CaptionML=[ENU=Ignore green point;
                                                              ESP=Ignora punto verde];
                                                   Description=VNTES }
    { 7014872;;C¢d. grupo IIEE negocio;Code10     ;TableRelation="Grupo IIEE negocio".C¢digo;
                                                   CaptionML=[ENU=Cod. IISS business group;
                                                              ESP=C¢d. grupo IIEE negocio];
                                                   Description=VNTES }
    { 7014880;;Facturar a          ;Option        ;OnValidate=BEGIN
                                                                GestVtas.T18ValidateFacturara(Rec); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Bill to;
                                                              ESP=Facturar a];
                                                   OptionCaptionML=[ENU=Customer Chain;
                                                                    ESP=Cliente,Cadena];
                                                   OptionString=Cliente,Cadena;
                                                   Description=VNTES }
    { 7014881;;Aplicar condiciones ;Option        ;OnValidate=BEGIN
                                                                GestVtas.T18ValidateAplicarConds(Rec); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Apply conditions;
                                                              ESP=Aplicar condiciones];
                                                   OptionCaptionML=[ENU=Customer Chain;
                                                                    ESP=Cliente,Cadena];
                                                   OptionString=Cliente,Cadena;
                                                   Description=VNTES }
    { 7014882;;No. cliente - Cadena comercial;Code20;
                                                   TableRelation=Customer.No. WHERE (Cadena comercial S/N=FILTER(Yes));
                                                   OnValidate=BEGIN
                                                                GestVtas.T18ValidateNoClienteCadenaCom(Rec); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Customer code - Com. Chain;
                                                              ESP=No. cliente - Cadena comercial];
                                                   Description=VNTES }
    { 7014883;;C¢d. Subcadena comercial;Code10    ;TableRelation="Subcadena comercial".C¢digo WHERE (No. cliente cadena=FIELD(No. cliente - Cadena comercial));
                                                   OnValidate=BEGIN
                                                                GestVtas.T18ValidateSubCadenaComercial(Rec); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Cod. Commercial subchain;
                                                              ESP=C¢d. Subcadena comercial];
                                                   Description=VNTES }
    { 7014884;;Cadena comercial S/N;Boolean       ;OnValidate=VAR
                                                                Clie@1170170000 : Record 18;
                                                              BEGIN
                                                                GestVtas.T18ValidateCadenaComercialSN(Rec,xRec); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Commercial chain S / N;
                                                              ESP=Cadena comercial S/N];
                                                   Description=VNTES }
    { 7014885;;C¢digo E.D.I. factura;Code17       ;OnValidate=BEGIN
                                                                GestVtas.ValidateCodigoEDI("C¢digo E.D.I. factura"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=E.D.I. Code bill;
                                                              ESP=C¢digo E.D.I. factura];
                                                   Description=VNTES }
    { 7014886;;Facturas EDI        ;Boolean       ;CaptionML=[ENU=EDI invoices;
                                                              ESP=Facturas EDI];
                                                   Description=VNTES }
    { 7014887;;Departamento EDI    ;Option        ;CaptionML=[ENU=EDI Department;
                                                              ESP=Departamento EDI];
                                                   OptionCaptionML=[ENU= ,Mandatory;
                                                                    ESP=" ,Obligatorio"];
                                                   OptionString=[ ,Obligatorio];
                                                   Description=VNTES }
    { 7014888;;C¢digo E.D.I. peticionario;Code17  ;OnValidate=VAR
                                                                Weight@1170170000 : Text[13];
                                                                Checksum@1170170001 : Integer;
                                                              BEGIN
                                                                GestVtas.ValidateCodigoEDI("C¢digo E.D.I. peticionario"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=E.D.I. Code petitioner;
                                                              ESP=C¢digo E.D.I. peticionario];
                                                   Description=VNTES }
    { 7014889;;C¢digo E.D.I. env¡o ;Code17        ;OnValidate=VAR
                                                                Weight@1170170001 : Text[13];
                                                                Checksum@1170170000 : Integer;
                                                              BEGIN
                                                                GestVtas.ValidateCodigoEDI("C¢digo E.D.I. env¡o"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=E.D.I. Code i send;
                                                              ESP=C¢digo E.D.I. env¡o];
                                                   Description=VNTES }
    { 7014890;;Albaranes E.D.I.    ;Boolean       ;CaptionML=[ENU=E.D.I. Shipments;
                                                              ESP=Albaranes E.D.I.];
                                                   Description=VNTES }
    { 7014891;;C¢d. departamento EDI;Code20       ;CaptionML=[ENU=E.D.I. Department code;
                                                              ESP=C¢d. departamento EDI];
                                                   Description=VNTES }
    { 7014892;;C¢digo E.D.I. destino mensaje;Code17;
                                                   OnValidate=VAR
                                                                Weight@1170170000 : Text[13];
                                                                Checksum@1170170001 : Integer;
                                                              BEGIN
                                                                GestVtas.ValidateCodigoEDI("C¢digo E.D.I. destino mensaje"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=E.D.I. Code message destination;
                                                              ESP=C¢digo E.D.I. destino mensaje];
                                                   Description=VNTES }
    { 7014893;;C¢digo E.D.I. pagador;Code17       ;OnValidate=VAR
                                                                Weight@1170170000 : Text[13];
                                                                Checksum@1170170001 : Integer;
                                                              BEGIN
                                                                GestVtas.ValidateCodigoEDI("C¢digo E.D.I. pagador"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=E.D.I. Code payer;
                                                              ESP=C¢digo E.D.I. pagador];
                                                   Description=VNTES }
  }
  KEYS
  {
    {    ;No.                                     ;Clustered=Yes }
    {    ;Search Name                              }
    {    ;Customer Posting Group                   }
    {    ;Currency Code                            }
    {    ;Country/Region Code                      }
    {    ;Gen. Bus. Posting Group                  }
    {    ;Name,Address,City                        }
    {    ;VAT Registration No.                     }
    {    ;Name                                     }
    {    ;City                                     }
    {    ;Post Code                                }
    {    ;Phone No.                                }
    {    ;Contact                                  }
    {    ;Grupo descuento promocional              }
    {    ;Cadena comercial S/N,No. cliente - Cadena comercial,C¢d. Subcadena comercial }
    {    ;C¢digo E.D.I. peticionario               }
    {    ;Blocked                                  }
    {    ;Primary Contact No.                      }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;No.,Name,City,Post Code,Phone No.,Contact }
    { 2   ;Brick               ;No.,Name,Balance (LCY),Contact,Balance Due (LCY),Image }
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=You cannot delete %1 %2 because there is at least one outstanding Sales %3 for this customer.;ESP=No puede borrar %1 %2 porque hay al menos una venta pendiente %3 para este cliente.';
      Text002@1001 : TextConst 'ENU=Do you wish to create a contact for %1 %2?;ESP=¨Confirma que desea crear un contacto para %1 %2?';
      SalesSetup@1002 : Record 311;
      CommentLine@1004 : Record 97;
      SalesOrderLine@1005 : Record 37;
      CustBankAcc@1006 : Record 287;
      ShipToAddr@1007 : Record 222;
      PostCode@1008 : Record 225;
      GenBusPostingGrp@1009 : Record 250;
      ShippingAgentService@1010 : Record 5790;
      ItemCrossReference@1016 : Record 5717;
      RMSetup@1018 : Record 5079;
      SalesPrice@1021 : Record 7002;
      SalesLineDisc@1022 : Record 7004;
      SalesPrepmtPct@1003 : Record 459;
      ServContract@1026 : Record 5965;
      ServiceItem@1027 : Record 5940;
      SalespersonPurchaser@1060 : Record 13;
      CustomizedCalendarChange@1048 : Record 7602;
      CustPmtAddress@1100000 : Record 7000014;
      PaymentToleranceMgt@1038 : Codeunit 426;
      IdentityManagement@1047 : Codeunit 9801;
      NoSeriesMgt@1011 : Codeunit 396;
      MoveEntries@1012 : Codeunit 361;
      UpdateContFromCust@1013 : Codeunit 5056;
      DimMgt@1014 : Codeunit 408;
      ApprovalsMgmt@1039 : Codeunit 1535;
      CalendarManagement@1049 : Codeunit 7600;
      InsertFromContact@1015 : Boolean;
      Text003@1020 : TextConst 'ENU=Contact %1 %2 is not related to customer %3 %4.;ESP=Contacto %1 %2 no est  relacionado con cliente %3 %4.';
      Text004@1023 : TextConst 'ENU=post;ESP=registrar';
      Text005@1024 : TextConst 'ENU=create;ESP=crear';
      Text006@1025 : TextConst 'ENU=You cannot %1 this type of document when Customer %2 is blocked with type %3;ESP=No puede %1 este tipo de documento cuando el cliente %2 est  bloqueado por el tipo %3';
      Text007@1028 : TextConst 'ENU=You cannot delete %1 %2 because there is at least one not cancelled Service Contract for this customer.;ESP=No puede borrar %1 %2 por que hay al menos un contrato de servicio no cancelado para este cliente.';
      Text008@1029 : TextConst 'ENU=Deleting the %1 %2 will cause the %3 to be deleted for the associated Service Items. Do you want to continue?;ESP=Eliminar el %1 %2 har  que se elimine el %3 de los Prods. servicio asociados. ¨Desea continuar?';
      Text009@1030 : TextConst 'ENU=Cannot delete customer.;ESP=No se puede eliminar el cliente.';
      Text010@1031 : TextConst 'ENU=The %1 %2 has been assigned to %3 %4.\The same %1 cannot be entered on more than one %3. Enter another code.;ESP=%1 %2 se asign¢ a %3 %4.\No es posible seleccionar de nuevo %1 para m s de un %3. Introduzca otro c¢digo.';
      Text011@1033 : TextConst 'ENU=Reconciling IC transactions may be difficult if you change IC Partner Code because this %1 has ledger entries in a fiscal year that has not yet been closed.\ Do you still want to change the IC Partner Code?;ESP=El control de transacciones de IC puede ser dif¡cil si cambia el campo C¢digo socio IC porque este %1 contiene movimientos contables de un ejercicio que a£n no est  cerrado.\ ¨Todav¡a quiere cambiar el campo C¢digo socio IC?';
      Text012@1032 : TextConst 'ENU=You cannot change the contents of the %1 field because this %2 has one or more open ledger entries.;ESP=No puede cambiar el contenido del campo %1. %2 contiene al menos un movimiento contable abierto.';
      Text013@1035 : TextConst 'ENU=You cannot delete %1 %2 because there is at least one outstanding Service %3 for this customer.;ESP=No puede eliminar %1 %2 porque hay al menos un servicio pendiente %3 para este cliente.';
      Text014@1017 : TextConst 'ENU=Before you can use Online Map, you must fill in the Online Map Setup window.\See Setting Up Online Map in Help.;ESP=Para poder usar Online Map, primero debe rellenar la ventana Configuraci¢n Online Map.\Consulte Configuraci¢n de Online Map en la Ayuda.';
      Text015@1036 : TextConst 'ENU=You cannot delete %1 %2 because there is at least one %3 associated to this customer.;ESP=No puede borrar %1 %2 porque existe al menos un %3 asociado a este cliente.';
      AllowPaymentToleranceQst@1037 : TextConst 'ENU=Do you want to allow payment tolerance for entries that are currently open?;ESP=¨Desea permitir la tolerancia de pago para movimientos pendientes?';
      RemovePaymentRoleranceQst@1019 : TextConst 'ENU=Do you want to remove payment tolerance from entries that are currently open?;ESP=¨Confirma que desea eliminar la tolerancia pago de los movimientos actualmente pendientes?';
      Text7014510@1170170001 : TextConst 'ESP=Debe tener 13 posiciones';
      GestTPV@1100005 : Codeunit 7014555;
      GestVtas@1100006 : Codeunit 7014613;
      TPV@1200000 : Record 7014655;
      GestionEMCS@1170170000 : Codeunit 7014538;
      ConfEMCS@1170170002 : Record 7014749;
      EMCSAduana@1170170003 : Record 7014728;
      CreateNewCustTxt@1041 : TextConst '@@@="%1 is the name to be used to create the customer. ";ENU=Create a new customer card for %1;ESP=Crear una nueva ficha cliente para %1';
      SelectCustErr@1040 : TextConst 'ENU=You must select an existing customer.;ESP=Debe seleccionar un cliente existente.';
      CustNotRegisteredTxt@1042 : TextConst 'ENU=This customer is not registered. To continue, choose one of the following options:;ESP=Este cliente no est  registrado. Para continuar, elija una de las opciones siguientes:';
      SelectCustTxt@1043 : TextConst 'ENU=Select an existing customer;ESP=Seleccionar un cliente existente';
      InsertFromTemplate@1044 : Boolean;
      LookupRequested@1034 : Boolean;
      OverrideImageQst@1045 : TextConst 'ENU=Override Image?;ESP=¨Reemplazar la imagen?';
      PrivacyBlockedActionErr@1061 : TextConst '@@@="%1 = action (create or post), %2 = customer code.";ENU=You cannot %1 this type of document when Customer %2 is blocked for privacy.;ESP=No puede %1 este tipo de documento cuando el cliente %2 est  bloqueado por motivos de privacidad.';
      PrivacyBlockedGenericTxt@1062 : TextConst '@@@="%1 = customer code";ENU=Privacy Blocked must not be true for customer %1.;ESP=La opci¢n Privacidad bloqueada no debe ser verdadera para el cliente %1.';
      ConfirmBlockedPrivacyBlockedQst@1071 : TextConst 'ENU=If you change the Blocked field, the Privacy Blocked field is changed to No. Do you want to continue?;ESP=Si cambia el campo Bloqueado, se cambiar  el campo Privacidad bloqueada a No. ¨Desea continuar?';
      CanNotChangeBlockedDueToPrivacyBlockedErr@1072 : TextConst 'ENU=The Blocked field cannot be changed because the user is blocked for privacy reasons.;ESP=No se puede cambiar el campo Bloqueado porque el usuario est  bloqueado por motivos de privacidad.';
      PhoneNoCannotContainLettersErr@1046 : TextConst 'ENU=must not contain letters;ESP=no debe contener letras';
      ForceUpdateContact@1050 : Boolean;
      FuncionesBAINES@1170000000 : Codeunit 50000;

    [External]
    PROCEDURE AssistEdit@2(OldCust@1000 : Record 18) : Boolean;
    VAR
      Cust@1001 : Record 18;
    BEGIN
      WITH Cust DO BEGIN
        Cust := Rec;
      //++ BAIN-0009
        FuncionesBAINES.T18CambiarSerieEmpresa(SalesSetup,NoSeriesMgt);
      //-- BAIN-0009
        SalesSetup.GET;
        SalesSetup.TESTFIELD("Customer Nos.");
        IF NoSeriesMgt.SelectSeries(SalesSetup."Customer Nos.",OldCust."No. Series","No. Series") THEN BEGIN
          NoSeriesMgt.SetSeries("No.");
          Rec := Cust;
      //++ BAIN-0009
          FuncionesBAINES.T18DescambiarSerieEmpresa(SalesSetup);
      //-- BAIN-0009
          EXIT(TRUE);
        END;
      //++ BAIN-0009
          FuncionesBAINES.T18DescambiarSerieEmpresa(SalesSetup);
      //-- BAIN-0009
      END;
    END;

    [External]
    PROCEDURE ValidateShortcutDimCode@29(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    VAR
      IsHandled@1002 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeValidateShortcutDimCode(Rec,FieldNumber,ShortcutDimCode,IsHandled);
      IF IsHandled THEN
        EXIT;

      DimMgt.ValidateDimValueCode(FieldNumber,ShortcutDimCode);
      DimMgt.SaveDefaultDim(DATABASE::Customer,"No.",FieldNumber,ShortcutDimCode);
      MODIFY;
    END;

    [External]
    PROCEDURE ShowContact@1();
    VAR
      ContBusRel@1000 : Record 5054;
      Cont@1001 : Record 5050;
      OfficeContact@1002 : Record 5050;
      OfficeMgt@1003 : Codeunit 1630;
      ConfirmManagement@1004 : Codeunit 27;
    BEGIN
      IF OfficeMgt.GetContact(OfficeContact,"No.") AND (OfficeContact.COUNT = 1) THEN
        PAGE.RUN(PAGE::"Contact Card",OfficeContact)
      ELSE BEGIN
        IF "No." = '' THEN
          EXIT;

        ContBusRel.SETCURRENTKEY("Link to Table","No.");
        ContBusRel.SETRANGE("Link to Table",ContBusRel."Link to Table"::Customer);
        ContBusRel.SETRANGE("No.","No.");
        IF NOT ContBusRel.FINDFIRST THEN BEGIN
          IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text002,TABLECAPTION,"No."),TRUE) THEN
            EXIT;
          UpdateContFromCust.InsertNewContact(Rec,FALSE);
          ContBusRel.FINDFIRST;
        END;
        COMMIT;

        Cont.FILTERGROUP(2);
        Cont.SETRANGE("Company No.",ContBusRel."Contact No.");
        IF Cont.ISEMPTY THEN BEGIN
          Cont.SETRANGE("Company No.");
          Cont.SETRANGE("No.",ContBusRel."Contact No.");
        END;
        PAGE.RUN(PAGE::"Contact List",Cont);
      END;
    END;

    [External]
    PROCEDURE SetInsertFromContact@3(FromContact@1000 : Boolean);
    BEGIN
      InsertFromContact := FromContact;
    END;

    [External]
    PROCEDURE CheckBlockedCustOnDocs@5(Cust2@1000 : Record 18;DocType@1001 : 'Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order';Shipment@1005 : Boolean;Transaction@1003 : Boolean);
    VAR
      Source@1002 : 'Journal,Document';
    BEGIN
      IF IsOnBeforeCheckBlockedCustHandled(Cust2,Source::Document,DocType,Shipment,Transaction) THEN
        EXIT;

      WITH Cust2 DO BEGIN
        IF "Privacy Blocked" THEN
          CustPrivacyBlockedErrorMessage(Cust2,Transaction);

        IF ((Blocked = Blocked::All) OR
            ((Blocked = Blocked::Invoice) AND
             (DocType IN [DocType::Quote,DocType::Order,DocType::Invoice,DocType::"Blanket Order"])) OR
            ((Blocked = Blocked::Ship) AND (DocType IN [DocType::Quote,DocType::Order,DocType::"Blanket Order"]) AND
             (NOT Transaction)) OR
            ((Blocked = Blocked::Ship) AND (DocType IN [DocType::Quote,DocType::Order,DocType::Invoice,DocType::"Blanket Order"]) AND
             Shipment AND Transaction))
        THEN
          CustBlockedErrorMessage(Cust2,Transaction);
      END;
    END;

    [External]
    PROCEDURE CheckBlockedCustOnJnls@7(Cust2@1003 : Record 18;DocType@1002 : ' ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund';Transaction@1000 : Boolean);
    VAR
      Source@1001 : 'Journal,Document';
    BEGIN
      IF IsOnBeforeCheckBlockedCustHandled(Cust2,Source::Journal,DocType,FALSE,Transaction) THEN
        EXIT;

      WITH Cust2 DO BEGIN
        IF "Privacy Blocked" THEN
          CustPrivacyBlockedErrorMessage(Cust2,Transaction);

        IF (Blocked = Blocked::All) OR
           ((Blocked = Blocked::Invoice) AND (DocType IN [DocType::Invoice,DocType::" "]))
        THEN
          CustBlockedErrorMessage(Cust2,Transaction)
      END;
    END;

    [External]
    PROCEDURE CustBlockedErrorMessage@4(Cust2@1001 : Record 18;Transaction@1000 : Boolean);
    VAR
      Action@1002 : Text[30];
    BEGIN
      IF Transaction THEN
        Action := Text004
      ELSE
        Action := Text005;
      ERROR(Text006,Action,Cust2."No.",Cust2.Blocked);
    END;

    [External]
    PROCEDURE CustPrivacyBlockedErrorMessage@72(Cust2@1001 : Record 18;Transaction@1000 : Boolean);
    VAR
      Action@1002 : Text[30];
    BEGIN
      IF Transaction THEN
        Action := Text004
      ELSE
        Action := Text005;

      ERROR(PrivacyBlockedActionErr,Action,Cust2."No.");
    END;

    [External]
    PROCEDURE GetPrivacyBlockedGenericErrorText@73(Cust2@1001 : Record 18) : Text[250];
    BEGIN
      EXIT(STRSUBSTNO(PrivacyBlockedGenericTxt,Cust2."No."));
    END;

    [External]
    PROCEDURE DisplayMap@8();
    VAR
      MapPoint@1001 : Record 800;
      MapMgt@1000 : Codeunit 802;
    BEGIN
      IF MapPoint.FINDFIRST THEN
        MapMgt.MakeSelection(DATABASE::Customer,GETPOSITION)
      ELSE
        MESSAGE(Text014);
    END;

    [External]
    PROCEDURE GetTotalAmountLCY@10() : Decimal;
    BEGIN
      OnBeforeGetTotalAmountLCY(Rec);

      CALCFIELDS("Balance (LCY)","Outstanding Orders (LCY)","Shipped Not Invoiced (LCY)","Outstanding Invoices (LCY)",
        "Outstanding Serv. Orders (LCY)","Serv Shipped Not Invoiced(LCY)","Outstanding Serv.Invoices(LCY)");

      EXIT(GetTotalAmountLCYCommon);
    END;

    [External]
    PROCEDURE GetTotalAmountLCYUI@16() : Decimal;
    BEGIN
      OnBeforeGetTotalAmountLCYUI(Rec);

      SETAUTOCALCFIELDS("Balance (LCY)","Outstanding Orders (LCY)","Shipped Not Invoiced (LCY)","Outstanding Invoices (LCY)",
        "Outstanding Serv. Orders (LCY)","Serv Shipped Not Invoiced(LCY)","Outstanding Serv.Invoices(LCY)");

      EXIT(GetTotalAmountLCYCommon);
    END;

    LOCAL PROCEDURE GetTotalAmountLCYCommon@17() : Decimal;
    VAR
      SalesLine@1000 : Record 37;
      ServiceLine@1002 : Record 5902;
      SalesOutstandingAmountFromShipment@1001 : Decimal;
      ServOutstandingAmountFromShipment@1003 : Decimal;
      InvoicedPrepmtAmountLCY@1004 : Decimal;
      RetRcdNotInvAmountLCY@1006 : Decimal;
      AdditionalAmountLCY@1005 : Decimal;
    BEGIN
      OnBeforeGetTotalAmountLCYCommon(Rec,AdditionalAmountLCY);

      SalesOutstandingAmountFromShipment := SalesLine.OutstandingInvoiceAmountFromShipment("No.");
      ServOutstandingAmountFromShipment := ServiceLine.OutstandingInvoiceAmountFromShipment("No.");
      InvoicedPrepmtAmountLCY := GetInvoicedPrepmtAmountLCY;
      RetRcdNotInvAmountLCY := GetReturnRcdNotInvAmountLCY;

      EXIT("Balance (LCY)" + "Outstanding Orders (LCY)" + "Shipped Not Invoiced (LCY)" + "Outstanding Invoices (LCY)" +
        "Outstanding Serv. Orders (LCY)" + "Serv Shipped Not Invoiced(LCY)" + "Outstanding Serv.Invoices(LCY)" -
        SalesOutstandingAmountFromShipment - ServOutstandingAmountFromShipment - InvoicedPrepmtAmountLCY - RetRcdNotInvAmountLCY +
        AdditionalAmountLCY);
    END;

    [External]
    PROCEDURE GetSalesLCY@13() : Decimal;
    VAR
      CustomerSalesYTD@1005 : Record 18;
      AccountingPeriod@1004 : Record 50;
      StartDate@1001 : Date;
      EndDate@1000 : Date;
    BEGIN
      StartDate := AccountingPeriod.GetFiscalYearStartDate(WORKDATE);
      EndDate := AccountingPeriod.GetFiscalYearEndDate(WORKDATE);
      CustomerSalesYTD := Rec;
      CustomerSalesYTD."SECURITYFILTERING"("SECURITYFILTERING");
      CustomerSalesYTD.SETRANGE("Date Filter",StartDate,EndDate);
      CustomerSalesYTD.CALCFIELDS("Sales (LCY)");
      EXIT(CustomerSalesYTD."Sales (LCY)");
    END;

    [External]
    PROCEDURE CalcAvailableCredit@9() : Decimal;
    BEGIN
      EXIT(CalcAvailableCreditCommon(FALSE));
    END;

    [External]
    PROCEDURE CalcAvailableCreditUI@15() : Decimal;
    BEGIN
      EXIT(CalcAvailableCreditCommon(TRUE));
    END;

    LOCAL PROCEDURE CalcAvailableCreditCommon@14(CalledFromUI@1000 : Boolean) : Decimal;
    BEGIN
      IF "Credit Limit (LCY)" = 0 THEN
        EXIT(0);
      IF CalledFromUI THEN
        EXIT("Credit Limit (LCY)" - GetTotalAmountLCYUI);
      EXIT("Credit Limit (LCY)" - GetTotalAmountLCY);
    END;

    [External]
    PROCEDURE CalcOverdueBalance@11() OverDueBalance : Decimal;
    VAR
      CustLedgEntryRemainAmtQuery@1000 : Query 21 SECURITYFILTERING(Filtered);
    BEGIN
      CustLedgEntryRemainAmtQuery.SETRANGE(Customer_No,"No.");
      CustLedgEntryRemainAmtQuery.SETRANGE(IsOpen,TRUE);
      CustLedgEntryRemainAmtQuery.SETFILTER(Due_Date,'<%1',WORKDATE);
      CustLedgEntryRemainAmtQuery.OPEN;

      IF CustLedgEntryRemainAmtQuery.READ THEN
        OverDueBalance := CustLedgEntryRemainAmtQuery.Sum_Remaining_Amt_LCY;
    END;

    [External]
    PROCEDURE GetLegalEntityType@6() : Text;
    BEGIN
      EXIT(FORMAT("Partner Type"));
    END;

    [External]
    PROCEDURE GetLegalEntityTypeLbl@26() : Text;
    BEGIN
      EXIT(FIELDCAPTION("Partner Type"));
    END;

    [External]
    PROCEDURE SetStyle@12() : Text;
    BEGIN
      IF CalcAvailableCredit < 0 THEN
        EXIT('Unfavorable');
      EXIT('');
    END;

    [External]
    PROCEDURE HasValidDDMandate@23(Date@1000 : Date) : Boolean;
    VAR
      SEPADirectDebitMandate@1001 : Record 1230;
    BEGIN
      EXIT(SEPADirectDebitMandate.GetDefaultMandate("No.",Date) <> '');
    END;

    [External]
    PROCEDURE GetReturnRcdNotInvAmountLCY@53() : Decimal;
    VAR
      SalesLine@1000 : Record 37;
    BEGIN
      SalesLine.SETCURRENTKEY("Document Type","Bill-to Customer No.");
      SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::"Return Order");
      SalesLine.SETRANGE("Bill-to Customer No.","No.");
      SalesLine.CALCSUMS("Return Rcd. Not Invd. (LCY)");
      EXIT(SalesLine."Return Rcd. Not Invd. (LCY)");
    END;

    [External]
    PROCEDURE GetInvoicedPrepmtAmountLCY@18() : Decimal;
    VAR
      SalesLine@1000 : Record 37;
    BEGIN
      SalesLine.SETCURRENTKEY("Document Type","Bill-to Customer No.");
      SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
      SalesLine.SETRANGE("Bill-to Customer No.","No.");
      SalesLine.CALCSUMS("Prepmt. Amount Inv. (LCY)","Prepmt. VAT Amount Inv. (LCY)");
      EXIT(SalesLine."Prepmt. Amount Inv. (LCY)" + SalesLine."Prepmt. VAT Amount Inv. (LCY)");
    END;

    [External]
    PROCEDURE CalcCreditLimitLCYExpendedPct@19() : Decimal;
    BEGIN
      IF "Credit Limit (LCY)" = 0 THEN
        EXIT(0);

      IF "Balance (LCY)" / "Credit Limit (LCY)" < 0 THEN
        EXIT(0);

      IF "Balance (LCY)" / "Credit Limit (LCY)" > 1 THEN
        EXIT(10000);

      EXIT(ROUND("Balance (LCY)" / "Credit Limit (LCY)" * 10000,1));
    END;

    [External]
    PROCEDURE CreateAndShowNewInvoice@21();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader."Document Type" := SalesHeader."Document Type"::Invoice;
      SalesHeader.SETRANGE("Sell-to Customer No.","No.");
      SalesHeader.SetDefaultPaymentServices;
      SalesHeader.INSERT(TRUE);
      COMMIT;
      PAGE.RUN(PAGE::"Sales Invoice",SalesHeader)
    END;

    [External]
    PROCEDURE CreateAndShowNewOrder@30();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader."Document Type" := SalesHeader."Document Type"::Order;
      SalesHeader.SETRANGE("Sell-to Customer No.","No.");
      SalesHeader.SetDefaultPaymentServices;
      SalesHeader.INSERT(TRUE);
      COMMIT;
      PAGE.RUN(PAGE::"Sales Order",SalesHeader)
    END;

    [External]
    PROCEDURE CreateAndShowNewCreditMemo@22();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader."Document Type" := SalesHeader."Document Type"::"Credit Memo";
      SalesHeader.SETRANGE("Sell-to Customer No.","No.");
      SalesHeader.INSERT(TRUE);
      COMMIT;
      PAGE.RUN(PAGE::"Sales Credit Memo",SalesHeader)
    END;

    [External]
    PROCEDURE CreateAndShowNewQuote@24();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader."Document Type" := SalesHeader."Document Type"::Quote;
      SalesHeader.SETRANGE("Sell-to Customer No.","No.");
      SalesHeader.INSERT(TRUE);
      COMMIT;
      PAGE.RUN(PAGE::"Sales Quote",SalesHeader)
    END;

    LOCAL PROCEDURE UpdatePaymentTolerance@20(UseDialog@1000 : Boolean);
    BEGIN
      IF "Block Payment Tolerance" THEN BEGIN
        IF UseDialog THEN
          IF NOT CONFIRM(RemovePaymentRoleranceQst,FALSE) THEN
            EXIT;
        PaymentToleranceMgt.DelTolCustLedgEntry(Rec);
      END ELSE BEGIN
        IF UseDialog THEN
          IF NOT CONFIRM(AllowPaymentToleranceQst,FALSE) THEN
            EXIT;
        PaymentToleranceMgt.CalcTolCustLedgEntry(Rec);
      END;
    END;

    [External]
    PROCEDURE GetBillToCustomerNo@27() : Code[20];
    BEGIN
      IF "Bill-to Customer No." <> '' THEN
        EXIT("Bill-to Customer No.");
      EXIT("No.");
    END;

    [External]
    PROCEDURE HasAddressIgnoreCountryCode@37() : Boolean;
    BEGIN
      CASE TRUE OF
        Address <> '':
          EXIT(TRUE);
        "Address 2" <> '':
          EXIT(TRUE);
        City <> '':
          EXIT(TRUE);
        County <> '':
          EXIT(TRUE);
        "Post Code" <> '':
          EXIT(TRUE);
        Contact <> '':
          EXIT(TRUE);
      END;

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE HasAddress@25() : Boolean;
    BEGIN
      EXIT(HasAddressIgnoreCountryCode OR ("Country/Region Code" <> ''));
    END;

    [External]
    PROCEDURE HasDifferentAddress@49(OtherCustomer@1000 : Record 18) : Boolean;
    BEGIN
      CASE TRUE OF
        Address <> OtherCustomer.Address:
          EXIT(TRUE);
        "Address 2" <> OtherCustomer."Address 2":
          EXIT(TRUE);
        City <> OtherCustomer.City:
          EXIT(TRUE);
        County <> OtherCustomer.County:
          EXIT(TRUE);
        "Post Code" <> OtherCustomer."Post Code":
          EXIT(TRUE);
        "Country/Region Code" <> OtherCustomer."Country/Region Code":
          EXIT(TRUE);
      END;

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE GetCustNo@44(CustomerText@1000 : Text) : Text;
    BEGIN
      EXIT(GetCustNoOpenCard(CustomerText,TRUE,TRUE));
    END;

    [External]
    PROCEDURE GetCustNoOpenCard@36(CustomerText@1000 : Text;ShowCustomerCard@1006 : Boolean;ShowCreateCustomerOption@1007 : Boolean) : Code[20];
    VAR
      Customer@1001 : Record 18;
      CustomerNo@1002 : Code[20];
      NoFiltersApplied@1008 : Boolean;
      CustomerWithoutQuote@1005 : Text;
      CustomerFilterFromStart@1004 : Text;
      CustomerFilterContains@1003 : Text;
    BEGIN
      IF CustomerText = '' THEN
        EXIT('');

      IF STRLEN(CustomerText) <= MAXSTRLEN(Customer."No.") THEN
        IF Customer.GET(COPYSTR(CustomerText,1,MAXSTRLEN(Customer."No."))) THEN
          EXIT(Customer."No.");

      Customer.SETRANGE(Blocked,Customer.Blocked::" ");
      Customer.SETRANGE(Name,CustomerText);
      IF Customer.FINDFIRST THEN
        EXIT(Customer."No.");

      Customer.SETCURRENTKEY(Name);

      CustomerWithoutQuote := CONVERTSTR(CustomerText,'''','?');
      Customer.SETFILTER(Name,'''@' + CustomerWithoutQuote + '''');
      IF Customer.FINDFIRST THEN
        EXIT(Customer."No.");
      Customer.SETRANGE(Name);

      CustomerFilterFromStart := '''@' + CustomerWithoutQuote + '*''';

      Customer.FILTERGROUP := -1;
      Customer.SETFILTER("No.",CustomerFilterFromStart);

      Customer.SETFILTER(Name,CustomerFilterFromStart);

      IF Customer.FINDFIRST THEN
        EXIT(Customer."No.");

      CustomerFilterContains := '''@*' + CustomerWithoutQuote + '*''';

      Customer.SETFILTER("No.",CustomerFilterContains);
      Customer.SETFILTER(Name,CustomerFilterContains);
      Customer.SETFILTER(City,CustomerFilterContains);
      Customer.SETFILTER(Contact,CustomerFilterContains);
      Customer.SETFILTER("Phone No.",CustomerFilterContains);
      Customer.SETFILTER("Post Code",CustomerFilterContains);

      IF Customer.COUNT = 0 THEN
        MarkCustomersWithSimilarName(Customer,CustomerText);

      IF Customer.COUNT = 1 THEN BEGIN
        Customer.FINDFIRST;
        EXIT(Customer."No.");
      END;

      IF NOT GUIALLOWED THEN
        ERROR(SelectCustErr);

      IF Customer.COUNT = 0 THEN BEGIN
        IF Customer.WRITEPERMISSION THEN
          IF ShowCreateCustomerOption THEN
            CASE STRMENU(
                   STRSUBSTNO(
                     '%1,%2',STRSUBSTNO(CreateNewCustTxt,CONVERTSTR(CustomerText,',','.')),SelectCustTxt),1,CustNotRegisteredTxt) OF
              0:
                ERROR(SelectCustErr);
              1:
                EXIT(CreateNewCustomer(COPYSTR(CustomerText,1,MAXSTRLEN(Customer.Name)),ShowCustomerCard));
            END
          ELSE
            EXIT('');
        Customer.RESET;
        NoFiltersApplied := TRUE;
      END;

      IF ShowCustomerCard THEN
        CustomerNo := PickCustomer(Customer,NoFiltersApplied)
      ELSE BEGIN
        LookupRequested := TRUE;
        EXIT('');
      END;

      IF CustomerNo <> '' THEN
        EXIT(CustomerNo);

      ERROR(SelectCustErr);
    END;

    LOCAL PROCEDURE MarkCustomersWithSimilarName@33(VAR Customer@1001 : Record 18;CustomerText@1000 : Text);
    VAR
      TypeHelper@1002 : Codeunit 10;
      CustomerCount@1003 : Integer;
      CustomerTextLength@1004 : Integer;
      Treshold@1005 : Integer;
    BEGIN
      IF CustomerText = '' THEN
        EXIT;
      IF STRLEN(CustomerText) > MAXSTRLEN(Customer.Name) THEN
        EXIT;
      CustomerTextLength := STRLEN(CustomerText);
      Treshold := CustomerTextLength DIV 5;
      IF Treshold = 0 THEN
        EXIT;

      Customer.RESET;
      Customer.ASCENDING(FALSE); // most likely to search for newest customers
      Customer.SETRANGE(Blocked,Customer.Blocked::" ");
      IF Customer.FINDSET THEN
        REPEAT
          CustomerCount += 1;
          IF ABS(CustomerTextLength - STRLEN(Customer.Name)) <= Treshold THEN
            IF TypeHelper.TextDistance(UPPERCASE(CustomerText),UPPERCASE(Customer.Name)) <= Treshold THEN
              Customer.MARK(TRUE);
        UNTIL Customer.MARK OR (Customer.NEXT = 0) OR (CustomerCount > 1000);
      Customer.MARKEDONLY(TRUE);
    END;

    [External]
    PROCEDURE CreateNewCustomer@28(CustomerName@1000 : Text[100];ShowCustomerCard@1001 : Boolean) : Code[20];
    VAR
      Customer@1005 : Record 18;
      MiniCustomerTemplate@1006 : Record 1300;
      CustomerCard@1002 : Page 21;
    BEGIN
      Customer.Name := CustomerName;
      IF NOT MiniCustomerTemplate.NewCustomerFromTemplate(Customer) THEN
        Customer.INSERT(TRUE)
      ELSE
        IF CustomerName <> Customer.Name THEN BEGIN
          Customer.Name := CustomerName;
          Customer.MODIFY(TRUE);
        END;

      COMMIT;
      IF NOT ShowCustomerCard THEN
        EXIT(Customer."No.");
      Customer.SETRANGE("No.",Customer."No.");
      CustomerCard.SETTABLEVIEW(Customer);
      IF NOT (CustomerCard.RUNMODAL = ACTION::OK) THEN
        ERROR(SelectCustErr);

      EXIT(Customer."No.");
    END;

    LOCAL PROCEDURE PickCustomer@51(VAR Customer@1000 : Record 18;NoFiltersApplied@1002 : Boolean) : Code[20];
    VAR
      CustomerList@1001 : Page 22;
    BEGIN
      IF NOT NoFiltersApplied THEN
        MarkCustomersByFilters(Customer);

      CustomerList.SETTABLEVIEW(Customer);
      CustomerList.SETRECORD(Customer);
      CustomerList.LOOKUPMODE := TRUE;
      IF CustomerList.RUNMODAL = ACTION::LookupOK THEN
        CustomerList.GETRECORD(Customer)
      ELSE
        CLEAR(Customer);

      EXIT(Customer."No.");
    END;

    PROCEDURE LookupCustomer@77(VAR Customer@1000 : Record 18) : Boolean;
    VAR
      CustomerLookup@1001 : Page 33;
      Result@1002 : Boolean;
    BEGIN
      CustomerLookup.SETTABLEVIEW(Customer);
      CustomerLookup.SETRECORD(Customer);
      CustomerLookup.LOOKUPMODE := TRUE;
      Result := CustomerLookup.RUNMODAL = ACTION::LookupOK;
      IF Result THEN
        CustomerLookup.GETRECORD(Customer)
      ELSE
        CLEAR(Customer);

      EXIT(Result);
    END;

    LOCAL PROCEDURE MarkCustomersByFilters@42(VAR Customer@1000 : Record 18);
    BEGIN
      IF Customer.FINDSET THEN
        REPEAT
          Customer.MARK(TRUE);
        UNTIL Customer.NEXT = 0;
      IF Customer.FINDFIRST THEN;
      Customer.MARKEDONLY := TRUE;
    END;

    [External]
    PROCEDURE OpenCustomerLedgerEntries@31(FilterOnDueEntries@1002 : Boolean);
    VAR
      DetailedCustLedgEntry@1001 : Record 379;
      CustLedgerEntry@1000 : Record 21;
    BEGIN
      DetailedCustLedgEntry.SETRANGE("Customer No.","No.");
      COPYFILTER("Global Dimension 1 Filter",DetailedCustLedgEntry."Initial Entry Global Dim. 1");
      COPYFILTER("Global Dimension 2 Filter",DetailedCustLedgEntry."Initial Entry Global Dim. 2");
      IF FilterOnDueEntries AND (GETFILTER("Date Filter") <> '') THEN BEGIN
        COPYFILTER("Date Filter",DetailedCustLedgEntry."Initial Entry Due Date");
        DetailedCustLedgEntry.SETFILTER("Posting Date",'<=%1',GETRANGEMAX("Date Filter"));
      END;
      COPYFILTER("Currency Filter",DetailedCustLedgEntry."Currency Code");
      CustLedgerEntry.DrillDownOnEntries(DetailedCustLedgEntry);
    END;

    [External]
    PROCEDURE SetInsertFromTemplate@32(FromTemplate@1000 : Boolean);
    BEGIN
      InsertFromTemplate := FromTemplate;
    END;

    [External]
    PROCEDURE IsLookupRequested@34() Result : Boolean;
    BEGIN
      Result := LookupRequested;
      LookupRequested := FALSE;
    END;

    LOCAL PROCEDURE IsContactUpdateNeeded@48() : Boolean;
    VAR
      CustContUpdate@1001 : Codeunit 5056;
      UpdateNeeded@1000 : Boolean;
    BEGIN
      UpdateNeeded :=
        (Name <> xRec.Name) OR
        ("Search Name" <> xRec."Search Name") OR
        ("Name 2" <> xRec."Name 2") OR
        (Address <> xRec.Address) OR
        ("Address 2" <> xRec."Address 2") OR
        (City <> xRec.City) OR
        ("Phone No." <> xRec."Phone No.") OR
        ("Telex No." <> xRec."Telex No.") OR
        ("Territory Code" <> xRec."Territory Code") OR
        ("Currency Code" <> xRec."Currency Code") OR
        ("Language Code" <> xRec."Language Code") OR
        ("Salesperson Code" <> xRec."Salesperson Code") OR
        ("Country/Region Code" <> xRec."Country/Region Code") OR
        ("Fax No." <> xRec."Fax No.") OR
        ("Telex Answer Back" <> xRec."Telex Answer Back") OR
        ("VAT Registration No." <> xRec."VAT Registration No.") OR
        ("Post Code" <> xRec."Post Code") OR
        (County <> xRec.County) OR
        ("E-Mail" <> xRec."E-Mail") OR
        ("Home Page" <> xRec."Home Page") OR
        (Contact <> xRec.Contact);

      IF NOT UpdateNeeded AND NOT ISTEMPORARY THEN
        UpdateNeeded := CustContUpdate.ContactNameIsBlank("No.");

      IF ForceUpdateContact THEN
        UpdateNeeded := TRUE;

      OnBeforeIsContactUpdateNeeded(Rec,xRec,UpdateNeeded);
      EXIT(UpdateNeeded);
    END;

    [External]
    PROCEDURE IsBlocked@52() : Boolean;
    BEGIN
      IF Blocked <> Blocked::" " THEN
        EXIT(TRUE);

      IF "Privacy Blocked" THEN
        EXIT(TRUE);

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE HasAnyOpenOrPostedDocuments@60() : Boolean;
    VAR
      SalesHeader@1001 : Record 36;
      SalesLine@1000 : Record 37;
      CustLedgerEntry@1002 : Record 21;
      HasAnyDocs@1003 : Boolean;
    BEGIN
      SalesHeader.SETRANGE("Sell-to Customer No.","No.");
      IF SalesHeader.FINDFIRST THEN
        EXIT(TRUE);

      SalesLine.SETCURRENTKEY("Document Type","Bill-to Customer No.");
      SalesLine.SETRANGE("Bill-to Customer No.","No.");
      IF SalesLine.FINDFIRST THEN
        EXIT(TRUE);

      SalesLine.SETRANGE("Bill-to Customer No.");
      SalesLine.SETRANGE("Sell-to Customer No.","No.");
      IF SalesLine.FINDFIRST THEN
        EXIT(TRUE);

      CustLedgerEntry.SETRANGE("Customer No.","No.");
      IF NOT CustLedgerEntry.ISEMPTY THEN
        EXIT(TRUE);

      HasAnyDocs := FALSE;
      OnAfterHasAnyOpenOrPostedDocuments(Rec,HasAnyDocs);
      EXIT(HasAnyDocs);
    END;

    [External]
    PROCEDURE CopyFromCustomerTemplate@63(CustomerTemplate@1000 : Record 5105);
    BEGIN
      "Territory Code" := CustomerTemplate."Territory Code";
      "Global Dimension 1 Code" := CustomerTemplate."Global Dimension 1 Code";
      "Global Dimension 2 Code" := CustomerTemplate."Global Dimension 2 Code";
      "Customer Posting Group" := CustomerTemplate."Customer Posting Group";
      "Currency Code" := CustomerTemplate."Currency Code";
      "Invoice Disc. Code" := CustomerTemplate."Invoice Disc. Code";
      "Customer Price Group" := CustomerTemplate."Customer Price Group";
      "Customer Disc. Group" := CustomerTemplate."Customer Disc. Group";
      "Country/Region Code" := CustomerTemplate."Country/Region Code";
      "Allow Line Disc." := CustomerTemplate."Allow Line Disc.";
      "Gen. Bus. Posting Group" := CustomerTemplate."Gen. Bus. Posting Group";
      "VAT Bus. Posting Group" := CustomerTemplate."VAT Bus. Posting Group";
      VALIDATE("Payment Terms Code",CustomerTemplate."Payment Terms Code");
      VALIDATE("Payment Method Code",CustomerTemplate."Payment Method Code");
      "Prices Including VAT" := CustomerTemplate."Prices Including VAT";
      "Shipment Method Code" := CustomerTemplate."Shipment Method Code";

      OnAfterCopyFromCustomerTemplate(Rec,CustomerTemplate);
    END;

    LOCAL PROCEDURE CopyContactPicture@38(VAR Cont@1000 : Record 5050);
    VAR
      TempNameValueBuffer@1005 : TEMPORARY Record 823;
      FileManagement@1001 : Codeunit 419;
      ConfirmManagement@1002 : Codeunit 27;
      ExportPath@1006 : Text;
    BEGIN
      IF Image.HASVALUE THEN
        IF NOT ConfirmManagement.ConfirmProcess(OverrideImageQst,TRUE) THEN
          EXIT;

      ExportPath := TEMPORARYPATH + Cont."No." + FORMAT(Cont.Image.MEDIAID);
      Cont.Image.EXPORTFILE(ExportPath);
      FileManagement.GetServerDirectoryFilesList(TempNameValueBuffer,TEMPORARYPATH);
      TempNameValueBuffer.SETFILTER(Name,STRSUBSTNO('%1*',ExportPath));
      TempNameValueBuffer.FINDFIRST;

      CLEAR(Image);
      Image.IMPORTFILE(TempNameValueBuffer.Name,'');
      MODIFY;
      IF FileManagement.DeleteServerFile(TempNameValueBuffer.Name) THEN;
    END;

    [External]
    PROCEDURE GetInsertFromContact@69() : Boolean;
    BEGIN
      EXIT(InsertFromContact);
    END;

    [External]
    PROCEDURE GetInsertFromTemplate@68() : Boolean;
    BEGIN
      EXIT(InsertFromTemplate);
    END;

    LOCAL PROCEDURE SetDefaultSalesperson@35();
    VAR
      UserSetup@1000 : Record 91;
    BEGIN
      IF NOT UserSetup.GET(USERID) THEN
        EXIT;

      IF UserSetup."Salespers./Purch. Code" <> '' THEN
        VALIDATE("Salesperson Code",UserSetup."Salespers./Purch. Code");
    END;

    LOCAL PROCEDURE SetLastModifiedDateTime@39();
    BEGIN
      "Last Modified Date Time" := CURRENTDATETIME;
      "Last Date Modified" := TODAY;
    END;

    LOCAL PROCEDURE VATRegistrationValidation@47();
    VAR
      VATRegistrationNoFormat@1005 : Record 381;
      VATRegistrationLog@1004 : Record 249;
      VATRegNoSrvConfig@1003 : Record 248;
      VATRegistrationLogMgt@1002 : Codeunit 249;
      ResultRecordRef@1001 : RecordRef;
      ApplicableCountryCode@1000 : Code[10];
      IsHandled@1006 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeVATRegistrationValidation(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF NOT VATRegistrationNoFormat.Test("VAT Registration No.","Country/Region Code","No.",DATABASE::Customer) THEN
        EXIT;
      VATRegistrationLogMgt.LogCustomer(Rec);
      IF ("Country/Region Code" = '') AND (VATRegistrationNoFormat."Country/Region Code" = '') THEN
        EXIT;
      ApplicableCountryCode := "Country/Region Code";
      IF ApplicableCountryCode = '' THEN
        ApplicableCountryCode := VATRegistrationNoFormat."Country/Region Code";
      IF VATRegNoSrvConfig.VATRegNoSrvIsEnabled THEN BEGIN
        VATRegistrationLogMgt.ValidateVATRegNoWithVIES(ResultRecordRef,Rec,"No.",
          VATRegistrationLog."Account Type"::Customer,ApplicableCountryCode);
        ResultRecordRef.SETTABLE(Rec);
      END;
    END;

    [External]
    PROCEDURE SetAddress@40(CustomerAddress@1001 : Text[100];CustomerAddress2@1002 : Text[50];CustomerPostCode@1003 : Code[20];CustomerCity@1000 : Text[30];CustomerCounty@1004 : Text[30];CustomerCountryCode@1005 : Code[10];CustomerContact@1006 : Text[100]);
    BEGIN
      Address := CustomerAddress;
      "Address 2" := CustomerAddress2;
      "Post Code" := CustomerPostCode;
      City := CustomerCity;
      County := CustomerCounty;
      "Country/Region Code" := CustomerCountryCode;
      UpdateContFromCust.OnModify(Rec);
      Contact := CustomerContact;
    END;

    [External]
    PROCEDURE FindByEmail@41(VAR Customer@1001 : Record 18;Email@1000 : Text) : Boolean;
    VAR
      LocalContact@1002 : Record 5050;
      ContactBusinessRelation@1003 : Record 5054;
      MarketingSetup@1004 : Record 5079;
    BEGIN
      Customer.SETRANGE("E-Mail",Email);
      IF Customer.FINDFIRST THEN
        EXIT(TRUE);

      Customer.SETRANGE("E-Mail");
      LocalContact.SETRANGE("E-Mail",Email);
      IF LocalContact.FINDSET THEN BEGIN
        MarketingSetup.GET;
        REPEAT
          IF ContactBusinessRelation.GET(LocalContact."No.",MarketingSetup."Bus. Rel. Code for Customers") THEN BEGIN
            Customer.GET(ContactBusinessRelation."No.");
            EXIT(TRUE);
          END;
        UNTIL LocalContact.NEXT = 0
      END;
    END;

    [External]
    PROCEDURE UpdateReferencedIds@61();
    VAR
      GraphMgtGeneralTools@1000 : Codeunit 5465;
    BEGIN
      IF ISTEMPORARY THEN
        EXIT;

      IF NOT GraphMgtGeneralTools.IsApiEnabled THEN
        EXIT;

      UpdateCurrencyId;
      UpdatePaymentTermsId;
      UpdateShipmentMethodId;
      UpdatePaymentMethodId;
      UpdateTaxAreaId;
    END;

    [External]
    PROCEDURE GetReferencedIds@46(VAR TempField@1000 : TEMPORARY Record 2000000041);
    VAR
      DataTypeManagement@1001 : Codeunit 701;
    BEGIN
      DataTypeManagement.InsertFieldToBuffer(TempField,DATABASE::Customer,FIELDNO("Currency Id"));
      DataTypeManagement.InsertFieldToBuffer(TempField,DATABASE::Customer,FIELDNO("Payment Terms Id"));
      DataTypeManagement.InsertFieldToBuffer(TempField,DATABASE::Customer,FIELDNO("Payment Method Id"));
      DataTypeManagement.InsertFieldToBuffer(TempField,DATABASE::Customer,FIELDNO("Shipment Method Id"));
      DataTypeManagement.InsertFieldToBuffer(TempField,DATABASE::Customer,FIELDNO("Tax Area ID"));
    END;

    [External]
    PROCEDURE SetForceUpdateContact@65(NewForceUpdateContact@1000 : Boolean);
    BEGIN
      ForceUpdateContact := NewForceUpdateContact;
    END;

    LOCAL PROCEDURE UpdateCurrencyCode@54();
    VAR
      Currency@1001 : Record 4;
    BEGIN
      IF NOT ISNULLGUID("Currency Id") THEN BEGIN
        Currency.SETRANGE(Id,"Currency Id");
        Currency.FINDFIRST;
      END;

      VALIDATE("Currency Code",Currency.Code);
    END;

    LOCAL PROCEDURE UpdatePaymentTermsCode@56();
    VAR
      PaymentTerms@1001 : Record 3;
    BEGIN
      IF NOT ISNULLGUID("Payment Terms Id") THEN BEGIN
        PaymentTerms.SETRANGE(Id,"Payment Terms Id");
        PaymentTerms.FINDFIRST;
      END;

      VALIDATE("Payment Terms Code",PaymentTerms.Code);
    END;

    LOCAL PROCEDURE UpdateShipmentMethodCode@58();
    VAR
      ShipmentMethod@1001 : Record 10;
    BEGIN
      IF NOT ISNULLGUID("Shipment Method Id") THEN BEGIN
        ShipmentMethod.SETRANGE(Id,"Shipment Method Id");
        ShipmentMethod.FINDFIRST;
      END;

      VALIDATE("Shipment Method Code",ShipmentMethod.Code);
    END;

    LOCAL PROCEDURE UpdatePaymentMethodCode@43();
    VAR
      PaymentMethod@1001 : Record 289;
    BEGIN
      IF NOT ISNULLGUID("Payment Method Id") THEN BEGIN
        PaymentMethod.SETRANGE(Id,"Payment Method Id");
        PaymentMethod.FINDFIRST;
      END;

      VALIDATE("Payment Method Code",PaymentMethod.Code);
    END;

    [External]
    PROCEDURE UpdateCurrencyId@55();
    VAR
      Currency@1000 : Record 4;
    BEGIN
      IF "Currency Code" = '' THEN BEGIN
        CLEAR("Currency Id");
        EXIT;
      END;

      IF NOT Currency.GET("Currency Code") THEN
        EXIT;

      "Currency Id" := Currency.Id;
    END;

    [External]
    PROCEDURE UpdatePaymentTermsId@57();
    VAR
      PaymentTerms@1000 : Record 3;
    BEGIN
      IF "Payment Terms Code" = '' THEN BEGIN
        CLEAR("Payment Terms Id");
        EXIT;
      END;

      IF NOT PaymentTerms.GET("Payment Terms Code") THEN
        EXIT;

      "Payment Terms Id" := PaymentTerms.Id;
    END;

    [External]
    PROCEDURE UpdateShipmentMethodId@59();
    VAR
      ShipmentMethod@1000 : Record 10;
    BEGIN
      IF "Shipment Method Code" = '' THEN BEGIN
        CLEAR("Shipment Method Id");
        EXIT;
      END;

      IF NOT ShipmentMethod.GET("Shipment Method Code") THEN
        EXIT;

      "Shipment Method Id" := ShipmentMethod.Id;
    END;

    [External]
    PROCEDURE UpdatePaymentMethodId@45();
    VAR
      PaymentMethod@1000 : Record 289;
    BEGIN
      IF "Payment Method Code" = '' THEN BEGIN
        CLEAR("Payment Method Id");
        EXIT;
      END;

      IF NOT PaymentMethod.GET("Payment Method Code") THEN
        EXIT;

      "Payment Method Id" := PaymentMethod.Id;
    END;

    [External]
    PROCEDURE UpdateTaxAreaId@1166();
    VAR
      VATBusinessPostingGroup@1002 : Record 323;
      TaxArea@1000 : Record 318;
      GeneralLedgerSetup@1001 : Record 98;
    BEGIN
      IF GeneralLedgerSetup.UseVat THEN BEGIN
        IF "VAT Bus. Posting Group" = '' THEN BEGIN
          CLEAR("Tax Area ID");
          EXIT;
        END;

        IF NOT VATBusinessPostingGroup.GET("VAT Bus. Posting Group") THEN
          EXIT;

        "Tax Area ID" := VATBusinessPostingGroup.Id;
      END ELSE BEGIN
        IF "Tax Area Code" = '' THEN BEGIN
          CLEAR("Tax Area ID");
          EXIT;
        END;

        IF NOT TaxArea.GET("Tax Area Code") THEN
          EXIT;

        "Tax Area ID" := TaxArea.Id;
      END;
    END;

    LOCAL PROCEDURE UpdateTaxAreaCode@1164();
    VAR
      TaxArea@1001 : Record 318;
      VATBusinessPostingGroup@1000 : Record 323;
      GeneralLedgerSetup@1002 : Record 98;
    BEGIN
      IF ISNULLGUID("Tax Area ID") THEN
        EXIT;

      IF GeneralLedgerSetup.UseVat THEN BEGIN
        VATBusinessPostingGroup.SETRANGE(Id,"Tax Area ID");
        VATBusinessPostingGroup.FINDFIRST;
        "VAT Bus. Posting Group" := VATBusinessPostingGroup.Code;
      END ELSE BEGIN
        TaxArea.SETRANGE(Id,"Tax Area ID");
        TaxArea.FINDFIRST;
        "Tax Area Code" := TaxArea.Code;
      END;
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeIsContactUpdateNeeded@50(Customer@1000 : Record 18;xCustomer@1001 : Record 18;VAR UpdateNeeded@1002 : Boolean);
    BEGIN
    END;

    LOCAL PROCEDURE ValidateSalesPersonCode@1900();
    BEGIN
      IF "Salesperson Code" <> '' THEN
        IF SalespersonPurchaser.GET("Salesperson Code") THEN
          IF SalespersonPurchaser.VerifySalesPersonPurchaserPrivacyBlocked(SalespersonPurchaser) THEN
            ERROR(SalespersonPurchaser.GetPrivacyBlockedGenericText(SalespersonPurchaser,TRUE))
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyFromCustomerTemplate@64(VAR Customer@1000 : Record 18;CustomerTemplate@1001 : Record 5105);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterHasAnyOpenOrPostedDocuments@62(VAR Customer@1000 : Record 18;VAR HasAnyDocs@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateCity@75(VAR Customer@1000 : Record 18;xCustomer@1001 : Record 18);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidatePostCode@71(VAR Customer@1001 : Record 18;xCustomer@1000 : Record 18);
    BEGIN
    END;

    LOCAL PROCEDURE IsOnBeforeCheckBlockedCustHandled@67(Customer@1003 : Record 18;Source@1004 : 'Journal,Document';DocType@1002 : Option;Shipment@1001 : Boolean;Transaction@1000 : Boolean) IsHandled : Boolean;
    BEGIN
      OnBeforeCheckBlockedCust(Customer,Source,DocType,Shipment,Transaction,IsHandled)
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCheckBlockedCust@66(Customer@1003 : Record 18;Source@1005 : 'Journal,Document';DocType@1002 : Option;Shipment@1001 : Boolean;Transaction@1000 : Boolean;VAR IsHandled@1004 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetTotalAmountLCY@76(VAR Customer@1000 : Record 18);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetTotalAmountLCYUI@79(VAR Customer@1000 : Record 18);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetTotalAmountLCYCommon@80(VAR Customer@1000 : Record 18;VAR AdditionalAmountLCY@1001 : Decimal);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeValidateShortcutDimCode@70(VAR Customer@1000 : Record 18;FieldNumber@1002 : Integer;VAR ShortcutDimCode@1001 : Code[20];VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeVATRegistrationValidation@74(VAR Customer@1000 : Record 18;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    BEGIN
    {

      LICORES BAINES
      ========================
      BAIN-0009 JA 131107 A¤adir campo:Pendiente revisar.

      BAIN-0022 JA 121107 A¤adir campos: "C¢d. tipo cliente",
                          "C¢d. subtipo cliente","Tipo facturaci¢n",
                          "Periodo facturaci¢n","Fecha alta"
      BAIN-0023 JA 131107 A¤adir campo: "C¢d. direcci¢n postal"

      BAIN-0017 JA 131107 A¤adir campos: "Asegurado por Mapfre",
                          "C¢d. cliente Mapfre","Nominativo/An¢nimo",
                          "Riesgo concedido","Limite concedido (%)".
      19143 AC 270312 Aviso bloqueo para ofertas
    }
    END.
  }
}

OBJECT Table 21 Cust. Ledger Entry
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=12:43:12;
    Modified=Yes;
    Version List=NAVW114.00,NAVES14.00,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Cust. Ledger Entry;
               ESP=Mov. cliente];
    LookupPageID=Page25;
    DrillDownPageID=Page25;
  }
  FIELDS
  {
    { 1   ;   ;Entry No.           ;Integer       ;CaptionML=[ENU=Entry No.;
                                                              ESP=No. mov.] }
    { 3   ;   ;Customer No.        ;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Customer No.;
                                                              ESP=No. cliente] }
    { 4   ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              ESP=Fecha registro] }
    { 5   ;   ;Document Type       ;Option        ;CaptionML=[ENU=Document Type;
                                                              ESP=Tipo documento];
                                                   OptionCaptionML=[ENU=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill";
                                                                    ESP=" ,Pago,Factura,Abono,Docs. inter‚s,Recordatorio,Reembolso,,,,,,,,,,,,,,,Efecto"];
                                                   OptionString=[ ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill] }
    { 6   ;   ;Document No.        ;Code20        ;OnLookup=VAR
                                                              IncomingDocument@1000 : Record 130;
                                                            BEGIN
                                                              IncomingDocument.HyperlinkToDocument("Document No.","Posting Date");
                                                            END;

                                                   CaptionML=[ENU=Document No.;
                                                              ESP=No. documento] }
    { 7   ;   ;Description         ;Text100       ;CaptionML=[ENU=Description;
                                                              ESP=Descripci¢n] }
    { 8   ;   ;Customer Name       ;Text100       ;CaptionML=[ENU=Customer Name;
                                                              ESP=Nombre del cliente] }
    { 11  ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa] }
    { 13  ;   ;Amount              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Ledger Entry Amount=CONST(Yes),
                                                                                                              Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                              Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 14  ;   ;Remaining Amount    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                              Posting Date=FIELD(Date Filter),
                                                                                                              Excluded from calculation=CONST(No)));
                                                   CaptionML=[ENU=Remaining Amount;
                                                              ESP=Importe pendiente];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 15  ;   ;Original Amt. (LCY) ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                                      Entry Type=FILTER(Initial Entry|Expenses),
                                                                                                                      Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Original Amt. (LCY);
                                                              ESP=Importe inicial (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 16  ;   ;Remaining Amt. (LCY);Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                                      Posting Date=FIELD(Date Filter),
                                                                                                                      Excluded from calculation=CONST(No)));
                                                   CaptionML=[ENU=Remaining Amt. (LCY);
                                                              ESP=Importe pendiente (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 17  ;   ;Amount (LCY)        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Amount (LCY)" WHERE (Ledger Entry Amount=CONST(Yes),
                                                                                                                      Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                                      Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Amount (LCY);
                                                              ESP=Importe (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 18  ;   ;Sales (LCY)         ;Decimal       ;CaptionML=[ENU=Sales (LCY);
                                                              ESP=Ventas (DL)];
                                                   AutoFormatType=1 }
    { 19  ;   ;Profit (LCY)        ;Decimal       ;CaptionML=[ENU=Profit (LCY);
                                                              ESP=Bf§ bruto (DL)];
                                                   AutoFormatType=1 }
    { 20  ;   ;Inv. Discount (LCY) ;Decimal       ;CaptionML=[ENU=Inv. Discount (LCY);
                                                              ESP=Dto. factura (DL)];
                                                   AutoFormatType=1 }
    { 21  ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Sell-to Customer No.;
                                                              ESP=Venta a-No. cliente] }
    { 22  ;   ;Customer Posting Group;Code20      ;TableRelation="Customer Posting Group";
                                                   CaptionML=[ENU=Customer Posting Group;
                                                              ESP=Grupo registro cliente] }
    { 23  ;   ;Global Dimension 1 Code;Code20     ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Global Dimension 1 Code;
                                                              ESP=C¢d. dimensi¢n global 1];
                                                   CaptionClass='1,1,1' }
    { 24  ;   ;Global Dimension 2 Code;Code20     ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Global Dimension 2 Code;
                                                              ESP=C¢d. dimensi¢n global 2];
                                                   CaptionClass='1,1,2' }
    { 25  ;   ;Salesperson Code    ;Code20        ;TableRelation=Salesperson/Purchaser;
                                                   CaptionML=[ENU=Salesperson Code;
                                                              ESP=C¢d. vendedor] }
    { 27  ;   ;User ID             ;Code50        ;TableRelation=User."User Name";
                                                   OnLookup=VAR
                                                              UserMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                              UserMgt.LookupUserID("User ID");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=User ID;
                                                              ESP=Id. usuario] }
    { 28  ;   ;Source Code         ;Code10        ;TableRelation="Source Code";
                                                   CaptionML=[ENU=Source Code;
                                                              ESP=C¢d. origen] }
    { 33  ;   ;On Hold             ;Code3         ;OnValidate=BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                              END;

                                                   CaptionML=[ENU=On Hold;
                                                              ESP=Esperar] }
    { 34  ;   ;Applies-to Doc. Type;Option        ;CaptionML=[ENU=Applies-to Doc. Type;
                                                              ESP=Liq. por tipo documento];
                                                   OptionCaptionML=[ENU=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill";
                                                                    ESP=" ,Pago,Factura,Abono,Docs. inter‚s,Recordatorio,Reembolso,,,,,,,,,,,,,,,Efecto"];
                                                   OptionString=[ ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill] }
    { 35  ;   ;Applies-to Doc. No. ;Code20        ;CaptionML=[ENU=Applies-to Doc. No.;
                                                              ESP=Liq. por No. documento] }
    { 36  ;   ;Open                ;Boolean       ;CaptionML=[ENU=Open;
                                                              ESP=Pendiente] }
    { 37  ;   ;Due Date            ;Date          ;OnValidate=VAR
                                                                ReminderEntry@1000 : Record 300;
                                                                PaymentTerms@1100000 : Record 3;
                                                                ReminderIssue@1565 : Codeunit 393;
                                                              BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                                CheckBillSituation;
                                                                IF PaymentTerms.GET("Payment Terms Code") THEN
                                                                  PaymentTerms.VerifyMaxNoDaysTillDueDate("Due Date","Document Date",FIELDCAPTION("Due Date"));

                                                                IF "Due Date" <> xRec."Due Date" THEN BEGIN
                                                                  ReminderEntry.SETCURRENTKEY("Customer Entry No.",Type);
                                                                  ReminderEntry.SETRANGE("Customer Entry No.","Entry No.");
                                                                  ReminderEntry.SETRANGE(Type,ReminderEntry.Type::Reminder);
                                                                  ReminderEntry.SETRANGE("Reminder Level","Last Issued Reminder Level");
                                                                  IF ReminderEntry.FINDLAST THEN
                                                                    ReminderIssue.ChangeDueDate(ReminderEntry,"Due Date",xRec."Due Date");
                                                                END;
                                                                IF "Document Situation" <> "Document Situation"::" " THEN
                                                                  DocMisc.UpdateReceivableDueDate(Rec);
                                                              END;

                                                   CaptionML=[ENU=Due Date;
                                                              ESP=Fecha vencimiento] }
    { 38  ;   ;Pmt. Discount Date  ;Date          ;OnValidate=BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                              END;

                                                   CaptionML=[ENU=Pmt. Discount Date;
                                                              ESP=Fecha dto. P.P.] }
    { 39  ;   ;Original Pmt. Disc. Possible;Decimal;
                                                   CaptionML=[ENU=Original Pmt. Disc. Possible;
                                                              ESP=Dto. P.P. realizable inicial];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 40  ;   ;Pmt. Disc. Given (LCY);Decimal     ;CaptionML=[ENU=Pmt. Disc. Given (LCY);
                                                              ESP=Dto. P.P. (DL)];
                                                   AutoFormatType=1 }
    { 43  ;   ;Positive            ;Boolean       ;CaptionML=[ENU=Positive;
                                                              ESP=Positivo] }
    { 44  ;   ;Closed by Entry No. ;Integer       ;TableRelation="Cust. Ledger Entry";
                                                   CaptionML=[ENU=Closed by Entry No.;
                                                              ESP=Cerrado por n§ mov.] }
    { 45  ;   ;Closed at Date      ;Date          ;CaptionML=[ENU=Closed at Date;
                                                              ESP=Cerrado a la fecha] }
    { 46  ;   ;Closed by Amount    ;Decimal       ;CaptionML=[ENU=Closed by Amount;
                                                              ESP=Cerrado por importe];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 47  ;   ;Applies-to ID       ;Code50        ;OnValidate=BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                              END;

                                                   CaptionML=[ENU=Applies-to ID;
                                                              ESP=Liq. por id.] }
    { 49  ;   ;Journal Batch Name  ;Code10        ;CaptionML=[ENU=Journal Batch Name;
                                                              ESP=Nombre secci¢n diario] }
    { 50  ;   ;Reason Code         ;Code10        ;TableRelation="Reason Code";
                                                   CaptionML=[ENU=Reason Code;
                                                              ESP=C¢d. auditor¡a] }
    { 51  ;   ;Bal. Account Type   ;Option        ;CaptionML=[ENU=Bal. Account Type;
                                                              ESP=Tipo contrapartida];
                                                   OptionCaptionML=[ENU=G/L Account,Customer,Vendor,Bank Account,Fixed Asset;
                                                                    ESP=Cuenta,Cliente,Proveedor,Banco,Activo fijo];
                                                   OptionString=G/L Account,Customer,Vendor,Bank Account,Fixed Asset }
    { 52  ;   ;Bal. Account No.    ;Code20        ;TableRelation=IF (Bal. Account Type=CONST(G/L Account)) "G/L Account"
                                                                 ELSE IF (Bal. Account Type=CONST(Customer)) Customer
                                                                 ELSE IF (Bal. Account Type=CONST(Vendor)) Vendor
                                                                 ELSE IF (Bal. Account Type=CONST(Bank Account)) "Bank Account"
                                                                 ELSE IF (Bal. Account Type=CONST(Fixed Asset)) "Fixed Asset";
                                                   CaptionML=[ENU=Bal. Account No.;
                                                              ESP=Cta. contrapartida] }
    { 53  ;   ;Transaction No.     ;Integer       ;CaptionML=[ENU=Transaction No.;
                                                              ESP=No. asiento] }
    { 54  ;   ;Closed by Amount (LCY);Decimal     ;CaptionML=[ENU=Closed by Amount (LCY);
                                                              ESP=Cerrado por importe (DL)];
                                                   AutoFormatType=1 }
    { 58  ;   ;Debit Amount        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Debit Amount" WHERE (Ledger Entry Amount=CONST(Yes),
                                                                                                                      Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                                      Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Debit Amount;
                                                              ESP=Importe debe];
                                                   BlankZero=Yes;
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 59  ;   ;Credit Amount       ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Credit Amount" WHERE (Ledger Entry Amount=CONST(Yes),
                                                                                                                       Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                                       Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Credit Amount;
                                                              ESP=Importe haber];
                                                   BlankZero=Yes;
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 60  ;   ;Debit Amount (LCY)  ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Debit Amount (LCY)" WHERE (Ledger Entry Amount=CONST(Yes),
                                                                                                                            Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                                            Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Debit Amount (LCY);
                                                              ESP=Importe debe (DL)];
                                                   BlankZero=Yes;
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 61  ;   ;Credit Amount (LCY) ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry"."Credit Amount (LCY)" WHERE (Ledger Entry Amount=CONST(Yes),
                                                                                                                             Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                                             Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Credit Amount (LCY);
                                                              ESP=Importe haber (DL)];
                                                   BlankZero=Yes;
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 62  ;   ;Document Date       ;Date          ;CaptionML=[ENU=Document Date;
                                                              ESP=Fecha emisi¢n documento] }
    { 63  ;   ;External Document No.;Code35       ;CaptionML=[ENU=External Document No.;
                                                              ESP=No. documento externo] }
    { 64  ;   ;Calculate Interest  ;Boolean       ;CaptionML=[ENU=Calculate Interest;
                                                              ESP=C lculo inter‚s] }
    { 65  ;   ;Closing Interest Calculated;Boolean;CaptionML=[ENU=Closing Interest Calculated;
                                                              ESP=C lculo inter‚s cerrado] }
    { 66  ;   ;No. Series          ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. Series;
                                                              ESP=Nos. serie] }
    { 67  ;   ;Closed by Currency Code;Code10     ;TableRelation=Currency;
                                                   CaptionML=[ENU=Closed by Currency Code;
                                                              ESP=Cerrado por c¢d. divisa] }
    { 68  ;   ;Closed by Currency Amount;Decimal  ;AccessByPermission=TableData 4=R;
                                                   CaptionML=[ENU=Closed by Currency Amount;
                                                              ESP=Cerrado por importe en divisa];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Closed by Currency Code" }
    { 73  ;   ;Adjusted Currency Factor;Decimal   ;CaptionML=[ENU=Adjusted Currency Factor;
                                                              ESP=Factor divisa ajustada];
                                                   DecimalPlaces=0:15 }
    { 74  ;   ;Original Currency Factor;Decimal   ;CaptionML=[ENU=Original Currency Factor;
                                                              ESP=Factor divisa original];
                                                   DecimalPlaces=0:15 }
    { 75  ;   ;Original Amount     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Cust. Ledger Entry No.=FIELD(Entry No.),
                                                                                                              Entry Type=FILTER(Initial Entry|Expenses),
                                                                                                              Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Original Amount;
                                                              ESP=Importe inicial];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 76  ;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Date Filter;
                                                              ESP=Filtro fecha] }
    { 77  ;   ;Remaining Pmt. Disc. Possible;Decimal;
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                                CALCFIELDS(Amount,"Original Amount");

                                                                IF "Remaining Pmt. Disc. Possible" * Amount < 0 THEN
                                                                  FIELDERROR("Remaining Pmt. Disc. Possible",STRSUBSTNO(Text000,FIELDCAPTION(Amount)));

                                                                IF ABS("Remaining Pmt. Disc. Possible") > ABS("Original Amount") THEN
                                                                  FIELDERROR("Remaining Pmt. Disc. Possible",STRSUBSTNO(Text001,FIELDCAPTION("Original Amount")));
                                                              END;

                                                   CaptionML=[ENU=Remaining Pmt. Disc. Possible;
                                                              ESP=Dto. P.P realizable pendiente];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 78  ;   ;Pmt. Disc. Tolerance Date;Date     ;OnValidate=BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                              END;

                                                   CaptionML=[ENU=Pmt. Disc. Tolerance Date;
                                                              ESP=Fecha tolerancia dto. pago] }
    { 79  ;   ;Max. Payment Tolerance;Decimal     ;OnValidate=BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                                CALCFIELDS(Amount,"Remaining Amount");

                                                                IF "Max. Payment Tolerance" * Amount < 0 THEN
                                                                  FIELDERROR("Max. Payment Tolerance",STRSUBSTNO(Text000,FIELDCAPTION(Amount)));

                                                                IF ABS("Max. Payment Tolerance") > ABS("Remaining Amount") THEN
                                                                  FIELDERROR("Max. Payment Tolerance",STRSUBSTNO(Text001,FIELDCAPTION("Remaining Amount")));
                                                              END;

                                                   CaptionML=[ENU=Max. Payment Tolerance;
                                                              ESP=M x. tolerancia pagos];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 80  ;   ;Last Issued Reminder Level;Integer ;CaptionML=[ENU=Last Issued Reminder Level;
                                                              ESP=Nivel £ltim. record. emitid.] }
    { 81  ;   ;Accepted Payment Tolerance;Decimal ;CaptionML=[ENU=Accepted Payment Tolerance;
                                                              ESP=Tolerancia pagos aceptada];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 82  ;   ;Accepted Pmt. Disc. Tolerance;Boolean;
                                                   CaptionML=[ENU=Accepted Pmt. Disc. Tolerance;
                                                              ESP=Tolerancia dto. P.P. aceptada] }
    { 83  ;   ;Pmt. Tolerance (LCY);Decimal       ;CaptionML=[ENU=Pmt. Tolerance (LCY);
                                                              ESP=Tolerancia pagos (DL)];
                                                   AutoFormatType=1 }
    { 84  ;   ;Amount to Apply     ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                                CALCFIELDS("Remaining Amount");

                                                                CheckBillSituation;

                                                                IF "Amount to Apply" * "Remaining Amount" < 0 THEN
                                                                  FIELDERROR("Amount to Apply",STRSUBSTNO(Text000,FIELDCAPTION("Remaining Amount")));

                                                                IF ABS("Amount to Apply") > ABS("Remaining Amount") THEN
                                                                  FIELDERROR("Amount to Apply",STRSUBSTNO(Text001,FIELDCAPTION("Remaining Amount")));
                                                              END;

                                                   CaptionML=[ENU=Amount to Apply;
                                                              ESP=Importe a liquidar];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 85  ;   ;IC Partner Code     ;Code20        ;TableRelation="IC Partner";
                                                   CaptionML=[ENU=IC Partner Code;
                                                              ESP=C¢digo socio IC] }
    { 86  ;   ;Applying Entry      ;Boolean       ;CaptionML=[ENU=Applying Entry;
                                                              ESP=Liquidar movimiento] }
    { 87  ;   ;Reversed            ;Boolean       ;CaptionML=[ENU=Reversed;
                                                              ESP=Revertido];
                                                   BlankZero=Yes }
    { 88  ;   ;Reversed by Entry No.;Integer      ;TableRelation="Cust. Ledger Entry";
                                                   CaptionML=[ENU=Reversed by Entry No.;
                                                              ESP=Revertido por el movimiento No.];
                                                   BlankZero=Yes }
    { 89  ;   ;Reversed Entry No.  ;Integer       ;TableRelation="Cust. Ledger Entry";
                                                   CaptionML=[ENU=Reversed Entry No.;
                                                              ESP=No. movimiento revertido];
                                                   BlankZero=Yes }
    { 90  ;   ;Prepayment          ;Boolean       ;CaptionML=[ENU=Prepayment;
                                                              ESP=Prepago] }
    { 91  ;   ;Payment Terms Code  ;Code10        ;TableRelation="Payment Terms";
                                                   CaptionML=[ENU=Payment Terms Code;
                                                              ESP=C¢d. t‚rminos pago];
                                                   Editable=No }
    { 172 ;   ;Payment Method Code ;Code10        ;TableRelation="Payment Method";
                                                   OnValidate=VAR
                                                                CarteraDoc@1100000 : Record 7000002;
                                                              BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                                IF "Payment Method Code" <> xRec."Payment Method Code" THEN BEGIN
                                                                  ValidatePaymentMethod;
                                                                  CarteraDoc.UpdatePaymentMethodCode(
                                                                    "Document No.","Customer No.","Bill No.","Payment Method Code")
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Payment Method Code;
                                                              ESP=C¢d. forma pago] }
    { 173 ;   ;Applies-to Ext. Doc. No.;Code35    ;CaptionML=[ENU=Applies-to Ext. Doc. No.;
                                                              ESP=Liq. por No. doc. externo] }
    { 288 ;   ;Recipient Bank Account;Code20      ;TableRelation="Customer Bank Account".Code WHERE (Customer No.=FIELD(Customer No.));
                                                   CaptionML=[ENU=Recipient Bank Account;
                                                              ESP=Cta. bancaria destinatario] }
    { 289 ;   ;Message to Recipient;Text140       ;OnValidate=BEGIN
                                                                TESTFIELD(Open,TRUE);
                                                              END;

                                                   CaptionML=[ENU=Message to Recipient;
                                                              ESP=Mensaje al destinatario] }
    { 290 ;   ;Exported to Payment File;Boolean   ;CaptionML=[ENU=Exported to Payment File;
                                                              ESP=Exportado a archivo de pagos];
                                                   Editable=No }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              ESP=Id. grupo dimensiones];
                                                   Editable=No }
    { 1200;   ;Direct Debit Mandate ID;Code35     ;TableRelation="SEPA Direct Debit Mandate" WHERE (Customer No.=FIELD(Customer No.));
                                                   CaptionML=[ENU=Direct Debit Mandate ID;
                                                              ESP=Id. de orden de domiciliaci¢n de adeudo directo] }
    { 10700;  ;Invoice Type        ;Option        ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Invoice Type;
                                                              ESP=Tipo de factura];
                                                   OptionCaptionML=[ENU=F1 Invoice,F2 Simplified Invoice,F3 Invoice issued to replace simplified invoices,F4 Invoice summary entry;
                                                                    ESP=F1 Factura,F2 Factura simplificada,F3 Factura emitida para sustituir a las facturas simplificadas,F4 Movimiento de resumen de facturas];
                                                   OptionString=F1 Invoice,F2 Simplified Invoice,F3 Invoice issued to replace simplified invoices,F4 Invoice summary entry }
    { 10701;  ;Cr. Memo Type       ;Option        ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Cr. Memo Type;
                                                              ESP=Tipo de abono];
                                                   OptionCaptionML=[ENU=R1 Corrected Invoice,R2 Corrected Invoice (Art. 80.3),R3 Corrected Invoice (Art. 80.4),R4 Corrected Invoice (Other),R5 Corrected Invoice in Simplified Invoices,F1 Invoice,F2 Simplified Invoice;
                                                                    ESP=R1 Factura corregida,R2 Factura corregida (art¡culo 80.3),R3 Factura corregida (art¡culo 80.4),R4 Factura corregida (otros),R5 Factura corregida en facturas simplificadas,F1 Factura,F2 Factura simplificada];
                                                   OptionString=R1 Corrected Invoice,R2 Corrected Invoice (Art. 80.3),R3 Corrected Invoice (Art. 80.4),R4 Corrected Invoice (Other),R5 Corrected Invoice in Simplified Invoices,F1 Invoice,F2 Simplified Invoice }
    { 10702;  ;Special Scheme Code ;Option        ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Special Scheme Code;
                                                              ESP=C¢d. de esquema especial];
                                                   OptionCaptionML=[ENU=01 General,02 Export,03 Special System,04 Gold,05 Travel Agencies,06 Groups of Entities,07 Special Cash,08  IPSI / IGIC,09 Travel Agency Services,10 Third Party,11 Business Withholding,12 Business not Withholding,13 Business Withholding and not Withholding,14 Invoice Work Certification,15 Invoice of Consecutive Nature,16 First Half 2017;
                                                                    ESP=01 General,02 Exportaciones,03 Sistema especial,04 Oro,05 Agencias de viajes,06 Grupos de entidades,07 Efectivo especial,08 IPSI/IGIC,09 Servicios de agencias de viajes,10 Terceros,11 Negocio con retenci¢n,12 Negocio sin retenci¢n,13 Negocio con y sin retenci¢n,14 Certificaci¢n laboral de factura,15 Factura consecutiva,16 Primer semestre 2017];
                                                   OptionString=01 General,02 Export,03 Special System,04 Gold,05 Travel Agencies,06 Groups of Entities,07 Special Cash,08  IPSI / IGIC,09 Travel Agency Services,10 Third Party,11 Business Withholding,12 Business not Withholding,13 Business Withholding and not Withholding,14 Invoice Work Certification,15 Invoice of Consecutive Nature,16 First Half 2017 }
    { 10703;  ;Correction Type     ;Option        ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Correction Type;
                                                              ESP=Tipo de correcci¢n];
                                                   OptionCaptionML=[ENU=" ,Replacement,Difference,Removal";
                                                                    ESP=" ,Sustituci¢n,Diferencia,Eliminaci¢n"];
                                                   OptionString=[ ,Replacement,Difference,Removal] }
    { 10704;  ;Corrected Invoice No.;Code20       ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Corrected Invoice No.;
                                                              ESP=N.§ factura corregida] }
    { 10720;  ;Succeeded Company Name;Text250     ;CaptionML=[ENU=Succeeded Company Name;
                                                              ESP=Nombre de empresa correcto] }
    { 10721;  ;Succeeded VAT Registration No.;Text20;
                                                   CaptionML=[ENU=Succeeded VAT Registration No.;
                                                              ESP=CIF/NIF correcto] }
    { 10722;  ;ID Type             ;Option        ;CaptionML=[ENU=ID Type;
                                                              ESP=Tipo de id.];
                                                   OptionCaptionML=[ENU=" ,02-VAT Registration No.,03-Passport,04-ID Document,05-Certificate Of Residence,06-Other Probative Document,07-Not On The Census";
                                                                    ESP=" ,02-CIF-NIF,03-Pasaporte,04-Doc. Oficial Identif. (Residencia),05- Certificado De Residencia,06-Otro Documento Probatorio,07-No Censado"];
                                                   OptionString=[ ,02-VAT Registration No.,03-Passport,04-ID Document,05-Certificate Of Residence,06-Other Probative Document,07-Not On The Census] }
    { 7000000;;Bill No.            ;Code20        ;CaptionML=[ENU=Bill No.;
                                                              ESP=No. efecto] }
    { 7000001;;Document Situation  ;Option        ;CaptionML=[ENU=Document Situation;
                                                              ESP=Situaci¢n documento];
                                                   OptionCaptionML=[ENU=" ,Posted BG/PO,Closed BG/PO,BG/PO,Cartera,Closed Documents";
                                                                    ESP=" ,Rem./Ord. pago regis.,Rem./Ord. pago cerrada,Rem./Ord. pago,Cartera,Docs. cerrados"];
                                                   OptionString=[ ,Posted BG/PO,Closed BG/PO,BG/PO,Cartera,Closed Documents] }
    { 7000002;;Applies-to Bill No. ;Code20        ;CaptionML=[ENU=Applies-to Bill No.;
                                                              ESP=Liq. por No. efecto] }
    { 7000003;;Document Status     ;Option        ;CaptionML=[ENU=Document Status;
                                                              ESP=Estado documento];
                                                   OptionCaptionML=[ENU=" ,Open,Honored,Rejected,Redrawn";
                                                                    ESP=" ,Pendiente,Pagado,Impagado,Recirculado"];
                                                   OptionString=[ ,Open,Honored,Rejected,Redrawn] }
    { 7000005;;Remaining Amount (LCY) stats.;Decimal;
                                                   CaptionML=[ENU=Remaining Amount (LCY) stats.;
                                                              ESP=Importe pendiente (DL) inf.] }
    { 7000006;;Amount (LCY) stats. ;Decimal       ;CaptionML=[ENU=Amount (LCY) stats.;
                                                              ESP=Importe (DL) estadisticas] }
    { 7014600;;No. pedido abierto  ;Code20        ;CaptionML=[ENU=Order No. open;
                                                              ESP=Nº pedido abierto];
                                                   Description=VNTES }
    { 7014823;;C¢d. cosecha        ;Code10        ;TableRelation=Cosecha;
                                                   CaptionML=[ENU=Cod. harvest;
                                                              ESP=C¢d. cosecha];
                                                   Description=VNTES }
  }
  KEYS
  {
    {    ;Entry No.                               ;Clustered=Yes }
    {    ;Customer No.,Posting Date,Currency Code ;SumIndexFields=Sales (LCY),Profit (LCY),Inv. Discount (LCY) }
    { No ;Customer No.,Currency Code,Posting Date  }
    {    ;Document No.                             }
    {    ;External Document No.                    }
    {    ;Customer No.,Open,Positive,Due Date,Currency Code }
    {    ;Open,Due Date                            }
    {    ;Document Type,Customer No.,Posting Date,Currency Code;
                                                   SumIndexFields=Sales (LCY),Profit (LCY),Inv. Discount (LCY) }
    {    ;Salesperson Code,Posting Date            }
    {    ;Closed by Entry No.                      }
    {    ;Transaction No.                          }
    { No ;Customer No.,Open,Positive,Calculate Interest,Due Date }
    {    ;Customer No.,Global Dimension 1 Code,Global Dimension 2 Code,Posting Date,Currency Code;
                                                   SumIndexFields=Sales (LCY),Profit (LCY),Inv. Discount (LCY),Pmt. Disc. Given (LCY) }
    {    ;Customer No.,Open,Global Dimension 1 Code,Global Dimension 2 Code,Positive,Due Date,Currency Code }
    { No ;Open,Global Dimension 1 Code,Global Dimension 2 Code,Due Date }
    {    ;Document Type,Customer No.,Global Dimension 1 Code,Global Dimension 2 Code,Posting Date,Currency Code }
    {    ;Customer No.,Applies-to ID,Open,Positive,Due Date }
    {    ;Customer No.,Open,Positive,Applies-to ID,Due Date }
    {    ;Customer No.,Document Type,Document Situation,Document Status;
                                                   SumIndexFields=Remaining Amount (LCY) stats.,Amount (LCY) stats. }
    {    ;Document No.,Bill No.                    }
    {    ;Document No.,Document Type,Customer No.  }
    {    ;Applies-to ID,Document Type,Document Situation,Document Status }
    {    ;Document Type,Customer No.,Document Date,Currency Code }
    {    ;Customer No.,C¢d. cosecha,Open,Document Type,Positive,Due Date }
    {    ;Document Type,Posting Date              ;SumIndexFields=Sales (LCY) }
    {    ;Document Type,Customer No.,Open,Due Date }
    {    ;Customer Posting Group                   }
    {    ;Document Type,Open,Posting Date,Closed at Date }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;Entry No.,Description,Customer No.,Posting Date,Document Type,Document No. }
    { 2   ;Brick               ;Document No.,Description,Remaining Amt. (LCY),Due Date }
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=must have the same sign as %1;ESP=debe tener el mismo signo que %1.';
      Text001@1001 : TextConst 'ENU=must not be larger than %1;ESP=no debe ser mayor que %1.';
      Text1100000@1100001 : TextConst 'ENU=Payment Discount (VAT Excl.);ESP=% Dto. P.P. (IVA exclu¡do)';
      Text1100001@1100002 : TextConst 'ENU=Payment Discount (VAT Adjustment);ESP=% Dto. P.P. (IVA ajustado)';
      DocMisc@1100000 : Codeunit 7000007;
      CannotChangePmtMethodErr@1100003 : TextConst 'ENU=For Cartera-based bills and invoices, you cannot change the Payment Method Code to this value.;ESP=Para los efectos y las facturas basadas en Cartera, no puede modificar el C¢digo de forma de pago a este valor.';

    [External]
    PROCEDURE ShowDoc@7() : Boolean;
    VAR
      SalesInvoiceHdr@1003 : Record 112;
      SalesCrMemoHdr@1002 : Record 114;
      ServiceInvoiceHeader@1000 : Record 5992;
      ServiceCrMemoHeader@1001 : Record 5994;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Invoice:
          BEGIN
            IF SalesInvoiceHdr.GET("Document No.") THEN BEGIN
              PAGE.RUN(PAGE::"Posted Sales Invoice",SalesInvoiceHdr);
              EXIT(TRUE);
            END;
            IF ServiceInvoiceHeader.GET("Document No.") THEN BEGIN
              PAGE.RUN(PAGE::"Posted Service Invoice",ServiceInvoiceHeader);
              EXIT(TRUE);
            END;
          END;
        "Document Type"::"Credit Memo":
          BEGIN
            IF SalesCrMemoHdr.GET("Document No.") THEN BEGIN
              PAGE.RUN(PAGE::"Posted Sales Credit Memo",SalesCrMemoHdr);
              EXIT(TRUE);
            END;
            IF ServiceCrMemoHeader.GET("Document No.") THEN BEGIN
              PAGE.RUN(PAGE::"Posted Service Credit Memo",ServiceCrMemoHeader);
              EXIT(TRUE);
            END;
          END;
      END;

      OnAfterShowDoc(Rec);
    END;

    [External]
    PROCEDURE ShowPostedDocAttachment@15();
    VAR
      SalesInvoiceHdr@1003 : Record 112;
      SalesCrMemoHdr@1002 : Record 114;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Invoice:
          IF SalesInvoiceHdr.GET("Document No.") THEN
            OpenDocumentAttachmentDetails(SalesInvoiceHdr);
        "Document Type"::"Credit Memo":
          IF SalesCrMemoHdr.GET("Document No.") THEN
            OpenDocumentAttachmentDetails(SalesCrMemoHdr);
      END;
    END;

    LOCAL PROCEDURE OpenDocumentAttachmentDetails@17(Record@1000 : Variant);
    VAR
      DocumentAttachmentDetails@1002 : Page 1173;
      RecRef@1001 : RecordRef;
    BEGIN
      RecRef.GETTABLE(Record);
      DocumentAttachmentDetails.OpenForRecRef(RecRef);
      DocumentAttachmentDetails.RUNMODAL;
    END;

    [External]
    PROCEDURE HasPostedDocAttachment@16() : Boolean;
    VAR
      SalesInvoiceHdr@1003 : Record 112;
      SalesCrMemoHdr@1002 : Record 114;
      DocumentAttachment@1005 : Record 1173;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Invoice:
          IF SalesInvoiceHdr.GET("Document No.") THEN
            EXIT(DocumentAttachment.HasPostedDocumentAttachment(SalesInvoiceHdr));
        "Document Type"::"Credit Memo":
          IF SalesCrMemoHdr.GET("Document No.") THEN
            EXIT(DocumentAttachment.HasPostedDocumentAttachment(SalesCrMemoHdr));
      END;
    END;

    [External]
    PROCEDURE DrillDownOnEntries@1(VAR DtldCustLedgEntry@1000 : Record 379);
    VAR
      CustLedgEntry@1001 : Record 21;
    BEGIN
      CustLedgEntry.RESET;
      DtldCustLedgEntry.COPYFILTER("Customer No.",CustLedgEntry."Customer No.");
      DtldCustLedgEntry.COPYFILTER("Currency Code",CustLedgEntry."Currency Code");
      DtldCustLedgEntry.COPYFILTER("Initial Entry Global Dim. 1",CustLedgEntry."Global Dimension 1 Code");
      DtldCustLedgEntry.COPYFILTER("Initial Entry Global Dim. 2",CustLedgEntry."Global Dimension 2 Code");
      DtldCustLedgEntry.COPYFILTER("Initial Entry Due Date",CustLedgEntry."Due Date");
      CustLedgEntry.SETCURRENTKEY("Customer No.","Posting Date");
      CustLedgEntry.SETRANGE(Open,TRUE);
      OnBeforeDrillDownEntries(CustLedgEntry,DtldCustLedgEntry);
      PAGE.RUN(0,CustLedgEntry);
    END;

    [External]
    PROCEDURE DrillDownOnOverdueEntries@4(VAR DtldCustLedgEntry@1000 : Record 379);
    VAR
      CustLedgEntry@1001 : Record 21;
    BEGIN
      CustLedgEntry.RESET;
      DtldCustLedgEntry.COPYFILTER("Customer No.",CustLedgEntry."Customer No.");
      DtldCustLedgEntry.COPYFILTER("Currency Code",CustLedgEntry."Currency Code");
      DtldCustLedgEntry.COPYFILTER("Initial Entry Global Dim. 1",CustLedgEntry."Global Dimension 1 Code");
      DtldCustLedgEntry.COPYFILTER("Initial Entry Global Dim. 2",CustLedgEntry."Global Dimension 2 Code");
      CustLedgEntry.SETCURRENTKEY("Customer No.","Posting Date");
      CustLedgEntry.SETFILTER("Date Filter",'..%1',WORKDATE);
      CustLedgEntry.SETFILTER("Due Date",'<%1',WORKDATE);
      CustLedgEntry.SETFILTER("Remaining Amount",'<>%1',0);
      OnBeforeDrillDownOnOverdueEntries(CustLedgEntry,DtldCustLedgEntry);
      PAGE.RUN(0,CustLedgEntry);
    END;

    [External]
    PROCEDURE GetOriginalCurrencyFactor@2() : Decimal;
    BEGIN
      IF "Original Currency Factor" = 0 THEN
        EXIT(1);
      EXIT("Original Currency Factor");
    END;

    [External]
    PROCEDURE GetAdjustedCurrencyFactor@14() : Decimal;
    BEGIN
      IF "Adjusted Currency Factor" = 0 THEN
        EXIT(1);
      EXIT("Adjusted Currency Factor");
    END;

    [External]
    PROCEDURE ShowDimensions@3();
    VAR
      DimMgt@1000 : Codeunit 408;
    BEGIN
      DimMgt.ShowDimensionSet("Dimension Set ID",STRSUBSTNO('%1 %2',TABLECAPTION,"Entry No."));
    END;

    PROCEDURE PrintBill@1100003(ShowRequestForm@1100000 : Boolean);
    VAR
      CarteraReportSelection@1100001 : Record 7000013;
      CustLedgEntry@1100002 : Record 21;
    BEGIN
      WITH CustLedgEntry DO BEGIN
        COPY(Rec);
        CarteraReportSelection.SETRANGE(Usage,CarteraReportSelection.Usage::Bill);
        CarteraReportSelection.SETFILTER("Report ID",'<>0');
        CarteraReportSelection.FIND('-');
        REPEAT
          REPORT.RUNMODAL(CarteraReportSelection."Report ID",ShowRequestForm,FALSE,CustLedgEntry);
        UNTIL CarteraReportSelection.NEXT = 0;
      END;
    END;

    PROCEDURE CheckBillSituation@1100004();
    VAR
      Doc@1100005 : Record 7000002;
      Text1100100@1100006 : TextConst 'ENU=%1 cannot be applied, since it is included in a bill group.;ESP=%1 no se puede liquidar, ya que est  incluido en una remesa.';
      Text1100101@1100007 : TextConst 'ENU=" Remove it from its bill group and try again.";ESP=" B¢rrelo de la remesa e int‚ntelo de nuevo."';
    BEGIN
      IF Doc.GET(Doc.Type::Receivable,Rec."Entry No.") THEN
        IF Doc."Bill Gr./Pmt. Order No." <> '' THEN
          ERROR(
            Text1100100 +
            Text1100101,
            Rec.Description);
    END;

    [External]
    PROCEDURE SetStyle@5() : Text;
    BEGIN
      IF Open THEN BEGIN
        IF WORKDATE > "Due Date" THEN
          EXIT('Unfavorable')
      END ELSE
        IF "Closed at Date" > "Due Date" THEN
          EXIT('Attention');
      EXIT('');
    END;

    [External]
    PROCEDURE SetApplyToFilters@9(CustomerNo@1000 : Code[20];ApplyDocType@1001 : Option;ApplyDocNo@1002 : Code[20];ApplyBillNo@1100000 : Code[20];ApplyAmount@1003 : Decimal);
    BEGIN
      SETCURRENTKEY("Customer No.",Open,Positive,"Due Date");
      SETRANGE("Customer No.",CustomerNo);
      SETRANGE(Open,TRUE);
      SETFILTER("Document Situation",'<>%1',"Document Situation"::"Posted BG/PO");
      IF ApplyDocNo <> '' THEN BEGIN
        SETRANGE("Document Type",ApplyDocType);
        SETRANGE("Document No.",ApplyDocNo);
        IF ApplyBillNo <> '' THEN
          SETRANGE("Bill No.",ApplyBillNo);
        IF FINDFIRST THEN;
        SETRANGE("Document Type");
        SETRANGE("Document No.");
        SETRANGE("Bill No.");
      END ELSE
        IF ApplyDocType <> 0 THEN BEGIN
          SETRANGE("Document Type",ApplyDocType);
          IF FINDFIRST THEN;
          SETRANGE("Document Type");
        END ELSE
          IF ApplyAmount <> 0 THEN BEGIN
            SETRANGE(Positive,ApplyAmount < 0);
            IF FINDFIRST THEN;
            SETRANGE(Positive);
          END;
    END;

    [External]
    PROCEDURE SetAmountToApply@35(AppliesToDocNo@1000 : Code[20];CustomerNo@1001 : Code[20];VAR AppliesToBillNo@1100000 : Code[20]);
    BEGIN
      SETCURRENTKEY("Document No.");
      SETRANGE("Document No.",AppliesToDocNo);
      SETRANGE("Customer No.",CustomerNo);
      SETRANGE(Open,TRUE);
      IF FINDFIRST THEN BEGIN
        AppliesToBillNo := "Bill No.";
        IF "Amount to Apply" = 0 THEN BEGIN
          CALCFIELDS("Remaining Amount");
          "Amount to Apply" := "Remaining Amount";
        END ELSE
          "Amount to Apply" := 0;
        "Accepted Payment Tolerance" := 0;
        "Accepted Pmt. Disc. Tolerance" := FALSE;
        CODEUNIT.RUN(CODEUNIT::"Cust. Entry-Edit",Rec);
      END;
    END;

    [External]
    PROCEDURE CopyFromGenJnlLine@6(GenJnlLine@1000 : Record 81);
    BEGIN
      "Customer No." := GenJnlLine."Account No.";
      "Posting Date" := GenJnlLine."Posting Date";
      "Document Date" := GenJnlLine."Document Date";
      "Document Type" := GenJnlLine."Document Type";
      "Document No." := GenJnlLine."Document No.";
      "External Document No." := GenJnlLine."External Document No.";
      Description := GenJnlLine.Description;
      "Currency Code" := GenJnlLine."Currency Code";
      "Sales (LCY)" := GenJnlLine."Sales/Purch. (LCY)";
      "Profit (LCY)" := GenJnlLine."Profit (LCY)";
      "Inv. Discount (LCY)" := GenJnlLine."Inv. Discount (LCY)";
      "Sell-to Customer No." := GenJnlLine."Sell-to/Buy-from No.";
      "Customer Posting Group" := GenJnlLine."Posting Group";
      "Global Dimension 1 Code" := GenJnlLine."Shortcut Dimension 1 Code";
      "Global Dimension 2 Code" := GenJnlLine."Shortcut Dimension 2 Code";
      "Dimension Set ID" := GenJnlLine."Dimension Set ID";
      "Salesperson Code" := GenJnlLine."Salespers./Purch. Code";
      "Source Code" := GenJnlLine."Source Code";
      "On Hold" := GenJnlLine."On Hold";
      "Applies-to Doc. Type" := GenJnlLine."Applies-to Doc. Type";
      "Applies-to Doc. No." := GenJnlLine."Applies-to Doc. No.";
      "Due Date" := GenJnlLine."Due Date";
      "Pmt. Discount Date" := GenJnlLine."Pmt. Discount Date";
      "Applies-to ID" := GenJnlLine."Applies-to ID";
      "Journal Batch Name" := GenJnlLine."Journal Batch Name";
      "Reason Code" := GenJnlLine."Reason Code";
      "Direct Debit Mandate ID" := GenJnlLine."Direct Debit Mandate ID";
      "User ID" := USERID;
      "Bal. Account Type" := GenJnlLine."Bal. Account Type";
      "Bal. Account No." := GenJnlLine."Bal. Account No.";
      "No. Series" := GenJnlLine."Posting No. Series";
      "IC Partner Code" := GenJnlLine."IC Partner Code";
      Prepayment := GenJnlLine.Prepayment;
      "Recipient Bank Account" := GenJnlLine."Recipient Bank Account";
      "Message to Recipient" := GenJnlLine."Message to Recipient";
      "Applies-to Ext. Doc. No." := GenJnlLine."Applies-to Ext. Doc. No.";
      "Payment Method Code" := GenJnlLine."Payment Method Code";
      "Exported to Payment File" := GenJnlLine."Exported to Payment File";
      "Payment Terms Code" := GenJnlLine."Payment Terms Code";
      "Bill No." := GenJnlLine."Bill No.";
      "Applies-to Bill No." := GenJnlLine."Applies-to Bill No.";
      "Invoice Type" := GenJnlLine."Sales Invoice Type";
      "Cr. Memo Type" := GenJnlLine."Sales Cr. Memo Type";
      "Special Scheme Code" := GenJnlLine."Sales Special Scheme Code";
      "Correction Type" := GenJnlLine."Correction Type";
      "Corrected Invoice No." := GenJnlLine."Corrected Invoice No.";
      "Succeeded Company Name" := GenJnlLine."Succeeded Company Name";
      "Succeeded VAT Registration No." := GenJnlLine."Succeeded VAT Registration No.";

      OnAfterCopyCustLedgerEntryFromGenJnlLine(Rec,GenJnlLine);
    END;

    [External]
    PROCEDURE CopyFromCVLedgEntryBuffer@10(VAR CVLedgerEntryBuffer@1000 : Record 382);
    BEGIN
      TRANSFERFIELDS(CVLedgerEntryBuffer);
      Amount := CVLedgerEntryBuffer.Amount;
      "Amount (LCY)" := CVLedgerEntryBuffer."Amount (LCY)";
      "Remaining Amount" := CVLedgerEntryBuffer."Remaining Amount";
      "Remaining Amt. (LCY)" := CVLedgerEntryBuffer."Remaining Amt. (LCY)";
      "Original Amount" := CVLedgerEntryBuffer."Original Amount";
      "Original Amt. (LCY)" := CVLedgerEntryBuffer."Original Amt. (LCY)";

      OnAfterCopyCustLedgerEntryFromCVLedgEntryBuffer(Rec,CVLedgerEntryBuffer);
    END;

    [External]
    PROCEDURE RecalculateAmounts@26(FromCurrencyCode@1001 : Code[10];ToCurrencyCode@1002 : Code[10];PostingDate@1003 : Date);
    VAR
      CurrExchRate@1004 : Record 330;
    BEGIN
      IF ToCurrencyCode = FromCurrencyCode THEN
        EXIT;

      "Remaining Amount" :=
        CurrExchRate.ExchangeAmount("Remaining Amount",FromCurrencyCode,ToCurrencyCode,PostingDate);
      "Remaining Pmt. Disc. Possible" :=
        CurrExchRate.ExchangeAmount("Remaining Pmt. Disc. Possible",FromCurrencyCode,ToCurrencyCode,PostingDate);
      "Accepted Payment Tolerance" :=
        CurrExchRate.ExchangeAmount("Accepted Payment Tolerance",FromCurrencyCode,ToCurrencyCode,PostingDate);
      "Amount to Apply" :=
        CurrExchRate.ExchangeAmount("Amount to Apply",FromCurrencyCode,ToCurrencyCode,PostingDate);
    END;

    LOCAL PROCEDURE ValidatePaymentMethod@1100000();
    VAR
      PaymentMethod@1100000 : Record 289;
    BEGIN
      PaymentMethod.GET("Payment Method Code");
      IF (("Document Type" = "Document Type"::Bill) AND (NOT PaymentMethod."Create Bills")) OR
         (("Document Type" = "Document Type"::Invoice) AND (NOT PaymentMethod."Invoices to Cartera")) THEN
        ERROR(CannotChangePmtMethodErr);
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyCustLedgerEntryFromGenJnlLine@8(VAR CustLedgerEntry@1000 : Record 21;GenJournalLine@1001 : Record 81);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyCustLedgerEntryFromCVLedgEntryBuffer@11(VAR CustLedgerEntry@1001 : Record 21;CVLedgerEntryBuffer@1000 : Record 382);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterShowDoc@18(CustLedgerEntry@1000 : Record 21);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeDrillDownEntries@12(VAR CustLedgerEntry@1000 : Record 21;VAR DetailedCustLedgEntry@1001 : Record 379);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeDrillDownOnOverdueEntries@13(VAR CustLedgerEntry@1000 : Record 21;VAR DetailedCustLedgEntry@1001 : Record 379);
    BEGIN
    END;

    PROCEDURE "Importe comisi¢n"@1170170000() dImpCom : Decimal;
    VAR
      CabFact@1170170000 : Record 112;
      CabAbo@1170170001 : Record 114;
    BEGIN
      //I-BAIN-0025
      dImpCom := 0;
      IF "Document Type" = "Document Type"::Invoice THEN BEGIN
        IF NOT CabFact.GET("Document No.") THEN EXIT;
        CabFact.CALCFIELDS("Importe comisi¢n (DL)");
        dImpCom := CabFact."Importe comisi¢n (DL)";
      END ELSE IF "Document Type" = "Document Type"::"Credit Memo" THEN BEGIN
        IF NOT CabAbo.GET("Document No.") THEN EXIT;
        CabAbo.CALCFIELDS("Importe comisi¢n (DL)");
        dImpCom := -CabAbo."Importe comisi¢n (DL)";
      END;
      //F-BAIN-0025
    END;

    PROCEDURE "Importe aplicado"@1170170003() dImp : Decimal;
    VAR
      DtldCustLedgEntry@1170170000 : Record 379;
    BEGIN
      //I-BAIN-0025
      IF NOT ("Document Type" IN
        ["Document Type"::Invoice,"Document Type"::"Credit Memo"]) THEN EXIT;
      DtldCustLedgEntry.SETCURRENTKEY("Customer No.","Posting Date","Entry Type");
      DtldCustLedgEntry.SETRANGE("Customer No.","Customer No.");
      COPYFILTER("Date Filter",DtldCustLedgEntry."Posting Date");
      DtldCustLedgEntry.SETRANGE("Entry Type",DtldCustLedgEntry."Entry Type"::Application);
      DtldCustLedgEntry.SETRANGE("Document No.","Document No.");
      IF DtldCustLedgEntry.FIND('-') THEN REPEAT
        dImp := dImp + DtldCustLedgEntry.Amount;
      UNTIL DtldCustLedgEntry.NEXT = 0;
      //F-BAIN-0025
    END;

    BEGIN
    END.
  }
}

OBJECT Table 27 Item
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=18:14:26;
    Modified=Yes;
    Version List=NAVW114.07,NAVES14.07,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    Permissions=TableData 337=d,
                TableData 5940=rm,
                TableData 5941=rm;
    DataCaptionFields=No.,Description;
    OnInsert=BEGIN
               IF "No." = '' THEN BEGIN
                 GetInvtSetup;
                 InvtSetup.TESTFIELD("Item Nos.");
                 NoSeriesMgt.InitSeries(InvtSetup."Item Nos.",xRec."No. Series",0D,"No.","No. Series");
                 "Costing Method" := InvtSetup."Default Costing Method";
               END;

               DimMgt.UpdateDefaultDim(
                 DATABASE::Item,"No.",
                 "Global Dimension 1 Code","Global Dimension 2 Code");

               UpdateReferencedIds;
               SetLastDateTimeModified;
               GestionPersonalizacionProd.BorradoMaximosParametro(Rec); //VNTES
             END;

    OnModify=BEGIN
               UpdateReferencedIds;
               SetLastDateTimeModified;
               PlanningAssignment.ItemChange(Rec,xRec);
               //++ BAIN-0009
               FuncionesBAINES.T27PasarAEmpresa(CurrFieldNo,Rec);
               //-- BAIN-0009
             END;

    OnDelete=BEGIN
               ApprovalsMgmt.OnCancelItemApprovalRequest(Rec);

               CheckJournalsAndWorksheets(0);
               CheckDocuments(0);

               MoveEntries.MoveItemEntries(Rec);

               ServiceItem.RESET;
               ServiceItem.SETRANGE("Item No.","No.");
               IF ServiceItem.FIND('-') THEN
                 REPEAT
                   ServiceItem.VALIDATE("Item No.",'');
                   ServiceItem.MODIFY(TRUE);
                 UNTIL ServiceItem.NEXT = 0;

               DeleteRelatedData;
               // VNTES.i
               GestTablasExist.T27OnDelete(Rec);
               IF EMCSAduana.READPERMISSION THEN
                 GestionEMCS.BorradoProducto("No.");
               TratamientoProd.SETRANGE("No. producto","No.");
               TratamientoProd.DELETEALL;
               // VNTES.f
             END;

    OnRename=VAR
               SalesLine@1000 : Record 37;
               PurchaseLine@1001 : Record 39;
               TransferLine@1003 : Record 5741;
               ItemAttributeValueMapping@1002 : Record 7505;
             BEGIN
               SalesLine.RenameNo(SalesLine.Type::Item,xRec."No.","No.");
               PurchaseLine.RenameNo(PurchaseLine.Type::Item,xRec."No.","No.");
               TransferLine.RenameNo(xRec."No.","No.");
               DimMgt.RenameDefaultDim(DATABASE::Item,xRec."No.","No.");

               ApprovalsMgmt.OnRenameRecordInApprovalRequest(xRec.RECORDID,RECORDID);
               ItemAttributeValueMapping.RenameItemAttributeValueMapping(xRec."No.","No.");
               SetLastDateTimeModified;
             END;

    CaptionML=[ENU=Item;
               ESP=Producto];
    LookupPageID=Page32;
    DrillDownPageID=Page31;
  }
  FIELDS
  {
    { 1   ;   ;No.                 ;Code20        ;OnValidate=BEGIN
                                                                IF "No." <> xRec."No." THEN BEGIN
                                                                  GetInvtSetup;
                                                                  NoSeriesMgt.TestManual(InvtSetup."Item Nos.");
                                                                  "No. Series" := '';
                                                                  IF xRec."No." = '' THEN
                                                                    "Costing Method" := InvtSetup."Default Costing Method";
                                                                END;
                                                              END;

                                                   AltSearchField=Search Description;
                                                   CaptionML=[ENU=No.;
                                                              ESP=N§] }
    { 2   ;   ;No. 2               ;Code20        ;CaptionML=[ENU=No. 2;
                                                              ESP=N§ 2] }
    { 3   ;   ;Description         ;Text100       ;OnValidate=BEGIN
                                                                IF ("Search Description" = UPPERCASE(xRec.Description)) OR ("Search Description" = '') THEN
                                                                  "Search Description" := COPYSTR(Description,1,MAXSTRLEN("Search Description"));

                                                                IF "Created From Nonstock Item" THEN BEGIN
                                                                  NonstockItem.SETCURRENTKEY("Item No.");
                                                                  NonstockItem.SETRANGE("Item No.","No.");
                                                                  IF NonstockItem.FINDFIRST THEN
                                                                    IF NonstockItem.Description = '' THEN BEGIN
                                                                      NonstockItem.Description := Description;
                                                                      NonstockItem.MODIFY;
                                                                    END;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Description;
                                                              ESP=Descripci¢n] }
    { 4   ;   ;Search Description  ;Code100       ;CaptionML=[ENU=Search Description;
                                                              ESP=Descripci¢n alias] }
    { 5   ;   ;Description 2       ;Text50        ;CaptionML=[ENU=Description 2;
                                                              ESP=Descripci¢n 2] }
    { 6   ;   ;Assembly BOM        ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("BOM Component" WHERE (Parent Item No.=FIELD(No.)));
                                                   CaptionML=[ENU=Assembly BOM;
                                                              ESP=L.M. de ensamblado];
                                                   Editable=No }
    { 8   ;   ;Base Unit of Measure;Code10        ;TableRelation="Unit of Measure";
                                                   OnValidate=VAR
                                                                UnitOfMeasure@1000 : Record 204;
                                                              BEGIN
                                                                UpdateUnitOfMeasureId;

                                                                IF "Base Unit of Measure" <> xRec."Base Unit of Measure" THEN BEGIN
                                                                  TestNoOpenEntriesExist(FIELDCAPTION("Base Unit of Measure"));

                                                                  "Sales Unit of Measure" := "Base Unit of Measure";
                                                                  "Purch. Unit of Measure" := "Base Unit of Measure";
                                                                  IF "Base Unit of Measure" <> '' THEN BEGIN
                                                                    // If we can't find a Unit of Measure with a GET,
                                                                    // then try with International Standard Code, as some times it's used as Code
                                                                    IF NOT UnitOfMeasure.GET("Base Unit of Measure") THEN BEGIN
                                                                      UnitOfMeasure.SETRANGE("International Standard Code","Base Unit of Measure");
                                                                      IF NOT UnitOfMeasure.FINDFIRST THEN
                                                                        ERROR(UnitOfMeasureNotExistErr,"Base Unit of Measure");
                                                                      "Base Unit of Measure" := UnitOfMeasure.Code;
                                                                    END;

                                                                    IF NOT ItemUnitOfMeasure.GET("No.","Base Unit of Measure") THEN BEGIN
                                                                      ItemUnitOfMeasure.INIT;
                                                                      IF ISTEMPORARY THEN
                                                                        ItemUnitOfMeasure."Item No." := "No."
                                                                      ELSE
                                                                        ItemUnitOfMeasure.VALIDATE("Item No.","No.");
                                                                      ItemUnitOfMeasure.VALIDATE(Code,"Base Unit of Measure");
                                                                      ItemUnitOfMeasure."Qty. per Unit of Measure" := 1;
                                                                      ItemUnitOfMeasure.INSERT;
                                                                    END ELSE BEGIN
                                                                      IF ItemUnitOfMeasure."Qty. per Unit of Measure" <> 1 THEN
                                                                        ERROR(BaseUnitOfMeasureQtyMustBeOneErr,"Base Unit of Measure",ItemUnitOfMeasure."Qty. per Unit of Measure");
                                                                    END;
                                                                  END;
                                                                END;
                                                              END;

                                                   ValidateTableRelation=No;
                                                   CaptionML=[ENU=Base Unit of Measure;
                                                              ESP=Unidad medida base] }
    { 9   ;   ;Price Unit Conversion;Integer      ;CaptionML=[ENU=Price Unit Conversion;
                                                              ESP=Factor conversi¢n precio] }
    { 10  ;   ;Type                ;Option        ;OnValidate=BEGIN
                                                                IF ExistsItemLedgerEntry THEN
                                                                  ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",ItemLedgEntryTableCaptionTxt);
                                                                CheckJournalsAndWorksheets(FIELDNO(Type));
                                                                CheckDocuments(FIELDNO(Type));
                                                                IF IsNonInventoriableType THEN BEGIN
                                                                  CALCFIELDS("Assembly BOM");
                                                                  TESTFIELD("Assembly BOM",FALSE);

                                                                  CALCFIELDS("Stockkeeping Unit Exists");
                                                                  TESTFIELD("Stockkeeping Unit Exists",FALSE);

                                                                  VALIDATE("Assembly Policy","Assembly Policy"::"Assemble-to-Stock");
                                                                  VALIDATE("Replenishment System","Replenishment System"::Purchase);
                                                                  VALIDATE(Reserve,Reserve::Never);
                                                                  VALIDATE("Inventory Posting Group",'');
                                                                  VALIDATE("Item Tracking Code",'');
                                                                  VALIDATE("Costing Method","Costing Method"::FIFO);
                                                                  VALIDATE("Production BOM No.",'');
                                                                  VALIDATE("Routing No.",'');
                                                                  VALIDATE("Reordering Policy","Reordering Policy"::" ");
                                                                  VALIDATE("Order Tracking Policy","Order Tracking Policy"::None);
                                                                  VALIDATE("Overhead Rate",0);
                                                                  VALIDATE("Indirect Cost %",0);
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Type;
                                                              ESP=Tipo];
                                                   OptionCaptionML=[ENU=Inventory,Service,Non-Inventory;
                                                                    ESP=Inventario,Servicio,Fuera de inventario];
                                                   OptionString=Inventory,Service,Non-Inventory }
    { 11  ;   ;Inventory Posting Group;Code20     ;TableRelation="Inventory Posting Group";
                                                   OnValidate=BEGIN
                                                                IF "Inventory Posting Group" <> '' THEN
                                                                  TESTFIELD(Type,Type::Inventory);
                                                              END;

                                                   CaptionML=[ENU=Inventory Posting Group;
                                                              ESP=Grupo registro inventario] }
    { 12  ;   ;Shelf No.           ;Code10        ;CaptionML=[ENU=Shelf No.;
                                                              ESP=N§ estante] }
    { 14  ;   ;Item Disc. Group    ;Code20        ;TableRelation="Item Discount Group";
                                                   CaptionML=[ENU=Item Disc. Group;
                                                              ESP=Grupo dto. producto] }
    { 15  ;   ;Allow Invoice Disc. ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Invoice Disc.;
                                                              ESP=Permitir dto. factura] }
    { 16  ;   ;Statistics Group    ;Integer       ;CaptionML=[ENU=Statistics Group;
                                                              ESP=N§ grupo estad¡stico] }
    { 17  ;   ;Commission Group    ;Integer       ;CaptionML=[ENU=Commission Group;
                                                              ESP=N§ grupo comisi¢n] }
    { 18  ;   ;Unit Price          ;Decimal       ;OnValidate=BEGIN
                                                                VALIDATE("Price/Profit Calculation");
                                                              END;

                                                   CaptionML=[ENU=Unit Price;
                                                              ESP=Precio venta];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 19  ;   ;Price/Profit Calculation;Option    ;OnValidate=BEGIN
                                                                CASE "Price/Profit Calculation" OF
                                                                  "Price/Profit Calculation"::"Profit=Price-Cost":
                                                                    IF "Unit Price" <> 0 THEN
                                                                      IF "Unit Cost" = 0 THEN
                                                                        "Profit %" := 0
                                                                      ELSE
                                                                        "Profit %" :=
                                                                          ROUND(
                                                                            100 * (1 - "Unit Cost" /
                                                                                   ("Unit Price" / (1 + CalcVAT))),0.00001)
                                                                    ELSE
                                                                      "Profit %" := 0;
                                                                  "Price/Profit Calculation"::"Price=Cost+Profit":
                                                                    IF "Profit %" < 100 THEN BEGIN
                                                                      GetGLSetup;
                                                                      "Unit Price" :=
                                                                        ROUND(
                                                                          ("Unit Cost" / (1 - "Profit %" / 100)) *
                                                                          (1 + CalcVAT),
                                                                          GLSetup."Unit-Amount Rounding Precision");
                                                                    END;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Price/Profit Calculation;
                                                              ESP=C lculo precio/bf§ bruto];
                                                   OptionCaptionML=[ENU="Profit=Price-Cost,Price=Cost+Profit,No Relationship";
                                                                    ESP="Beneficio=Precio-Coste,Precio=Coste+Beneficio,Sin relaci¢n"];
                                                   OptionString=Profit=Price-Cost,Price=Cost+Profit,No Relationship }
    { 20  ;   ;Profit %            ;Decimal       ;OnValidate=BEGIN
                                                                VALIDATE("Price/Profit Calculation");
                                                              END;

                                                   CaptionML=[ENU=Profit %;
                                                              ESP=% Bf§ bruto];
                                                   DecimalPlaces=0:5 }
    { 21  ;   ;Costing Method      ;Option        ;OnValidate=BEGIN
                                                                IF "Costing Method" = xRec."Costing Method" THEN
                                                                  EXIT;

                                                                IF "Costing Method" <> "Costing Method"::FIFO THEN
                                                                  TESTFIELD(Type,Type::Inventory);

                                                                IF "Costing Method" = "Costing Method"::Specific THEN BEGIN
                                                                  TESTFIELD("Item Tracking Code");

                                                                  ItemTrackingCode.GET("Item Tracking Code");
                                                                  IF NOT ItemTrackingCode."SN Specific Tracking" THEN
                                                                    ERROR(
                                                                      Text018,
                                                                      ItemTrackingCode.FIELDCAPTION("SN Specific Tracking"),
                                                                      FORMAT(TRUE),ItemTrackingCode.TABLECAPTION,ItemTrackingCode.Code,
                                                                      FIELDCAPTION("Costing Method"),"Costing Method");
                                                                END;

                                                                TestNoEntriesExist(FIELDCAPTION("Costing Method"));

                                                                ItemCostMgt.UpdateUnitCost(Rec,'','',0,0,FALSE,FALSE,TRUE,FIELDNO("Costing Method"));
                                                              END;

                                                   CaptionML=[ENU=Costing Method;
                                                              ESP=Valoraci¢n existencias];
                                                   OptionCaptionML=[ENU=FIFO,LIFO,Specific,Average,Standard;
                                                                    ESP=FIFO,LIFO,Especial,Medio,Est ndar];
                                                   OptionString=FIFO,LIFO,Specific,Average,Standard }
    { 22  ;   ;Unit Cost           ;Decimal       ;OnValidate=BEGIN
                                                                IF "Costing Method" = "Costing Method"::Standard THEN
                                                                  VALIDATE("Standard Cost","Unit Cost")
                                                                ELSE
                                                                  TestNoEntriesExist(FIELDCAPTION("Unit Cost"));
                                                                VALIDATE("Price/Profit Calculation");
                                                              END;

                                                   CaptionML=[ENU=Unit Cost;
                                                              ESP=Coste unitario];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 24  ;   ;Standard Cost       ;Decimal       ;OnValidate=VAR
                                                                IsHandled@1000 : Boolean;
                                                              BEGIN
                                                                IsHandled := FALSE;
                                                                OnBeforeValidateStandardCost(Rec,xRec,CurrFieldNo,IsHandled);
                                                                IF IsHandled THEN
                                                                  EXIT;

                                                                IF ("Costing Method" = "Costing Method"::Standard) AND (CurrFieldNo <> 0) THEN
                                                                  IF NOT GUIALLOWED THEN BEGIN
                                                                    "Standard Cost" := xRec."Standard Cost";
                                                                    EXIT;
                                                                  END ELSE
                                                                    IF NOT
                                                                       CONFIRM(
                                                                         Text020 +
                                                                         Text021 +
                                                                         Text022,FALSE,
                                                                         FIELDCAPTION("Standard Cost"))
                                                                    THEN BEGIN
                                                                      "Standard Cost" := xRec."Standard Cost";
                                                                      EXIT;
                                                                    END;

                                                                ItemCostMgt.UpdateUnitCost(Rec,'','',0,0,FALSE,FALSE,TRUE,FIELDNO("Standard Cost"));
                                                              END;

                                                   CaptionML=[ENU=Standard Cost;
                                                              ESP=Coste est ndar];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 25  ;   ;Last Direct Cost    ;Decimal       ;CaptionML=[ENU=Last Direct Cost;
                                                              ESP=éltimo coste directo];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 28  ;   ;Indirect Cost %     ;Decimal       ;OnValidate=BEGIN
                                                                IF "Indirect Cost %" > 0 THEN
                                                                  TESTFIELD(Type,Type::Inventory);
                                                                ItemCostMgt.UpdateUnitCost(Rec,'','',0,0,FALSE,FALSE,TRUE,FIELDNO("Indirect Cost %"));
                                                              END;

                                                   CaptionML=[ENU=Indirect Cost %;
                                                              ESP=% Coste indirecto];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 29  ;   ;Cost is Adjusted    ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Cost is Adjusted;
                                                              ESP=Coste ajustado];
                                                   Editable=No }
    { 30  ;   ;Allow Online Adjustment;Boolean    ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Online Adjustment;
                                                              ESP=Permitir ajuste online];
                                                   Editable=No }
    { 31  ;   ;Vendor No.          ;Code20        ;TableRelation=Vendor;
                                                   OnValidate=BEGIN
                                                                IF (xRec."Vendor No." <> "Vendor No.") AND
                                                                   ("Vendor No." <> '')
                                                                THEN
                                                                  IF Vend.GET("Vendor No.") THEN
                                                                    "Lead Time Calculation" := Vend."Lead Time Calculation";
                                                              END;

                                                   ValidateTableRelation=Yes;
                                                   TestTableRelation=Yes;
                                                   CaptionML=[ENU=Vendor No.;
                                                              ESP=N§ proveedor] }
    { 32  ;   ;Vendor Item No.     ;Text20        ;CaptionML=[ENU=Vendor Item No.;
                                                              ESP=C¢d. producto proveedor] }
    { 33  ;   ;Lead Time Calculation;DateFormula  ;OnValidate=BEGIN
                                                                LeadTimeMgt.CheckLeadTimeIsNotNegative("Lead Time Calculation");
                                                              END;

                                                   AccessByPermission=TableData 120=R;
                                                   CaptionML=[ENU=Lead Time Calculation;
                                                              ESP=Plazo entrega (d¡as)] }
    { 34  ;   ;Reorder Point       ;Decimal       ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Reorder Point;
                                                              ESP=Punto pedido];
                                                   DecimalPlaces=0:5 }
    { 35  ;   ;Maximum Inventory   ;Decimal       ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Maximum Inventory;
                                                              ESP=Stock m ximo];
                                                   DecimalPlaces=0:5 }
    { 36  ;   ;Reorder Quantity    ;Decimal       ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Reorder Quantity;
                                                              ESP=Cantidad a pedir];
                                                   DecimalPlaces=0:5 }
    { 37  ;   ;Alternative Item No.;Code20        ;TableRelation=Item;
                                                   CaptionML=[ENU=Alternative Item No.;
                                                              ESP=N§ producto alternativo] }
    { 38  ;   ;Unit List Price     ;Decimal       ;CaptionML=[ENU=Unit List Price;
                                                              ESP=Precio referencia];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 39  ;   ;Duty Due %          ;Decimal       ;CaptionML=[ENU=Duty Due %;
                                                              ESP=% Tasa aduana];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 40  ;   ;Duty Code           ;Code10        ;CaptionML=[ENU=Duty Code;
                                                              ESP=C¢d. tasa aduana] }
    { 41  ;   ;Gross Weight        ;Decimal       ;CaptionML=[ENU=Gross Weight;
                                                              ESP=Peso bruto];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 42  ;   ;Net Weight          ;Decimal       ;CaptionML=[ENU=Net Weight;
                                                              ESP=Peso neto];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 43  ;   ;Units per Parcel    ;Decimal       ;CaptionML=[ENU=Units per Parcel;
                                                              ESP=Unidades por lote];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 44  ;   ;Unit Volume         ;Decimal       ;CaptionML=[ENU=Unit Volume;
                                                              ESP=Volumen];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 45  ;   ;Durability          ;Code10        ;CaptionML=[ENU=Durability;
                                                              ESP=Duraci¢n] }
    { 46  ;   ;Freight Type        ;Code10        ;CaptionML=[ENU=Freight Type;
                                                              ESP=Tipo flete] }
    { 47  ;   ;Tariff No.          ;Code20        ;TableRelation="Tariff Number";
                                                   OnValidate=VAR
                                                                TariffNumber@1000 : Record 260;
                                                              BEGIN
                                                                IF "Tariff No." = '' THEN
                                                                  EXIT;

                                                                IF (NOT TariffNumber.WRITEPERMISSION) OR
                                                                   (NOT TariffNumber.READPERMISSION)
                                                                THEN
                                                                  EXIT;

                                                                IF TariffNumber.GET("Tariff No.") THEN
                                                                  EXIT;

                                                                TariffNumber.INIT;
                                                                TariffNumber."No." := "Tariff No.";
                                                                TariffNumber.INSERT;
                                                              END;

                                                   ValidateTableRelation=No;
                                                   CaptionML=[ENU=Tariff No.;
                                                              ESP=C¢d. arancelario] }
    { 48  ;   ;Duty Unit Conversion;Decimal       ;CaptionML=[ENU=Duty Unit Conversion;
                                                              ESP=Unidad conversi¢n aduana];
                                                   DecimalPlaces=0:5 }
    { 49  ;   ;Country/Region Purchased Code;Code10;
                                                   TableRelation=Country/Region;
                                                   CaptionML=[ENU=Country/Region Purchased Code;
                                                              ESP=C¢d. pa¡s/regi¢n originario] }
    { 50  ;   ;Budget Quantity     ;Decimal       ;CaptionML=[ENU=Budget Quantity;
                                                              ESP=Cantidad presupuesto];
                                                   DecimalPlaces=0:5 }
    { 51  ;   ;Budgeted Amount     ;Decimal       ;CaptionML=[ENU=Budgeted Amount;
                                                              ESP=Importe pptdo.];
                                                   AutoFormatType=1 }
    { 52  ;   ;Budget Profit       ;Decimal       ;CaptionML=[ENU=Budget Profit;
                                                              ESP=Bf§ bruto presupuesto];
                                                   AutoFormatType=1 }
    { 53  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Comment Line" WHERE (Table Name=CONST(Item),
                                                                                           No.=FIELD(No.)));
                                                   CaptionML=[ENU=Comment;
                                                              ESP=Comentario];
                                                   Editable=No }
    { 54  ;   ;Blocked             ;Boolean       ;OnValidate=BEGIN
                                                                IF NOT Blocked THEN
                                                                  "Block Reason" := '';
                                                              END;

                                                   CaptionML=[ENU=Blocked;
                                                              ESP=Bloqueado] }
    { 55  ;   ;Cost is Posted to G/L;Boolean      ;FieldClass=FlowField;
                                                   CalcFormula=-Exist("Post Value Entry to G/L" WHERE (Item No.=FIELD(No.)));
                                                   CaptionML=[ENU=Cost is Posted to G/L;
                                                              ESP=Coste registrado en C/G];
                                                   Editable=No }
    { 56  ;   ;Block Reason        ;Text250       ;OnValidate=BEGIN
                                                                TESTFIELD(Blocked,TRUE);
                                                              END;

                                                   CaptionML=[ENU=Block Reason;
                                                              ESP=Raz¢n del bloqueo] }
    { 61  ;   ;Last DateTime Modified;DateTime    ;CaptionML=[ENU=Last DateTime Modified;
                                                              ESP=DateTime de £ltima modificaci¢n];
                                                   Editable=No }
    { 62  ;   ;Last Date Modified  ;Date          ;CaptionML=[ENU=Last Date Modified;
                                                              ESP=Fecha £lt. modificaci¢n];
                                                   Editable=No }
    { 63  ;   ;Last Time Modified  ;Time          ;CaptionML=[ENU=Last Time Modified;
                                                              ESP=élt. hora modificaci¢n];
                                                   Editable=No }
    { 64  ;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Date Filter;
                                                              ESP=Filtro fecha] }
    { 65  ;   ;Global Dimension 1 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Global Dimension 1 Filter;
                                                              ESP=Filtro dimensi¢n global 1];
                                                   CaptionClass='1,3,1' }
    { 66  ;   ;Global Dimension 2 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Global Dimension 2 Filter;
                                                              ESP=Filtro dimensi¢n global  2];
                                                   CaptionClass='1,3,2' }
    { 67  ;   ;Location Filter     ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation=Location;
                                                   CaptionML=[ENU=Location Filter;
                                                              ESP=Filtro almac‚n] }
    { 68  ;   ;Inventory           ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Ledger Entry".Quantity WHERE (Item No.=FIELD(No.),
                                                                                                       Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                       Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                       Location Code=FIELD(Location Filter),
                                                                                                       Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                       Variant Code=FIELD(Variant Filter),
                                                                                                       Lot No.=FIELD(Lot No. Filter),
                                                                                                       Serial No.=FIELD(Serial No. Filter)));
                                                   CaptionML=[ENU=Inventory;
                                                              ESP=Inventario];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 69  ;   ;Net Invoiced Qty.   ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Ledger Entry"."Invoiced Quantity" WHERE (Item No.=FIELD(No.),
                                                                                                                  Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                  Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                  Location Code=FIELD(Location Filter),
                                                                                                                  Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                  Variant Code=FIELD(Variant Filter),
                                                                                                                  Lot No.=FIELD(Lot No. Filter),
                                                                                                                  Serial No.=FIELD(Serial No. Filter)));
                                                   CaptionML=[ENU=Net Invoiced Qty.;
                                                              ESP=Unidades facturadas];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 70  ;   ;Net Change          ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Ledger Entry".Quantity WHERE (Item No.=FIELD(No.),
                                                                                                       Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                       Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                       Location Code=FIELD(Location Filter),
                                                                                                       Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                       Posting Date=FIELD(Date Filter),
                                                                                                       Variant Code=FIELD(Variant Filter),
                                                                                                       Lot No.=FIELD(Lot No. Filter),
                                                                                                       Serial No.=FIELD(Serial No. Filter)));
                                                   CaptionML=[ENU=Net Change;
                                                              ESP=Saldo periodo];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 71  ;   ;Purchases (Qty.)    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Ledger Entry"."Invoiced Quantity" WHERE (Entry Type=CONST(Purchase),
                                                                                                                  Item No.=FIELD(No.),
                                                                                                                  Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                  Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                  Location Code=FIELD(Location Filter),
                                                                                                                  Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                  Variant Code=FIELD(Variant Filter),
                                                                                                                  Posting Date=FIELD(Date Filter),
                                                                                                                  Lot No.=FIELD(Lot No. Filter),
                                                                                                                  Serial No.=FIELD(Serial No. Filter)));
                                                   CaptionML=[ENU=Purchases (Qty.);
                                                              ESP=Compras (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 72  ;   ;Sales (Qty.)        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Value Entry"."Invoiced Quantity" WHERE (Item Ledger Entry Type=CONST(Sale),
                                                                                                             Item No.=FIELD(No.),
                                                                                                             Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                             Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                             Location Code=FIELD(Location Filter),
                                                                                                             Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                             Variant Code=FIELD(Variant Filter),
                                                                                                             Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Sales (Qty.);
                                                              ESP=Ventas (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 73  ;   ;Positive Adjmt. (Qty.);Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Ledger Entry"."Invoiced Quantity" WHERE (Entry Type=CONST(Positive Adjmt.),
                                                                                                                  Item No.=FIELD(No.),
                                                                                                                  Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                  Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                  Location Code=FIELD(Location Filter),
                                                                                                                  Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                  Variant Code=FIELD(Variant Filter),
                                                                                                                  Posting Date=FIELD(Date Filter),
                                                                                                                  Lot No.=FIELD(Lot No. Filter),
                                                                                                                  Serial No.=FIELD(Serial No. Filter)));
                                                   CaptionML=[ENU=Positive Adjmt. (Qty.);
                                                              ESP=Ajuste positivo (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 74  ;   ;Negative Adjmt. (Qty.);Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Item Ledger Entry"."Invoiced Quantity" WHERE (Entry Type=CONST(Negative Adjmt.),
                                                                                                                   Item No.=FIELD(No.),
                                                                                                                   Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                   Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                   Location Code=FIELD(Location Filter),
                                                                                                                   Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                   Variant Code=FIELD(Variant Filter),
                                                                                                                   Posting Date=FIELD(Date Filter),
                                                                                                                   Lot No.=FIELD(Lot No. Filter),
                                                                                                                   Serial No.=FIELD(Serial No. Filter)));
                                                   CaptionML=[ENU=Negative Adjmt. (Qty.);
                                                              ESP=Ajuste negativo (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 77  ;   ;Purchases (LCY)     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Value Entry"."Purchase Amount (Actual)" WHERE (Item Ledger Entry Type=CONST(Purchase),
                                                                                                                   Item No.=FIELD(No.),
                                                                                                                   Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                   Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                   Location Code=FIELD(Location Filter),
                                                                                                                   Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                   Variant Code=FIELD(Variant Filter),
                                                                                                                   Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Purchases (LCY);
                                                              ESP=Compras (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 78  ;   ;Sales (LCY)         ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Value Entry"."Sales Amount (Actual)" WHERE (Item Ledger Entry Type=CONST(Sale),
                                                                                                                Item No.=FIELD(No.),
                                                                                                                Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Sales (LCY);
                                                              ESP=Ventas (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 79  ;   ;Positive Adjmt. (LCY);Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Value Entry"."Cost Amount (Actual)" WHERE (Item Ledger Entry Type=CONST(Positive Adjmt.),
                                                                                                               Item No.=FIELD(No.),
                                                                                                               Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                               Location Code=FIELD(Location Filter),
                                                                                                               Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                               Variant Code=FIELD(Variant Filter),
                                                                                                               Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Positive Adjmt. (LCY);
                                                              ESP=Ajuste positivo (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 80  ;   ;Negative Adjmt. (LCY);Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Value Entry"."Cost Amount (Actual)" WHERE (Item Ledger Entry Type=CONST(Negative Adjmt.),
                                                                                                               Item No.=FIELD(No.),
                                                                                                               Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                               Location Code=FIELD(Location Filter),
                                                                                                               Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                               Variant Code=FIELD(Variant Filter),
                                                                                                               Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Negative Adjmt. (LCY);
                                                              ESP=Ajuste negativo (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 83  ;   ;COGS (LCY)          ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Value Entry"."Cost Amount (Actual)" WHERE (Item Ledger Entry Type=CONST(Sale),
                                                                                                                Item No.=FIELD(No.),
                                                                                                                Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=COGS (LCY);
                                                              ESP=Coste ventas (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 84  ;   ;Qty. on Purch. Order;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Purchase Line"."Outstanding Qty. (Base)" WHERE (Document Type=CONST(Order),
                                                                                                                    Type=CONST(Item),
                                                                                                                    No.=FIELD(No.),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Location Code=FIELD(Location Filter),
                                                                                                                    Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                    Variant Code=FIELD(Variant Filter),
                                                                                                                    Expected Receipt Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 120=R;
                                                   CaptionML=[ENU=Qty. on Purch. Order;
                                                              ESP=Cant. en pedidos compra];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 85  ;   ;Qty. on Sales Order ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Qty. (Base)" WHERE (Document Type=CONST(Order),
                                                                                                                 Type=CONST(Item),
                                                                                                                 No.=FIELD(No.),
                                                                                                                 Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                 Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Qty. on Sales Order;
                                                              ESP=Cant. en pedidos venta];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 87  ;   ;Price Includes VAT  ;Boolean       ;OnValidate=VAR
                                                                VATPostingSetup@1000 : Record 325;
                                                                SalesSetup@1001 : Record 311;
                                                              BEGIN
                                                                IF "Price Includes VAT" THEN BEGIN
                                                                  SalesSetup.GET;
                                                                  IF SalesSetup."VAT Bus. Posting Gr. (Price)" <> '' THEN
                                                                    "VAT Bus. Posting Gr. (Price)" := SalesSetup."VAT Bus. Posting Gr. (Price)";
                                                                  VATPostingSetup.GET("VAT Bus. Posting Gr. (Price)","VAT Prod. Posting Group");
                                                                END;
                                                                VALIDATE("Price/Profit Calculation");
                                                              END;

                                                   CaptionML=[ENU=Price Includes VAT;
                                                              ESP=Precio IVA incluido] }
    { 89  ;   ;Drop Shipment Filter;Boolean       ;FieldClass=FlowFilter;
                                                   AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Drop Shipment Filter;
                                                              ESP=Filtro env¡o directo] }
    { 90  ;   ;VAT Bus. Posting Gr. (Price);Code20;TableRelation="VAT Business Posting Group";
                                                   OnValidate=BEGIN
                                                                VALIDATE("Price/Profit Calculation");
                                                              END;

                                                   CaptionML=[ENU=VAT Bus. Posting Gr. (Price);
                                                              ESP=Gr.regis. IVA negocio (precio)] }
    { 91  ;   ;Gen. Prod. Posting Group;Code20    ;TableRelation="Gen. Product Posting Group";
                                                   OnValidate=BEGIN
                                                                IF xRec."Gen. Prod. Posting Group" <> "Gen. Prod. Posting Group" THEN BEGIN
                                                                  IF CurrFieldNo <> 0 THEN
                                                                    IF ProdOrderExist THEN
                                                                      IF NOT CONFIRM(
                                                                           Text024 +
                                                                           Text022,FALSE,
                                                                           FIELDCAPTION("Gen. Prod. Posting Group"))
                                                                      THEN BEGIN
                                                                        "Gen. Prod. Posting Group" := xRec."Gen. Prod. Posting Group";
                                                                        EXIT;
                                                                      END;

                                                                  IF GenProdPostingGrp.ValidateVatProdPostingGroup(GenProdPostingGrp,"Gen. Prod. Posting Group") THEN
                                                                    VALIDATE("VAT Prod. Posting Group",GenProdPostingGrp."Def. VAT Prod. Posting Group");
                                                                END;

                                                                VALIDATE("Price/Profit Calculation");
                                                              END;

                                                   CaptionML=[ENU=Gen. Prod. Posting Group;
                                                              ESP=Grupo registro prod. gen.] }
    { 92  ;   ;Picture             ;MediaSet      ;CaptionML=[ENU=Picture;
                                                              ESP=Imagen] }
    { 93  ;   ;Transferred (Qty.)  ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Ledger Entry"."Invoiced Quantity" WHERE (Entry Type=CONST(Transfer),
                                                                                                                  Item No.=FIELD(No.),
                                                                                                                  Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                  Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                  Location Code=FIELD(Location Filter),
                                                                                                                  Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                  Variant Code=FIELD(Variant Filter),
                                                                                                                  Posting Date=FIELD(Date Filter),
                                                                                                                  Lot No.=FIELD(Lot No. Filter),
                                                                                                                  Serial No.=FIELD(Serial No. Filter)));
                                                   CaptionML=[ENU=Transferred (Qty.);
                                                              ESP=Transferencias (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 94  ;   ;Transferred (LCY)   ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Value Entry"."Sales Amount (Actual)" WHERE (Item Ledger Entry Type=CONST(Transfer),
                                                                                                                Item No.=FIELD(No.),
                                                                                                                Global Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                Global Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Transferred (LCY);
                                                              ESP=Transferencias (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 95  ;   ;Country/Region of Origin Code;Code10;
                                                   TableRelation=Country/Region;
                                                   CaptionML=[ENU=Country/Region of Origin Code;
                                                              ESP=C¢d. pa¡s/regi¢n de origen] }
    { 96  ;   ;Automatic Ext. Texts;Boolean       ;CaptionML=[ENU=Automatic Ext. Texts;
                                                              ESP=Texto adicional autom tico] }
    { 97  ;   ;No. Series          ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. Series;
                                                              ESP=Nos. serie];
                                                   Editable=No }
    { 98  ;   ;Tax Group Code      ;Code20        ;TableRelation="Tax Group";
                                                   OnValidate=BEGIN
                                                                UpdateTaxGroupId;
                                                              END;

                                                   CaptionML=[ENU=Tax Group Code;
                                                              ESP=C¢d. grupo impuesto] }
    { 99  ;   ;VAT Prod. Posting Group;Code20     ;TableRelation="VAT Product Posting Group";
                                                   OnValidate=BEGIN
                                                                VALIDATE("Price/Profit Calculation");
                                                              END;

                                                   CaptionML=[ENU=VAT Prod. Posting Group;
                                                              ESP=Grupo registro IVA prod.] }
    { 100 ;   ;Reserve             ;Option        ;InitValue=Optional;
                                                   OnValidate=BEGIN
                                                                IF Reserve <> Reserve::Never THEN
                                                                  TESTFIELD(Type,Type::Inventory);
                                                              END;

                                                   AccessByPermission=TableData 120=R;
                                                   CaptionML=[ENU=Reserve;
                                                              ESP=Reserva];
                                                   OptionCaptionML=[ENU=Never,Optional,Always;
                                                                    ESP=Nunca,Opcional,Siempre];
                                                   OptionString=Never,Optional,Always }
    { 101 ;   ;Reserved Qty. on Inventory;Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                Source Type=CONST(32),
                                                                                                                Source Subtype=CONST(0),
                                                                                                                Reservation Status=CONST(Reservation),
                                                                                                                Serial No.=FIELD(Serial No. Filter),
                                                                                                                Lot No.=FIELD(Lot No. Filter),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Variant Code=FIELD(Variant Filter)));
                                                   AccessByPermission=TableData 120=R;
                                                   CaptionML=[ENU=Reserved Qty. on Inventory;
                                                              ESP=Cant. reservada en stock];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 102 ;   ;Reserved Qty. on Purch. Orders;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                Source Type=CONST(39),
                                                                                                                Source Subtype=CONST(1),
                                                                                                                Reservation Status=CONST(Reservation),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Expected Receipt Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 120=R;
                                                   CaptionML=[ENU=Reserved Qty. on Purch. Orders;
                                                              ESP=Cant. reserv. pedidos compra];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 103 ;   ;Reserved Qty. on Sales Orders;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                 Source Type=CONST(37),
                                                                                                                 Source Subtype=CONST(1),
                                                                                                                 Reservation Status=CONST(Reservation),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Reserved Qty. on Sales Orders;
                                                              ESP=Cant. reserv. pedidos venta];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 105 ;   ;Global Dimension 1 Code;Code20     ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(1,"Global Dimension 1 Code");
                                                              END;

                                                   CaptionML=[ENU=Global Dimension 1 Code;
                                                              ESP=C¢d. dimensi¢n global 1];
                                                   CaptionClass='1,1,1' }
    { 106 ;   ;Global Dimension 2 Code;Code20     ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(2,"Global Dimension 2 Code");
                                                              END;

                                                   CaptionML=[ENU=Global Dimension 2 Code;
                                                              ESP=C¢d. dimensi¢n global 2];
                                                   CaptionClass='1,1,2' }
    { 107 ;   ;Res. Qty. on Outbound Transfer;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                 Source Type=CONST(5741),
                                                                                                                 Source Subtype=CONST(0),
                                                                                                                 Reservation Status=CONST(Reservation),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 5740=R;
                                                   CaptionML=[ENU=Res. Qty. on Outbound Transfer;
                                                              ESP=Cant. res. en transfer. salida];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 108 ;   ;Res. Qty. on Inbound Transfer;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                Source Type=CONST(5741),
                                                                                                                Source Subtype=CONST(1),
                                                                                                                Reservation Status=CONST(Reservation),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Expected Receipt Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 5740=R;
                                                   CaptionML=[ENU=Res. Qty. on Inbound Transfer;
                                                              ESP=Cant. res. en transfer. entrada];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 109 ;   ;Res. Qty. on Sales Returns;Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                Source Type=CONST(37),
                                                                                                                Source Subtype=CONST(5),
                                                                                                                Reservation Status=CONST(Reservation),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Res. Qty. on Sales Returns;
                                                              ESP=Cantidad reservada en devoluciones de ventas];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 110 ;   ;Res. Qty. on Purch. Returns;Decimal;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                 Source Type=CONST(39),
                                                                                                                 Source Subtype=CONST(5),
                                                                                                                 Reservation Status=CONST(Reservation),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Expected Receipt Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 6650=R;
                                                   CaptionML=[ENU=Res. Qty. on Purch. Returns;
                                                              ESP=Cantidad reservada en devoluciones de compras];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 120 ;   ;Stockout Warning    ;Option        ;CaptionML=[ENU=Stockout Warning;
                                                              ESP=Advertencia falta stock];
                                                   OptionCaptionML=[ENU=Default,No,Yes;
                                                                    ESP=Predeterminado,No,S¡];
                                                   OptionString=Default,No,Yes }
    { 121 ;   ;Prevent Negative Inventory;Option  ;CaptionML=[ENU=Prevent Negative Inventory;
                                                              ESP=Evitar inventario negativo];
                                                   OptionCaptionML=[ENU=Default,No,Yes;
                                                                    ESP=Predeterminado,No,S¡];
                                                   OptionString=Default,No,Yes }
    { 200 ;   ;Cost of Open Production Orders;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Cost Amount" WHERE (Status=FILTER(Planned|Firm Planned|Released),
                                                                                                           Item No.=FIELD(No.)));
                                                   CaptionML=[ENU=Cost of Open Production Orders;
                                                              ESP=Coste de las ¢rdenes de producci¢n abiertas] }
    { 521 ;   ;Application Wksh. User ID;Code128  ;DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=Application Wksh. User ID;
                                                              ESP=Id. usuario hoja horas de aplicaci¢n] }
    { 910 ;   ;Assembly Policy     ;Option        ;OnValidate=BEGIN
                                                                IF "Assembly Policy" = "Assembly Policy"::"Assemble-to-Order" THEN
                                                                  TESTFIELD("Replenishment System","Replenishment System"::Assembly);
                                                                IF IsNonInventoriableType THEN
                                                                  TESTFIELD("Assembly Policy","Assembly Policy"::"Assemble-to-Stock");
                                                              END;

                                                   AccessByPermission=TableData 90=R;
                                                   CaptionML=[ENU=Assembly Policy;
                                                              ESP=Directiva de ensamblado];
                                                   OptionCaptionML=[ENU=Assemble-to-Stock,Assemble-to-Order;
                                                                    ESP=Ensamblar para stock,Ensamblar para pedido];
                                                   OptionString=Assemble-to-Stock,Assemble-to-Order }
    { 929 ;   ;Res. Qty. on Assembly Order;Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                Source Type=CONST(900),
                                                                                                                Source Subtype=CONST(1),
                                                                                                                Reservation Status=CONST(Reservation),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Expected Receipt Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 90=R;
                                                   CaptionML=[ENU=Res. Qty. on Assembly Order;
                                                              ESP=Ctd. recursos en pedido de ensamblado];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 930 ;   ;Res. Qty. on  Asm. Comp.;Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                 Source Type=CONST(901),
                                                                                                                 Source Subtype=CONST(1),
                                                                                                                 Reservation Status=CONST(Reservation),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 90=R;
                                                   CaptionML=[ENU=Res. Qty. on  Asm. Comp.;
                                                              ESP=Cant. recursos en comp. de ensamblado];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 977 ;   ;Qty. on Assembly Order;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Assembly Header"."Remaining Quantity (Base)" WHERE (Document Type=CONST(Order),
                                                                                                                        Item No.=FIELD(No.),
                                                                                                                        Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                        Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                        Location Code=FIELD(Location Filter),
                                                                                                                        Variant Code=FIELD(Variant Filter),
                                                                                                                        Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Assembly Order;
                                                              ESP=Cant. en pedido de ensamblado];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 978 ;   ;Qty. on Asm. Component;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Assembly Line"."Remaining Quantity (Base)" WHERE (Document Type=CONST(Order),
                                                                                                                      Type=CONST(Item),
                                                                                                                      No.=FIELD(No.),
                                                                                                                      Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                      Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                      Location Code=FIELD(Location Filter),
                                                                                                                      Variant Code=FIELD(Variant Filter),
                                                                                                                      Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Asm. Component;
                                                              ESP=Cant. componentes];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 1001;   ;Qty. on Job Order   ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Job Planning Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Order),
                                                                                                                      Type=CONST(Item),
                                                                                                                      No.=FIELD(No.),
                                                                                                                      Location Code=FIELD(Location Filter),
                                                                                                                      Variant Code=FIELD(Variant Filter),
                                                                                                                      Planning Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Job Order;
                                                              ESP=Cant. en pedido de proyecto];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 1002;   ;Res. Qty. on Job Order;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                 Source Type=CONST(1003),
                                                                                                                 Source Subtype=CONST(2),
                                                                                                                 Reservation Status=CONST(Reservation),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 167=R;
                                                   CaptionML=[ENU=Res. Qty. on Job Order;
                                                              ESP=Cant. rec. pedida en proyectos];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 1217;   ;GTIN                ;Code14        ;CaptionML=[ENU=GTIN;
                                                              ESP=GTIN];
                                                   Numeric=Yes }
    { 1700;   ;Default Deferral Template Code;Code10;
                                                   TableRelation="Deferral Template"."Deferral Code";
                                                   CaptionML=[ENU=Default Deferral Template Code;
                                                              ESP=C¢digo de plantilla de fraccionamiento predeterminada] }
    { 5400;   ;Low-Level Code      ;Integer       ;CaptionML=[ENU=Low-Level Code;
                                                              ESP=C¢d. nivel m s bajo];
                                                   Editable=No }
    { 5401;   ;Lot Size            ;Decimal       ;AccessByPermission=TableData 5405=R;
                                                   CaptionML=[ENU=Lot Size;
                                                              ESP=Tama¤o lote];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5402;   ;Serial Nos.         ;Code20        ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Serial Nos." <> '' THEN
                                                                  TESTFIELD("Item Tracking Code");
                                                              END;

                                                   CaptionML=[ENU=Serial Nos.;
                                                              ESP=N§ serializaci¢n] }
    { 5403;   ;Last Unit Cost Calc. Date;Date     ;CaptionML=[ENU=Last Unit Cost Calc. Date;
                                                              ESP=élt. fecha calc. coste unitario];
                                                   Editable=No }
    { 5404;   ;Rolled-up Material Cost;Decimal    ;CaptionML=[ENU=Rolled-up Material Cost;
                                                              ESP=Coste material distribuido];
                                                   DecimalPlaces=2:5;
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 5405;   ;Rolled-up Capacity Cost;Decimal    ;CaptionML=[ENU=Rolled-up Capacity Cost;
                                                              ESP=Coste capacidad distribuida];
                                                   DecimalPlaces=2:5;
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 5407;   ;Scrap %             ;Decimal       ;AccessByPermission=TableData 5405=R;
                                                   CaptionML=[ENU=Scrap %;
                                                              ESP=% Rechazo];
                                                   DecimalPlaces=0:2;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 5409;   ;Inventory Value Zero;Boolean       ;OnValidate=BEGIN
                                                                CheckForProductionOutput("No.");
                                                              END;

                                                   CaptionML=[ENU=Inventory Value Zero;
                                                              ESP=Inventario valor cero] }
    { 5410;   ;Discrete Order Quantity;Integer    ;CaptionML=[ENU=Discrete Order Quantity;
                                                              ESP=Cantidad pedido discreta];
                                                   MinValue=0 }
    { 5411;   ;Minimum Order Quantity;Decimal     ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Minimum Order Quantity;
                                                              ESP=Cantidad m¡nima pedido];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5412;   ;Maximum Order Quantity;Decimal     ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Maximum Order Quantity;
                                                              ESP=Cantidad m xima pedido];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5413;   ;Safety Stock Quantity;Decimal      ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Safety Stock Quantity;
                                                              ESP=Stock de seguridad];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5414;   ;Order Multiple      ;Decimal       ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Order Multiple;
                                                              ESP=M£ltiplos de pedido];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5415;   ;Safety Lead Time    ;DateFormula   ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Safety Lead Time;
                                                              ESP=Plazo de seguridad] }
    { 5417;   ;Flushing Method     ;Option        ;AccessByPermission=TableData 5405=R;
                                                   CaptionML=[ENU=Flushing Method;
                                                              ESP=M‚todo de baja];
                                                   OptionCaptionML=[ENU=Manual,Forward,Backward,Pick + Forward,Pick + Backward;
                                                                    ESP=Manual,Adelante,Atr s,Pick + Adelante,Pick + Atr s];
                                                   OptionString=Manual,Forward,Backward,Pick + Forward,Pick + Backward }
    { 5419;   ;Replenishment System;Option        ;OnValidate=BEGIN
                                                                IF "Replenishment System" <> "Replenishment System"::Assembly THEN
                                                                  TESTFIELD("Assembly Policy","Assembly Policy"::"Assemble-to-Stock");
                                                                IF "Replenishment System" <> "Replenishment System"::Purchase THEN
                                                                  TESTFIELD(Type,Type::Inventory);
                                                              END;

                                                   AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Replenishment System;
                                                              ESP=Sistema reposici¢n];
                                                   OptionCaptionML=[ENU=Purchase,Prod. Order,,Assembly;
                                                                    ESP=Compra,Prod. Pedido,,Ensamblado];
                                                   OptionString=Purchase,Prod. Order,,Assembly }
    { 5420;   ;Scheduled Receipt (Qty.);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=FILTER(Firm Planned|Released),
                                                                                                                     Item No.=FIELD(No.),
                                                                                                                     Variant Code=FIELD(Variant Filter),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Filter),
                                                                                                                     Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Scheduled Receipt (Qty.);
                                                              ESP=Recepci¢n programada (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5421;   ;Scheduled Need (Qty.);Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Component"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                          Item No.=FIELD(No.),
                                                                                                                          Variant Code=FIELD(Variant Filter),
                                                                                                                          Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                          Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                          Location Code=FIELD(Location Filter),
                                                                                                                          Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Scheduled Need (Qty.);
                                                              ESP=Necesidad programada (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5422;   ;Rounding Precision  ;Decimal       ;InitValue=1;
                                                   OnValidate=BEGIN
                                                                IF "Rounding Precision" <= 0 THEN
                                                                  FIELDERROR("Rounding Precision",Text027);
                                                              END;

                                                   AccessByPermission=TableData 5405=R;
                                                   CaptionML=[ENU=Rounding Precision;
                                                              ESP=Precisi¢n redondeo];
                                                   DecimalPlaces=0:5 }
    { 5423;   ;Bin Filter          ;Code20        ;FieldClass=FlowFilter;
                                                   TableRelation=Bin.Code WHERE (Location Code=FIELD(Location Filter));
                                                   CaptionML=[ENU=Bin Filter;
                                                              ESP=Filtro ubicaci¢n] }
    { 5424;   ;Variant Filter      ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation="Item Variant".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Variant Filter;
                                                              ESP=Filtro variante] }
    { 5425;   ;Sales Unit of Measure;Code10       ;TableRelation=IF (No.=FILTER(<>'')) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.))
                                                                 ELSE "Unit of Measure";
                                                   CaptionML=[ENU=Sales Unit of Measure;
                                                              ESP=Unidad medida venta] }
    { 5426;   ;Purch. Unit of Measure;Code10      ;TableRelation=IF (No.=FILTER(<>'')) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.))
                                                                 ELSE "Unit of Measure";
                                                   CaptionML=[ENU=Purch. Unit of Measure;
                                                              ESP=Unidad medida compra] }
    { 5428;   ;Time Bucket         ;DateFormula   ;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Time Bucket");
                                                              END;

                                                   AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Time Bucket;
                                                              ESP=Ciclo] }
    { 5429;   ;Reserved Qty. on Prod. Order;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                Source Type=CONST(5406),
                                                                                                                Source Subtype=FILTER(1..3),
                                                                                                                Reservation Status=CONST(Reservation),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Expected Receipt Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 5405=R;
                                                   CaptionML=[ENU=Reserved Qty. on Prod. Order;
                                                              ESP=Cant. reserv. en ord. producc.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5430;   ;Res. Qty. on Prod. Order Comp.;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                 Source Type=CONST(5407),
                                                                                                                 Source Subtype=FILTER(1..3),
                                                                                                                 Reservation Status=CONST(Reservation),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 5405=R;
                                                   CaptionML=[ENU=Res. Qty. on Prod. Order Comp.;
                                                              ESP=Cant. res. en comp. producc.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5431;   ;Res. Qty. on Req. Line;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                Source Type=CONST(246),
                                                                                                                Source Subtype=FILTER(0),
                                                                                                                Reservation Status=CONST(Reservation),
                                                                                                                Location Code=FIELD(Location Filter),
                                                                                                                Variant Code=FIELD(Variant Filter),
                                                                                                                Expected Receipt Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Res. Qty. on Req. Line;
                                                              ESP=Cant. res. en l¡n. demanda];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5440;   ;Reordering Policy   ;Option        ;OnValidate=BEGIN
                                                                "Include Inventory" :=
                                                                  "Reordering Policy" IN ["Reordering Policy"::"Lot-for-Lot",
                                                                                          "Reordering Policy"::"Maximum Qty.",
                                                                                          "Reordering Policy"::"Fixed Reorder Qty."];

                                                                IF "Reordering Policy" <> "Reordering Policy"::" " THEN
                                                                  TESTFIELD(Type,Type::Inventory);
                                                              END;

                                                   AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Reordering Policy;
                                                              ESP=Directiva reaprov.];
                                                   OptionCaptionML=[ENU=" ,Fixed Reorder Qty.,Maximum Qty.,Order,Lot-for-Lot";
                                                                    ESP=" ,Cant. fija reaprov.,Cant. m xima,Pedido,Lote a lote"];
                                                   OptionString=[ ,Fixed Reorder Qty.,Maximum Qty.,Order,Lot-for-Lot] }
    { 5441;   ;Include Inventory   ;Boolean       ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Include Inventory;
                                                              ESP=Incluir inventario] }
    { 5442;   ;Manufacturing Policy;Option        ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Manufacturing Policy;
                                                              ESP=Directiva fabricaci¢n];
                                                   OptionCaptionML=[ENU=Make-to-Stock,Make-to-Order;
                                                                    ESP=Fab-contra-stock,Fab-contra-pedido];
                                                   OptionString=Make-to-Stock,Make-to-Order }
    { 5443;   ;Rescheduling Period ;DateFormula   ;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Rescheduling Period");
                                                              END;

                                                   AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Rescheduling Period;
                                                              ESP=Periodo de reprogramaci¢n] }
    { 5444;   ;Lot Accumulation Period;DateFormula;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Lot Accumulation Period");
                                                              END;

                                                   AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Lot Accumulation Period;
                                                              ESP=Periodo de acumulaci¢n de lotes] }
    { 5445;   ;Dampener Period     ;DateFormula   ;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Dampener Period");
                                                              END;

                                                   AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Dampener Period;
                                                              ESP=Periodo amortiguador] }
    { 5446;   ;Dampener Quantity   ;Decimal       ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Dampener Quantity;
                                                              ESP=Cantidad amortiguador];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5447;   ;Overflow Level      ;Decimal       ;AccessByPermission=TableData 244=R;
                                                   CaptionML=[ENU=Overflow Level;
                                                              ESP=Nivel desbordamiento];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5449;   ;Planning Transfer Ship. (Qty).;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Worksheet Template Name=FILTER(<>''),
                                                                                                               Journal Batch Name=FILTER(<>''),
                                                                                                               Replenishment System=CONST(Transfer),
                                                                                                               Type=CONST(Item),
                                                                                                               No.=FIELD(No.),
                                                                                                               Variant Code=FIELD(Variant Filter),
                                                                                                               Transfer-from Code=FIELD(Location Filter),
                                                                                                               Transfer Shipment Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Planning Transfer Ship. (Qty).;
                                                              ESP=Env¡o de transferencia de planificaci¢n (ctd.)];
                                                   Editable=No }
    { 5450;   ;Planning Worksheet (Qty.);Decimal  ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Planning Line Origin=CONST(Planning),
                                                                                                               Type=CONST(Item),
                                                                                                               No.=FIELD(No.),
                                                                                                               Location Code=FIELD(Location Filter),
                                                                                                               Variant Code=FIELD(Variant Filter),
                                                                                                               Due Date=FIELD(Date Filter),
                                                                                                               Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter)));
                                                   CaptionML=[ENU=Planning Worksheet (Qty.);
                                                              ESP=Hoja planificaci¢n (ctd.)];
                                                   Editable=No }
    { 5700;   ;Stockkeeping Unit Exists;Boolean   ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Stockkeeping Unit" WHERE (Item No.=FIELD(No.)));
                                                   CaptionML=[ENU=Stockkeeping Unit Exists;
                                                              ESP=Existe ud. de almacenam.];
                                                   Editable=No }
    { 5701;   ;Manufacturer Code   ;Code10        ;TableRelation=Manufacturer;
                                                   CaptionML=[ENU=Manufacturer Code;
                                                              ESP=C¢d. fabricante] }
    { 5702;   ;Item Category Code  ;Code20        ;TableRelation="Item Category";
                                                   OnValidate=VAR
                                                                ItemAttributeManagement@1000 : Codeunit 7500;
                                                                ProductGroup@1170170000 : Record 5723;
                                                              BEGIN
                                                                IF NOT ISTEMPORARY THEN
                                                                  ItemAttributeManagement.InheritAttributesFromItemCategory(Rec,"Item Category Code",xRec."Item Category Code");
                                                                UpdateItemCategoryId;
                                                              END;

                                                   CaptionML=[ENU=Item Category Code;
                                                              ESP=C¢d. categor¡a producto] }
    { 5703;   ;Created From Nonstock Item;Boolean ;AccessByPermission=TableData 5718=R;
                                                   CaptionML=[ENU=Created From Catalog Item;
                                                              ESP=Creado desde producto de cat logo];
                                                   Editable=No }
    { 5704;   ;Product Group Code  ;Code10        ;ObsoleteState=Removed;
                                                   ObsoleteReason=Product Groups became first level children of Item Categories.;
                                                   CaptionML=[ENU=Product Group Code;
                                                              ESP=C¢d. grupo producto] }
    { 5706;   ;Substitutes Exist   ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Item Substitution" WHERE (Type=CONST(Item),
                                                                                                No.=FIELD(No.)));
                                                   CaptionML=[ENU=Substitutes Exist;
                                                              ESP=Existe sustitutivo];
                                                   Editable=No }
    { 5707;   ;Qty. in Transit     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Qty. in Transit (Base)" WHERE (Derived From Line No.=CONST(0),
                                                                                                                   Item No.=FIELD(No.),
                                                                                                                   Transfer-to Code=FIELD(Location Filter),
                                                                                                                   Variant Code=FIELD(Variant Filter),
                                                                                                                   Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                   Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                   Receipt Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. in Transit;
                                                              ESP=Cant. en tr nsito];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5708;   ;Trans. Ord. Receipt (Qty.);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Outstanding Qty. (Base)" WHERE (Derived From Line No.=CONST(0),
                                                                                                                    Item No.=FIELD(No.),
                                                                                                                    Transfer-to Code=FIELD(Location Filter),
                                                                                                                    Variant Code=FIELD(Variant Filter),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Receipt Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Trans. Ord. Receipt (Qty.);
                                                              ESP=Recep. ped. transfer. (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5709;   ;Trans. Ord. Shipment (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Outstanding Qty. (Base)" WHERE (Derived From Line No.=CONST(0),
                                                                                                                    Item No.=FIELD(No.),
                                                                                                                    Transfer-from Code=FIELD(Location Filter),
                                                                                                                    Variant Code=FIELD(Variant Filter),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Shipment Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Trans. Ord. Shipment (Qty.);
                                                              ESP=Env¡o ped. transfer. (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5776;   ;Qty. Assigned to ship;Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Warehouse Shipment Line"."Qty. Outstanding (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                              Location Code=FIELD(Location Filter),
                                                                                                                              Variant Code=FIELD(Variant Filter),
                                                                                                                              Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. Assigned to ship;
                                                              ESP=Cant. asignada a enviar];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5777;   ;Qty. Picked         ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Warehouse Shipment Line"."Qty. Picked (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                         Location Code=FIELD(Location Filter),
                                                                                                                         Variant Code=FIELD(Variant Filter),
                                                                                                                         Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. Picked;
                                                              ESP=Cant. preparada pedido];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5900;   ;Service Item Group  ;Code10        ;TableRelation="Service Item Group".Code;
                                                   OnValidate=VAR
                                                                ResSkill@1000 : Record 5956;
                                                              BEGIN
                                                                IF xRec."Service Item Group" <> "Service Item Group" THEN BEGIN
                                                                  IF NOT ResSkillMgt.ChangeRelationWithGroup(
                                                                       ResSkill.Type::Item,
                                                                       "No.",
                                                                       ResSkill.Type::"Service Item Group",
                                                                       "Service Item Group",
                                                                       xRec."Service Item Group")
                                                                  THEN
                                                                    "Service Item Group" := xRec."Service Item Group";
                                                                END ELSE
                                                                  ResSkillMgt.RevalidateRelation(
                                                                    ResSkill.Type::Item,
                                                                    "No.",
                                                                    ResSkill.Type::"Service Item Group",
                                                                    "Service Item Group")
                                                              END;

                                                   CaptionML=[ENU=Service Item Group;
                                                              ESP=Grupo prod. servicio] }
    { 5901;   ;Qty. on Service Order;Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Service Line"."Outstanding Qty. (Base)" WHERE (Document Type=CONST(Order),
                                                                                                                   Type=CONST(Item),
                                                                                                                   No.=FIELD(No.),
                                                                                                                   Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                   Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                   Location Code=FIELD(Location Filter),
                                                                                                                   Variant Code=FIELD(Variant Filter),
                                                                                                                   Needed by Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Service Order;
                                                              ESP=Cant. en ped. servicio];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5902;   ;Res. Qty. on Service Orders;Decimal;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry"."Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                 Source Type=CONST(5902),
                                                                                                                 Source Subtype=CONST(1),
                                                                                                                 Reservation Status=CONST(Reservation),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 5900=R;
                                                   CaptionML=[ENU=Res. Qty. on Service Orders;
                                                              ESP=Cant. res. en pedidos serv.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 6500;   ;Item Tracking Code  ;Code10        ;TableRelation="Item Tracking Code";
                                                   OnValidate=BEGIN
                                                                IF "Item Tracking Code" <> '' THEN
                                                                  TESTFIELD(Type,Type::Inventory);
                                                                IF "Item Tracking Code" = xRec."Item Tracking Code" THEN
                                                                  EXIT;

                                                                IF NOT ItemTrackingCode.GET("Item Tracking Code") THEN
                                                                  CLEAR(ItemTrackingCode);

                                                                IF NOT ItemTrackingCode2.GET(xRec."Item Tracking Code") THEN
                                                                  CLEAR(ItemTrackingCode2);

                                                                IF (ItemTrackingCode."SN Specific Tracking" <> ItemTrackingCode2."SN Specific Tracking") OR
                                                                   (ItemTrackingCode."Lot Specific Tracking" <> ItemTrackingCode2."Lot Specific Tracking")
                                                                THEN
                                                                  TestNoEntriesExist(FIELDCAPTION("Item Tracking Code"));

                                                                IF "Costing Method" = "Costing Method"::Specific THEN BEGIN
                                                                  TestNoEntriesExist(FIELDCAPTION("Item Tracking Code"));

                                                                  TESTFIELD("Item Tracking Code");

                                                                  ItemTrackingCode.GET("Item Tracking Code");
                                                                  IF NOT ItemTrackingCode."SN Specific Tracking" THEN
                                                                    ERROR(
                                                                      Text018,
                                                                      ItemTrackingCode.FIELDCAPTION("SN Specific Tracking"),
                                                                      FORMAT(TRUE),ItemTrackingCode.TABLECAPTION,ItemTrackingCode.Code,
                                                                      FIELDCAPTION("Costing Method"),"Costing Method");
                                                                END;

                                                                TestNoOpenDocumentsWithTrackingExist;
                                                              END;

                                                   CaptionML=[ENU=Item Tracking Code;
                                                              ESP=C¢d. seguim. prod.] }
    { 6501;   ;Lot Nos.            ;Code20        ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Lot Nos." <> '' THEN
                                                                  TESTFIELD("Item Tracking Code");
                                                              END;

                                                   CaptionML=[ENU=Lot Nos.;
                                                              ESP=N§ serie lote] }
    { 6502;   ;Expiration Calculation;DateFormula ;CaptionML=[ENU=Expiration Calculation;
                                                              ESP=C lculo caducidad] }
    { 6503;   ;Lot No. Filter      ;Code50        ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Lot No. Filter;
                                                              ESP=Filtro n§ lote] }
    { 6504;   ;Serial No. Filter   ;Code50        ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Serial No. Filter;
                                                              ESP=Filtro n§ serie] }
    { 6650;   ;Qty. on Purch. Return;Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Purchase Line"."Outstanding Qty. (Base)" WHERE (Document Type=CONST(Return Order),
                                                                                                                    Type=CONST(Item),
                                                                                                                    No.=FIELD(No.),
                                                                                                                    Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                    Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                    Location Code=FIELD(Location Filter),
                                                                                                                    Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                    Variant Code=FIELD(Variant Filter),
                                                                                                                    Expected Receipt Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Qty. on Purch. Return;
                                                              ESP=Cant. en devoluciones de compras];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 6660;   ;Qty. on Sales Return;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Qty. (Base)" WHERE (Document Type=CONST(Return Order),
                                                                                                                 Type=CONST(Item),
                                                                                                                 No.=FIELD(No.),
                                                                                                                 Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                 Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                 Drop Shipment=FIELD(Drop Shipment Filter),
                                                                                                                 Variant Code=FIELD(Variant Filter),
                                                                                                                 Shipment Date=FIELD(Date Filter)));
                                                   AccessByPermission=TableData 6650=R;
                                                   CaptionML=[ENU=Qty. on Sales Return;
                                                              ESP=Cant. en devoluciones de ventas];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 7171;   ;No. of Substitutes  ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count("Item Substitution" WHERE (Type=CONST(Item),
                                                                                                No.=FIELD(No.)));
                                                   CaptionML=[ENU=No. of Substitutes;
                                                              ESP=N§ de sustitutos];
                                                   Editable=No }
    { 7300;   ;Warehouse Class Code;Code10        ;TableRelation="Warehouse Class";
                                                   CaptionML=[ENU=Warehouse Class Code;
                                                              ESP=C¢d. clase almac‚n] }
    { 7301;   ;Special Equipment Code;Code10      ;TableRelation="Special Equipment";
                                                   CaptionML=[ENU=Special Equipment Code;
                                                              ESP=C¢d. equipo especial] }
    { 7302;   ;Put-away Template Code;Code10      ;TableRelation="Put-away Template Header";
                                                   CaptionML=[ENU=Put-away Template Code;
                                                              ESP=C¢d. plantilla ubicar] }
    { 7307;   ;Put-away Unit of Measure Code;Code10;
                                                   TableRelation=IF (No.=FILTER(<>'')) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.))
                                                                 ELSE "Unit of Measure";
                                                   AccessByPermission=TableData 7340=R;
                                                   CaptionML=[ENU=Put-away Unit of Measure Code;
                                                              ESP=C¢d. ud. medida ubicaci¢n] }
    { 7380;   ;Phys Invt Counting Period Code;Code10;
                                                   TableRelation="Phys. Invt. Counting Period";
                                                   OnValidate=VAR
                                                                PhysInvtCountPeriod@1000 : Record 7381;
                                                                PhysInvtCountPeriodMgt@1001 : Codeunit 7380;
                                                              BEGIN
                                                                IF ("Phys Invt Counting Period Code" <> '') AND
                                                                   ("Phys Invt Counting Period Code" <> xRec."Phys Invt Counting Period Code")
                                                                THEN BEGIN
                                                                  PhysInvtCountPeriod.GET("Phys Invt Counting Period Code");
                                                                  PhysInvtCountPeriod.TESTFIELD("Count Frequency per Year");
                                                                  IF xRec."Phys Invt Counting Period Code" <> '' THEN
                                                                    IF CurrFieldNo <> 0 THEN
                                                                      IF NOT CONFIRM(
                                                                           Text7380,
                                                                           FALSE,
                                                                           FIELDCAPTION("Phys Invt Counting Period Code"),
                                                                           FIELDCAPTION("Next Counting Start Date"),
                                                                           FIELDCAPTION("Next Counting End Date"))
                                                                      THEN
                                                                        ERROR(Text7381);

                                                                  IF "Last Counting Period Update" = 0D THEN
                                                                    PhysInvtCountPeriodMgt.CalcPeriod(
                                                                      "Last Counting Period Update","Next Counting Start Date","Next Counting End Date",
                                                                      PhysInvtCountPeriod."Count Frequency per Year");
                                                                END ELSE BEGIN
                                                                  IF CurrFieldNo <> 0 THEN
                                                                    IF NOT CONFIRM(Text003,FALSE,FIELDCAPTION("Phys Invt Counting Period Code")) THEN
                                                                      ERROR(Text7381);
                                                                  "Next Counting Start Date" := 0D;
                                                                  "Next Counting End Date" := 0D;
                                                                  "Last Counting Period Update" := 0D;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Phys Invt Counting Period Code;
                                                              ESP=C¢d. perio. recuento inv. f¡s.] }
    { 7381;   ;Last Counting Period Update;Date   ;AccessByPermission=TableData 7380=R;
                                                   CaptionML=[ENU=Last Counting Period Update;
                                                              ESP=élt. actual. periodo recuento];
                                                   Editable=No }
    { 7383;   ;Last Phys. Invt. Date;Date         ;FieldClass=FlowField;
                                                   CalcFormula=Max("Phys. Inventory Ledger Entry"."Posting Date" WHERE (Item No.=FIELD(No.),
                                                                                                                        Phys Invt Counting Period Type=FILTER(' '|Item)));
                                                   CaptionML=[ENU=Last Phys. Invt. Date;
                                                              ESP=élt. fecha invent. f¡sico];
                                                   Editable=No }
    { 7384;   ;Use Cross-Docking   ;Boolean       ;InitValue=Yes;
                                                   AccessByPermission=TableData 7302=R;
                                                   CaptionML=[ENU=Use Cross-Docking;
                                                              ESP=Utilizar tr nsito directo] }
    { 7385;   ;Next Counting Start Date;Date      ;CaptionML=[ENU=Next Counting Start Date;
                                                              ESP=Siguiente fecha de inicio del recuento];
                                                   Editable=No }
    { 7386;   ;Next Counting End Date;Date        ;CaptionML=[ENU=Next Counting End Date;
                                                              ESP=Siguiente fecha de fin del recuento];
                                                   Editable=No }
    { 7700;   ;Identifier Code     ;Code20        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Item Identifier".Code WHERE (Item No.=FIELD(No.)));
                                                   CaptionML=[ENU=Identifier Code;
                                                              ESP=C¢digo identificador];
                                                   Editable=No }
    { 8000;   ;Id                  ;GUID          ;CaptionML=[ENU=Id;
                                                              ESP=Id.] }
    { 8001;   ;Unit of Measure Id  ;GUID          ;TableRelation="Unit of Measure".Id;
                                                   OnValidate=BEGIN
                                                                UpdateUnitOfMeasureCode;
                                                              END;

                                                   CaptionML=[ENU=Unit of Measure Id;
                                                              ESP=Id. de unidad de medida] }
    { 8002;   ;Tax Group Id        ;GUID          ;TableRelation="Tax Group".Id;
                                                   OnValidate=BEGIN
                                                                UpdateTaxGroupCode;
                                                              END;

                                                   CaptionML=[ENU=Tax Group Id;
                                                              ESP=Id. de grupo impositivo] }
    { 8003;   ;Sales Blocked       ;Boolean       ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Sales Blocked;
                                                              ESP=Ventas bloqueadas] }
    { 8004;   ;Purchasing Blocked  ;Boolean       ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Purchasing Blocked;
                                                              ESP=Compras bloqueadas] }
    { 8005;   ;Item Category Id    ;GUID          ;TableRelation="Item Category".Id;
                                                   OnValidate=BEGIN
                                                                UpdateItemCategoryCode;
                                                              END;

                                                   DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Item Category Id;
                                                              ESP=Id. de categor¡a de producto] }
    { 10700;  ;Cost Regulation %   ;Decimal       ;CaptionML=[ENU=Cost Regulation %;
                                                              ESP=% Coste territorio nacional];
                                                   DecimalPlaces=2:2;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 50000;  ;Pendiente revisar   ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0009 }
    { 50001;  ;Con precinta        ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0028 }
    { 50002;  ;Precinta propia     ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0028 }
    { 50003;  ;C¢d. tipo precinta  ;Code20        ;TableRelation="Tipo precinta".C¢digo;
                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0028 }
    { 50004;  ;Precio coste tarifa ;Decimal       ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Precio coste tarifa;
                                                              ESP=Precio coste tarifa];
                                                   MinValue=0;
                                                   Description=BAIN-0014;
                                                   AutoFormatType=2 }
    { 50006;  ;C¢d. grupo comisi¢n ;Code20        ;TableRelation="Grupo comisi¢n producto".C¢digo;
                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 50007;  ;Cdad. medida precio manual;Boolean ;OnValidate=VAR
                                                                ItemTrackingCode@1170000000 : Record 6502;
                                                              BEGIN
                                                                //I-BAIN-0021
                                                                IF "Cdad. medida precio manual" THEN BEGIN
                                                                     ItemTrackingCode.GET("Item Category Code");
                                                                     ItemTrackingCode.TESTFIELD("Lot Info. Inbound Must Exist",TRUE);
                                                                     ItemTrackingCode.TESTFIELD("Lot Info. Outbound Must Exist",TRUE);
                                                                  END;
                                                                //F-BAIN-0021
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0021 }
    { 50020;  ;C¢d. conjunto       ;Code10        ;TableRelation="Conjunto productos".C¢digo;
                                                   OnValidate=VAR
                                                                Conjunto@1170170000 : Record 50010;
                                                              BEGIN
                                                                // I-23069
                                                                IF "C¢d. conjunto" <> '' THEN BEGIN
                                                                  Conjunto.GET("C¢d. conjunto");
                                                                  TESTFIELD("C¢d. ud. medida precio",Conjunto."C¢d. unidad medida precio");
                                                                END;
                                                                // F-23069
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   Description=23069 }
    { 55300;  ;IVA desglosado      ;Boolean       ;OnValidate=BEGIN
                                                                //++ BAIN-0010
                                                                IF "IVA desglosado" THEN BEGIN
                                                                  TESTFIELD("Assembly BOM",TRUE);
                                                                  TESTFIELD("Price Includes VAT",FALSE);
                                                                  "VAT Prod. Posting Group" := '';
                                                                END ELSE BEGIN
                                                                  IF GenProdPostingGrp.ValidateVatProdPostingGroup(GenProdPostingGrp,"Gen. Prod. Posting Group") THEN
                                                                    VALIDATE("VAT Prod. Posting Group",GenProdPostingGrp."Def. VAT Prod. Posting Group");
                                                                END;
                                                                //-- BAIN-0010
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0010 }
    { 7014451;;Variante obligatoria;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Item Variant" WHERE (Item No.=FIELD(No.)));
                                                   CaptionML=[ENU=Mandatory variant;
                                                              ESP=Variante obligatoria];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014452;;C¢d. marca          ;Code10        ;TableRelation=Marca;
                                                   CaptionML=[ENU=Brand code;
                                                              ESP=C¢d. marca;
                                                              PTG=C¢d. Marca];
                                                   Description=VNTES }
    { 7014454;;C¢d. ud. medida precio;Code10      ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Price unit measure code;
                                                              ESP=C¢d. ud. medida precio];
                                                   Description=VNTES }
    { 7014455;;C¢d. ud. medida entrada;Code10     ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Inbound unit measure code;
                                                              ESP=C¢d. ud. medida entrada];
                                                   Description=VNTES }
    { 7014456;;C¢d. a¤ada          ;Code10        ;TableRelation=A¤ada;
                                                   CaptionML=[ENU=Vintage code;
                                                              ESP=C¢d. a¤ada;
                                                              PTG=C¢d. Ano];
                                                   Description=VNTES }
    { 7014457;;C¢d. formato        ;Code10        ;TableRelation=Formato;
                                                   CaptionML=[ENU=Format code;
                                                              ESP=C¢d. formato;
                                                              PTG=C¢d. Formato];
                                                   Description=VNTES }
    { 7014459;;C¢d. color vino     ;Code10        ;TableRelation="Color vino";
                                                   CaptionML=[ENU=Wine colour code;
                                                              ESP=C¢d. color vino;
                                                              PTG=C¢d. Cor Vinho];
                                                   Description=VNTES }
    { 7014460;;C¢d. calificaci¢n   ;Code10        ;TableRelation=Calificaci¢n;
                                                   CaptionML=[ENU=Qualification code;
                                                              ESP=C¢d. calificaci¢n;
                                                              PTG=C¢d. Classifica‡Æo];
                                                   Description=VNTES }
    { 7014462;;C¢d. formato botella;Code10        ;TableRelation="Formato botella";
                                                   OnValidate=BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27CalculaVolumen(Rec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=Bottle format code;
                                                              ESP=C¢d. formato botella;
                                                              PTG=C¢d. Formato Garrafa];
                                                   Description=VNTES,CEX }
    { 7014463;;C¢d. formato caja   ;Code10        ;TableRelation="Formato caja";
                                                   OnValidate=BEGIN
                                                                GestTablasExist.T27CalculaVolumen(Rec) //  VNTES
                                                              END;

                                                   CaptionML=[ENU=Box format code;
                                                              ESP=C¢d. formato caja;
                                                              PTG=C¢d. Formato Caixa];
                                                   Description=VNTES,CEX }
    { 7014464;;Granel              ;Boolean       ;OnValidate=BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27ValidateGranel(Rec,xRec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=Bulk;
                                                              ESP=Granel];
                                                   Description=VNTES,CEX }
    { 7014468;;C¢d. denominaci¢n origen;Code10    ;TableRelation="Denominaci¢n de origen";
                                                   CaptionML=[ENU=Designation of origin code;
                                                              ESP=C¢d. denominaci¢n origen;
                                                              PTG=C¢d. Denomina‡Æo Origem];
                                                   Description=VNTES }
    { 7014475;;Grado               ;Decimal       ;OnValidate=BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27ValidateGrado(Rec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=Degree;
                                                              ESP=Grado;
                                                              PTG=Grau];
                                                   MinValue=0;
                                                   MaxValue=100;
                                                   Description=VNTES,CEX }
    { 7014476;;Envase vendimia     ;Boolean       ;CaptionML=[ENU=Harvest packaging;
                                                              ESP=Envase vendimia];
                                                   Description=VNTES }
    { 7014480;;Precio punto verde  ;Decimal       ;CaptionML=[ENU=Green point price;
                                                              ESP=Precio punto verde];
                                                   Description=VNTES;
                                                   AutoFormatType=2 }
    { 7014490;;Subproducto         ;Boolean       ;CaptionML=[ENU=By-product;
                                                              ESP=Subproducto];
                                                   Description=VNTES }
    { 7014502;;C¢d. grupo IIEE producto;Code10    ;TableRelation="Grupo IIEE producto".C¢digo;
                                                   CaptionML=[ENU=IISS product group code;
                                                              ESP=C¢d. grupo IIEE producto];
                                                   Description=VNTES }
    { 7014511;;Tipo producto       ;Option        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Item Category"."Tipo producto" WHERE (Code=FIELD(Item Category Code)));
                                                   CaptionML=[ENU=Product Type;
                                                              ESP=Tipo producto];
                                                   OptionCaptionML=[ENU=" ,Bulk wine,Labelled,Bottled,Grape,Must,Phytosanitary,Oenologic,By-products";
                                                                    ESP=" ,Granel vino,Etiquetado,Botellero,Uva,Granel Mosto,Fitosanitarios,Trat.enolog¡a,Subproductos"];
                                                   OptionString=[ ,Granel vino,Etiquetado,Botellero,Uva,Granel Mosto,Fitosanitarios,Trat.enolog¡a,Subproductos];
                                                   Description=VNTES }
    { 7014534;;Incluir en anexo    ;Boolean       ;OnValidate=BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27ValidateIncluirEnAnexoI(Rec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=Include in Annex;
                                                              ESP=Incluir en anexo;
                                                              PTG=Incluir na DAA];
                                                   Description=VNTES }
    { 7014535;;Texto anexo         ;Text30        ;OnValidate=BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27ValidateTextoAnexoI(Rec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=Annex yext;
                                                              ESP=Texto anexo;
                                                              PTG=Texto DAA];
                                                   Description=VNTES }
    { 7014536;;Tipo cantidad anexo ;Option        ;OnValidate=BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27ValidateTipoCantidadAnexoI(Rec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=Type Annex amount;
                                                              ESP=Tipo cantidad anexo];
                                                   OptionCaptionML=[ENU=" ,Gross weight,Volume,Bottles";
                                                                    ESP=" ,Peso bruto,Volumen,Botellas"];
                                                   OptionString=[ ,Peso bruto,Volumen,Botellas];
                                                   Description=VNTES }
    { 7014600;;Producto compuesto  ;Boolean       ;OnValidate=BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27ValidateProductoCompuesto(Rec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=Product compound;
                                                              ESP=Producto compuesto];
                                                   Description=VNTES }
    { 7014615;;Dosis m¡nima por hect rea;Decimal  ;CaptionML=[ENU=Minimum dose per hectare;
                                                              ESP=Dosis m¡nima por hect rea];
                                                   Description=VNTES }
    { 7014616;;Dosis m xima por hect rea;Decimal  ;CaptionML=[ENU=Maximum dose per hectare;
                                                              ESP=Dosis m xima por hect rea];
                                                   Description=VNTES }
    { 7014617;;Plazo de seguridad fitosanita;DateFormula;
                                                   CaptionML=[ENU=Term safety of plant protection;
                                                              ESP=Plazo de seguridad fitosanita];
                                                   Description=VNTES }
    { 7014618;;Dosis               ;Text20        ;CaptionML=[ENU=Dose;
                                                              ESP=Dosis];
                                                   Description=VNTES }
    { 7014619;;Agua parcelas       ;Boolean       ;CaptionML=[ENU=Water plots;
                                                              ESP=Agua parcelas];
                                                   Description=VNTES }
    { 7014620;;No. MAGRAMA         ;Code20        ;CaptionML=[ENU=MAGRAMA No.;
                                                              ESP=N§ MAGRAMA];
                                                   Description=VNTES }
    { 7014766;;C¢d. almac‚n consumo;Code10        ;TableRelation=Location;
                                                   CaptionML=[ENU=Cod. consumer store;
                                                              ESP=C¢d. almac‚n consumo;
                                                              PTG=C¢d. Localiza‡Æo Consumo];
                                                   Description=VNTES }
    { 7014767;;C¢d. concepto coste hereda;Code20  ;TableRelation="Propiedad parc. cultivo";
                                                   CaptionML=[ENU=Cod. cost concept inherits;
                                                              ESP=C¢d. concepto coste hereda];
                                                   Description=VNTES }
    { 7014768;;C¢d. gr fico trazabilidad;Code10   ;TableRelation="Gr fico trazabilidad".C¢digo;
                                                   CaptionML=[ENU=Cod. graphic traceability;
                                                              ESP=C¢d. gr fico trazabilidad];
                                                   Description=VNTES }
    { 7014850;;Asume costes        ;Boolean       ;CaptionML=[ENU=Assume costs;
                                                              ESP=Asume costes;
                                                              PTG=Assume Custos];
                                                   Description=VNTES }
    { 7014861;;Grupo descuento promocional;Code10 ;TableRelation="Grupo dto. promoci¢n producto";
                                                   CaptionML=[ENU=Group discount coupon;
                                                              ESP=Grupo descuento promocional;
                                                              PTG=Grupo Desconto Promo‡Æo];
                                                   Description=VNTES }
    { 7014862;;Merma               ;Boolean       ;CaptionML=[ENU=Decrease;
                                                              ESP=Merma];
                                                   Description=VNTES }
    { 7014863;;C¢d. Modelo 521     ;Code10        ;TableRelation="Claves producto Modelo 521";
                                                   CaptionML=[ENU=Cod. Model 521;
                                                              ESP=C¢d. Modelo 521];
                                                   Description=VNTES }
    { 7014864;;EAN 13              ;Code13        ;OnValidate=VAR
                                                                Weight@1170170000 : Text[30];
                                                                Checksum@1170170001 : Integer;
                                                              BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27ValidateEAN13(Rec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=EAN 13;
                                                              ESP=EAN 13];
                                                   Description=VNTES }
    { 7014865;;DUN 14              ;Code14        ;OnValidate=VAR
                                                                Weight@1170170001 : Text[30];
                                                                Checksum@1170170000 : Integer;
                                                              BEGIN
                                                                // VNTES.i
                                                                GestTablasExist.T27ValidateDUN14(Rec);
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=DUN 14;
                                                              ESP=DUN 14];
                                                   Description=VNTES }
    { 7014866;;Preferente si EAN repetido;Boolean ;CaptionML=[ENU=EAN preferred if repeated;
                                                              ESP=Preferente si EAN repetido];
                                                   Description=VNTES }
    { 7014867;;C¢d. formato ecoembes;Code10       ;TableRelation="Formato Ecoembes";
                                                   CaptionML=[ENU=Cod. ECOEMBES format;
                                                              ESP=C¢d. formato ecoembes];
                                                   Description=VNTES }
    { 7014868;;C¢d. ecovidrio      ;Code10        ;TableRelation="C¢digo ecovidrio";
                                                   CaptionML=[ENU=Cod. Ecovidrio;
                                                              ESP=C¢d. ecovidrio];
                                                   Description=VNTES }
    { 7014900;;C¢d. grupo EMCS producto;Code10    ;TableRelation="EMCS - Grupo EMCS producto";
                                                   CaptionML=[ENU=Cod. EMCS product group;
                                                              ESP=C¢d. grupo EMCS producto];
                                                   Description=VNTES }
    { 7014901;;Grado alcoh¢lico    ;Decimal       ;CaptionML=[ENU=Alcohol content;
                                                              ESP=Grado alcoh¢lico];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   BlankZero=Yes;
                                                   Description=VNTES,CEX }
    { 7014902;;Grado plato         ;Decimal       ;CaptionML=[ENU=Degree course;
                                                              ESP=Grado plato];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   BlankZero=Yes;
                                                   Description=VNTES }
    { 7014903;;Densidad            ;Decimal       ;CaptionML=[ENU=Density;
                                                              ESP=Densidad];
                                                   BlankZero=Yes;
                                                   Description=VNTES }
    { 7014904;;C¢d. categor¡a vitivinicola;Code10 ;TableRelation="EMCS - Cat. prod. vitivinicola";
                                                   OnValidate=VAR
                                                                Categoria@1170170000 : Record 7014737;
                                                              BEGIN
                                                                // VNTES.i
                                                                IF "C¢d. categor¡a vitivinicola" <> xRec."C¢d. categor¡a vitivinicola" THEN
                                                                  "Vino granel DOP/IGP" := 0;
                                                                // VNTES.f
                                                              END;

                                                   CaptionML=[ENU=Cod. vitivinicola category;
                                                              ESP=C¢d. categor¡a vitivinicola];
                                                   Description=VNTES }
    { 7014905;;C¢d. zona vitivin¡cola;Code10      ;TableRelation="EMCS - Zona vitivin¡cola";
                                                   CaptionML=[ENU=Cod. wine region;
                                                              ESP=C¢d. zona vitivin¡cola];
                                                   Description=VNTES }
    { 7014906;;Vino granel DOP/IGP ;Option        ;CaptionML=[ENU=Bulk wine PDO / PGI;
                                                              ESP=Vino granel DOP/IGP];
                                                   OptionCaptionML=[ENU=PDO,PGI,Varietal;
                                                                    ESP=" ,DOP,IGP,Varietal"];
                                                   OptionString=[ ,DOP,IGP,Varietal];
                                                   Description=VNTES }
    { 7014907;;C¢d. grupo certificado;Code10      ;TableRelation="EMCS - Grupo cert. producto";
                                                   CaptionML=[ENU=Cod. certified group;
                                                              ESP=C¢d. grupo certificado];
                                                   Description=VNTES }
    { 7014908;;C¢d. tipo cont. existencias;Code10 ;TableRelation="Tipo producto cont. exist.";
                                                   CaptionML=[ENU=Cod. cont type. stocks;
                                                              ESP=C¢d. tipo cont. existencias];
                                                   Description=VNTES,CEX }
    { 7014909;;C¢d. tipo precinta colocada;Code10 ;TableRelation="Tipo producto cont. exist." WHERE (Tipo producto oficial=CONST(Precinta));
                                                   CaptionML=[ENU=Cod. type seals placed;
                                                              ESP=C¢d. tipo precinta colocada];
                                                   Description=VNTES,CEX }
    { 7014910;;No. de precintas    ;Integer       ;CaptionML=[ENU=No. of stamps;
                                                              ESP=No. de precintas];
                                                   Description=VNTES,CEX }
    { 99000750;;Routing No.        ;Code20        ;TableRelation="Routing Header";
                                                   OnValidate=BEGIN
                                                                IF "Routing No." <> '' THEN
                                                                  TESTFIELD(Type,Type::Inventory);

                                                                PlanningAssignment.RoutingReplace(Rec,xRec."Routing No.");

                                                                IF "Routing No." <> xRec."Routing No." THEN
                                                                  ItemCostMgt.UpdateUnitCost(Rec,'','',0,0,FALSE,FALSE,TRUE,FIELDNO("Routing No."));
                                                              END;

                                                   CaptionML=[ENU=Routing No.;
                                                              ESP=N§ ruta] }
    { 99000751;;Production BOM No. ;Code20        ;TableRelation="Production BOM Header";
                                                   OnValidate=VAR
                                                                MfgSetup@1000 : Record 99000765;
                                                                ProdBOMHeader@1001 : Record 99000771;
                                                                ItemUnitOfMeasure@1003 : Record 5404;
                                                              BEGIN
                                                                IF "Production BOM No." <> '' THEN
                                                                  TESTFIELD(Type,Type::Inventory);

                                                                PlanningAssignment.BomReplace(Rec,xRec."Production BOM No.");

                                                                IF "Production BOM No." <> xRec."Production BOM No." THEN
                                                                  ItemCostMgt.UpdateUnitCost(Rec,'','',0,0,FALSE,FALSE,TRUE,FIELDNO("Production BOM No."));

                                                                IF ("Production BOM No." <> '') AND ("Production BOM No." <> xRec."Production BOM No.") THEN BEGIN
                                                                  ProdBOMHeader.GET("Production BOM No.");
                                                                  ItemUnitOfMeasure.GET("No.",ProdBOMHeader."Unit of Measure Code");
                                                                  IF ProdBOMHeader.Status = ProdBOMHeader.Status::Certified THEN BEGIN
                                                                    MfgSetup.GET;
                                                                    IF MfgSetup."Dynamic Low-Level Code" THEN
                                                                      CODEUNIT.RUN(CODEUNIT::"Calculate Low-Level Code",Rec);
                                                                  END;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Production BOM No.;
                                                              ESP=N§ L.M. producci¢n] }
    { 99000752;;Single-Level Material Cost;Decimal;CaptionML=[ENU=Single-Level Material Cost;
                                                              ESP=Coste material a un nivel];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 99000753;;Single-Level Capacity Cost;Decimal;CaptionML=[ENU=Single-Level Capacity Cost;
                                                              ESP=Coste capacidad a un nivel];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 99000754;;Single-Level Subcontrd. Cost;Decimal;
                                                   CaptionML=[ENU=Single-Level Subcontrd. Cost;
                                                              ESP=Coste subcontrat. a un nivel];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 99000755;;Single-Level Cap. Ovhd Cost;Decimal;
                                                   CaptionML=[ENU=Single-Level Cap. Ovhd Cost;
                                                              ESP=Costes gen. cap. a un nivel];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 99000756;;Single-Level Mfg. Ovhd Cost;Decimal;
                                                   CaptionML=[ENU=Single-Level Mfg. Ovhd Cost;
                                                              ESP=Coste gen. fab. a un nivel];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 99000757;;Overhead Rate      ;Decimal       ;OnValidate=BEGIN
                                                                IF "Overhead Rate" <> 0 THEN
                                                                  TESTFIELD(Type,Type::Inventory);
                                                              END;

                                                   AccessByPermission=TableData 5405=R;
                                                   CaptionML=[ENU=Overhead Rate;
                                                              ESP=Tasa costes generales];
                                                   AutoFormatType=2 }
    { 99000758;;Rolled-up Subcontracted Cost;Decimal;
                                                   AccessByPermission=TableData 5405=R;
                                                   CaptionML=[ENU=Rolled-up Subcontracted Cost;
                                                              ESP=Coste subcontratado distrib.];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 99000759;;Rolled-up Mfg. Ovhd Cost;Decimal  ;CaptionML=[ENU=Rolled-up Mfg. Ovhd Cost;
                                                              ESP=Costes gen. fabr. distrib.];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 99000760;;Rolled-up Cap. Overhead Cost;Decimal;
                                                   CaptionML=[ENU=Rolled-up Cap. Overhead Cost;
                                                              ESP=Costes gen. de cap. distrib.];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 99000761;;Planning Issues (Qty.);Decimal    ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Planning Component"."Expected Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                          Due Date=FIELD(Date Filter),
                                                                                                                          Location Code=FIELD(Location Filter),
                                                                                                                          Variant Code=FIELD(Variant Filter),
                                                                                                                          Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                          Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                          Planning Line Origin=CONST(" ")));
                                                   CaptionML=[ENU=Planning Issues (Qty.);
                                                              ESP=Planif. resul. (Cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000762;;Planning Receipt (Qty.);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Type=CONST(Item),
                                                                                                               No.=FIELD(No.),
                                                                                                               Due Date=FIELD(Date Filter),
                                                                                                               Location Code=FIELD(Location Filter),
                                                                                                               Variant Code=FIELD(Variant Filter),
                                                                                                               Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter)));
                                                   CaptionML=[ENU=Planning Receipt (Qty.);
                                                              ESP=Planif. recep. (Cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000765;;Planned Order Receipt (Qty.);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Planned),
                                                                                                                     Item No.=FIELD(No.),
                                                                                                                     Variant Code=FIELD(Variant Filter),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Filter),
                                                                                                                     Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Planned Order Receipt (Qty.);
                                                              ESP=Recep. (cant) O.P. planif.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000766;;FP Order Receipt (Qty.);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Firm Planned),
                                                                                                                     Item No.=FIELD(No.),
                                                                                                                     Variant Code=FIELD(Variant Filter),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Filter),
                                                                                                                     Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=FP Order Receipt (Qty.);
                                                              ESP=Recep. (cant.) O.P. p.f.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000767;;Rel. Order Receipt (Qty.);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Released),
                                                                                                                     Item No.=FIELD(No.),
                                                                                                                     Variant Code=FIELD(Variant Filter),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Filter),
                                                                                                                     Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Rel. Order Receipt (Qty.);
                                                              ESP=Recep. (cant.) O.P. lanz.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000768;;Planning Release (Qty.);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Type=CONST(Item),
                                                                                                               No.=FIELD(No.),
                                                                                                               Starting Date=FIELD(Date Filter),
                                                                                                               Location Code=FIELD(Location Filter),
                                                                                                               Variant Code=FIELD(Variant Filter),
                                                                                                               Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter)));
                                                   CaptionML=[ENU=Planning Release (Qty.);
                                                              ESP=Planif. lanzam. (Cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000769;;Planned Order Release (Qty.);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Planned),
                                                                                                                     Item No.=FIELD(No.),
                                                                                                                     Variant Code=FIELD(Variant Filter),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Filter),
                                                                                                                     Starting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Planned Order Release (Qty.);
                                                              ESP=Lanz. (cant.) O.P. planif.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000770;;Purch. Req. Receipt (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Type=CONST(Item),
                                                                                                               No.=FIELD(No.),
                                                                                                               Variant Code=FIELD(Variant Filter),
                                                                                                               Location Code=FIELD(Location Filter),
                                                                                                               Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                               Due Date=FIELD(Date Filter),
                                                                                                               Planning Line Origin=CONST(" ")));
                                                   CaptionML=[ENU=Purch. Req. Receipt (Qty.);
                                                              ESP=Hoja demanda recib. (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000771;;Purch. Req. Release (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Type=CONST(Item),
                                                                                                               No.=FIELD(No.),
                                                                                                               Location Code=FIELD(Location Filter),
                                                                                                               Variant Code=FIELD(Variant Filter),
                                                                                                               Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                               Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                               Order Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Purch. Req. Release (Qty.);
                                                              ESP=Hoja demanda lanzada (cant.)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000773;;Order Tracking Policy;Option      ;OnValidate=VAR
                                                                ReservEntry@1000 : Record 337;
                                                                ActionMessageEntry@1001 : Record 99000849;
                                                                TempReservationEntry@1002 : TEMPORARY Record 337;
                                                              BEGIN
                                                                IF "Order Tracking Policy" <> "Order Tracking Policy"::None THEN
                                                                  TESTFIELD(Type,Type::Inventory);
                                                                IF xRec."Order Tracking Policy" = "Order Tracking Policy" THEN
                                                                  EXIT;
                                                                IF "Order Tracking Policy" > xRec."Order Tracking Policy" THEN BEGIN
                                                                  MESSAGE(Text99000000 +
                                                                    Text99000001,
                                                                    SELECTSTR("Order Tracking Policy",Text99000002));
                                                                END ELSE BEGIN
                                                                  ActionMessageEntry.SETCURRENTKEY("Reservation Entry");
                                                                  ReservEntry.SETCURRENTKEY("Item No.","Variant Code","Location Code","Reservation Status");
                                                                  ReservEntry.SETRANGE("Item No.","No.");
                                                                  ReservEntry.SETRANGE("Reservation Status",ReservEntry."Reservation Status"::Tracking,ReservEntry."Reservation Status"::Surplus);
                                                                  IF ReservEntry.FIND('-') THEN
                                                                    REPEAT
                                                                      ActionMessageEntry.SETRANGE("Reservation Entry",ReservEntry."Entry No.");
                                                                      ActionMessageEntry.DELETEALL;
                                                                      IF "Order Tracking Policy" = "Order Tracking Policy"::None THEN
                                                                        IF ReservEntry.TrackingExists THEN BEGIN
                                                                          TempReservationEntry := ReservEntry;
                                                                          TempReservationEntry."Reservation Status" := TempReservationEntry."Reservation Status"::Surplus;
                                                                          TempReservationEntry.INSERT;
                                                                        END ELSE
                                                                          ReservEntry.DELETE;
                                                                    UNTIL ReservEntry.NEXT = 0;

                                                                  IF TempReservationEntry.FIND('-') THEN
                                                                    REPEAT
                                                                      ReservEntry := TempReservationEntry;
                                                                      ReservEntry.MODIFY;
                                                                    UNTIL TempReservationEntry.NEXT = 0;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Order Tracking Policy;
                                                              ESP=Directiva seguim. ped.];
                                                   OptionCaptionML=[ENU=None,Tracking Only,Tracking & Action Msg.;
                                                                    ESP=Ninguna,Seguimiento,Seguim. y mens. acci¢n];
                                                   OptionString=None,Tracking Only,Tracking & Action Msg. }
    { 99000774;;Prod. Forecast Quantity (Base);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Production Forecast Entry"."Forecast Quantity (Base)" WHERE (Item No.=FIELD(No.),
                                                                                                                                 Production Forecast Name=FIELD(Production Forecast Name),
                                                                                                                                 Forecast Date=FIELD(Date Filter),
                                                                                                                                 Location Code=FIELD(Location Filter),
                                                                                                                                 Component Forecast=FIELD(Component Forecast)));
                                                   CaptionML=[ENU=Prod. Forecast Quantity (Base);
                                                              ESP=Cant. prev. producci¢n (base)];
                                                   DecimalPlaces=0:5 }
    { 99000775;;Production Forecast Name;Code10   ;FieldClass=FlowFilter;
                                                   TableRelation="Production Forecast Name";
                                                   CaptionML=[ENU=Production Forecast Name;
                                                              ESP=Nombre previsi¢n producci¢n] }
    { 99000776;;Component Forecast ;Boolean       ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Component Forecast;
                                                              ESP=Prev. componentes] }
    { 99000777;;Qty. on Prod. Order;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                     Item No.=FIELD(No.),
                                                                                                                     Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                     Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                     Location Code=FIELD(Location Filter),
                                                                                                                     Variant Code=FIELD(Variant Filter),
                                                                                                                     Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Prod. Order;
                                                              ESP=Cant. en orden producc.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000778;;Qty. on Component Lines;Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Component"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                          Item No.=FIELD(No.),
                                                                                                                          Shortcut Dimension 1 Code=FIELD(Global Dimension 1 Filter),
                                                                                                                          Shortcut Dimension 2 Code=FIELD(Global Dimension 2 Filter),
                                                                                                                          Location Code=FIELD(Location Filter),
                                                                                                                          Variant Code=FIELD(Variant Filter),
                                                                                                                          Due Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Qty. on Component Lines;
                                                              ESP=Cant. l¡nea componentes];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 99000875;;Critical           ;Boolean       ;CaptionML=[ENU=Critical;
                                                              ESP=Cr¡tico] }
    { 99008500;;Common Item No.    ;Code20        ;CaptionML=[ENU=Common Item No.;
                                                              ESP=N§ producto com£n] }
  }
  KEYS
  {
    {    ;No.                                     ;Clustered=Yes }
    {    ;Search Description                       }
    {    ;Inventory Posting Group                  }
    {    ;Shelf No.                                }
    {    ;Vendor No.                               }
    {    ;Gen. Prod. Posting Group                 }
    {    ;Low-Level Code                           }
    {    ;Production BOM No.                       }
    {    ;Routing No.                              }
    {    ;Vendor Item No.,Vendor No.               }
    {    ;Common Item No.                          }
    {    ;Service Item Group                       }
    {    ;Cost is Adjusted,Allow Online Adjustment }
    {    ;Description                              }
    {    ;Base Unit of Measure                     }
    {    ;Type                                     }
    {    ;Envase vendimia                          }
    {    ;Grupo descuento promocional              }
    {    ;C¢d. color vino,C¢d. a¤ada,C¢d. calificaci¢n,C¢d. marca }
    {    ;EAN 13,DUN 14,Preferente si EAN repetido }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;No.,Description,Base Unit of Measure,Unit Price }
    { 2   ;Brick               ;No.,Description,Inventory,Unit Price,Base Unit of Measure,Description 2,Picture }
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=You cannot delete %1 %2 because there is at least one outstanding Purchase %3 that includes this item.;ESP=No puede borrar %1 %2 porque hay al menos una compra pendiente %3 que incluye este producto.';
      CannotDeleteItemIfSalesDocExistErr@1001 : TextConst '@@@=1: Type, 2 Item No. and 3 : Type of document Order,Invoice;ENU=You cannot delete %1 %2 because there is at least one outstanding Sales %3 that includes this item.;ESP=No puede borrar %1 %2 porque hay al menos una venta pendiente %3 que incluye este producto.';
      CannotDeleteItemIfSalesDocExistInvoicingErr@1041 : TextConst '@@@=1: Type, 2: Item No., 3: Description of document, 4: Document number;ENU=You cannot delete %1 %2 because at least one sales document (%3 %4) includes the item.;ESP=No puede eliminar %1 %2 porque hay al menos un documento de ventas (%3 %4) que incluye este producto.';
      Text002@1002 : TextConst 'ENU=You cannot delete %1 %2 because there are one or more outstanding production orders that include this item.;ESP=No se puede eliminar el %1 %2 porque hay ordenes de producci¢n pendientes para este producto.';
      Text003@1057 : TextConst 'ENU=Do you want to change %1?;ESP=¨Confirma que desea cambiar %1?';
      Text004@1064 : TextConst 'ENU=You cannot delete %1 %2 because there are one or more certified Production BOM that include this item.;ESP=No puede eliminar %1 %2 porque una o m s LM producci¢n incluyen este producto.';
      CannotDeleteItemIfProdBOMVersionExistsErr@1084 : TextConst '@@@=%1 - Tablecaption, %2 - No.;ENU=You cannot delete %1 %2 because there are one or more certified production BOM version that include this item.;ESP=No puede eliminar %1 %2 porque una o m s versiones de la L.M. de producci¢n certificada incluyen este producto.';
      Text006@1003 : TextConst 'ENU=Prices including VAT cannot be calculated when %1 is %2.;ESP=No se pueden calcular precios IVA incluido cuando %1 es %2.';
      Text007@1004 : TextConst 'ENU=You cannot change %1 because there are one or more ledger entries for this item.;ESP=No se puede cambiar el producto %1 porque tiene movimientos pendientes.';
      Text008@1005 : TextConst 'ENU=You cannot change %1 because there is at least one outstanding Purchase %2 that include this item.;ESP=No puede cambiar %1 porque existe al menos un %2 compra pendiente que incluye este producto.';
      Text014@1006 : TextConst 'ENU=You cannot delete %1 %2 because there are one or more production order component lines that include this item with a remaining quantity that is not 0.;ESP=No puede eliminar %1 %2 porque una o m s l¡ns. comp. pedido producci¢n que incluyen este producto tienen una cantidad pendiente que no es 0.';
      Text016@1008 : TextConst 'ENU=You cannot delete %1 %2 because there are one or more outstanding transfer orders that include this item.;ESP=No puede borrar %1 %2 porque hay uno o m s pedidos de transfer. pendientes que incluyen este producto.';
      Text017@1009 : TextConst 'ENU=You cannot delete %1 %2 because there is at least one outstanding Service %3 that includes this item.;ESP=No puede borrar el %1 %2 porque hay al menos un documento de tipo %3 de servicio pendiente que incluyen este producto.';
      Text018@1010 : TextConst 'ENU=%1 must be %2 in %3 %4 when %5 is %6.;ESP=%1 debe ser %2 en %3 %4 cuando %5 es %6.';
      Text019@1011 : TextConst 'ENU=You cannot change %1 because there are one or more open ledger entries for this item.;ESP=No puede cambiar %1 porque hay uno o m s movs. pendientes para este producto.';
      Text020@1012 : TextConst 'ENU="There may be orders and open ledger entries for the item. ";ESP="El producto tiene pedidos o movimientos pendientes. "';
      Text021@1013 : TextConst 'ENU=If you change %1 it may affect new orders and entries.\\;ESP=Si cambia el %1 puede afectar a los pedidos y movimientos nuevos.\\';
      Text022@1014 : TextConst 'ENU=Do you want to change %1?;ESP=¨Confirma que desea cambiar %1?';
      GLSetup@1053 : Record 98;
      InvtSetup@1015 : Record 313;
      Text023@1066 : TextConst 'ENU=You cannot delete %1 %2 because there is at least one %3 that includes this item.;ESP=No puede eliminar %1 %2 porque hay al menos un(a) %3 que incluye este producto.';
      Text024@1072 : TextConst 'ENU=If you change %1 it may affect existing production orders.\;ESP=Un cambio en %1 podr¡a afectar a las ¢rdenes de producci¢n existentes.\';
      Text025@1055 : TextConst 'ENU=%1 must be an integer because %2 %3 is set up to use %4.;ESP=%1 debe ser un n£mero entero porque %2 %3 est  configurado para usar %4.';
      Text026@1077 : TextConst 'ENU=%1 cannot be changed because the %2 has work in process (WIP). Changing the value may offset the WIP account.;ESP=%1 no se puede modificar porque %2 tiene un trabajo en curso (WIP). El cambio de los valores podr¡a provocar un desfase en la cuenta WIP.';
      Text7380@1058 : TextConst '@@@=If you change the Phys Invt Counting Period Code, the Next Counting Start Date and Next Counting End Date are calculated.\Do you still want to change the Phys Invt Counting Period Code?;ENU=If you change the %1, the %2 and %3 are calculated.\Do you still want to change the %1?;ESP=Si cambia el %1, se calculan el %2 y el %3.\¨Desea cambiar el %1?';
      Text7381@1056 : TextConst 'ENU=Cancelled.;ESP=Cancelado.';
      Text99000000@1017 : TextConst 'ENU=The change will not affect existing entries.\;ESP=El cambio no afectar  movimientos existentes.\';
      CommentLine@1018 : Record 97;
      Text99000001@1019 : TextConst 'ENU=If you want to generate %1 for existing entries, you must run a regenerative planning.;ESP=Si quiere generar %1 para mov. existentes, debe ejecutar planificaci¢n regenerativa.';
      ItemVend@1020 : Record 99;
      Text99000002@1021 : TextConst 'ENU=tracking,tracking and action messages;ESP=seguimiento,seguim. y mensajes acci¢n';
      SalesPrice@1022 : Record 7002;
      SalesLineDisc@1059 : Record 7004;
      SalesPrepmtPct@1051 : Record 459;
      PurchPrice@1060 : Record 7012;
      PurchLineDisc@1061 : Record 7014;
      PurchPrepmtPct@1076 : Record 460;
      ItemTranslation@1023 : Record 30;
      BOMComp@1024 : Record 90;
      VATPostingSetup@1027 : Record 325;
      ExtTextHeader@1028 : Record 279;
      GenProdPostingGrp@1029 : Record 251;
      ItemUnitOfMeasure@1030 : Record 5404;
      ItemVariant@1031 : Record 5401;
      ItemJnlLine@1007 : Record 83;
      ProdOrderLine@1032 : Record 5406;
      ProdOrderComp@1033 : Record 5407;
      PlanningAssignment@1035 : Record 99000850;
      SKU@1036 : Record 5700;
      ItemTrackingCode@1037 : Record 6502;
      ItemTrackingCode2@1038 : Record 6502;
      ServInvLine@1039 : Record 5902;
      ItemSub@1040 : Record 5715;
      TransLine@1042 : Record 5741;
      Vend@1016 : Record 23;
      NonstockItem@1034 : Record 5718;
      ProdBOMHeader@1062 : Record 99000771;
      ProdBOMLine@1063 : Record 99000772;
      ItemIdent@1065 : Record 7704;
      RequisitionLine@1067 : Record 246;
      ItemBudgetEntry@1075 : Record 7134;
      ItemAnalysisViewEntry@1074 : Record 7154;
      ItemAnalysisBudgViewEntry@1073 : Record 7156;
      TroubleshSetup@1050 : Record 5945;
      ServiceItem@1068 : Record 5940;
      ServiceContractLine@1069 : Record 5964;
      ServiceItemComponent@1070 : Record 5941;
      NoSeriesMgt@1043 : Codeunit 396;
      MoveEntries@1044 : Codeunit 361;
      DimMgt@1045 : Codeunit 408;
      CatalogItemMgt@1046 : Codeunit 5703;
      ItemCostMgt@1047 : Codeunit 5804;
      ResSkillMgt@1071 : Codeunit 5931;
      CalendarMgt@1054 : Codeunit 7600;
      LeadTimeMgt@1025 : Codeunit 5404;
      ApprovalsMgmt@1085 : Codeunit 1535;
      HasInvtSetup@1049 : Boolean;
      GLSetupRead@1052 : Boolean;
      Text027@1078 : TextConst '@@@=starts with "Rounding Precision";ENU=must be greater than 0.;ESP=debe ser mayor que 0.';
      Text028@1080 : TextConst 'ENU=You cannot perform this action because entries for item %1 are unapplied in %2 by user %3.;ESP=No puede realizar esta acci¢n porque los movs. para el producto %1 no se han desliquidado en %2 por parte del usuario %3.';
      CannotChangeFieldErr@1079 : TextConst '@@@="%1 = Field Caption, %2 = Item Table Name, %3 = Item No., %4 = Table Name";ENU=You cannot change the %1 field on %2 %3 because there exists at least one %4 then includes this item.;ESP=No puede cambiar el campo %1 en %2 %3 porque existe como m¡nimo una %4 de este producto.';
      BaseUnitOfMeasureQtyMustBeOneErr@1081 : TextConst '@@@="%1 Name of Unit of measure (e.g. BOX, PCS, KG...), %2 Qty. of %1 per base unit of measure ";ENU=The quantity per base unit of measure must be 1. %1 is set up with %2 per unit of measure.\\You can change this setup in the Item Units of Measure window.;ESP=La cantidad por unidad de medida base debe ser 1. %1 est  configurado con %2 por unidad de medida.\\Puede cambiar esta configuraci¢n en la ventana Unidades de medida.';
      ArancDAA@1170170006 : Record 260;
      PrecComp@1170170005 : Record 7014709;
      PenalPrec@1170170004 : Record 7014494;
      Variedad@1170170003 : Record 7014511;
      GestTablasExist@1170170002 : Codeunit 7014610;
      GestionEMCS@1170170001 : Codeunit 7014538;
      ConfEMCS@1170170000 : Record 7014749;
      TratamientoProd@1170170007 : Record 7061526;
      EMCSAduana@1170170008 : Record 7014728;
      OpenDocumentTrackingErr@1082 : TextConst 'ENU="You cannot change ""Item Tracking Code"" because there is at least one open document that includes this item with specified tracking: Source Type = %1, Document No. = %2.";ESP="No puede cambiar la opci¢n ""C¢d. seguim. prod."" porque hay al menos un documento que incluye este art¡culo con el seguimiento especificado. Tipo de origen = %1, N.§ de documento = %2."';
      SelectItemErr@1083 : TextConst 'ENU=You cannot delete %1 %2 because there are one or more certified production BOM version that include this item.;ESP=Debe seleccionar un producto existente.';
      CreateNewItemTxt@1187 : TextConst '@@@="%1 is the name to be used to create the customer. ";ENU=Create a new item card for %1.;ESP=Cree una nueva ficha de producto para %1.';
      ItemNotRegisteredTxt@1186 : TextConst 'ENU=This item is not registered. To continue, choose one of the following options:;ESP=Este producto no est  registrado. Para continuar, elija una de las opciones siguientes:';
      SelectItemTxt@1185 : TextConst 'ENU=Select an existing item.;ESP=Seleccione un producto existente.';
      ItemCategory@1170170009 : Record 5722;
      GestionPersonalizacionProd@1170170010 : Codeunit 7014454;
      UnitOfMeasureNotExistErr@1026 : TextConst '@@@="%1 = Code of Unit of measure";ENU=The Unit of Measure with Code %1 does not exist.;ESP=No existe la unidad de medida con el c¢digo %1.';
      ItemLedgEntryTableCaptionTxt@1048 : TextConst 'ENU=Item Ledger Entry;ESP=Mov. producto';
      FuncionesBAINES@1170000000 : Codeunit 50000;

    LOCAL PROCEDURE DeleteRelatedData@12();
    VAR
      BinContent@1002 : Record 7302;
      ItemCrossReference@1001 : Record 5717;
      SocialListeningSearchTopic@1000 : Record 871;
      MyItem@1003 : Record 9152;
      ItemAttributeValueMapping@1004 : Record 7505;
    BEGIN
      ItemBudgetEntry.SETCURRENTKEY("Analysis Area","Budget Name","Item No.");
      ItemBudgetEntry.SETRANGE("Item No.","No.");
      ItemBudgetEntry.DELETEALL(TRUE);

      ItemSub.RESET;
      ItemSub.SETRANGE(Type,ItemSub.Type::Item);
      ItemSub.SETRANGE("No.","No.");
      ItemSub.DELETEALL;

      ItemSub.RESET;
      ItemSub.SETRANGE("Substitute Type",ItemSub."Substitute Type"::Item);
      ItemSub.SETRANGE("Substitute No.","No.");
      ItemSub.DELETEALL;

      SKU.RESET;
      SKU.SETCURRENTKEY("Item No.");
      SKU.SETRANGE("Item No.","No.");
      SKU.DELETEALL;

      CatalogItemMgt.NonstockItemDel(Rec);
      CommentLine.SETRANGE("Table Name",CommentLine."Table Name"::Item);
      CommentLine.SETRANGE("No.","No.");
      CommentLine.DELETEALL;

      ItemVend.SETCURRENTKEY("Item No.");
      ItemVend.SETRANGE("Item No.","No.");
      ItemVend.DELETEALL;

      SalesPrice.SETRANGE("Item No.","No.");
      SalesPrice.DELETEALL;

      SalesLineDisc.SETRANGE(Type,SalesLineDisc.Type::Item);
      SalesLineDisc.SETRANGE(Code,"No.");
      SalesLineDisc.DELETEALL;

      SalesPrepmtPct.SETRANGE("Item No.","No.");
      SalesPrepmtPct.DELETEALL;

      PurchPrice.SETRANGE("Item No.","No.");
      PurchPrice.DELETEALL;

      PurchLineDisc.SETRANGE("Item No.","No.");
      PurchLineDisc.DELETEALL;

      PurchPrepmtPct.SETRANGE("Item No.","No.");
      PurchPrepmtPct.DELETEALL;

      ItemTranslation.SETRANGE("Item No.","No.");
      ItemTranslation.DELETEALL;

      ItemUnitOfMeasure.SETRANGE("Item No.","No.");
      ItemUnitOfMeasure.DELETEALL;

      ItemVariant.SETRANGE("Item No.","No.");
      ItemVariant.DELETEALL;

      ExtTextHeader.SETRANGE("Table Name",ExtTextHeader."Table Name"::Item);
      ExtTextHeader.SETRANGE("No.","No.");
      ExtTextHeader.DELETEALL(TRUE);

      ItemAnalysisViewEntry.SETRANGE("Item No.","No.");
      ItemAnalysisViewEntry.DELETEALL;

      ItemAnalysisBudgViewEntry.SETRANGE("Item No.","No.");
      ItemAnalysisBudgViewEntry.DELETEALL;

      PlanningAssignment.SETRANGE("Item No.","No.");
      PlanningAssignment.DELETEALL;

      BOMComp.RESET;
      BOMComp.SETRANGE("Parent Item No.","No.");
      BOMComp.DELETEALL;

      TroubleshSetup.RESET;
      TroubleshSetup.SETRANGE(Type,TroubleshSetup.Type::Item);
      TroubleshSetup.SETRANGE("No.","No.");
      TroubleshSetup.DELETEALL;

      ResSkillMgt.DeleteItemResSkills("No.");
      DimMgt.DeleteDefaultDim(DATABASE::Item,"No.");

      ItemIdent.RESET;
      ItemIdent.SETCURRENTKEY("Item No.");
      ItemIdent.SETRANGE("Item No.","No.");
      ItemIdent.DELETEALL;

      ServiceItemComponent.RESET;
      ServiceItemComponent.SETRANGE(Type,ServiceItemComponent.Type::Item);
      ServiceItemComponent.SETRANGE("No.","No.");
      ServiceItemComponent.MODIFYALL("No.",'');

      BinContent.SETCURRENTKEY("Item No.");
      BinContent.SETRANGE("Item No.","No.");
      BinContent.DELETEALL;

      ItemCrossReference.SETRANGE("Item No.","No.");
      ItemCrossReference.DELETEALL;

      MyItem.SETRANGE("Item No.","No.");
      MyItem.DELETEALL;

      IF NOT SocialListeningSearchTopic.ISEMPTY THEN BEGIN
        SocialListeningSearchTopic.FindSearchTopic(SocialListeningSearchTopic."Source Type"::Item,"No.");
        SocialListeningSearchTopic.DELETEALL;
      END;

      ItemAttributeValueMapping.RESET;
      ItemAttributeValueMapping.SETRANGE("Table ID",DATABASE::Item);
      ItemAttributeValueMapping.SETRANGE("No.","No.");
      ItemAttributeValueMapping.DELETEALL;

      OnAfterDeleteRelatedData(Rec);
    END;

    [External]
    PROCEDURE AssistEdit@2() : Boolean;
    BEGIN
      GetInvtSetup;
      InvtSetup.TESTFIELD("Item Nos.");
      IF NoSeriesMgt.SelectSeries(InvtSetup."Item Nos.",xRec."No. Series","No. Series") THEN BEGIN
        NoSeriesMgt.SetSeries("No.");
        EXIT(TRUE);
      END;
    END;

    [External]
    PROCEDURE FindItemVend@5(VAR ItemVend@1000 : Record 99;LocationCode@1002 : Code[10]);
    VAR
      GetPlanningParameters@1004 : Codeunit 99000855;
    BEGIN
      TESTFIELD("No.");
      ItemVend.RESET;
      ItemVend.SETRANGE("Item No.","No.");
      ItemVend.SETRANGE("Vendor No.",ItemVend."Vendor No.");
      ItemVend.SETRANGE("Variant Code",ItemVend."Variant Code");

      IF NOT ItemVend.FIND('+') THEN BEGIN
        ItemVend."Item No." := "No.";
        ItemVend."Vendor Item No." := '';
        GetPlanningParameters.AtSKU(SKU,"No.",ItemVend."Variant Code",LocationCode);
        IF ItemVend."Vendor No." = '' THEN
          ItemVend."Vendor No." := SKU."Vendor No.";
        IF ItemVend."Vendor Item No." = '' THEN
          ItemVend."Vendor Item No." := SKU."Vendor Item No.";
        ItemVend."Lead Time Calculation" := SKU."Lead Time Calculation";
      END;
      IF FORMAT(ItemVend."Lead Time Calculation") = '' THEN BEGIN
        GetPlanningParameters.AtSKU(SKU,"No.",ItemVend."Variant Code",LocationCode);
        ItemVend."Lead Time Calculation" := SKU."Lead Time Calculation";
        IF FORMAT(ItemVend."Lead Time Calculation") = '' THEN
          IF Vend.GET(ItemVend."Vendor No.") THEN
            ItemVend."Lead Time Calculation" := Vend."Lead Time Calculation";
      END;
      ItemVend.RESET;
    END;

    [External]
    PROCEDURE ValidateShortcutDimCode@8(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    BEGIN
      DimMgt.ValidateDimValueCode(FieldNumber,ShortcutDimCode);
      DimMgt.SaveDefaultDim(DATABASE::Item,"No.",FieldNumber,ShortcutDimCode);
      MODIFY;
    END;

    [External]
    PROCEDURE TestNoEntriesExist@1006(CurrentFieldName@1000 : Text[100]);
    VAR
      ItemLedgEntry@1001 : Record 32;
      PurchaseLine@1002 : Record 39;
      IsHandled@1003 : Boolean;
    BEGIN
      IF "No." = '' THEN
        EXIT;

      IsHandled := FALSE;
      OnBeforeTestNoItemLedgEntiesExist(Rec,CurrentFieldName,IsHandled);
      IF NOT IsHandled THEN BEGIN
        ItemLedgEntry.SETCURRENTKEY("Item No.");
        ItemLedgEntry.SETRANGE("Item No.","No.");
        IF NOT ItemLedgEntry.ISEMPTY THEN
          ERROR(Text007,CurrentFieldName);
      END;

      IsHandled := FALSE;
      OnBeforeTestNoPurchLinesExist(Rec,CurrentFieldName,IsHandled);
      IF NOT IsHandled THEN BEGIN
        PurchaseLine.SETCURRENTKEY("Document Type",Type,"No.");
        PurchaseLine.SETFILTER(
          "Document Type",'%1|%2',
          PurchaseLine."Document Type"::Order,
          PurchaseLine."Document Type"::"Return Order");
        PurchaseLine.SETRANGE(Type,PurchaseLine.Type::Item);
        PurchaseLine.SETRANGE("No.","No.");
        IF PurchaseLine.FINDFIRST THEN
          ERROR(Text008,CurrentFieldName,PurchaseLine."Document Type");
      END;
    END;

    [External]
    PROCEDURE TestNoOpenEntriesExist@4(CurrentFieldName@1000 : Text[100]);
    VAR
      ItemLedgEntry@1001 : Record 32;
    BEGIN
      ItemLedgEntry.SETCURRENTKEY("Item No.",Open);
      ItemLedgEntry.SETRANGE("Item No.","No.");
      ItemLedgEntry.SETRANGE(Open,TRUE);
      IF NOT ItemLedgEntry.ISEMPTY THEN
        ERROR(
          Text019,
          CurrentFieldName);
    END;

    LOCAL PROCEDURE TestNoOpenDocumentsWithTrackingExist@42();
    VAR
      TrackingSpecification@1000 : Record 336;
      ReservationEntry@1001 : Record 337;
      RecRef@1004 : RecordRef;
      SourceType@1002 : Integer;
      SourceID@1003 : Code[20];
    BEGIN
      IF ItemTrackingCode2.Code = '' THEN
        EXIT;

      TrackingSpecification.SETRANGE("Item No.","No.");
      IF TrackingSpecification.FINDFIRST THEN BEGIN
        SourceType := TrackingSpecification."Source Type";
        SourceID := TrackingSpecification."Source ID";
      END ELSE BEGIN
        ReservationEntry.SETRANGE("Item No.","No.");
        ReservationEntry.SETFILTER("Item Tracking",'<>%1',ReservationEntry."Item Tracking"::None);
        IF ReservationEntry.FINDFIRST THEN BEGIN
          SourceType := ReservationEntry."Source Type";
          SourceID := ReservationEntry."Source ID";
        END;
      END;

      IF SourceType = 0 THEN
        EXIT;

      RecRef.OPEN(SourceType);
      ERROR(OpenDocumentTrackingErr,RecRef.CAPTION,SourceID);
    END;

    [External]
    PROCEDURE ItemSKUGet@11(VAR Item@1000 : Record 27;LocationCode@1001 : Code[10];VariantCode@1002 : Code[10]);
    VAR
      SKU@1003 : Record 5700;
    BEGIN
      IF Item.GET("No.") THEN BEGIN
        IF SKU.GET(LocationCode,Item."No.",VariantCode) THEN
          Item."Shelf No." := SKU."Shelf No.";
      END;
    END;

    LOCAL PROCEDURE GetInvtSetup@14();
    BEGIN
      IF NOT HasInvtSetup THEN BEGIN
        InvtSetup.GET;
        HasInvtSetup := TRUE;
      END;
    END;

    [External]
    PROCEDURE IsMfgItem@1() : Boolean;
    BEGIN
      EXIT("Replenishment System" = "Replenishment System"::"Prod. Order");
    END;

    [External]
    PROCEDURE IsAssemblyItem@24() : Boolean;
    BEGIN
      EXIT("Replenishment System" = "Replenishment System"::Assembly);
    END;

    [External]
    PROCEDURE HasBOM@18() : Boolean;
    BEGIN
      CALCFIELDS("Assembly BOM");
      EXIT("Assembly BOM" OR ("Production BOM No." <> ''));
    END;

    LOCAL PROCEDURE GetGLSetup@6();
    BEGIN
      IF NOT GLSetupRead THEN
        GLSetup.GET;
      GLSetupRead := TRUE;
    END;

    LOCAL PROCEDURE ProdOrderExist@7() : Boolean;
    BEGIN
      ProdOrderLine.SETCURRENTKEY(Status,"Item No.");
      ProdOrderLine.SETFILTER(Status,'..%1',ProdOrderLine.Status::Released);
      ProdOrderLine.SETRANGE("Item No.","No.");
      IF NOT ProdOrderLine.ISEMPTY THEN
        EXIT(TRUE);

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE CheckSerialNoQty@15(ItemNo@1000 : Code[20];FieldName@1001 : Text[30];Quantity@1002 : Decimal);
    VAR
      ItemRec@1003 : Record 27;
      ItemTrackingCode3@1004 : Record 6502;
    BEGIN
      IF Quantity = ROUND(Quantity,1) THEN
        EXIT;
      IF NOT ItemRec.GET(ItemNo) THEN
        EXIT;
      IF ItemRec."Item Tracking Code" = '' THEN
        EXIT;
      IF NOT ItemTrackingCode3.GET(ItemRec."Item Tracking Code") THEN
        EXIT;
      IF ItemTrackingCode3."SN Specific Tracking" THEN
        ERROR(Text025,
          FieldName,
          TABLECAPTION,
          ItemNo,
          ItemTrackingCode3.FIELDCAPTION("SN Specific Tracking"));
    END;

    LOCAL PROCEDURE CheckForProductionOutput@17(ItemNo@1000 : Code[20]);
    VAR
      ItemLedgEntry@1001 : Record 32;
    BEGIN
      CLEAR(ItemLedgEntry);
      ItemLedgEntry.SETCURRENTKEY("Item No.","Entry Type","Variant Code","Drop Shipment","Location Code","Posting Date");
      ItemLedgEntry.SETRANGE("Item No.",ItemNo);
      ItemLedgEntry.SETRANGE("Entry Type",ItemLedgEntry."Entry Type"::Output);
      IF NOT ItemLedgEntry.ISEMPTY THEN
        ERROR(Text026,FIELDCAPTION("Inventory Value Zero"),TABLECAPTION);
    END;

    [External]
    PROCEDURE CheckBlockedByApplWorksheet@19();
    VAR
      ApplicationWorksheet@1000 : Page 521;
    BEGIN
      IF "Application Wksh. User ID" <> '' THEN
        ERROR(Text028,"No.",ApplicationWorksheet.CAPTION,"Application Wksh. User ID");
    END;

    [External]
    PROCEDURE ShowTimelineFromItem@20(VAR Item@1000 : Record 27);
    VAR
      ItemAvailByTimeline@1001 : Page 5540;
    BEGIN
      ItemAvailByTimeline.SetItem(Item);
      ItemAvailByTimeline.RUN;
    END;

    [External]
    PROCEDURE ShowTimelineFromSKU@21(ItemNo@1000 : Code[20];LocationCode@1001 : Code[10];VariantCode@1002 : Code[10]);
    VAR
      Item@1003 : Record 27;
    BEGIN
      Item.GET(ItemNo);
      Item.SETRANGE("No.",Item."No.");
      Item.SETRANGE("Variant Filter",VariantCode);
      Item.SETRANGE("Location Filter",LocationCode);
      ShowTimelineFromItem(Item);
    END;

    [External]
    PROCEDURE CheckJournalsAndWorksheets@22(CurrFieldNo@1001 : Integer);
    BEGIN
      CheckItemJnlLine(CurrFieldNo);
      CheckStdCostWksh(CurrFieldNo);
      CheckReqLine(CurrFieldNo);
    END;

    LOCAL PROCEDURE CheckItemJnlLine@44(CurrFieldNo@1000 : Integer);
    BEGIN
      ItemJnlLine.SETRANGE("Item No.","No.");
      IF NOT ItemJnlLine.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",ItemJnlLine.TABLECAPTION);
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",ItemJnlLine.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckStdCostWksh@45(CurrFieldNo@1000 : Integer);
    VAR
      StdCostWksh@1001 : Record 5841;
    BEGIN
      StdCostWksh.RESET;
      StdCostWksh.SETRANGE(Type,StdCostWksh.Type::Item);
      StdCostWksh.SETRANGE("No.","No.");
      IF NOT StdCostWksh.ISEMPTY THEN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",StdCostWksh.TABLECAPTION);
    END;

    LOCAL PROCEDURE CheckReqLine@46(CurrFieldNo@1000 : Integer);
    BEGIN
      RequisitionLine.SETCURRENTKEY(Type,"No.");
      RequisitionLine.SETRANGE(Type,RequisitionLine.Type::Item);
      RequisitionLine.SETRANGE("No.","No.");
      IF NOT RequisitionLine.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",RequisitionLine.TABLECAPTION);
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",RequisitionLine.TABLECAPTION);
      END;
    END;

    [External]
    PROCEDURE CheckDocuments@23(CurrFieldNo@1002 : Integer);
    BEGIN
      IF "No." = '' THEN
        EXIT;

      CheckBOM(CurrFieldNo);
      CheckPurchLine(CurrFieldNo);
      CheckSalesLine(CurrFieldNo);
      CheckProdOrderLine(CurrFieldNo);
      CheckProdOrderCompLine(CurrFieldNo);
      CheckPlanningCompLine(CurrFieldNo);
      CheckTransLine(CurrFieldNo);
      CheckServLine(CurrFieldNo);
      CheckProdBOMLine(CurrFieldNo);
      CheckServContractLine(CurrFieldNo);
      CheckAsmHeader(CurrFieldNo);
      CheckAsmLine(CurrFieldNo);
      CheckJobPlanningLine(CurrFieldNo);

      OnAfterCheckDocuments(Rec,xRec,CurrFieldNo);
    END;

    LOCAL PROCEDURE CheckBOM@25(CurrFieldNo@1000 : Integer);
    BEGIN
      BOMComp.RESET;
      BOMComp.SETCURRENTKEY(Type,"No.");
      BOMComp.SETRANGE(Type,BOMComp.Type::Item);
      BOMComp.SETRANGE("No.","No.");
      IF NOT BOMComp.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",BOMComp.TABLECAPTION);
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",BOMComp.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckPurchLine@26(CurrFieldNo@1000 : Integer);
    VAR
      PurchaseLine@1001 : Record 39;
    BEGIN
      PurchaseLine.SETCURRENTKEY(Type,"No.");
      PurchaseLine.SETRANGE(Type,PurchaseLine.Type::Item);
      PurchaseLine.SETRANGE("No.","No.");
      IF PurchaseLine.FINDFIRST THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text000,TABLECAPTION,"No.",PurchaseLine."Document Type");
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",PurchaseLine.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckSalesLine@28(CurrFieldNo@1000 : Integer);
    VAR
      SalesLine@1001 : Record 37;
      IdentityManagement@1002 : Codeunit 9801;
    BEGIN
      SalesLine.SETCURRENTKEY(Type,"No.");
      SalesLine.SETRANGE(Type,SalesLine.Type::Item);
      SalesLine.SETRANGE("No.","No.");
      IF SalesLine.FINDFIRST THEN BEGIN
        IF CurrFieldNo = 0 THEN BEGIN
          IF IdentityManagement.IsInvAppId THEN
            ERROR(CannotDeleteItemIfSalesDocExistInvoicingErr,TABLECAPTION,Description,
              SalesLine.GetDocumentTypeDescription,SalesLine."Document No.");
          ERROR(CannotDeleteItemIfSalesDocExistErr,TABLECAPTION,"No.",SalesLine."Document Type");
        END;
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",SalesLine.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckProdOrderLine@39(CurrFieldNo@1000 : Integer);
    BEGIN
      IF ProdOrderExist THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text002,TABLECAPTION,"No.");
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",ProdOrderLine.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckProdOrderCompLine@31(CurrFieldNo@1000 : Integer);
    BEGIN
      ProdOrderComp.SETCURRENTKEY(Status,"Item No.");
      ProdOrderComp.SETFILTER(Status,'..%1',ProdOrderComp.Status::Released);
      ProdOrderComp.SETRANGE("Item No.","No.");
      IF NOT ProdOrderComp.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text014,TABLECAPTION,"No.");
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",ProdOrderComp.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckPlanningCompLine@38(CurrFieldNo@1000 : Integer);
    VAR
      PlanningComponent@1005 : Record 99000829;
    BEGIN
      PlanningComponent.SETCURRENTKEY("Item No.","Variant Code","Location Code","Due Date","Planning Line Origin");
      PlanningComponent.SETRANGE("Item No.","No.");
      IF NOT PlanningComponent.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",PlanningComponent.TABLECAPTION);
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",PlanningComponent.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckTransLine@37(CurrFieldNo@1000 : Integer);
    BEGIN
      TransLine.SETCURRENTKEY("Item No.");
      TransLine.SETRANGE("Item No.","No.");
      IF NOT TransLine.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text016,TABLECAPTION,"No.");
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",TransLine.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckServLine@36(CurrFieldNo@1000 : Integer);
    BEGIN
      ServInvLine.RESET;
      ServInvLine.SETCURRENTKEY(Type,"No.");
      ServInvLine.SETRANGE(Type,ServInvLine.Type::Item);
      ServInvLine.SETRANGE("No.","No.");
      IF NOT ServInvLine.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text017,TABLECAPTION,"No.",ServInvLine."Document Type");
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",ServInvLine.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckProdBOMLine@30(CurrFieldNo@1000 : Integer);
    VAR
      ProductionBOMVersion@1001 : Record 99000779;
    BEGIN
      ProdBOMLine.RESET;
      ProdBOMLine.SETCURRENTKEY(Type,"No.");
      ProdBOMLine.SETRANGE(Type,ProdBOMLine.Type::Item);
      ProdBOMLine.SETRANGE("No.","No.");
      IF ProdBOMLine.FIND('-') THEN BEGIN
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",ProdBOMLine.TABLECAPTION);
        IF CurrFieldNo = 0 THEN
          REPEAT
            IF ProdBOMHeader.GET(ProdBOMLine."Production BOM No.") AND
               (ProdBOMHeader.Status = ProdBOMHeader.Status::Certified)
            THEN
              ERROR(Text004,TABLECAPTION,"No.");
            IF ProductionBOMVersion.GET(ProdBOMLine."Production BOM No.",ProdBOMLine."Version Code") AND
               (ProductionBOMVersion.Status = ProductionBOMVersion.Status::Certified)
            THEN
              ERROR(CannotDeleteItemIfProdBOMVersionExistsErr,TABLECAPTION,"No.");
          UNTIL ProdBOMLine.NEXT = 0;
      END;
    END;

    LOCAL PROCEDURE CheckServContractLine@35(CurrFieldNo@1000 : Integer);
    BEGIN
      ServiceContractLine.RESET;
      ServiceContractLine.SETRANGE("Item No.","No.");
      IF NOT ServiceContractLine.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",ServiceContractLine.TABLECAPTION);
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",ServiceContractLine.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckAsmHeader@32(CurrFieldNo@1000 : Integer);
    VAR
      AsmHeader@1004 : Record 900;
    BEGIN
      AsmHeader.SETCURRENTKEY("Document Type","Item No.");
      AsmHeader.SETRANGE("Item No.","No.");
      IF NOT AsmHeader.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",AsmHeader.TABLECAPTION);
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",AsmHeader.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CheckAsmLine@27(CurrFieldNo@1000 : Integer);
    VAR
      AsmLine@1003 : Record 901;
    BEGIN
      AsmLine.SETCURRENTKEY(Type,"No.");
      AsmLine.SETRANGE(Type,AsmLine.Type::Item);
      AsmLine.SETRANGE("No.","No.");
      IF NOT AsmLine.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",AsmLine.TABLECAPTION);
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",AsmLine.TABLECAPTION);
      END;
    END;

    [External]
    PROCEDURE PreventNegativeInventory@33() : Boolean;
    VAR
      InventorySetup@1000 : Record 313;
    BEGIN
      CASE "Prevent Negative Inventory" OF
        "Prevent Negative Inventory"::Yes:
          EXIT(TRUE);
        "Prevent Negative Inventory"::No:
          EXIT(FALSE);
        "Prevent Negative Inventory"::Default:
          BEGIN
            InventorySetup.GET;
            EXIT(InventorySetup."Prevent Negative Inventory");
          END;
      END;
    END;

    LOCAL PROCEDURE CheckJobPlanningLine@34(CurrFieldNo@1000 : Integer);
    VAR
      JobPlanningLine@1001 : Record 1003;
    BEGIN
      JobPlanningLine.SETCURRENTKEY(Type,"No.");
      JobPlanningLine.SETRANGE(Type,JobPlanningLine.Type::Item);
      JobPlanningLine.SETRANGE("No.","No.");
      IF NOT JobPlanningLine.ISEMPTY THEN BEGIN
        IF CurrFieldNo = 0 THEN
          ERROR(Text023,TABLECAPTION,"No.",JobPlanningLine.TABLECAPTION);
        IF CurrFieldNo = FIELDNO(Type) THEN
          ERROR(CannotChangeFieldErr,FIELDCAPTION(Type),TABLECAPTION,"No.",JobPlanningLine.TABLECAPTION);
      END;
    END;

    LOCAL PROCEDURE CalcVAT@40() : Decimal;
    BEGIN
      IF "Price Includes VAT" THEN BEGIN
        VATPostingSetup.GET("VAT Bus. Posting Gr. (Price)","VAT Prod. Posting Group");
        CASE VATPostingSetup."VAT Calculation Type" OF
          VATPostingSetup."VAT Calculation Type"::"Reverse Charge VAT":
            VATPostingSetup."VAT+EC %" := 0;
          VATPostingSetup."VAT Calculation Type"::"Sales Tax":
            ERROR(
              Text006,
              VATPostingSetup.FIELDCAPTION("VAT Calculation Type"),
              VATPostingSetup."VAT Calculation Type");
        END;
      END ELSE
        CLEAR(VATPostingSetup);

      EXIT(VATPostingSetup."VAT %" / 100);
    END;

    [External]
    PROCEDURE CalcUnitPriceExclVAT@41() : Decimal;
    BEGIN
      GetGLSetup;
      IF 1 + CalcVAT = 0 THEN
        EXIT(0);
      EXIT(ROUND("Unit Price" / (1 + CalcVAT),GLSetup."Unit-Amount Rounding Precision"));
    END;

    [External]
    PROCEDURE GetItemNo@10(ItemText@1000 : Text) : Code[20];
    VAR
      ItemNo@1001 : Text[50];
    BEGIN
      TryGetItemNo(ItemNo,ItemText,TRUE);
      EXIT(COPYSTR(ItemNo,1,MAXSTRLEN("No.")));
    END;

    [External]
    PROCEDURE TryGetItemNo@9(VAR ReturnValue@1007 : Text[50];ItemText@1000 : Text;DefaultCreate@1006 : Boolean) : Boolean;
    BEGIN
      InvtSetup.GET;
      EXIT(TryGetItemNoOpenCard(ReturnValue,ItemText,DefaultCreate,TRUE,NOT InvtSetup."Skip Prompt to Create Item"));
    END;

    [External]
    PROCEDURE TryGetItemNoOpenCard@43(VAR ReturnValue@1007 : Text;ItemText@1000 : Text;DefaultCreate@1006 : Boolean;ShowItemCard@1008 : Boolean;ShowCreateItemOption@1011 : Boolean) : Boolean;
    VAR
      Item@1001 : Record 27;
      ItemView@1012 : Record 27;
      SalesLine@1004 : Record 37;
      FindRecordMgt@1009 : Codeunit 703;
      ItemNo@1002 : Code[20];
      ItemWithoutQuote@1005 : Text;
      ItemFilterContains@1003 : Text;
      FoundRecordCount@1010 : Integer;
    BEGIN
      ReturnValue := COPYSTR(ItemText,1,MAXSTRLEN(ReturnValue));
      IF ItemText = '' THEN
        EXIT(DefaultCreate);

      ItemView.SETRANGE(Blocked,FALSE);

      FoundRecordCount := FindRecordMgt.FindRecordByDescriptionAndView(ReturnValue,SalesLine.Type::Item,ItemText,ItemView.GETVIEW);

      IF FoundRecordCount = 1 THEN
        EXIT(TRUE);

      ReturnValue := COPYSTR(ItemText,1,MAXSTRLEN(ReturnValue));
      IF FoundRecordCount = 0 THEN BEGIN
        IF NOT DefaultCreate THEN
          EXIT(FALSE);

        IF NOT GUIALLOWED THEN
          ERROR(SelectItemErr);

        IF Item.WRITEPERMISSION THEN
          IF ShowCreateItemOption THEN
            CASE STRMENU(
                   STRSUBSTNO('%1,%2',STRSUBSTNO(CreateNewItemTxt,CONVERTSTR(ItemText,',','.')),SelectItemTxt),1,ItemNotRegisteredTxt)
            OF
              0:
                ERROR('');
              1:
                BEGIN
                  ReturnValue := CreateNewItem(COPYSTR(ItemText,1,MAXSTRLEN(Item.Description)),ShowItemCard);
                  EXIT(TRUE);
                END;
            END
          ELSE
            EXIT(FALSE);
      END;

      IF NOT GUIALLOWED THEN
        ERROR(SelectItemErr);

      IF FoundRecordCount > 0 THEN BEGIN
        ItemWithoutQuote := CONVERTSTR(ItemText,'''','?');
        ItemFilterContains := '''@*' + ItemWithoutQuote + '*''';
        Item.FILTERGROUP(-1);
        Item.SETFILTER("No.",ItemFilterContains);
        Item.SETFILTER(Description,ItemFilterContains);
        Item.SETFILTER("Base Unit of Measure",ItemFilterContains);
      END;

      IF ShowItemCard THEN
        ItemNo := PickItem(Item)
      ELSE BEGIN
        ReturnValue := '';
        EXIT(TRUE);
      END;

      IF ItemNo <> '' THEN BEGIN
        ReturnValue := ItemNo;
        EXIT(TRUE);
      END;

      IF NOT DefaultCreate THEN
        EXIT(FALSE);
      ERROR('');
    END;

    LOCAL PROCEDURE CreateNewItem@3(ItemName@1000 : Text[50];ShowItemCard@1001 : Boolean) : Code[20];
    VAR
      Item@1005 : Record 27;
      ItemTemplate@1006 : Record 1301;
      ItemCard@1002 : Page 30;
    BEGIN
      IF NOT ItemTemplate.NewItemFromTemplate(Item) THEN
        ERROR(SelectItemErr);

      Item.Description := ItemName;
      Item.MODIFY(TRUE);
      COMMIT;
      IF NOT ShowItemCard THEN
        EXIT(Item."No.");
      Item.SETRANGE("No.",Item."No.");
      ItemCard.SETTABLEVIEW(Item);
      IF NOT (ItemCard.RUNMODAL = ACTION::OK) THEN
        ERROR(SelectItemErr);

      EXIT(Item."No.");
    END;

    [External]
    PROCEDURE PickItem@51(VAR Item@1000 : Record 27) : Code[20];
    VAR
      ItemList@1001 : Page 31;
    BEGIN
      IF Item.FILTERGROUP = -1 THEN
        ItemList.SetTempFilteredItemRec(Item);

      IF Item.FINDFIRST THEN;
      ItemList.SETTABLEVIEW(Item);
      ItemList.SETRECORD(Item);
      ItemList.LOOKUPMODE := TRUE;
      IF ItemList.RUNMODAL = ACTION::LookupOK THEN
        ItemList.GETRECORD(Item)
      ELSE
        CLEAR(Item);

      EXIT(Item."No.");
    END;

    LOCAL PROCEDURE SetLastDateTimeModified@16();
    BEGIN
      "Last DateTime Modified" := CURRENTDATETIME;
      "Last Date Modified" := DT2DATE("Last DateTime Modified");
      "Last Time Modified" := DT2TIME("Last DateTime Modified");
    END;

    [External]
    PROCEDURE SetLastDateTimeFilter@29(DateFilter@1001 : DateTime);
    VAR
      DotNet_DateTimeOffset@1004 : Codeunit 3006;
      SyncDateTimeUtc@1002 : DateTime;
      CurrentFilterGroup@1003 : Integer;
    BEGIN
      SyncDateTimeUtc := DotNet_DateTimeOffset.ConvertToUtcDateTime(DateFilter);
      CurrentFilterGroup := FILTERGROUP;
      SETFILTER("Last Date Modified",'>=%1',DT2DATE(SyncDateTimeUtc));
      FILTERGROUP(-1);
      SETFILTER("Last Date Modified",'>%1',DT2DATE(SyncDateTimeUtc));
      SETFILTER("Last Time Modified",'>%1',DT2TIME(SyncDateTimeUtc));
      FILTERGROUP(CurrentFilterGroup);
    END;

    [External]
    PROCEDURE UpdateReplenishmentSystem@54() : Boolean;
    BEGIN
      CALCFIELDS("Assembly BOM");

      IF "Assembly BOM" THEN BEGIN
        IF NOT ("Replenishment System" IN ["Replenishment System"::Assembly,"Replenishment System"::"Prod. Order"])
        THEN BEGIN
          VALIDATE("Replenishment System","Replenishment System"::Assembly);
          EXIT(TRUE);
        END
      END ELSE
        IF  "Replenishment System" = "Replenishment System"::Assembly THEN BEGIN
          IF "Assembly Policy" <> "Assembly Policy"::"Assemble-to-Order" THEN BEGIN
            VALIDATE("Replenishment System","Replenishment System"::Purchase);
            EXIT(TRUE);
          END
        END
    END;

    [External]
    PROCEDURE UpdateUnitOfMeasureId@55();
    VAR
      UnitOfMeasure@1000 : Record 204;
    BEGIN
      IF "Base Unit of Measure" = '' THEN BEGIN
        CLEAR("Unit of Measure Id");
        EXIT;
      END;

      IF NOT UnitOfMeasure.GET("Base Unit of Measure") THEN
        EXIT;

      "Unit of Measure Id" := UnitOfMeasure.Id;
    END;

    [External]
    PROCEDURE UpdateItemCategoryId@63();
    VAR
      ItemCategory@1000 : Record 5722;
      GraphMgtGeneralTools@1001 : Codeunit 5465;
    BEGIN
      IF ISTEMPORARY THEN
        EXIT;

      IF NOT GraphMgtGeneralTools.IsApiEnabled THEN
        EXIT;

      IF "Item Category Code" = '' THEN BEGIN
        CLEAR("Item Category Id");
        EXIT;
      END;

      IF NOT ItemCategory.GET("Item Category Code") THEN
        EXIT;

      "Item Category Id" := ItemCategory.Id;
    END;

    [External]
    PROCEDURE UpdateTaxGroupId@47();
    VAR
      TaxGroup@1000 : Record 321;
    BEGIN
      IF "Tax Group Code" = '' THEN BEGIN
        CLEAR("Tax Group Id");
        EXIT;
      END;

      IF NOT TaxGroup.GET("Tax Group Code") THEN
        EXIT;

      "Tax Group Id" := TaxGroup.Id;
    END;

    LOCAL PROCEDURE UpdateUnitOfMeasureCode@48();
    VAR
      UnitOfMeasure@1001 : Record 204;
    BEGIN
      IF NOT ISNULLGUID("Unit of Measure Id") THEN BEGIN
        UnitOfMeasure.SETRANGE(Id,"Unit of Measure Id");
        UnitOfMeasure.FINDFIRST;
      END;

      "Base Unit of Measure" := UnitOfMeasure.Code;
    END;

    LOCAL PROCEDURE UpdateTaxGroupCode@13();
    VAR
      TaxGroup@1001 : Record 321;
    BEGIN
      IF NOT ISNULLGUID("Tax Group Id") THEN BEGIN
        TaxGroup.SETRANGE(Id,"Tax Group Id");
        TaxGroup.FINDFIRST;
      END;

      VALIDATE("Tax Group Code",TaxGroup.Code);
    END;

    LOCAL PROCEDURE UpdateItemCategoryCode@62();
    VAR
      ItemCategory@1000 : Record 5722;
    BEGIN
      IF ISNULLGUID("Item Category Id") THEN BEGIN
        ItemCategory.SETRANGE(Id,"Item Category Id");
        ItemCategory.FINDFIRST;
      END;

      "Item Category Code" := ItemCategory.Code;
    END;

    [External]
    PROCEDURE UpdateReferencedIds@61();
    VAR
      GraphMgtGeneralTools@1000 : Codeunit 5465;
    BEGIN
      IF ISTEMPORARY THEN
        EXIT;

      IF NOT GraphMgtGeneralTools.IsApiEnabled THEN
        EXIT;

      UpdateUnitOfMeasureId;
      UpdateTaxGroupId;
      UpdateItemCategoryId;
    END;

    [External]
    PROCEDURE GetReferencedIds@49(VAR TempField@1000 : TEMPORARY Record 2000000041);
    VAR
      DataTypeManagement@1001 : Codeunit 701;
    BEGIN
      DataTypeManagement.InsertFieldToBuffer(TempField,DATABASE::Item,FIELDNO("Unit of Measure Id"));
      DataTypeManagement.InsertFieldToBuffer(TempField,DATABASE::Item,FIELDNO("Tax Group Id"));
      DataTypeManagement.InsertFieldToBuffer(TempField,DATABASE::Item,FIELDNO("Item Category Id"));
    END;

    [External]
    PROCEDURE IsServiceType@53() : Boolean;
    BEGIN
      EXIT(Type = Type::Service);
    END;

    [External]
    PROCEDURE IsNonInventoriableType@50() : Boolean;
    BEGIN
      EXIT(Type IN [Type::"Non-Inventory",Type::Service]);
    END;

    [External]
    PROCEDURE IsInventoriableType@52() : Boolean;
    BEGIN
      EXIT(NOT IsNonInventoriableType);
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckDocuments@74(VAR Item@1000 : Record 27;VAR xItem@1001 : Record 27;VAR CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterDeleteRelatedData@57(Item@1000 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeTestNoItemLedgEntiesExist@59(Item@1002 : Record 27;CurrentFieldName@1001 : Text[100];VAR IsHandled@1000 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeTestNoPurchLinesExist@60(Item@1000 : Record 27;CurrentFieldName@1001 : Text[100];VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeValidateStandardCost@56(VAR Item@1000 : Record 27;xItem@1001 : Record 27;CallingFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [External]
    PROCEDURE ExistsItemLedgerEntry@58() : Boolean;
    VAR
      ItemLedgEntry@1000 : Record 32;
    BEGIN
      ItemLedgEntry.RESET;
      ItemLedgEntry.SETCURRENTKEY("Item No.");
      ItemLedgEntry.SETRANGE("Item No.","No.");
      EXIT(NOT ItemLedgEntry.ISEMPTY);
    END;

    BEGIN
    {

      LICORES BAINES
      ==============
      BAIN-0009 JA 171107 A¤adir campo:Pendiente revisar.
      BAIN-0021 JA 201207 A¤adir campo: Cdad. medida precio manual.
      BAIN-0010 AM 100807 Se a¤ade el campo IVA Desglosado
      BAIN-0014 JA 261107 Nuevo campo: Precio coste tarifa.
      BAIN-0028 JA 131107 A¤adir campos: "Con precinta","Precinta propia",
                                         "C¢d. tipo precinta".
    }
    END.
  }
}

OBJECT Table 36 Sales Header
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=18:35:40;
    Modified=Yes;
    Version List=NAVW114.07,NAVES14.07,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    DataCaptionFields=No.,Sell-to Customer Name;
    OnInsert=VAR
               O365SalesInvoiceMgmt@1000 : Codeunit 2310;
               StandardCodesMgt@1001 : Codeunit 170;
             BEGIN
               InitInsert;
               InsertMode := TRUE;

               SetSellToCustomerFromFilter;

               IF GetFilterContNo <> '' THEN
                 VALIDATE("Sell-to Contact No.",GetFilterContNo);

               VALIDATE("Payment Instructions Id",O365SalesInvoiceMgmt.GetDefaultPaymentInstructionsId);

               IF "Salesperson Code" = '' THEN
                 SetDefaultSalesperson;

               IF "Sell-to Customer No." <> '' THEN
                 StandardCodesMgt.CheckShowSalesRecurringLinesNotification(Rec);

               // Remove view filters so that the cards does not show filtered view notification
               SETVIEW('');
             END;

    OnDelete=VAR
               CustInvoiceDisc@1002 : Record 19;
               PostSalesDelete@1003 : Codeunit 363;
               ArchiveManagement@1000 : Codeunit 5063;
             BEGIN
               IF NOT UserSetupMgt.CheckRespCenter(0,"Responsibility Center") THEN
                 ERROR(
                   Text022,
                   RespCenter.TABLECAPTION,UserSetupMgt.GetSalesFilter);

               ArchiveManagement.AutoArchiveSalesDocument(Rec);
               PostSalesDelete.DeleteHeader(
                 Rec,SalesShptHeader,SalesInvHeader,SalesCrMemoHeader,ReturnRcptHeader,
                 SalesInvHeaderPrepmt,SalesCrMemoHeaderPrepmt);

               UpdateOpportunity;

               VALIDATE("Applies-to ID",'');
               VALIDATE("Incoming Document Entry No.",0);

               ApprovalsMgmt.OnDeleteRecordInApprovalRequest(RECORDID);
               SalesLine.RESET;
               SalesLine.LOCKTABLE;

               WhseRequest.SETRANGE("Source Type",DATABASE::"Sales Line");
               WhseRequest.SETRANGE("Source Subtype","Document Type");
               WhseRequest.SETRANGE("Source No.","No.");
               IF NOT WhseRequest.ISEMPTY THEN
                 WhseRequest.DELETEALL(TRUE);

               SalesLine.SETRANGE("Document Type","Document Type");
               SalesLine.SETRANGE("Document No.","No.");
               SalesLine.SETRANGE(Type,SalesLine.Type::"Charge (Item)");

               DeleteSalesLines;
               SalesLine.SETRANGE(Type);
               DeleteSalesLines;

               SalesCommentLine.SETRANGE("Document Type","Document Type");
               SalesCommentLine.SETRANGE("No.","No.");
               SalesCommentLine.DELETEALL;

               IF (SalesShptHeader."No." <> '') OR
                  (SalesInvHeader."No." <> '') OR
                  (SalesCrMemoHeader."No." <> '') OR
                  (ReturnRcptHeader."No." <> '') OR
                  (SalesInvHeaderPrepmt."No." <> '') OR
                  (SalesCrMemoHeaderPrepmt."No." <> '')
               THEN
                 MESSAGE(PostedDocsToPrintCreatedMsg);

               IF IdentityManagement.IsInvAppId AND CustInvoiceDisc.GET(SalesHeader."Invoice Disc. Code") THEN
                 CustInvoiceDisc.DELETE; // Cleanup of autogenerated cust. invoice discounts
             END;

    OnRename=BEGIN
               ERROR(Text003,TABLECAPTION);
             END;

    CaptionML=[ENU=Sales Header;
               ESP=Cab. venta];
    LookupPageID=Page45;
  }
  FIELDS
  {
    { 1   ;   ;Document Type       ;Option        ;CaptionML=[ENU=Document Type;
                                                              ESP=Tipo documento];
                                                   OptionCaptionML=[ENU=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,,,,,,,,,,,,,,,EDI Order;
                                                                    ESP=Oferta,Pedido,Factura,Abono,Pedido abierto,Devoluci¢n,,,,,,,,,,,,,,,Pedido EDI];
                                                   OptionString=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,,,,,,,,,,,,,,,Pedido EDI }
    { 2   ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   OnValidate=VAR
                                                                StandardCodesMgt@1000 : Codeunit 170;
                                                              BEGIN
                                                                CheckCreditLimitIfLineNotInsertedYet;
                                                                IF "No." = '' THEN
                                                                  InitRecord;
                                                                TestStatusOpen;
                                                                IF ("Sell-to Customer No." <> xRec."Sell-to Customer No.") AND
                                                                   (xRec."Sell-to Customer No." <> '')
                                                                THEN BEGIN
                                                                  IF ("Opportunity No." <> '') AND ("Document Type" IN ["Document Type"::Quote,"Document Type"::Order]) THEN
                                                                    ERROR(
                                                                      Text062,
                                                                      FIELDCAPTION("Sell-to Customer No."),
                                                                      FIELDCAPTION("Opportunity No."),
                                                                      "Opportunity No.",
                                                                      "Document Type");
                                                                  IF GetHideValidationDialog OR NOT GUIALLOWED THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(ConfirmChangeQst,FALSE,SellToCustomerTxt);
                                                                  IF Confirmed THEN BEGIN
                                                                    SalesLine.SETRANGE("Document Type","Document Type");
                                                                    SalesLine.SETRANGE("Document No.","No.");
                                                                    IF "Sell-to Customer No." = '' THEN BEGIN
                                                                      IF SalesLine.FINDFIRST THEN
                                                                        ERROR(
                                                                          Text005,
                                                                          FIELDCAPTION("Sell-to Customer No."));
                                                                      INIT;
                                                                      OnValidateSellToCustomerNoAfterInit(Rec,xRec);
                                                                      GetSalesSetup;
                                                                      "No. Series" := xRec."No. Series";
                                                                      InitRecord;
                                                                      InitNoSeries;
                                                                      EXIT;
                                                                    END;

                                                                    CheckShipmentInfo(SalesLine,FALSE);
                                                                    CheckPrepmtInfo(SalesLine);
                                                                    CheckReturnInfo(SalesLine,FALSE);

                                                                    SalesLine.RESET;
                                                                  END ELSE BEGIN
                                                                    Rec := xRec;
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                IF ("Document Type" = "Document Type"::Order) AND
                                                                   (xRec."Sell-to Customer No." <> "Sell-to Customer No.")
                                                                THEN BEGIN
                                                                  SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
                                                                  SalesLine.SETRANGE("Document No.","No.");
                                                                  SalesLine.SETFILTER("Purch. Order Line No.",'<>0');
                                                                  IF NOT SalesLine.ISEMPTY THEN
                                                                    ERROR(
                                                                      Text006,
                                                                      FIELDCAPTION("Sell-to Customer No."));
                                                                  SalesLine.RESET;
                                                                END;

                                                                GetCust("Sell-to Customer No.");
                                                                Cust.CheckBlockedCustOnDocs(Cust,"Document Type",FALSE,FALSE);
                                                                Cust.TESTFIELD("Gen. Bus. Posting Group");
                                                                OnAfterCheckSellToCust(Rec,xRec,Cust);

                                                                CopySellToCustomerAddressFieldsFromCustomer(Cust);
                                                                InitSii;

                                                                IF "Sell-to Customer No." = xRec."Sell-to Customer No." THEN
                                                                  IF ShippedSalesLinesExist OR ReturnReceiptExist THEN BEGIN
                                                                    TESTFIELD("VAT Bus. Posting Group",xRec."VAT Bus. Posting Group");
                                                                    TESTFIELD("Gen. Bus. Posting Group",xRec."Gen. Bus. Posting Group");
                                                                  END;

                                                                "Sell-to IC Partner Code" := Cust."IC Partner Code";
                                                                "Send IC Document" := ("Sell-to IC Partner Code" <> '') AND ("IC Direction" = "IC Direction"::Outgoing);

                                                                VALIDATE("Ship-to Code",Cust."Ship-to Code");
                                                                IF Cust."Bill-to Customer No." <> '' THEN
                                                                  VALIDATE("Bill-to Customer No.",Cust."Bill-to Customer No.")
                                                                ELSE BEGIN
                                                                  IF "Bill-to Customer No." = "Sell-to Customer No." THEN
                                                                    SkipBillToContact := TRUE;
                                                                  IF NOT GestCodigoVentas.T36CadenaComercial(Rec,Cust,SkipBillToContact,HideValidationDialog) THEN BEGIN //  VNTES
                                                                  VALIDATE("Bill-to Customer No.","Sell-to Customer No.");
                                                                  SkipBillToContact := FALSE;
                                                                  END; //  VNTES
                                                                END;

                                                                GetShippingTime(FIELDNO("Sell-to Customer No."));

                                                                IF (xRec."Sell-to Customer No." <> "Sell-to Customer No.") OR
                                                                   (xRec."Currency Code" <> "Currency Code") OR
                                                                   (xRec."Gen. Bus. Posting Group" <> "Gen. Bus. Posting Group") OR
                                                                   (xRec."VAT Bus. Posting Group" <> "VAT Bus. Posting Group")
                                                                THEN
                                                                  RecreateSalesLines(SellToCustomerTxt);

                                                                IF NOT SkipSellToContact THEN
                                                                  UpdateSellToCont("Sell-to Customer No.");

                                                                IF "No." <> '' THEN
                                                                  StandardCodesMgt.CheckShowSalesRecurringLinesNotification(Rec);

                                                                IF (xRec."Sell-to Customer No." <> '') AND (xRec."Sell-to Customer No." <> "Sell-to Customer No.") THEN
                                                                  RecallModifyAddressNotification(GetModifyCustomerAddressNotificationId);
                                                              END;

                                                   CaptionML=[ENU=Sell-to Customer No.;
                                                              ESP=Venta a-N§ cliente] }
    { 3   ;   ;No.                 ;Code20        ;OnValidate=BEGIN
                                                                IF "No." <> xRec."No." THEN BEGIN
                                                                  GetSalesSetup;
                                                                  NoSeriesMgt.TestManual(GetNoSeriesCode);
                                                                  "No. Series" := '';
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=No.;
                                                              ESP=N§] }
    { 4   ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   OnValidate=VAR
                                                                SIIManagement@1100000 : Codeunit 10756;
                                                              BEGIN
                                                                TestStatusOpen;
                                                                BilltoCustomerNoChanged := xRec."Bill-to Customer No." <> "Bill-to Customer No.";
                                                                IF BilltoCustomerNoChanged THEN
                                                                  IF xRec."Bill-to Customer No." = '' THEN
                                                                    InitRecord
                                                                  ELSE BEGIN
                                                                    IF GetHideValidationDialog OR NOT GUIALLOWED THEN
                                                                      Confirmed := TRUE
                                                                    ELSE
                                                                      Confirmed := CONFIRM(ConfirmChangeQst,FALSE,BillToCustomerTxt);
                                                                    IF Confirmed THEN BEGIN
                                                                      SalesLine.SETRANGE("Document Type","Document Type");
                                                                      SalesLine.SETRANGE("Document No.","No.");

                                                                      CheckShipmentInfo(SalesLine,TRUE);
                                                                      CheckPrepmtInfo(SalesLine);
                                                                      CheckReturnInfo(SalesLine,TRUE);

                                                                      SalesLine.RESET;
                                                                      "Pay-at Code" := '';

                                                                      IF xRec."Bill-to Customer No." <> "Bill-to Customer No." THEN
                                                                        "Corrected Invoice No." := '';
                                                                    END ELSE
                                                                      "Bill-to Customer No." := xRec."Bill-to Customer No.";
                                                                  END;

                                                                GetCust("Bill-to Customer No.");
                                                                Cust.CheckBlockedCustOnDocs(Cust,"Document Type",FALSE,FALSE);
                                                                Cust.TESTFIELD("Customer Posting Group");
                                                                PostingSetupMgt.CheckCustPostingGroupReceivablesAccount("Customer Posting Group");
                                                                CheckCreditLimit;
                                                                OnAfterCheckBillToCust(Rec,xRec,Cust);

                                                                CopyBillToCustomerAddressFieldsFromCustomer(Cust);

                                                                IF NOT BilltoCustomerNoChanged THEN
                                                                  IF ShippedSalesLinesExist THEN BEGIN
                                                                    TESTFIELD("Customer Disc. Group",xRec."Customer Disc. Group");
                                                                    TESTFIELD("Currency Code",xRec."Currency Code");
                                                                  END;

                                                                CreateDim(
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");

                                                                VALIDATE("Payment Terms Code");
                                                                VALIDATE("Prepmt. Payment Terms Code");
                                                                VALIDATE("Payment Method Code");
                                                                VALIDATE("Currency Code");
                                                                VALIDATE("Prepayment %");

                                                                IF (xRec."Sell-to Customer No." = "Sell-to Customer No.") AND
                                                                   (xRec."Bill-to Customer No." <> "Bill-to Customer No.")
                                                                THEN BEGIN
                                                                  RecreateSalesLines(BillToCustomerTxt);
                                                                  BilltoCustomerNoChanged := FALSE;
                                                                END;
                                                                IF NOT SkipBillToContact THEN
                                                                  UpdateBillToCont("Bill-to Customer No.");

                                                                "Bill-to IC Partner Code" := Cust."IC Partner Code";
                                                                "Send IC Document" := ("Bill-to IC Partner Code" <> '') AND ("IC Direction" = "IC Direction"::Outgoing);

                                                                IF (xRec."Bill-to Customer No." <> '') AND (xRec."Bill-to Customer No." <> "Bill-to Customer No.") THEN
                                                                  RecallModifyAddressNotification(GetModifyBillToCustomerAddressNotificationId);

                                                                VALIDATE("ID Type",SIIManagement.GetSalesIDType("Bill-to Customer No.","Correction Type","Corrected Invoice No."));
                                                              END;

                                                   CaptionML=[ENU=Bill-to Customer No.;
                                                              ESP=Factura-a N§ cliente];
                                                   NotBlank=Yes }
    { 5   ;   ;Bill-to Name        ;Text100       ;TableRelation=Customer.Name;
                                                   OnValidate=VAR
                                                                Customer@1000 : Record 18;
                                                              BEGIN
                                                                IF ShouldLookForCustomerByName("Bill-to Customer No.") THEN
                                                                  VALIDATE("Bill-to Customer No.",Customer.GetCustNo("Bill-to Name"));
                                                              END;

                                                   OnLookup=VAR
                                                              Customer@1000 : Record 18;
                                                            BEGIN
                                                              IF "Bill-to Customer No." <> '' THEN
                                                                Customer.GET("Bill-to Customer No.");

                                                              IF Customer.LookupCustomer(Customer) THEN BEGIN
                                                                "Bill-to Name" := Customer.Name;
                                                                "Bill-to Customer No." := Customer."No.";
                                                              END;
                                                            END;

                                                   ValidateTableRelation=No;
                                                   CaptionML=[ENU=Bill-to Name;
                                                              ESP=Fact. a-Nombre] }
    { 6   ;   ;Bill-to Name 2      ;Text50        ;CaptionML=[ENU=Bill-to Name 2;
                                                              ESP=Fact. a-Nombre 2] }
    { 7   ;   ;Bill-to Address     ;Text100       ;OnValidate=BEGIN
                                                                ModifyBillToCustomerAddress;
                                                              END;

                                                   CaptionML=[ENU=Bill-to Address;
                                                              ESP=Fact. a-Direcci¢n] }
    { 8   ;   ;Bill-to Address 2   ;Text50        ;OnValidate=BEGIN
                                                                ModifyBillToCustomerAddress;
                                                              END;

                                                   CaptionML=[ENU=Bill-to Address 2;
                                                              ESP=Fact. a-Direcci¢n 2] }
    { 9   ;   ;Bill-to City        ;Text30        ;TableRelation=IF (Bill-to Country/Region Code=CONST()) "Post Code".City
                                                                 ELSE IF (Bill-to Country/Region Code=FILTER(<>'')) "Post Code".City WHERE (Country/Region Code=FIELD(Bill-to Country/Region Code));
                                                   OnValidate=BEGIN
                                                                PostCode.ValidateCity(
                                                                  "Bill-to City","Bill-to Post Code","Bill-to County","Bill-to Country/Region Code",(CurrFieldNo <> 0) AND GUIALLOWED);
                                                                ModifyBillToCustomerAddress;
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookupPostCode("Bill-to City","Bill-to Post Code","Bill-to County","Bill-to Country/Region Code");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Bill-to City;
                                                              ESP=Fact. a-Poblaci¢n] }
    { 10  ;   ;Bill-to Contact     ;Text100       ;OnValidate=BEGIN
                                                                ModifyBillToCustomerAddress;
                                                              END;

                                                   OnLookup=VAR
                                                              Contact@1001 : Record 5050;
                                                            BEGIN
                                                              LookupContact("Bill-to Customer No.","Bill-to Contact No.",Contact);
                                                              IF PAGE.RUNMODAL(0,Contact) = ACTION::LookupOK THEN
                                                                VALIDATE("Bill-to Contact No.",Contact."No.");
                                                            END;

                                                   CaptionML=[ENU=Bill-to Contact;
                                                              ESP=Fact. a-Atenci¢n] }
    { 11  ;   ;Your Reference      ;Text35        ;CaptionML=[ENU=Your Reference;
                                                              ESP=Su/Ntra. ref.] }
    { 12  ;   ;Ship-to Code        ;Code10        ;TableRelation="Ship-to Address".Code WHERE (Customer No.=FIELD(Sell-to Customer No.));
                                                   OnValidate=VAR
                                                                ShipToAddr@1000 : Record 222;
                                                              BEGIN
                                                                IF ("Document Type" = "Document Type"::Order) AND
                                                                   (xRec."Ship-to Code" <> "Ship-to Code")
                                                                THEN BEGIN
                                                                  SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
                                                                  SalesLine.SETRANGE("Document No.","No.");
                                                                  SalesLine.SETFILTER("Purch. Order Line No.",'<>0');
                                                                  IF NOT SalesLine.ISEMPTY THEN
                                                                    ERROR(
                                                                      Text006,
                                                                      FIELDCAPTION("Ship-to Code"));
                                                                  SalesLine.RESET;
                                                                END;

                                                                IF NOT IsCreditDocType THEN
                                                                  IF "Ship-to Code" <> '' THEN BEGIN
                                                                    IF xRec."Ship-to Code" <> '' THEN
                                                                      BEGIN
                                                                      GetCust("Sell-to Customer No.");
                                                                      IF Cust."Location Code" <> '' THEN
                                                                        VALIDATE("Location Code",Cust."Location Code");
                                                                      "Tax Area Code" := Cust."Tax Area Code";
                                                                    END;
                                                                    ShipToAddr.GET("Sell-to Customer No.","Ship-to Code");
                                                                    CopyShipToCustomerAddressFieldsFromShipToAddr(ShipToAddr);
                                                                  END ELSE
                                                                    IF "Sell-to Customer No." <> '' THEN BEGIN
                                                                      GetCust("Sell-to Customer No.");
                                                                      CopyShipToCustomerAddressFieldsFromCustomer(Cust);
                                                                    END;

                                                                GetShippingTime(FIELDNO("Ship-to Code"));

                                                                IF (xRec."Sell-to Customer No." = "Sell-to Customer No.") AND
                                                                   (xRec."Ship-to Code" <> "Ship-to Code")
                                                                THEN
                                                                  IF (xRec."VAT Country/Region Code" <> "VAT Country/Region Code") OR
                                                                     (xRec."Tax Area Code" <> "Tax Area Code")
                                                                  THEN
                                                                    RecreateSalesLines(FIELDCAPTION("Ship-to Code"))
                                                                  ELSE BEGIN
                                                                    IF xRec."Shipping Agent Code" <> "Shipping Agent Code" THEN
                                                                      MessageIfSalesLinesExist(FIELDCAPTION("Shipping Agent Code"));
                                                                    IF xRec."Shipping Agent Service Code" <> "Shipping Agent Service Code" THEN
                                                                      MessageIfSalesLinesExist(FIELDCAPTION("Shipping Agent Service Code"));
                                                                    IF xRec."Tax Liable" <> "Tax Liable" THEN
                                                                      VALIDATE("Tax Liable");
                                                                  END;
                                                              END;

                                                   CaptionML=[ENU=Ship-to Code;
                                                              ESP=C¢d. direcci¢n env¡o cliente] }
    { 13  ;   ;Ship-to Name        ;Text100       ;CaptionML=[ENU=Ship-to Name;
                                                              ESP=Nombre direcci¢n de env¡o] }
    { 14  ;   ;Ship-to Name 2      ;Text50        ;CaptionML=[ENU=Ship-to Name 2;
                                                              ESP=Nombre direcci¢n de env¡o 2] }
    { 15  ;   ;Ship-to Address     ;Text100       ;CaptionML=[ENU=Ship-to Address;
                                                              ESP=Direcci¢n de env¡o] }
    { 16  ;   ;Ship-to Address 2   ;Text50        ;CaptionML=[ENU=Ship-to Address 2;
                                                              ESP=Direcci¢n de env¡o 2] }
    { 17  ;   ;Ship-to City        ;Text30        ;TableRelation=IF (Ship-to Country/Region Code=CONST()) "Post Code".City
                                                                 ELSE IF (Ship-to Country/Region Code=FILTER(<>'')) "Post Code".City WHERE (Country/Region Code=FIELD(Ship-to Country/Region Code));
                                                   OnValidate=BEGIN
                                                                PostCode.ValidateCity(
                                                                  "Ship-to City","Ship-to Post Code","Ship-to County","Ship-to Country/Region Code",(CurrFieldNo <> 0) AND GUIALLOWED);
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookupPostCode("Ship-to City","Ship-to Post Code","Ship-to County","Ship-to Country/Region Code");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Ship-to City;
                                                              ESP=Poblaci¢n direcci¢n de env¡o] }
    { 18  ;   ;Ship-to Contact     ;Text100       ;CaptionML=[ENU=Ship-to Contact;
                                                              ESP=Contacto de direcci¢n de env¡o] }
    { 19  ;   ;Order Date          ;Date          ;OnValidate=BEGIN
                                                                IF ("Document Type" IN ["Document Type"::Quote,"Document Type"::Order]) AND
                                                                   NOT ("Order Date" = xRec."Order Date")
                                                                THEN
                                                                  PriceMessageIfSalesLinesExist(FIELDCAPTION("Order Date"));
                                                              END;

                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Order Date;
                                                              ESP=Fecha pedido] }
    { 20  ;   ;Posting Date        ;Date          ;OnValidate=VAR
                                                                IsHandled@1000 : Boolean;
                                                              BEGIN
                                                                TESTFIELD("Posting Date");
                                                                TestNoSeriesDate(
                                                                  "Posting No.","Posting No. Series",
                                                                  FIELDCAPTION("Posting No."),FIELDCAPTION("Posting No. Series"));
                                                                TestNoSeriesDate(
                                                                  "Prepayment No.","Prepayment No. Series",
                                                                  FIELDCAPTION("Prepayment No."),FIELDCAPTION("Prepayment No. Series"));
                                                                TestNoSeriesDate(
                                                                  "Prepmt. Cr. Memo No.","Prepmt. Cr. Memo No. Series",
                                                                  FIELDCAPTION("Prepmt. Cr. Memo No."),FIELDCAPTION("Prepmt. Cr. Memo No. Series"));

                                                                IsHandled := FALSE;
                                                                OnValidatePostingDateOnBeforeAssignDocumentDate(Rec,IsHandled);
                                                                IF NOT IsHandled THEN
                                                                  IF "Incoming Document Entry No." = 0 THEN
                                                                    VALIDATE("Document Date","Posting Date");

                                                                IF ("Document Type" IN ["Document Type"::Invoice,"Document Type"::"Credit Memo"]) AND
                                                                   NOT ("Posting Date" = xRec."Posting Date")
                                                                THEN
                                                                  PriceMessageIfSalesLinesExist(FIELDCAPTION("Posting Date"));

                                                                IF "Currency Code" <> '' THEN BEGIN
                                                                  UpdateCurrencyFactor;
                                                                  IF "Currency Factor" <> xRec."Currency Factor" THEN
                                                                    ConfirmUpdateCurrencyFactor;
                                                                END;

                                                                IF "Posting Date" <> xRec."Posting Date" THEN
                                                                  IF DeferralHeadersExist THEN
                                                                    ConfirmUpdateDeferralDate;
                                                                GestCodigoVentas.T36ActCampoCabAnalisis(Rec); //  VNTES
                                                                SynchronizeAsmHeader;
                                                              END;

                                                   CaptionML=[ENU=Posting Date;
                                                              ESP=Fecha registro] }
    { 21  ;   ;Shipment Date       ;Date          ;OnValidate=BEGIN
                                                                UpdateSalesLinesByFieldNo(FIELDNO("Shipment Date"),CurrFieldNo <> 0);
                                                              END;

                                                   CaptionML=[ENU=Shipment Date;
                                                              ESP=Fecha env¡o] }
    { 22  ;   ;Posting Description ;Text100       ;CaptionML=[ENU=Posting Description;
                                                              ESP=Texto de registro] }
    { 23  ;   ;Payment Terms Code  ;Code10        ;TableRelation="Payment Terms";
                                                   OnValidate=VAR
                                                                IsHandled@1000 : Boolean;
                                                              BEGIN
                                                                IF ("Payment Terms Code" <> '') AND ("Document Date" <> 0D) THEN BEGIN
                                                                  PaymentTerms.GET("Payment Terms Code");
                                                                  IF IsCreditDocType AND NOT PaymentTerms."Calc. Pmt. Disc. on Cr. Memos" THEN BEGIN
                                                                    IsHandled := FALSE;
                                                                    OnValidatePaymentTermsCodeOnBeforeValidateDueDate(Rec,xRec,CurrFieldNo,IsHandled);
                                                                    IF NOT IsHandled THEN
                                                                      VALIDATE("Due Date","Document Date");
                                                                    VALIDATE("Pmt. Discount Date",0D);
                                                                    VALIDATE("Payment Discount %",0);
                                                                  END ELSE BEGIN
                                                                    IsHandled := FALSE;
                                                                    OnValidatePaymentTermsCodeOnBeforeCalcDueDate(Rec,xRec,FIELDNO("Payment Terms Code"),CurrFieldNo,IsHandled);
                                                                    IF NOT IsHandled THEN BEGIN
                                                                      "Due Date" := CALCDATE(PaymentTerms."Due Date Calculation","Document Date");
                                                                      AdjustDueDate.SalesAdjustDueDate(
                                                                        "Due Date","Document Date",PaymentTerms.CalculateMaxDueDate("Document Date"),"Bill-to Customer No.");
                                                                    END;
                                                                    IsHandled := FALSE;
                                                                    OnValidatePaymentTermsCodeOnBeforeCalcPmtDiscDate(Rec,xRec,FIELDNO("Payment Terms Code"),CurrFieldNo,IsHandled);
                                                                    IF NOT IsHandled THEN
                                                                      "Pmt. Discount Date" := CALCDATE(PaymentTerms."Discount Date Calculation","Document Date");
                                                                    GLSetup.GET;
                                                                    IF GLSetup."Payment Discount Type" = GLSetup."Payment Discount Type"::"Calc. Pmt. Disc. on Lines" THEN
                                                                      VALIDATE("Prepmt. Payment Discount %",0)
                                                                    ELSE
                                                                      IF NOT UpdateDocumentDate THEN
                                                                        VALIDATE("Prepmt. Payment Discount %",PaymentTerms."Discount %");
                                                                    IF NOT UpdateDocumentDate THEN
                                                                      VALIDATE("Payment Discount %",PaymentTerms."Discount %");
                                                                  END;
                                                                END ELSE BEGIN
                                                                  IsHandled := FALSE;
                                                                  OnValidatePaymentTermsCodeOnBeforeValidateDueDateWhenBlank(Rec,xRec,CurrFieldNo,IsHandled);
                                                                  IF NOT IsHandled THEN
                                                                    VALIDATE("Due Date","Document Date");
                                                                  IF NOT UpdateDocumentDate THEN BEGIN
                                                                    VALIDATE("Pmt. Discount Date",0D);
                                                                    VALIDATE("Payment Discount %",0);
                                                                  END;
                                                                END;
                                                                IF xRec."Payment Terms Code" = "Prepmt. Payment Terms Code" THEN BEGIN
                                                                  IF xRec."Prepayment Due Date" = 0D THEN
                                                                    "Prepayment Due Date" := CALCDATE(PaymentTerms."Due Date Calculation","Document Date");
                                                                  VALIDATE("Prepmt. Payment Terms Code","Payment Terms Code");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Payment Terms Code;
                                                              ESP=C¢d. t‚rminos pago] }
    { 24  ;   ;Due Date            ;Date          ;OnValidate=BEGIN
                                                                IF PaymentTerms.GET("Payment Terms Code") THEN
                                                                  PaymentTerms.VerifyMaxNoDaysTillDueDate("Due Date","Document Date",FIELDCAPTION("Due Date"));
                                                                "Due Date Modified" := TRUE;
                                                              END;

                                                   CaptionML=[ENU=Due Date;
                                                              ESP=Fecha vencimiento] }
    { 25  ;   ;Payment Discount %  ;Decimal       ;OnValidate=BEGIN
                                                                IF NOT (CurrFieldNo IN [0,FIELDNO("Posting Date"),FIELDNO("Document Date")]) THEN
                                                                  TestStatusOpen;
                                                                GLSetup.GET;
                                                                IF "Payment Discount %" < GLSetup."VAT Tolerance %" THEN
                                                                  "VAT Base Discount %" := "Payment Discount %"
                                                                ELSE
                                                                  "VAT Base Discount %" := GLSetup."VAT Tolerance %";
                                                                VALIDATE("VAT Base Discount %");
                                                              END;

                                                   CaptionML=[ENU=Payment Discount %;
                                                              ESP=% Dto. P.P.];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 26  ;   ;Pmt. Discount Date  ;Date          ;CaptionML=[ENU=Pmt. Discount Date;
                                                              ESP=Fecha dto. P.P.] }
    { 27  ;   ;Shipment Method Code;Code10        ;TableRelation="Shipment Method";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                              END;

                                                   CaptionML=[ENU=Shipment Method Code;
                                                              ESP=C¢d. condiciones env¡o] }
    { 28  ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF ("Location Code" <> xRec."Location Code") AND
                                                                   (xRec."Sell-to Customer No." = "Sell-to Customer No.")
                                                                THEN
                                                                  MessageIfSalesLinesExist(FIELDCAPTION("Location Code"));

                                                                UpdateShipToAddress;
                                                                UpdateOutboundWhseHandlingTime;
                                                              END;

                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 29  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1),
                                                                                               Blocked=CONST(No));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(1,"Shortcut Dimension 1 Code");
                                                              END;

                                                   CaptionML=[ENU=Shortcut Dimension 1 Code;
                                                              ESP=C¢d. dim. acceso dir. 1];
                                                   CaptionClass='1,2,1' }
    { 30  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2),
                                                                                               Blocked=CONST(No));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(2,"Shortcut Dimension 2 Code");
                                                              END;

                                                   CaptionML=[ENU=Shortcut Dimension 2 Code;
                                                              ESP=C¢d. dim. acceso dir. 2];
                                                   CaptionClass='1,2,2' }
    { 31  ;   ;Customer Posting Group;Code20      ;TableRelation="Customer Posting Group";
                                                   CaptionML=[ENU=Customer Posting Group;
                                                              ESP=Grupo registro cliente];
                                                   Editable=No }
    { 32  ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   OnValidate=BEGIN
                                                                IF NOT (CurrFieldNo IN [0,FIELDNO("Posting Date")]) OR ("Currency Code" <> xRec."Currency Code") THEN
                                                                  TestStatusOpen;
                                                                IF (CurrFieldNo <> FIELDNO("Currency Code")) AND ("Currency Code" = xRec."Currency Code") THEN
                                                                  UpdateCurrencyFactor
                                                                ELSE
                                                                  IF "Currency Code" <> xRec."Currency Code" THEN
                                                                    UpdateCurrencyFactor
                                                                  ELSE
                                                                    IF "Currency Code" <> '' THEN BEGIN
                                                                      UpdateCurrencyFactor;
                                                                      IF "Currency Factor" <> xRec."Currency Factor" THEN
                                                                        ConfirmUpdateCurrencyFactor;
                                                                    END;
                                                              END;

                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa] }
    { 33  ;   ;Currency Factor     ;Decimal       ;OnValidate=BEGIN
                                                                IF "Currency Factor" <> xRec."Currency Factor" THEN
                                                                  UpdateSalesLinesByFieldNo(FIELDNO("Currency Factor"),FALSE);
                                                              END;

                                                   CaptionML=[ENU=Currency Factor;
                                                              ESP=Factor divisa];
                                                   DecimalPlaces=0:15;
                                                   MinValue=0;
                                                   Editable=No }
    { 34  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   OnValidate=BEGIN
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Customer Price Group"));
                                                              END;

                                                   CaptionML=[ENU=Customer Price Group;
                                                              ESP=Grupo precio cliente] }
    { 35  ;   ;Prices Including VAT;Boolean       ;OnValidate=VAR
                                                                SalesLine@1000 : Record 37;
                                                                Currency@1001 : Record 4;
                                                                ConfirmManagement@1006 : Codeunit 27;
                                                                RecalculatePrice@1002 : Boolean;
                                                                VatFactor@1005 : Decimal;
                                                                LineInvDiscAmt@1004 : Decimal;
                                                                InvDiscRounding@1003 : Decimal;
                                                              BEGIN
                                                                TestStatusOpen;

                                                                IF "Prices Including VAT" <> xRec."Prices Including VAT" THEN BEGIN
                                                                  SalesLine.SETRANGE("Document Type","Document Type");
                                                                  SalesLine.SETRANGE("Document No.","No.");
                                                                  SalesLine.SETFILTER("Job Contract Entry No.",'<>%1',0);
                                                                  IF SalesLine.FIND('-') THEN BEGIN
                                                                    SalesLine.TESTFIELD("Job No.",'');
                                                                    SalesLine.TESTFIELD("Job Contract Entry No.",0);
                                                                  END;

                                                                  SalesLine.RESET;
                                                                  SalesLine.SETRANGE("Document Type","Document Type");
                                                                  SalesLine.SETRANGE("Document No.","No.");
                                                                  SalesLine.SETFILTER("Unit Price",'<>%1',0);
                                                                  SalesLine.SETFILTER("VAT %",'<>%1',0);
                                                                  IF SalesLine.FINDFIRST THEN BEGIN
                                                                    IF GetHideValidationDialog OR NOT GUIALLOWED THEN
                                                                      RecalculatePrice := TRUE
                                                                    ELSE
                                                                      RecalculatePrice :=
                                                                        ConfirmManagement.ConfirmProcess(
                                                                          STRSUBSTNO(
                                                                            Text024,
                                                                            FIELDCAPTION("Prices Including VAT"),SalesLine.FIELDCAPTION("Unit Price")),
                                                                          TRUE);
                                                                    OnAfterConfirmSalesPrice(Rec,SalesLine,RecalculatePrice);
                                                                    SalesLine.SetSalesHeader(Rec);

                                                                    Currency.Initialize("Currency Code");
                                                                    SalesLine.LOCKTABLE;
                                                                    LOCKTABLE;
                                                                    SalesLine.FINDSET;
                                                                    REPEAT
                                                                      SalesLine.TESTFIELD("Quantity Invoiced",0);
                                                                      SalesLine.TESTFIELD("Prepmt. Amt. Inv.",0);
                                                                      IF NOT RecalculatePrice THEN BEGIN
                                                                        SalesLine."VAT Difference" := 0;
                                                                        SalesLine.UpdateAmounts;
                                                                      END ELSE BEGIN
                                                                        VatFactor := 1 + SalesLine."VAT %" / 100;
                                                                        IF VatFactor = 0 THEN
                                                                          VatFactor := 1;
                                                                        IF NOT "Prices Including VAT" THEN
                                                                          VatFactor := 1 / VatFactor;
                                                                        SalesLine."Unit Price" :=
                                                                          ROUND(SalesLine."Unit Price" * VatFactor,Currency."Unit-Amount Rounding Precision");
                                                                        SalesLine."Line Discount Amount" :=
                                                                          ROUND(
                                                                            SalesLine.Quantity * SalesLine."Unit Price" * SalesLine."Line Discount %" / 100,
                                                                            Currency."Amount Rounding Precision");
                                                                        LineInvDiscAmt := InvDiscRounding + SalesLine."Inv. Discount Amount" * VatFactor;
                                                                        SalesLine."Inv. Discount Amount" := ROUND(LineInvDiscAmt,Currency."Amount Rounding Precision");
                                                                        InvDiscRounding := LineInvDiscAmt - SalesLine."Inv. Discount Amount";
                                                                        IF "Prices Including VAT" THEN
                                                                          SalesLine."Line Amount" := SalesLine."Amount Including VAT" + SalesLine."Inv. Discount Amount"
                                                                        ELSE
                                                                          SalesLine."Line Amount" := SalesLine.Amount + SalesLine."Inv. Discount Amount";
                                                                      END;
                                                                      OnValidatePricesIncludingVATOnBeforeSalesLineModify(Rec,SalesLine,Currency,RecalculatePrice);
                                                                      SalesLine.MODIFY;
                                                                    UNTIL SalesLine.NEXT = 0;
                                                                  END;
                                                                  OnAfterChangePricesIncludingVAT(Rec);
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Prices Including VAT;
                                                              ESP=Precios IVA incluido] }
    { 37  ;   ;Invoice Disc. Code  ;Code20        ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Invoice Disc. Code"));
                                                              END;

                                                   AccessByPermission=TableData 19=R;
                                                   CaptionML=[ENU=Invoice Disc. Code;
                                                              ESP=C¢d. dto. factura] }
    { 40  ;   ;Customer Disc. Group;Code20        ;TableRelation="Customer Discount Group";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Customer Disc. Group"));
                                                              END;

                                                   CaptionML=[ENU=Customer Disc. Group;
                                                              ESP=Grupo dto. cliente] }
    { 41  ;   ;Language Code       ;Code10        ;TableRelation=Language;
                                                   OnValidate=BEGIN
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Language Code"));
                                                              END;

                                                   CaptionML=[ENU=Language Code;
                                                              ESP=C¢d. idioma] }
    { 43  ;   ;Salesperson Code    ;Code20        ;TableRelation=Salesperson/Purchaser;
                                                   OnValidate=VAR
                                                                ApprovalEntry@1001 : Record 454;
                                                              BEGIN
                                                                ValidateSalesPersonOnSalesHeader(Rec,FALSE,FALSE);

                                                                ApprovalEntry.SETRANGE("Table ID",DATABASE::"Sales Header");
                                                                ApprovalEntry.SETRANGE("Document Type","Document Type");
                                                                ApprovalEntry.SETRANGE("Document No.","No.");
                                                                ApprovalEntry.SETFILTER(Status,'%1|%2',ApprovalEntry.Status::Created,ApprovalEntry.Status::Open);
                                                                IF NOT ApprovalEntry.ISEMPTY THEN
                                                                  ERROR(Text053,FIELDCAPTION("Salesperson Code"));

                                                                CreateDim(
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");
                                                              END;

                                                   CaptionML=[ENU=Salesperson Code;
                                                              ESP=C¢d. vendedor] }
    { 45  ;   ;Order Class         ;Code10        ;CaptionML=[ENU=Order Class;
                                                              ESP=Clase pedido] }
    { 46  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Comment Line" WHERE (Document Type=FIELD(Document Type),
                                                                                                 No.=FIELD(No.),
                                                                                                 Document Line No.=CONST(0)));
                                                   CaptionML=[ENU=Comment;
                                                              ESP=Comentario];
                                                   Editable=No }
    { 47  ;   ;No. Printed         ;Integer       ;CaptionML=[ENU=No. Printed;
                                                              ESP=N§ copias impresas];
                                                   Editable=No }
    { 51  ;   ;On Hold             ;Code3         ;CaptionML=[ENU=On Hold;
                                                              ESP=Esperar] }
    { 52  ;   ;Applies-to Doc. Type;Option        ;CaptionML=[ENU=Applies-to Doc. Type;
                                                              ESP=Liq. por tipo documento];
                                                   OptionCaptionML=[ENU=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill";
                                                                    ESP=" ,Pago,Factura,Abono,Docs. inter‚s,Recordatorio,Reembolso,,,,,,,,,,,,,,,Efecto"];
                                                   OptionString=[ ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill] }
    { 53  ;   ;Applies-to Doc. No. ;Code20        ;OnValidate=BEGIN
                                                                IF "Applies-to Doc. No." <> '' THEN
                                                                  TESTFIELD("Bal. Account No.",'');

                                                                IF ("Applies-to Doc. No." <> xRec."Applies-to Doc. No.") AND (xRec."Applies-to Doc. No." <> '') AND
                                                                   ("Applies-to Doc. No." <> '')
                                                                THEN BEGIN
                                                                  CustLedgEntry.SetAmountToApply("Applies-to Doc. No.","Bill-to Customer No.","Applies-to Bill No.");
                                                                  CustLedgEntry.SetAmountToApply(xRec."Applies-to Doc. No.","Bill-to Customer No.","Applies-to Bill No.");
                                                                END ELSE
                                                                  IF ("Applies-to Doc. No." <> xRec."Applies-to Doc. No.") AND (xRec."Applies-to Doc. No." = '') THEN
                                                                    CustLedgEntry.SetAmountToApply("Applies-to Doc. No.","Bill-to Customer No.","Applies-to Bill No.")
                                                                  ELSE
                                                                    IF ("Applies-to Doc. No." <> xRec."Applies-to Doc. No.") AND ("Applies-to Doc. No." = '') THEN
                                                                      CustLedgEntry.SetAmountToApply(xRec."Applies-to Doc. No.","Bill-to Customer No.","Applies-to Bill No.");
                                                              END;

                                                   OnLookup=VAR
                                                              GenJnlLine@1000 : Record 81;
                                                              GenJnlApply@1002 : Codeunit 225;
                                                              ApplyCustEntries@1001 : Page 232;
                                                            BEGIN
                                                              TESTFIELD("Bal. Account No.",'');
                                                              CustLedgEntry.SetApplyToFilters("Bill-to Customer No.","Applies-to Doc. Type","Applies-to Doc. No.","Applies-to Bill No.",Amount);
                                                              OnAfterSetApplyToFilters(CustLedgEntry,Rec);

                                                              ApplyCustEntries.SetSales(Rec,CustLedgEntry,SalesHeader.FIELDNO("Applies-to Doc. No."));
                                                              ApplyCustEntries.SETTABLEVIEW(CustLedgEntry);
                                                              ApplyCustEntries.SETRECORD(CustLedgEntry);
                                                              ApplyCustEntries.LOOKUPMODE(TRUE);
                                                              IF ApplyCustEntries.RUNMODAL = ACTION::LookupOK THEN BEGIN
                                                                ApplyCustEntries.GetCustLedgEntry(CustLedgEntry);
                                                                GenJnlApply.CheckAgainstApplnCurrency(
                                                                  "Currency Code",CustLedgEntry."Currency Code",GenJnlLine."Account Type"::Customer,TRUE);
                                                                "Applies-to Doc. Type" := CustLedgEntry."Document Type";
                                                                "Applies-to Doc. No." := CustLedgEntry."Document No.";
                                                                "Applies-to Bill No." := CustLedgEntry."Bill No.";
                                                                OnAfterAppliesToDocNoOnLookup(Rec,CustLedgEntry);
                                                              END;
                                                              CLEAR(ApplyCustEntries);
                                                            END;

                                                   CaptionML=[ENU=Applies-to Doc. No.;
                                                              ESP=Liq. por n§ documento] }
    { 55  ;   ;Bal. Account No.    ;Code20        ;TableRelation=IF (Bal. Account Type=CONST(G/L Account)) "G/L Account"
                                                                 ELSE IF (Bal. Account Type=CONST(Bank Account)) "Bank Account";
                                                   OnValidate=BEGIN
                                                                IF "Bal. Account No." <> '' THEN
                                                                  CASE "Bal. Account Type" OF
                                                                    "Bal. Account Type"::"G/L Account":
                                                                      BEGIN
                                                                        GLAcc.GET("Bal. Account No.");
                                                                        GLAcc.CheckGLAcc;
                                                                        GLAcc.TESTFIELD("Direct Posting",TRUE);
                                                                      END;
                                                                    "Bal. Account Type"::"Bank Account":
                                                                      BEGIN
                                                                        BankAcc.GET("Bal. Account No.");
                                                                        BankAcc.TESTFIELD(Blocked,FALSE);
                                                                        BankAcc.TESTFIELD("Currency Code","Currency Code");
                                                                      END;
                                                                  END;
                                                                "Bank Bal. Account Code" := ''; //  VNTES
                                                              END;

                                                   CaptionML=[ENU=Bal. Account No.;
                                                              ESP=Cta. contrapartida] }
    { 56  ;   ;Recalculate Invoice Disc.;Boolean  ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Document No.=FIELD(No.),
                                                                                         Recalculate Invoice Disc.=CONST(Yes)));
                                                   CaptionML=[ENU=Recalculate Invoice Disc.;
                                                              ESP=Recalcular dto. en la factura];
                                                   Editable=No }
    { 57  ;   ;Ship                ;Boolean       ;CaptionML=[ENU=Ship;
                                                              ESP=Env¡o];
                                                   Editable=No }
    { 58  ;   ;Invoice             ;Boolean       ;CaptionML=[ENU=Invoice;
                                                              ESP=Factura] }
    { 59  ;   ;Print Posted Documents;Boolean     ;CaptionML=[ENU=Print Posted Documents;
                                                              ESP=Imprimir documentos registrados] }
    { 60  ;   ;Amount              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line".Amount WHERE (Document Type=FIELD(Document Type),
                                                                                              Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 61  ;   ;Amount Including VAT;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Amount Including VAT" WHERE (Document Type=FIELD(Document Type),
                                                                                                              Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Amount Including VAT;
                                                              ESP=Importe IVA incl.];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 62  ;   ;Shipping No.        ;Code20        ;CaptionML=[ENU=Shipping No.;
                                                              ESP=N§ sig. albar n venta] }
    { 63  ;   ;Posting No.         ;Code20        ;CaptionML=[ENU=Posting No.;
                                                              ESP=N§ sig. factura] }
    { 64  ;   ;Last Shipping No.   ;Code20        ;TableRelation="Sales Shipment Header";
                                                   CaptionML=[ENU=Last Shipping No.;
                                                              ESP=élt. n§ albar n venta];
                                                   Editable=No }
    { 65  ;   ;Last Posting No.    ;Code20        ;TableRelation="Sales Invoice Header";
                                                   CaptionML=[ENU=Last Posting No.;
                                                              ESP=élt. n§ factura];
                                                   Editable=No }
    { 66  ;   ;Prepayment No.      ;Code20        ;CaptionML=[ENU=Prepayment No.;
                                                              ESP=N§ prepago] }
    { 67  ;   ;Last Prepayment No. ;Code20        ;TableRelation="Sales Invoice Header";
                                                   CaptionML=[ENU=Last Prepayment No.;
                                                              ESP=N§ £ltimo prepago] }
    { 68  ;   ;Prepmt. Cr. Memo No.;Code20        ;CaptionML=[ENU=Prepmt. Cr. Memo No.;
                                                              ESP=N§ abono prepago] }
    { 69  ;   ;Last Prepmt. Cr. Memo No.;Code20   ;TableRelation="Sales Cr.Memo Header";
                                                   CaptionML=[ENU=Last Prepmt. Cr. Memo No.;
                                                              ESP=N§ £ltimo abono prepago] }
    { 70  ;   ;VAT Registration No.;Text20        ;OnValidate=VAR
                                                                Customer@1000 : Record 18;
                                                                VATRegistrationLog@1200 : Record 249;
                                                                VATRegistrationNoFormat@1300 : Record 381;
                                                                VATRegNoSrvConfig@1001 : Record 248;
                                                                VATRegistrationLogMgt@1400 : Codeunit 249;
                                                                ResultRecRef@1050 : RecordRef;
                                                                ApplicableCountryCode@1600 : Code[10];
                                                              BEGIN
                                                                "VAT Registration No." := UPPERCASE("VAT Registration No.");
                                                                IF "VAT Registration No." = xRec."VAT Registration No." THEN
                                                                  EXIT;

                                                                GLSetup.GetRecordOnce;
                                                                CASE GLSetup."Bill-to/Sell-to VAT Calc." OF
                                                                  GLSetup."Bill-to/Sell-to VAT Calc."::"Bill-to/Pay-to No.":
                                                                    IF NOT Customer.GET("Bill-to Customer No.") THEN
                                                                      EXIT;
                                                                  GLSetup."Bill-to/Sell-to VAT Calc."::"Sell-to/Buy-from No.":
                                                                    IF NOT Customer.GET("Sell-to Customer No.") THEN
                                                                      EXIT;
                                                                END;

                                                                IF "VAT Registration No." = Customer."VAT Registration No." THEN
                                                                  EXIT;

                                                                IF NOT VATRegistrationNoFormat.Test("VAT Registration No.",Customer."Country/Region Code",Customer."No.",DATABASE::Customer) THEN
                                                                  EXIT;

                                                                Customer."VAT Registration No." := "VAT Registration No.";
                                                                ApplicableCountryCode := Customer."Country/Region Code";
                                                                IF ApplicableCountryCode = '' THEN
                                                                  ApplicableCountryCode := VATRegistrationNoFormat."Country/Region Code";

                                                                IF NOT VATRegNoSrvConfig.VATRegNoSrvIsEnabled THEN BEGIN
                                                                  Customer.MODIFY(TRUE);
                                                                  EXIT;
                                                                END;

                                                                VATRegistrationLogMgt.CheckVIESForVATNo(ResultRecRef,VATRegistrationLog,Customer,Customer."No.",
                                                                  ApplicableCountryCode,VATRegistrationLog."Account Type"::Customer);

                                                                IF VATRegistrationLog.Status = VATRegistrationLog.Status::Valid THEN BEGIN
                                                                  MESSAGE(ValidVATNoMsg);
                                                                  Customer.MODIFY(TRUE);
                                                                END ELSE
                                                                  MESSAGE(InvalidVatRegNoMsg);
                                                              END;

                                                   CaptionML=[ENU=VAT Registration No.;
                                                              ESP=CIF/NIF] }
    { 71  ;   ;Combine Shipments   ;Boolean       ;CaptionML=[ENU=Combine Shipments;
                                                              ESP=Fact. autom tica] }
    { 73  ;   ;Reason Code         ;Code10        ;TableRelation="Reason Code";
                                                   CaptionML=[ENU=Reason Code;
                                                              ESP=C¢d. auditor¡a] }
    { 74  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF xRec."Gen. Bus. Posting Group" <> "Gen. Bus. Posting Group" THEN BEGIN
                                                                  IF GenBusPostingGrp.ValidateVatBusPostingGroup(GenBusPostingGrp,"Gen. Bus. Posting Group") THEN
                                                                    "VAT Bus. Posting Group" := GenBusPostingGrp."Def. VAT Bus. Posting Group";
                                                                  RecreateSalesLines(FIELDCAPTION("Gen. Bus. Posting Group"));
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESP=Grupo registro neg. gen.] }
    { 75  ;   ;EU 3-Party Trade    ;Boolean       ;CaptionML=[ENU=EU 3-Party Trade;
                                                              ESP=Op. triangular] }
    { 76  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   OnValidate=BEGIN
                                                                UpdateSalesLinesByFieldNo(FIELDNO("Transaction Type"),FALSE);
                                                              END;

                                                   CaptionML=[ENU=Transaction Type;
                                                              ESP=Naturaleza transacci¢n] }
    { 77  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   OnValidate=BEGIN
                                                                UpdateSalesLinesByFieldNo(FIELDNO("Transport Method"),FALSE);
                                                              END;

                                                   CaptionML=[ENU=Transport Method;
                                                              ESP=Modo transporte] }
    { 78  ;   ;VAT Country/Region Code;Code10     ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=VAT Country/Region Code;
                                                              ESP=C¢d. IVA pa¡s/regi¢n] }
    { 79  ;   ;Sell-to Customer Name;Text100      ;TableRelation=Customer.Name;
                                                   OnValidate=VAR
                                                                Customer@1000 : Record 18;
                                                                IdentityManagement@1001 : Codeunit 9801;
                                                              BEGIN
                                                                IF NOT IdentityManagement.IsInvAppId AND ShouldLookForCustomerByName("Sell-to Customer No.") THEN
                                                                  VALIDATE("Sell-to Customer No.",Customer.GetCustNo("Sell-to Customer Name"));
                                                                GetShippingTime(FIELDNO("Sell-to Customer Name"));
                                                              END;

                                                   OnLookup=VAR
                                                              Customer@1000 : Record 18;
                                                            BEGIN
                                                              IF "Sell-to Customer No." <> '' THEN
                                                                Customer.GET("Sell-to Customer No.");

                                                              IF Customer.LookupCustomer(Customer) THEN BEGIN
                                                                "Sell-to Customer Name" := Customer.Name;
                                                                { 75971.i
                                                                "Sell-to Customer No." := Customer."No.";
                                                                75971.f }
                                                                VALIDATE("Sell-to Customer No.",Customer."No.");  // 75971
                                                              END;
                                                            END;

                                                   ValidateTableRelation=No;
                                                   CaptionML=[ENU=Sell-to Customer Name;
                                                              ESP=Venta a-Nombre] }
    { 80  ;   ;Sell-to Customer Name 2;Text50     ;CaptionML=[ENU=Sell-to Customer Name 2;
                                                              ESP=Venta a-Nombre 2] }
    { 81  ;   ;Sell-to Address     ;Text100       ;OnValidate=BEGIN
                                                                UpdateShipToAddressFromSellToAddress(FIELDNO("Ship-to Address"));
                                                                ModifyCustomerAddress;
                                                              END;

                                                   CaptionML=[ENU=Sell-to Address;
                                                              ESP=Venta a-Direcci¢n] }
    { 82  ;   ;Sell-to Address 2   ;Text50        ;OnValidate=BEGIN
                                                                UpdateShipToAddressFromSellToAddress(FIELDNO("Ship-to Address 2"));
                                                                ModifyCustomerAddress;
                                                              END;

                                                   CaptionML=[ENU=Sell-to Address 2;
                                                              ESP=Venta a-Direcci¢n 2] }
    { 83  ;   ;Sell-to City        ;Text30        ;TableRelation=IF (Sell-to Country/Region Code=CONST()) "Post Code".City
                                                                 ELSE IF (Sell-to Country/Region Code=FILTER(<>'')) "Post Code".City WHERE (Country/Region Code=FIELD(Sell-to Country/Region Code));
                                                   OnValidate=BEGIN
                                                                PostCode.ValidateCity(
                                                                  "Sell-to City","Sell-to Post Code","Sell-to County","Sell-to Country/Region Code",(CurrFieldNo <> 0) AND GUIALLOWED);
                                                                UpdateShipToAddressFromSellToAddress(FIELDNO("Ship-to City"));
                                                                ModifyCustomerAddress;
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookupPostCode("Sell-to City","Sell-to Post Code","Sell-to County","Sell-to Country/Region Code");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Sell-to City;
                                                              ESP=Venta a-Poblaci¢n] }
    { 84  ;   ;Sell-to Contact     ;Text100       ;OnValidate=BEGIN
                                                                ModifyCustomerAddress;
                                                              END;

                                                   OnLookup=VAR
                                                              Contact@1001 : Record 5050;
                                                            BEGIN
                                                              IF "Document Type" <> "Document Type"::Quote THEN
                                                                IF "Sell-to Customer No." = '' THEN
                                                                  EXIT;

                                                              LookupContact("Sell-to Customer No.","Sell-to Contact No.",Contact);
                                                              IF PAGE.RUNMODAL(0,Contact) = ACTION::LookupOK THEN
                                                                VALIDATE("Sell-to Contact No.",Contact."No.");
                                                            END;

                                                   CaptionML=[ENU=Sell-to Contact;
                                                              ESP=Venta a-Atenci¢n] }
    { 85  ;   ;Bill-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   OnValidate=BEGIN
                                                                PostCode.ValidatePostCode(
                                                                  "Bill-to City","Bill-to Post Code","Bill-to County","Bill-to Country/Region Code",(CurrFieldNo <> 0) AND GUIALLOWED);
                                                                ModifyBillToCustomerAddress;
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookupPostCode("Bill-to City","Bill-to Post Code","Bill-to County","Bill-to Country/Region Code");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Bill-to Post Code;
                                                              ESP=Fact. a-C.P.] }
    { 86  ;   ;Bill-to County      ;Text30        ;OnValidate=BEGIN
                                                                ModifyBillToCustomerAddress;
                                                              END;

                                                   CaptionML=[ENU=Bill-to County;
                                                              ESP=Fact. a-Provincia];
                                                   CaptionClass='5,1,' + "Bill-to Country/Region Code" }
    { 87  ;   ;Bill-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   OnValidate=BEGIN
                                                                ModifyBillToCustomerAddress;
                                                              END;

                                                   CaptionML=[ENU=Bill-to Country/Region Code;
                                                              ESP=Fact. a-C¢d. pa¡s/regi¢n] }
    { 88  ;   ;Sell-to Post Code   ;Code20        ;TableRelation=IF (Sell-to Country/Region Code=CONST()) "Post Code"
                                                                 ELSE IF (Sell-to Country/Region Code=FILTER(<>'')) "Post Code" WHERE (Country/Region Code=FIELD(Sell-to Country/Region Code));
                                                   OnValidate=BEGIN
                                                                PostCode.ValidatePostCode(
                                                                  "Sell-to City","Sell-to Post Code","Sell-to County","Sell-to Country/Region Code",(CurrFieldNo <> 0) AND GUIALLOWED);
                                                                UpdateShipToAddressFromSellToAddress(FIELDNO("Ship-to Post Code"));
                                                                ModifyCustomerAddress;
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookupPostCode("Sell-to City","Sell-to Post Code","Sell-to County","Sell-to Country/Region Code");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Sell-to Post Code;
                                                              ESP=Venta a-C.P.] }
    { 89  ;   ;Sell-to County      ;Text30        ;OnValidate=BEGIN
                                                                UpdateShipToAddressFromSellToAddress(FIELDNO("Ship-to County"));
                                                                ModifyCustomerAddress;
                                                              END;

                                                   CaptionML=[ENU=Sell-to County;
                                                              ESP=Venta a-Provincia];
                                                   CaptionClass='5,1,' + "Sell-to Country/Region Code" }
    { 90  ;   ;Sell-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   OnValidate=BEGIN
                                                                UpdateShipToAddressFromSellToAddress(FIELDNO("Ship-to Country/Region Code"));
                                                                ModifyCustomerAddress;
                                                                VALIDATE("Ship-to Country/Region Code");
                                                              END;

                                                   CaptionML=[ENU=Sell-to Country/Region Code;
                                                              ESP=Venta a-C¢d. pa¡s/regi¢n] }
    { 91  ;   ;Ship-to Post Code   ;Code20        ;TableRelation=IF (Ship-to Country/Region Code=CONST()) "Post Code"
                                                                 ELSE IF (Ship-to Country/Region Code=FILTER(<>'')) "Post Code" WHERE (Country/Region Code=FIELD(Ship-to Country/Region Code));
                                                   OnValidate=BEGIN
                                                                PostCode.ValidatePostCode(
                                                                  "Ship-to City","Ship-to Post Code","Ship-to County","Ship-to Country/Region Code",(CurrFieldNo <> 0) AND GUIALLOWED);
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookupPostCode("Ship-to City","Ship-to Post Code","Ship-to County","Ship-to Country/Region Code");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Ship-to Post Code;
                                                              ESP=C.P. direcci¢n de env¡o] }
    { 92  ;   ;Ship-to County      ;Text30        ;CaptionML=[ENU=Ship-to County;
                                                              ESP=Provincia direcci¢n de env¡o];
                                                   CaptionClass='5,1,' + "Ship-to Country/Region Code" }
    { 93  ;   ;Ship-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   OnValidate=BEGIN
                                                                IF ("Bill-to Country/Region Code" <> '') AND ("Sell-to Customer No." <> "Bill-to Customer No.") THEN
                                                                  "VAT Country/Region Code" := "Bill-to Country/Region Code"
                                                                ELSE
                                                                  IF "Ship-to Country/Region Code" <> '' THEN
                                                                    "VAT Country/Region Code" := "Ship-to Country/Region Code"
                                                                  ELSE
                                                                    "VAT Country/Region Code" := "Sell-to Country/Region Code";
                                                              END;

                                                   CaptionML=[ENU=Ship-to Country/Region Code;
                                                              ESP=C¢d. pa¡s/regi¢n direcci¢n de env¡o] }
    { 94  ;   ;Bal. Account Type   ;Option        ;CaptionML=[ENU=Bal. Account Type;
                                                              ESP=Tipo contrapartida];
                                                   OptionCaptionML=[ENU=G/L Account,Bank Account;
                                                                    ESP=Cuenta,Banco];
                                                   OptionString=G/L Account,Bank Account }
    { 97  ;   ;Exit Point          ;Code10        ;TableRelation="Entry/Exit Point";
                                                   OnValidate=BEGIN
                                                                UpdateSalesLinesByFieldNo(FIELDNO("Exit Point"),FALSE);
                                                              END;

                                                   CaptionML=[ENU=Exit Point;
                                                              ESP=Puerto/Aerop. carga] }
    { 98  ;   ;Correction          ;Boolean       ;CaptionML=[ENU=Correction;
                                                              ESP=Correcci¢n] }
    { 99  ;   ;Document Date       ;Date          ;OnValidate=BEGIN
                                                                IF xRec."Document Date" <> "Document Date" THEN
                                                                  UpdateDocumentDate := TRUE;
                                                                VALIDATE("Payment Terms Code");
                                                                VALIDATE("Prepmt. Payment Terms Code");

                                                                IF UpdateDocumentDate AND ("Document Type" = "Document Type"::Quote) AND ("Document Date" <> 0D) THEN
                                                                  CalcQuoteValidUntilDate;
                                                              END;

                                                   CaptionML=[ENU=Document Date;
                                                              ESP=Fecha emisi¢n documento] }
    { 100 ;   ;External Document No.;Code35       ;OnValidate=VAR
                                                                WhseSalesRelease@1000 : Codeunit 5771;
                                                              BEGIN
                                                                IF (xRec."External Document No." <> "External Document No.") AND (Status = Status::Released) AND
                                                                   ("Document Type" IN ["Document Type"::Order,"Document Type"::"Return Order"])
                                                                THEN
                                                                  WhseSalesRelease.UpdateExternalDocNoForReleasedOrder(Rec);
                                                              END;

                                                   CaptionML=[ENU=External Document No.;
                                                              ESP=N§ documento externo] }
    { 101 ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   OnValidate=BEGIN
                                                                UpdateSalesLinesByFieldNo(FIELDNO(Area),FALSE);
                                                              END;

                                                   CaptionML=[ENU=Area;
                                                              ESP=C¢d. provincia] }
    { 102 ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   OnValidate=BEGIN
                                                                UpdateSalesLinesByFieldNo(FIELDNO("Transaction Specification"),FALSE);
                                                              END;

                                                   CaptionML=[ENU=Transaction Specification;
                                                              ESP=Especificaci¢n transacci¢n] }
    { 104 ;   ;Payment Method Code ;Code10        ;TableRelation=IF (POS Code=FILTER(<>'')) "Forma pago TPV"."C¢d. forma pago" WHERE (C¢d. TPV=FIELD(POS Code))
                                                                 ELSE "Payment Method";
                                                   OnValidate=VAR
                                                                SEPADirectDebitMandate@1000 : Record 1230;
                                                              BEGIN
                                                                PaymentMethod.INIT;
                                                                IF "Payment Method Code" <> '' THEN
                                                                  PaymentMethod.GET("Payment Method Code");
                                                                IF PaymentMethod."Direct Debit" THEN BEGIN
                                                                  "Direct Debit Mandate ID" := SEPADirectDebitMandate.GetDefaultMandate("Bill-to Customer No.","Due Date");
                                                                  IF "Payment Terms Code" = '' THEN
                                                                    "Payment Terms Code" := PaymentMethod."Direct Debit Pmt. Terms Code";
                                                                END ELSE
                                                                  "Direct Debit Mandate ID" := '';
                                                                "Bal. Account Type" := PaymentMethod."Bal. Account Type";
                                                                "Bal. Account No." := PaymentMethod."Bal. Account No.";
                                                                GestCodigoVentas.T36ValidatePayment(Rec);// VNTES
                                                                // VNTES.i
                                                                { VNTES "Tipo cta. banco s.c. contrp." := PaymentMethod."Tipo cta. banco s.c. contrp.";
                                                                IF "Tipo cta. banco s.c. contrp." = "Tipo cta. banco s.c. contrp."::"Banco sec. cr‚d." THEN
                                                                  VALIDATE("Cta. contrp. banco s.c.",PaymentMethod."No. banco s.c. contrp.");  VNTES}
                                                                // VNTES.f
                                                                IF "Bal. Account No." <> '' THEN BEGIN
                                                                  TESTFIELD("Applies-to Doc. No.",'');
                                                                  TESTFIELD("Applies-to ID",'');
                                                                  CLEAR("Payment Service Set ID");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Payment Method Code;
                                                              ESP=C¢d. forma pago] }
    { 105 ;   ;Shipping Agent Code ;Code10        ;TableRelation="Shipping Agent";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF xRec."Shipping Agent Code" = "Shipping Agent Code" THEN
                                                                  EXIT;

                                                                "Shipping Agent Service Code" := '';
                                                                GetShippingTime(FIELDNO("Shipping Agent Code"));

                                                                OnValidateShippingAgentCodeOnBeforeUpdateLines(Rec,CurrFieldNo,HideValidationDialog);
                                                                UpdateSalesLinesByFieldNo(FIELDNO("Shipping Agent Code"),CurrFieldNo <> 0);
                                                              END;

                                                   AccessByPermission=TableData 5790=R;
                                                   CaptionML=[ENU=Shipping Agent Code;
                                                              ESP=C¢d. transportista] }
    { 106 ;   ;Package Tracking No.;Text30        ;CaptionML=[ENU=Package Tracking No.;
                                                              ESP=N§ seguimiento bulto] }
    { 107 ;   ;No. Series          ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. Series;
                                                              ESP=Nos. serie];
                                                   Editable=No }
    { 108 ;   ;Posting No. Series  ;Code20        ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Posting No. Series" <> '' THEN BEGIN
                                                                  GetSalesSetup;
                                                                  TestNoSeries;
                                                                  NoSeriesMgt.TestSeries(GetPostingNoSeriesCode,"Posting No. Series");
                                                                END;
                                                                TESTFIELD("Posting No.",'');
                                                              END;

                                                   OnLookup=BEGIN
                                                              WITH SalesHeader DO BEGIN
                                                                SalesHeader := Rec;
                                                                GetSalesSetup;
                                                                TestNoSeries;
                                                                IF NoSeriesMgt.LookupSeries(GetPostingNoSeriesCode,"Posting No. Series") THEN
                                                                  VALIDATE("Posting No. Series");
                                                                Rec := SalesHeader;
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Posting No. Series;
                                                              ESP=N§ serie registro] }
    { 109 ;   ;Shipping No. Series ;Code20        ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Shipping No. Series" <> '' THEN BEGIN
                                                                  GetSalesSetup;
                                                                  SalesSetup.TESTFIELD("Posted Shipment Nos.");
                                                                  NoSeriesMgt.TestSeries(SalesSetup."Posted Shipment Nos.","Shipping No. Series");
                                                                END;
                                                                TESTFIELD("Shipping No.",'');
                                                              END;

                                                   OnLookup=BEGIN
                                                              WITH SalesHeader DO BEGIN
                                                                SalesHeader := Rec;
                                                                GetSalesSetup;
                                                                SalesSetup.TESTFIELD("Posted Shipment Nos.");
                                                                IF NoSeriesMgt.LookupSeries(SalesSetup."Posted Shipment Nos.","Shipping No. Series") THEN
                                                                  VALIDATE("Shipping No. Series");
                                                                Rec := SalesHeader;
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Shipping No. Series;
                                                              ESP=N§ serie alb. venta] }
    { 114 ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                ValidateTaxAreaCode;
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Tax Area Code"));
                                                              END;

                                                   ValidateTableRelation=No;
                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESP=C¢d.  rea impuesto] }
    { 115 ;   ;Tax Liable          ;Boolean       ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Tax Liable"));
                                                              END;

                                                   CaptionML=[ENU=Tax Liable;
                                                              ESP=Sujeto a impuesto] }
    { 116 ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF xRec."VAT Bus. Posting Group" <> "VAT Bus. Posting Group" THEN
                                                                  RecreateSalesLines(FIELDCAPTION("VAT Bus. Posting Group"));
                                                              END;

                                                   CaptionML=[ENU=VAT Bus. Posting Group;
                                                              ESP=Grupo registro IVA neg.] }
    { 117 ;   ;Reserve             ;Option        ;InitValue=Optional;
                                                   AccessByPermission=TableData 27=R;
                                                   CaptionML=[ENU=Reserve;
                                                              ESP=Reserva];
                                                   OptionCaptionML=[ENU=Never,Optional,Always;
                                                                    ESP=Nunca,Opcional,Siempre];
                                                   OptionString=Never,Optional,Always }
    { 118 ;   ;Applies-to ID       ;Code50        ;OnValidate=VAR
                                                                TempCustLedgEntry@1000 : TEMPORARY Record 21;
                                                                CustEntrySetApplID@1001 : Codeunit 101;
                                                              BEGIN
                                                                IF "Applies-to ID" <> '' THEN
                                                                  TESTFIELD("Bal. Account No.",'');
                                                                IF ("Applies-to ID" <> xRec."Applies-to ID") AND (xRec."Applies-to ID" <> '') THEN BEGIN
                                                                  CustLedgEntry.SETCURRENTKEY("Customer No.",Open);
                                                                  CustLedgEntry.SETRANGE("Customer No.","Bill-to Customer No.");
                                                                  CustLedgEntry.SETRANGE(Open,TRUE);
                                                                  CustLedgEntry.SETRANGE("Applies-to ID",xRec."Applies-to ID");
                                                                  IF CustLedgEntry.FINDFIRST THEN
                                                                    CustEntrySetApplID.SetApplId(CustLedgEntry,TempCustLedgEntry,'');
                                                                  CustLedgEntry.RESET;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Applies-to ID;
                                                              ESP=Liq. por id.] }
    { 119 ;   ;VAT Base Discount % ;Decimal       ;OnValidate=BEGIN
                                                                IF NOT (CurrFieldNo IN [0,FIELDNO("Posting Date"),FIELDNO("Document Date")]) THEN
                                                                  TestStatusOpen;
                                                                GLSetup.GET;
                                                                IF "VAT Base Discount %" > GLSetup."VAT Tolerance %" THEN
                                                                  ERROR(
                                                                    Text007,
                                                                    FIELDCAPTION("VAT Base Discount %"),
                                                                    GLSetup.FIELDCAPTION("VAT Tolerance %"),
                                                                    GLSetup.TABLECAPTION);

                                                                IF ("VAT Base Discount %" = xRec."VAT Base Discount %") AND (CurrFieldNo <> 0) THEN
                                                                  EXIT;

                                                                UpdateSalesLineAmounts;
                                                              END;

                                                   CaptionML=[ENU=VAT Base Discount %;
                                                              ESP=% Dto. base IVA];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 120 ;   ;Status              ;Option        ;CaptionML=[ENU=Status;
                                                              ESP=Estado];
                                                   OptionCaptionML=[ENU=Open,Released,Pending Approval,Pending Prepayment;
                                                                    ESP=Abierto,Lanzado,Aprobaci¢n pendiente,Prepago pendiente];
                                                   OptionString=Open,Released,Pending Approval,Pending Prepayment;
                                                   Editable=No }
    { 121 ;   ;Invoice Discount Calculation;Option;CaptionML=[ENU=Invoice Discount Calculation;
                                                              ESP=C lculo descuento factura];
                                                   OptionCaptionML=[ENU=None,%,Amount;
                                                                    ESP=Ninguno,%,Importe];
                                                   OptionString=None,%,Amount;
                                                   Editable=No }
    { 122 ;   ;Invoice Discount Value;Decimal     ;CaptionML=[ENU=Invoice Discount Value;
                                                              ESP=Valor descuento factura];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 123 ;   ;Send IC Document    ;Boolean       ;OnValidate=BEGIN
                                                                IF "Send IC Document" THEN BEGIN
                                                                  IF "Bill-to IC Partner Code" = '' THEN
                                                                    TESTFIELD("Sell-to IC Partner Code");
                                                                  TESTFIELD("IC Direction","IC Direction"::Outgoing);
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Send IC Document;
                                                              ESP=Enviar documento IC] }
    { 124 ;   ;IC Status           ;Option        ;CaptionML=[ENU=IC Status;
                                                              ESP=Estado socio IC];
                                                   OptionCaptionML=[ENU=New,Pending,Sent;
                                                                    ESP=Nuevo,Pendiente,Enviado];
                                                   OptionString=New,Pending,Sent }
    { 125 ;   ;Sell-to IC Partner Code;Code20     ;TableRelation="IC Partner";
                                                   CaptionML=[ENU=Sell-to IC Partner Code;
                                                              ESP=C¢digo IC asociada de venta];
                                                   Editable=No }
    { 126 ;   ;Bill-to IC Partner Code;Code20     ;TableRelation="IC Partner";
                                                   CaptionML=[ENU=Bill-to IC Partner Code;
                                                              ESP=C¢digo IC asociada facturaci¢n];
                                                   Editable=No }
    { 129 ;   ;IC Direction        ;Option        ;OnValidate=BEGIN
                                                                IF "IC Direction" = "IC Direction"::Incoming THEN
                                                                  "Send IC Document" := FALSE;
                                                              END;

                                                   CaptionML=[ENU=IC Direction;
                                                              ESP=Direcci¢n env¡o IC];
                                                   OptionCaptionML=[ENU=Outgoing,Incoming;
                                                                    ESP=Saliente,Entrante];
                                                   OptionString=Outgoing,Incoming }
    { 130 ;   ;Prepayment %        ;Decimal       ;OnValidate=BEGIN
                                                                IF xRec."Prepayment %" <> "Prepayment %" THEN
                                                                  UpdateSalesLinesByFieldNo(FIELDNO("Prepayment %"),CurrFieldNo <> 0);
                                                              END;

                                                   CaptionML=[ENU=Prepayment %;
                                                              ESP=% prepago];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 131 ;   ;Prepayment No. Series;Code20       ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Prepayment No. Series" <> '' THEN BEGIN
                                                                  GetSalesSetup;
                                                                  SalesSetup.TESTFIELD("Posted Prepmt. Inv. Nos.");
                                                                  NoSeriesMgt.TestSeries(GetPostingPrepaymentNoSeriesCode,"Prepayment No. Series");
                                                                END;
                                                                TESTFIELD("Prepayment No.",'');
                                                              END;

                                                   OnLookup=BEGIN
                                                              WITH SalesHeader DO BEGIN
                                                                SalesHeader := Rec;
                                                                GetSalesSetup;
                                                                SalesSetup.TESTFIELD("Posted Prepmt. Inv. Nos.");
                                                                IF NoSeriesMgt.LookupSeries(GetPostingPrepaymentNoSeriesCode,"Prepayment No. Series") THEN
                                                                  VALIDATE("Prepayment No. Series");
                                                                Rec := SalesHeader;
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Prepayment No. Series;
                                                              ESP=N§ serie prepago] }
    { 132 ;   ;Compress Prepayment ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Compress Prepayment;
                                                              ESP=Compresi¢n prepago] }
    { 133 ;   ;Prepayment Due Date ;Date          ;OnValidate=BEGIN
                                                                IF PaymentTerms.GET("Prepmt. Payment Terms Code") THEN
                                                                  PaymentTerms.VerifyMaxNoDaysTillDueDate("Prepayment Due Date","Document Date",FIELDCAPTION("Prepayment Due Date"));
                                                              END;

                                                   CaptionML=[ENU=Prepayment Due Date;
                                                              ESP=Fecha vencimiento prepago] }
    { 134 ;   ;Prepmt. Cr. Memo No. Series;Code20 ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Prepmt. Cr. Memo No." <> '' THEN BEGIN
                                                                  GetSalesSetup;
                                                                  SalesSetup.TESTFIELD("Posted Prepmt. Cr. Memo Nos.");
                                                                  NoSeriesMgt.TestSeries(GetPostingPrepaymentNoSeriesCode,"Prepmt. Cr. Memo No. Series");
                                                                END;
                                                                TESTFIELD("Prepmt. Cr. Memo No.",'');
                                                              END;

                                                   OnLookup=BEGIN
                                                              WITH SalesHeader DO BEGIN
                                                                SalesHeader := Rec;
                                                                GetSalesSetup;
                                                                SalesSetup.TESTFIELD("Posted Prepmt. Cr. Memo Nos.");
                                                                IF NoSeriesMgt.LookupSeries(GetPostingPrepaymentNoSeriesCode,"Prepmt. Cr. Memo No. Series") THEN
                                                                  VALIDATE("Prepmt. Cr. Memo No. Series");
                                                                Rec := SalesHeader;
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Prepmt. Cr. Memo No. Series;
                                                              ESP=N§ serie abono prepago] }
    { 135 ;   ;Prepmt. Posting Description;Text100;CaptionML=[ENU=Prepmt. Posting Description;
                                                              ESP=Texto registro prepago] }
    { 138 ;   ;Prepmt. Pmt. Discount Date;Date    ;CaptionML=[ENU=Prepmt. Pmt. Discount Date;
                                                              ESP=Fecha descuento prepago] }
    { 139 ;   ;Prepmt. Payment Terms Code;Code10  ;TableRelation="Payment Terms";
                                                   OnValidate=VAR
                                                                PaymentTerms@1000 : Record 3;
                                                                IsHandled@1001 : Boolean;
                                                              BEGIN
                                                                IF ("Prepmt. Payment Terms Code" <> '') AND ("Document Date" <> 0D) THEN BEGIN
                                                                  PaymentTerms.GET("Prepmt. Payment Terms Code");
                                                                  IF IsCreditDocType AND NOT PaymentTerms."Calc. Pmt. Disc. on Cr. Memos" THEN BEGIN
                                                                    VALIDATE("Prepayment Due Date","Document Date");
                                                                    VALIDATE("Prepmt. Pmt. Discount Date",0D);
                                                                    VALIDATE("Prepmt. Payment Discount %",0);
                                                                  END ELSE BEGIN
                                                                    IsHandled := FALSE;
                                                                    OnValidatePaymentTermsCodeOnBeforeCalcDueDate(Rec,xRec,FIELDNO("Prepmt. Payment Terms Code"),CurrFieldNo,IsHandled);
                                                                    IF NOT IsHandled THEN BEGIN
                                                                      "Prepayment Due Date" := CALCDATE(PaymentTerms."Due Date Calculation","Document Date");
                                                                      AdjustDueDate.SalesAdjustDueDate(
                                                                        "Prepayment Due Date","Document Date",PaymentTerms.CalculateMaxDueDate("Document Date"),"Bill-to Customer No.");
                                                                    END;
                                                                    IsHandled := FALSE;
                                                                    OnValidatePaymentTermsCodeOnBeforeCalcPmtDiscDate(Rec,xRec,FIELDNO("Prepmt. Payment Terms Code"),CurrFieldNo,IsHandled);
                                                                    IF NOT IsHandled THEN
                                                                      "Prepmt. Pmt. Discount Date" := CALCDATE(PaymentTerms."Discount Date Calculation","Document Date");
                                                                    GLSetup.GET;
                                                                    IF GLSetup."Payment Discount Type" = GLSetup."Payment Discount Type"::"Calc. Pmt. Disc. on Lines" THEN
                                                                      VALIDATE("Prepmt. Payment Discount %",0)
                                                                    ELSE BEGIN
                                                                      IF NOT UpdateDocumentDate THEN
                                                                        VALIDATE("Prepmt. Payment Discount %",PaymentTerms."Discount %");
                                                                    END;
                                                                  END;
                                                                END ELSE BEGIN
                                                                  VALIDATE("Prepayment Due Date","Document Date");
                                                                  IF NOT UpdateDocumentDate THEN BEGIN
                                                                    VALIDATE("Prepmt. Pmt. Discount Date",0D);
                                                                    VALIDATE("Prepmt. Payment Discount %",0);
                                                                  END;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Prepmt. Payment Terms Code;
                                                              ESP=C¢digo t‚rminos prepago] }
    { 140 ;   ;Prepmt. Payment Discount %;Decimal ;OnValidate=BEGIN
                                                                IF NOT (CurrFieldNo IN [0,FIELDNO("Posting Date"),FIELDNO("Document Date")]) THEN
                                                                  TestStatusOpen;
                                                                GLSetup.GET;
                                                                IF NOT ("Prepmt. Payment Discount %" = 0) AND
                                                                   (GLSetup."Payment Discount Type" = GLSetup."Payment Discount Type"::"Calc. Pmt. Disc. on Lines")
                                                                THEN
                                                                  ERROR(Text10700,FIELDCAPTION("Prepmt. Payment Discount %"),GLSetup.FIELDCAPTION("Payment Discount Type"),
                                                                    GLSetup."Payment Discount Type");
                                                                IF "Payment Discount %" < GLSetup."VAT Tolerance %" THEN
                                                                  "VAT Base Discount %" := "Payment Discount %"
                                                                ELSE
                                                                  "VAT Base Discount %" := GLSetup."VAT Tolerance %";
                                                                VALIDATE("VAT Base Discount %");
                                                              END;

                                                   CaptionML=[ENU=Prepmt. Payment Discount %;
                                                              ESP=% descuento prepago];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 151 ;   ;Quote No.           ;Code20        ;CaptionML=[ENU=Quote No.;
                                                              ESP=N§ oferta];
                                                   Editable=No }
    { 152 ;   ;Quote Valid Until Date;Date        ;CaptionML=[ENU=Quote Valid To Date;
                                                              ESP=Fecha final v lida de oferta] }
    { 153 ;   ;Quote Sent to Customer;DateTime    ;CaptionML=[ENU=Quote Sent to Customer;
                                                              ESP=Oferta enviada al cliente];
                                                   Editable=No }
    { 154 ;   ;Quote Accepted      ;Boolean       ;OnValidate=BEGIN
                                                                IF "Quote Accepted" THEN BEGIN
                                                                  "Quote Accepted Date" := WORKDATE;
                                                                  OnAfterSalesQuoteAccepted(Rec);
                                                                END ELSE
                                                                  "Quote Accepted Date" := 0D;
                                                              END;

                                                   CaptionML=[ENU=Quote Accepted;
                                                              ESP=Oferta aceptada] }
    { 155 ;   ;Quote Accepted Date ;Date          ;CaptionML=[ENU=Quote Accepted Date;
                                                              ESP=Fecha de oferta aceptada];
                                                   Editable=No }
    { 160 ;   ;Job Queue Status    ;Option        ;OnLookup=VAR
                                                              JobQueueEntry@1000 : Record 472;
                                                            BEGIN
                                                              IF "Job Queue Status" = "Job Queue Status"::" " THEN
                                                                EXIT;
                                                              JobQueueEntry.ShowStatusMsg("Job Queue Entry ID");
                                                            END;

                                                   CaptionML=[ENU=Job Queue Status;
                                                              ESP=Estado de cola de proyectos];
                                                   OptionCaptionML=[ENU=" ,Scheduled for Posting,Error,Posting";
                                                                    ESP=" ,Programado para registro,Error,Registro"];
                                                   OptionString=[ ,Scheduled for Posting,Error,Posting];
                                                   Editable=No }
    { 161 ;   ;Job Queue Entry ID  ;GUID          ;CaptionML=[ENU=Job Queue Entry ID;
                                                              ESP=Id. mov. cola proyecto];
                                                   Editable=No }
    { 165 ;   ;Incoming Document Entry No.;Integer;TableRelation="Incoming Document";
                                                   OnValidate=VAR
                                                                IncomingDocument@1000 : Record 130;
                                                              BEGIN
                                                                IF "Incoming Document Entry No." = xRec."Incoming Document Entry No." THEN
                                                                  EXIT;
                                                                IF "Incoming Document Entry No." = 0 THEN
                                                                  IncomingDocument.RemoveReferenceToWorkingDocument(xRec."Incoming Document Entry No.")
                                                                ELSE
                                                                  IncomingDocument.SetSalesDoc(Rec);
                                                              END;

                                                   CaptionML=[ENU=Incoming Document Entry No.;
                                                              ESP=N§ mov. de documentos entrantes] }
    { 166 ;   ;Last Email Sent Time;DateTime      ;FieldClass=FlowField;
                                                   CalcFormula=Max("O365 Document Sent History"."Created Date-Time" WHERE (Document Type=FIELD(Document Type),
                                                                                                                           Document No.=FIELD(No.),
                                                                                                                           Posted=CONST(No)));
                                                   CaptionML=[ENU=Last Email Sent Time;
                                                              ESP=Hora del £ltimo correo electr¢nico enviado] }
    { 167 ;   ;Last Email Sent Status;Option      ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("O365 Document Sent History"."Job Last Status" WHERE (Document Type=FIELD(Document Type),
                                                                                                                            Document No.=FIELD(No.),
                                                                                                                            Posted=CONST(No),
                                                                                                                            Created Date-Time=FIELD(Last Email Sent Time)));
                                                   CaptionML=[ENU=Last Email Sent Status;
                                                              ESP=Estado del £ltimo correo electr¢nico enviado];
                                                   OptionCaptionML=[ENU=Not Sent,In Process,Finished,Error;
                                                                    ESP=No enviado,En proceso,Finalizado,Error];
                                                   OptionString=Not Sent,In Process,Finished,Error }
    { 168 ;   ;Sent as Email       ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("O365 Document Sent History" WHERE (Document Type=FIELD(Document Type),
                                                                                                         Document No.=FIELD(No.),
                                                                                                         Posted=CONST(No),
                                                                                                         Job Last Status=CONST(Finished)));
                                                   CaptionML=[ENU=Sent as Email;
                                                              ESP=Enviado como correo electr¢nico] }
    { 169 ;   ;Last Email Notif Cleared;Boolean   ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("O365 Document Sent History".NotificationCleared WHERE (Document Type=FIELD(Document Type),
                                                                                                                              Document No.=FIELD(No.),
                                                                                                                              Posted=CONST(No),
                                                                                                                              Created Date-Time=FIELD(Last Email Sent Time)));
                                                   CaptionML=[ENU=Last Email Notif Cleared;
                                                              ESP=éltima notif. correo electr¢nico borrada] }
    { 170 ;   ;IsTest              ;Boolean       ;CaptionML=[ENU=IsTest;
                                                              ESP=IsTest];
                                                   Editable=No }
    { 171 ;   ;Sell-to Phone No.   ;Text30        ;OnValidate=VAR
                                                                Char@1000 : DotNet "'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.System.Char";
                                                                i@1001 : Integer;
                                                              BEGIN
                                                                FOR i := 1 TO STRLEN("Sell-to Phone No.") DO
                                                                  IF Char.IsLetter("Sell-to Phone No."[i]) THEN
                                                                    ERROR(PhoneNoCannotContainLettersErr);
                                                              END;

                                                   ExtendedDatatype=Phone No.;
                                                   CaptionML=[ENU=Sell-to Phone No.;
                                                              ESP=N.§ de tel‚fono de venta] }
    { 172 ;   ;Sell-to E-Mail      ;Text80        ;OnValidate=VAR
                                                                MailManagement@1000 : Codeunit 9520;
                                                              BEGIN
                                                                MailManagement.ValidateEmailAddressField("Sell-to E-Mail");
                                                              END;

                                                   ExtendedDatatype=E-Mail;
                                                   CaptionML=[ENU=Email;
                                                              ESP=Correo electr¢nico] }
    { 175 ;   ;Payment Instructions Id;Integer    ;TableRelation="O365 Payment Instructions";
                                                   CaptionML=[ENU=Payment Instructions Id;
                                                              ESP=Id. de instrucciones de pago] }
    { 200 ;   ;Work Description    ;BLOB          ;CaptionML=[ENU=Work Description;
                                                              ESP=Descripci¢n del trabajo] }
    { 300 ;   ;Amt. Ship. Not Inv. (LCY);Decimal  ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Shipped Not Invoiced (LCY)" WHERE (Document Type=FIELD(Document Type),
                                                                                                                    Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Amount Shipped Not Invoiced (LCY) Incl. VAT;
                                                              ESP=Importe enviado no facturado (DL) con IVA];
                                                   Editable=No }
    { 301 ;   ;Amt. Ship. Not Inv. (LCY) Base;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Shipped Not Inv. (LCY) No VAT" WHERE (Document Type=FIELD(Document Type),
                                                                                                                       Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Amount Shipped Not Invoiced (LCY);
                                                              ESP=Importe enviado no facturado (DL)];
                                                   Editable=No }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnValidate=BEGIN
                                                                DimMgt.UpdateGlobalDimFromDimSetID("Dimension Set ID","Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
                                                              END;

                                                   OnLookup=BEGIN
                                                              ShowDocDim;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              ESP=Id. grupo dimensiones];
                                                   Editable=No }
    { 600 ;   ;Payment Service Set ID;Integer     ;CaptionML=[ENU=Payment Service Set ID;
                                                              ESP=Id. de conjunto de servicios de pago] }
    { 1200;   ;Direct Debit Mandate ID;Code35     ;TableRelation="SEPA Direct Debit Mandate" WHERE (Customer No.=FIELD(Bill-to Customer No.),
                                                                                                    Closed=CONST(No),
                                                                                                    Blocked=CONST(No));
                                                   CaptionML=[ENU=Direct Debit Mandate ID;
                                                              ESP=Id. de orden de domiciliaci¢n de adeudo directo] }
    { 1305;   ;Invoice Discount Amount;Decimal    ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Inv. Discount Amount" WHERE (Document No.=FIELD(No.),
                                                                                                              Document Type=FIELD(Document Type)));
                                                   CaptionML=[ENU=Invoice Discount Amount;
                                                              ESP=Importe descuento factura];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 5043;   ;No. of Archived Versions;Integer   ;FieldClass=FlowField;
                                                   CalcFormula=Max("Sales Header Archive"."Version No." WHERE (Document Type=FIELD(Document Type),
                                                                                                               No.=FIELD(No.),
                                                                                                               Doc. No. Occurrence=FIELD(Doc. No. Occurrence)));
                                                   CaptionML=[ENU=No. of Archived Versions;
                                                              ESP=N§ de versiones archivadas];
                                                   Editable=No }
    { 5048;   ;Doc. No. Occurrence ;Integer       ;CaptionML=[ENU=Doc. No. Occurrence;
                                                              ESP=Ocurrencia N§ doc.] }
    { 5050;   ;Campaign No.        ;Code20        ;TableRelation=Campaign;
                                                   OnValidate=BEGIN
                                                                CreateDim(
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");
                                                              END;

                                                   CaptionML=[ENU=Campaign No.;
                                                              ESP=N§ campa¤a] }
    { 5051;   ;Sell-to Customer Template Code;Code10;
                                                   TableRelation="Customer Template";
                                                   OnValidate=VAR
                                                                SellToCustTemplate@1000 : Record 5105;
                                                              BEGIN
                                                                TESTFIELD("Document Type","Document Type"::Quote);
                                                                TestStatusOpen;

                                                                IF NOT InsertMode AND
                                                                   ("Sell-to Customer Template Code" <> xRec."Sell-to Customer Template Code") AND
                                                                   (xRec."Sell-to Customer Template Code" <> '')
                                                                THEN BEGIN
                                                                  IF GetHideValidationDialog OR NOT GUIALLOWED THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(ConfirmChangeQst,FALSE,FIELDCAPTION("Sell-to Customer Template Code"));
                                                                  IF Confirmed THEN BEGIN
                                                                    IF InitFromTemplate("Sell-to Customer Template Code",FIELDCAPTION("Sell-to Customer Template Code")) THEN
                                                                      EXIT
                                                                  END ELSE BEGIN
                                                                    "Sell-to Customer Template Code" := xRec."Sell-to Customer Template Code";
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                IF SellToCustTemplate.GET("Sell-to Customer Template Code") THEN
                                                                  CopyFromSellToCustTemplate(SellToCustTemplate);

                                                                IF NOT InsertMode AND
                                                                   ((xRec."Sell-to Customer Template Code" <> "Sell-to Customer Template Code") OR
                                                                    (xRec."Currency Code" <> "Currency Code"))
                                                                THEN
                                                                  RecreateSalesLines(FIELDCAPTION("Sell-to Customer Template Code"));
                                                              END;

                                                   CaptionML=[ENU=Sell-to Customer Template Code;
                                                              ESP=Venta a-C¢d. plant. cliente] }
    { 5052;   ;Sell-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   OnValidate=VAR
                                                                ContBusinessRelation@1004 : Record 5054;
                                                                Cont@1002 : Record 5050;
                                                                Opportunity@1000 : Record 5092;
                                                              BEGIN
                                                                TestStatusOpen;

                                                                IF "Sell-to Contact No." <> '' THEN
                                                                  IF Cont.GET("Sell-to Contact No.") THEN
                                                                    Cont.CheckIfPrivacyBlockedGeneric;

                                                                IF ("Sell-to Contact No." <> xRec."Sell-to Contact No.") AND
                                                                   (xRec."Sell-to Contact No." <> '')
                                                                THEN BEGIN
                                                                  IF ("Sell-to Contact No." = '') AND ("Opportunity No." <> '') THEN
                                                                    ERROR(Text049,FIELDCAPTION("Sell-to Contact No."));
                                                                  IF GetHideValidationDialog OR NOT GUIALLOWED THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(ConfirmChangeQst,FALSE,FIELDCAPTION("Sell-to Contact No."));
                                                                  IF Confirmed THEN BEGIN
                                                                    IF InitFromContact("Sell-to Contact No.","Sell-to Customer No.",FIELDCAPTION("Sell-to Contact No.")) THEN
                                                                      EXIT;
                                                                    IF "Opportunity No." <> '' THEN BEGIN
                                                                      Opportunity.GET("Opportunity No.");
                                                                      IF Opportunity."Contact No." <> "Sell-to Contact No." THEN BEGIN
                                                                        MODIFY;
                                                                        Opportunity.VALIDATE("Contact No.","Sell-to Contact No.");
                                                                        Opportunity.MODIFY;
                                                                      END
                                                                    END;
                                                                  END ELSE BEGIN
                                                                    Rec := xRec;
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                IF ("Sell-to Customer No." <> '') AND ("Sell-to Contact No." <> '') THEN BEGIN
                                                                  Cont.GET("Sell-to Contact No.");
                                                                  IF ContBusinessRelation.FindByRelation(ContBusinessRelation."Link to Table"::Customer,"Sell-to Customer No.") THEN
                                                                    IF (ContBusinessRelation."Contact No." <> Cont."Company No.") AND (ContBusinessRelation."Contact No." <> Cont."No.") THEN
                                                                      ERROR(Text038,Cont."No.",Cont.Name,"Sell-to Customer No.");
                                                                END;

                                                                IF "Sell-to Contact No." <> '' THEN
                                                                  IF Cont.GET("Sell-to Contact No.") THEN
                                                                    IF ("Salesperson Code" = '') AND (Cont."Salesperson Code" <> '') THEN
                                                                      VALIDATE("Salesperson Code",Cont."Salesperson Code");

                                                                UpdateSellToCust("Sell-to Contact No.");
                                                                UpdateSellToCustTemplateCode;
                                                                UpdateShipToContact;
                                                              END;

                                                   OnLookup=VAR
                                                              Cont@1001 : Record 5050;
                                                              ContBusinessRelation@1000 : Record 5054;
                                                            BEGIN
                                                              IF "Sell-to Customer No." <> '' THEN
                                                                IF Cont.GET("Sell-to Contact No.") THEN
                                                                  Cont.SETRANGE("Company No.",Cont."Company No.")
                                                                ELSE
                                                                  IF ContBusinessRelation.FindByRelation(ContBusinessRelation."Link to Table"::Customer,"Sell-to Customer No.") THEN
                                                                    Cont.SETRANGE("Company No.",ContBusinessRelation."Contact No.")
                                                                  ELSE
                                                                    Cont.SETRANGE("No.",'');

                                                              IF "Sell-to Contact No." <> '' THEN
                                                                IF Cont.GET("Sell-to Contact No.") THEN ;
                                                              IF PAGE.RUNMODAL(0,Cont) = ACTION::LookupOK THEN BEGIN
                                                                xRec := Rec;
                                                                VALIDATE("Sell-to Contact No.",Cont."No.");
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Sell-to Contact No.;
                                                              ESP=Venta a-N§ contacto] }
    { 5053;   ;Bill-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   OnValidate=VAR
                                                                ContBusinessRelation@1004 : Record 5054;
                                                                Cont@1002 : Record 5050;
                                                                IsHandled@1000 : Boolean;
                                                              BEGIN
                                                                TestStatusOpen;

                                                                IF "Bill-to Contact No." <> '' THEN
                                                                  IF Cont.GET("Bill-to Contact No.") THEN
                                                                    Cont.CheckIfPrivacyBlockedGeneric;

                                                                IF ("Bill-to Contact No." <> xRec."Bill-to Contact No.") AND
                                                                   (xRec."Bill-to Contact No." <> '')
                                                                THEN BEGIN
                                                                  IsHandled := FALSE;
                                                                  OnBeforeConfirmBillToContactNoChange(Rec,xRec,CurrFieldNo,Confirmed,IsHandled);
                                                                  IF NOT IsHandled THEN
                                                                    IF GetHideValidationDialog OR (NOT GUIALLOWED) THEN
                                                                      Confirmed := TRUE
                                                                    ELSE
                                                                      Confirmed := CONFIRM(ConfirmChangeQst,FALSE,FIELDCAPTION("Bill-to Contact No."));
                                                                  IF Confirmed THEN BEGIN
                                                                    IF InitFromContact("Bill-to Contact No.","Bill-to Customer No.",FIELDCAPTION("Bill-to Contact No.")) THEN
                                                                      EXIT;
                                                                  END ELSE BEGIN
                                                                    "Bill-to Contact No." := xRec."Bill-to Contact No.";
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                IF ("Bill-to Customer No." <> '') AND ("Bill-to Contact No." <> '') THEN BEGIN
                                                                  Cont.GET("Bill-to Contact No.");
                                                                  IF ContBusinessRelation.FindByRelation(ContBusinessRelation."Link to Table"::Customer,"Bill-to Customer No.") THEN
                                                                    IF (ContBusinessRelation."Contact No." <> Cont."Company No.") AND (ContBusinessRelation."Contact No." <> Cont."No.") THEN
                                                                      ERROR(Text038,Cont."No.",Cont.Name,"Bill-to Customer No.");
                                                                END;

                                                                UpdateBillToCust("Bill-to Contact No.");
                                                              END;

                                                   OnLookup=VAR
                                                              Cont@1001 : Record 5050;
                                                              ContBusinessRelation@1000 : Record 5054;
                                                            BEGIN
                                                              IF "Bill-to Customer No." <> '' THEN
                                                                IF Cont.GET("Bill-to Contact No.") THEN
                                                                  Cont.SETRANGE("Company No.",Cont."Company No.")
                                                                ELSE
                                                                  IF ContBusinessRelation.FindByRelation(ContBusinessRelation."Link to Table"::Customer,"Bill-to Customer No.") THEN
                                                                    Cont.SETRANGE("Company No.",ContBusinessRelation."Contact No.")
                                                                  ELSE
                                                                    Cont.SETRANGE("No.",'');

                                                              IF "Bill-to Contact No." <> '' THEN
                                                                IF Cont.GET("Bill-to Contact No.") THEN ;
                                                              IF PAGE.RUNMODAL(0,Cont) = ACTION::LookupOK THEN BEGIN
                                                                xRec := Rec;
                                                                VALIDATE("Bill-to Contact No.",Cont."No.");
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Bill-to Contact No.;
                                                              ESP=Fact. a-N§ contacto] }
    { 5054;   ;Bill-to Customer Template Code;Code10;
                                                   TableRelation="Customer Template";
                                                   OnValidate=VAR
                                                                BillToCustTemplate@1001 : Record 5105;
                                                              BEGIN
                                                                TESTFIELD("Document Type","Document Type"::Quote);
                                                                TestStatusOpen;

                                                                IF NOT InsertMode AND
                                                                   ("Bill-to Customer Template Code" <> xRec."Bill-to Customer Template Code") AND
                                                                   (xRec."Bill-to Customer Template Code" <> '')
                                                                THEN BEGIN
                                                                  IF GetHideValidationDialog OR NOT GUIALLOWED THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(ConfirmChangeQst,FALSE,FIELDCAPTION("Bill-to Customer Template Code"));
                                                                  IF Confirmed THEN BEGIN
                                                                    IF InitFromTemplate("Bill-to Customer Template Code",FIELDCAPTION("Bill-to Customer Template Code")) THEN
                                                                      EXIT
                                                                  END ELSE BEGIN
                                                                    "Bill-to Customer Template Code" := xRec."Bill-to Customer Template Code";
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                VALIDATE("Ship-to Code",'');
                                                                IF BillToCustTemplate.GET("Bill-to Customer Template Code") THEN BEGIN
                                                                  BillToCustTemplate.TESTFIELD("Customer Posting Group");
                                                                  "Customer Posting Group" := BillToCustTemplate."Customer Posting Group";
                                                                  "Invoice Disc. Code" := BillToCustTemplate."Invoice Disc. Code";
                                                                  "Customer Price Group" := BillToCustTemplate."Customer Price Group";
                                                                  "Customer Disc. Group" := BillToCustTemplate."Customer Disc. Group";
                                                                  "Allow Line Disc." := BillToCustTemplate."Allow Line Disc.";
                                                                  // VNTES.i
                                                                  IF TPV.READPERMISSION THEN BEGIN
                                                                    GestionTPV.T36TraeTPV(Rec,TPV,SalesSetup);
                                                                    IF TPV."C¢d. t‚rms. pago dfto." <> '' THEN
                                                                      BillToCustTemplate."Payment Terms Code" := TPV."C¢d. t‚rms. pago dfto.";
                                                                    IF TPV."C¢d. forma pago dfto." <> '' THEN
                                                                      BillToCustTemplate."Payment Method Code" := TPV."C¢d. forma pago dfto.";
                                                                  END;
                                                                  // VNTES.f
                                                                  VALIDATE("Payment Terms Code",BillToCustTemplate."Payment Terms Code");
                                                                  VALIDATE("Payment Method Code",BillToCustTemplate."Payment Method Code");
                                                                  "Prices Including VAT" := BillToCustTemplate."Prices Including VAT";
                                                                  "Shipment Method Code" := BillToCustTemplate."Shipment Method Code";
                                                                END;

                                                                CreateDim(
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::"Responsibility Center","Responsibility Center");

                                                                OnValidateBilltoCustomerTemplateCodeBeforeRecreateSalesLines(Rec,CurrFieldNo);

                                                                IF NOT InsertMode AND
                                                                   (xRec."Sell-to Customer Template Code" = "Sell-to Customer Template Code") AND
                                                                   (xRec."Bill-to Customer Template Code" <> "Bill-to Customer Template Code")
                                                                THEN
                                                                  RecreateSalesLines(FIELDCAPTION("Bill-to Customer Template Code"));
                                                              END;

                                                   CaptionML=[ENU=Bill-to Customer Template Code;
                                                              ESP=Fact. a-C¢d. plant. cliente] }
    { 5055;   ;Opportunity No.     ;Code20        ;TableRelation=IF (Document Type=FILTER(<>Order)) Opportunity.No. WHERE (Contact No.=FIELD(Sell-to Contact No.),
                                                                                                                           Closed=CONST(No))
                                                                                                                           ELSE IF (Document Type=CONST(Order)) Opportunity.No. WHERE (Contact No.=FIELD(Sell-to Contact No.),
                                                                                                                                                                                       Sales Document No.=FIELD(No.),
                                                                                                                                                                                       Sales Document Type=CONST(Order));
                                                   OnValidate=BEGIN
                                                                LinkSalesDocWithOpportunity(xRec."Opportunity No.");
                                                              END;

                                                   CaptionML=[ENU=Opportunity No.;
                                                              ESP=N§ oportunidad] }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF NOT UserSetupMgt.CheckRespCenter(0,"Responsibility Center") THEN
                                                                  ERROR(
                                                                    Text027,
                                                                    RespCenter.TABLECAPTION,UserSetupMgt.GetSalesFilter);

                                                                UpdateLocationCode('');
                                                                UpdateOutboundWhseHandlingTime;
                                                                UpdateShipToAddress;

                                                                CreateDim(
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");

                                                                IF xRec."Responsibility Center" <> "Responsibility Center" THEN BEGIN
                                                                  RecreateSalesLines(FIELDCAPTION("Responsibility Center"));
                                                                  "Assigned User ID" := '';
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Responsibility Center;
                                                              ESP=Centro responsabilidad] }
    { 5750;   ;Shipping Advice     ;Option        ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF InventoryPickConflict("Document Type","No.","Shipping Advice") THEN
                                                                  ERROR(Text066,FIELDCAPTION("Shipping Advice"),FORMAT("Shipping Advice"),TABLECAPTION);
                                                                IF WhseShpmntConflict("Document Type","No.","Shipping Advice") THEN
                                                                  ERROR(Text070,FIELDCAPTION("Shipping Advice"),FORMAT("Shipping Advice"),TABLECAPTION);
                                                                WhseSourceHeader.SalesHeaderVerifyChange(Rec,xRec);
                                                              END;

                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipping Advice;
                                                              ESP=Aviso env¡o];
                                                   OptionCaptionML=[ENU=Partial,Complete;
                                                                    ESP=Parcial,Completo];
                                                   OptionString=Partial,Complete }
    { 5751;   ;Shipped Not Invoiced;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Document No.=FIELD(No.),
                                                                                         Qty. Shipped Not Invoiced=FILTER(<>0)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipped Not Invoiced;
                                                              ESP=Enviado no facturado];
                                                   Editable=No }
    { 5752;   ;Completely Shipped  ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Min("Sales Line"."Completely Shipped" WHERE (Document Type=FIELD(Document Type),
                                                                                                            Document No.=FIELD(No.),
                                                                                                            Type=FILTER(<>' '),
                                                                                                            Location Code=FIELD(Location Filter)));
                                                   CaptionML=[ENU=Completely Shipped;
                                                              ESP=Enviado completamente];
                                                   Editable=No }
    { 5753;   ;Posting from Whse. Ref.;Integer    ;AccessByPermission=TableData 14=R;
                                                   CaptionML=[ENU=Posting from Whse. Ref.;
                                                              ESP=Regis. desde almac. ref.] }
    { 5754;   ;Location Filter     ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation=Location;
                                                   CaptionML=[ENU=Location Filter;
                                                              ESP=Filtro almac‚n] }
    { 5755;   ;Shipped             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Document No.=FIELD(No.),
                                                                                         Qty. Shipped (Base)=FILTER(<>0)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipped;
                                                              ESP=Enviado];
                                                   Editable=No }
    { 5756;   ;Last Shipment Date  ;Date          ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Sales Shipment Header"."Shipment Date" WHERE (No.=FIELD(Last Shipping No.)));
                                                   CaptionML=[ENU=Last Shipment Date;
                                                              ESP=Fecha de £ltimo env¡o] }
    { 5790;   ;Requested Delivery Date;Date       ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Promised Delivery Date" <> 0D THEN
                                                                  ERROR(
                                                                    Text028,
                                                                    FIELDCAPTION("Requested Delivery Date"),
                                                                    FIELDCAPTION("Promised Delivery Date"));

                                                                IF "Requested Delivery Date" <> xRec."Requested Delivery Date" THEN
                                                                  UpdateSalesLinesByFieldNo(FIELDNO("Requested Delivery Date"),CurrFieldNo <> 0);
                                                              END;

                                                   CaptionML=[ENU=Requested Delivery Date;
                                                              ESP=Fecha entrega requerida] }
    { 5791;   ;Promised Delivery Date;Date        ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Promised Delivery Date" <> xRec."Promised Delivery Date" THEN
                                                                  UpdateSalesLinesByFieldNo(FIELDNO("Promised Delivery Date"),CurrFieldNo <> 0);
                                                              END;

                                                   AccessByPermission=TableData 99000880=R;
                                                   CaptionML=[ENU=Promised Delivery Date;
                                                              ESP=Fecha entrega prometida] }
    { 5792;   ;Shipping Time       ;DateFormula   ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Shipping Time" <> xRec."Shipping Time" THEN
                                                                  UpdateSalesLinesByFieldNo(FIELDNO("Shipping Time"),CurrFieldNo <> 0);
                                                              END;

                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipping Time;
                                                              ESP=Tiempo env¡o] }
    { 5793;   ;Outbound Whse. Handling Time;DateFormula;
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF ("Outbound Whse. Handling Time" <> xRec."Outbound Whse. Handling Time") AND
                                                                   (xRec."Sell-to Customer No." = "Sell-to Customer No.")
                                                                THEN
                                                                  UpdateSalesLinesByFieldNo(FIELDNO("Outbound Whse. Handling Time"),CurrFieldNo <> 0);
                                                              END;

                                                   AccessByPermission=TableData 7320=R;
                                                   CaptionML=[ENU=Outbound Whse. Handling Time;
                                                              ESP=Tiempo manip. alm. salida] }
    { 5794;   ;Shipping Agent Service Code;Code10 ;TableRelation="Shipping Agent Services".Code WHERE (Shipping Agent Code=FIELD(Shipping Agent Code));
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                GetShippingTime(FIELDNO("Shipping Agent Service Code"));
                                                                UpdateSalesLinesByFieldNo(FIELDNO("Shipping Agent Service Code"),CurrFieldNo <> 0);
                                                              END;

                                                   CaptionML=[ENU=Shipping Agent Service Code;
                                                              ESP=C¢d. servicio transportista] }
    { 5795;   ;Late Order Shipping ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Sell-to Customer No.=FIELD(Sell-to Customer No.),
                                                                                         Document No.=FIELD(No.),
                                                                                         Shipment Date=FIELD(Date Filter),
                                                                                         Outstanding Quantity=FILTER(<>0)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Late Order Shipping;
                                                              ESP=Env¡o retrasado];
                                                   Editable=No }
    { 5796;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Date Filter;
                                                              ESP=Filtro fecha] }
    { 5800;   ;Receive             ;Boolean       ;CaptionML=[ENU=Receive;
                                                              ESP=Recepci¢n] }
    { 5801;   ;Return Receipt No.  ;Code20        ;CaptionML=[ENU=Return Receipt No.;
                                                              ESP=N§ recep. devol.] }
    { 5802;   ;Return Receipt No. Series;Code20   ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Return Receipt No. Series" <> '' THEN BEGIN
                                                                  GetSalesSetup;
                                                                  SalesSetup.TESTFIELD("Posted Return Receipt Nos.");
                                                                  NoSeriesMgt.TestSeries(SalesSetup."Posted Return Receipt Nos.","Return Receipt No. Series");
                                                                END;
                                                                TESTFIELD("Return Receipt No.",'');
                                                              END;

                                                   OnLookup=BEGIN
                                                              WITH SalesHeader DO BEGIN
                                                                SalesHeader := Rec;
                                                                GetSalesSetup;
                                                                SalesSetup.TESTFIELD("Posted Return Receipt Nos.");
                                                                IF NoSeriesMgt.LookupSeries(SalesSetup."Posted Return Receipt Nos.","Return Receipt No. Series") THEN
                                                                  VALIDATE("Return Receipt No. Series");
                                                                Rec := SalesHeader;
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Return Receipt No. Series;
                                                              ESP=N§ serie recep. devol.] }
    { 5803;   ;Last Return Receipt No.;Code20     ;TableRelation="Return Receipt Header";
                                                   CaptionML=[ENU=Last Return Receipt No.;
                                                              ESP=N§ £ltima recep. devol.];
                                                   Editable=No }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Allow Line Disc."));
                                                              END;

                                                   CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 7200;   ;Get Shipment Used   ;Boolean       ;CaptionML=[ENU=Get Shipment Used;
                                                              ESP=Traer albaranes ejecutado];
                                                   Editable=No }
    { 8000;   ;Id                  ;GUID          ;CaptionML=[ENU=Id;
                                                              ESP=Id.] }
    { 9000;   ;Assigned User ID    ;Code50        ;TableRelation="User Setup";
                                                   OnValidate=BEGIN
                                                                IF NOT UserSetupMgt.CheckRespCenter2(0,"Responsibility Center","Assigned User ID") THEN
                                                                  ERROR(
                                                                    Text061,"Assigned User ID",
                                                                    RespCenter.TABLECAPTION,UserSetupMgt.GetSalesFilter2("Assigned User ID"));
                                                              END;

                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=Assigned User ID;
                                                              ESP=Id. usuario asignado] }
    { 10705;  ;Corrected Invoice No.;Code20       ;OnValidate=VAR
                                                                SalesInvoiceHeader@1100007 : Record 112;
                                                                SIIManagement@1100000 : Codeunit 10756;
                                                              BEGIN
                                                                IF "Corrected Invoice No." <> '' THEN
                                                                  SalesInvoiceHeader.CheckCorrectedDocumentExist("Bill-to Customer No.","Corrected Invoice No.");

                                                                VALIDATE("ID Type",SIIManagement.GetSalesIDType("Bill-to Customer No.","Correction Type","Corrected Invoice No."));
                                                              END;

                                                   OnLookup=VAR
                                                              SalesInvoiceHeader@1100002 : Record 112;
                                                            BEGIN
                                                              IF SalesInvoiceHeader.LookupInvoice("Bill-to Customer No.") THEN
                                                                VALIDATE("Corrected Invoice No.",SalesInvoiceHeader."No.");
                                                            END;

                                                   CaptionML=[ENU=Corrected Invoice No.;
                                                              ESP=N.§ factura corregida] }
    { 10706;  ;Due Date Modified   ;Boolean       ;CaptionML=[ENU=Due Date Modified;
                                                              ESP=Fecha vencimiento modificada];
                                                   Editable=No }
    { 10707;  ;Invoice Type        ;Option        ;CaptionML=[ENU=Invoice Type;
                                                              ESP=Tipo de factura];
                                                   OptionCaptionML=[ENU=F1 Invoice,F2 Simplified Invoice,F3 Invoice issued to replace simplified invoices,F4 Invoice summary entry;
                                                                    ESP=F1 Factura,F2 Factura simplificada,F3 Factura emitida para sustituir a las facturas simplificadas,F4 Movimiento de resumen de facturas];
                                                   OptionString=F1 Invoice,F2 Simplified Invoice,F3 Invoice issued to replace simplified invoices,F4 Invoice summary entry }
    { 10708;  ;Cr. Memo Type       ;Option        ;CaptionML=[ENU=Cr. Memo Type;
                                                              ESP=Tipo de abono];
                                                   OptionCaptionML=[ENU=R1 Corrected Invoice,R2 Corrected Invoice (Art. 80.3),R3 Corrected Invoice (Art. 80.4),R4 Corrected Invoice (Other),R5 Corrected Invoice in Simplified Invoices,F1 Invoice,F2 Simplified Invoice;
                                                                    ESP=R1 Factura corregida,R2 Factura corregida (art¡culo 80.3),R3 Factura corregida (art¡culo 80.4),R4 Factura corregida (otros),R5 Factura corregida en facturas simplificadas,F1 Factura,F2 Factura simplificada];
                                                   OptionString=R1 Corrected Invoice,R2 Corrected Invoice (Art. 80.3),R3 Corrected Invoice (Art. 80.4),R4 Corrected Invoice (Other),R5 Corrected Invoice in Simplified Invoices,F1 Invoice,F2 Simplified Invoice }
    { 10709;  ;Special Scheme Code ;Option        ;CaptionML=[ENU=Special Scheme Code;
                                                              ESP=C¢d. de esquema especial];
                                                   OptionCaptionML=[ENU=01 General,02 Export,03 Special System,04 Gold,05 Travel Agencies,06 Groups of Entities,07 Special Cash,08  IPSI / IGIC,09 Travel Agency Services,10 Third Party,11 Business Withholding,12 Business not Withholding,13 Business Withholding and not Withholding,14 Invoice Work Certification,15 Invoice of Consecutive Nature,16 First Half 2017;
                                                                    ESP=01 General,02 Exportaciones,03 Sistema especial,04 Oro,05 Agencias de viajes,06 Grupos de entidades,07 Efectivo especial,08 IPSI/IGIC,09 Servicios de agencias de viajes,10 Terceros,11 Negocio con retenci¢n,12 Negocio sin retenci¢n,13 Negocio con y sin retenci¢n,14 Certificaci¢n laboral de factura,15 Factura consecutiva,16 Primer semestre 2017];
                                                   OptionString=01 General,02 Export,03 Special System,04 Gold,05 Travel Agencies,06 Groups of Entities,07 Special Cash,08  IPSI / IGIC,09 Travel Agency Services,10 Third Party,11 Business Withholding,12 Business not Withholding,13 Business Withholding and not Withholding,14 Invoice Work Certification,15 Invoice of Consecutive Nature,16 First Half 2017 }
    { 10710;  ;Operation Description;Text250      ;CaptionML=[ENU=Operation Description;
                                                              ESP=Descripci¢n de la operaci¢n] }
    { 10711;  ;Correction Type     ;Option        ;OnValidate=VAR
                                                                SIIManagement@1100000 : Codeunit 10756;
                                                              BEGIN
                                                                VALIDATE("ID Type",SIIManagement.GetSalesIDType("Bill-to Customer No.","Correction Type","Corrected Invoice No."));
                                                              END;

                                                   CaptionML=[ENU=Correction Type;
                                                              ESP=Tipo de correcci¢n];
                                                   OptionCaptionML=[ENU=" ,Replacement,Difference,Removal";
                                                                    ESP=" ,Sustituci¢n,Diferencia,Eliminaci¢n"];
                                                   OptionString=[ ,Replacement,Difference,Removal] }
    { 10712;  ;Operation Description 2;Text250    ;CaptionML=[ENU=Operation Description 2;
                                                              ESP=Descripci¢n de la operaci¢n 2] }
    { 10720;  ;Succeeded Company Name;Text250     ;CaptionML=[ENU=Succeeded Company Name;
                                                              ESP=Nombre de empresa correcto] }
    { 10721;  ;Succeeded VAT Registration No.;Text20;
                                                   CaptionML=[ENU=Succeeded VAT Registration No.;
                                                              ESP=CIF/NIF correcto] }
    { 10722;  ;ID Type             ;Option        ;CaptionML=[ENU=ID Type;
                                                              ESP=Tipo de id.];
                                                   OptionCaptionML=[ENU=" ,02-VAT Registration No.,03-Passport,04-ID Document,05-Certificate Of Residence,06-Other Probative Document,07-Not On The Census";
                                                                    ESP=" ,02-CIF-NIF,03-Pasaporte,04-Doc. Oficial Identif. (Residencia),05- Certificado De Residencia,06-Otro Documento Probatorio,07-No Censado"];
                                                   OptionString=[ ,02-VAT Registration No.,03-Passport,04-ID Document,05-Certificate Of Residence,06-Other Probative Document,07-Not On The Census] }
    { 50020;  ;Asignar n§ factura  ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0038 }
    { 50021;  ;Importe comisi¢n (DL);Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Importe comisi¢n (DL)" WHERE (Document Type=FIELD(Document Type),
                                                                                                               Document No.=FIELD(No.)));
                                                   Description=BAIN-0025;
                                                   Editable=No }
    { 50022;  ;Search Name         ;Code80        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Customer."Search Name" WHERE (No.=FIELD(Sell-to Customer No.)));
                                                   CaptionML=ESP=Alias;
                                                   Description=BAIN-0043;
                                                   Editable=No }
    { 7000000;;Applies-to Bill No. ;Code20        ;CaptionML=[ENU=Applies-to Bill No.;
                                                              ESP=Liq. por n§ efecto] }
    { 7000001;;Cust. Bank Acc. Code;Code20        ;TableRelation="Customer Bank Account".Code WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Cust. Bank Acc. Code;
                                                              ESP=C¢d. banco cliente] }
    { 7000003;;Pay-at Code         ;Code10        ;TableRelation="Customer Pmt. Address".Code WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Pay-at Code;
                                                              ESP=Pago en-C¢digo] }
    { 7014596;;Anexo No.           ;Code20        ;CaptionML=[ENU=Annex No.;
                                                              ESP=N§ anexo;
                                                              PTG=N§ DAA];
                                                   Description=VNTES }
    { 7014600;;Invoiced Amount     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Document Type=CONST(Invoice),
                                                                                                              No. pedido abierto=FIELD(No.)));
                                                   CaptionML=[ENU=Invoiced Amount;
                                                              ESP=Importe facturado];
                                                   Description=VNTES;
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 7014601;;Blanket Order No.   ;Code20        ;CaptionML=[ENU=Blanket Order No.;
                                                              ESP=N§ pedido abierto];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014650;;Muestra             ;Boolean       ;CaptionML=[ENU=It Shows;
                                                              ESP=Muestra];
                                                   Description=VNTES }
    { 7014805;;Promotional Discount Group;Code10  ;TableRelation="Grupo dto. promoci¢n cliente";
                                                   CaptionML=[ENU=Promotional Discount Group;
                                                              ESP=Grupo descuento promocional;
                                                              PTG=Grupo Desconto Promo‡Æo];
                                                   Description=VNTES }
    { 7014823;;Harvest Code        ;Code10        ;TableRelation=Cosecha;
                                                   OnValidate=BEGIN
                                                                UpdateSalesLines(FIELDCAPTION("Harvest Code"),FALSE);//VNTES
                                                              END;

                                                   CaptionML=[ENU=Harvest Code;
                                                              ESP=C¢d. cosecha];
                                                   Description=VNTES }
    { 7014891;;POS Code            ;Code20        ;TableRelation=TPV.C¢digo;
                                                   CaptionML=[ENU=POS Code;
                                                              ESP=C¢d. TPV];
                                                   Description=VNTES }
    { 7014892;;Ticket              ;Boolean       ;CaptionML=[ENU=Ticket;
                                                              ESP=Ticket];
                                                   Description=VNTES }
    { 7014893;;Cash                ;Decimal       ;CaptionML=[ENU=Cash;
                                                              ESP=Contado];
                                                   Description=VNTES }
    { 7014894;;Bank Bal. Account Type;Option      ;OnValidate=VAR
                                                                Banco@1170170000 : Record 270;
                                                              BEGIN
                                                                GestCodigoVentas.T36ValidateTipoCtaBancoSCC(Rec,xRec); //  VNTES
                                                              END;

                                                   CaptionML=[ENU=Bank Bal. Account Type;
                                                              ESP=Tipo cuenta banco contrap.];
                                                   OptionCaptionML=[ENU=Acct. Savings,Safety sec. cred.,Banco sec. cred.;
                                                                    ESP=Cta. ahorro,Caja sec. cr‚d.,Banco sec. cr‚d.];
                                                   OptionString=Cta. ahorro,Caja sec. cr‚d.,Banco sec. cr‚d.;
                                                   Description=VNTES }
    { 7014896;;Bank Bal. Account Code;Code20      ;OnValidate=BEGIN
                                                                GestCodigoVentas.T36ValidateCtaContrpBancoSC(Rec); //  VNTES
                                                              END;

                                                   OnLookup=VAR
                                                              NoCtaAhorro@1170170000 : Code[20];
                                                            BEGIN
                                                              GestCodigoVentas.T36LookUpCtaContrpBancoSC(Rec); //  VNTES
                                                            END;

                                                   CaptionML=[ENU=Bank Bal. Account Code;
                                                              ESP=N§ cuenta banco contrap.];
                                                   Description=VNTES }
    { 7014897;;EDI Departement Code;Code20        ;CaptionML=[ENU=Departement EDI Code;
                                                              ESP=C¢d. departamento EDI];
                                                   Description=VNTES }
    { 7014898;;EDI Shipment No.    ;Code20        ;TableRelation="Sales Shipment Header".No.;
                                                   OnValidate=BEGIN
                                                                GestCodigoVentas.T36ValidateAlbaranParaEDI(Rec); //  VNTES
                                                              END;

                                                   CaptionML=[ENU=EDI Shipment No.;
                                                              ESP=N§ albar n EDI];
                                                   Description=VNTES }
    { 7014901;;EDI Requested Delivery Date;Date   ;CaptionML=ESP=Fecha entrega requerida EDI;
                                                   Description=VNTES }
  }
  KEYS
  {
    {    ;Document Type,No.                       ;Clustered=Yes }
    {    ;No.,Document Type                        }
    {    ;Document Type,Sell-to Customer No.       }
    {    ;Document Type,Bill-to Customer No.       }
    {    ;Document Type,Combine Shipments,Bill-to Customer No.,Currency Code,EU 3-Party Trade,Dimension Set ID }
    {    ;Sell-to Customer No.,External Document No. }
    {    ;Document Type,Sell-to Contact No.        }
    {    ;Bill-to Contact No.                      }
    {    ;Incoming Document Entry No.              }
    {    ;Document Date                            }
    {    ;Shipment Date,Status,Location Code,Responsibility Center }
  }
  FIELDGROUPS
  {
    { 1   ;Brick               ;No.,Sell-to Customer Name,Amount,Sell-to Contact,Amount Including VAT }
  }
  CODE
  {
    VAR
      Text003@1003 : TextConst 'ENU=You cannot rename a %1.;ESP=No se puede cambiar el nombre a %1.';
      ConfirmChangeQst@1004 : TextConst '@@@="%1 = a Field Caption like Currency Code";ENU=Do you want to change %1?;ESP=¨Confirma que desea cambiar %1?';
      Text005@1005 : TextConst 'ENU=You cannot reset %1 because the document still has one or more lines.;ESP=No se puede modificar %1 ya que el documento tiene una o m s l¡neas.';
      Text006@1006 : TextConst 'ENU=You cannot change %1 because the order is associated with one or more purchase orders.;ESP=No se puede cambiar %1 porque el pedido est  asociado a pedidos de compra.';
      Text007@1007 : TextConst 'ENU=%1 cannot be greater than %2 in the %3 table.;ESP=En la tabla %3, %1 no puede ser mayor que %2.';
      Text009@1009 : TextConst 'ENU=Deleting this document will cause a gap in the number series for shipments. An empty shipment %1 will be created to fill this gap in the number series.\\Do you want to continue?;ESP=Si elimina el documento, se provocar  una discontinuidad en la numeraci¢n de la serie de albaranes. Un env¡o dev. vac¡o %1 se crear  para llenar este error en las series num‚ricas.\\¨Desea continuar?';
      Text012@1012 : TextConst 'ENU=Deleting this document will cause a gap in the number series for posted invoices. An empty posted invoice %1 will be created to fill this gap in the number series.\\Do you want to continue?;ESP=Si elimina el documento se provocar  una discontinuidad en la numeraci¢n de la serie de facturas registradas. Se crear  una factura registrada en blanco %1 para completar este error en las series num‚ricas.\\¨Desea continuar?';
      Text014@1014 : TextConst 'ENU=Deleting this document will cause a gap in the number series for posted credit memos. An empty posted credit memo %1 will be created to fill this gap in the number series.\\Do you want to continue?;ESP=Si elimina el documento, se provocar  una discontinuidad en la serie num‚rica de abonos registrados. Se crear  un abono registrado en blanco %1 para completar este error en las series num‚ricas.\\¨Desea continuar?';
      RecreateSalesLinesMsg@1015 : TextConst '@@@=%1: FieldCaption;ENU=If you change %1, the existing sales lines will be deleted and new sales lines based on the new information on the header will be created.\\Do you want to continue?;ESP=Si cambia %1, se eliminar n las l¡neas de venta actuales y se crear n l¡neas de venta nuevas basadas en la informaci¢n nueva de la cabecera.\\¨Desea continuar?';
      ResetItemChargeAssignMsg@1075 : TextConst '@@@=%1: FieldCaption;ENU=If you change %1, the existing sales lines will be deleted and new sales lines based on the new information on the header will be created.\The amount of the item charge assignment will be reset to 0.\\Do you want to continue?;ESP=Si cambia %1, se eliminar n las l¡neas de venta actuales y se crear n l¡neas de venta nuevas basadas en la informaci¢n nueva de la cabecera.\El importe de la asignaci¢n del cargo del producto se pondr  a 0.\\¨Desea continuar?';
      LinesNotUpdatedMsg@1018 : TextConst '@@@=You have changed Order Date on the sales header, but it has not been changed on the existing sales lines.;ENU=You have changed %1 on the sales header, but it has not been changed on the existing sales lines.;ESP=Se ha modificado %1 en cab. ventas, pero no se ha modificado en las l¡neas de venta.';
      Text019@1019 : TextConst 'ENU=You must update the existing sales lines manually.;ESP=Debe actualizar las l¡neas de venta existentes manualmente.';
      AffectExchangeRateMsg@1020 : TextConst 'ENU=The change may affect the exchange rate that is used for price calculation on the sales lines.;ESP=El cambio puede afectar al tipo de cambio utilizado en el c lculo del precio en las l¡neas de vtas.';
      Text021@1021 : TextConst 'ENU=Do you want to update the exchange rate?;ESP=¨Confirma que desea modificar el tipo de cambio?';
      Text022@1022 : TextConst 'ENU=You cannot delete this document. Your identification is set up to process from %1 %2 only.;ESP=No puede borrar este documento. Su identificaci¢n est  configurada s¢lo para procesar %1 %2.';
      Text024@1024 : TextConst 'ENU=You have modified the %1 field. The recalculation of VAT may cause penny differences, so you must check the amounts afterward. Do you want to update the %2 field on the lines to reflect the new value of %1?;ESP=Ha modificado el campo %1. El nuevo c lculo de IVA puede tener alguna diferencia, por lo que deber¡a comprobar los importes. ¨Desea actualizar el campo %2 en la l¡neas para reflejar el nuevo valor de %1?';
      Text027@1027 : TextConst 'ENU=Your identification is set up to process from %1 %2 only.;ESP=Su identificaci¢n est  configurada para procesar s¢lo desde %1 %2.';
      Text028@1028 : TextConst 'ENU=You cannot change the %1 when the %2 has been filled in.;ESP=No puede cambiar %1 despu‚s de introducir datos en %2.';
      Text030@1030 : TextConst 'ENU=Deleting this document will cause a gap in the number series for return receipts. An empty return receipt %1 will be created to fill this gap in the number series.\\Do you want to continue?;ESP=Eliminar este documento causar  un error en la serie num‚rica de las recep. devol. Se crear  una recep. devoluc. %1 para completar este error en las series num‚ricas.\\¨Desea continuar?';
      Text031@1031 : TextConst '@@@=You have modified Shipment Date.\\Do you want to update the lines?;ENU=You have modified %1.\\Do you want to update the lines?;ESP=Ha modificado %1.\\¨Desea actualizar las l¡neas?';
      SalesSetup@1033 : Record 311;
      GLSetup@1034 : Record 98;
      GLAcc@1035 : Record 15;
      SalesHeader@1036 : Record 36;
      SalesLine@1037 : Record 37;
      CustLedgEntry@1038 : Record 21;
      Cust@1039 : Record 18;
      PaymentTerms@1040 : Record 3;
      PaymentMethod@1041 : Record 289;
      CurrExchRate@1042 : Record 330;
      SalesCommentLine@1043 : Record 44;
      PostCode@1045 : Record 225;
      BankAcc@1046 : Record 270;
      SalesShptHeader@1047 : Record 110;
      SalesInvHeader@1048 : Record 112;
      SalesCrMemoHeader@1049 : Record 114;
      ReturnRcptHeader@1050 : Record 6660;
      SalesInvHeaderPrepmt@1101 : Record 112;
      SalesCrMemoHeaderPrepmt@1100 : Record 114;
      GenBusPostingGrp@1051 : Record 250;
      RespCenter@1053 : Record 5714;
      InvtSetup@1054 : Record 313;
      Location@1055 : Record 14;
      WhseRequest@1056 : Record 5765;
      ReservEntry@1001 : Record 337;
      TempReservEntry@1000 : TEMPORARY Record 337;
      CompanyInfo@1002 : Record 79;
      Salesperson@1932 : Record 13;
      UserSetupMgt@1058 : Codeunit 5700;
      NoSeriesMgt@1059 : Codeunit 396;
      CustCheckCreditLimit@1060 : Codeunit 312;
      DimMgt@1065 : Codeunit 408;
      IdentityManagement@1010 : Codeunit 9801;
      ApprovalsMgmt@1082 : Codeunit 1535;
      WhseSourceHeader@1073 : Codeunit 5781;
      SalesLineReserve@1066 : Codeunit 99000832;
      PostingSetupMgt@1085 : Codeunit 48;
      CurrencyDate@1068 : Date;
      HideValidationDialog@1069 : Boolean;
      Confirmed@1070 : Boolean;
      Text035@1076 : TextConst 'ENU=You cannot Release Quote or Make Order unless you specify a customer on the quote.\\Do you want to create customer(s) now?;ESP=No puede lanzar oferta ¢ hacer pedido hasta que especifique un cliente en la oferta.\\¨Quiere crear un cliente(s) ahora?';
      Text037@1078 : TextConst 'ENU=Contact %1 %2 is not related to customer %3.;ESP=Contacto %1 %2 no est  relacionado con el cliente %3.';
      Text038@1074 : TextConst 'ENU=Contact %1 %2 is related to a different company than customer %3.;ESP=Contacto %1 %2 est  relacionado con una empresa diferente al cliente %3.';
      Text039@1086 : TextConst 'ENU=Contact %1 %2 is not related to a customer.;ESP=Contacto %1 %2 no est  relacionado con un cliente.';
      Text040@1083 : TextConst 'ENU=A won opportunity is linked to this order.\It has to be changed to status Lost before the Order can be deleted.\Do you want to change the status for this opportunity now?;ESP=Se vincula una oportunidad ganada a este pedido.\Debe cambiar el estado a Perdida para poder eliminar el pedido.\¨Desea cambiar el estado para esta oportunidad?';
      Text044@1088 : TextConst 'ENU=The status of the opportunity has not been changed. The program has aborted deleting the order.;ESP=No se ha cambiado el estado de la oportunidad. El programa ha anulado la eliminaci¢n del pedido.';
      SkipSellToContact@1016 : Boolean;
      SkipBillToContact@1025 : Boolean;
      Text045@1081 : TextConst 'ENU="You can not change the %1 field because %2 %3 has %4 = %5 and the %6 has already been assigned %7 %8.";ESP="No puede cambiar el campo %1 porque %2 %3 tiene %4 = %5 y ya se ha asignado el %6 a %7 %8."';
      Text048@1091 : TextConst 'ENU=Sales quote %1 has already been assigned to opportunity %2. Would you like to reassign this quote?;ESP=La oferta de ventas %1 ya fue asignada a la oportunidad %2. ¨Desea volver a asignar la oferta?';
      Text049@1092 : TextConst 'ENU=The %1 field cannot be blank because this quote is linked to an opportunity.;ESP=El campo %1 no puede estar vac¡o porque la oferta est  asociada a una oportunidad.';
      InsertMode@1093 : Boolean;
      HideCreditCheckDialogue@1097 : Boolean;
      Text051@1071 : TextConst 'ENU=The sales %1 %2 already exists.;ESP=Ya existen las ventas %1 %2.';
      Text053@1102 : TextConst 'ENU=You must cancel the approval process if you wish to change the %1.;ESP=Debe cancelar el proceso de aprobaci¢n si desea cambiar el %1.';
      Text056@1105 : TextConst 'ENU=Deleting this document will cause a gap in the number series for prepayment invoices. An empty prepayment invoice %1 will be created to fill this gap in the number series.\\Do you want to continue?;ESP=Si elimina el documento, se provocar  una discontinuidad en la numeraci¢n de la serie de facturas de prepago. Se crear  una factura prepago en blanco %1 para completar este error en las series num‚ricas.\\¨Desea continuar?';
      Text057@1108 : TextConst 'ENU=Deleting this document will cause a gap in the number series for prepayment credit memos. An empty prepayment credit memo %1 will be created to fill this gap in the number series.\\Do you want to continue?;ESP=Si elimina el documento, se provocar  una discontinuidad en la numeraci¢n de la serie de abonos de prepago. Se crear  un abono prepago en blanco %1 para completar este error en las series num‚ricas.\\¨Desea continuar?';
      Text061@1110 : TextConst 'ENU=%1 is set up to process from %2 %3 only.;ESP=Se ha configurado %1 para procesar s¢lo desde %2 %3.';
      Text062@1072 : TextConst 'ENU=You cannot change %1 because the corresponding %2 %3 has been assigned to this %4.;ESP=No puede cambiar %1 porque el %2 %3 correspondiente ha sido asignado a este %4.';
      Text063@1077 : TextConst 'ENU=Reservations exist for this order. These reservations will be canceled if a date conflict is caused by this change.\\Do you want to continue?;ESP=Existen reservas para este pedido. Dichas reservas se cancelar n si este cambio provoca un conflicto de fechas.\\¨Desea continuar?';
      Text064@1090 : TextConst 'ENU=You may have changed a dimension.\\Do you want to update the lines?;ESP=Puede que haya cambiado una dimensi¢n.\\¨Desea actualizar las l¡neas?';
      UpdateDocumentDate@1120 : Boolean;
      Text066@1095 : TextConst 'ENU=You cannot change %1 to %2 because an open inventory pick on the %3.;ESP=No puede cambiar %1 a %2 debido a un picking de inventario abierto en %3.';
      Text070@1096 : TextConst 'ENU=You cannot change %1  to %2 because an open warehouse shipment exists for the %3.;ESP=No puede cambiar %1 a %2 debido a que existe un env¡o de almac‚n abierto para %3.';
      BilltoCustomerNoChanged@1121 : Boolean;
      SelectNoSeriesAllowed@1067 : Boolean;
      PrepaymentInvoicesNotPaidErr@1011 : TextConst '@@@=You cannot post the document of type Order with the number 1001 before all related prepayment invoices are posted.;ENU=You cannot post the document of type %1 with the number %2 before all related prepayment invoices are posted.;ESP=No puede registrar el documento de tipo %1 con el n£mero %2 antes de que se registren todas las facturas de prepago relacionadas.';
      Text072@1013 : TextConst 'ENU=There are unpaid prepayment invoices related to the document of type %1 with the number %2.;ESP=Hay facturas prepago sin pagar relacionadas con el documento de tipo %1 con el n£mero %2.';
      AdjustDueDate@1100000 : Codeunit 10700;
      Text10700@1100001 : TextConst 'ENU=%1 cannot be different from 0 when %2 is %3;ESP=%1 no puede ser diferente de 0 cuando %2 es %3';
      DeferralLineQst@1044 : TextConst 'ENU=Do you want to update the deferral schedules for the lines?;ESP=¨Desea actualizar las previsiones de fraccionamiento para las l¡neas?';
      SynchronizingMsg@1026 : TextConst 'ENU=Synchronizing ...\ from: Sales Header with %1\ to: Assembly Header with %2.;ESP=Sincronizando...\ desde: Encabezado de ventas con %1\ hasta: Encabezado de ensamblado con %2.';
      EstimateTxt@1023 : TextConst 'ENU=Estimate;ESP=Estimaci¢n';
      ShippingAdviceErr@1029 : TextConst 'ENU=This document cannot be shipped completely. Change the value in the Shipping Advice field to Partial.;ESP=No se puede enviar este documento por completo. Cambie el valor en el campo Aviso de env¡o a Parcial.';
      TPV@1170170003 : Record 7014655;
      GestCodigoVentas@1170170002 : Codeunit 7014615;
      GestionTPV@1170170001 : Codeunit 7014555;
      GestLinVta@1170170000 : Codeunit 7014617;
      Text7014650@1170170007 : TextConst 'ESP=No es posible usar una %1 con %2 %3 sin no existe una sesi¢n TPV activa.';
      Text7014500@1170170006 : TextConst 'ESP=%1 muestra';
      Text7014501@1170170005 : TextConst 'ESP=Factura venta';
      Text7014502@1170170004 : TextConst 'ESP=Abono venta';
      PostedDocsToPrintCreatedMsg@1084 : TextConst 'ENU=One or more documents have been posted during deletion, which you can print from the related posted document.;ESP=Durante la eliminaci¢n, se han generado uno o m s documentos registrados relacionados en sustituci¢n de los n£meros de registro que faltan de la serie. Puede ver o imprimir los documentos del archivo de documentos correspondiente.';
      DocumentNotPostedClosePageQst@1061 : TextConst 'ENU=The document has been saved but is not yet posted.\\Are you sure you want to exit?;ESP=El documento se ha guardado pero no se ha registrado todav¡a.\\¨Est  seguro de que desea salir?';
      SelectCustomerTemplateQst@1008 : TextConst 'ENU=Do you want to select the customer template?;ESP=¨Quiere seleccionar la plantilla de cliente?';
      ModifyCustomerAddressNotificationLbl@1062 : TextConst 'ENU=Update the address;ESP=Actualizar la direcci¢n';
      DontShowAgainActionLbl@1064 : TextConst 'ENU=Don''t show again;ESP=No volver a mostrar';
      ModifyCustomerAddressNotificationMsg@1063 : TextConst '@@@="%1=customer name";ENU=The address you entered for %1 is different from the customer''s existing address.;ESP=La direcci¢n indicada para %1 es distinta de la direcci¢n existente del cliente.';
      ValidVATNoMsg@1254 : TextConst 'ENU=The VAT registration number is valid.;ESP=El CIF/NIF es v lido.';
      InvalidVatRegNoMsg@1255 : TextConst 'ENU=The VAT registration number is not valid. Try entering the number again.;ESP=El CIF/NIF no es v lido. Pruebe a especificar el n£mero de nuevo.';
      SellToCustomerTxt@1052 : TextConst 'ENU=Sell-to Customer;ESP=Cliente de venta';
      BillToCustomerTxt@1057 : TextConst 'ENU=Bill-to Customer;ESP=Cliente de facturaci¢n';
      ModifySellToCustomerAddressNotificationNameTxt@1087 : TextConst 'ENU=Update Sell-to Customer Address;ESP=Actualizar direcci¢n del cliente de venta';
      ModifySellToCustomerAddressNotificationDescriptionTxt@1098 : TextConst 'ENU=Warn if the sell-to address on sales documents is different from the customer''s existing address.;ESP=Permite advertir si la direcci¢n de venta de los documentos de venta es distinta de la direcci¢n existente del cliente.';
      ModifyBillToCustomerAddressNotificationNameTxt@1089 : TextConst 'ENU=Update Bill-to Customer Address;ESP=Actualizar direcci¢n del cliente de facturaci¢n';
      ModifyBillToCustomerAddressNotificationDescriptionTxt@1099 : TextConst 'ENU=Warn if the bill-to address on sales documents is different from the customer''s existing address.;ESP=Permite advertir si la direcci¢n de facturaci¢n de los documentos de venta es distinta de la direcci¢n existente del cliente.';
      DuplicatedCaptionsNotAllowedErr@1094 : TextConst 'ENU=Field captions must not be duplicated when using this method. Use UpdateSalesLinesByFieldNo instead.;ESP=No se deben duplicar t¡tulos de campo cuando se utiliza este m‚todo. Use UpdateSalesLinesByFieldNo en su lugar.';
      PhoneNoCannotContainLettersErr@1080 : TextConst 'ENU=You cannot enter letters in this field.;ESP=No puede introducir letras en este campo.';
      MissingExchangeRatesQst@1032 : TextConst '@@@=%1 - currency code, %2 - posting date;ENU=There are no exchange rates for currency %1 and date %2. Do you want to add them now? Otherwise, the last change you made will be reverted.;ESP=No hay tipos de cambio para la divisa %1 y la fecha %2. ¨Desea agregarlos ahora? De lo contrario, se revertir  el £ltimo cambio que hizo.';
      SplitMessageTxt@1079 : TextConst '@@@=Some message text 1.\Some message text 2.;ENU=%1\%2;ESP=%1\%2';
      StatusCheckSuspended@1103 : Boolean;
      ConfirmEmptyEmailQst@1017 : TextConst '@@@=%1 - Contact No., %2 - Email;ENU=Contact %1 has no email address specified. The value in the Email field on the sales order, %2, will be deleted. Do you want to continue?;ESP=El contacto %1 no tiene una direcci¢n de correo electr¢nico especificada. Se eliminar  el valor del campo Correo electr¢nico del pedido de venta, %2. ¨Desea continuar?';

    [External]
    PROCEDURE InitInsert@61();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeInitInsert(Rec,xRec,IsHandled);
      IF NOT IsHandled THEN
        IF "No." = '' THEN BEGIN
          TestNoSeries;
          NoSeriesMgt.InitSeries(GetNoSeriesCode,xRec."No. Series","Posting Date","No.","No. Series");
        END;

      OnInitInsertOnBeforeInitRecord(Rec,xRec);
      InitRecord;
    END;

    [External]
    PROCEDURE InitRecord@10();
    VAR
      ArchiveManagement@1000 : Codeunit 5063;
      IsHandled@1001 : Boolean;
    BEGIN
      GetSalesSetup;
      IsHandled := FALSE;
      OnBeforeInitRecord(Rec,IsHandled);
      IF NOT IsHandled THEN
        CASE "Document Type" OF
          "Document Type"::Quote,"Document Type"::Order:
            BEGIN
              NoSeriesMgt.SetDefaultSeries("Posting No. Series",SalesSetup."Posted Invoice Nos.");
              NoSeriesMgt.SetDefaultSeries("Shipping No. Series",SalesSetup."Posted Shipment Nos.");
              IF "Document Type" = "Document Type"::Order THEN BEGIN
                NoSeriesMgt.SetDefaultSeries("Prepayment No. Series",SalesSetup."Posted Prepmt. Inv. Nos.");
                NoSeriesMgt.SetDefaultSeries("Prepmt. Cr. Memo No. Series",SalesSetup."Posted Prepmt. Cr. Memo Nos.");
              END;
            END;
          "Document Type"::Invoice:
            BEGIN
              IF ("No. Series" <> '') AND
                 (SalesSetup."Invoice Nos." = SalesSetup."Posted Invoice Nos.")
              THEN
                "Posting No. Series" := "No. Series"
              ELSE
                NoSeriesMgt.SetDefaultSeries("Posting No. Series",SalesSetup."Posted Invoice Nos.");
              IF SalesSetup."Shipment on Invoice" THEN
                NoSeriesMgt.SetDefaultSeries("Shipping No. Series",SalesSetup."Posted Shipment Nos.");
            END;
          "Document Type"::"Return Order":
            BEGIN
              NoSeriesMgt.SetDefaultSeries("Posting No. Series",SalesSetup."Posted Credit Memo Nos.");
              NoSeriesMgt.SetDefaultSeries("Return Receipt No. Series",SalesSetup."Posted Return Receipt Nos.");
            END;
          "Document Type"::"Credit Memo":
            BEGIN
              IF ("No. Series" <> '') AND
                 (SalesSetup."Credit Memo Nos." = SalesSetup."Posted Credit Memo Nos.")
              THEN
                "Posting No. Series" := "No. Series"
              ELSE
                NoSeriesMgt.SetDefaultSeries("Posting No. Series",SalesSetup."Posted Credit Memo Nos.");
              IF SalesSetup."Return Receipt on Credit Memo" THEN
                NoSeriesMgt.SetDefaultSeries("Return Receipt No. Series",SalesSetup."Posted Return Receipt Nos.");
            END;
        END;

      IF "Document Type" IN ["Document Type"::Order,"Document Type"::Invoice,"Document Type"::Quote] THEN
        "Shipment Date" := WORKDATE;

      IF NOT ("Document Type" IN ["Document Type"::"Blanket Order","Document Type"::Quote]) AND
         ("Posting Date" = 0D)
      THEN
        "Posting Date" := WORKDATE;

      IF SalesSetup."Default Posting Date" = SalesSetup."Default Posting Date"::"No Date" THEN
        "Posting Date" := 0D;

      "Order Date" := WORKDATE;
      "Document Date" := WORKDATE;
      IF "Document Type" = "Document Type"::Quote THEN
        CalcQuoteValidUntilDate;

      UpdateLocationCode(Cust."Location Code");

      IF IsCreditDocType THEN BEGIN
        GLSetup.GET;
        Correction := GLSetup."Mark Cr. Memos as Corrections";
      END;

      "Posting Description" := FORMAT("Document Type") + ' ' + "No.";

      Reserve := Reserve::Optional;

      // VNTES.i
      IF "Document Type" IN ["Document Type"::Order,"Document Type"::Invoice] THEN
        "Posting Description" := Text7014501;
      IF "Document Type" IN ["Document Type"::"Return Order","Document Type"::"Credit Memo"] THEN
        "Posting Description" := Text7014502;
      IF Muestra THEN
        "Posting Description" := COPYSTR(STRSUBSTNO(Text7014500,"Posting Description"),1,MAXSTRLEN("Posting Description"));
      // VNTES.f
      UpdateOutboundWhseHandlingTime;

      "Responsibility Center" := UserSetupMgt.GetRespCenter(0,"Responsibility Center");
      "Doc. No. Occurrence" := ArchiveManagement.GetNextOccurrenceNo(DATABASE::"Sales Header","Document Type","No.");

      InitSii;

      OnAfterInitRecord(Rec);
    END;

    LOCAL PROCEDURE InitNoSeries@77();
    BEGIN
      IF xRec."Shipping No." <> '' THEN BEGIN
        "Shipping No. Series" := xRec."Shipping No. Series";
        "Shipping No." := xRec."Shipping No.";
      END;
      IF xRec."Posting No." <> '' THEN BEGIN
        "Posting No. Series" := xRec."Posting No. Series";
        "Posting No." := xRec."Posting No.";
      END;
      IF xRec."Return Receipt No." <> '' THEN BEGIN
        "Return Receipt No. Series" := xRec."Return Receipt No. Series";
        "Return Receipt No." := xRec."Return Receipt No.";
      END;
      IF xRec."Prepayment No." <> '' THEN BEGIN
        "Prepayment No. Series" := xRec."Prepayment No. Series";
        "Prepayment No." := xRec."Prepayment No.";
      END;
      IF xRec."Prepmt. Cr. Memo No." <> '' THEN BEGIN
        "Prepmt. Cr. Memo No. Series" := xRec."Prepmt. Cr. Memo No. Series";
        "Prepmt. Cr. Memo No." := xRec."Prepmt. Cr. Memo No.";
      END;

      OnAfterInitNoSeries(Rec);
    END;

    LOCAL PROCEDURE InitSii@1100006();
    VAR
      GeneralLedgerSetup@1100000 : Record 98;
      SIIManagement@1100001 : Codeunit 10756;
    BEGIN
      GeneralLedgerSetup.GET;
      IF GeneralLedgerSetup."VAT Cash Regime" THEN
        "Special Scheme Code" := "Special Scheme Code"::"07 Special Cash"
      ELSE
        IF "Sell-to Customer No." <> '' THEN
          IF Cust.GET("Sell-to Customer No." ) THEN
            IF SIIManagement.CountryIsLocal("VAT Country/Region Code") OR
               SIIManagement.CustomerIsIntraCommunity(Cust."No.")
            THEN
              "Special Scheme Code" := "Special Scheme Code"::"01 General"
            ELSE
              "Special Scheme Code" := "Special Scheme Code"::"02 Export";
    END;

    [Internal]
    PROCEDURE AssistEdit@1(OldSalesHeader@1000 : Record 36) : Boolean;
    VAR
      SalesHeader2@1001 : Record 36;
    BEGIN
      WITH SalesHeader DO BEGIN
        COPY(Rec);
        GetSalesSetup;
        TestNoSeries;
        IF NoSeriesMgt.SelectSeries(GetNoSeriesCode,OldSalesHeader."No. Series","No. Series") THEN BEGIN
          IF ("Sell-to Customer No." = '') AND ("Sell-to Contact No." = '') THEN BEGIN
            HideCreditCheckDialogue := FALSE;
            CheckCreditMaxBeforeInsert;
            HideCreditCheckDialogue := TRUE;
          END;
          NoSeriesMgt.SetSeries("No.");
          IF SalesHeader2.GET("Document Type","No.") THEN
            ERROR(Text051,LOWERCASE(FORMAT("Document Type")),"No.");
          Rec := SalesHeader;
          EXIT(TRUE);
        END;
      END;
    END;

    [External]
    PROCEDURE TestNoSeries@6();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      GetSalesSetup;
      IsHandled := FALSE;
      OnBeforeTestNoSeries(Rec,IsHandled);
      IF NOT IsHandled THEN
        CASE "Document Type" OF
          "Document Type"::Quote:
            SalesSetup.TESTFIELD("Quote Nos.");
          "Document Type"::Order:
            SalesSetup.TESTFIELD("Order Nos.");
          "Document Type"::Invoice:
            BEGIN
              SalesSetup.TESTFIELD("Invoice Nos.");
              SalesSetup.TESTFIELD("Posted Invoice Nos.");
            END;
          "Document Type"::"Return Order":
            SalesSetup.TESTFIELD("Return Order Nos.");
          "Document Type"::"Credit Memo":
            BEGIN
              SalesSetup.TESTFIELD("Credit Memo Nos.");
              SalesSetup.TESTFIELD("Posted Credit Memo Nos.");
            END;
          "Document Type"::"Blanket Order":
            SalesSetup.TESTFIELD("Blanket Order Nos.");
        END;
      OnAfterTestNoSeries(Rec);
    END;

    [External]
    PROCEDURE GetNoSeriesCode@9() : Code[20];
    VAR
      NoSeriesCode@1000 : Code[20];
      IsHandled@1001 : Boolean;
    BEGIN
      GetSalesSetup;
      IsHandled := FALSE;
      OnBeforeGetNoSeriesCode(Rec,SalesSetup,NoSeriesCode,IsHandled);
      IF IsHandled THEN
        EXIT;
      CASE "Document Type" OF
        "Document Type"::Quote:
          NoSeriesCode := SalesSetup."Quote Nos.";
        "Document Type"::Order:
          NoSeriesCode := SalesSetup."Order Nos.";
        "Document Type"::Invoice:
          NoSeriesCode := SalesSetup."Invoice Nos.";
        "Document Type"::"Return Order":
          NoSeriesCode := SalesSetup."Return Order Nos.";
        "Document Type"::"Credit Memo":
          NoSeriesCode := SalesSetup."Credit Memo Nos.";
        "Document Type"::"Blanket Order":
          NoSeriesCode := SalesSetup."Blanket Order Nos.";
      END;
      OnAfterGetNoSeriesCode(Rec,SalesSetup,NoSeriesCode);
      EXIT(NoSeriesMgt.GetNoSeriesWithCheck(NoSeriesCode,SelectNoSeriesAllowed,"No. Series"));
    END;

    LOCAL PROCEDURE GetPostingNoSeriesCode@8() PostingNos : Code[20];
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      GetSalesSetup;
      IsHandled := FALSE;
      OnBeforeGetPostingNoSeriesCode(Rec,SalesSetup,PostingNos,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF IsCreditDocType THEN
        PostingNos := SalesSetup."Posted Credit Memo Nos."
      ELSE
        PostingNos := SalesSetup."Posted Invoice Nos.";

      OnAfterGetPostingNoSeriesCode(Rec,PostingNos);
    END;

    LOCAL PROCEDURE GetPostingPrepaymentNoSeriesCode@59() PostingNos : Code[20];
    BEGIN
      IF IsCreditDocType THEN
        PostingNos := SalesSetup."Posted Prepmt. Cr. Memo Nos."
      ELSE
        PostingNos := SalesSetup."Posted Prepmt. Inv. Nos.";

      OnAfterGetPrepaymentPostingNoSeriesCode(Rec,PostingNos);
    END;

    LOCAL PROCEDURE TestNoSeriesDate@40(No@1000 : Code[20];NoSeriesCode@1001 : Code[20];NoCapt@1002 : Text[1024];NoSeriesCapt@1004 : Text[1024]);
    VAR
      NoSeries@1005 : Record 308;
    BEGIN
      IF (No <> '') AND (NoSeriesCode <> '') THEN BEGIN
        NoSeries.GET(NoSeriesCode);
        IF NoSeries."Date Order" THEN
          ERROR(
            Text045,
            FIELDCAPTION("Posting Date"),NoSeriesCapt,NoSeriesCode,
            NoSeries.FIELDCAPTION("Date Order"),NoSeries."Date Order","Document Type",
            NoCapt,No);
      END;
    END;

    [External]
    PROCEDURE ConfirmDeletion@11() : Boolean;
    VAR
      SourceCode@1002 : Record 230;
      SourceCodeSetup@1001 : Record 242;
      PostSalesDelete@1000 : Codeunit 363;
      ConfirmManagement@1003 : Codeunit 27;
    BEGIN
      SourceCodeSetup.GET;
      SourceCodeSetup.TESTFIELD("Deleted Document");
      SourceCode.GET(SourceCodeSetup."Deleted Document");

      PostSalesDelete.InitDeleteHeader(
        Rec,SalesShptHeader,SalesInvHeader,SalesCrMemoHeader,ReturnRcptHeader,
        SalesInvHeaderPrepmt,SalesCrMemoHeaderPrepmt,SourceCode.Code);

      IF SalesShptHeader."No." <> '' THEN
        IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text009,SalesShptHeader."No."),TRUE) THEN
          EXIT;
      IF SalesInvHeader."No." <> '' THEN
        IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text012,SalesInvHeader."No."),TRUE) THEN
          EXIT;
      IF SalesCrMemoHeader."No." <> '' THEN
        IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text014,SalesCrMemoHeader."No."),TRUE) THEN
          EXIT;
      IF ReturnRcptHeader."No." <> '' THEN
        IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text030,ReturnRcptHeader."No."),TRUE) THEN
          EXIT;
      IF "Prepayment No." <> '' THEN
        IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text056,SalesInvHeaderPrepmt."No."),TRUE) THEN
          EXIT;
      IF "Prepmt. Cr. Memo No." <> '' THEN
        IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text057,SalesCrMemoHeaderPrepmt."No."),TRUE) THEN
          EXIT;
      EXIT(TRUE);
    END;

    LOCAL PROCEDURE GetCust@2(CustNo@1000 : Code[20]);
    VAR
      O365SalesInitialSetup@1001 : Record 2110;
    BEGIN
      IF NOT (("Document Type" = "Document Type"::Quote) AND (CustNo = '')) THEN BEGIN
        // VNTES.i
        IF CustNo <> Cust."No." THEN BEGIN
          Cust.GET(CustNo);
          IF TPV.READPERMISSION THEN
            GestionTPV.T36TraeTPV(Rec,TPV,SalesSetup);
          IF TPV."C¢d. almac‚n por dfto." <> '' THEN
            Cust."Location Code" := TPV."C¢d. almac‚n por dfto.";
          IF TPV."C¢d. t‚rms. pago dfto." <> '' THEN
            Cust."Payment Terms Code" := TPV."C¢d. t‚rms. pago dfto.";
          IF TPV."C¢d. forma pago dfto." <> '' THEN
            Cust."Payment Method Code" := TPV."C¢d. forma pago dfto.";
          IF TPV."C¢d. vendedor dfto." <> '' THEN
            Cust."Salesperson Code" := TPV."C¢d. vendedor dfto.";
        END;
        // VNTES.f
      END ELSE
        CLEAR(Cust);
      IF IdentityManagement.IsInvAppId AND O365SalesInitialSetup.GET THEN
        Cust."Payment Terms Code" := O365SalesInitialSetup."Default Payment Terms Code";
    END;

    LOCAL PROCEDURE GetSalesSetup@248();
    BEGIN
      SalesSetup.GET;
      OnAfterGetSalesSetup(Rec,SalesSetup,CurrFieldNo);
    END;

    [External]
    PROCEDURE SalesLinesExist@3() : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      EXIT(NOT SalesLine.ISEMPTY);
    END;

    LOCAL PROCEDURE RecreateSalesLines@4(ChangedFieldName@1000 : Text[100]);
    VAR
      TempSalesLine@1001 : TEMPORARY Record 37;
      ItemChargeAssgntSales@1004 : Record 5809;
      TempItemChargeAssgntSales@1003 : TEMPORARY Record 5809;
      TempInteger@1006 : TEMPORARY Record 2000000026;
      TempATOLink@1009 : TEMPORARY Record 904;
      ATOLink@1010 : Record 904;
      TransferExtendedText@1005 : Codeunit 378;
      ExtendedTextAdded@1002 : Boolean;
      ConfirmText@1007 : Text;
      IsHandled@1008 : Boolean;
    BEGIN
      IF NOT SalesLinesExist THEN
        EXIT;

      IsHandled := FALSE;
      OnBeforeRecreateSalesLinesHandler(Rec,xRec,ChangedFieldName,IsHandled);
      IF IsHandled THEN
        EXIT;

      IsHandled := FALSE;
      OnRecreateSalesLinesOnBeforeConfirm(Rec,xRec,ChangedFieldName,HideValidationDialog,Confirmed,IsHandled);
      IF NOT IsHandled THEN
        IF GetHideValidationDialog OR NOT GUIALLOWED THEN
          Confirmed := TRUE
        ELSE BEGIN
          IF HasItemChargeAssignment THEN
            ConfirmText := ResetItemChargeAssignMsg
          ELSE
            ConfirmText := RecreateSalesLinesMsg;
          Confirmed := CONFIRM(ConfirmText,FALSE,ChangedFieldName);
        END;

      IF Confirmed THEN BEGIN
        SalesLine.LOCKTABLE;
        ItemChargeAssgntSales.LOCKTABLE;
        ReservEntry.LOCKTABLE;
        MODIFY;
        OnBeforeRecreateSalesLines(Rec);
        SalesLine.RESET;
        SalesLine.SETRANGE("Document Type","Document Type");
        SalesLine.SETRANGE("Document No.","No.");
        OnRecreateSalesLinesOnAfterSetSalesLineFilters(SalesLine);
        IF SalesLine.FINDSET THEN BEGIN
          TempReservEntry.DELETEALL;
          RecreateReservEntryReqLine(TempSalesLine,TempATOLink,ATOLink);
          TransferItemChargeAssgntSalesToTemp(ItemChargeAssgntSales,TempItemChargeAssgntSales);
          SalesLine.DELETEALL(TRUE);
          SalesLine.INIT;
          SalesLine."Line No." := 0;
          TempSalesLine.FINDSET;
          ExtendedTextAdded := FALSE;
          SalesLine.BlockDynamicTracking(TRUE);
          REPEAT
            IF TempSalesLine."Attached to Line No." = 0 THEN BEGIN
              CreateSalesLine(TempSalesLine);
              ExtendedTextAdded := FALSE;
              OnAfterRecreateSalesLine(SalesLine,TempSalesLine);

              IF SalesLine.Type = SalesLine.Type::Item THEN
                RecreateSalesLinesFillItemChargeAssignment(SalesLine,TempSalesLine,TempItemChargeAssgntSales);

              IF SalesLine.Type = SalesLine.Type::"Charge (Item)" THEN BEGIN
                TempInteger.INIT;
                TempInteger.Number := SalesLine."Line No.";
                TempInteger.INSERT;
              END;
            END ELSE
              IF NOT ExtendedTextAdded THEN BEGIN
                TransferExtendedText.SalesCheckIfAnyExtText(SalesLine,TRUE);
                TransferExtendedText.InsertSalesExtText(SalesLine);
                OnAfterTransferExtendedTextForSalesLineRecreation(SalesLine,TempSalesLine);

                SalesLine.FINDLAST;
                ExtendedTextAdded := TRUE;
              END;
            SalesLineReserve.CopyReservEntryFromTemp(TempReservEntry,TempSalesLine,SalesLine."Line No.");
            RecreateReqLine(TempSalesLine,SalesLine."Line No.",FALSE);
            SynchronizeForReservations(SalesLine,TempSalesLine);

            IF TempATOLink.AsmExistsForSalesLine(TempSalesLine) THEN BEGIN
              ATOLink := TempATOLink;
              ATOLink."Document Line No." := SalesLine."Line No.";
              ATOLink.INSERT;
              ATOLink.UpdateAsmFromSalesLineATOExist(SalesLine);
              TempATOLink.DELETE;
            END;
          UNTIL TempSalesLine.NEXT = 0;

          CreateItemChargeAssgntSales(TempItemChargeAssgntSales,TempSalesLine,TempInteger);

          TempSalesLine.SETRANGE(Type);
          TempSalesLine.DELETEALL;
          OnAfterDeleteAllTempSalesLines;
          ClearItemAssgntSalesFilter(TempItemChargeAssgntSales);
          TempItemChargeAssgntSales.DELETEALL;
        END;
      END ELSE
        Rec := xRec;

      SalesLine.BlockDynamicTracking(FALSE);
    END;

    LOCAL PROCEDURE RecreateSalesLinesFillItemChargeAssignment@216(SalesLine@1000 : Record 37;TempSalesLine@1001 : TEMPORARY Record 37;VAR TempItemChargeAssgntSales@1002 : TEMPORARY Record 5809);
    BEGIN
      ClearItemAssgntSalesFilter(TempItemChargeAssgntSales);
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. Type",TempSalesLine."Document Type");
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. No.",TempSalesLine."Document No.");
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. Line No.",TempSalesLine."Line No.");
      IF TempItemChargeAssgntSales.FINDSET THEN
        REPEAT
          IF NOT TempItemChargeAssgntSales.MARK THEN BEGIN
            TempItemChargeAssgntSales."Applies-to Doc. Line No." := SalesLine."Line No.";
            TempItemChargeAssgntSales.Description := SalesLine.Description;
            TempItemChargeAssgntSales.MODIFY;
            TempItemChargeAssgntSales.MARK(TRUE);
          END;
        UNTIL TempItemChargeAssgntSales.NEXT = 0;
    END;

    [External]
    PROCEDURE MessageIfSalesLinesExist@5(ChangedFieldName@1000 : Text[100]);
    VAR
      MessageText@1001 : Text;
    BEGIN
      IF SalesLinesExist AND NOT GetHideValidationDialog THEN BEGIN
        MessageText := STRSUBSTNO(LinesNotUpdatedMsg,ChangedFieldName);
        MessageText := STRSUBSTNO(SplitMessageTxt,MessageText,Text019);
        MESSAGE(MessageText);
      END;
    END;

    [External]
    PROCEDURE PriceMessageIfSalesLinesExist@7(ChangedFieldName@1000 : Text[100]);
    VAR
      MessageText@1001 : Text;
      IsHandled@1002 : Boolean;
    BEGIN
      OnBeforePriceMessageIfSalesLinesExist(Rec,ChangedFieldName,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF SalesLinesExist AND NOT GetHideValidationDialog THEN BEGIN
        MessageText := STRSUBSTNO(LinesNotUpdatedMsg,ChangedFieldName);
        IF "Currency Code" <> '' THEN
          MessageText := STRSUBSTNO(SplitMessageTxt,MessageText,AffectExchangeRateMsg);
        MESSAGE(MessageText);
      END;
    END;

    [External]
    PROCEDURE UpdateCurrencyFactor@12();
    VAR
      UpdateCurrencyExchangeRates@1001 : Codeunit 1281;
      ConfirmManagement@1002 : Codeunit 27;
      Updated@1000 : Boolean;
    BEGIN
      OnBeforeUpdateCurrencyFactor(Rec,Updated);
      IF Updated THEN
        EXIT;

      IF "Currency Code" <> '' THEN BEGIN
        IF "Posting Date" <> 0D THEN
          CurrencyDate := "Posting Date"
        ELSE
          CurrencyDate := WORKDATE;

        IF UpdateCurrencyExchangeRates.ExchangeRatesForCurrencyExist(CurrencyDate,"Currency Code") THEN BEGIN
          "Currency Factor" := CurrExchRate.ExchangeRate(CurrencyDate,"Currency Code");
          IF "Currency Code" <> xRec."Currency Code" THEN
            RecreateSalesLines(FIELDCAPTION("Currency Code"));
        END ELSE BEGIN
          IF ConfirmManagement.ConfirmProcess(
               STRSUBSTNO(MissingExchangeRatesQst,"Currency Code",CurrencyDate),TRUE)
          THEN BEGIN
            COMMIT;
            UpdateCurrencyExchangeRates.OpenExchangeRatesPage("Currency Code");
            UpdateCurrencyFactor;
          END ELSE
            RevertCurrencyCodeAndPostingDate;
        END;
      END ELSE BEGIN
        "Currency Factor" := 0;
        IF "Currency Code" <> xRec."Currency Code" THEN
          RecreateSalesLines(FIELDCAPTION("Currency Code"));
      END;

      OnAfterUpdateCurrencyFactor(Rec,GetHideValidationDialog);
    END;

    LOCAL PROCEDURE ConfirmUpdateCurrencyFactor@13();
    BEGIN
      OnBeforeConfirmUpdateCurrencyFactor(Rec,HideValidationDialog);

      IF GetHideValidationDialog OR NOT GUIALLOWED THEN
        Confirmed := TRUE
      ELSE
        Confirmed := CONFIRM(Text021,FALSE);
      IF Confirmed THEN
        VALIDATE("Currency Factor")
      ELSE
        "Currency Factor" := xRec."Currency Factor";
    END;

    [External]
    PROCEDURE SetHideValidationDialog@14(NewHideValidationDialog@1000 : Boolean);
    BEGIN
      HideValidationDialog := NewHideValidationDialog;
    END;

    [External]
    PROCEDURE GetHideValidationDialog@123() : Boolean;
    VAR
      IdentityManagement@1000 : Codeunit 9801;
    BEGIN
      EXIT(HideValidationDialog OR IdentityManagement.IsInvAppId);
    END;

    LOCAL PROCEDURE UpdateLocationCode@223(LocationCode@1000 : Code[10]);
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeUpdateLocationCode(Rec,LocationCode,IsHandled);
      IF NOT IsHandled THEN
        VALIDATE("Location Code",UserSetupMgt.GetLocation(0,LocationCode,"Responsibility Center"));
    END;

    [External]
    PROCEDURE UpdateSalesLines@15(ChangedFieldName@1000 : Text[100];AskQuestion@1001 : Boolean);
    VAR
      Field@1002 : Record 2000000041;
    BEGIN
      Field.SETRANGE(TableNo,DATABASE::"Sales Header");
      Field.SETRANGE("Field Caption",ChangedFieldName);
      Field.SETFILTER(ObsoleteState,'<>%1',Field.ObsoleteState::Removed);
      Field.FIND('-');
      IF Field.NEXT <> 0 THEN
        ERROR(DuplicatedCaptionsNotAllowedErr);
      UpdateSalesLinesByFieldNo(Field."No.",AskQuestion);

      OnAfterUpdateSalesLines(Rec);
    END;

    LOCAL PROCEDURE UpdateSalesLineAmounts@259();
    VAR
      SalesLine@1000 : Record 37;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeUpdateSalesLineAmounts(Rec,xRec,CurrFieldNo,IsHandled);
      IF IsHandled THEN
        EXIT;

      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETFILTER(Type,'<>%1',SalesLine.Type::" ");
      SalesLine.SETFILTER(Quantity,'<>0');
      SalesLine.LOCKTABLE;
      LOCKTABLE;
      IF SalesLine.FINDSET THEN BEGIN
        MODIFY;
        REPEAT
          IF (SalesLine."Quantity Invoiced" <> SalesLine.Quantity) OR
             ("Shipping Advice" <> "Shipping Advice"::Partial) OR
             (SalesLine.Type <> SalesLine.Type::"Charge (Item)") OR
             (CurrFieldNo <> 0)
          THEN BEGIN
            SalesLine.UpdateAmounts;
            SalesLine.MODIFY;
          END;
        UNTIL SalesLine.NEXT = 0;
      END;
    END;

    [External]
    PROCEDURE UpdateSalesLinesByFieldNo@154(ChangedFieldNo@1000 : Integer;AskQuestion@1001 : Boolean);
    VAR
      Field@1006 : Record 2000000041;
      JobTransferLine@1004 : Codeunit 1004;
      PermissionManager@1003 : Codeunit 9002;
      Question@1002 : Text[250];
      NotRunningOnSaaS@1005 : Boolean;
      IsHandled@1007 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeUpdateSalesLinesByFieldNo(Rec,ChangedFieldNo,AskQuestion,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF NOT SalesLinesExist THEN
        EXIT;

      IF NOT Field.GET(DATABASE::"Sales Header",ChangedFieldNo) THEN
        Field.GET(DATABASE::"Sales Line",ChangedFieldNo);

      NotRunningOnSaaS := TRUE;
      CASE ChangedFieldNo OF
        FIELDNO("Shipping Agent Code"),
        FIELDNO("Shipping Agent Service Code"):
          NotRunningOnSaaS := NOT PermissionManager.SoftwareAsAService;
      END;
      IF AskQuestion THEN BEGIN
        Question := STRSUBSTNO(Text031,Field."Field Caption");
        IF GUIALLOWED AND NOT GetHideValidationDialog THEN
          IF NotRunningOnSaaS THEN
            IF DIALOG.CONFIRM(Question,TRUE) THEN
              CASE ChangedFieldNo OF
                FIELDNO("Shipment Date"),
                FIELDNO("Shipping Agent Code"),
                FIELDNO("Shipping Agent Service Code"),
                FIELDNO("Shipping Time"),
                FIELDNO("Requested Delivery Date"),
                FIELDNO("Promised Delivery Date"),
                FIELDNO("Outbound Whse. Handling Time"):
                  ConfirmResvDateConflict;
              END
            ELSE
              EXIT
          ELSE
            ConfirmResvDateConflict;
      END;

      SalesLine.LOCKTABLE;
      MODIFY;

      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      IF SalesLine.FINDSET THEN
        REPEAT
          OnBeforeSalesLineByChangedFieldNo(Rec,SalesLine,ChangedFieldNo,IsHandled);
          IF NOT IsHandled THEN
            CASE ChangedFieldNo OF
              FIELDNO("Shipment Date"):
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Shipment Date","Shipment Date");
              FIELDNO("Currency Factor"):
                IF SalesLine.Type <> SalesLine.Type::" " THEN BEGIN
                  SalesLine.VALIDATE("Unit Price");
                  SalesLine.VALIDATE("Unit Cost (LCY)");
                  IF SalesLine."Job No." <> '' THEN
                    JobTransferLine.FromSalesHeaderToPlanningLine(SalesLine,"Currency Factor");
                END;
              FIELDNO("Transaction Type"):
                SalesLine.VALIDATE("Transaction Type","Transaction Type");
              FIELDNO("Transport Method"):
                SalesLine.VALIDATE("Transport Method","Transport Method");
              FIELDNO("Exit Point"):
                SalesLine.VALIDATE("Exit Point","Exit Point");
              FIELDNO(Area):
                SalesLine.VALIDATE(Area,Area);
              FIELDNO("Transaction Specification"):
                SalesLine.VALIDATE("Transaction Specification","Transaction Specification");
              FIELDNO("Shipping Agent Code"):
                SalesLine.VALIDATE("Shipping Agent Code","Shipping Agent Code");
              FIELDNO("Shipping Agent Service Code"):
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Shipping Agent Service Code","Shipping Agent Service Code");
              FIELDNO("Shipping Time"):
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Shipping Time","Shipping Time");
              FIELDNO("Prepayment %"):
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Prepayment %","Prepayment %");
              FIELDNO("Requested Delivery Date"):
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Requested Delivery Date","Requested Delivery Date");
              FIELDNO("Promised Delivery Date"):
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Promised Delivery Date","Promised Delivery Date");
              FIELDNO("Outbound Whse. Handling Time"):
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Outbound Whse. Handling Time","Outbound Whse. Handling Time");
              SalesLine.FIELDNO("Deferral Code"):
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Deferral Code");
              ELSE
                OnUpdateSalesLineByChangedFieldName(Rec,SalesLine,Field.FieldName,ChangedFieldNo);
            END;
          SalesLineReserve.AssignForPlanning(SalesLine);
          OnUpdateSalesLinesByFieldNoOnBeforeSalesLineModify(SalesLine,ChangedFieldNo,CurrFieldNo);
          SalesLine.MODIFY(TRUE);
        UNTIL SalesLine.NEXT = 0;
    END;

    LOCAL PROCEDURE ConfirmResvDateConflict@41();
    VAR
      ResvEngMgt@1000 : Codeunit 99000831;
    BEGIN
      IF ResvEngMgt.ResvExistsForSalesHeader(Rec) THEN
        IF NOT CONFIRM(Text063,FALSE) THEN
          ERROR('');
    END;

    [External]
    PROCEDURE CreateDim@16(Type1@1000 : Integer;No1@1001 : Code[20];Type2@1002 : Integer;No2@1003 : Code[20];Type3@1004 : Integer;No3@1005 : Code[20];Type4@1006 : Integer;No4@1007 : Code[20];Type5@1008 : Integer;No5@1009 : Code[20]);
    VAR
      SourceCodeSetup@1010 : Record 242;
      TableID@1011 : ARRAY [10] OF Integer;
      No@1012 : ARRAY [10] OF Code[20];
      OldDimSetID@1013 : Integer;
    BEGIN
      SourceCodeSetup.GET;
      TableID[1] := Type1;
      No[1] := No1;
      TableID[2] := Type2;
      No[2] := No2;
      TableID[3] := Type3;
      No[3] := No3;
      TableID[4] := Type4;
      No[4] := No4;
      TableID[5] := Type5;
      No[5] := No5;
      OnAfterCreateDimTableIDs(Rec,CurrFieldNo,TableID,No);

      "Shortcut Dimension 1 Code" := '';
      "Shortcut Dimension 2 Code" := '';
      OldDimSetID := "Dimension Set ID";
      "Dimension Set ID" :=
        DimMgt.GetRecDefaultDimID(
          Rec,CurrFieldNo,TableID,No,SourceCodeSetup.Sales,"Shortcut Dimension 1 Code","Shortcut Dimension 2 Code",0,0);

      OnCreateDimOnBeforeUpdateLines(Rec,xRec,CurrFieldNo);

      IF (OldDimSetID <> "Dimension Set ID") AND SalesLinesExist THEN BEGIN
        MODIFY;
        UpdateAllLineDim("Dimension Set ID",OldDimSetID);
      END;
    END;

    [External]
    PROCEDURE ValidateShortcutDimCode@19(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    VAR
      OldDimSetID@1005 : Integer;
    BEGIN
      OldDimSetID := "Dimension Set ID";
      DimMgt.ValidateShortcutDimValues(FieldNumber,ShortcutDimCode,"Dimension Set ID");
      IF "No." <> '' THEN
        MODIFY;

      IF OldDimSetID <> "Dimension Set ID" THEN BEGIN
        MODIFY;
        IF SalesLinesExist THEN
          UpdateAllLineDim("Dimension Set ID",OldDimSetID);
      END;

      OnAfterValidateShortcutDimCode(Rec,xRec,FieldNumber,ShortcutDimCode);
    END;

    LOCAL PROCEDURE ShippedSalesLinesExist@22() : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETFILTER("Quantity Shipped",'<>0');
      EXIT(SalesLine.FINDFIRST);
    END;

    LOCAL PROCEDURE ReturnReceiptExist@5800() : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETFILTER("Return Qty. Received",'<>0');
      EXIT(SalesLine.FINDFIRST);
    END;

    LOCAL PROCEDURE DeleteSalesLines@20();
    VAR
      ReservMgt@1000 : Codeunit 99000845;
    BEGIN
      IF SalesLine.FINDSET THEN BEGIN
        ReservMgt.DeleteDocumentReservation(DATABASE::"Sales Line","Document Type","No.",GetHideValidationDialog);
        REPEAT
          SalesLine.SuspendStatusCheck(TRUE);
          SalesLine.DELETE(TRUE);
        UNTIL SalesLine.NEXT = 0;
      END;
    END;

    LOCAL PROCEDURE ClearItemAssgntSalesFilter@17(VAR TempItemChargeAssgntSales@1000 : TEMPORARY Record 5809);
    BEGIN
      TempItemChargeAssgntSales.SETRANGE("Document Line No.");
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. Type");
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. No.");
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. Line No.");
    END;

    [External]
    PROCEDURE CheckCustomerCreated@18(Prompt@1000 : Boolean) : Boolean;
    VAR
      Cont@1001 : Record 5050;
      ConfirmManagement@1002 : Codeunit 27;
    BEGIN
      IF ("Bill-to Customer No." <> '') AND ("Sell-to Customer No." <> '') THEN
        EXIT(TRUE);

      IF Prompt THEN
        IF NOT ConfirmManagement.ConfirmProcess(Text035,TRUE) THEN
          EXIT(FALSE);

      IF "Sell-to Customer No." = '' THEN BEGIN
        TESTFIELD("Sell-to Contact No.");
        TESTFIELD("Sell-to Customer Template Code");
        GetContact(Cont,"Sell-to Contact No.");
        Cont.CreateCustomer("Sell-to Customer Template Code");
        COMMIT;
        GET("Document Type"::Quote,"No.");
      END;

      IF "Bill-to Customer No." = '' THEN BEGIN
        TESTFIELD("Bill-to Contact No.");
        TESTFIELD("Bill-to Customer Template Code");
        GetContact(Cont,"Bill-to Contact No.");
        Cont.CreateCustomer("Bill-to Customer Template Code");
        COMMIT;
        GET("Document Type"::Quote,"No.");
      END;

      EXIT(("Bill-to Customer No." <> '') AND ("Sell-to Customer No." <> ''));
    END;

    LOCAL PROCEDURE CheckShipmentInfo@116(VAR SalesLine@1000 : Record 37;BillTo@1001 : Boolean);
    BEGIN
      IF "Document Type" = "Document Type"::Order THEN
        SalesLine.SETFILTER("Quantity Shipped",'<>0')
      ELSE
        IF "Document Type" = "Document Type"::Invoice THEN BEGIN
          IF NOT BillTo THEN
            SalesLine.SETRANGE("Sell-to Customer No.",xRec."Sell-to Customer No.");
          SalesLine.SETFILTER("Shipment No.",'<>%1','');
        END;

      IF SalesLine.FINDFIRST THEN
        IF "Document Type" = "Document Type"::Order THEN
          TestQuantityShippedField(SalesLine)
        ELSE
          SalesLine.TESTFIELD("Shipment No.",'');
      SalesLine.SETRANGE("Shipment No.");
      SalesLine.SETRANGE("Quantity Shipped");
    END;

    LOCAL PROCEDURE CheckPrepmtInfo@119(VAR SalesLine@1000 : Record 37);
    BEGIN
      IF "Document Type" = "Document Type"::Order THEN BEGIN
        SalesLine.SETFILTER("Prepmt. Amt. Inv.",'<>0');
        IF SalesLine.FIND('-') THEN
          SalesLine.TESTFIELD("Prepmt. Amt. Inv.",0);
        SalesLine.SETRANGE("Prepmt. Amt. Inv.");
      END;
    END;

    LOCAL PROCEDURE CheckReturnInfo@121(VAR SalesLine@1000 : Record 37;BillTo@1001 : Boolean);
    BEGIN
      IF "Document Type" = "Document Type"::"Return Order" THEN
        SalesLine.SETFILTER("Return Qty. Received",'<>0')
      ELSE
        IF "Document Type" = "Document Type"::"Credit Memo" THEN BEGIN
          IF NOT BillTo THEN
            SalesLine.SETRANGE("Sell-to Customer No.",xRec."Sell-to Customer No.");
          SalesLine.SETFILTER("Return Receipt No.",'<>%1','');
        END;

      IF SalesLine.FINDFIRST THEN
        IF "Document Type" = "Document Type"::"Return Order" THEN
          SalesLine.TESTFIELD("Return Qty. Received",0)
        ELSE
          SalesLine.TESTFIELD("Return Receipt No.",'');
    END;

    LOCAL PROCEDURE CopyFromSellToCustTemplate@281(SellToCustTemplate@1000 : Record 5105);
    BEGIN
      SellToCustTemplate.TESTFIELD("Gen. Bus. Posting Group");
      "Gen. Bus. Posting Group" := SellToCustTemplate."Gen. Bus. Posting Group";
      "VAT Bus. Posting Group" := SellToCustTemplate."VAT Bus. Posting Group";
      IF "Bill-to Customer No." = '' THEN
        VALIDATE("Bill-to Customer Template Code","Sell-to Customer Template Code");

      OnAfterCopyFromSellToCustTemplate(Rec,SellToCustTemplate);
    END;

    LOCAL PROCEDURE RecreateReqLine@33(OldSalesLine@1000 : Record 37;NewSourceRefNo@1001 : Integer;ToTemp@1002 : Boolean);
    VAR
      ReqLine@1003 : Record 246;
      TempReqLine@1004 : TEMPORARY Record 246;
    BEGIN
      IF ToTemp THEN BEGIN
        ReqLine.SETCURRENTKEY("Order Promising ID","Order Promising Line ID","Order Promising Line No.");
        ReqLine.SETRANGE("Order Promising ID",OldSalesLine."Document No.");
        ReqLine.SETRANGE("Order Promising Line ID",OldSalesLine."Line No.");
        IF ReqLine.FINDSET THEN
          REPEAT
            TempReqLine := ReqLine;
            TempReqLine.INSERT;
          UNTIL ReqLine.NEXT = 0;
        ReqLine.DELETEALL;
      END ELSE BEGIN
        CLEAR(TempReqLine);
        TempReqLine.SETCURRENTKEY("Order Promising ID","Order Promising Line ID","Order Promising Line No.");
        TempReqLine.SETRANGE("Order Promising ID",OldSalesLine."Document No.");
        TempReqLine.SETRANGE("Order Promising Line ID",OldSalesLine."Line No.");
        IF TempReqLine.FINDSET THEN
          REPEAT
            ReqLine := TempReqLine;
            ReqLine."Order Promising Line ID" := NewSourceRefNo;
            ReqLine.INSERT;
          UNTIL TempReqLine.NEXT = 0;
        TempReqLine.DELETEALL;
      END;
    END;

    LOCAL PROCEDURE UpdateSellToCont@24(CustomerNo@1000 : Code[20]);
    VAR
      ContBusRel@1003 : Record 5054;
      Cust@1004 : Record 18;
      OfficeContact@1001 : Record 5050;
      OfficeMgt@1002 : Codeunit 1630;
    BEGIN
      IF OfficeMgt.GetContact(OfficeContact,CustomerNo) THEN BEGIN
        HideValidationDialog := TRUE;
        UpdateSellToCust(OfficeContact."No.");
        HideValidationDialog := FALSE;
      END ELSE
        IF Cust.GET(CustomerNo) THEN BEGIN
          IF Cust."Primary Contact No." <> '' THEN
            "Sell-to Contact No." := Cust."Primary Contact No."
          ELSE BEGIN
            ContBusRel.RESET;
            ContBusRel.SETCURRENTKEY("Link to Table","No.");
            ContBusRel.SETRANGE("Link to Table",ContBusRel."Link to Table"::Customer);
            ContBusRel.SETRANGE("No.","Sell-to Customer No.");
            IF ContBusRel.FINDFIRST THEN
              "Sell-to Contact No." := ContBusRel."Contact No."
            ELSE
              "Sell-to Contact No." := '';
          END;
          "Sell-to Contact" := Cust.Contact;
        END;
      IF "Sell-to Contact No." <> '' THEN
        IF OfficeContact.GET("Sell-to Contact No.") THEN
          OfficeContact.CheckIfPrivacyBlockedGeneric;

      OnAfterUpdateSellToCont(Rec,Cust,OfficeContact);
    END;

    LOCAL PROCEDURE UpdateBillToCont@27(CustomerNo@1000 : Code[20]);
    VAR
      ContBusRel@1003 : Record 5054;
      Cust@1001 : Record 18;
      Contact@1002 : Record 5050;
    BEGIN
      IF Cust.GET(CustomerNo) THEN BEGIN
        IF Cust."Primary Contact No." <> '' THEN
          "Bill-to Contact No." := Cust."Primary Contact No."
        ELSE BEGIN
          ContBusRel.RESET;
          ContBusRel.SETCURRENTKEY("Link to Table","No.");
          ContBusRel.SETRANGE("Link to Table",ContBusRel."Link to Table"::Customer);
          ContBusRel.SETRANGE("No.","Bill-to Customer No.");
          IF ContBusRel.FINDFIRST THEN
            "Bill-to Contact No." := ContBusRel."Contact No."
          ELSE
            "Bill-to Contact No." := '';
        END;
        "Bill-to Contact" := Cust.Contact;
      END;
      IF "Bill-to Contact No." <> '' THEN
        IF Contact.GET("Bill-to Contact No.") THEN
          Contact.CheckIfPrivacyBlockedGeneric;

      OnAfterUpdateBillToCont(Rec,Cust,Contact);
    END;

    LOCAL PROCEDURE UpdateSellToCust@25(ContactNo@1002 : Code[20]);
    VAR
      ContBusinessRelation@1007 : Record 5054;
      Customer@1006 : Record 18;
      Cont@1005 : Record 5050;
      CustTemplate@1004 : Record 5105;
      SearchContact@1003 : Record 5050;
      ContactBusinessRelationFound@1001 : Boolean;
    BEGIN
      IF NOT Cont.GET(ContactNo) THEN BEGIN
        "Sell-to Contact" := '';
        EXIT;
      END;
      "Sell-to Contact No." := Cont."No.";

      IF Cont.Type = Cont.Type::Person THEN
        ContactBusinessRelationFound := ContBusinessRelation.FindByContact(ContBusinessRelation."Link to Table"::Customer,Cont."No.");
      IF NOT ContactBusinessRelationFound THEN
        ContactBusinessRelationFound :=
          ContBusinessRelation.FindByContact(ContBusinessRelation."Link to Table"::Customer,Cont."Company No.");

      IF ContactBusinessRelationFound THEN BEGIN
        IF ("Sell-to Customer No." <> '') AND ("Sell-to Customer No." <> ContBusinessRelation."No.") THEN
          ERROR(Text037,Cont."No.",Cont.Name,"Sell-to Customer No.");

        IF "Sell-to Customer No." = '' THEN BEGIN
          SkipSellToContact := TRUE;
          VALIDATE("Sell-to Customer No.",ContBusinessRelation."No.");
          SkipSellToContact := FALSE;
        END;

        IF (Cont."E-Mail" = '') AND ("Sell-to E-Mail" <> '') AND GUIALLOWED THEN BEGIN
          IF CONFIRM(ConfirmEmptyEmailQst,FALSE,Cont."No.","Sell-to E-Mail") THEN
            VALIDATE("Sell-to E-Mail",Cont."E-Mail");
        END ELSE
          VALIDATE("Sell-to E-Mail",Cont."E-Mail");
        VALIDATE("Sell-to Phone No.",Cont."Phone No.");
      END ELSE BEGIN
        IF "Document Type" = "Document Type"::Quote THEN BEGIN
          IF Cont."Company No." <> '' THEN
            SearchContact.GET(Cont."Company No.")
          ELSE
            SearchContact := Cont;
          "Sell-to Customer Name" := SearchContact."Company Name";
          "Sell-to Customer Name 2" := SearchContact."Name 2";
          "Sell-to Phone No." := SearchContact."Phone No.";
          "Sell-to E-Mail" := SearchContact."E-Mail";
          SetShipToAddress(
            SearchContact."Company Name",SearchContact."Name 2",SearchContact.Address,SearchContact."Address 2",
            SearchContact.City,SearchContact."Post Code",SearchContact.County,SearchContact."Country/Region Code");
          IF ("Sell-to Customer Template Code" = '') AND (NOT CustTemplate.ISEMPTY) THEN
            VALIDATE("Sell-to Customer Template Code",Cont.FindCustomerTemplate);
        END ELSE
          ERROR(Text039,Cont."No.",Cont.Name);
        "Sell-to Contact" := Cont.Name;
      END;

      IF (Cont.Type = Cont.Type::Company) AND Customer.GET("Sell-to Customer No.") THEN
        "Sell-to Contact" := Customer.Contact
      ELSE
        IF Cont.Type = Cont.Type::Company THEN
          "Sell-to Contact" := ''
        ELSE
          "Sell-to Contact" := Cont.Name;

      IF "Document Type" = "Document Type"::Quote THEN BEGIN
        IF Customer.GET("Sell-to Customer No.") OR Customer.GET(ContBusinessRelation."No.") THEN BEGIN
          IF Customer."Copy Sell-to Addr. to Qte From" = Customer."Copy Sell-to Addr. to Qte From"::Company THEN BEGIN
            IF Cont."Company No." <> '' THEN
              Cont.GET(Cont."Company No.");
          END;
        END ELSE BEGIN
          IF Cont."Company No." <> '' THEN
            Cont.GET(Cont."Company No.");
        END;
        "Sell-to Address" := Cont.Address;
        "Sell-to Address 2" := Cont."Address 2";
        "Sell-to City" := Cont.City;
        "Sell-to Post Code" := Cont."Post Code";
        "Sell-to County" := Cont.County;
        "Sell-to Country/Region Code" := Cont."Country/Region Code";
      END;
      IF ("Sell-to Customer No." = "Bill-to Customer No.") OR
         ("Bill-to Customer No." = '')
      THEN
        VALIDATE("Bill-to Contact No.","Sell-to Contact No.");

      OnAfterUpdateSellToCust(Rec,Cont);
    END;

    LOCAL PROCEDURE UpdateBillToCust@26(ContactNo@1000 : Code[20]);
    VAR
      ContBusinessRelation@1005 : Record 5054;
      Cust@1004 : Record 18;
      Cont@1003 : Record 5050;
      CustTemplate@1002 : Record 5105;
      SearchContact@1001 : Record 5050;
      ContactBusinessRelationFound@1007 : Boolean;
    BEGIN
      IF NOT Cont.GET(ContactNo) THEN BEGIN
        "Bill-to Contact" := '';
        EXIT;
      END;
      "Bill-to Contact No." := Cont."No.";

      IF Cust.GET("Bill-to Customer No.") AND (Cont.Type = Cont.Type::Company) THEN
        "Bill-to Contact" := Cust.Contact
      ELSE
        IF Cont.Type = Cont.Type::Company THEN
          "Bill-to Contact" := ''
        ELSE
          "Bill-to Contact" := Cont.Name;

      IF Cont.Type = Cont.Type::Person THEN
        ContactBusinessRelationFound := ContBusinessRelation.FindByContact(ContBusinessRelation."Link to Table"::Customer,Cont."No.");
      IF NOT ContactBusinessRelationFound THEN
        ContactBusinessRelationFound :=
          ContBusinessRelation.FindByContact(ContBusinessRelation."Link to Table"::Customer,Cont."Company No.");

      IF ContactBusinessRelationFound THEN BEGIN
        IF "Bill-to Customer No." = '' THEN BEGIN
          SkipBillToContact := TRUE;
          VALIDATE("Bill-to Customer No.",ContBusinessRelation."No.");
          SkipBillToContact := FALSE;
          "Bill-to Customer Template Code" := '';
        END ELSE
          IF "Bill-to Customer No." <> ContBusinessRelation."No." THEN
            ERROR(Text037,Cont."No.",Cont.Name,"Bill-to Customer No.");
      END ELSE BEGIN
        IF "Document Type" = "Document Type"::Quote THEN BEGIN
          IF Cont."Company No." <> '' THEN
            SearchContact.GET(Cont."Company No.")
          ELSE
            SearchContact.GET(Cont."No.");

          "Bill-to Name" := SearchContact."Company Name";
          "Bill-to Name 2" := SearchContact."Name 2";
          "Bill-to Address" := SearchContact.Address;
          "Bill-to Address 2" := SearchContact."Address 2";
          "Bill-to City" := SearchContact.City;
          "Bill-to Post Code" := SearchContact."Post Code";
          "Bill-to County" := SearchContact.County;
          "Bill-to Country/Region Code" := SearchContact."Country/Region Code";
          "VAT Registration No." := SearchContact."VAT Registration No.";
          VALIDATE("Currency Code",SearchContact."Currency Code");
          "Language Code" := SearchContact."Language Code";

          OnUpdateBillToCustOnAfterSalesQuote(Rec,SearchContact);

          IF ("Bill-to Customer Template Code" = '') AND (NOT CustTemplate.ISEMPTY) THEN
            VALIDATE("Bill-to Customer Template Code",Cont.FindCustomerTemplate);
        END ELSE
          ERROR(Text039,Cont."No.",Cont.Name);
      END;
    END;

    LOCAL PROCEDURE UpdateSellToCustTemplateCode@1000();
    BEGIN
      IF ("Document Type" = "Document Type"::Quote) AND ("Sell-to Customer No." = '') AND ("Sell-to Customer Template Code" = '' ) AND
         (GetFilterContNo = '')
      THEN
        VALIDATE("Sell-to Customer Template Code",SelectSalesHeaderCustomerTemplate);
    END;

    LOCAL PROCEDURE GetShippingTime@23(CalledByFieldNo@1000 : Integer);
    VAR
      ShippingAgentServices@1001 : Record 5790;
    BEGIN
      IF (CalledByFieldNo <> CurrFieldNo) AND (CurrFieldNo <> 0) THEN
        EXIT;

      IF ShippingAgentServices.GET("Shipping Agent Code","Shipping Agent Service Code") THEN
        "Shipping Time" := ShippingAgentServices."Shipping Time"
      ELSE BEGIN
        GetCust("Sell-to Customer No.");
        "Shipping Time" := Cust."Shipping Time"
      END;
      IF NOT (CalledByFieldNo IN [FIELDNO("Shipping Agent Code"),FIELDNO("Shipping Agent Service Code")]) THEN
        VALIDATE("Shipping Time");
    END;

    LOCAL PROCEDURE GetContact@159(VAR Contact@1000 : Record 5050;ContactNo@1001 : Code[20]);
    BEGIN
      Contact.GET(ContactNo);
      IF (Contact.Type = Contact.Type::Person) AND (Contact."Company No." <> '') THEN
        Contact.GET(Contact."Company No.");
    END;

    PROCEDURE GetSellToCustomerFaxNo@209() : Text;
    VAR
      Customer@1000 : Record 18;
    BEGIN
      IF Customer.GET("Sell-to Customer No.") THEN
        EXIT(Customer."Fax No.");
    END;

    [Internal]
    PROCEDURE CheckCreditMaxBeforeInsert@28();
    VAR
      SalesHeader@1001 : Record 36;
      ContBusinessRelation@1002 : Record 5054;
      Cont@1003 : Record 5050;
      CustCheckCreditLimit@1000 : Codeunit 312;
      IsHandled@1004 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeCheckCreditMaxBeforeInsert(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF HideCreditCheckDialogue THEN
        EXIT;

      IF (GetFilterCustNo <> '') OR ("Sell-to Customer No." <> '') THEN BEGIN
        IF "Sell-to Customer No." <> '' THEN
          Cust.GET("Sell-to Customer No.")
        ELSE
          Cust.GET(GetFilterCustNo);
        IF Cust."Bill-to Customer No." <> '' THEN
          SalesHeader."Bill-to Customer No." := Cust."Bill-to Customer No."
        ELSE
          SalesHeader."Bill-to Customer No." := Cust."No.";
        CustCheckCreditLimit.SalesHeaderCheck(SalesHeader);
      END ELSE
        IF GetFilterContNo <> '' THEN BEGIN
          Cont.GET(GetFilterContNo);
          IF ContBusinessRelation.FindByContact(ContBusinessRelation."Link to Table"::Customer,Cont."Company No.") THEN BEGIN
            Cust.GET(ContBusinessRelation."No.");
            IF Cust."Bill-to Customer No." <> '' THEN
              SalesHeader."Bill-to Customer No." := Cust."Bill-to Customer No."
            ELSE
              SalesHeader."Bill-to Customer No." := Cust."No.";
            CustCheckCreditLimit.SalesHeaderCheck(SalesHeader);
          END;
        END;

      OnAfterCheckCreditMaxBeforeInsert(Rec);
    END;

    [External]
    PROCEDURE CreateInvtPutAwayPick@29();
    VAR
      WhseRequest@1000 : Record 5765;
    BEGIN
      IF "Document Type" = "Document Type"::Order THEN
        IF NOT IsApprovedForPosting THEN
          EXIT;
      TESTFIELD(Status,Status::Released);

      WhseRequest.RESET;
      WhseRequest.SETCURRENTKEY("Source Document","Source No.");
      CASE "Document Type" OF
        "Document Type"::Order:
          BEGIN
            IF "Shipping Advice" = "Shipping Advice"::Complete THEN
              CheckShippingAdvice;
            WhseRequest.SETRANGE("Source Document",WhseRequest."Source Document"::"Sales Order");
          END;
        "Document Type"::"Return Order":
          WhseRequest.SETRANGE("Source Document",WhseRequest."Source Document"::"Sales Return Order");
      END;
      WhseRequest.SETRANGE("Source No.","No.");
      REPORT.RUNMODAL(REPORT::"Create Invt Put-away/Pick/Mvmt",TRUE,FALSE,WhseRequest);
    END;

    [External]
    PROCEDURE CreateTask@30();
    VAR
      TempTask@1000 : TEMPORARY Record 5080;
    BEGIN
      TESTFIELD("Sell-to Contact No.");
      TempTask.CreateTaskFromSalesHeader(Rec);
    END;

    [External]
    PROCEDURE UpdateShipToAddress@31();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      OnBeforeUpdateShipToAddress(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF IsCreditDocType THEN BEGIN
        IF "Location Code" <> '' THEN BEGIN
          Location.GET("Location Code");
          SetShipToAddress(
            Location.Name,Location."Name 2",Location.Address,Location."Address 2",Location.City,
            Location."Post Code",Location.County,Location."Country/Region Code");
          "Ship-to Contact" := Location.Contact;
        END ELSE BEGIN
          CompanyInfo.GET;
          "Ship-to Code" := '';
          SetShipToAddress(
            CompanyInfo."Ship-to Name",CompanyInfo."Ship-to Name 2",CompanyInfo."Ship-to Address",CompanyInfo."Ship-to Address 2",
            CompanyInfo."Ship-to City",CompanyInfo."Ship-to Post Code",CompanyInfo."Ship-to County",
            CompanyInfo."Ship-to Country/Region Code");
          "Ship-to Contact" := CompanyInfo."Ship-to Contact";
        END;
        "VAT Country/Region Code" := "Sell-to Country/Region Code";
      END;

      OnAfterUpdateShipToAddress(Rec,xRec,CurrFieldNo);
    END;

    [External]
    PROCEDURE ShowDocDim@32();
    VAR
      OldDimSetID@1000 : Integer;
    BEGIN
      OldDimSetID := "Dimension Set ID";
      "Dimension Set ID" :=
        DimMgt.EditDimensionSet2(
          "Dimension Set ID",STRSUBSTNO('%1 %2',"Document Type","No."),
          "Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
      IF OldDimSetID <> "Dimension Set ID" THEN BEGIN
        MODIFY;
        IF SalesLinesExist THEN
          UpdateAllLineDim("Dimension Set ID",OldDimSetID);
      END;
    END;

    [External]
    PROCEDURE UpdateAllLineDim@34(NewParentDimSetID@1000 : Integer;OldParentDimSetID@1001 : Integer);
    VAR
      ATOLink@1003 : Record 904;
      NewDimSetID@1002 : Integer;
      ShippedReceivedItemLineDimChangeConfirmed@1004 : Boolean;
      IsHandled@1005 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeUpdateAllLineDim(Rec,NewParentDimSetID,OldParentDimSetID,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF NewParentDimSetID = OldParentDimSetID THEN
        EXIT;
      IF NOT GetHideValidationDialog AND GUIALLOWED THEN
        IF NOT CONFIRM(Text064) THEN
          EXIT;

      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.LOCKTABLE;
      IF SalesLine.FIND('-') THEN
        REPEAT
          NewDimSetID := DimMgt.GetDeltaDimSetID(SalesLine."Dimension Set ID",NewParentDimSetID,OldParentDimSetID);
          IF SalesLine."Dimension Set ID" <> NewDimSetID THEN BEGIN
            SalesLine."Dimension Set ID" := NewDimSetID;

            IF NOT GetHideValidationDialog AND GUIALLOWED THEN
              VerifyShippedReceivedItemLineDimChange(ShippedReceivedItemLineDimChangeConfirmed);

            DimMgt.UpdateGlobalDimFromDimSetID(
              SalesLine."Dimension Set ID",SalesLine."Shortcut Dimension 1 Code",SalesLine."Shortcut Dimension 2 Code");

            OnUpdateAllLineDimOnBeforeSalesLineModify(SalesLine);
            SalesLine.MODIFY;
            ATOLink.UpdateAsmDimFromSalesLine(SalesLine);
          END;
        UNTIL SalesLine.NEXT = 0;
    END;

    LOCAL PROCEDURE VerifyShippedReceivedItemLineDimChange@105(VAR ShippedReceivedItemLineDimChangeConfirmed@1000 : Boolean);
    BEGIN
      IF SalesLine.IsShippedReceivedItemDimChanged THEN
        IF NOT ShippedReceivedItemLineDimChangeConfirmed THEN
          ShippedReceivedItemLineDimChangeConfirmed := SalesLine.ConfirmShippedReceivedItemDimChange;
    END;

    [External]
    PROCEDURE LookupAdjmtValueEntries@37(QtyType@1000 : 'General,Invoicing');
    VAR
      ItemLedgEntry@1004 : Record 32;
      SalesLine@1001 : Record 37;
      SalesShptLine@1005 : Record 111;
      ReturnRcptLine@1002 : Record 6661;
      TempValueEntry@1003 : TEMPORARY Record 5802;
    BEGIN
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      TempValueEntry.RESET;
      TempValueEntry.DELETEALL;

      CASE "Document Type" OF
        "Document Type"::Order,"Document Type"::Invoice:
          BEGIN
            IF SalesLine.FINDSET THEN
              REPEAT
                IF (SalesLine.Type = SalesLine.Type::Item) AND (SalesLine.Quantity <> 0) THEN
                  WITH SalesShptLine DO BEGIN
                    IF SalesLine."Shipment No." <> '' THEN BEGIN
                      SETRANGE("Document No.",SalesLine."Shipment No.");
                      SETRANGE("Line No.",SalesLine."Shipment Line No.");
                    END ELSE BEGIN
                      SETCURRENTKEY("Order No.","Order Line No.");
                      SETRANGE("Order No.",SalesLine."Document No.");
                      SETRANGE("Order Line No.",SalesLine."Line No.");
                    END;
                    SETRANGE(Correction,FALSE);
                    IF QtyType = QtyType::Invoicing THEN
                      SETFILTER("Qty. Shipped Not Invoiced",'<>0');

                    IF FINDSET THEN
                      REPEAT
                        FilterPstdDocLnItemLedgEntries(ItemLedgEntry);
                        IF ItemLedgEntry.FINDSET THEN
                          REPEAT
                            CreateTempAdjmtValueEntries(TempValueEntry,ItemLedgEntry."Entry No.");
                          UNTIL ItemLedgEntry.NEXT = 0;
                      UNTIL NEXT = 0;
                  END;
              UNTIL SalesLine.NEXT = 0;
          END;
        "Document Type"::"Return Order","Document Type"::"Credit Memo":
          BEGIN
            IF SalesLine.FINDSET THEN
              REPEAT
                IF (SalesLine.Type = SalesLine.Type::Item) AND (SalesLine.Quantity <> 0) THEN
                  WITH ReturnRcptLine DO BEGIN
                    IF SalesLine."Return Receipt No." <> '' THEN BEGIN
                      SETRANGE("Document No.",SalesLine."Return Receipt No.");
                      SETRANGE("Line No.",SalesLine."Return Receipt Line No.");
                    END ELSE BEGIN
                      SETCURRENTKEY("Return Order No.","Return Order Line No.");
                      SETRANGE("Return Order No.",SalesLine."Document No.");
                      SETRANGE("Return Order Line No.",SalesLine."Line No.");
                    END;
                    SETRANGE(Correction,FALSE);
                    IF QtyType = QtyType::Invoicing THEN
                      SETFILTER("Return Qty. Rcd. Not Invd.",'<>0');

                    IF FINDSET THEN
                      REPEAT
                        FilterPstdDocLnItemLedgEntries(ItemLedgEntry);
                        IF ItemLedgEntry.FINDSET THEN
                          REPEAT
                            CreateTempAdjmtValueEntries(TempValueEntry,ItemLedgEntry."Entry No.");
                          UNTIL ItemLedgEntry.NEXT = 0;
                      UNTIL NEXT = 0;
                  END;
              UNTIL SalesLine.NEXT = 0;
          END;
      END;
      PAGE.RUNMODAL(0,TempValueEntry);
    END;

    [External]
    PROCEDURE GetCustomerVATRegistrationNumber@63() : Text;
    BEGIN
      EXIT("VAT Registration No.");
    END;

    [External]
    PROCEDURE GetCustomerVATRegistrationNumberLbl@62() : Text;
    BEGIN
      EXIT(FIELDCAPTION("VAT Registration No."));
    END;

    [External]
    PROCEDURE GetCustomerGlobalLocationNumber@164() : Text;
    BEGIN
      EXIT('');
    END;

    [External]
    PROCEDURE GetCustomerGlobalLocationNumberLbl@161() : Text;
    BEGIN
      EXIT('');
    END;

    LOCAL PROCEDURE CreateTempAdjmtValueEntries@38(VAR TempValueEntry@1001 : TEMPORARY Record 5802;ItemLedgEntryNo@1000 : Integer);
    VAR
      ValueEntry@1002 : Record 5802;
    BEGIN
      WITH ValueEntry DO BEGIN
        SETCURRENTKEY("Item Ledger Entry No.");
        SETRANGE("Item Ledger Entry No.",ItemLedgEntryNo);
        IF FINDSET THEN
          REPEAT
            IF Adjustment THEN BEGIN
              TempValueEntry := ValueEntry;
              IF TempValueEntry.INSERT THEN;
            END;
          UNTIL NEXT = 0;
      END;
    END;

    [Internal]
    PROCEDURE GetPstdDocLinesToRevere@39();
    VAR
      SalesPostedDocLines@1000 : Page 5850;
    BEGIN
      GetCust("Sell-to Customer No.");
      SalesPostedDocLines.SetToSalesHeader(Rec);
      SalesPostedDocLines.SETRECORD(Cust);
      SalesPostedDocLines.LOOKUPMODE := TRUE;
      IF SalesPostedDocLines.RUNMODAL = ACTION::LookupOK THEN
        SalesPostedDocLines.CopyLineToDoc;

      CLEAR(SalesPostedDocLines);
    END;

    [External]
    PROCEDURE CalcInvDiscForHeader@45();
    VAR
      SalesInvDisc@1000 : Codeunit 60;
    BEGIN
      GetSalesSetup;
      IF SalesSetup."Calc. Inv. Discount" THEN
        SalesInvDisc.CalculateIncDiscForHeader(Rec);
    END;

    [External]
    PROCEDURE SetSecurityFilterOnRespCenter@43();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeSetSecurityFilterOnRespCenter(Rec,IsHandled);
      IF (NOT IsHandled) AND (UserSetupMgt.GetSalesFilter <> '') THEN BEGIN
        FILTERGROUP(2);
        SETRANGE("Responsibility Center",UserSetupMgt.GetSalesFilter);
        FILTERGROUP(0);
      END;

      SETRANGE("Date Filter",0D,WORKDATE - 1);
    END;

    LOCAL PROCEDURE SynchronizeForReservations@42(VAR NewSalesLine@1000 : Record 37;OldSalesLine@1001 : Record 37);
    BEGIN
      NewSalesLine.CALCFIELDS("Reserved Quantity");
      IF NewSalesLine."Reserved Quantity" = 0 THEN
        EXIT;
      IF NewSalesLine."Location Code" <> OldSalesLine."Location Code" THEN
        NewSalesLine.VALIDATE("Location Code",OldSalesLine."Location Code");
      IF NewSalesLine."Bin Code" <> OldSalesLine."Bin Code" THEN
        NewSalesLine.VALIDATE("Bin Code",OldSalesLine."Bin Code");
      IF NewSalesLine.MODIFY THEN;
    END;

    [External]
    PROCEDURE InventoryPickConflict@46(DocType@1002 : 'Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order';DocNo@1003 : Code[20];ShippingAdvice@1004 : 'Partial,Complete') : Boolean;
    VAR
      WarehouseActivityLine@1000 : Record 5767;
      SalesLine@1001 : Record 37;
    BEGIN
      IF ShippingAdvice <> ShippingAdvice::Complete THEN
        EXIT(FALSE);
      WarehouseActivityLine.SETCURRENTKEY("Source Type","Source Subtype","Source No.");
      WarehouseActivityLine.SETRANGE("Source Type",DATABASE::"Sales Line");
      WarehouseActivityLine.SETRANGE("Source Subtype",DocType);
      WarehouseActivityLine.SETRANGE("Source No.",DocNo);
      IF WarehouseActivityLine.ISEMPTY THEN
        EXIT(FALSE);
      SalesLine.SETRANGE("Document Type",DocType);
      SalesLine.SETRANGE("Document No.",DocNo);
      SalesLine.SETRANGE(Type,SalesLine.Type::Item);
      IF SalesLine.ISEMPTY THEN
        EXIT(FALSE);
      EXIT(TRUE);
    END;

    [External]
    PROCEDURE WhseShpmntConflict@52(DocType@1002 : 'Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order';DocNo@1001 : Code[20];ShippingAdvice@1000 : 'Partial,Complete') : Boolean;
    VAR
      WarehouseShipmentLine@1003 : Record 7321;
    BEGIN
      IF ShippingAdvice <> ShippingAdvice::Complete THEN
        EXIT(FALSE);
      WarehouseShipmentLine.SETCURRENTKEY("Source Type","Source Subtype","Source No.","Source Line No.");
      WarehouseShipmentLine.SETRANGE("Source Type",DATABASE::"Sales Line");
      WarehouseShipmentLine.SETRANGE("Source Subtype",DocType);
      WarehouseShipmentLine.SETRANGE("Source No.",DocNo);
      IF WarehouseShipmentLine.ISEMPTY THEN
        EXIT(FALSE);
      EXIT(TRUE);
    END;

    LOCAL PROCEDURE CheckCreditLimit@47();
    VAR
      SalesHeader@1000 : Record 36;
      IsHandled@1001 : Boolean;
    BEGIN
      SalesHeader := Rec;

      IF GUIALLOWED AND
         (CurrFieldNo <> 0) AND CheckCreditLimitCondition AND SalesHeader.FIND
      THEN BEGIN
        "Amount Including VAT" := 0;
        IF "Document Type" = "Document Type"::Order THEN
          IF BilltoCustomerNoChanged THEN BEGIN
            SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
            SalesLine.SETRANGE("Document No.","No.");
            SalesLine.CALCSUMS("Outstanding Amount","Shipped Not Invoiced");
            "Amount Including VAT" := SalesLine."Outstanding Amount" + SalesLine."Shipped Not Invoiced";
          END;

        IsHandled := FALSE;
        OnBeforeCheckCreditLimit(Rec,IsHandled);
        IF NOT IsHandled THEN
          CustCheckCreditLimit.SalesHeaderCheck(Rec);

        CALCFIELDS("Amount Including VAT");
      END;
    END;

    LOCAL PROCEDURE CheckCreditLimitCondition@289() : Boolean;
    VAR
      RunCheck@1000 : Boolean;
    BEGIN
      RunCheck := ("Document Type" <= "Document Type"::Invoice) OR ("Document Type" = "Document Type"::"Blanket Order");
      OnAfterCheckCreditLimitCondition(Rec,RunCheck);
      EXIT(RunCheck);
    END;

    [Internal]
    PROCEDURE CheckItemAvailabilityInLines@142();
    VAR
      SalesLine@1000 : Record 37;
      ItemCheckAvail@1001 : Codeunit 311;
    BEGIN
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETRANGE(Type,SalesLine.Type::Item);
      SalesLine.SETFILTER("No.",'<>%1','');
      SalesLine.SETFILTER("Outstanding Quantity",'<>%1',0);
      OnCheckItemAvailabilityInLinesOnAfterSetFilters(SalesLine);
      IF SalesLine.FINDSET THEN
        REPEAT
          IF ItemCheckAvail.SalesLineCheck(SalesLine) THEN
            ItemCheckAvail.RaiseUpdateInterruptedError;
        UNTIL SalesLine.NEXT = 0;
    END;

    [External]
    PROCEDURE QtyToShipIsZero@49() : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETFILTER("Qty. to Ship",'<>0');
      EXIT(SalesLine.ISEMPTY);
    END;

    [Internal]
    PROCEDURE IsApprovedForPosting@53() : Boolean;
    VAR
      PrepaymentMgt@1001 : Codeunit 441;
      Approved@1000 : Boolean;
    BEGIN
      IF ApprovalsMgmt.PrePostApprovalCheckSales(Rec) THEN BEGIN
        IF PrepaymentMgt.TestSalesPrepayment(Rec) THEN
          ERROR(PrepaymentInvoicesNotPaidErr,"Document Type","No.");
        IF "Document Type" = "Document Type"::Order THEN
          IF PrepaymentMgt.TestSalesPayment(Rec) THEN
            ERROR(Text072,"Document Type","No.");
        Approved := TRUE;
        OnAfterIsApprovedForPosting(Rec,Approved);
        EXIT(Approved);
      END;
    END;

    [External]
    PROCEDURE IsApprovedForPostingBatch@54() : Boolean;
    VAR
      PrepaymentMgt@1000 : Codeunit 441;
      Approved@1001 : Boolean;
    BEGIN
      IF ApprovalsMgmt.PrePostApprovalCheckSales(Rec) THEN BEGIN
        IF PrepaymentMgt.TestSalesPrepayment(Rec) THEN
          Approved := FALSE;
        IF PrepaymentMgt.TestSalesPayment(Rec) THEN
          Approved := FALSE;
        Approved := TRUE;
        OnAfterIsApprovedForPostingBatch(Rec,Approved);
        EXIT(Approved);
      END;
    END;

    PROCEDURE ValidatePaymentTerms@1100000();
    BEGIN
      GLSetup.GET;
      IF ("Document Type" <> "Document Type"::"Credit Memo") OR
         (GLSetup."Payment Discount Type" = GLSetup."Payment Discount Type"::"Calc. Pmt. Disc. on Lines")
      THEN
        IF ("Payment Terms Code" <> '') AND ("Document Date" <> 0D) THEN BEGIN
          PaymentTerms.GET("Payment Terms Code");
          "Due Date" := CALCDATE(PaymentTerms."Due Date Calculation","Document Date");
          AdjustDueDate.SalesAdjustDueDate(
            "Due Date","Document Date",PaymentTerms.CalculateMaxDueDate("Document Date"),"Bill-to Customer No.");
          "Pmt. Discount Date" := CALCDATE(PaymentTerms."Due Date Calculation","Document Date");
        END ELSE BEGIN
          "Due Date" := "Document Date";
          AdjustDueDate.SalesAdjustDueDate("Due Date","Document Date",31129999D,"Bill-to Customer No.");
          "Pmt. Discount Date" := "Document Date";
        END;
    END;

    [External]
    PROCEDURE GetLegalStatement@60() : Text;
    BEGIN
      GetSalesSetup;
      EXIT(SalesSetup.GetLegalStatement);
    END;

    [External]
    PROCEDURE SendToPosting@57(PostingCodeunitID@1000 : Integer) IsSuccess : Boolean;
    VAR
      ErrorMessageMgt@1001 : Codeunit 28;
      ErrorMessageHandler@1002 : Codeunit 29;
    BEGIN
      IF NOT IsApprovedForPosting THEN
        EXIT;

      COMMIT;
      ErrorMessageMgt.Activate(ErrorMessageHandler);
      IsSuccess := CODEUNIT.RUN(PostingCodeunitID,Rec);
      IF NOT IsSuccess THEN
        ErrorMessageHandler.ShowErrors;
    END;

    [External]
    PROCEDURE CancelBackgroundPosting@48();
    VAR
      SalesPostViaJobQueue@1000 : Codeunit 88;
    BEGIN
      SalesPostViaJobQueue.CancelQueueEntry(Rec);
    END;

    [Internal]
    PROCEDURE EmailRecords@135(ShowDialog@1000 : Boolean);
    VAR
      DocumentSendingProfile@1003 : Record 60;
      DummyReportSelections@1001 : Record 77;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Quote:
          BEGIN
            DocumentSendingProfile.TrySendToEMail(
              DummyReportSelections.Usage::"S.Quote",Rec,FIELDNO("No."),
              GetDocTypeTxt,FIELDNO("Bill-to Customer No."),ShowDialog);
            FIND;
            "Quote Sent to Customer" := CURRENTDATETIME;
            MODIFY;
          END;
        "Document Type"::Invoice:
          DocumentSendingProfile.TrySendToEMail(
            DummyReportSelections.Usage::"S.Invoice Draft",Rec,FIELDNO("No."),
            GetDocTypeTxt,FIELDNO("Bill-to Customer No."),ShowDialog);
      END;

      OnAfterSendSalesHeader(Rec,ShowDialog);
    END;

    [External]
    PROCEDURE GetDocTypeTxt@140() TypeText : Text[50];
    VAR
      IdentityManagement@1000 : Codeunit 9801;
    BEGIN
      IF "Document Type" = "Document Type"::Quote THEN
        IF IdentityManagement.IsInvAppId THEN
          TypeText := EstimateTxt;

      TypeText := FORMAT("Document Type");

      OnAfterGetDocTypeText(Rec,TypeText);
    END;

    [External]
    PROCEDURE LinkSalesDocWithOpportunity@79(OldOpportunityNo@1000 : Code[20]);
    VAR
      SalesHeader@1001 : Record 36;
      Opportunity@1002 : Record 5092;
      ConfirmManagement@1003 : Codeunit 27;
    BEGIN
      IF "Opportunity No." <> OldOpportunityNo THEN BEGIN
        IF "Opportunity No." <> '' THEN
          IF Opportunity.GET("Opportunity No.") THEN BEGIN
            Opportunity.TESTFIELD(Status,Opportunity.Status::"In Progress");
            IF Opportunity."Sales Document No." <> '' THEN BEGIN
              IF ConfirmManagement.ConfirmProcess(
                   STRSUBSTNO(Text048,Opportunity."Sales Document No.",Opportunity."No."),TRUE)
              THEN BEGIN
                IF SalesHeader.GET("Document Type"::Quote,Opportunity."Sales Document No.") THEN BEGIN
                  SalesHeader."Opportunity No." := '';
                  SalesHeader.MODIFY;
                END;
                UpdateOpportunityLink(Opportunity,Opportunity."Sales Document Type"::Quote,"No.");
              END ELSE
                "Opportunity No." := OldOpportunityNo;
            END ELSE
              UpdateOpportunityLink(Opportunity,Opportunity."Sales Document Type"::Quote,"No.");
          END;
        IF (OldOpportunityNo <> '') AND Opportunity.GET(OldOpportunityNo) THEN
          UpdateOpportunityLink(Opportunity,Opportunity."Sales Document Type"::" ",'');
      END;
    END;

    LOCAL PROCEDURE UpdateOpportunityLink@80(Opportunity@1000 : Record 5092;SalesDocumentType@1001 : Option;SalesHeaderNo@1002 : Code[20]);
    BEGIN
      Opportunity."Sales Document Type" := SalesDocumentType;
      Opportunity."Sales Document No." := SalesHeaderNo;
      Opportunity.MODIFY;
    END;

    [External]
    PROCEDURE SynchronizeAsmHeader@56();
    VAR
      AsmHeader@1003 : Record 900;
      ATOLink@1002 : Record 904;
      Window@1000 : Dialog;
    BEGIN
      ATOLink.SETCURRENTKEY(Type,"Document Type","Document No.");
      ATOLink.SETRANGE(Type,ATOLink.Type::Sale);
      ATOLink.SETRANGE("Document Type","Document Type");
      ATOLink.SETRANGE("Document No.","No.");
      IF ATOLink.FINDSET THEN
        REPEAT
          IF AsmHeader.GET(ATOLink."Assembly Document Type",ATOLink."Assembly Document No.") THEN
            IF "Posting Date" <> AsmHeader."Posting Date" THEN BEGIN
              Window.OPEN(STRSUBSTNO(SynchronizingMsg,"No.",AsmHeader."No."));
              AsmHeader.VALIDATE("Posting Date","Posting Date");
              AsmHeader.MODIFY;
              Window.CLOSE;
            END;
        UNTIL ATOLink.NEXT = 0;
    END;

    [External]
    PROCEDURE CheckShippingAdvice@55();
    VAR
      SalesLine@1000 : Record 37;
      Item@1003 : Record 27;
      QtyToShipBaseTotal@1002 : Decimal;
      Result@1001 : Boolean;
    BEGIN
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETRANGE("Drop Shipment",FALSE);
      SalesLine.SETRANGE(Type,SalesLine.Type::Item);
      Result := TRUE;
      IF SalesLine.FINDSET THEN
        REPEAT
          Item.GET(SalesLine."No.");
          IF SalesLine.IsShipment AND (Item.Type = Item.Type::Inventory) THEN BEGIN
            QtyToShipBaseTotal += SalesLine."Qty. to Ship (Base)";
            IF SalesLine."Quantity (Base)" <>
               SalesLine."Qty. to Ship (Base)" + SalesLine."Qty. Shipped (Base)"
            THEN
              Result := FALSE;
          END;
        UNTIL SalesLine.NEXT = 0;
      IF QtyToShipBaseTotal = 0 THEN
        Result := TRUE;

      OnAfterCheckShippingAdvice(Rec,Result);
      IF NOT Result THEN
        ERROR(ShippingAdviceErr);
    END;

    PROCEDURE GetCustVNT@1100001(NoClie@1100000 : Code[20];VAR Cliente@1100001 : Record 18);
    BEGIN
      // VNTES.i
      GetCust(NoClie);
      Cliente := Cust;
      // VNTES.f
    END;

    LOCAL PROCEDURE GetFilterCustNo@64() : Code[20];
    VAR
      MinValue@1002 : Code[20];
      MaxValue@1001 : Code[20];
    BEGIN
      IF GETFILTER("Sell-to Customer No.") <> '' THEN BEGIN
        IF TryGetFilterCustNoRange(MinValue,MaxValue) THEN
          IF MinValue = MaxValue THEN
            EXIT(MaxValue);
      END;
    END;

    [TryFunction]
    LOCAL PROCEDURE TryGetFilterCustNoRange@128(VAR MinValue@1001 : Code[20];VAR MaxValue@1000 : Code[20]);
    BEGIN
      MinValue := GETRANGEMIN("Sell-to Customer No.");
      MaxValue := GETRANGEMAX("Sell-to Customer No.");
    END;

    LOCAL PROCEDURE GetFilterCustNoByApplyingFilter@129() : Code[20];
    VAR
      SalesHeader@1002 : Record 36;
      MinValue@1001 : Code[20];
      MaxValue@1000 : Code[20];
    BEGIN
      IF GETFILTER("Sell-to Customer No.") <> '' THEN BEGIN
        SalesHeader.COPYFILTERS(Rec);
        SalesHeader.SETCURRENTKEY("Sell-to Customer No.");
        IF SalesHeader.FINDFIRST THEN
          MinValue := SalesHeader."Sell-to Customer No.";
        IF SalesHeader.FINDLAST THEN
          MaxValue := SalesHeader."Sell-to Customer No.";
        IF MinValue = MaxValue THEN
          EXIT(MaxValue);
      END;
    END;

    LOCAL PROCEDURE GetFilterContNo@65() : Code[20];
    BEGIN
      IF GETFILTER("Sell-to Contact No.") <> '' THEN
        IF GETRANGEMIN("Sell-to Contact No.") = GETRANGEMAX("Sell-to Contact No.") THEN
          EXIT(GETRANGEMAX("Sell-to Contact No."));
    END;

    LOCAL PROCEDURE CheckCreditLimitIfLineNotInsertedYet@66();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeCheckCreditLimitIfLineNotInsertedYet(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF "No." = '' THEN BEGIN
        HideCreditCheckDialogue := FALSE;
        CheckCreditMaxBeforeInsert;
        HideCreditCheckDialogue := TRUE;
      END;
    END;

    [External]
    PROCEDURE InvoicedLineExists@156() : Boolean;
    VAR
      SalesLine@1000 : Record 37;
    BEGIN
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETFILTER(Type,'<>%1',SalesLine.Type::" ");
      SalesLine.SETFILTER("Quantity Invoiced",'<>%1',0);
      EXIT(NOT SalesLine.ISEMPTY);
    END;

    [External]
    PROCEDURE CreateDimSetForPrepmtAccDefaultDim@73();
    VAR
      SalesLine@1000 : Record 37;
      TempSalesLine@1003 : TEMPORARY Record 37;
    BEGIN
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETFILTER("Prepmt. Amt. Inv.",'<>%1',0);
      IF SalesLine.FINDSET THEN
        REPEAT
          CollectParamsInBufferForCreateDimSet(TempSalesLine,SalesLine);
        UNTIL SalesLine.NEXT = 0;
      TempSalesLine.RESET;
      TempSalesLine.MARKEDONLY(FALSE);
      IF TempSalesLine.FINDSET THEN
        REPEAT
          SalesLine.CreateDim(DATABASE::"G/L Account",TempSalesLine."No.",
            DATABASE::Job,TempSalesLine."Job No.",
            DATABASE::"Responsibility Center",TempSalesLine."Responsibility Center");
        UNTIL TempSalesLine.NEXT = 0;
    END;

    LOCAL PROCEDURE CollectParamsInBufferForCreateDimSet@72(VAR TempSalesLine@1000 : TEMPORARY Record 37;SalesLine@1001 : Record 37);
    VAR
      GenPostingSetup@1003 : Record 252;
      DefaultDimension@1002 : Record 352;
    BEGIN
      TempSalesLine.SETRANGE("Gen. Bus. Posting Group",SalesLine."Gen. Bus. Posting Group");
      TempSalesLine.SETRANGE("Gen. Prod. Posting Group",SalesLine."Gen. Prod. Posting Group");
      IF NOT TempSalesLine.FINDFIRST THEN BEGIN
        GenPostingSetup.GET(SalesLine."Gen. Bus. Posting Group",SalesLine."Gen. Prod. Posting Group");
        DefaultDimension.SETRANGE("Table ID",DATABASE::"G/L Account");
        DefaultDimension.SETRANGE("No.",GenPostingSetup.GetSalesPrepmtAccount);
        InsertTempSalesLineInBuffer(TempSalesLine,SalesLine,GenPostingSetup."Sales Prepayments Account",DefaultDimension.ISEMPTY);
      END ELSE
        IF NOT TempSalesLine.MARK THEN BEGIN
          TempSalesLine.SETRANGE("Job No.",SalesLine."Job No.");
          TempSalesLine.SETRANGE("Responsibility Center",SalesLine."Responsibility Center");
          OnCollectParamsInBufferForCreateDimSetOnAfterSetTempSalesLineFilters(TempSalesLine,SalesLine);
          IF TempSalesLine.ISEMPTY THEN
            InsertTempSalesLineInBuffer(TempSalesLine,SalesLine,TempSalesLine."No.",FALSE);
        END;
    END;

    LOCAL PROCEDURE InsertTempSalesLineInBuffer@71(VAR TempSalesLine@1001 : TEMPORARY Record 37;SalesLine@1000 : Record 37;AccountNo@1002 : Code[20];DefaultDimensionsNotExist@1003 : Boolean);
    BEGIN
      TempSalesLine.INIT;
      TempSalesLine."Line No." := SalesLine."Line No.";
      TempSalesLine."No." := AccountNo;
      TempSalesLine."Job No." := SalesLine."Job No.";
      TempSalesLine."Responsibility Center" := SalesLine."Responsibility Center";
      TempSalesLine."Gen. Bus. Posting Group" := SalesLine."Gen. Bus. Posting Group";
      TempSalesLine."Gen. Prod. Posting Group" := SalesLine."Gen. Prod. Posting Group";
      TempSalesLine.MARK := DefaultDimensionsNotExist;
      OnInsertTempSalesLineInBufferOnBeforeTempSalesLineInsert(TempSalesLine,SalesLine);
      TempSalesLine.INSERT;
    END;

    [External]
    PROCEDURE OpenSalesOrderStatistics@70();
    VAR
      GestDtoPromo@1170170001 : Codeunit 7014458;
      LinVta@1170170000 : Record 37;
    BEGIN
      CalcInvDiscForHeader;
      // VNTES.i
      SalesSetup.GET;
      IF SalesSetup."Calc. dto. promocional (F9)" THEN BEGIN
        GestDtoPromo.CalcularConCabVenta(Rec,LinVta);
        COMMIT;
      END;
      // VNTES.f
      CreateDimSetForPrepmtAccDefaultDim;
      COMMIT;
      PAGE.RUNMODAL(PAGE::"Sales Order Statistics",Rec);
    END;

    [External]
    PROCEDURE GetCardpageID@58() : Integer;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Quote:
          EXIT(PAGE::"Sales Quote");
        "Document Type"::Order:
          EXIT(PAGE::"Sales Order");
        "Document Type"::Invoice:
          EXIT(PAGE::"Sales Invoice");
        "Document Type"::"Credit Memo":
          EXIT(PAGE::"Sales Credit Memo");
        "Document Type"::"Blanket Order":
          EXIT(PAGE::"Blanket Sales Order");
        "Document Type"::"Return Order":
          EXIT(PAGE::"Sales Return Order");
      END;
    END;

    [External]
    PROCEDURE CheckAvailableCreditLimit@67() : Decimal;
    VAR
      Customer@1000 : Record 18;
      AvailableCreditLimit@1002 : Decimal;
    BEGIN
      IF ("Bill-to Customer No." = '') AND ("Sell-to Customer No." = '') THEN
        EXIT(0);

      IF NOT Customer.GET("Bill-to Customer No.") THEN
        Customer.GET("Sell-to Customer No.");

      AvailableCreditLimit := Customer.CalcAvailableCredit;

      IF AvailableCreditLimit < 0 THEN
        OnCustomerCreditLimitExceeded
      ELSE
        OnCustomerCreditLimitNotExceeded;

      EXIT(AvailableCreditLimit);
    END;

    [External]
    PROCEDURE SetStatus@99(NewStatus@1000 : Option);
    BEGIN
      Status := NewStatus;
      MODIFY;
    END;

    LOCAL PROCEDURE TestSalesLineFieldsBeforeRecreate@68();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeTestSalesLineFieldsBeforeRecreate(Rec,IsHandled,SalesLine);
      IF IsHandled THEN
        EXIT;

      SalesLine.TESTFIELD("Job No.",'');
      SalesLine.TESTFIELD("Job Contract Entry No.",0);
      SalesLine.TESTFIELD("Quantity Invoiced",0);
      SalesLine.TESTFIELD("Return Qty. Received",0);
      SalesLine.TESTFIELD("Shipment No.",'');
      SalesLine.TESTFIELD("Return Receipt No.",'');
      SalesLine.TESTFIELD("Blanket Order No.",'');
      SalesLine.TESTFIELD("Prepmt. Amt. Inv.",0);
      TestQuantityShippedField(SalesLine);
    END;

    LOCAL PROCEDURE RecreateReservEntryReqLine@75(VAR TempSalesLine@1000 : TEMPORARY Record 37;VAR TempATOLink@1003 : TEMPORARY Record 904;VAR ATOLink@1002 : Record 904);
    BEGIN
      REPEAT
        TestSalesLineFieldsBeforeRecreate;
        IF (SalesLine."Location Code" <> "Location Code") AND (NOT SalesLine.IsNonInventoriableItem) THEN
          SalesLine.VALIDATE("Location Code","Location Code");
        TempSalesLine := SalesLine;
        IF SalesLine.Nonstock THEN BEGIN
          SalesLine.Nonstock := FALSE;
          SalesLine.MODIFY;
        END;

        IF ATOLink.AsmExistsForSalesLine(TempSalesLine) THEN BEGIN
          TempATOLink := ATOLink;
          TempATOLink.INSERT;
          ATOLink.DELETE;
        END;

        TempSalesLine.INSERT;
        OnAfterInsertTempSalesLine(SalesLine,TempSalesLine);
        SalesLineReserve.CopyReservEntryToTemp(TempReservEntry,SalesLine);
        RecreateReqLine(SalesLine,0,TRUE);
      UNTIL SalesLine.NEXT = 0;
    END;

    LOCAL PROCEDURE TransferItemChargeAssgntSalesToTemp@69(VAR ItemChargeAssgntSales@1001 : Record 5809;VAR TempItemChargeAssgntSales@1000 : TEMPORARY Record 5809);
    BEGIN
      ItemChargeAssgntSales.SETRANGE("Document Type","Document Type");
      ItemChargeAssgntSales.SETRANGE("Document No.","No.");
      IF ItemChargeAssgntSales.FINDSET THEN BEGIN
        REPEAT
          TempItemChargeAssgntSales.INIT;
          TempItemChargeAssgntSales := ItemChargeAssgntSales;
          TempItemChargeAssgntSales.INSERT;
        UNTIL ItemChargeAssgntSales.NEXT = 0;
        ItemChargeAssgntSales.DELETEALL;
      END;
    END;

    LOCAL PROCEDURE CreateSalesLine@78(VAR TempSalesLine@1000 : TEMPORARY Record 37);
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      OnBeforeCreateSalesLine(TempSalesLine,IsHandled);
      IF IsHandled THEN
        EXIT;

      SalesLine.INIT;
      SalesLine."Line No." := SalesLine."Line No." + 10000;
      SalesLine.VALIDATE(Type,TempSalesLine.Type);
      OnCreateSalesLineOnAfterAssignType(SalesLine,TempSalesLine);
      IF TempSalesLine."No." = '' THEN BEGIN
        SalesLine.VALIDATE(Description,TempSalesLine.Description);
        SalesLine.VALIDATE("Description 2",TempSalesLine."Description 2");
      END ELSE BEGIN
        SalesLine.VALIDATE("No.",TempSalesLine."No.");
        IF SalesLine.Type <> SalesLine.Type::" " THEN BEGIN
          SalesLine.VALIDATE("Unit of Measure Code",TempSalesLine."Unit of Measure Code");
          SalesLine.VALIDATE("Variant Code",TempSalesLine."Variant Code");
          IF TempSalesLine.Quantity <> 0 THEN BEGIN
            SalesLine.VALIDATE(Quantity,TempSalesLine.Quantity);
            SalesLine.VALIDATE("Qty. to Assemble to Order",TempSalesLine."Qty. to Assemble to Order");
          END;
          SalesLine."Purchase Order No." := TempSalesLine."Purchase Order No.";
          SalesLine."Purch. Order Line No." := TempSalesLine."Purch. Order Line No.";
          SalesLine."Drop Shipment" := SalesLine."Purch. Order Line No." <> 0;
        END;
        SalesLine.VALIDATE("Shipment Date",TempSalesLine."Shipment Date");
      END;
      OnBeforeSalesLineInsert(SalesLine,TempSalesLine);
      SalesLine.INSERT;
      OnAfterCreateSalesLine(SalesLine,TempSalesLine);
    END;

    LOCAL PROCEDURE CreateItemChargeAssgntSales@83(VAR TempItemChargeAssgntSales@1000 : TEMPORARY Record 5809;VAR TempSalesLine@1002 : TEMPORARY Record 37;VAR TempInteger@1003 : TEMPORARY Record 2000000026);
    VAR
      ItemChargeAssgntSales@1001 : Record 5809;
    BEGIN
      ClearItemAssgntSalesFilter(TempItemChargeAssgntSales);
      TempSalesLine.SETRANGE(Type,SalesLine.Type::"Charge (Item)");
      IF TempSalesLine.FINDSET THEN
        REPEAT
          TempItemChargeAssgntSales.SETRANGE("Document Line No.",TempSalesLine."Line No.");
          IF TempItemChargeAssgntSales.FINDSET THEN BEGIN
            REPEAT
              TempInteger.FINDFIRST;
              ItemChargeAssgntSales.INIT;
              ItemChargeAssgntSales := TempItemChargeAssgntSales;
              ItemChargeAssgntSales."Document Line No." := TempInteger.Number;
              ItemChargeAssgntSales.VALIDATE("Unit Cost",0);
              ItemChargeAssgntSales.INSERT;
            UNTIL TempItemChargeAssgntSales.NEXT = 0;
            TempInteger.DELETE;
          END;
        UNTIL TempSalesLine.NEXT = 0;

      ClearItemAssgntSalesFilter(TempItemChargeAssgntSales);
      TempItemChargeAssgntSales.DELETEALL;
    END;

    LOCAL PROCEDURE UpdateOutboundWhseHandlingTime@88();
    BEGIN
      IF "Location Code" <> '' THEN BEGIN
        IF Location.GET("Location Code") THEN
          "Outbound Whse. Handling Time" := Location."Outbound Whse. Handling Time";
      END ELSE
        IF InvtSetup.GET THEN
          "Outbound Whse. Handling Time" := InvtSetup."Outbound Whse. Handling Time";
    END;

    [Integration(TRUE)]
    PROCEDURE OnCheckSalesPostRestrictions@115();
    BEGIN
    END;

    [Integration(TRUE)]
    PROCEDURE OnCustomerCreditLimitExceeded@74();
    BEGIN
    END;

    [Integration(TRUE)]
    PROCEDURE OnCustomerCreditLimitNotExceeded@76();
    BEGIN
    END;

    [Integration(TRUE)]
    LOCAL PROCEDURE OnCheckSalesReleaseRestrictions@81();
    BEGIN
    END;

    [External]
    PROCEDURE CheckSalesReleaseRestrictions@162();
    VAR
      ApprovalsMgmt@1000 : Codeunit 1535;
    BEGIN
      OnCheckSalesReleaseRestrictions;
      ApprovalsMgmt.PrePostApprovalCheckSales(Rec);
    END;

    [External]
    PROCEDURE DeferralHeadersExist@82() : Boolean;
    VAR
      DeferralHeader@1000 : Record 1701;
      DeferralUtilities@1001 : Codeunit 1720;
    BEGIN
      DeferralHeader.SETRANGE("Deferral Doc. Type",DeferralUtilities.GetSalesDeferralDocType);
      DeferralHeader.SETRANGE("Gen. Jnl. Template Name",'');
      DeferralHeader.SETRANGE("Gen. Jnl. Batch Name",'');
      DeferralHeader.SETRANGE("Document Type","Document Type");
      DeferralHeader.SETRANGE("Document No.","No.");
      EXIT(NOT DeferralHeader.ISEMPTY);
    END;

    [External]
    PROCEDURE SetSellToCustomerFromFilter@186();
    VAR
      SellToCustomerNo@1000 : Code[20];
    BEGIN
      SellToCustomerNo := GetFilterCustNo;
      IF SellToCustomerNo = '' THEN BEGIN
        FILTERGROUP(2);
        SellToCustomerNo := GetFilterCustNo;
        IF SellToCustomerNo = '' THEN
          SellToCustomerNo := GetFilterCustNoByApplyingFilter;
        FILTERGROUP(0);
      END;
      IF SellToCustomerNo <> '' THEN
        VALIDATE("Sell-to Customer No.",SellToCustomerNo);
    END;

    [External]
    PROCEDURE CopySellToCustomerFilter@44();
    VAR
      SellToCustomerFilter@1000 : Text;
    BEGIN
      SellToCustomerFilter := GETFILTER("Sell-to Customer No.");
      IF SellToCustomerFilter <> '' THEN BEGIN
        FILTERGROUP(2);
        SETFILTER("Sell-to Customer No.",SellToCustomerFilter);
        FILTERGROUP(0)
      END;
    END;

    LOCAL PROCEDURE ConfirmUpdateDeferralDate@85();
    BEGIN
      IF GetHideValidationDialog OR NOT GUIALLOWED THEN
        Confirmed := TRUE
      ELSE
        Confirmed := CONFIRM(DeferralLineQst,FALSE);
      IF Confirmed THEN
        UpdateSalesLinesByFieldNo(SalesLine.FIELDNO("Deferral Code"),FALSE);
    END;

    [External]
    PROCEDURE BatchConfirmUpdateDeferralDate@130(VAR BatchConfirm@1000 : ' ,Skip,Update';ReplacePostingDate@1004 : Boolean;PostingDateReq@1003 : Date);
    BEGIN
      IF (NOT ReplacePostingDate) OR (PostingDateReq = "Posting Date") OR (BatchConfirm = BatchConfirm::Skip) THEN
        EXIT;

      IF NOT DeferralHeadersExist THEN
        EXIT;

      "Posting Date" := PostingDateReq;
      CASE BatchConfirm OF
        BatchConfirm::" ":
          BEGIN
            ConfirmUpdateDeferralDate;
            IF Confirmed THEN
              BatchConfirm := BatchConfirm::Update
            ELSE
              BatchConfirm := BatchConfirm::Skip;
          END;
        BatchConfirm::Update:
          UpdateSalesLinesByFieldNo(SalesLine.FIELDNO("Deferral Code"),FALSE);
      END;
      COMMIT;
    END;

    [External]
    PROCEDURE GetSelectedPaymentServicesText@84() : Text;
    VAR
      PaymentServiceSetup@1000 : Record 1060;
    BEGIN
      EXIT(PaymentServiceSetup.GetSelectedPaymentsText("Payment Service Set ID"));
    END;

    [External]
    PROCEDURE SetDefaultPaymentServices@86();
    VAR
      PaymentServiceSetup@1000 : Record 1060;
      SetID@1001 : Integer;
    BEGIN
      IF NOT PaymentServiceSetup.CanChangePaymentService(Rec) THEN
        EXIT;

      IF PaymentServiceSetup.GetDefaultPaymentServices(SetID) THEN
        VALIDATE("Payment Service Set ID",SetID);
    END;

    [External]
    PROCEDURE ChangePaymentServiceSetting@87();
    VAR
      PaymentServiceSetup@1000 : Record 1060;
      SetID@1001 : Integer;
    BEGIN
      SetID := "Payment Service Set ID";
      IF PaymentServiceSetup.SelectPaymentService(SetID) THEN BEGIN
        VALIDATE("Payment Service Set ID",SetID);
        MODIFY(TRUE);
      END;
    END;

    [External]
    PROCEDURE IsCreditDocType@110() : Boolean;
    VAR
      CreditDocType@1000 : Boolean;
    BEGIN
      CreditDocType := "Document Type" IN ["Document Type"::"Return Order","Document Type"::"Credit Memo"];
      OnBeforeIsCreditDocType(Rec,CreditDocType);
      EXIT(CreditDocType);
    END;

    [External]
    PROCEDURE HasSellToAddress@94() : Boolean;
    BEGIN
      CASE TRUE OF
        "Sell-to Address" <> '':
          EXIT(TRUE);
        "Sell-to Address 2" <> '':
          EXIT(TRUE);
        "Sell-to City" <> '':
          EXIT(TRUE);
        "Sell-to Country/Region Code" <> '':
          EXIT(TRUE);
        "Sell-to County" <> '':
          EXIT(TRUE);
        "Sell-to Post Code" <> '':
          EXIT(TRUE);
        "Sell-to Contact" <> '':
          EXIT(TRUE);
      END;

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE HasShipToAddress@103() : Boolean;
    BEGIN
      CASE TRUE OF
        "Ship-to Address" <> '':
          EXIT(TRUE);
        "Ship-to Address 2" <> '':
          EXIT(TRUE);
        "Ship-to City" <> '':
          EXIT(TRUE);
        "Ship-to Country/Region Code" <> '':
          EXIT(TRUE);
        "Ship-to County" <> '':
          EXIT(TRUE);
        "Ship-to Post Code" <> '':
          EXIT(TRUE);
        "Ship-to Contact" <> '':
          EXIT(TRUE);
      END;

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE HasBillToAddress@95() : Boolean;
    BEGIN
      CASE TRUE OF
        "Bill-to Address" <> '':
          EXIT(TRUE);
        "Bill-to Address 2" <> '':
          EXIT(TRUE);
        "Bill-to City" <> '':
          EXIT(TRUE);
        "Bill-to Country/Region Code" <> '':
          EXIT(TRUE);
        "Bill-to County" <> '':
          EXIT(TRUE);
        "Bill-to Post Code" <> '':
          EXIT(TRUE);
        "Bill-to Contact" <> '':
          EXIT(TRUE);
      END;

      EXIT(FALSE);
    END;

    LOCAL PROCEDURE HasItemChargeAssignment@170() : Boolean;
    VAR
      ItemChargeAssgntSales@1000 : Record 5809;
    BEGIN
      ItemChargeAssgntSales.SETRANGE("Document Type","Document Type");
      ItemChargeAssgntSales.SETRANGE("Document No.","No.");
      ItemChargeAssgntSales.SETFILTER("Amount to Assign",'<>%1',0);
      EXIT(NOT ItemChargeAssgntSales.ISEMPTY);
    END;

    LOCAL PROCEDURE CopySellToCustomerAddressFieldsFromCustomer@90(VAR SellToCustomer@1000 : Record 18);
    BEGIN
      "Sell-to Customer Template Code" := '';
      "Sell-to Customer Name" := Cust.Name;
      "Sell-to Customer Name 2" := Cust."Name 2";
      "Sell-to Phone No." := Cust."Phone No.";
      "Sell-to E-Mail" := Cust."E-Mail";
      IF SellToCustomerIsReplaced OR ShouldCopyAddressFromSellToCustomer(SellToCustomer) THEN BEGIN
        "Sell-to Address" := SellToCustomer.Address;
        "Sell-to Address 2" := SellToCustomer."Address 2";
        "Sell-to City" := SellToCustomer.City;
        "Sell-to Post Code" := SellToCustomer."Post Code";
        "Sell-to County" := SellToCustomer.County;
        "Sell-to Country/Region Code" := SellToCustomer."Country/Region Code";
      END;
      IF NOT SkipSellToContact THEN
        "Sell-to Contact" := SellToCustomer.Contact;
      "Gen. Bus. Posting Group" := SellToCustomer."Gen. Bus. Posting Group";
      "VAT Bus. Posting Group" := SellToCustomer."VAT Bus. Posting Group";
      "Tax Area Code" := SellToCustomer."Tax Area Code";
      "Tax Liable" := SellToCustomer."Tax Liable";
      "VAT Registration No." := SellToCustomer."VAT Registration No.";
      "VAT Country/Region Code" := SellToCustomer."Country/Region Code";
      "Shipping Advice" := SellToCustomer."Shipping Advice";
      "Responsibility Center" := UserSetupMgt.GetRespCenter(0,SellToCustomer."Responsibility Center");
      OnCopySelltoCustomerAddressFieldsFromCustomerOnAfterAssignRespCenter(Rec,SellToCustomer,CurrFieldNo);
      UpdateLocationCode(SellToCustomer."Location Code");

      OnAfterCopySellToCustomerAddressFieldsFromCustomer(Rec,SellToCustomer,CurrFieldNo);
    END;

    LOCAL PROCEDURE CopyShipToCustomerAddressFieldsFromCustomer@98(VAR SellToCustomer@1000 : Record 18);
    VAR
      SellToCustTemplate@1001 : Record 5105;
      IsHandled@1002 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeCopyShipToCustomerAddressFieldsFromCustomer(Rec,SellToCustomer,IsHandled);
      IF IsHandled THEN
        EXIT;

      "Ship-to Name" := Cust.Name;
      "Ship-to Name 2" := Cust."Name 2";
      IF SellToCustomerIsReplaced OR ShipToAddressEqualsOldSellToAddress THEN BEGIN
        "Ship-to Address" := SellToCustomer.Address;
        "Ship-to Address 2" := SellToCustomer."Address 2";
        "Ship-to City" := SellToCustomer.City;
        "Ship-to Post Code" := SellToCustomer."Post Code";
        "Ship-to County" := SellToCustomer.County;
        VALIDATE("Ship-to Country/Region Code",SellToCustomer."Country/Region Code");
      END;
      "Ship-to Contact" := Cust.Contact;
      IF Cust."Shipment Method Code" <> '' THEN
        VALIDATE("Shipment Method Code",Cust."Shipment Method Code");
      IF NOT SellToCustTemplate.GET("Sell-to Customer Template Code") THEN BEGIN
        "Tax Area Code" := Cust."Tax Area Code";
        "Tax Liable" := Cust."Tax Liable";
      END;
      IF Cust."Location Code" <> '' THEN
        VALIDATE("Location Code",Cust."Location Code");
      "Shipping Agent Code" := Cust."Shipping Agent Code";
      "Shipping Agent Service Code" := Cust."Shipping Agent Service Code";

      OnAfterCopyShipToCustomerAddressFieldsFromCustomer(Rec,SellToCustomer);
    END;

    LOCAL PROCEDURE CopyShipToCustomerAddressFieldsFromShipToAddr@165(ShipToAddr@1000 : Record 222);
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeCopyShipToCustomerAddressFieldsFromShipToAddr(Rec,ShipToAddr,IsHandled);
      IF IsHandled THEN
        EXIT;

      "Ship-to Name" := ShipToAddr.Name;
      "Ship-to Name 2" := ShipToAddr."Name 2";
      "Ship-to Address" := ShipToAddr.Address;
      "Ship-to Address 2" := ShipToAddr."Address 2";
      "Ship-to City" := ShipToAddr.City;
      "Ship-to Post Code" := ShipToAddr."Post Code";
      "Ship-to County" := ShipToAddr.County;
      VALIDATE("Ship-to Country/Region Code",ShipToAddr."Country/Region Code");
      "Ship-to Contact" := ShipToAddr.Contact;
      IF ShipToAddr."Shipment Method Code" <> '' THEN
        VALIDATE("Shipment Method Code",ShipToAddr."Shipment Method Code");
      IF ShipToAddr."Location Code" <> '' THEN
        VALIDATE("Location Code",ShipToAddr."Location Code");
      "Shipping Agent Code" := ShipToAddr."Shipping Agent Code";
      "Shipping Agent Service Code" := ShipToAddr."Shipping Agent Service Code";
      IF ShipToAddr."Tax Area Code" <> '' THEN
        "Tax Area Code" := ShipToAddr."Tax Area Code";
      "Tax Liable" := ShipToAddr."Tax Liable";

      OnAfterCopyShipToCustomerAddressFieldsFromShipToAddr(Rec,ShipToAddr);
    END;

    LOCAL PROCEDURE CopyBillToCustomerAddressFieldsFromCustomer@93(VAR BillToCustomer@1000 : Record 18);
    BEGIN
      "Bill-to Customer Template Code" := '';
      "Bill-to Name" := BillToCustomer.Name;
      "Bill-to Name 2" := BillToCustomer."Name 2";
      IF BillToCustomerIsReplaced OR ShouldCopyAddressFromBillToCustomer(BillToCustomer) THEN BEGIN
        "Bill-to Address" := BillToCustomer.Address;
        "Bill-to Address 2" := BillToCustomer."Address 2";
        "Bill-to City" := BillToCustomer.City;
        "Bill-to Post Code" := BillToCustomer."Post Code";
        "Bill-to County" := BillToCustomer.County;
        "Bill-to Country/Region Code" := BillToCustomer."Country/Region Code";
      END;
      IF NOT SkipBillToContact THEN
        "Bill-to Contact" := BillToCustomer.Contact;
      "Payment Terms Code" := BillToCustomer."Payment Terms Code";
      "Prepmt. Payment Terms Code" := BillToCustomer."Payment Terms Code";

      IF "Document Type" IN ["Document Type"::"Credit Memo","Document Type"::"Return Order"] THEN BEGIN
        "Payment Method Code" := '';
        IF PaymentTerms.GET("Payment Terms Code") THEN
          IF PaymentTerms."Calc. Pmt. Disc. on Cr. Memos" THEN
            "Payment Method Code" := BillToCustomer."Payment Method Code"
      END ELSE
        "Payment Method Code" := BillToCustomer."Payment Method Code";

      GLSetup.GET;
      IF GLSetup."Bill-to/Sell-to VAT Calc." = GLSetup."Bill-to/Sell-to VAT Calc."::"Bill-to/Pay-to No." THEN BEGIN
        "VAT Bus. Posting Group" := BillToCustomer."VAT Bus. Posting Group";
        "VAT Country/Region Code" := BillToCustomer."Country/Region Code";
        "VAT Registration No." := BillToCustomer."VAT Registration No.";
        "Gen. Bus. Posting Group" := BillToCustomer."Gen. Bus. Posting Group";
      END;
      "Customer Posting Group" := BillToCustomer."Customer Posting Group";
      "Currency Code" := BillToCustomer."Currency Code";
      "Customer Price Group" := BillToCustomer."Customer Price Group";
      "Prices Including VAT" := BillToCustomer."Prices Including VAT";
      "Allow Line Disc." := BillToCustomer."Allow Line Disc.";
      "Invoice Disc. Code" := BillToCustomer."Invoice Disc. Code";
      "Customer Disc. Group" := BillToCustomer."Customer Disc. Group";
      "Language Code" := BillToCustomer."Language Code";
      SetSalespersonCode(BillToCustomer."Salesperson Code","Salesperson Code");
      "Combine Shipments" := BillToCustomer."Combine Shipments";
      Reserve := BillToCustomer.Reserve;
      IF "Document Type" = "Document Type"::Order THEN
        "Prepayment %" := BillToCustomer."Prepayment %";
      "Tax Area Code" := BillToCustomer."Tax Area Code";
      "Tax Liable" := BillToCustomer."Tax Liable";
      "Cust. Bank Acc. Code" := BillToCustomer."Preferred Bank Account Code";

      OnAfterSetFieldsBilltoCustomer(Rec,BillToCustomer);
    END;

    [External]
    PROCEDURE SetShipToAddress@117(ShipToName@1000 : Text[100];ShipToName2@1001 : Text[50];ShipToAddress@1002 : Text[100];ShipToAddress2@1003 : Text[50];ShipToCity@1004 : Text[30];ShipToPostCode@1005 : Code[20];ShipToCounty@1006 : Text[30];ShipToCountryRegionCode@1007 : Code[10]);
    BEGIN
      "Ship-to Name" := ShipToName;
      "Ship-to Name 2" := ShipToName2;
      "Ship-to Address" := ShipToAddress;
      "Ship-to Address 2" := ShipToAddress2;
      "Ship-to City" := ShipToCity;
      "Ship-to Post Code" := ShipToPostCode;
      "Ship-to County" := ShipToCounty;
      "Ship-to Country/Region Code" := ShipToCountryRegionCode;
    END;

    LOCAL PROCEDURE ShouldCopyAddressFromSellToCustomer@101(SellToCustomer@1000 : Record 18) : Boolean;
    BEGIN
      EXIT((NOT HasSellToAddress) AND SellToCustomer.HasAddress);
    END;

    LOCAL PROCEDURE ShouldCopyAddressFromBillToCustomer@102(BillToCustomer@1000 : Record 18) : Boolean;
    BEGIN
      EXIT((NOT HasBillToAddress) AND BillToCustomer.HasAddress);
    END;

    LOCAL PROCEDURE SellToCustomerIsReplaced@96() : Boolean;
    BEGIN
      EXIT((xRec."Sell-to Customer No." <> '') AND (xRec."Sell-to Customer No." <> "Sell-to Customer No."));
    END;

    LOCAL PROCEDURE BillToCustomerIsReplaced@97() : Boolean;
    BEGIN
      EXIT((xRec."Bill-to Customer No." <> '') AND (xRec."Bill-to Customer No." <> "Bill-to Customer No."));
    END;

    LOCAL PROCEDURE UpdateShipToAddressFromSellToAddress@50(FieldNumber@1000 : Integer);
    BEGIN
      IF ("Ship-to Code" = '') AND ShipToAddressEqualsOldSellToAddress THEN
        CASE FieldNumber OF
          FIELDNO("Ship-to Address"):
            "Ship-to Address" := "Sell-to Address";
          FIELDNO("Ship-to Address 2"):
            "Ship-to Address 2" := "Sell-to Address 2";
          FIELDNO("Ship-to City"),FIELDNO("Ship-to Post Code"):
            BEGIN
              "Ship-to City" := "Sell-to City";
              "Ship-to Post Code" := "Sell-to Post Code";
              "Ship-to County" := "Sell-to County";
              "Ship-to Country/Region Code" := "Sell-to Country/Region Code";
            END;
          FIELDNO("Ship-to County"):
            "Ship-to County" := "Sell-to County";
          FIELDNO("Ship-to Country/Region Code"):
            "Ship-to Country/Region Code" := "Sell-to Country/Region Code";
        END;
    END;

    LOCAL PROCEDURE ShipToAddressEqualsOldSellToAddress@51() : Boolean;
    BEGIN
      EXIT(IsShipToAddressEqualToSellToAddress(xRec,Rec));
    END;

    [External]
    PROCEDURE ShipToAddressEqualsSellToAddress@111() : Boolean;
    BEGIN
      EXIT(IsShipToAddressEqualToSellToAddress(Rec,Rec));
    END;

    LOCAL PROCEDURE IsShipToAddressEqualToSellToAddress@113(SalesHeaderWithSellTo@1000 : Record 36;SalesHeaderWithShipTo@1001 : Record 36) : Boolean;
    VAR
      Result@1002 : Boolean;
    BEGIN
      Result :=
        (SalesHeaderWithSellTo."Sell-to Address" = SalesHeaderWithShipTo."Ship-to Address") AND
        (SalesHeaderWithSellTo."Sell-to Address 2" = SalesHeaderWithShipTo."Ship-to Address 2") AND
        (SalesHeaderWithSellTo."Sell-to City" = SalesHeaderWithShipTo."Ship-to City") AND
        (SalesHeaderWithSellTo."Sell-to County" = SalesHeaderWithShipTo."Ship-to County") AND
        (SalesHeaderWithSellTo."Sell-to Post Code" = SalesHeaderWithShipTo."Ship-to Post Code") AND
        (SalesHeaderWithSellTo."Sell-to Country/Region Code" = SalesHeaderWithShipTo."Ship-to Country/Region Code") AND
        (SalesHeaderWithSellTo."Sell-to Contact" = SalesHeaderWithShipTo."Ship-to Contact");

      OnAfterIsShipToAddressEqualToSellToAddress(SalesHeaderWithSellTo,SalesHeaderWithShipTo,Result);
      EXIT(Result);
    END;

    [External]
    PROCEDURE BillToAddressEqualsSellToAddress@232() : Boolean;
    BEGIN
      EXIT(IsBillToAddressEqualToSellToAddress(Rec,Rec));
    END;

    LOCAL PROCEDURE IsBillToAddressEqualToSellToAddress@233(SalesHeaderWithSellTo@1000 : Record 36;SalesHeaderWithBillTo@1001 : Record 36) : Boolean;
    BEGIN
      IF (SalesHeaderWithSellTo."Sell-to Address" = SalesHeaderWithBillTo."Bill-to Address") AND
         (SalesHeaderWithSellTo."Sell-to Address 2" = SalesHeaderWithBillTo."Bill-to Address 2") AND
         (SalesHeaderWithSellTo."Sell-to City" = SalesHeaderWithBillTo."Bill-to City") AND
         (SalesHeaderWithSellTo."Sell-to County" = SalesHeaderWithBillTo."Bill-to County") AND
         (SalesHeaderWithSellTo."Sell-to Post Code" = SalesHeaderWithBillTo."Bill-to Post Code") AND
         (SalesHeaderWithSellTo."Sell-to Country/Region Code" = SalesHeaderWithBillTo."Bill-to Country/Region Code") AND
         (SalesHeaderWithSellTo."Sell-to Contact No." = SalesHeaderWithBillTo."Bill-to Contact No.") AND
         (SalesHeaderWithSellTo."Sell-to Contact" = SalesHeaderWithBillTo."Bill-to Contact")
      THEN
        EXIT(TRUE);
    END;

    [External]
    PROCEDURE CopySellToAddressToShipToAddress@112();
    BEGIN
      "Ship-to Address" := "Sell-to Address";
      "Ship-to Address 2" := "Sell-to Address 2";
      "Ship-to City" := "Sell-to City";
      "Ship-to Contact" := "Sell-to Contact";
      "Ship-to Country/Region Code" := "Sell-to Country/Region Code";
      "Ship-to County" := "Sell-to County";
      "Ship-to Post Code" := "Sell-to Post Code";

      OnAfterCopySellToAddressToShipToAddress(Rec);
    END;

    [External]
    PROCEDURE CopySellToAddressToBillToAddress@92();
    BEGIN
      IF "Bill-to Customer No." = "Sell-to Customer No." THEN BEGIN
        "Bill-to Address" := "Sell-to Address";
        "Bill-to Address 2" := "Sell-to Address 2";
        "Bill-to Post Code" := "Sell-to Post Code";
        "Bill-to Country/Region Code" := "Sell-to Country/Region Code";
        "Bill-to City" := "Sell-to City";
        "Bill-to County" := "Sell-to County";
        OnAfterCopySellToAddressToBillToAddress(Rec);
      END;
    END;

    LOCAL PROCEDURE UpdateShipToContact@149();
    BEGIN
      IF NOT (CurrFieldNo IN [FIELDNO("Sell-to Contact"),FIELDNO("Sell-to Contact No.")]) THEN
        EXIT;

      IF IsCreditDocType THEN
        EXIT;

      VALIDATE("Ship-to Contact","Sell-to Contact");
    END;

    [External]
    PROCEDURE ConfirmCloseUnposted@104() : Boolean;
    VAR
      InstructionMgt@1000 : Codeunit 1330;
    BEGIN
      IF SalesLinesExist THEN
        IF InstructionMgt.IsUnpostedEnabledForRecord(Rec) THEN
          EXIT(InstructionMgt.ShowConfirm(DocumentNotPostedClosePageQst,InstructionMgt.QueryPostOnCloseCode));
      EXIT(TRUE)
    END;

    LOCAL PROCEDURE UpdateOpportunity@108();
    VAR
      Opp@1002 : Record 5092;
      OpportunityEntry@1001 : Record 5093;
      ConfirmManagement@1000 : Codeunit 27;
    BEGIN
      IF NOT ("Opportunity No." <> '') OR NOT ("Document Type" IN ["Document Type"::Quote,"Document Type"::Order]) THEN
        EXIT;

      IF NOT Opp.GET("Opportunity No.") THEN
        EXIT;

      IF "Document Type" = "Document Type"::Order THEN BEGIN
        IF NOT ConfirmManagement.ConfirmProcess(Text040,TRUE) THEN
          ERROR(Text044);

        OpportunityEntry.SETRANGE("Opportunity No.","Opportunity No.");
        OpportunityEntry.MODIFYALL(Active,FALSE);

        OpportunityEntry.INIT;
        OpportunityEntry.VALIDATE("Opportunity No.",Opp."No.");

        OpportunityEntry.LOCKTABLE;
        OpportunityEntry."Entry No." := GetOpportunityEntryNo;
        OpportunityEntry."Sales Cycle Code" := Opp."Sales Cycle Code";
        OpportunityEntry."Contact No." := Opp."Contact No.";
        OpportunityEntry."Contact Company No." := Opp."Contact Company No.";
        OpportunityEntry."Salesperson Code" := Opp."Salesperson Code";
        OpportunityEntry."Campaign No." := Opp."Campaign No.";
        OpportunityEntry."Action Taken" := OpportunityEntry."Action Taken"::Lost;
        OpportunityEntry.Active := TRUE;
        OpportunityEntry."Completed %" := 100;
        OpportunityEntry."Estimated Value (LCY)" := GetOpportunityEntryEstimatedValue;
        OpportunityEntry."Estimated Close Date" := Opp."Date Closed";
        OpportunityEntry.INSERT(TRUE);
      END;
      Opp.FIND;
      Opp."Sales Document Type" := Opp."Sales Document Type"::" ";
      Opp."Sales Document No." := '';
      Opp.MODIFY;
      "Opportunity No." := '';
    END;

    LOCAL PROCEDURE GetOpportunityEntryNo@106() : Integer;
    VAR
      OpportunityEntry@1000 : Record 5093;
    BEGIN
      IF OpportunityEntry.FINDLAST THEN
        EXIT(OpportunityEntry."Entry No." + 1);
      EXIT(1);
    END;

    LOCAL PROCEDURE GetOpportunityEntryEstimatedValue@107() : Decimal;
    VAR
      OpportunityEntry@1000 : Record 5093;
    BEGIN
      OpportunityEntry.SETRANGE("Opportunity No.","Opportunity No.");
      IF OpportunityEntry.FINDLAST THEN
        EXIT(OpportunityEntry."Estimated Value (LCY)");
    END;

    [External]
    PROCEDURE InitFromSalesHeader@109(SourceSalesHeader@1000 : Record 36);
    BEGIN
      "Document Date" := SourceSalesHeader."Document Date";
      "Shipment Date" := SourceSalesHeader."Shipment Date";
      "Shortcut Dimension 1 Code" := SourceSalesHeader."Shortcut Dimension 1 Code";
      "Shortcut Dimension 2 Code" := SourceSalesHeader."Shortcut Dimension 2 Code";
      "Dimension Set ID" := SourceSalesHeader."Dimension Set ID";
      "Location Code" := SourceSalesHeader."Location Code";
      SetShipToAddress(
        SourceSalesHeader."Ship-to Name",SourceSalesHeader."Ship-to Name 2",SourceSalesHeader."Ship-to Address",
        SourceSalesHeader."Ship-to Address 2",SourceSalesHeader."Ship-to City",SourceSalesHeader."Ship-to Post Code",
        SourceSalesHeader."Ship-to County",SourceSalesHeader."Ship-to Country/Region Code");
      "Ship-to Contact" := SourceSalesHeader."Ship-to Contact";

      OnAfterInitFromSalesHeader(Rec,SourceSalesHeader);
    END;

    LOCAL PROCEDURE InitFromContact@126(ContactNo@1000 : Code[20];CustomerNo@1001 : Code[20];ContactCaption@1002 : Text) : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      IF (ContactNo = '') AND (CustomerNo = '') THEN BEGIN
        IF NOT SalesLine.ISEMPTY THEN
          ERROR(Text005,ContactCaption);
        INIT;
        GetSalesSetup;
        "No. Series" := xRec."No. Series";
        OnInitFromContactOnBeforeInitRecord(Rec,xRec);
        InitRecord;
        InitNoSeries;
        EXIT(TRUE);
      END;
    END;

    LOCAL PROCEDURE InitFromTemplate@118(TemplateCode@1000 : Code[20];TemplateCaption@1001 : Text) : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      IF TemplateCode = '' THEN BEGIN
        IF NOT SalesLine.ISEMPTY THEN
          ERROR(Text005,TemplateCaption);
        INIT;
        GetSalesSetup;
        "No. Series" := xRec."No. Series";
        OnInitFromTemplateOnBeforeInitRecord(Rec,xRec);
        InitRecord;
        InitNoSeries;
        EXIT(TRUE);
      END;
    END;

    LOCAL PROCEDURE ValidateTaxAreaCode@36();
    VAR
      TaxArea@1000 : Record 318;
      IdentityManagement@1001 : Codeunit 9801;
    BEGIN
      IF "Tax Area Code" = '' THEN
        EXIT;
      IF IdentityManagement.IsInvAppId THEN BEGIN
        IF NOT TaxArea.GET("Tax Area Code") THEN BEGIN
          TaxArea.SETFILTER(Code,"Tax Area Code" + '*');
          IF NOT TaxArea.FINDFIRST THEN
            TaxArea.CreateTaxArea("Tax Area Code","Sell-to City","Sell-to County");
          "Tax Area Code" := TaxArea.Code;
        END;

        IF Cust.GET("Sell-to Customer No.") THEN
          IF Cust."Tax Area Code" = '' THEN BEGIN
            Cust."Tax Area Code" := "Tax Area Code";
            Cust.MODIFY;
          END;
      END ELSE
        TaxArea.GET("Tax Area Code");
    END;

    [External]
    PROCEDURE SetWorkDescription@120(NewWorkDescription@1000 : Text);
    VAR
      TempBlob@1001 : TEMPORARY Record 99008535;
    BEGIN
      CLEAR("Work Description");
      IF NewWorkDescription = '' THEN
        EXIT;
      TempBlob.Blob := "Work Description";
      TempBlob.WriteAsText(NewWorkDescription,TEXTENCODING::UTF8);
      "Work Description" := TempBlob.Blob;
      MODIFY;
    END;

    [External]
    PROCEDURE GetWorkDescription@114() : Text;
    BEGIN
      CALCFIELDS("Work Description");
      EXIT(GetWorkDescriptionWorkDescriptionCalculated);
    END;

    [External]
    PROCEDURE GetWorkDescriptionWorkDescriptionCalculated@160() : Text;
    VAR
      TempBlob@1000 : TEMPORARY Record 99008535;
      CR@1004 : Text[1];
    BEGIN
      IF NOT "Work Description".HASVALUE THEN
        EXIT('');

      CR[1] := 10;
      TempBlob.Blob := "Work Description";
      EXIT(TempBlob.ReadAsText(CR,TEXTENCODING::UTF8));
    END;

    LOCAL PROCEDURE LookupContact@122(CustomerNo@1000 : Code[20];ContactNo@1003 : Code[20];VAR Contact@1001 : Record 5050);
    VAR
      ContactBusinessRelation@1002 : Record 5054;
      FilterByContactCompany@1004 : Boolean;
    BEGIN
      IF ContactBusinessRelation.FindByRelation(ContactBusinessRelation."Link to Table"::Customer,CustomerNo) THEN
        Contact.SETRANGE("Company No.",ContactBusinessRelation."Contact No.")
      ELSE
        IF "Document Type" = "Document Type"::Quote THEN
          FilterByContactCompany := TRUE
        ELSE
          Contact.SETRANGE("Company No.",'');
      IF ContactNo <> '' THEN
        IF Contact.GET(ContactNo) THEN
          IF FilterByContactCompany THEN
            Contact.SETRANGE("Company No.",Contact."Company No.");
    END;

    [External]
    PROCEDURE SetAllowSelectNoSeries@100();
    BEGIN
      SelectNoSeriesAllowed := TRUE;
    END;

    LOCAL PROCEDURE SetDefaultSalesperson@124();
    VAR
      UserSetup@1000 : Record 91;
    BEGIN
      IF NOT UserSetup.GET(USERID) THEN
        EXIT;

      IF UserSetup."Salespers./Purch. Code" <> '' THEN
        IF Salesperson.GET(UserSetup."Salespers./Purch. Code") THEN
          IF NOT Salesperson.VerifySalesPersonPurchaserPrivacyBlocked(Salesperson) THEN
            VALIDATE("Salesperson Code",UserSetup."Salespers./Purch. Code");
    END;

    [External]
    PROCEDURE SelltoCustomerNoOnAfterValidate@125(VAR SalesHeader@1000 : Record 36;VAR xSalesHeader@1001 : Record 36);
    BEGIN
      IF SalesHeader.GETFILTER("Sell-to Customer No.") = xSalesHeader."Sell-to Customer No." THEN
        IF SalesHeader."Sell-to Customer No." <> xSalesHeader."Sell-to Customer No." THEN
          SalesHeader.SETRANGE("Sell-to Customer No.");
    END;

    [External]
    PROCEDURE SelectSalesHeaderCustomerTemplate@127() : Code[10];
    VAR
      Contact@1001 : Record 5050;
      ConfirmManagement@1000 : Codeunit 27;
    BEGIN
      Contact.GET("Sell-to Contact No.");
      IF (Contact.Type = Contact.Type::Person) AND (Contact."Company No." <> '')THEN
        Contact.GET(Contact."Company No.");
      IF NOT Contact.ContactToCustBusinessRelationExist THEN
        IF ConfirmManagement.ConfirmProcessUI(SelectCustomerTemplateQst,FALSE) THEN BEGIN
          COMMIT;
          EXIT(Contact.LookupCustomerTemplate);
        END;
    END;

    LOCAL PROCEDURE ModifyBillToCustomerAddress@194();
    VAR
      Customer@1000 : Record 18;
    BEGIN
      GetSalesSetup;
      IF SalesSetup."Ignore Updated Addresses" THEN
        EXIT;
      IF IsCreditDocType THEN
        EXIT;
      IF ("Bill-to Customer No." <> "Sell-to Customer No.") AND Customer.GET("Bill-to Customer No.") THEN
        IF HasBillToAddress AND HasDifferentBillToAddress(Customer) THEN
          ShowModifyAddressNotification(GetModifyBillToCustomerAddressNotificationId,
            ModifyCustomerAddressNotificationLbl,ModifyCustomerAddressNotificationMsg,
            'CopyBillToCustomerAddressFieldsFromSalesDocument',"Bill-to Customer No.",
            "Bill-to Name",FIELDNAME("Bill-to Customer No."));
    END;

    LOCAL PROCEDURE ModifyCustomerAddress@150();
    VAR
      Customer@1000 : Record 18;
    BEGIN
      GetSalesSetup;
      IF SalesSetup."Ignore Updated Addresses" THEN
        EXIT;
      IF IsCreditDocType THEN
        EXIT;
      IF Customer.GET("Sell-to Customer No.") AND HasSellToAddress AND HasDifferentSellToAddress(Customer) THEN
        ShowModifyAddressNotification(GetModifyCustomerAddressNotificationId,
          ModifyCustomerAddressNotificationLbl,ModifyCustomerAddressNotificationMsg,
          'CopySellToCustomerAddressFieldsFromSalesDocument',"Sell-to Customer No.",
          "Sell-to Customer Name",FIELDNAME("Sell-to Customer No."));
    END;

    LOCAL PROCEDURE ShowModifyAddressNotification@157(NotificationID@1001 : GUID;NotificationLbl@1004 : Text;NotificationMsg@1005 : Text;NotificationFunctionTok@1006 : Text;CustomerNumber@1002 : Code[20];CustomerName@1003 : Text[100];CustomerNumberFieldName@1008 : Text);
    VAR
      MyNotifications@1009 : Record 1518;
      NotificationLifecycleMgt@1007 : Codeunit 1511;
      PageMyNotifications@1010 : Page 1518;
      ModifyCustomerAddressNotification@1000 : Notification;
    BEGIN
      IF NOT MyNotifications.GET(USERID,NotificationID) THEN
        PageMyNotifications.InitializeNotificationsWithDefaultState;

      IF NOT MyNotifications.IsEnabled(NotificationID) THEN
        EXIT;

      ModifyCustomerAddressNotification.ID := NotificationID;
      ModifyCustomerAddressNotification.MESSAGE := STRSUBSTNO(NotificationMsg,CustomerName);
      ModifyCustomerAddressNotification.ADDACTION(NotificationLbl,CODEUNIT::"Document Notifications",NotificationFunctionTok);
      ModifyCustomerAddressNotification.ADDACTION(
        DontShowAgainActionLbl,CODEUNIT::"Document Notifications",'HideNotificationForCurrentUser');
      ModifyCustomerAddressNotification.SCOPE := NOTIFICATIONSCOPE::LocalScope;
      ModifyCustomerAddressNotification.SETDATA(FIELDNAME("Document Type"),FORMAT("Document Type"));
      ModifyCustomerAddressNotification.SETDATA(FIELDNAME("No."),"No.");
      ModifyCustomerAddressNotification.SETDATA(CustomerNumberFieldName,CustomerNumber);
      NotificationLifecycleMgt.SendNotification(ModifyCustomerAddressNotification,RECORDID);
    END;

    [External]
    PROCEDURE RecallModifyAddressNotification@148(NotificationID@1001 : GUID);
    VAR
      MyNotifications@1002 : Record 1518;
      ModifyCustomerAddressNotification@1000 : Notification;
    BEGIN
      IF IsCreditDocType OR (NOT MyNotifications.IsEnabled(NotificationID)) THEN
        EXIT;

      ModifyCustomerAddressNotification.ID := NotificationID;
      ModifyCustomerAddressNotification.RECALL;
    END;

    [External]
    PROCEDURE GetModifyCustomerAddressNotificationId@193() : GUID;
    BEGIN
      EXIT('509FD112-31EC-4CDC-AEBF-19B8FEBA526F');
    END;

    [External]
    PROCEDURE GetModifyBillToCustomerAddressNotificationId@191() : GUID;
    BEGIN
      EXIT('2096CE78-6A74-48DB-BC9A-CD5C21504FC1');
    END;

    [External]
    PROCEDURE GetLineInvoiceDiscountResetNotificationId@307() : GUID;
    BEGIN
      EXIT('35AB3090-2E03-4849-BBF9-9664DE464605');
    END;

    [External]
    PROCEDURE SetModifyCustomerAddressNotificationDefaultState@89();
    VAR
      MyNotifications@1000 : Record 1518;
    BEGIN
      MyNotifications.InsertDefault(GetModifyCustomerAddressNotificationId,
        ModifySellToCustomerAddressNotificationNameTxt,ModifySellToCustomerAddressNotificationDescriptionTxt,TRUE);
    END;

    [External]
    PROCEDURE SetModifyBillToCustomerAddressNotificationDefaultState@91();
    VAR
      MyNotifications@1000 : Record 1518;
    BEGIN
      MyNotifications.InsertDefault(GetModifyBillToCustomerAddressNotificationId,
        ModifyBillToCustomerAddressNotificationNameTxt,ModifyBillToCustomerAddressNotificationDescriptionTxt,TRUE);
    END;

    [External]
    PROCEDURE DontNotifyCurrentUserAgain@141(NotificationID@1001 : GUID);
    VAR
      MyNotifications@1000 : Record 1518;
    BEGIN
      IF NOT MyNotifications.Disable(NotificationID) THEN
        CASE NotificationID OF
          GetModifyCustomerAddressNotificationId:
            MyNotifications.InsertDefault(NotificationID,ModifySellToCustomerAddressNotificationNameTxt,
              ModifySellToCustomerAddressNotificationDescriptionTxt,FALSE);
          GetModifyBillToCustomerAddressNotificationId:
            MyNotifications.InsertDefault(NotificationID,ModifyBillToCustomerAddressNotificationNameTxt,
              ModifyBillToCustomerAddressNotificationDescriptionTxt,FALSE);
        END;
    END;

    [External]
    PROCEDURE HasDifferentSellToAddress@195(Customer@1000 : Record 18) : Boolean;
    BEGIN
      EXIT(("Sell-to Address" <> Customer.Address) OR
        ("Sell-to Address 2" <> Customer."Address 2") OR
        ("Sell-to City" <> Customer.City) OR
        ("Sell-to Country/Region Code" <> Customer."Country/Region Code") OR
        ("Sell-to County" <> Customer.County) OR
        ("Sell-to Post Code" <> Customer."Post Code") OR
        ("Sell-to Contact" <> Customer.Contact));
    END;

    [External]
    PROCEDURE HasDifferentBillToAddress@192(Customer@1000 : Record 18) : Boolean;
    BEGIN
      EXIT(("Bill-to Address" <> Customer.Address) OR
        ("Bill-to Address 2" <> Customer."Address 2") OR
        ("Bill-to City" <> Customer.City) OR
        ("Bill-to Country/Region Code" <> Customer."Country/Region Code") OR
        ("Bill-to County" <> Customer.County) OR
        ("Bill-to Post Code" <> Customer."Post Code") OR
        ("Bill-to Contact" <> Customer.Contact));
    END;

    [External]
    PROCEDURE HasDifferentShipToAddress@1059(Customer@1000 : Record 18) : Boolean;
    BEGIN
      EXIT(("Ship-to Address" <> Customer.Address) OR
        ("Ship-to Address 2" <> Customer."Address 2") OR
        ("Ship-to City" <> Customer.City) OR
        ("Ship-to Country/Region Code" <> Customer."Country/Region Code") OR
        ("Ship-to County" <> Customer.County) OR
        ("Ship-to Post Code" <> Customer."Post Code") OR
        ("Ship-to Contact" <> Customer.Contact));
    END;

    [External]
    PROCEDURE ShowInteractionLogEntries@131();
    VAR
      InteractionLogEntry@1000 : Record 5065;
    BEGIN
      IF "Bill-to Contact No." <> '' THEN
        InteractionLogEntry.SETRANGE("Contact No.","Bill-to Contact No.");
      CASE "Document Type" OF
        "Document Type"::Order:
          InteractionLogEntry.SETRANGE("Document Type",InteractionLogEntry."Document Type"::"Sales Ord. Cnfrmn.");
        "Document Type"::Quote:
          InteractionLogEntry.SETRANGE("Document Type",InteractionLogEntry."Document Type"::"Sales Qte.");
      END;

      InteractionLogEntry.SETRANGE("Document No.","No.");
      PAGE.RUN(PAGE::"Interaction Log Entries",InteractionLogEntry);
    END;

    [External]
    PROCEDURE GetBillToNo@132() : Code[20];
    BEGIN
      IF ("Document Type" = "Document Type"::Quote) AND
         ("Bill-to Customer No." = '') AND ("Bill-to Contact No." <> '') AND
         ("Bill-to Customer Template Code" <> '')
      THEN
        EXIT("Bill-to Contact No.");
      EXIT("Bill-to Customer No.");
    END;

    [External]
    PROCEDURE GetCurrencySymbol@146() : Text[10];
    VAR
      GeneralLedgerSetup@1000 : Record 98;
      Currency@1001 : Record 4;
    BEGIN
      IF GeneralLedgerSetup.GET THEN
        IF ("Currency Code" = '') OR ("Currency Code" = GeneralLedgerSetup."LCY Code") THEN
          EXIT(GeneralLedgerSetup.GetCurrencySymbol);

      IF Currency.GET("Currency Code") THEN
        EXIT(Currency.GetCurrencySymbol);

      EXIT("Currency Code");
    END;

    LOCAL PROCEDURE SetSalespersonCode@433(SalesPersonCodeToCheck@1000 : Code[20];VAR SalesPersonCodeToAssign@1001 : Code[20]);
    BEGIN
      IF SalesPersonCodeToCheck <> '' THEN BEGIN
        IF Salesperson.GET(SalesPersonCodeToCheck) THEN
          IF Salesperson.VerifySalesPersonPurchaserPrivacyBlocked(Salesperson) THEN
            SalesPersonCodeToAssign := ''
          ELSE
            SalesPersonCodeToAssign := SalesPersonCodeToCheck;
      END ELSE
        SalesPersonCodeToAssign := '';
    END;

    [External]
    PROCEDURE ValidateSalesPersonOnSalesHeader@218(SalesHeader2@1000 : Record 36;IsTransaction@1001 : Boolean;IsPostAction@1002 : Boolean);
    BEGIN
      IF SalesHeader2."Salesperson Code" <> '' THEN
        IF Salesperson.GET(SalesHeader2."Salesperson Code") THEN
          IF Salesperson.VerifySalesPersonPurchaserPrivacyBlocked(Salesperson) THEN BEGIN
            IF IsTransaction THEN
              ERROR(Salesperson.GetPrivacyBlockedTransactionText(Salesperson,IsPostAction,TRUE));
            IF NOT IsTransaction THEN
              ERROR(Salesperson.GetPrivacyBlockedGenericText(Salesperson,TRUE));
          END;
    END;

    LOCAL PROCEDURE RevertCurrencyCodeAndPostingDate@167();
    BEGIN
      "Currency Code" := xRec."Currency Code";
      "Posting Date" := xRec."Posting Date";
    END;

    LOCAL PROCEDURE ShouldLookForCustomerByName@181(CustomerNo@1000 : Code[20]) : Boolean;
    VAR
      Customer@1001 : Record 18;
    BEGIN
      IF CustomerNo = '' THEN
        EXIT(TRUE);

      IF NOT Customer.GET(CustomerNo) THEN
        EXIT(TRUE);

      EXIT(NOT Customer."Disable Search by Name");
    END;

    LOCAL PROCEDURE CalcQuoteValidUntilDate@172();
    VAR
      BlankDateFormula@1000 : DateFormula;
    BEGIN
      GetSalesSetup;
      IF SalesSetup."Quote Validity Calculation" <> BlankDateFormula THEN
        "Quote Valid Until Date" := CALCDATE(SalesSetup."Quote Validity Calculation","Document Date");
    END;

    [External]
    PROCEDURE TestQuantityShippedField@190(SalesLine@1000 : Record 37);
    BEGIN
      SalesLine.TESTFIELD("Quantity Shipped",0);
      OnAfterTestQuantityShippedField(SalesLine);
    END;

    [External]
    PROCEDURE TestStatusOpen@134();
    BEGIN
      OnBeforeTestStatusOpen(Rec);

      IF StatusCheckSuspended THEN
        EXIT;

      TESTFIELD(Status,Status::Open);

      OnAfterTestStatusOpen(Rec);
    END;

    [External]
    PROCEDURE SuspendStatusCheck@133(Suspend@1000 : Boolean);
    BEGIN
      StatusCheckSuspended := Suspend;
    END;

    [External]
    PROCEDURE CheckForBlockedLines@220();
    VAR
      CurrentSalesLine@1000 : Record 37;
      Item@1001 : Record 27;
      Resource@1002 : Record 156;
    BEGIN
      CurrentSalesLine.SETCURRENTKEY("Document Type","Document No.",Type);
      CurrentSalesLine.SETRANGE("Document Type","Document Type");
      CurrentSalesLine.SETRANGE("Document No.","No.");
      CurrentSalesLine.SETFILTER(Type,'%1|%2',CurrentSalesLine.Type::Item,CurrentSalesLine.Type::Resource);
      CurrentSalesLine.SETFILTER("No.",'<>''''');

      IF CurrentSalesLine.FINDSET THEN
        REPEAT
          CASE CurrentSalesLine.Type OF
            CurrentSalesLine.Type::Item:
              BEGIN
                Item.GET(CurrentSalesLine."No.");
                Item.TESTFIELD(Blocked,FALSE);
              END;
            CurrentSalesLine.Type::Resource:
              BEGIN
                Resource.GET(CurrentSalesLine."No.");
                Resource.CheckResourcePrivacyBlocked(FALSE);
                Resource.TESTFIELD(Blocked,FALSE);
              END;
          END;
        UNTIL CurrentSalesLine.NEXT = 0;
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitRecord@21(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitNoSeries@35(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckCreditLimitCondition@290(VAR SalesHeader@1000 : Record 36;VAR RunCheck@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckCreditMaxBeforeInsert@237(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckBillToCust@321(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;Customer@1002 : Record 18);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckSellToCust@319(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;Customer@1002 : Record 18);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckShippingAdvice@330(VAR SalesHeader@1000 : Record 36;VAR Result@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterConfirmSalesPrice@183(VAR SalesHeader@1000 : Record 36;VAR SalesLine@1001 : Record 37;VAR RecalculateLines@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterRecreateSalesLine@152(VAR SalesLine@1000 : Record 37;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterDeleteAllTempSalesLines@155();
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitFromSalesHeader@246(VAR SalesHeader@1000 : Record 36;SourceSalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInsertTempSalesLine@158(SalesLine@1000 : Record 37;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterIsApprovedForPosting@219(SalesHeader@1000 : Record 36;VAR Approved@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterIsApprovedForPostingBatch@221(SalesHeader@1000 : Record 36;VAR Approved@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetNoSeriesCode@166(VAR SalesHeader@1000 : Record 36;SalesReceivablesSetup@1001 : Record 311;VAR NoSeriesCode@1002 : Code[20]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetPostingNoSeriesCode@175(SalesHeader@1000 : Record 36;VAR PostingNos@1001 : Code[20]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetPrepaymentPostingNoSeriesCode@178(SalesHeader@1000 : Record 36;VAR PostingNos@1001 : Code[20]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetSalesSetup@249(SalesHeader@1000 : Record 36;VAR SalesReceivablesSetup@1001 : Record 311;CalledByFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetDocTypeText@257(VAR SalesHeader@1000 : Record 36;VAR TypeText@1001 : Text[50]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterTestNoSeries@136(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateShipToAddress@137(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateCurrencyFactor@180(VAR SalesHeader@1000 : Record 36;HideValidationDialog@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAppliesToDocNoOnLookup@163(VAR SalesHeader@1000 : Record 36;CustLedgerEntry@1001 : Record 21);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnUpdateSalesLineByChangedFieldName@139(SalesHeader@1000 : Record 36;VAR SalesLine@1001 : Record 37;ChangedFieldName@1002 : Text[100];ChangedFieldNo@1003 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCreateDimTableIDs@138(VAR SalesHeader@1000 : Record 36;CallingFieldNo@1001 : Integer;VAR TableID@1003 : ARRAY [10] OF Integer;VAR No@1002 : ARRAY [10] OF Code[20]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateShortcutDimCode@176(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;FieldNumber@1003 : Integer;VAR ShortcutDimCode@1002 : Code[20]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCreateSalesLine@147(VAR SalesLine@1000 : Record 37;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterIsShipToAddressEqualToSellToAddress@230(SellToSalesHeader@1000 : Record 36;ShipToSalesHeader@1001 : Record 36;VAR Result@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSalesQuoteAccepted@143(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterChangePricesIncludingVAT@187(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSendSalesHeader@144(VAR SalesHeader@1000 : Record 36;ShowDialog@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSetApplyToFilters@227(VAR CustLedgerEntry@1000 : Record 21;SalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSetFieldsBilltoCustomer@151(VAR SalesHeader@1000 : Record 36;Customer@1001 : Record 18);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterTransferExtendedTextForSalesLineRecreation@145(VAR SalesLine@1000 : Record 37;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyFromSellToCustTemplate@184(VAR SalesHeader@1000 : Record 36;SellToCustTemplate@1001 : Record 5105);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopySellToAddressToShipToAddress@198(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopySellToAddressToBillToAddress@200(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopySellToCustomerAddressFieldsFromCustomer@177(VAR SalesHeader@1000 : Record 36;SellToCustomer@1001 : Record 18;CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyShipToCustomerAddressFieldsFromCustomer@173(VAR SalesHeader@1000 : Record 36;SellToCustomer@1001 : Record 18);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyShipToCustomerAddressFieldsFromShipToAddr@174(VAR SalesHeader@1000 : Record 36;ShipToAddress@1001 : Record 222);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCheckCreditLimit@196(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCheckCreditMaxBeforeInsert@235(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCheckCreditLimitIfLineNotInsertedYet@238(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeConfirmBillToContactNoChange@229(VAR SalesHeader@1000 : Record 36;VAR xSalesHeader@1001 : Record 36;CurrentFieldNo@1002 : Integer;VAR Confirmed@1003 : Boolean;VAR IsHandled@1004 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeConfirmUpdateCurrencyFactor@241(VAR SalesHeader@1000 : Record 36;VAR HideValidationDialog@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCopyShipToCustomerAddressFieldsFromCustomer@231(VAR SalesHeader@1000 : Record 36;Customer@1001 : Record 18;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCopyShipToCustomerAddressFieldsFromShipToAddr@260(VAR SalesHeader@1000 : Record 36;ShipToAddress@1001 : Record 222;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCreateSalesLine@244(VAR TempSalesLine@1000 : TEMPORARY Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetNoSeriesCode@309(VAR SalesHeader@1000 : Record 36;SalesSetup@1001 : Record 311;VAR NoSeriesCode@1002 : Code[20];VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetPostingNoSeriesCode@212(VAR SalesHeader@1003 : Record 36;SalesSetup@1002 : Record 311;VAR NoSeriesCode@1001 : Code[20];VAR IsHandled@1000 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInitInsert@208(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInitRecord@210(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeIsCreditDocType@226(SalesHeader@1000 : Record 36;VAR CreditDocType@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateCurrencyFactor@153(VAR SalesHeader@1000 : Record 36;VAR Updated@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforePriceMessageIfSalesLinesExist@243(SalesHeader@1000 : Record 36;ChangedFieldCaption@1001 : Text;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeRecreateSalesLines@197(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeRecreateSalesLinesHandler@251(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;ChangedFieldName@1002 : Text[100];VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSalesLineByChangedFieldNo@168(VAR SalesHeader@1000 : Record 36;VAR SalesLine@1001 : Record 37;ChangedFieldNo@1003 : Integer;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSalesLineInsert@169(VAR SalesLine@1000 : Record 37;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeTestNoSeries@213(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSetSecurityFilterOnRespCenter@207(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateAllLineDim@236(VAR SalesHeader@1000 : Record 36;NewParentDimSetID@1002 : Integer;OldParentDimSetID@1001 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateLocationCode@228(VAR SalesHeader@1000 : Record 36;LocationCode@1002 : Code[10];VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateSalesLineAmounts@262(SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;CurrentFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateSalesLinesByFieldNo@303(VAR SalesHeader@1000 : Record 36;ChangedFieldNo@1001 : Integer;VAR AskQuestion@1002 : Boolean;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateShipToAddress@254(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCheckItemAvailabilityInLinesOnAfterSetFilters@242(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCollectParamsInBufferForCreateDimSetOnAfterSetTempSalesLineFilters@255(VAR TempSalesLine@1000 : TEMPORARY Record 37;SalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCopySelltoCustomerAddressFieldsFromCustomerOnAfterAssignRespCenter@182(VAR SalesHeader@1000 : Record 36;Customer@1001 : Record 18;CallingFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCreateDimOnBeforeUpdateLines@222(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCreateSalesLineOnAfterAssignType@185(VAR SalesLine@1000 : Record 37;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnInitFromContactOnBeforeInitRecord@245(VAR SalesHeader@1000 : Record 36;VAR xSalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnInitFromTemplateOnBeforeInitRecord@250(VAR SalesHeader@1000 : Record 36;VAR xSalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnInitInsertOnBeforeInitRecord@179(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnInsertTempSalesLineInBufferOnBeforeTempSalesLineInsert@256(VAR TempSalesLine@1000 : TEMPORARY Record 37;SalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnUpdateBillToCustOnAfterSalesQuote@188(VAR SalesHeader@1000 : Record 36;Contact@1001 : Record 5050);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateBilltoCustomerTemplateCodeBeforeRecreateSalesLines@171(VAR SalesHeader@1000 : Record 36;CallingFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateSellToCustomerNoAfterInit@206(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterTestQuantityShippedField@189(SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeTestSalesLineFieldsBeforeRecreate@217(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean;VAR SalesLine@1002 : Record 37);
    BEGIN
    END;

    [Integration(TRUE)]
    LOCAL PROCEDURE OnBeforeTestStatusOpen@202(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration(TRUE)]
    LOCAL PROCEDURE OnAfterTestStatusOpen@201(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateBillToCont@199(VAR SalesHeader@1000 : Record 36;Customer@1001 : Record 18;Contact@1002 : Record 5050);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateSellToCont@203(VAR SalesHeader@1000 : Record 36;Customer@1001 : Record 18;Contact@1002 : Record 5050);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateSellToCust@204(VAR SalesHeader@1000 : Record 36;Contact@1001 : Record 5050);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateSalesLines@205(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnRecreateSalesLinesOnAfterSetSalesLineFilters@239(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnRecreateSalesLinesOnBeforeConfirm@211(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;ChangedFieldName@1002 : Text[100];HideValidationDialog@1003 : Boolean;VAR Confirmed@1004 : Boolean;VAR IsHandled@1005 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnUpdateAllLineDimOnBeforeSalesLineModify@247(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnUpdateSalesLinesByFieldNoOnBeforeSalesLineModify@240(VAR SalesLine@1000 : Record 37;ChangedFieldNo@1001 : Integer;CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidatePaymentTermsCodeOnBeforeCalcDueDate@224(VAR SalesHeader@1000 : Record 36;VAR xSalesHeader@1001 : Record 36;CalledByFieldNo@1002 : Integer;CallingFieldNo@1003 : Integer;VAR IsHandled@1004 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidatePaymentTermsCodeOnBeforeCalcPmtDiscDate@225(VAR SalesHeader@1000 : Record 36;VAR xSalesHeader@1001 : Record 36;CalledByFieldNo@1002 : Integer;CallingFieldNo@1003 : Integer;VAR IsHandled@1004 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidatePaymentTermsCodeOnBeforeValidateDueDate@253(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;CurrentFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidatePaymentTermsCodeOnBeforeValidateDueDateWhenBlank@252(VAR SalesHeader@1000 : Record 36;xSalesHeader@1001 : Record 36;CurrentFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidatePostingDateOnBeforeAssignDocumentDate@234(VAR SalesHeader@1000 : Record 36;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidatePricesIncludingVATOnBeforeSalesLineModify@214(VAR SalesHeader@1000 : Record 36;VAR SalesLine@1001 : Record 37;Currency@1002 : Record 4;RecalculatePrice@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateShippingAgentCodeOnBeforeUpdateLines@215(VAR SalesHeader@1000 : Record 36;CallingFieldNo@1001 : Integer;HideValidationDialog@1002 : Boolean);
    BEGIN
    END;

    BEGIN
    {
      BAINES
      =========

      BAIN-0043 JA 271207 A¤adir campo: "Search Name"
    }
    END.
  }
}

OBJECT Table 37 Sales Line
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=16:52:02;
    Modified=Yes;
    Version List=NAVW114.07,NAVES14.07,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               TestStatusOpen;
               IF Quantity <> 0 THEN BEGIN
                 OnBeforeVerifyReservedQty(Rec,xRec,0);
                 ReserveSalesLine.VerifyQuantity(Rec,xRec);
               END;
               LOCKTABLE;
               SalesHeader."No." := '';
               IF Type = Type::Item THEN
                 IF SalesHeader.InventoryPickConflict("Document Type","Document No.",SalesHeader."Shipping Advice") THEN
                   ERROR(Text056,SalesHeader."Shipping Advice");
               IF ("Deferral Code" <> '') AND (GetDeferralAmount <> 0) THEN
                 UpdateDeferralAmounts;
             END;

    OnModify=BEGIN
               IF ("Document Type" = "Document Type"::"Blanket Order") AND
                  ((Type <> xRec.Type) OR ("No." <> xRec."No."))
               THEN BEGIN
                 SalesLine2.RESET;
                 SalesLine2.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
                 SalesLine2.SETRANGE("Blanket Order No.","Document No.");
                 SalesLine2.SETRANGE("Blanket Order Line No.","Line No.");
                 IF SalesLine2.FINDSET THEN
                   REPEAT
                     SalesLine2.TESTFIELD(Type,Type);
                     SalesLine2.TESTFIELD("No.","No.");
                   UNTIL SalesLine2.NEXT = 0;
               END;

               IF ((Quantity <> 0) OR (xRec.Quantity <> 0)) AND ItemExists(xRec."No.") AND NOT FullReservedQtyIsForAsmToOrder THEN
                 ReserveSalesLine.VerifyChange(Rec,xRec);
             END;

    OnDelete=VAR
               SalesCommentLine@1001 : Record 44;
               CapableToPromise@1000 : Codeunit 99000886;
               JobCreateInvoice@1002 : Codeunit 1002;
             BEGIN
               TestStatusOpen;

               IF (Quantity <> 0) AND ItemExists("No.") THEN BEGIN
                 ReserveSalesLine.DeleteLine(Rec);
                 CALCFIELDS("Reserved Qty. (Base)");
                 TESTFIELD("Reserved Qty. (Base)",0);
                 IF "Shipment No." = '' THEN
                   TESTFIELD("Qty. Shipped Not Invoiced",0);
                 IF "Return Receipt No." = '' THEN
                   TESTFIELD("Return Qty. Rcd. Not Invd.",0);
                 WhseValidateSourceLine.SalesLineDelete(Rec);
               END;

               IF ("Document Type" = "Document Type"::Order) AND (Quantity <> "Quantity Invoiced") THEN
                 TESTFIELD("Prepmt. Amt. Inv.","Prepmt Amt Deducted");

               CleanDropShipmentFields;
               CleanSpecialOrderFieldsAndCheckAssocPurchOrder;
               CatalogItemMgt.DelNonStockSales(Rec);

               IF "Document Type" = "Document Type"::"Blanket Order" THEN BEGIN
                 SalesLine2.RESET;
                 SalesLine2.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
                 SalesLine2.SETRANGE("Blanket Order No.","Document No.");
                 SalesLine2.SETRANGE("Blanket Order Line No.","Line No.");
                 IF SalesLine2.FINDFIRST THEN
                   SalesLine2.TESTFIELD("Blanket Order Line No.",0);
               END;

               IF Type = Type::Item THEN BEGIN
                 ATOLink.DeleteAsmFromSalesLine(Rec);
                 DeleteItemChargeAssgnt("Document Type","Document No.","Line No.");
               END;

               IF Type = Type::"Charge (Item)" THEN
                 DeleteChargeChargeAssgnt("Document Type","Document No.","Line No.");

               CapableToPromise.RemoveReqLines("Document No.","Line No.",0,FALSE);

               IF "Line No." <> 0 THEN BEGIN
                 SalesLine2.RESET;
                 SalesLine2.SETRANGE("Document Type","Document Type");
                 SalesLine2.SETRANGE("Document No.","Document No.");
                 SalesLine2.SETRANGE("Attached to Line No.","Line No.");
                 SalesLine2.SETFILTER("Line No.",'<>%1',"Line No.");
                 SalesLine2.DELETEALL(TRUE);
               END;

               IF "Job Contract Entry No." <> 0 THEN
                 JobCreateInvoice.DeleteSalesLine(Rec);

               SalesCommentLine.SETRANGE("Document Type","Document Type");
               SalesCommentLine.SETRANGE("No.","Document No.");
               SalesCommentLine.SETRANGE("Document Line No.","Line No.");
               IF NOT SalesCommentLine.ISEMPTY THEN
                 SalesCommentLine.DELETEALL;

               // In case we have roundings on VAT or Sales Tax, we should update some other line
               IF (Type <> Type::" ") AND ("Line No." <> 0) AND ("Attached to Line No." = 0) AND ("Job Contract Entry No." = 0 ) AND
                  (Quantity <> 0) AND (Amount <> 0) AND (Amount <> "Amount Including VAT") AND NOT StatusCheckSuspended
               THEN BEGIN
                 Quantity := 0;
                 "Quantity (Base)" := 0;
                 "Line Discount Amount" := 0;
                 "Inv. Discount Amount" := 0;
                 "Inv. Disc. Amount to Invoice" := 0;
                 UpdateAmounts;
               END;

               IF "Deferral Code" <> '' THEN
                 DeferralUtilities.DeferralCodeOnDelete(
                   DeferralUtilities.GetSalesDeferralDocType,'','',
                   "Document Type","Document No.","Line No.");
             END;

    OnRename=BEGIN
               ERROR(Text001,TABLECAPTION);
             END;

    CaptionML=[ENU=Sales Line;
               ESP=L¡n. venta];
    LookupPageID=Page516;
    DrillDownPageID=Page516;
  }
  FIELDS
  {
    { 1   ;   ;Document Type       ;Option        ;CaptionML=[ENU=Document Type;
                                                              ESP=Tipo documento];
                                                   OptionCaptionML=[ENU=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,,,,,,,,,,,,,,,Pedido EDI;
                                                                    ESP=Oferta,Pedido,Factura,Abono,Pedido abierto,Devoluci¢n,,,,,,,,,,,,,,,Pedido EDI];
                                                   OptionString=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,,,,,,,,,,,,,,,Pedido EDI }
    { 2   ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Sell-to Customer No.;
                                                              ESP=Venta a-N§ cliente];
                                                   Editable=No }
    { 3   ;   ;Document No.        ;Code20        ;TableRelation="Sales Header".No. WHERE (Document Type=FIELD(Document Type));
                                                   CaptionML=[ENU=Document No.;
                                                              ESP=N§ documento] }
    { 4   ;   ;Line No.            ;Integer       ;CaptionML=[ENU=Line No.;
                                                              ESP=N§ l¡nea] }
    { 5   ;   ;Type                ;Option        ;OnValidate=VAR
                                                                TempSalesLine@1000 : TEMPORARY Record 37;
                                                              BEGIN
                                                                TestJobPlanningLine;
                                                                TestStatusOpen;
                                                                GetSalesHeader;

                                                                TESTFIELD("Qty. Shipped Not Invoiced",0);
                                                                TESTFIELD("Quantity Shipped",0);
                                                                TESTFIELD("Shipment No.",'');

                                                                TESTFIELD("Return Qty. Rcd. Not Invd.",0);
                                                                TESTFIELD("Return Qty. Received",0);
                                                                TESTFIELD("Return Receipt No.",'');

                                                                TESTFIELD("Prepmt. Amt. Inv.",0);

                                                                CheckAssocPurchOrder(FIELDCAPTION(Type));

                                                                IF Type <> xRec.Type THEN BEGIN
                                                                  CASE xRec.Type OF
                                                                    Type::Item:
                                                                      BEGIN
                                                                        ATOLink.DeleteAsmFromSalesLine(Rec);
                                                                        IF Quantity <> 0 THEN BEGIN
                                                                          SalesHeader.TESTFIELD(Status,SalesHeader.Status::Open);
                                                                          CALCFIELDS("Reserved Qty. (Base)");
                                                                          TESTFIELD("Reserved Qty. (Base)",0);
                                                                          ReserveSalesLine.VerifyChange(Rec,xRec);
                                                                          WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                          OnValidateTypeOnAfterCheckItem(Rec,xRec);
                                                                        END;
                                                                      END;
                                                                    Type::"Fixed Asset":
                                                                      IF Quantity <> 0 THEN
                                                                        SalesHeader.TESTFIELD(Status,SalesHeader.Status::Open);
                                                                    Type::"Charge (Item)":
                                                                      DeleteChargeChargeAssgnt("Document Type","Document No.","Line No.");
                                                                  END;
                                                                  IF xRec."Deferral Code" <> '' THEN
                                                                    DeferralUtilities.RemoveOrSetDeferralSchedule('',
                                                                      DeferralUtilities.GetSalesDeferralDocType,'','',
                                                                      xRec."Document Type",xRec."Document No.",xRec."Line No.",
                                                                      xRec.GetDeferralAmount,xRec."Posting Date",'',xRec."Currency Code",TRUE);
                                                                END;
                                                                AddOnIntegrMgt.CheckReceiptOrderStatus(Rec);
                                                                TempSalesLine := Rec;
                                                                INIT;
                                                                IF xRec."Line Amount" <> 0 THEN
                                                                  "Recalculate Invoice Disc." := TRUE;

                                                                Type := TempSalesLine.Type;
                                                                "System-Created Entry" := TempSalesLine."System-Created Entry";
                                                                "Currency Code" := SalesHeader."Currency Code";

                                                                OnValidateTypeOnCopyFromTempSalesLine(Rec,TempSalesLine);

                                                                IF Type = Type::Item THEN
                                                                  "Allow Item Charge Assignment" := TRUE
                                                                ELSE
                                                                  "Allow Item Charge Assignment" := FALSE;
                                                                IF Type = Type::Item THEN BEGIN
                                                                  IF SalesHeader.InventoryPickConflict("Document Type","Document No.",SalesHeader."Shipping Advice") THEN
                                                                    ERROR(Text056,SalesHeader."Shipping Advice");
                                                                  IF SalesHeader.WhseShpmntConflict("Document Type","Document No.",SalesHeader."Shipping Advice") THEN
                                                                    ERROR(Text052,SalesHeader."Shipping Advice");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Type;
                                                              ESP=Tipo];
                                                   OptionCaptionML=[ENU=" ,G/L Account,Item,Resource,Fixed Asset,Charge (Item)";
                                                                    ESP=" ,Cuenta,Producto,Recurso,Activo fijo,Cargo (prod.)"];
                                                   OptionString=[ ,G/L Account,Item,Resource,Fixed Asset,Charge (Item)] }
    { 6   ;   ;No.                 ;Code20        ;TableRelation=IF (Type=CONST(" ")) "Standard Text"
                                                                 ELSE IF (Type=CONST(G/L Account),
                                                                          System-Created Entry=CONST(No)) "G/L Account" WHERE (Direct Posting=CONST(Yes),
                                                                                                                               Account Type=CONST(Posting),
                                                                                                                               Blocked=CONST(No))
                                                                                                                               ELSE IF (Type=CONST(G/L Account),
                                                                                                                                        System-Created Entry=CONST(Yes)) "G/L Account"
                                                                                                                                        ELSE IF (Type=CONST(Resource)) Resource
                                                                                                                                        ELSE IF (Type=CONST(Fixed Asset)) "Fixed Asset"
                                                                                                                                        ELSE IF (Type=CONST("Charge (Item)")) "Item Charge"
                                                                                                                                        ELSE IF (Type=CONST(Item),
                                                                                                                                                 Document Type=FILTER(<>Credit Memo&<>Return Order)) Item WHERE (Blocked=CONST(No),
                                                                                                                                                                                                                 Sales Blocked=CONST(No))
                                                                                                                                                                                                                 ELSE IF (Type=CONST(Item),
                                                                                                                                                                                                                          Document Type=FILTER(Credit Memo|Return Order)) Item WHERE (Blocked=CONST(No));
                                                   OnValidate=VAR
                                                                TempSalesLine@1003 : TEMPORARY Record 37;
                                                                FindRecordMgt@1000 : Codeunit 703;
                                                                IsHandled@1001 : Boolean;
                                                              BEGIN
                                                                GetSalesSetup;
                                                                IF SalesSetup."Create Item from Item No." THEN
                                                                  "No." := FindRecordMgt.FindNoFromTypedValue(Type,"No.",NOT "System-Created Entry");

                                                                TestJobPlanningLine;
                                                                TestStatusOpen;
                                                                CheckItemAvailable(FIELDNO("No."));

                                                                IF (xRec."No." <> "No.") AND (Quantity <> 0) THEN BEGIN
                                                                  TESTFIELD("Qty. to Asm. to Order (Base)",0);
                                                                  CALCFIELDS("Reserved Qty. (Base)");
                                                                  TESTFIELD("Reserved Qty. (Base)",0);
                                                                  IF Type = Type::Item THEN
                                                                    WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                  OnValidateNoOnAfterVerifyChange(Rec,xRec);
                                                                END;

                                                                TESTFIELD("Qty. Shipped Not Invoiced",0);
                                                                TESTFIELD("Quantity Shipped",0);
                                                                TESTFIELD("Shipment No.",'');

                                                                TESTFIELD("Prepmt. Amt. Inv.",0);

                                                                TESTFIELD("Return Qty. Rcd. Not Invd.",0);
                                                                TESTFIELD("Return Qty. Received",0);
                                                                TESTFIELD("Return Receipt No.",'');

                                                                IF "No." = '' THEN
                                                                  ATOLink.DeleteAsmFromSalesLine(Rec);
                                                                CheckAssocPurchOrder(FIELDCAPTION("No."));
                                                                AddOnIntegrMgt.CheckReceiptOrderStatus(Rec);

                                                                OnValidateNoOnBeforeInitRec(Rec,xRec,CurrFieldNo);
                                                                TempSalesLine := Rec;
                                                                INIT;
                                                                IF xRec."Line Amount" <> 0 THEN
                                                                  "Recalculate Invoice Disc." := TRUE;
                                                                Type := TempSalesLine.Type;
                                                                "No." := TempSalesLine."No.";
                                                                OnValidateNoOnCopyFromTempSalesLine(Rec,TempSalesLine);
                                                                IF "No." = '' THEN
                                                                  EXIT;

                                                                IF HasTypeToFillMandatoryFields THEN
                                                                  Quantity := TempSalesLine.Quantity;

                                                                "System-Created Entry" := TempSalesLine."System-Created Entry";
                                                                GetSalesHeader;
                                                                InitHeaderDefaults(SalesHeader);
                                                                OnValidateNoOnAfterInitHeaderDefaults(SalesHeader,TempSalesLine);

                                                                CALCFIELDS("Substitution Available");

                                                                "Promised Delivery Date" := SalesHeader."Promised Delivery Date";
                                                                "Requested Delivery Date" := SalesHeader."Requested Delivery Date";
                                                                "Shipment Date" :=
                                                                  CalendarMgmt.CalcDateBOC(
                                                                    '',SalesHeader."Shipment Date",CalChange."Source Type"::Location,"Location Code",'',
                                                                    CalChange."Source Type"::"Shipping Agent","Shipping Agent Code","Shipping Agent Service Code",FALSE);

                                                                IsHandled := FALSE;
                                                                OnValidateNoOnBeforeUpdateDates(Rec,xRec,SalesHeader,CurrFieldNo,IsHandled,TempSalesLine);
                                                                IF NOT IsHandled THEN
                                                                  UpdateDates;

                                                                OnAfterAssignHeaderValues(Rec,SalesHeader);

                                                                CASE Type OF
                                                                  Type::" ":
                                                                    CopyFromStandardText;
                                                                  Type::"G/L Account":
                                                                    CopyFromGLAccount;
                                                                  Type::Item:
                                                                    CopyFromItem;
                                                                  Type::Resource:
                                                                    CopyFromResource;
                                                                  Type::"Fixed Asset":
                                                                    CopyFromFixedAsset;
                                                                  Type::"Charge (Item)":
                                                                    CopyFromItemCharge;
                                                                END;

                                                                OnAfterAssignFieldsForNo(Rec,xRec,SalesHeader);

                                                                IF Type <> Type::" " THEN BEGIN
                                                                  PostingSetupMgt.CheckGenPostingSetupSalesAccount("Gen. Bus. Posting Group","Gen. Prod. Posting Group");
                                                                  PostingSetupMgt.CheckGenPostingSetupCOGSAccount("Gen. Bus. Posting Group","Gen. Prod. Posting Group");
                                                                  PostingSetupMgt.CheckVATPostingSetupSalesAccount("VAT Bus. Posting Group","VAT Prod. Posting Group");
                                                                END;

                                                                IF HasTypeToFillMandatoryFields AND (Type <> Type::"Fixed Asset") THEN
                                                                  VALIDATE("VAT Prod. Posting Group");

                                                                UpdatePrepmtSetupFields;

                                                                IF HasTypeToFillMandatoryFields THEN BEGIN
                                                                  VALIDATE("Unit of Measure Code");
                                                                  IF Quantity <> 0 THEN BEGIN
                                                                    InitOutstanding;
                                                                    IF IsCreditDocType THEN
                                                                      InitQtyToReceive
                                                                    ELSE
                                                                      InitQtyToShip;
                                                                    InitQtyToAsm;
                                                                    UpdateWithWarehouseShip;
                                                                  END;
                                                                  UpdateUnitPrice(FIELDNO("No."));
                                                                END;

                                                                OnValidateNoOnAfterUpdateUnitPrice(Rec,xRec);

                                                                CreateDim(
                                                                  DimMgt.TypeToTableID3(Type),"No.",
                                                                  DATABASE::Job,"Job No.",
                                                                  DATABASE::"Responsibility Center","Responsibility Center");

                                                                IF "No." <> xRec."No." THEN BEGIN
                                                                  IF Type = Type::Item THEN
                                                                    IF (Quantity <> 0) AND ItemExists(xRec."No.") THEN BEGIN
                                                                      ReserveSalesLine.VerifyChange(Rec,xRec);
                                                                      WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                    END;
                                                                  GetDefaultBin;
                                                                  AutoAsmToOrder;
                                                                  DeleteItemChargeAssgnt("Document Type","Document No.","Line No.");
                                                                  IF Type = Type::"Charge (Item)" THEN
                                                                    DeleteChargeChargeAssgnt("Document Type","Document No.","Line No.");
                                                                END;

                                                                UpdateItemCrossRef;
                                                              END;

                                                   ValidateTableRelation=No;
                                                   CaptionML=[ENU=No.;
                                                              ESP=N§];
                                                   CaptionClass=GetCaptionClass(FIELDNO("No.")) }
    { 7   ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   OnValidate=VAR
                                                                Item@1000 : Record 27;
                                                                IsHandled@1001 : Boolean;
                                                              BEGIN
                                                                TestJobPlanningLine;
                                                                TestStatusOpen;
                                                                CheckAssocPurchOrder(FIELDCAPTION("Location Code"));
                                                                IF "Location Code" <> '' THEN
                                                                  IF IsNonInventoriableItem THEN BEGIN
                                                                    GetItem(Item);
                                                                    Item.TESTFIELD(Type,Item.Type::Inventory);
                                                                  END;
                                                                IF xRec."Location Code" <> "Location Code" THEN BEGIN
                                                                  IF NOT FullQtyIsForAsmToOrder THEN BEGIN
                                                                    CALCFIELDS("Reserved Qty. (Base)");
                                                                    TESTFIELD("Reserved Qty. (Base)","Qty. to Asm. to Order (Base)");
                                                                  END;
                                                                  TESTFIELD("Qty. Shipped Not Invoiced",0);
                                                                  TESTFIELD("Shipment No.",'');
                                                                  TESTFIELD("Return Qty. Rcd. Not Invd.",0);
                                                                  TESTFIELD("Return Receipt No.",'');
                                                                END;

                                                                GetSalesHeader;
                                                                IsHandled := FALSE;
                                                                OnValidateLocationCodeOnBeforeSetShipmentDate(Rec,IsHandled);
                                                                IF NOT IsHandled THEN
                                                                  "Shipment Date" :=
                                                                    CalendarMgmt.CalcDateBOC(
                                                                      '',SalesHeader."Shipment Date",CalChange."Source Type"::Location,"Location Code",
                                                                      '',CalChange."Source Type"::"Shipping Agent","Shipping Agent Code","Shipping Agent Service Code",
                                                                      FALSE);

                                                                CheckItemAvailable(FIELDNO("Location Code"));

                                                                IF NOT "Drop Shipment" THEN BEGIN
                                                                  IF "Location Code" = '' THEN BEGIN
                                                                    IF InvtSetup.GET THEN
                                                                      "Outbound Whse. Handling Time" := InvtSetup."Outbound Whse. Handling Time";
                                                                  END ELSE
                                                                    IF Location.GET("Location Code") THEN
                                                                      "Outbound Whse. Handling Time" := Location."Outbound Whse. Handling Time";
                                                                END ELSE
                                                                  EVALUATE("Outbound Whse. Handling Time",'<0D>');

                                                                IF "Location Code" <> xRec."Location Code" THEN BEGIN
                                                                  InitItemAppl(TRUE);
                                                                  GetDefaultBin;
                                                                  InitQtyToAsm;
                                                                  AutoAsmToOrder;
                                                                  IF Quantity <> 0 THEN BEGIN
                                                                    IF NOT "Drop Shipment" THEN
                                                                      UpdateWithWarehouseShip;
                                                                    IF NOT FullReservedQtyIsForAsmToOrder THEN
                                                                      ReserveSalesLine.VerifyChange(Rec,xRec);
                                                                    WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                  END;
                                                                  IF IsInventoriableItem THEN
                                                                    PostingSetupMgt.CheckInvtPostingSetupInventoryAccount("Location Code","Posting Group");
                                                                END;

                                                                UpdateDates;

                                                                IF (Type = Type::Item) AND ("No." <> '') THEN
                                                                  GetUnitCost;

                                                                CheckWMS;

                                                                IF "Document Type" = "Document Type"::"Return Order" THEN
                                                                  ValidateReturnReasonCode(FIELDNO("Location Code"));
                                                              END;

                                                   OnLookup=VAR
                                                              CodAlmacen@1170170000 : Code[10];
                                                              LookUpAlmacen@1170170001 : Codeunit 7014450;
                                                            BEGIN
                                                              // VNTES.i
                                                              CodAlmacen := LookUpAlmacen.AlmacenLookUp(37,"No.",Type);
                                                              IF CodAlmacen <> '' THEN
                                                                VALIDATE("Location Code",CodAlmacen);
                                                              // VNTES.f
                                                            END;

                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 8   ;   ;Posting Group       ;Code20        ;TableRelation=IF (Type=CONST(Item)) "Inventory Posting Group"
                                                                 ELSE IF (Type=CONST(Fixed Asset)) "FA Posting Group";
                                                   CaptionML=[ENU=Posting Group;
                                                              ESP=Grupo de registro];
                                                   Editable=No }
    { 10  ;   ;Shipment Date       ;Date          ;OnValidate=VAR
                                                                CheckDateConflict@1000 : Codeunit 99000815;
                                                              BEGIN
                                                                TestStatusOpen;
                                                                WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                IF CurrFieldNo <> 0 THEN
                                                                  AddOnIntegrMgt.CheckReceiptOrderStatus(Rec);

                                                                IF "Shipment Date" <> 0D THEN BEGIN
                                                                  IF CurrFieldNo IN [
                                                                                     FIELDNO("Planned Shipment Date"),
                                                                                     FIELDNO("Planned Delivery Date"),
                                                                                     FIELDNO("Shipment Date"),
                                                                                     FIELDNO("Shipping Time"),
                                                                                     FIELDNO("Outbound Whse. Handling Time"),
                                                                                     FIELDNO("Requested Delivery Date")]
                                                                  THEN
                                                                    CheckItemAvailable(FIELDNO("Shipment Date"));

                                                                  IF ("Shipment Date" < WORKDATE) AND HasTypeToFillMandatoryFields THEN
                                                                    IF NOT (GetHideValidationDialog OR HasBeenShown) AND GUIALLOWED THEN BEGIN
                                                                      MESSAGE(
                                                                        Text014,
                                                                        FIELDCAPTION("Shipment Date"),"Shipment Date",WORKDATE);
                                                                      HasBeenShown := TRUE;
                                                                    END;
                                                                END;

                                                                AutoAsmToOrder;
                                                                IF (xRec."Shipment Date" <> "Shipment Date") AND
                                                                   (Quantity <> 0) AND
                                                                   NOT StatusCheckSuspended
                                                                THEN
                                                                  CheckDateConflict.SalesLineCheck(Rec,CurrFieldNo <> 0);

                                                                IF NOT PlannedShipmentDateCalculated THEN
                                                                  "Planned Shipment Date" := CalcPlannedShptDate(FIELDNO("Shipment Date"));
                                                                IF NOT PlannedDeliveryDateCalculated THEN
                                                                  "Planned Delivery Date" := CalcPlannedDeliveryDate(FIELDNO("Shipment Date"));
                                                              END;

                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipment Date;
                                                              ESP=Fecha env¡o] }
    { 11  ;   ;Description         ;Text100       ;TableRelation=IF (Type=CONST(G/L Account),
                                                                     System-Created Entry=CONST(No)) "G/L Account".Name WHERE (Direct Posting=CONST(Yes),
                                                                                                                               Account Type=CONST(Posting),
                                                                                                                               Blocked=CONST(No))
                                                                                                                               ELSE IF (Type=CONST(G/L Account),
                                                                                                                                        System-Created Entry=CONST(Yes)) "G/L Account".Name
                                                                                                                                        ELSE IF (Type=CONST(Item),
                                                                                                                                                 Document Type=FILTER(<>Credit Memo&<>Return Order)) Item.Description WHERE (Blocked=CONST(No),
                                                                                                                                                                                                                             Sales Blocked=CONST(No))
                                                                                                                                                                                                                             ELSE IF (Type=CONST(Item),
                                                                                                                                                                                                                                      Document Type=FILTER(Credit Memo|Return Order)) Item.Description WHERE (Blocked=CONST(No))
                                                                                                                                                                                                                                      ELSE IF (Type=CONST(Resource)) Resource.Name
                                                                                                                                                                                                                                      ELSE IF (Type=CONST(Fixed Asset)) "Fixed Asset".Description
                                                                                                                                                                                                                                      ELSE IF (Type=CONST("Charge (Item)")) "Item Charge".Description;
                                                   OnValidate=VAR
                                                                Item@1000 : Record 27;
                                                                ApplicationAreaMgmtFacade@1004 : Codeunit 9179;
                                                                FindRecordMgt@1005 : Codeunit 703;
                                                                ReturnValue@1001 : Text[50];
                                                                DescriptionIsNo@1002 : Boolean;
                                                                DefaultCreate@1003 : Boolean;
                                                                IsHandled@1008 : Boolean;
                                                              BEGIN
                                                                IF Type = Type::" " THEN
                                                                  EXIT;

                                                                IF "No." <> '' THEN
                                                                  EXIT;

                                                                CASE Type OF
                                                                  Type::Item:
                                                                    BEGIN
                                                                      IF STRLEN(Description) <= MAXSTRLEN(Item."No.") THEN
                                                                        DescriptionIsNo := Item.GET(Description)
                                                                      ELSE
                                                                        DescriptionIsNo := FALSE;

                                                                      IF NOT DescriptionIsNo THEN BEGIN
                                                                        Item.SETFILTER(Description,'''@' + CONVERTSTR(Description,'''','?') + '''');
                                                                        Item.SETRANGE(Blocked,FALSE);
                                                                        Item.SETRANGE("Sales Blocked",FALSE);
                                                                        IF Item.FINDFIRST THEN BEGIN
                                                                          VALIDATE("No.",Item."No.");
                                                                          EXIT;
                                                                        END;
                                                                      END;

                                                                      GetSalesSetup;
                                                                      DefaultCreate := ("No." = '') AND SalesSetup."Create Item from Description";
                                                                      IF Item.TryGetItemNoOpenCard(
                                                                           ReturnValue,Description,DefaultCreate,NOT GetHideValidationDialog,TRUE)
                                                                      THEN
                                                                        CASE ReturnValue OF
                                                                          '':
                                                                            BEGIN
                                                                              LookupRequested := TRUE;
                                                                              Description := xRec.Description;
                                                                            END;
                                                                          "No.":
                                                                            Description := xRec.Description;
                                                                          ELSE BEGIN
                                                                            CurrFieldNo := FIELDNO("No.");
                                                                            VALIDATE("No.",COPYSTR(ReturnValue,1,MAXSTRLEN(Item."No.")));
                                                                          END;
                                                                        END;
                                                                    END;
                                                                  ELSE BEGIN
                                                                    IsHandled := FALSE;
                                                                    OnBeforeFindNoByDescription(Rec,xRec,CurrFieldNo,IsHandled);
                                                                    IF NOT IsHandled THEN BEGIN
                                                                      ReturnValue := FindRecordMgt.FindNoByDescription(Type,Description,TRUE);
                                                                      IF ReturnValue <> '' THEN BEGIN
                                                                        CurrFieldNo := FIELDNO("No.");
                                                                        VALIDATE("No.",COPYSTR(ReturnValue,1,MAXSTRLEN("No.")));
                                                                      END;
                                                                    END;
                                                                  END;
                                                                END;

                                                                IsHandled := FALSE;
                                                                OnValidateDescriptionOnBeforeCannotFindDescrError(Rec,xRec,IsHandled);
                                                                IF NOT IsHandled THEN
                                                                  IF ("No." = '') AND GUIALLOWED AND ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                                                                    IF "Document Type" IN
                                                                       ["Document Type"::Order,"Document Type"::Invoice,"Document Type"::Quote,"Document Type"::"Credit Memo"]
                                                                    THEN
                                                                      ERROR(CannotFindDescErr,Type,Description);
                                                              END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Description;
                                                              ESP=Descripci¢n] }
    { 12  ;   ;Description 2       ;Text50        ;CaptionML=[ENU=Description 2;
                                                              ESP=Descripci¢n 2] }
    { 13  ;   ;Unit of Measure     ;Text50        ;TableRelation=IF (Type=FILTER(<>' ')) "Unit of Measure".Description;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Unit of Measure;
                                                              ESP=Unidad medida] }
    { 15  ;   ;Quantity            ;Decimal       ;OnValidate=VAR
                                                                Item@1001 : Record 27;
                                                                ItemLedgEntry@1000 : Record 32;
                                                              BEGIN
                                                                TestJobPlanningLine;
                                                                TestStatusOpen;

                                                                CheckAssocPurchOrder(FIELDCAPTION(Quantity));

                                                                IF "Shipment No." <> '' THEN
                                                                  CheckShipmentRelation
                                                                ELSE
                                                                  IF "Return Receipt No." <> '' THEN
                                                                    CheckRetRcptRelation;

                                                                "Quantity (Base)" := CalcBaseQty(Quantity);

                                                                OnValidateQuantityOnAfterCalcBaseQty(Rec,xRec);

                                                                IF IsCreditDocType THEN BEGIN
                                                                  IF (Quantity * "Return Qty. Received" < 0) OR
                                                                     ((ABS(Quantity) < ABS("Return Qty. Received")) AND ("Return Receipt No." = ''))
                                                                  THEN
                                                                    FIELDERROR(Quantity,STRSUBSTNO(Text003,FIELDCAPTION("Return Qty. Received")));
                                                                  IF ("Quantity (Base)" * "Return Qty. Received (Base)" < 0) OR
                                                                     ((ABS("Quantity (Base)") < ABS("Return Qty. Received (Base)")) AND ("Return Receipt No." = ''))
                                                                  THEN
                                                                    FIELDERROR("Quantity (Base)",STRSUBSTNO(Text003,FIELDCAPTION("Return Qty. Received (Base)")));
                                                                END ELSE BEGIN
                                                                  IF (Quantity * "Quantity Shipped" < 0) OR
                                                                     ((ABS(Quantity) < ABS("Quantity Shipped")) AND ("Shipment No." = ''))
                                                                  THEN
                                                                    FIELDERROR(Quantity,STRSUBSTNO(Text003,FIELDCAPTION("Quantity Shipped")));
                                                                  IF ("Quantity (Base)" * "Qty. Shipped (Base)" < 0) OR
                                                                     ((ABS("Quantity (Base)") < ABS("Qty. Shipped (Base)")) AND ("Shipment No." = ''))
                                                                  THEN
                                                                    FIELDERROR("Quantity (Base)",STRSUBSTNO(Text003,FIELDCAPTION("Qty. Shipped (Base)")));
                                                                END;

                                                                IF (Type = Type::"Charge (Item)") AND (CurrFieldNo <> 0) THEN BEGIN
                                                                  IF (Quantity = 0) AND ("Qty. to Assign" <> 0) THEN
                                                                    FIELDERROR("Qty. to Assign",STRSUBSTNO(Text009,FIELDCAPTION(Quantity),Quantity));
                                                                  IF (Quantity * "Qty. Assigned" < 0) OR (ABS(Quantity) < ABS("Qty. Assigned")) THEN
                                                                    FIELDERROR(Quantity,STRSUBSTNO(Text003,FIELDCAPTION("Qty. Assigned")));
                                                                END;

                                                                AddOnIntegrMgt.CheckReceiptOrderStatus(Rec);
                                                                IF (xRec.Quantity <> Quantity) OR (xRec."Quantity (Base)" <> "Quantity (Base)") THEN BEGIN
                                                                  InitOutstanding;
                                                                  IF IsCreditDocType THEN
                                                                    InitQtyToReceive
                                                                  ELSE
                                                                    InitQtyToShip;
                                                                  InitQtyToAsm;
                                                                  SetDefaultQuantity;
                                                                END;

                                                                CheckItemAvailable(FIELDNO(Quantity));

                                                                IF (Quantity * xRec.Quantity < 0) OR (Quantity = 0) THEN
                                                                  InitItemAppl(FALSE);

                                                                IF Type = Type::Item THEN BEGIN
                                                                  UpdateUnitPrice(FIELDNO(Quantity));
                                                                  IF (xRec.Quantity <> Quantity) OR (xRec."Quantity (Base)" <> "Quantity (Base)") THEN BEGIN
                                                                    OnBeforeVerifyReservedQty(Rec,xRec,FIELDNO(Quantity));
                                                                    ReserveSalesLine.VerifyQuantity(Rec,xRec);
                                                                    IF NOT "Drop Shipment" THEN
                                                                      UpdateWithWarehouseShip;
                                                                    WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                    IF ("Quantity (Base)" * xRec."Quantity (Base)" <= 0) AND ("No." <> '') THEN BEGIN
                                                                      GetItem(Item);
                                                                      OnValidateQuantityOnBeforeGetUnitCost(Rec,Item);
                                                                      IF (Item."Costing Method" = Item."Costing Method"::Standard) AND NOT IsShipment THEN
                                                                        GetUnitCost;
                                                                    END;
                                                                  END;
                                                                  VALIDATE("Qty. to Assemble to Order");
                                                                  IF (Quantity = "Quantity Invoiced") AND (CurrFieldNo <> 0) THEN
                                                                    CheckItemChargeAssgnt;
                                                                  CheckApplFromItemLedgEntry(ItemLedgEntry);
                                                                END ELSE
                                                                  VALIDATE("Line Discount %");

                                                                IF (xRec.Quantity <> Quantity) AND (Quantity = 0) AND
                                                                   ((Amount <> 0) OR ("Amount Including VAT" <> 0) OR ("VAT Base Amount" <> 0))
                                                                THEN BEGIN
                                                                  Amount := 0;
                                                                  "Amount Including VAT" := 0;
                                                                  "VAT Base Amount" := 0;
                                                                END;

                                                                UpdatePrePaymentAmounts;

                                                                CheckWMS;

                                                                UpdatePlanned;
                                                                IF "Document Type" = "Document Type"::"Return Order" THEN
                                                                  ValidateReturnReasonCode(FIELDNO(Quantity));
                                                              END;

                                                   CaptionML=[ENU=Quantity;
                                                              ESP=Cantidad];
                                                   DecimalPlaces=0:5 }
    { 16  ;   ;Outstanding Quantity;Decimal       ;CaptionML=[ENU=Outstanding Quantity;
                                                              ESP=Cantidad pendiente];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 17  ;   ;Qty. to Invoice     ;Decimal       ;OnValidate=BEGIN
                                                                IF "Qty. to Invoice" = MaxQtyToInvoice THEN
                                                                  InitQtyToInvoice
                                                                ELSE
                                                                  "Qty. to Invoice (Base)" := CalcBaseQty("Qty. to Invoice");
                                                                IF ("Qty. to Invoice" * Quantity < 0) OR
                                                                   (ABS("Qty. to Invoice") > ABS(MaxQtyToInvoice))
                                                                THEN
                                                                  ERROR(
                                                                    Text005,
                                                                    MaxQtyToInvoice);
                                                                IF ("Qty. to Invoice (Base)" * "Quantity (Base)" < 0) OR
                                                                   (ABS("Qty. to Invoice (Base)") > ABS(MaxQtyToInvoiceBase))
                                                                THEN
                                                                  ERROR(
                                                                    Text006,
                                                                    MaxQtyToInvoiceBase);
                                                                "VAT Difference" := 0;
                                                                "EC Difference" := 0;
                                                                CalcInvDiscToInvoice;
                                                                CalcPrepaymentToDeduct;
                                                              END;

                                                   CaptionML=[ENU=Qty. to Invoice;
                                                              ESP=Cant. a facturar];
                                                   DecimalPlaces=0:5 }
    { 18  ;   ;Qty. to Ship        ;Decimal       ;OnValidate=VAR
                                                                ItemLedgEntry@1000 : Record 32;
                                                                IsHandled@1001 : Boolean;
                                                              BEGIN
                                                                GetLocation("Location Code");
                                                                IF (CurrFieldNo <> 0) AND
                                                                   (Type = Type::Item) AND
                                                                   (NOT "Drop Shipment")
                                                                THEN BEGIN
                                                                  IF Location."Require Shipment" AND
                                                                     ("Qty. to Ship" <> 0)
                                                                  THEN
                                                                    CheckWarehouse;
                                                                  WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                END;
                                                                OnValidateQtyToShipOnAfterCheck(Rec,CurrFieldNo);

                                                                IF "Qty. to Ship" = "Outstanding Quantity" THEN
                                                                  InitQtyToShip
                                                                ELSE BEGIN
                                                                  "Qty. to Ship (Base)" := CalcBaseQty("Qty. to Ship");
                                                                  CheckServItemCreation;
                                                                  InitQtyToInvoice;
                                                                END;

                                                                IsHandled := FALSE;
                                                                OnValidateQtyToShipAfterInitQty(Rec,xRec,CurrFieldNo,IsHandled);
                                                                IF NOT IsHandled THEN BEGIN
                                                                  IF ((("Qty. to Ship" < 0) XOR (Quantity < 0)) AND (Quantity <> 0) AND ("Qty. to Ship" <> 0)) OR
                                                                     (ABS("Qty. to Ship") > ABS("Outstanding Quantity")) OR
                                                                     (((Quantity < 0) XOR ("Outstanding Quantity" < 0)) AND (Quantity <> 0) AND ("Outstanding Quantity" <> 0))
                                                                  THEN
                                                                    ERROR(Text007,"Outstanding Quantity");
                                                                  IF ((("Qty. to Ship (Base)" < 0) XOR ("Quantity (Base)" < 0)) AND ("Qty. to Ship (Base)" <> 0) AND ("Quantity (Base)" <> 0)) OR
                                                                     (ABS("Qty. to Ship (Base)") > ABS("Outstanding Qty. (Base)")) OR
                                                                     ((("Quantity (Base)" < 0) XOR ("Outstanding Qty. (Base)" < 0)) AND ("Quantity (Base)" <> 0) AND ("Outstanding Qty. (Base)" <> 0))
                                                                  THEN
                                                                    ERROR(Text008,"Outstanding Qty. (Base)");
                                                                END;

                                                                IF (CurrFieldNo <> 0) AND (Type = Type::Item) AND ("Qty. to Ship" < 0) THEN
                                                                  CheckApplFromItemLedgEntry(ItemLedgEntry);

                                                                ATOLink.UpdateQtyToAsmFromSalesLine(Rec);
                                                              END;

                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Qty. to Ship;
                                                              ESP=Cantidad a enviar];
                                                   DecimalPlaces=0:5 }
    { 22  ;   ;Unit Price          ;Decimal       ;OnValidate=BEGIN
                                                                VALIDATE("Line Discount %");
                                                              END;

                                                   CaptionML=[ENU=Unit Price;
                                                              ESP=Precio venta];
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code";
                                                   CaptionClass=GetCaptionClass(FIELDNO("Unit Price")) }
    { 23  ;   ;Unit Cost (LCY)     ;Decimal       ;OnValidate=VAR
                                                                Item@1000 : Record 27;
                                                              BEGIN
                                                                IF (CurrFieldNo = FIELDNO("Unit Cost (LCY)")) AND
                                                                   ("Unit Cost (LCY)" <> xRec."Unit Cost (LCY)")
                                                                THEN
                                                                  CheckAssocPurchOrder(FIELDCAPTION("Unit Cost (LCY)"));

                                                                IF (CurrFieldNo = FIELDNO("Unit Cost (LCY)")) AND
                                                                   (Type = Type::Item) AND ("No." <> '') AND ("Quantity (Base)" <> 0)
                                                                THEN BEGIN
                                                                  TestJobPlanningLine;
                                                                  GetItem(Item);
                                                                  IF (Item."Costing Method" = Item."Costing Method"::Standard) AND NOT IsShipment THEN BEGIN
                                                                    IF IsCreditDocType THEN
                                                                      ERROR(
                                                                        Text037,
                                                                        FIELDCAPTION("Unit Cost (LCY)"),Item.FIELDCAPTION("Costing Method"),
                                                                        Item."Costing Method",FIELDCAPTION(Quantity));
                                                                    ERROR(
                                                                      Text038,
                                                                      FIELDCAPTION("Unit Cost (LCY)"),Item.FIELDCAPTION("Costing Method"),
                                                                      Item."Costing Method",FIELDCAPTION(Quantity));
                                                                  END;
                                                                END;

                                                                GetSalesHeader;
                                                                IF SalesHeader."Currency Code" <> '' THEN BEGIN
                                                                  Currency.TESTFIELD("Unit-Amount Rounding Precision");
                                                                  "Unit Cost" :=
                                                                    ROUND(
                                                                      CurrExchRate.ExchangeAmtLCYToFCY(
                                                                        GetDate,SalesHeader."Currency Code",
                                                                        "Unit Cost (LCY)",SalesHeader."Currency Factor"),
                                                                      Currency."Unit-Amount Rounding Precision")
                                                                END ELSE
                                                                  "Unit Cost" := "Unit Cost (LCY)";
                                                              END;

                                                   CaptionML=[ENU=Unit Cost (LCY);
                                                              ESP=Coste unitario (DL)];
                                                   AutoFormatType=2 }
    { 25  ;   ;VAT %               ;Decimal       ;CaptionML=[ENU=VAT %;
                                                              ESP=% IVA];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 27  ;   ;Line Discount %     ;Decimal       ;OnValidate=BEGIN
                                                                ValidateLineDiscountPercent(TRUE);
                                                              END;

                                                   CaptionML=[ENU=Line Discount %;
                                                              ESP=% Descuento l¡nea];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 28  ;   ;Line Discount Amount;Decimal       ;OnValidate=BEGIN
                                                                GetSalesHeader;
                                                                "Line Discount Amount" := ROUND("Line Discount Amount",Currency."Amount Rounding Precision");
                                                                TestJobPlanningLine;
                                                                TestStatusOpen;
                                                                TESTFIELD(Quantity);
                                                                IF xRec."Line Discount Amount" <> "Line Discount Amount" THEN
                                                                  UpdateLineDiscPct;
                                                                GestCodigoLinVenta.CalcularLineDiscountPorcent(Rec,xRec);//VNT
                                                                "Inv. Discount Amount" := 0;
                                                                "Inv. Disc. Amount to Invoice" := 0;
                                                                "Pmt. Discount Amount" := 0;
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Line Discount Amount;
                                                              ESP=Importe dto. l¡nea];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 29  ;   ;Amount              ;Decimal       ;OnValidate=BEGIN
                                                                Amount := ROUND(Amount,Currency."Amount Rounding Precision");
                                                                CASE "VAT Calculation Type" OF
                                                                  "VAT Calculation Type"::"Normal VAT",
                                                                  "VAT Calculation Type"::"Reverse Charge VAT",
                                                                  "VAT Calculation Type"::"No Taxable VAT":
                                                                    BEGIN
                                                                      "VAT Base Amount" :=
                                                                        ROUND(Amount * (1 - SalesHeader."VAT Base Discount %" / 100),Currency."Amount Rounding Precision");
                                                                      "Amount Including VAT" :=
                                                                        ROUND(Amount + "VAT Base Amount" * ("VAT %" + "EC %") / 100,Currency."Amount Rounding Precision");
                                                                    END;
                                                                  "VAT Calculation Type"::"Full VAT":
                                                                    IF Amount <> 0 THEN
                                                                      FIELDERROR(Amount,
                                                                        STRSUBSTNO(
                                                                          Text009,FIELDCAPTION("VAT Calculation Type"),
                                                                          "VAT Calculation Type"));
                                                                  "VAT Calculation Type"::"Sales Tax":
                                                                    BEGIN
                                                                      SalesHeader.TESTFIELD("VAT Base Discount %",0);
                                                                      "VAT Base Amount" := ROUND(Amount,Currency."Amount Rounding Precision");
                                                                      "Amount Including VAT" :=
                                                                        Amount +
                                                                        SalesTaxCalculate.CalculateTax(
                                                                          "Tax Area Code","Tax Group Code","Tax Liable",SalesHeader."Posting Date",
                                                                          "VAT Base Amount","Quantity (Base)",SalesHeader."Currency Factor");
                                                                      OnAfterSalesTaxCalculate(Rec,SalesHeader,Currency);
                                                                      UpdateVATPercent("VAT Base Amount","Amount Including VAT" - "VAT Base Amount");
                                                                      "Amount Including VAT" := ROUND("Amount Including VAT",Currency."Amount Rounding Precision");
                                                                    END;
                                                                END;

                                                                "Pmt. Discount Amount" := 0;
                                                                InitOutstandingAmount;
                                                              END;

                                                   CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 30  ;   ;Amount Including VAT;Decimal       ;OnValidate=BEGIN
                                                                "Amount Including VAT" := ROUND("Amount Including VAT",Currency."Amount Rounding Precision");
                                                                CASE "VAT Calculation Type" OF
                                                                  "VAT Calculation Type"::"Normal VAT",
                                                                  "VAT Calculation Type"::"Reverse Charge VAT",
                                                                  "VAT Calculation Type"::"No Taxable VAT":
                                                                    BEGIN
                                                                      Amount :=
                                                                        ROUND(
                                                                          "Amount Including VAT" /
                                                                          (1 + (1 - SalesHeader."VAT Base Discount %" / 100) * ("VAT %" + "EC %") / 100),
                                                                          Currency."Amount Rounding Precision");
                                                                      "VAT Base Amount" :=
                                                                        ROUND(Amount * (1 - SalesHeader."VAT Base Discount %" / 100),Currency."Amount Rounding Precision");
                                                                    END;
                                                                  "VAT Calculation Type"::"Full VAT":
                                                                    BEGIN
                                                                      Amount := 0;
                                                                      "VAT Base Amount" := 0;
                                                                    END;
                                                                  "VAT Calculation Type"::"Sales Tax":
                                                                    BEGIN
                                                                      SalesHeader.TESTFIELD("VAT Base Discount %",0);
                                                                      Amount :=
                                                                        SalesTaxCalculate.ReverseCalculateTax(
                                                                          "Tax Area Code","Tax Group Code","Tax Liable",SalesHeader."Posting Date",
                                                                          "Amount Including VAT","Quantity (Base)",SalesHeader."Currency Factor");
                                                                      OnAfterSalesTaxCalculateReverse(Rec,SalesHeader,Currency);
                                                                      UpdateVATPercent(Amount,"Amount Including VAT" - Amount);
                                                                      Amount := ROUND(Amount,Currency."Amount Rounding Precision");
                                                                      "VAT Base Amount" := Amount;
                                                                    END;
                                                                END;

                                                                "Pmt. Discount Amount" := 0;
                                                                InitOutstandingAmount;
                                                              END;

                                                   CaptionML=[ENU=Amount Including VAT;
                                                              ESP=Importe IVA incl.];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 32  ;   ;Allow Invoice Disc. ;Boolean       ;InitValue=Yes;
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Allow Invoice Disc." <> xRec."Allow Invoice Disc." THEN BEGIN
                                                                  IF NOT "Allow Invoice Disc." THEN BEGIN
                                                                    "Inv. Discount Amount" := 0;
                                                                    "Inv. Disc. Amount to Invoice" := 0;
                                                                    "Pmt. Discount Amount" := 0;
                                                                  END;
                                                                  UpdateAmounts;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Allow Invoice Disc.;
                                                              ESP=Permitir dto. factura] }
    { 34  ;   ;Gross Weight        ;Decimal       ;CaptionML=[ENU=Gross Weight;
                                                              ESP=Peso bruto];
                                                   DecimalPlaces=0:5 }
    { 35  ;   ;Net Weight          ;Decimal       ;CaptionML=[ENU=Net Weight;
                                                              ESP=Peso neto];
                                                   DecimalPlaces=0:5 }
    { 36  ;   ;Units per Parcel    ;Decimal       ;CaptionML=[ENU=Units per Parcel;
                                                              ESP=Unidades por lote];
                                                   DecimalPlaces=0:5 }
    { 37  ;   ;Unit Volume         ;Decimal       ;CaptionML=[ENU=Unit Volume;
                                                              ESP=Volumen];
                                                   DecimalPlaces=0:5 }
    { 38  ;   ;Appl.-to Item Entry ;Integer       ;OnValidate=VAR
                                                                ItemLedgEntry@1000 : Record 32;
                                                                ItemTrackingLines@1001 : Page 6510;
                                                              BEGIN
                                                                IF "Appl.-to Item Entry" <> 0 THEN BEGIN
                                                                  AddOnIntegrMgt.CheckReceiptOrderStatus(Rec);

                                                                  TESTFIELD(Type,Type::Item);
                                                                  TESTFIELD(Quantity);
                                                                  IF IsCreditDocType THEN BEGIN
                                                                    IF Quantity > 0 THEN
                                                                      FIELDERROR(Quantity,Text030);
                                                                  END ELSE BEGIN
                                                                    IF Quantity < 0 THEN
                                                                      FIELDERROR(Quantity,Text029);
                                                                  END;
                                                                  ItemLedgEntry.GET("Appl.-to Item Entry");
                                                                  ItemLedgEntry.TESTFIELD(Positive,TRUE);
                                                                  IF ItemLedgEntry.TrackingExists THEN
                                                                    ERROR(Text040,ItemTrackingLines.CAPTION,FIELDCAPTION("Appl.-to Item Entry"));
                                                                  IF ABS("Qty. to Ship (Base)") > ItemLedgEntry.Quantity THEN
                                                                    ERROR(ShippingMoreUnitsThanReceivedErr,ItemLedgEntry.Quantity,ItemLedgEntry."Document No.");

                                                                  VALIDATE("Unit Cost (LCY)",CalcUnitCost(ItemLedgEntry));

                                                                  "Location Code" := ItemLedgEntry."Location Code";
                                                                  IF NOT ItemLedgEntry.Open THEN
                                                                    MESSAGE(Text042,"Appl.-to Item Entry");
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              SelectItemEntry(FIELDNO("Appl.-to Item Entry"));
                                                            END;

                                                   AccessByPermission=TableData 27=R;
                                                   CaptionML=[ENU=Appl.-to Item Entry;
                                                              ESP=Liq. por n§ orden producto] }
    { 40  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1),
                                                                                               Blocked=CONST(No));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(1,"Shortcut Dimension 1 Code");
                                                                ATOLink.UpdateAsmDimFromSalesLine(Rec);
                                                              END;

                                                   CaptionML=[ENU=Shortcut Dimension 1 Code;
                                                              ESP=C¢d. dim. acceso dir. 1];
                                                   CaptionClass='1,2,1' }
    { 41  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2),
                                                                                               Blocked=CONST(No));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(2,"Shortcut Dimension 2 Code");
                                                                ATOLink.UpdateAsmDimFromSalesLine(Rec);
                                                              END;

                                                   CaptionML=[ENU=Shortcut Dimension 2 Code;
                                                              ESP=C¢d. dim. acceso dir. 2];
                                                   CaptionClass='1,2,2' }
    { 42  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   OnValidate=BEGIN
                                                                IF Type = Type::Item THEN
                                                                  UpdateUnitPrice(FIELDNO("Customer Price Group"));
                                                              END;

                                                   CaptionML=[ENU=Customer Price Group;
                                                              ESP=Grupo precio cliente];
                                                   Editable=No }
    { 45  ;   ;Job No.             ;Code20        ;TableRelation=Job;
                                                   CaptionML=[ENU=Job No.;
                                                              ESP=N§ proyecto];
                                                   Editable=No }
    { 52  ;   ;Work Type Code      ;Code10        ;TableRelation="Work Type";
                                                   OnValidate=VAR
                                                                WorkType@1000 : Record 200;
                                                              BEGIN
                                                                IF Type = Type::Resource THEN BEGIN
                                                                  TestStatusOpen;
                                                                  IF WorkType.GET("Work Type Code") THEN
                                                                    VALIDATE("Unit of Measure Code",WorkType."Unit of Measure Code");
                                                                  UpdateUnitPrice(FIELDNO("Work Type Code"));
                                                                  VALIDATE("Unit Price");
                                                                  FindResUnitCost;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Work Type Code;
                                                              ESP=C¢d. tipo trabajo] }
    { 56  ;   ;Recalculate Invoice Disc.;Boolean  ;CaptionML=[ENU=Recalculate Invoice Disc.;
                                                              ESP=Recalcular dto. en la factura];
                                                   Editable=No }
    { 57  ;   ;Outstanding Amount  ;Decimal       ;OnValidate=VAR
                                                                Currency2@1000 : Record 4;
                                                              BEGIN
                                                                GetSalesHeader;
                                                                Currency2.InitRoundingPrecision;
                                                                IF SalesHeader."Currency Code" <> '' THEN
                                                                  "Outstanding Amount (LCY)" :=
                                                                    ROUND(
                                                                      CurrExchRate.ExchangeAmtFCYToLCY(
                                                                        GetDate,"Currency Code",
                                                                        "Outstanding Amount",SalesHeader."Currency Factor"),
                                                                      Currency2."Amount Rounding Precision")
                                                                ELSE
                                                                  "Outstanding Amount (LCY)" :=
                                                                    ROUND("Outstanding Amount",Currency2."Amount Rounding Precision");
                                                              END;

                                                   CaptionML=[ENU=Outstanding Amount;
                                                              ESP=Importe pendiente];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 58  ;   ;Qty. Shipped Not Invoiced;Decimal  ;CaptionML=[ENU=Qty. Shipped Not Invoiced;
                                                              ESP=Cantidad enviada no facturada];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 59  ;   ;Shipped Not Invoiced;Decimal       ;OnValidate=VAR
                                                                Currency2@1000 : Record 4;
                                                              BEGIN
                                                                GetSalesHeader;
                                                                Currency2.InitRoundingPrecision;
                                                                IF SalesHeader."Currency Code" <> '' THEN
                                                                  "Shipped Not Invoiced (LCY)" :=
                                                                    ROUND(
                                                                      CurrExchRate.ExchangeAmtFCYToLCY(
                                                                        GetDate,"Currency Code",
                                                                        "Shipped Not Invoiced",SalesHeader."Currency Factor"),
                                                                      Currency2."Amount Rounding Precision")
                                                                ELSE
                                                                  "Shipped Not Invoiced (LCY)" :=
                                                                    ROUND("Shipped Not Invoiced",Currency2."Amount Rounding Precision");

                                                                CalculateNotShippedInvExlcVatLCY;
                                                              END;

                                                   CaptionML=[ENU=Shipped Not Invoiced;
                                                              ESP=Enviado no facturado];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 60  ;   ;Quantity Shipped    ;Decimal       ;AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Quantity Shipped;
                                                              ESP=Cantidad enviada];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 61  ;   ;Quantity Invoiced   ;Decimal       ;CaptionML=[ENU=Quantity Invoiced;
                                                              ESP=Cantidad facturada];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 63  ;   ;Shipment No.        ;Code20        ;CaptionML=[ENU=Shipment No.;
                                                              ESP=N§ albar n];
                                                   Editable=No }
    { 64  ;   ;Shipment Line No.   ;Integer       ;CaptionML=[ENU=Shipment Line No.;
                                                              ESP=N§ l¡nea albar n];
                                                   Editable=No }
    { 67  ;   ;Profit %            ;Decimal       ;CaptionML=[ENU=Profit %;
                                                              ESP=% Bf§ bruto];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 68  ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Bill-to Customer No.;
                                                              ESP=Factura-a N§ cliente];
                                                   Editable=No }
    { 69  ;   ;Inv. Discount Amount;Decimal       ;OnValidate=BEGIN
                                                                CalcInvDiscToInvoice;
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Inv. Discount Amount;
                                                              ESP=Importe dto. factura];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code";
                                                   CaptionClass=GetCaptionClass(FIELDNO("Inv. Discount Amount")) }
    { 71  ;   ;Purchase Order No.  ;Code20        ;TableRelation=IF (Drop Shipment=CONST(Yes)) "Purchase Header".No. WHERE (Document Type=CONST(Order));
                                                   OnValidate=BEGIN
                                                                IF (xRec."Purchase Order No." <> "Purchase Order No.") AND (Quantity <> 0) THEN BEGIN
                                                                  ReserveSalesLine.VerifyChange(Rec,xRec);
                                                                  WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                END;
                                                              END;

                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Purchase Order No.;
                                                              ESP=N§ pedido compra];
                                                   Editable=No }
    { 72  ;   ;Purch. Order Line No.;Integer      ;TableRelation=IF (Drop Shipment=CONST(Yes)) "Purchase Line"."Line No." WHERE (Document Type=CONST(Order),
                                                                                                                                 Document No.=FIELD(Purchase Order No.));
                                                   OnValidate=BEGIN
                                                                IF (xRec."Purch. Order Line No." <> "Purch. Order Line No.") AND (Quantity <> 0) THEN BEGIN
                                                                  ReserveSalesLine.VerifyChange(Rec,xRec);
                                                                  WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                END;
                                                              END;

                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Purch. Order Line No.;
                                                              ESP=N§ l¡nea pedido compra];
                                                   Editable=No }
    { 73  ;   ;Drop Shipment       ;Boolean       ;OnValidate=BEGIN
                                                                TESTFIELD("Document Type","Document Type"::Order);
                                                                TESTFIELD(Type,Type::Item);
                                                                TESTFIELD("Quantity Shipped",0);
                                                                TESTFIELD("Job No.",'');
                                                                TESTFIELD("Qty. to Asm. to Order (Base)",0);

                                                                IF "Drop Shipment" THEN
                                                                  TESTFIELD("Special Order",FALSE);

                                                                CheckAssocPurchOrder(FIELDCAPTION("Drop Shipment"));

                                                                IF "Special Order" THEN
                                                                  Reserve := Reserve::Never
                                                                ELSE
                                                                  IF "Drop Shipment" THEN BEGIN
                                                                    Reserve := Reserve::Never;
                                                                    EVALUATE("Outbound Whse. Handling Time",'<0D>');
                                                                    EVALUATE("Shipping Time",'<0D>');
                                                                    UpdateDates;
                                                                    "Bin Code" := '';
                                                                  END ELSE
                                                                    SetReserveWithoutPurchasingCode;

                                                                CheckItemAvailable(FIELDNO("Drop Shipment"));

                                                                AddOnIntegrMgt.CheckReceiptOrderStatus(Rec);
                                                                IF (xRec."Drop Shipment" <> "Drop Shipment") AND (Quantity <> 0) THEN BEGIN
                                                                  IF NOT "Drop Shipment" THEN BEGIN
                                                                    InitQtyToAsm;
                                                                    AutoAsmToOrder;
                                                                    UpdateWithWarehouseShip
                                                                  END ELSE
                                                                    InitQtyToShip;
                                                                  WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                  IF NOT FullReservedQtyIsForAsmToOrder THEN
                                                                    ReserveSalesLine.VerifyChange(Rec,xRec);
                                                                END;
                                                              END;

                                                   AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Drop Shipment;
                                                              ESP=Env¡o directo];
                                                   Editable=Yes }
    { 74  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   OnValidate=BEGIN
                                                                IF xRec."Gen. Bus. Posting Group" <> "Gen. Bus. Posting Group" THEN
                                                                  IF GenBusPostingGrp.ValidateVatBusPostingGroup(GenBusPostingGrp,"Gen. Bus. Posting Group") THEN
                                                                    VALIDATE("VAT Bus. Posting Group",GenBusPostingGrp."Def. VAT Bus. Posting Group");
                                                              END;

                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESP=Grupo registro neg. gen.] }
    { 75  ;   ;Gen. Prod. Posting Group;Code20    ;TableRelation="Gen. Product Posting Group";
                                                   OnValidate=BEGIN
                                                                TestJobPlanningLine;
                                                                TestStatusOpen;
                                                                IF xRec."Gen. Prod. Posting Group" <> "Gen. Prod. Posting Group" THEN
                                                                  IF GenProdPostingGrp.ValidateVatProdPostingGroup(GenProdPostingGrp,"Gen. Prod. Posting Group") THEN
                                                                    VALIDATE("VAT Prod. Posting Group",GenProdPostingGrp."Def. VAT Prod. Posting Group");
                                                              END;

                                                   CaptionML=[ENU=Gen. Prod. Posting Group;
                                                              ESP=Grupo registro prod. gen.] }
    { 77  ;   ;VAT Calculation Type;Option        ;CaptionML=[ENU=VAT Calculation Type;
                                                              ESP=Tipo c lculo IVA];
                                                   OptionCaptionML=[ENU=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax,No Taxable VAT;
                                                                    ESP=Normal,Reversi¢n,Total,Impto. venta,No sujeto];
                                                   OptionString=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax,No Taxable VAT;
                                                   Editable=No }
    { 78  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   CaptionML=[ENU=Transaction Type;
                                                              ESP=Naturaleza transacci¢n] }
    { 79  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   CaptionML=[ENU=Transport Method;
                                                              ESP=Modo transporte] }
    { 80  ;   ;Attached to Line No.;Integer       ;TableRelation="Sales Line"."Line No." WHERE (Document Type=FIELD(Document Type),
                                                                                                Document No.=FIELD(Document No.));
                                                   CaptionML=[ENU=Attached to Line No.;
                                                              ESP=N§ l¡nea texto adicional];
                                                   Editable=No }
    { 81  ;   ;Exit Point          ;Code10        ;TableRelation="Entry/Exit Point";
                                                   CaptionML=[ENU=Exit Point;
                                                              ESP=Puerto/Aerop. carga] }
    { 82  ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   CaptionML=[ENU=Area;
                                                              ESP=C¢d. provincia] }
    { 83  ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   CaptionML=[ENU=Transaction Specification;
                                                              ESP=Especificaci¢n transacci¢n] }
    { 84  ;   ;Tax Category        ;Code10        ;CaptionML=[ENU=Tax Category;
                                                              ESP=Categor¡a de impuesto] }
    { 85  ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   OnValidate=BEGIN
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESP=C¢d.  rea impuesto] }
    { 86  ;   ;Tax Liable          ;Boolean       ;OnValidate=BEGIN
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Tax Liable;
                                                              ESP=Sujeto a impuesto] }
    { 87  ;   ;Tax Group Code      ;Code20        ;TableRelation="Tax Group";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                ValidateTaxGroupCode;
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Tax Group Code;
                                                              ESP=C¢d. grupo impuesto] }
    { 88  ;   ;VAT Clause Code     ;Code20        ;TableRelation="VAT Clause";
                                                   CaptionML=[ENU=VAT Clause Code;
                                                              ESP=C¢digo de cl usula de IVA] }
    { 89  ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   OnValidate=BEGIN
                                                                VALIDATE("VAT Prod. Posting Group");
                                                              END;

                                                   CaptionML=[ENU=VAT Bus. Posting Group;
                                                              ESP=Grupo registro IVA neg.] }
    { 90  ;   ;VAT Prod. Posting Group;Code20     ;TableRelation="VAT Product Posting Group";
                                                   OnValidate=VAR
                                                                IsHandled@1000 : Boolean;
                                                              BEGIN
                                                                TestStatusOpen;
                                                                //++ BAIN-0010
                                                                IF FuncionesBAINES.T37IVADesglosado(Rec) THEN
                                                                  EXIT;
                                                                //-- BAIN-0010
                                                                VATPostingSetup.GET("VAT Bus. Posting Group","VAT Prod. Posting Group");
                                                                "VAT Difference" := 0;
                                                                "EC Difference" := 0;

                                                                GetSalesHeader;
                                                                "VAT %" := VATPostingSetup."VAT %";
                                                                "EC %" := VATPostingSetup."EC %";
                                                                "VAT Calculation Type" := VATPostingSetup."VAT Calculation Type";
                                                                "VAT Identifier" := VATPostingSetup."VAT Identifier";
                                                                "VAT Clause Code" := VATPostingSetup."VAT Clause Code";

                                                                IsHandled := FALSE;
                                                                OnValidateVATProdPostingGroupOnBeforeCheckVATCalcType(Rec,VATPostingSetup,IsHandled);
                                                                IF NOT IsHandled THEN
                                                                  CASE "VAT Calculation Type" OF
                                                                    "VAT Calculation Type"::"Reverse Charge VAT",
                                                                    "VAT Calculation Type"::"Sales Tax":
                                                                      BEGIN
                                                                        "VAT %" := 0;
                                                                        "EC %" := 0;
                                                                      END;
                                                                    "VAT Calculation Type"::"Full VAT":
                                                                      BEGIN
                                                                        TESTFIELD(Type,Type::"G/L Account");
                                                                        TESTFIELD("No.",VATPostingSetup.GetSalesAccount(FALSE));
                                                                      END;
                                                                  END;

                                                                IF SalesHeader."Prices Including VAT" AND (Type IN [Type::Item,Type::Resource]) THEN
                                                                  "Unit Price" :=
                                                                    ROUND(
                                                                      "Unit Price" * (100 + "VAT %" + "EC %") / (100 + xRec."VAT %" + xRec."EC %"),
                                                                      Currency."Unit-Amount Rounding Precision");
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=VAT Prod. Posting Group;
                                                              ESP=Grupo registro IVA prod.] }
    { 91  ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa];
                                                   Editable=No }
    { 92  ;   ;Outstanding Amount (LCY);Decimal   ;CaptionML=[ENU=Outstanding Amount (LCY);
                                                              ESP=Importe pendiente (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 93  ;   ;Shipped Not Invoiced (LCY);Decimal ;CaptionML=[ENU=Shipped Not Invoiced (LCY) Incl. VAT;
                                                              ESP=Enviado no facturado (DL) con IVA];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 94  ;   ;Shipped Not Inv. (LCY) No VAT;Decimal;
                                                   FieldClass=Normal;
                                                   CaptionML=[ENU=Shipped Not Invoiced (LCY);
                                                              ESP=Enviado no facturado (DL)];
                                                   Editable=No }
    { 95  ;   ;Reserved Quantity   ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry".Quantity WHERE (Source ID=FIELD(Document No.),
                                                                                                        Source Ref. No.=FIELD(Line No.),
                                                                                                        Source Type=CONST(37),
                                                                                                        Source Subtype=FIELD(Document Type),
                                                                                                        Reservation Status=CONST(Reservation)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Reserved Quantity;
                                                              ESP=Cantidad reservada];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 96  ;   ;Reserve             ;Option        ;OnValidate=VAR
                                                                Item@1000 : Record 27;
                                                              BEGIN
                                                                IF Reserve <> Reserve::Never THEN BEGIN
                                                                  TESTFIELD(Type,Type::Item);
                                                                  TESTFIELD("No.");
                                                                END;
                                                                CALCFIELDS("Reserved Qty. (Base)");
                                                                IF (Reserve = Reserve::Never) AND ("Reserved Qty. (Base)" > 0) THEN
                                                                  TESTFIELD("Reserved Qty. (Base)",0);

                                                                IF "Drop Shipment" OR "Special Order" THEN
                                                                  TESTFIELD(Reserve,Reserve::Never);
                                                                IF xRec.Reserve = Reserve::Always THEN BEGIN
                                                                  GetItem(Item);
                                                                  IF Item.Reserve = Item.Reserve::Always THEN
                                                                    TESTFIELD(Reserve,Reserve::Always);
                                                                END;
                                                              END;

                                                   AccessByPermission=TableData 27=R;
                                                   CaptionML=[ENU=Reserve;
                                                              ESP=Reserva];
                                                   OptionCaptionML=[ENU=Never,Optional,Always;
                                                                    ESP=Nunca,Opcional,Siempre];
                                                   OptionString=Never,Optional,Always }
    { 97  ;   ;Blanket Order No.   ;Code20        ;TableRelation="Sales Header".No. WHERE (Document Type=CONST(Blanket Order));
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Quantity Shipped",0);
                                                                IF "Blanket Order No." = '' THEN
                                                                  "Blanket Order Line No." := 0
                                                                ELSE
                                                                  VALIDATE("Blanket Order Line No.");
                                                              END;

                                                   OnLookup=BEGIN
                                                              BlanketOrderLookup;
                                                            END;

                                                   TestTableRelation=No;
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Blanket Order No.;
                                                              ESP=N§ pedido abierto] }
    { 98  ;   ;Blanket Order Line No.;Integer     ;TableRelation="Sales Line"."Line No." WHERE (Document Type=CONST(Blanket Order),
                                                                                                Document No.=FIELD(Blanket Order No.));
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Quantity Shipped",0);
                                                                IF "Blanket Order Line No." <> 0 THEN BEGIN
                                                                  SalesLine2.GET("Document Type"::"Blanket Order","Blanket Order No.","Blanket Order Line No.");
                                                                  SalesLine2.TESTFIELD(Type,Type);
                                                                  SalesLine2.TESTFIELD("No.","No.");
                                                                  SalesLine2.TESTFIELD("Bill-to Customer No.","Bill-to Customer No.");
                                                                  SalesLine2.TESTFIELD("Sell-to Customer No.","Sell-to Customer No.");
                                                                  IF "Drop Shipment" THEN BEGIN
                                                                    SalesLine2.TESTFIELD("Variant Code","Variant Code");
                                                                    SalesLine2.TESTFIELD("Location Code","Location Code");
                                                                    SalesLine2.TESTFIELD("Unit of Measure Code","Unit of Measure Code");
                                                                  END ELSE BEGIN
                                                                    VALIDATE("Variant Code",SalesLine2."Variant Code");
                                                                    VALIDATE("Location Code",SalesLine2."Location Code");
                                                                    VALIDATE("Unit of Measure Code",SalesLine2."Unit of Measure Code");
                                                                  END;
                                                                  VALIDATE("Unit Price",SalesLine2."Unit Price");
                                                                  VALIDATE("Line Discount %",SalesLine2."Line Discount %");
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              BlanketOrderLookup;
                                                            END;

                                                   TestTableRelation=No;
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Blanket Order Line No.;
                                                              ESP=N§ l¡n. pedido abierto] }
    { 99  ;   ;VAT Base Amount     ;Decimal       ;CaptionML=[ENU=VAT Base Amount;
                                                              ESP=Importe base IVA];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 100 ;   ;Unit Cost           ;Decimal       ;CaptionML=[ENU=Unit Cost;
                                                              ESP=Coste unitario];
                                                   Editable=No;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
    { 101 ;   ;System-Created Entry;Boolean       ;CaptionML=[ENU=System-Created Entry;
                                                              ESP=Asiento autom tico];
                                                   Editable=No }
    { 103 ;   ;Line Amount         ;Decimal       ;OnValidate=VAR
                                                                MaxLineAmount@1000 : Decimal;
                                                              BEGIN
                                                                TESTFIELD(Type);
                                                                TESTFIELD(Quantity);
                                                                TESTFIELD("Unit Price");
                                                                GetSalesHeader;

                                                                "Line Amount" := ROUND("Line Amount",Currency."Amount Rounding Precision");
                                                                MaxLineAmount := ROUND(Quantity * "Unit Price",Currency."Amount Rounding Precision");

                                                                IF "Line Amount" < 0 THEN
                                                                  IF "Line Amount" < MaxLineAmount THEN
                                                                    ERROR(LineAmountInvalidErr);

                                                                IF "Line Amount" > 0 THEN
                                                                  IF "Line Amount" > MaxLineAmount THEN
                                                                    ERROR(LineAmountInvalidErr);

                                                                VALIDATE("Line Discount Amount",MaxLineAmount - "Line Amount");
                                                              END;

                                                   CaptionML=[ENU=Line Amount;
                                                              ESP=Importe l¡nea];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code";
                                                   CaptionClass=GetCaptionClass(FIELDNO("Line Amount")) }
    { 104 ;   ;VAT Difference      ;Decimal       ;CaptionML=[ENU=VAT Difference;
                                                              ESP=Diferencia  IVA];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 105 ;   ;Inv. Disc. Amount to Invoice;Decimal;
                                                   CaptionML=[ENU=Inv. Disc. Amount to Invoice;
                                                              ESP=Importe dto. fact. para facturar];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 106 ;   ;VAT Identifier      ;Code20        ;CaptionML=[ENU=VAT Identifier;
                                                              ESP=Identific. IVA];
                                                   Editable=No }
    { 107 ;   ;IC Partner Ref. Type;Option        ;OnValidate=VAR
                                                                Item@1000 : Record 27;
                                                              BEGIN
                                                                IF "IC Partner Code" <> '' THEN
                                                                  "IC Partner Ref. Type" := "IC Partner Ref. Type"::"G/L Account";
                                                                IF "IC Partner Ref. Type" <> xRec."IC Partner Ref. Type" THEN
                                                                  "IC Partner Reference" := '';
                                                                IF "IC Partner Ref. Type" = "IC Partner Ref. Type"::"Common Item No." THEN BEGIN
                                                                  GetItem(Item);
                                                                  Item.TESTFIELD("Common Item No.");
                                                                  "IC Partner Reference" := Item."Common Item No.";
                                                                END;
                                                              END;

                                                   AccessByPermission=TableData 410=R;
                                                   CaptionML=[ENU=IC Partner Ref. Type;
                                                              ESP=Tipo referencia socio IC];
                                                   OptionCaptionML=[ENU=" ,G/L Account,Item,,,Charge (Item),Cross Reference,Common Item No.";
                                                                    ESP=" ,Cuenta,Producto,,,Cargo (prod.),Referencia cruzada,N§ producto com£n"];
                                                   OptionString=[ ,G/L Account,Item,,,Charge (Item),Cross Reference,Common Item No.] }
    { 108 ;   ;IC Partner Reference;Code20        ;OnLookup=VAR
                                                              ICGLAccount@1000 : Record 410;
                                                              Item@1002 : Record 27;
                                                              ItemCrossReference@1001 : Record 5717;
                                                            BEGIN
                                                              IF "No." <> '' THEN
                                                                CASE "IC Partner Ref. Type" OF
                                                                  "IC Partner Ref. Type"::"G/L Account":
                                                                    BEGIN
                                                                      IF ICGLAccount.GET("IC Partner Reference") THEN;
                                                                      IF PAGE.RUNMODAL(PAGE::"IC G/L Account List",ICGLAccount) = ACTION::LookupOK THEN
                                                                        VALIDATE("IC Partner Reference",ICGLAccount."No.");
                                                                    END;
                                                                  "IC Partner Ref. Type"::Item:
                                                                    BEGIN
                                                                      IF Item.GET("IC Partner Reference") THEN;
                                                                      IF PAGE.RUNMODAL(PAGE::"Item List",Item) = ACTION::LookupOK THEN
                                                                        VALIDATE("IC Partner Reference",Item."No.");
                                                                    END;
                                                                  "IC Partner Ref. Type"::"Cross Reference":
                                                                    BEGIN
                                                                      ItemCrossReference.RESET;
                                                                      ItemCrossReference.SETCURRENTKEY("Cross-Reference Type","Cross-Reference Type No.");
                                                                      ItemCrossReference.SETFILTER(
                                                                        "Cross-Reference Type",'%1|%2',
                                                                        ItemCrossReference."Cross-Reference Type"::Customer,
                                                                        ItemCrossReference."Cross-Reference Type"::" ");
                                                                      ItemCrossReference.SETFILTER("Cross-Reference Type No.",'%1|%2',"Sell-to Customer No.",'');
                                                                      IF PAGE.RUNMODAL(PAGE::"Cross Reference List",ItemCrossReference) = ACTION::LookupOK THEN
                                                                        VALIDATE("IC Partner Reference",ItemCrossReference."Cross-Reference No.");
                                                                    END;
                                                                END;
                                                            END;

                                                   AccessByPermission=TableData 410=R;
                                                   CaptionML=[ENU=IC Partner Reference;
                                                              ESP=Referencia socio IC] }
    { 109 ;   ;Prepayment %        ;Decimal       ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                UpdatePrepmtSetupFields;

                                                                IF HasTypeToFillMandatoryFields THEN
                                                                  UpdateAmounts;
                                                                UpdateBaseAmounts(Amount,"Amount Including VAT","VAT Base Amount");
                                                              END;

                                                   CaptionML=[ENU=Prepayment %;
                                                              ESP=% prepago];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 110 ;   ;Prepmt. Line Amount ;Decimal       ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                PrePaymentLineAmountEntered := TRUE;
                                                                TESTFIELD("Line Amount");
                                                                IF "Prepmt. Line Amount" < "Prepmt. Amt. Inv." THEN
                                                                  FIELDERROR("Prepmt. Line Amount",STRSUBSTNO(Text044,"Prepmt. Amt. Inv."));
                                                                IF "Prepmt. Line Amount" > "Line Amount" THEN
                                                                  FIELDERROR("Prepmt. Line Amount",STRSUBSTNO(Text045,"Line Amount"));
                                                                IF "System-Created Entry" AND NOT IsServiceCharge THEN
                                                                  FIELDERROR("Prepmt. Line Amount",STRSUBSTNO(Text045,0));
                                                                VALIDATE("Prepayment %",ROUND("Prepmt. Line Amount" * 100 / "Line Amount",0.00001));
                                                              END;

                                                   CaptionML=[ENU=Prepmt. Line Amount;
                                                              ESP=Importe l¡nea prepago];
                                                   MinValue=0;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code";
                                                   CaptionClass=GetCaptionClass(FIELDNO("Prepmt. Line Amount")) }
    { 111 ;   ;Prepmt. Amt. Inv.   ;Decimal       ;CaptionML=[ENU=Prepmt. Amt. Inv.;
                                                              ESP=Importe prepago facturado];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code";
                                                   CaptionClass=GetCaptionClass(FIELDNO("Prepmt. Amt. Inv.")) }
    { 112 ;   ;Prepmt. Amt. Incl. VAT;Decimal     ;CaptionML=[ENU=Prepmt. Amt. Incl. VAT;
                                                              ESP=Importe prepago incl. IVA];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 113 ;   ;Prepayment Amount   ;Decimal       ;CaptionML=[ENU=Prepayment Amount;
                                                              ESP=Importe prepago];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 114 ;   ;Prepmt. VAT Base Amt.;Decimal      ;CaptionML=[ENU=Prepmt. VAT Base Amt.;
                                                              ESP=Importe base IVA prepago];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 115 ;   ;Prepayment VAT %    ;Decimal       ;CaptionML=[ENU=Prepayment VAT %;
                                                              ESP=% IVA prepago];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 116 ;   ;Prepmt. VAT Calc. Type;Option      ;CaptionML=[ENU=Prepmt. VAT Calc. Type;
                                                              ESP=Tipo calc. IVA prepago];
                                                   OptionCaptionML=[ENU=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax;
                                                                    ESP=Normal,Reversi¢n,Total,Impto. venta];
                                                   OptionString=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax;
                                                   Editable=No }
    { 117 ;   ;Prepayment VAT Identifier;Code20   ;CaptionML=[ENU=Prepayment VAT Identifier;
                                                              ESP=Identificador IVA prepago];
                                                   Editable=No }
    { 118 ;   ;Prepayment Tax Area Code;Code20    ;TableRelation="Tax Area";
                                                   OnValidate=BEGIN
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Prepayment Tax Area Code;
                                                              ESP=C¢d.  rea impuesto prepago] }
    { 119 ;   ;Prepayment Tax Liable;Boolean      ;OnValidate=BEGIN
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Prepayment Tax Liable;
                                                              ESP=Sujeto a impuesto prepago] }
    { 120 ;   ;Prepayment Tax Group Code;Code20   ;TableRelation="Tax Group";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Prepayment Tax Group Code;
                                                              ESP=C¢d. grupo impuesto prepago] }
    { 121 ;   ;Prepmt Amt to Deduct;Decimal       ;OnValidate=BEGIN
                                                                IF "Prepmt Amt to Deduct" > "Prepmt. Amt. Inv." - "Prepmt Amt Deducted" THEN
                                                                  FIELDERROR(
                                                                    "Prepmt Amt to Deduct",
                                                                    STRSUBSTNO(Text045,"Prepmt. Amt. Inv." - "Prepmt Amt Deducted"));

                                                                IF "Prepmt Amt to Deduct" > "Qty. to Invoice" * "Unit Price" THEN
                                                                  FIELDERROR(
                                                                    "Prepmt Amt to Deduct",
                                                                    STRSUBSTNO(Text045,"Qty. to Invoice" * "Unit Price"));

                                                                IF ("Prepmt. Amt. Inv." - "Prepmt Amt to Deduct" - "Prepmt Amt Deducted") >
                                                                   (Quantity - "Qty. to Invoice" - "Quantity Invoiced") * "Unit Price"
                                                                THEN
                                                                  FIELDERROR(
                                                                    "Prepmt Amt to Deduct",
                                                                    STRSUBSTNO(Text044,
                                                                      "Prepmt. Amt. Inv." - "Prepmt Amt Deducted" - (Quantity - "Qty. to Invoice" - "Quantity Invoiced") * "Unit Price"));
                                                              END;

                                                   CaptionML=[ENU=Prepmt Amt to Deduct;
                                                              ESP=Importe prepago para descontar];
                                                   MinValue=0;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code";
                                                   CaptionClass=GetCaptionClass(FIELDNO("Prepmt Amt to Deduct")) }
    { 122 ;   ;Prepmt Amt Deducted ;Decimal       ;CaptionML=[ENU=Prepmt Amt Deducted;
                                                              ESP=Importe prepago descontado];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code";
                                                   CaptionClass=GetCaptionClass(FIELDNO("Prepmt Amt Deducted")) }
    { 123 ;   ;Prepayment Line     ;Boolean       ;CaptionML=[ENU=Prepayment Line;
                                                              ESP=L¡nea prepago];
                                                   Editable=No }
    { 124 ;   ;Prepmt. Amount Inv. Incl. VAT;Decimal;
                                                   CaptionML=[ENU=Prepmt. Amount Inv. Incl. VAT;
                                                              ESP=Importe prepago fact. incl. IVA];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 129 ;   ;Prepmt. Amount Inv. (LCY);Decimal  ;CaptionML=[ENU=Prepmt. Amount Inv. (LCY);
                                                              ESP=Importe prepago fact. (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 130 ;   ;IC Partner Code     ;Code20        ;TableRelation="IC Partner";
                                                   OnValidate=BEGIN
                                                                IF "IC Partner Code" <> '' THEN BEGIN
                                                                  TESTFIELD(Type,Type::"G/L Account");
                                                                  GetSalesHeader;
                                                                  SalesHeader.TESTFIELD("Sell-to IC Partner Code",'');
                                                                  SalesHeader.TESTFIELD("Bill-to IC Partner Code",'');
                                                                  VALIDATE("IC Partner Ref. Type","IC Partner Ref. Type"::"G/L Account");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=IC Partner Code;
                                                              ESP=C¢digo socio IC] }
    { 132 ;   ;Prepmt. VAT Amount Inv. (LCY);Decimal;
                                                   CaptionML=[ENU=Prepmt. VAT Amount Inv. (LCY);
                                                              ESP=Importe IVA prepago fact. (DL)];
                                                   Editable=No }
    { 135 ;   ;Prepayment VAT Difference;Decimal  ;CaptionML=[ENU=Prepayment VAT Difference;
                                                              ESP=Diferencia IVA prepago];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 136 ;   ;Prepmt VAT Diff. to Deduct;Decimal ;CaptionML=[ENU=Prepmt VAT Diff. to Deduct;
                                                              ESP=Diferencia IVA prepago a deducir];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 137 ;   ;Prepmt VAT Diff. Deducted;Decimal  ;CaptionML=[ENU=Prepmt VAT Diff. Deducted;
                                                              ESP=Diferencia IVA prepago deducida];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 145 ;   ;Pmt. Discount Amount;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD(Quantity);
                                                                UpdateAmounts;
                                                              END;

                                                   CaptionML=[ENU=Pmt. Discount Amount;
                                                              ESP=Imp. dto. P.P.];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 180 ;   ;Line Discount Calculation;Option   ;CaptionML=[ENU=Line Discount Calculation;
                                                              ESP=Calculo de descuento de l¡nea];
                                                   OptionCaptionML=[ENU=None,%,Amount;
                                                                    ESP=Ninguno,%,Importe];
                                                   OptionString=None,%,Amount }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnValidate=BEGIN
                                                                DimMgt.UpdateGlobalDimFromDimSetID("Dimension Set ID","Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
                                                              END;

                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              ESP=Id. grupo dimensiones];
                                                   Editable=No }
    { 900 ;   ;Qty. to Assemble to Order;Decimal  ;OnValidate=VAR
                                                                SalesLineReserve@1000 : Codeunit 99000832;
                                                              BEGIN
                                                                WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);

                                                                "Qty. to Asm. to Order (Base)" := CalcBaseQty("Qty. to Assemble to Order");

                                                                IF "Qty. to Asm. to Order (Base)" <> 0 THEN BEGIN
                                                                  TESTFIELD("Drop Shipment",FALSE);
                                                                  TESTFIELD("Special Order",FALSE);
                                                                  IF "Qty. to Asm. to Order (Base)" < 0 THEN
                                                                    FIELDERROR("Qty. to Assemble to Order",STRSUBSTNO(Text009,FIELDCAPTION("Quantity (Base)"),"Quantity (Base)"));
                                                                  TESTFIELD("Appl.-to Item Entry",0);

                                                                  CASE "Document Type" OF
                                                                    "Document Type"::"Blanket Order",
                                                                    "Document Type"::Quote:
                                                                      IF ("Quantity (Base)" = 0) OR ("Qty. to Asm. to Order (Base)" <= 0) OR SalesLineReserve.ReservEntryExist(Rec) THEN
                                                                        TESTFIELD("Qty. to Asm. to Order (Base)",0)
                                                                      ELSE
                                                                        IF "Quantity (Base)" <> "Qty. to Asm. to Order (Base)" THEN
                                                                          FIELDERROR("Qty. to Assemble to Order",STRSUBSTNO(Text031,0,"Quantity (Base)"));
                                                                    "Document Type"::Order:
                                                                      ;
                                                                    ELSE
                                                                      TESTFIELD("Qty. to Asm. to Order (Base)",0);
                                                                  END;
                                                                END;

                                                                CheckItemAvailable(FIELDNO("Qty. to Assemble to Order"));
                                                                IF NOT (CurrFieldNo IN [FIELDNO(Quantity),FIELDNO("Qty. to Assemble to Order")]) THEN
                                                                  GetDefaultBin;
                                                                AutoAsmToOrder;
                                                              END;

                                                   AccessByPermission=TableData 90=R;
                                                   CaptionML=[ENU=Qty. to Assemble to Order;
                                                              ESP=Cant. en ensamblar para pedido];
                                                   DecimalPlaces=0:5 }
    { 901 ;   ;Qty. to Asm. to Order (Base);Decimal;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Unit of Measure",1);
                                                                VALIDATE("Qty. to Assemble to Order","Qty. to Asm. to Order (Base)");
                                                              END;

                                                   CaptionML=[ENU=Qty. to Asm. to Order (Base);
                                                              ESP=Cant. en pedido contra ensamblado (base)];
                                                   DecimalPlaces=0:5 }
    { 902 ;   ;ATO Whse. Outstanding Qty.;Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Warehouse Shipment Line"."Qty. Outstanding" WHERE (Source Type=CONST(37),
                                                                                                                       Source Subtype=FIELD(Document Type),
                                                                                                                       Source No.=FIELD(Document No.),
                                                                                                                       Source Line No.=FIELD(Line No.),
                                                                                                                       Assemble to Order=FILTER(Yes)));
                                                   AccessByPermission=TableData 90=R;
                                                   CaptionML=[ENU=ATO Whse. Outstanding Qty.;
                                                              ESP=Cant. pdte. almac‚n de ATO];
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 903 ;   ;ATO Whse. Outstd. Qty. (Base);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Warehouse Shipment Line"."Qty. Outstanding (Base)" WHERE (Source Type=CONST(37),
                                                                                                                              Source Subtype=FIELD(Document Type),
                                                                                                                              Source No.=FIELD(Document No.),
                                                                                                                              Source Line No.=FIELD(Line No.),
                                                                                                                              Assemble to Order=FILTER(Yes)));
                                                   AccessByPermission=TableData 90=R;
                                                   CaptionML=[ENU=ATO Whse. Outstd. Qty. (Base);
                                                              ESP=Cant. pdte. salida alm. de ATO];
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 1001;   ;Job Task No.        ;Code20        ;TableRelation="Job Task"."Job Task No." WHERE (Job No.=FIELD(Job No.));
                                                   CaptionML=[ENU=Job Task No.;
                                                              ESP=N§ tarea proyecto];
                                                   Editable=No }
    { 1002;   ;Job Contract Entry No.;Integer     ;OnValidate=VAR
                                                                JobPlanningLine@1001 : Record 1003;
                                                              BEGIN
                                                                JobPlanningLine.SETCURRENTKEY("Job Contract Entry No.");
                                                                JobPlanningLine.SETRANGE("Job Contract Entry No.","Job Contract Entry No.");
                                                                JobPlanningLine.FINDFIRST;
                                                                CreateDim(
                                                                  DimMgt.TypeToTableID3(Type),"No.",
                                                                  DATABASE::Job,JobPlanningLine."Job No.",
                                                                  DATABASE::"Responsibility Center","Responsibility Center");
                                                              END;

                                                   AccessByPermission=TableData 167=R;
                                                   CaptionML=[ENU=Job Contract Entry No.;
                                                              ESP=N§ mov. contrato proyecto];
                                                   Editable=No }
    { 1300;   ;Posting Date        ;Date          ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Sales Header"."Posting Date" WHERE (Document Type=FIELD(Document Type),
                                                                                                           No.=FIELD(Document No.)));
                                                   CaptionML=[ENU=Posting Date;
                                                              ESP=Fecha registro] }
    { 1700;   ;Deferral Code       ;Code10        ;TableRelation="Deferral Template"."Deferral Code";
                                                   OnValidate=VAR
                                                                DeferralPostDate@1000 : Date;
                                                              BEGIN
                                                                GetSalesHeader;
                                                                OnGetDeferralPostDate(SalesHeader,DeferralPostDate,Rec);
                                                                IF DeferralPostDate = 0D THEN
                                                                  DeferralPostDate := SalesHeader."Posting Date";

                                                                DeferralUtilities.DeferralCodeOnValidate(
                                                                  "Deferral Code",DeferralUtilities.GetSalesDeferralDocType,'','',
                                                                  "Document Type","Document No.","Line No.",
                                                                  GetDeferralAmount,DeferralPostDate,
                                                                  Description,SalesHeader."Currency Code");

                                                                IF "Document Type" = "Document Type"::"Return Order" THEN
                                                                  "Returns Deferral Start Date" :=
                                                                    DeferralUtilities.GetDeferralStartDate(DeferralUtilities.GetSalesDeferralDocType,
                                                                      "Document Type","Document No.","Line No.","Deferral Code",SalesHeader."Posting Date");
                                                              END;

                                                   CaptionML=[ENU=Deferral Code;
                                                              ESP=C¢digo de fraccionamiento] }
    { 1702;   ;Returns Deferral Start Date;Date   ;OnValidate=VAR
                                                                DeferralHeader@1000 : Record 1701;
                                                              BEGIN
                                                                GetSalesHeader;
                                                                IF DeferralHeader.GET(DeferralUtilities.GetSalesDeferralDocType,'','',"Document Type","Document No.","Line No.") THEN
                                                                  DeferralUtilities.CreateDeferralSchedule("Deferral Code",DeferralUtilities.GetSalesDeferralDocType,'','',
                                                                    "Document Type","Document No.","Line No.",GetDeferralAmount,
                                                                    DeferralHeader."Calc. Method","Returns Deferral Start Date",
                                                                    DeferralHeader."No. of Periods",TRUE,
                                                                    DeferralHeader."Schedule Description",FALSE,
                                                                    SalesHeader."Currency Code");
                                                              END;

                                                   CaptionML=[ENU=Returns Deferral Start Date;
                                                              ESP=Fecha de inicio del fraccionamiento de devoluciones] }
    { 5402;   ;Variant Code        ;Code10        ;TableRelation=IF (Type=CONST(Item)) "Item Variant".Code WHERE (Item No.=FIELD(No.));
                                                   OnValidate=BEGIN
                                                                TestJobPlanningLine;
                                                                IF "Variant Code" <> '' THEN
                                                                  TESTFIELD(Type,Type::Item);
                                                                TestStatusOpen;
                                                                CheckAssocPurchOrder(FIELDCAPTION("Variant Code"));

                                                                IF xRec."Variant Code" <> "Variant Code" THEN BEGIN
                                                                  TESTFIELD("Qty. Shipped Not Invoiced",0);
                                                                  TESTFIELD("Shipment No.",'');

                                                                  TESTFIELD("Return Qty. Rcd. Not Invd.",0);
                                                                  TESTFIELD("Return Receipt No.",'');
                                                                  InitItemAppl(FALSE);
                                                                END;

                                                                OnValidateVariantCodeOnAfterChecks(Rec,xRec,CurrFieldNo);

                                                                CheckItemAvailable(FIELDNO("Variant Code"));

                                                                IF Type = Type::Item THEN BEGIN
                                                                  GetUnitCost;
                                                                  UpdateUnitPrice(FIELDNO("Variant Code"));
                                                                END;

                                                                GetDefaultBin;
                                                                InitQtyToAsm;
                                                                AutoAsmToOrder;
                                                                IF (xRec."Variant Code" <> "Variant Code") AND (Quantity <> 0) THEN BEGIN
                                                                  IF NOT FullReservedQtyIsForAsmToOrder THEN
                                                                    ReserveSalesLine.VerifyChange(Rec,xRec);
                                                                  WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                END;

                                                                UpdateItemCrossRef;
                                                              END;

                                                   CaptionML=[ENU=Variant Code;
                                                              ESP=C¢d. variante] }
    { 5403;   ;Bin Code            ;Code20        ;TableRelation=IF (Document Type=FILTER(Order|Invoice),
                                                                     Quantity=FILTER(>=0),
                                                                     Qty. to Asm. to Order (Base)=CONST(0)) "Bin Content"."Bin Code" WHERE (Location Code=FIELD(Location Code),
                                                                                                                                            Item No.=FIELD(No.),
                                                                                                                                            Variant Code=FIELD(Variant Code))
                                                                                                                                            ELSE IF (Document Type=FILTER(Return Order|Credit Memo),
                                                                                                                                                     Quantity=FILTER(<0)) "Bin Content"."Bin Code" WHERE (Location Code=FIELD(Location Code),
                                                                                                                                                                                                          Item No.=FIELD(No.),
                                                                                                                                                                                                          Variant Code=FIELD(Variant Code))
                                                                                                                                                                                                          ELSE Bin.Code WHERE (Location Code=FIELD(Location Code));
                                                   OnValidate=VAR
                                                                WMSManagement@1001 : Codeunit 7302;
                                                              BEGIN
                                                                IF "Bin Code" <> '' THEN BEGIN
                                                                  IF NOT IsInbound AND ("Quantity (Base)" <> 0) AND ("Qty. to Asm. to Order (Base)" = 0) THEN
                                                                    WMSManagement.FindBinContent("Location Code","Bin Code","No.","Variant Code",'')
                                                                  ELSE
                                                                    WMSManagement.FindBin("Location Code","Bin Code",'');
                                                                END;

                                                                IF "Drop Shipment" THEN
                                                                  CheckAssocPurchOrder(FIELDCAPTION("Bin Code"));

                                                                TESTFIELD(Type,Type::Item);
                                                                TESTFIELD("Location Code");

                                                                IF (Type = Type::Item) AND ("Bin Code" <> '') THEN BEGIN
                                                                  TESTFIELD("Drop Shipment",FALSE);
                                                                  GetLocation("Location Code");
                                                                  Location.TESTFIELD("Bin Mandatory");
                                                                  CheckWarehouse;
                                                                END;
                                                                ATOLink.UpdateAsmBinCodeFromSalesLine(Rec);
                                                              END;

                                                   OnLookup=VAR
                                                              WMSManagement@1002 : Codeunit 7302;
                                                              BinCode@1000 : Code[20];
                                                            BEGIN
                                                              IF NOT IsInbound AND ("Quantity (Base)" <> 0) THEN
                                                                BinCode := WMSManagement.BinContentLookUp("Location Code","No.","Variant Code",'',"Bin Code")
                                                              ELSE
                                                                BinCode := WMSManagement.BinLookUp("Location Code","No.","Variant Code",'');

                                                              IF BinCode <> '' THEN
                                                                VALIDATE("Bin Code",BinCode);
                                                            END;

                                                   CaptionML=[ENU=Bin Code;
                                                              ESP=C¢d. ubicaci¢n] }
    { 5404;   ;Qty. per Unit of Measure;Decimal   ;InitValue=1;
                                                   CaptionML=[ENU=Qty. per Unit of Measure;
                                                              ESP=Cant. por unidad medida];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5405;   ;Planned             ;Boolean       ;CaptionML=[ENU=Planned;
                                                              ESP=Planificada];
                                                   Editable=No }
    { 5407;   ;Unit of Measure Code;Code10        ;TableRelation=IF (Type=CONST(Item),
                                                                     No.=FILTER(<>'')) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.))
                                                                     ELSE IF (Type=CONST(Resource),
                                                                              No.=FILTER(<>'')) "Resource Unit of Measure".Code WHERE (Resource No.=FIELD(No.))
                                                                              ELSE "Unit of Measure";
                                                   OnValidate=VAR
                                                                Item@1002 : Record 27;
                                                                UnitOfMeasureTranslation@1000 : Record 5402;
                                                                ResUnitofMeasure@1001 : Record 205;
                                                                IdentityManagement@1161 : Codeunit 9801;
                                                              BEGIN
                                                                TestJobPlanningLine;
                                                                TestStatusOpen;
                                                                TESTFIELD("Quantity Shipped",0);
                                                                TESTFIELD("Qty. Shipped (Base)",0);
                                                                TESTFIELD("Return Qty. Received",0);
                                                                TESTFIELD("Return Qty. Received (Base)",0);
                                                                IF "Unit of Measure Code" <> xRec."Unit of Measure Code" THEN BEGIN
                                                                  TESTFIELD("Shipment No.",'');
                                                                  TESTFIELD("Return Receipt No.",'');
                                                                END;

                                                                CheckAssocPurchOrder(FIELDCAPTION("Unit of Measure Code"));

                                                                IF "Unit of Measure Code" = '' THEN
                                                                  "Unit of Measure" := ''
                                                                ELSE BEGIN
                                                                  IF NOT UnitOfMeasure.GET("Unit of Measure Code") THEN
                                                                    UnitOfMeasure.INIT;
                                                                  "Unit of Measure" := UnitOfMeasure.Description;
                                                                  GetSalesHeader;
                                                                  IF SalesHeader."Language Code" <> '' THEN BEGIN
                                                                    UnitOfMeasureTranslation.SETRANGE(Code,"Unit of Measure Code");
                                                                    UnitOfMeasureTranslation.SETRANGE("Language Code",SalesHeader."Language Code");
                                                                    IF UnitOfMeasureTranslation.FINDFIRST THEN
                                                                      "Unit of Measure" := UnitOfMeasureTranslation.Description;
                                                                  END ELSE
                                                                    IF IdentityManagement.IsInvAppId THEN
                                                                      "Unit of Measure" := UnitOfMeasure.GetDescriptionInCurrentLanguage;
                                                                END;
                                                                DistIntegration.EnterSalesItemCrossRef(Rec);
                                                                CASE Type OF
                                                                  Type::Item:
                                                                    BEGIN
                                                                      GetItem(Item);
                                                                      GetUnitCost;
                                                                      UpdateUnitPrice(FIELDNO("Unit of Measure Code"));
                                                                      CheckItemAvailable(FIELDNO("Unit of Measure Code"));
                                                                      "Gross Weight" := Item."Gross Weight" * "Qty. per Unit of Measure";
                                                                      "Net Weight" := Item."Net Weight" * "Qty. per Unit of Measure";
                                                                      "Unit Volume" := Item."Unit Volume" * "Qty. per Unit of Measure";
                                                                      "Units per Parcel" :=
                                                                        ROUND(Item."Units per Parcel" / "Qty. per Unit of Measure",UOMMgt.QtyRndPrecision);
                                                                      OnAfterAssignItemUOM(Rec,Item);
                                                                      IF (xRec."Unit of Measure Code" <> "Unit of Measure Code") AND (Quantity <> 0) THEN
                                                                        WhseValidateSourceLine.SalesLineVerifyChange(Rec,xRec);
                                                                      IF "Qty. per Unit of Measure" > xRec."Qty. per Unit of Measure" THEN
                                                                        InitItemAppl(FALSE);
                                                                    END;
                                                                  Type::Resource:
                                                                    BEGIN
                                                                      IF "Unit of Measure Code" = '' THEN BEGIN
                                                                        GetResource;
                                                                        "Unit of Measure Code" := Resource."Base Unit of Measure";
                                                                      END;
                                                                      ResUnitofMeasure.GET("No.","Unit of Measure Code");
                                                                      "Qty. per Unit of Measure" := ResUnitofMeasure."Qty. per Unit of Measure";
                                                                      OnAfterAssignResourceUOM(Rec,Resource,ResUnitofMeasure);
                                                                      UpdateUnitPrice(FIELDNO("Unit of Measure Code"));
                                                                      FindResUnitCost;
                                                                    END;
                                                                  Type::"G/L Account",Type::"Fixed Asset",
                                                                  Type::"Charge (Item)",Type::" ":
                                                                    "Qty. per Unit of Measure" := 1;
                                                                END;
                                                                VALIDATE(Quantity);
                                                              END;

                                                   CaptionML=[ENU=Unit of Measure Code;
                                                              ESP=C¢d. unidad medida] }
    { 5415;   ;Quantity (Base)     ;Decimal       ;OnValidate=BEGIN
                                                                TestJobPlanningLine;
                                                                TESTFIELD("Qty. per Unit of Measure",1);
                                                                VALIDATE(Quantity,"Quantity (Base)");
                                                                UpdateUnitPrice(FIELDNO("Quantity (Base)"));
                                                              END;

                                                   CaptionML=[ENU=Quantity (Base);
                                                              ESP=Cantidad (base)];
                                                   DecimalPlaces=0:5 }
    { 5416;   ;Outstanding Qty. (Base);Decimal    ;CaptionML=[ENU=Outstanding Qty. (Base);
                                                              ESP=Cant. pendiente (base)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5417;   ;Qty. to Invoice (Base);Decimal     ;OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Unit of Measure",1);
                                                                VALIDATE("Qty. to Invoice","Qty. to Invoice (Base)");
                                                              END;

                                                   CaptionML=[ENU=Qty. to Invoice (Base);
                                                              ESP=Cant. a facturar (base)];
                                                   DecimalPlaces=0:5 }
    { 5418;   ;Qty. to Ship (Base) ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Unit of Measure",1);
                                                                VALIDATE("Qty. to Ship","Qty. to Ship (Base)");
                                                              END;

                                                   CaptionML=[ENU=Qty. to Ship (Base);
                                                              ESP=Cant. a enviar (base)];
                                                   DecimalPlaces=0:5 }
    { 5458;   ;Qty. Shipped Not Invd. (Base);Decimal;
                                                   CaptionML=[ENU=Qty. Shipped Not Invd. (Base);
                                                              ESP=Cant. enviada no fact. (base)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5460;   ;Qty. Shipped (Base) ;Decimal       ;CaptionML=[ENU=Qty. Shipped (Base);
                                                              ESP=Cant. enviada (base)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5461;   ;Qty. Invoiced (Base);Decimal       ;CaptionML=[ENU=Qty. Invoiced (Base);
                                                              ESP=Cant. facturada (base)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5495;   ;Reserved Qty. (Base);Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Reservation Entry"."Quantity (Base)" WHERE (Source ID=FIELD(Document No.),
                                                                                                                 Source Ref. No.=FIELD(Line No.),
                                                                                                                 Source Type=CONST(37),
                                                                                                                 Source Subtype=FIELD(Document Type),
                                                                                                                 Reservation Status=CONST(Reservation)));
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Reserved Qty. (Base);
                                                              ESP=Cant. reservada (base)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5600;   ;FA Posting Date     ;Date          ;AccessByPermission=TableData 5600=R;
                                                   CaptionML=[ENU=FA Posting Date;
                                                              ESP=A/F Fecha registro] }
    { 5602;   ;Depreciation Book Code;Code10      ;TableRelation="Depreciation Book";
                                                   OnValidate=BEGIN
                                                                GetFAPostingGroup;
                                                              END;

                                                   CaptionML=[ENU=Depreciation Book Code;
                                                              ESP=C¢d. libro amortizaci¢n] }
    { 5605;   ;Depr. until FA Posting Date;Boolean;AccessByPermission=TableData 5600=R;
                                                   CaptionML=[ENU=Depr. until FA Posting Date;
                                                              ESP=A/F Amort. hasta fecha reg.] }
    { 5612;   ;Duplicate in Depreciation Book;Code10;
                                                   TableRelation="Depreciation Book";
                                                   OnValidate=BEGIN
                                                                "Use Duplication List" := FALSE;
                                                              END;

                                                   CaptionML=[ENU=Duplicate in Depreciation Book;
                                                              ESP=Duplicado en libro amort.] }
    { 5613;   ;Use Duplication List;Boolean       ;OnValidate=BEGIN
                                                                "Duplicate in Depreciation Book" := '';
                                                              END;

                                                   AccessByPermission=TableData 5600=R;
                                                   CaptionML=[ENU=Use Duplication List;
                                                              ESP=Utilizar lista duplicados] }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   OnValidate=BEGIN
                                                                CreateDim(
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  DimMgt.TypeToTableID3(Type),"No.",
                                                                  DATABASE::Job,"Job No.");
                                                              END;

                                                   CaptionML=[ENU=Responsibility Center;
                                                              ESP=Centro responsabilidad];
                                                   Editable=No }
    { 5701;   ;Out-of-Stock Substitution;Boolean  ;CaptionML=[ENU=Out-of-Stock Substitution;
                                                              ESP=Sustituc. por falta de stock];
                                                   Editable=No }
    { 5702;   ;Substitution Available;Boolean     ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Item Substitution" WHERE (Type=CONST(Item),
                                                                                                No.=FIELD(No.),
                                                                                                Substitute Type=CONST(Item)));
                                                   CaptionML=[ENU=Substitution Available;
                                                              ESP=Disponible sustituci¢n];
                                                   Editable=No }
    { 5703;   ;Originally Ordered No.;Code20      ;TableRelation=IF (Type=CONST(Item)) Item;
                                                   AccessByPermission=TableData 5715=R;
                                                   CaptionML=[ENU=Originally Ordered No.;
                                                              ESP=N§ pedido originalmente] }
    { 5704;   ;Originally Ordered Var. Code;Code10;TableRelation=IF (Type=CONST(Item)) "Item Variant".Code WHERE (Item No.=FIELD(Originally Ordered No.));
                                                   AccessByPermission=TableData 5715=R;
                                                   CaptionML=[ENU=Originally Ordered Var. Code;
                                                              ESP=C¢d. var. ped. originalmente] }
    { 5705;   ;Cross-Reference No. ;Code20        ;OnValidate=VAR
                                                                ItemCrossReference@1000 : Record 5717;
                                                              BEGIN
                                                                GetSalesHeader;
                                                                "Sell-to Customer No." := SalesHeader."Sell-to Customer No.";
                                                                ValidateCrossReferenceNo(ItemCrossReference,TRUE);
                                                              END;

                                                   OnLookup=BEGIN
                                                              CrossReferenceNoLookUp;
                                                            END;

                                                   AccessByPermission=TableData 5717=R;
                                                   CaptionML=[ENU=Cross-Reference No.;
                                                              ESP=N§ referencia cruzada] }
    { 5706;   ;Unit of Measure (Cross Ref.);Code10;TableRelation=IF (Type=CONST(Item)) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   AccessByPermission=TableData 5717=R;
                                                   CaptionML=[ENU=Unit of Measure (Cross Ref.);
                                                              ESP=Unidad de medida (ref.cruz.)] }
    { 5707;   ;Cross-Reference Type;Option        ;CaptionML=[ENU=Cross-Reference Type;
                                                              ESP=Tipo referencia cruzada];
                                                   OptionCaptionML=[ENU=" ,Customer,Vendor,Bar Code";
                                                                    ESP=" ,Cliente,Prov.,C¢d. barra"];
                                                   OptionString=[ ,Customer,Vendor,Bar Code] }
    { 5708;   ;Cross-Reference Type No.;Code30    ;CaptionML=[ENU=Cross-Reference Type No.;
                                                              ESP=N§ tipo referencia cruzada] }
    { 5709;   ;Item Category Code  ;Code20        ;TableRelation="Item Category";
                                                   CaptionML=[ENU=Item Category Code;
                                                              ESP=C¢d. categor¡a producto] }
    { 5710;   ;Nonstock            ;Boolean       ;AccessByPermission=TableData 5718=R;
                                                   CaptionML=[ENU=Catalog;
                                                              ESP=Cat logo];
                                                   Editable=No }
    { 5711;   ;Purchasing Code     ;Code10        ;TableRelation=Purchasing;
                                                   OnValidate=VAR
                                                                PurchasingCode@1000 : Record 5721;
                                                                ShippingAgentServices@1001 : Record 5790;
                                                              BEGIN
                                                                TestStatusOpen;
                                                                TESTFIELD(Type,Type::Item);
                                                                CheckAssocPurchOrder(FIELDCAPTION(Type));

                                                                IF PurchasingCode.GET("Purchasing Code") THEN BEGIN
                                                                  "Drop Shipment" := PurchasingCode."Drop Shipment";
                                                                  "Special Order" := PurchasingCode."Special Order";
                                                                  IF "Drop Shipment" OR "Special Order" THEN BEGIN
                                                                    TESTFIELD("Qty. to Asm. to Order (Base)",0);
                                                                    CALCFIELDS("Reserved Qty. (Base)");
                                                                    TESTFIELD("Reserved Qty. (Base)",0);
                                                                    ReserveSalesLine.VerifyChange(Rec,xRec);

                                                                    IF (Quantity <> 0) AND (Quantity = "Quantity Shipped") THEN
                                                                      ERROR(SalesLineCompletelyShippedErr);
                                                                    Reserve := Reserve::Never;
                                                                    IF "Drop Shipment" THEN BEGIN
                                                                      EVALUATE("Outbound Whse. Handling Time",'<0D>');
                                                                      EVALUATE("Shipping Time",'<0D>');
                                                                      UpdateDates;
                                                                      "Bin Code" := '';
                                                                    END;
                                                                  END ELSE
                                                                    SetReserveWithoutPurchasingCode;
                                                                END ELSE BEGIN
                                                                  "Drop Shipment" := FALSE;
                                                                  "Special Order" := FALSE;
                                                                  SetReserveWithoutPurchasingCode;
                                                                END;

                                                                IF ("Purchasing Code" <> xRec."Purchasing Code") AND
                                                                   (NOT "Drop Shipment") AND
                                                                   ("Drop Shipment" <> xRec."Drop Shipment")
                                                                THEN BEGIN
                                                                  IF "Location Code" = '' THEN BEGIN
                                                                    IF InvtSetup.GET THEN
                                                                      "Outbound Whse. Handling Time" := InvtSetup."Outbound Whse. Handling Time";
                                                                  END ELSE
                                                                    IF Location.GET("Location Code") THEN
                                                                      "Outbound Whse. Handling Time" := Location."Outbound Whse. Handling Time";
                                                                  IF ShippingAgentServices.GET("Shipping Agent Code","Shipping Agent Service Code") THEN
                                                                    "Shipping Time" := ShippingAgentServices."Shipping Time"
                                                                  ELSE BEGIN
                                                                    GetSalesHeader;
                                                                    "Shipping Time" := SalesHeader."Shipping Time";
                                                                  END;
                                                                  UpdateDates;
                                                                END;
                                                              END;

                                                   AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Purchasing Code;
                                                              ESP=C¢d. compra] }
    { 5712;   ;Product Group Code  ;Code10        ;TableRelation="Product Group".Code WHERE (Item Category Code=FIELD(Item Category Code));
                                                   ValidateTableRelation=No;
                                                   ObsoleteState=Removed;
                                                   ObsoleteReason=Product Groups became first level children of Item Categories.;
                                                   CaptionML=[ENU=Product Group Code;
                                                              ESP=C¢d. grupo producto] }
    { 5713;   ;Special Order       ;Boolean       ;AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Special Order;
                                                              ESP=Pedido especial];
                                                   Editable=No }
    { 5714;   ;Special Order Purchase No.;Code20  ;TableRelation=IF (Special Order=CONST(Yes)) "Purchase Header".No. WHERE (Document Type=CONST(Order));
                                                   AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Special Order Purchase No.;
                                                              ESP=N§ pedido compra especial] }
    { 5715;   ;Special Order Purch. Line No.;Integer;
                                                   TableRelation=IF (Special Order=CONST(Yes)) "Purchase Line"."Line No." WHERE (Document Type=CONST(Order),
                                                                                                                                 Document No.=FIELD(Special Order Purchase No.));
                                                   AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Special Order Purch. Line No.;
                                                              ESP=N§ l¡n. ped. compra especial] }
    { 5749;   ;Whse. Outstanding Qty.;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Warehouse Shipment Line"."Qty. Outstanding" WHERE (Source Type=CONST(37),
                                                                                                                       Source Subtype=FIELD(Document Type),
                                                                                                                       Source No.=FIELD(Document No.),
                                                                                                                       Source Line No.=FIELD(Line No.)));
                                                   AccessByPermission=TableData 14=R;
                                                   CaptionML=[ENU=Whse. Outstanding Qty.;
                                                              ESP=Cant. pdte. almac‚n];
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 5750;   ;Whse. Outstanding Qty. (Base);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Warehouse Shipment Line"."Qty. Outstanding (Base)" WHERE (Source Type=CONST(37),
                                                                                                                              Source Subtype=FIELD(Document Type),
                                                                                                                              Source No.=FIELD(Document No.),
                                                                                                                              Source Line No.=FIELD(Line No.)));
                                                   AccessByPermission=TableData 14=R;
                                                   CaptionML=[ENU=Whse. Outstanding Qty. (Base);
                                                              ESP=Cant. pdte. almac‚n (base)];
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 5752;   ;Completely Shipped  ;Boolean       ;CaptionML=[ENU=Completely Shipped;
                                                              ESP=Enviado completamente];
                                                   Editable=No }
    { 5790;   ;Requested Delivery Date;Date       ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF ("Requested Delivery Date" <> xRec."Requested Delivery Date") AND
                                                                   ("Promised Delivery Date" <> 0D)
                                                                THEN
                                                                  ERROR(
                                                                    Text028,
                                                                    FIELDCAPTION("Requested Delivery Date"),
                                                                    FIELDCAPTION("Promised Delivery Date"));

                                                                IF "Requested Delivery Date" <> 0D THEN
                                                                  VALIDATE("Planned Delivery Date","Requested Delivery Date")
                                                                ELSE BEGIN
                                                                  GetSalesHeader;
                                                                  VALIDATE("Shipment Date",SalesHeader."Shipment Date");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Requested Delivery Date;
                                                              ESP=Fecha entrega requerida] }
    { 5791;   ;Promised Delivery Date;Date        ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Promised Delivery Date" <> 0D THEN
                                                                  VALIDATE("Planned Delivery Date","Promised Delivery Date")
                                                                ELSE
                                                                  VALIDATE("Requested Delivery Date");
                                                              END;

                                                   AccessByPermission=TableData 99000880=R;
                                                   CaptionML=[ENU=Promised Delivery Date;
                                                              ESP=Fecha entrega prometida] }
    { 5792;   ;Shipping Time       ;DateFormula   ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Drop Shipment" THEN
                                                                  DateFormularZero("Shipping Time",FIELDNO("Shipping Time"),FIELDCAPTION("Shipping Time"));
                                                                UpdateDates;
                                                              END;

                                                   AccessByPermission=TableData 99000880=R;
                                                   CaptionML=[ENU=Shipping Time;
                                                              ESP=Tiempo env¡o] }
    { 5793;   ;Outbound Whse. Handling Time;DateFormula;
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Drop Shipment" THEN
                                                                  DateFormularZero("Outbound Whse. Handling Time",
                                                                    FIELDNO("Outbound Whse. Handling Time"),FIELDCAPTION("Outbound Whse. Handling Time"));
                                                                UpdateDates;
                                                              END;

                                                   AccessByPermission=TableData 14=R;
                                                   CaptionML=[ENU=Outbound Whse. Handling Time;
                                                              ESP=Tiempo manip. alm. salida] }
    { 5794;   ;Planned Delivery Date;Date         ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Planned Delivery Date" <> 0D THEN BEGIN
                                                                  PlannedDeliveryDateCalculated := TRUE;

                                                                  VALIDATE("Planned Shipment Date",CalcPlannedDate);

                                                                  IF "Planned Shipment Date" > "Planned Delivery Date" THEN
                                                                    "Planned Delivery Date" := "Planned Shipment Date";
                                                                END;
                                                              END;

                                                   AccessByPermission=TableData 99000880=R;
                                                   CaptionML=[ENU=Planned Delivery Date;
                                                              ESP=Fecha entrega planificada] }
    { 5795;   ;Planned Shipment Date;Date         ;OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Planned Shipment Date" <> 0D THEN BEGIN
                                                                  PlannedShipmentDateCalculated := TRUE;

                                                                  VALIDATE("Shipment Date",CalcShipmentDate);
                                                                END;
                                                              END;

                                                   AccessByPermission=TableData 99000880=R;
                                                   CaptionML=[ENU=Planned Shipment Date;
                                                              ESP=Fecha env¡o planificada] }
    { 5796;   ;Shipping Agent Code ;Code10        ;TableRelation="Shipping Agent";
                                                   OnValidate=BEGIN
                                                                TestStatusOpen;
                                                                IF "Shipping Agent Code" <> xRec."Shipping Agent Code" THEN
                                                                  VALIDATE("Shipping Agent Service Code",'');
                                                              END;

                                                   AccessByPermission=TableData 5790=R;
                                                   CaptionML=[ENU=Shipping Agent Code;
                                                              ESP=C¢d. transportista] }
    { 5797;   ;Shipping Agent Service Code;Code10 ;TableRelation="Shipping Agent Services".Code WHERE (Shipping Agent Code=FIELD(Shipping Agent Code));
                                                   OnValidate=VAR
                                                                ShippingAgentServices@1000 : Record 5790;
                                                              BEGIN
                                                                TestStatusOpen;
                                                                IF "Shipping Agent Service Code" <> xRec."Shipping Agent Service Code" THEN
                                                                  EVALUATE("Shipping Time",'<>');

                                                                IF "Drop Shipment" THEN BEGIN
                                                                  EVALUATE("Shipping Time",'<0D>');
                                                                  UpdateDates;
                                                                END ELSE
                                                                  IF ShippingAgentServices.GET("Shipping Agent Code","Shipping Agent Service Code") THEN
                                                                    "Shipping Time" := ShippingAgentServices."Shipping Time"
                                                                  ELSE BEGIN
                                                                    GetSalesHeader;
                                                                    "Shipping Time" := SalesHeader."Shipping Time";
                                                                  END;

                                                                IF ShippingAgentServices."Shipping Time" <> xRec."Shipping Time" THEN
                                                                  VALIDATE("Shipping Time","Shipping Time");
                                                              END;

                                                   AccessByPermission=TableData 5790=R;
                                                   CaptionML=[ENU=Shipping Agent Service Code;
                                                              ESP=C¢d. servicio transportista] }
    { 5800;   ;Allow Item Charge Assignment;Boolean;
                                                   InitValue=Yes;
                                                   OnValidate=BEGIN
                                                                CheckItemChargeAssgnt;
                                                              END;

                                                   AccessByPermission=TableData 5800=R;
                                                   CaptionML=[ENU=Allow Item Charge Assignment;
                                                              ESP=Permitir asign. cargos prod.] }
    { 5801;   ;Qty. to Assign      ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Charge Assignment (Sales)"."Qty. to Assign" WHERE (Document Type=FIELD(Document Type),
                                                                                                                            Document No.=FIELD(Document No.),
                                                                                                                            Document Line No.=FIELD(Line No.)));
                                                   CaptionML=[ENU=Qty. to Assign;
                                                              ESP=Cant. a asignar];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5802;   ;Qty. Assigned       ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Charge Assignment (Sales)"."Qty. Assigned" WHERE (Document Type=FIELD(Document Type),
                                                                                                                           Document No.=FIELD(Document No.),
                                                                                                                           Document Line No.=FIELD(Line No.)));
                                                   CaptionML=[ENU=Qty. Assigned;
                                                              ESP=Cant. asignada];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5803;   ;Return Qty. to Receive;Decimal     ;OnValidate=VAR
                                                                ItemLedgEntry@1000 : Record 32;
                                                                IsHandled@1001 : Boolean;
                                                              BEGIN
                                                                IF (CurrFieldNo <> 0) AND
                                                                   (Type = Type::Item) AND
                                                                   ("Return Qty. to Receive" <> 0) AND
                                                                   (NOT "Drop Shipment")
                                                                THEN
                                                                  CheckWarehouse;

                                                                OnValidateReturnQtyToReceiveOnAfterCheck(Rec,CurrFieldNo);

                                                                IF "Return Qty. to Receive" = Quantity - "Return Qty. Received" THEN
                                                                  InitQtyToReceive
                                                                ELSE BEGIN
                                                                  "Return Qty. to Receive (Base)" := CalcBaseQty("Return Qty. to Receive");
                                                                  InitQtyToInvoice;
                                                                END;

                                                                IsHandled := FALSE;
                                                                OnValidateQtyToReturnAfterInitQty(Rec,xRec,CurrFieldNo,IsHandled);
                                                                IF NOT IsHandled THEN BEGIN
                                                                  IF ("Return Qty. to Receive" * Quantity < 0) OR
                                                                     (ABS("Return Qty. to Receive") > ABS("Outstanding Quantity")) OR
                                                                     (Quantity * "Outstanding Quantity" < 0)
                                                                  THEN
                                                                    ERROR(Text020,"Outstanding Quantity");
                                                                  IF ("Return Qty. to Receive (Base)" * "Quantity (Base)" < 0) OR
                                                                     (ABS("Return Qty. to Receive (Base)") > ABS("Outstanding Qty. (Base)")) OR
                                                                     ("Quantity (Base)" * "Outstanding Qty. (Base)" < 0)
                                                                  THEN
                                                                    ERROR(Text021,"Outstanding Qty. (Base)");
                                                                END;

                                                                IF (CurrFieldNo <> 0) AND (Type = Type::Item) AND ("Return Qty. to Receive" > 0) THEN
                                                                  CheckApplFromItemLedgEntry(ItemLedgEntry);
                                                              END;

                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Return Qty. to Receive;
                                                              ESP=Cantidad dev. a recibir];
                                                   DecimalPlaces=0:5 }
    { 5804;   ;Return Qty. to Receive (Base);Decimal;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Unit of Measure",1);
                                                                VALIDATE("Return Qty. to Receive","Return Qty. to Receive (Base)");
                                                              END;

                                                   CaptionML=[ENU=Return Qty. to Receive (Base);
                                                              ESP=Cantidad dev. a recibir (Base)];
                                                   DecimalPlaces=0:5 }
    { 5805;   ;Return Qty. Rcd. Not Invd.;Decimal ;CaptionML=[ENU=Return Qty. Rcd. Not Invd.;
                                                              ESP=Cantidad dev. rec. no fact.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5806;   ;Ret. Qty. Rcd. Not Invd.(Base);Decimal;
                                                   CaptionML=[ENU=Ret. Qty. Rcd. Not Invd.(Base);
                                                              ESP=Cantidad dev. rec. no fact.(Base)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5807;   ;Return Rcd. Not Invd.;Decimal      ;OnValidate=VAR
                                                                Currency2@1000 : Record 4;
                                                              BEGIN
                                                                GetSalesHeader;
                                                                Currency2.InitRoundingPrecision;
                                                                IF SalesHeader."Currency Code" <> '' THEN
                                                                  "Return Rcd. Not Invd. (LCY)" :=
                                                                    ROUND(
                                                                      CurrExchRate.ExchangeAmtFCYToLCY(
                                                                        GetDate,"Currency Code",
                                                                        "Return Rcd. Not Invd.",SalesHeader."Currency Factor"),
                                                                      Currency2."Amount Rounding Precision")
                                                                ELSE
                                                                  "Return Rcd. Not Invd. (LCY)" :=
                                                                    ROUND("Return Rcd. Not Invd.",Currency2."Amount Rounding Precision");
                                                              END;

                                                   CaptionML=[ENU=Return Rcd. Not Invd.;
                                                              ESP=Dev. recib. no facturada];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 5808;   ;Return Rcd. Not Invd. (LCY);Decimal;CaptionML=[ENU=Return Rcd. Not Invd. (LCY);
                                                              ESP=Dev. recib. no facturada (DL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 5809;   ;Return Qty. Received;Decimal       ;AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Return Qty. Received;
                                                              ESP=Cantidad dev. rec.];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5810;   ;Return Qty. Received (Base);Decimal;CaptionML=[ENU=Return Qty. Received (Base);
                                                              ESP=Cantidad  dev. rec. (Base)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5811;   ;Appl.-from Item Entry;Integer      ;OnValidate=VAR
                                                                ItemLedgEntry@1000 : Record 32;
                                                              BEGIN
                                                                IF "Appl.-from Item Entry" <> 0 THEN BEGIN
                                                                  CheckApplFromItemLedgEntry(ItemLedgEntry);
                                                                  VALIDATE("Unit Cost (LCY)",CalcUnitCost(ItemLedgEntry));
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              SelectItemEntry(FIELDNO("Appl.-from Item Entry"));
                                                            END;

                                                   AccessByPermission=TableData 27=R;
                                                   CaptionML=[ENU=Appl.-from Item Entry;
                                                              ESP=Liquid.-de mov. pdto];
                                                   MinValue=0 }
    { 5909;   ;BOM Item No.        ;Code20        ;TableRelation=Item;
                                                   CaptionML=[ENU=BOM Item No.;
                                                              ESP=N§ L.M. pdto.] }
    { 6600;   ;Return Receipt No.  ;Code20        ;CaptionML=[ENU=Return Receipt No.;
                                                              ESP=N§ recep. devol.];
                                                   Editable=No }
    { 6601;   ;Return Receipt Line No.;Integer    ;CaptionML=[ENU=Return Receipt Line No.;
                                                              ESP=N§ l¡n. recep. dev.];
                                                   Editable=No }
    { 6608;   ;Return Reason Code  ;Code10        ;TableRelation="Return Reason";
                                                   OnValidate=BEGIN
                                                                ValidateReturnReasonCode(FIELDNO("Return Reason Code"));
                                                              END;

                                                   CaptionML=[ENU=Return Reason Code;
                                                              ESP=C¢d. auditor¡a dev.] }
    { 6610;   ;Copied From Posted Doc.;Boolean    ;DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Copied From Posted Doc.;
                                                              ESP=Copia de Doc. regis.] }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 7002;   ;Customer Disc. Group;Code20        ;TableRelation="Customer Discount Group";
                                                   OnValidate=BEGIN
                                                                IF Type = Type::Item THEN
                                                                  UpdateUnitPrice(FIELDNO("Customer Disc. Group"))
                                                              END;

                                                   CaptionML=[ENU=Customer Disc. Group;
                                                              ESP=Grupo dto. cliente] }
    { 7003;   ;Subtype             ;Option        ;CaptionML=[ENU=Subtype;
                                                              ESP=Subtipo];
                                                   OptionCaptionML=[ENU=" ,Item - Inventory,Item - Service,Comment";
                                                                    ESP=" ,Producto - Inventario,Producto - Servicio,Comentario"];
                                                   OptionString=[ ,Item - Inventory,Item - Service,Comment] }
    { 7004;   ;Price description   ;Text80        ;CaptionML=[ENU=Price description;
                                                              ESP=Descripci¢n del precio] }
    { 7010;   ;Attached Doc Count  ;Integer       ;FieldClass=FlowField;
                                                   InitValue=0;
                                                   CalcFormula=Count("Document Attachment" WHERE (Table ID=CONST(37),
                                                                                                  No.=FIELD(Document No.),
                                                                                                  Document Type=FIELD(Document Type),
                                                                                                  Line No.=FIELD(Line No.)));
                                                   CaptionML=[ENU=Attached Doc Count;
                                                              ESP=Recuento doc. adjunto];
                                                   BlankNumbers=DontBlank }
    { 10700;  ;Pmt. Disc. Given Amount (Old);Decimal;
                                                   ObsoleteState=Removed;
                                                   ObsoleteReason=Merged to W1;
                                                   CaptionML=[ENU=Pmt. Disc. Given Amount (Old);
                                                              ESP=Importe concedido de dto. por pronto pago (anterior)];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 10701;  ;EC %                ;Decimal       ;CaptionML=[ENU=EC %;
                                                              ESP=% RE] }
    { 10702;  ;EC Difference       ;Decimal       ;CaptionML=[ENU=EC Difference;
                                                              ESP=Diferencia RE];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 10703;  ;Prepayment EC %     ;Decimal       ;CaptionML=[ENU=Prepayment EC %;
                                                              ESP=Prepago %RE];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 50000;  ;% margen real       ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50001;  ;% margen m¡nimo     ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50004;  ;Usuario autorizaci¢n margen;Code20 ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50005;  ;% comisi¢n          ;Decimal       ;OnValidate=VAR
                                                                GrProComis@1170170000 : Record 7014621;
                                                                Item@1170170001 : Record 27;
                                                              BEGIN
                                                                //I-BAIN-0025
                                                                //I-BAIN-0089
                                                                GrProComis.INIT;
                                                                IF (Type = Type::Item) AND ("No." <> '') THEN BEGIN
                                                                  GetItem(Item);
                                                                  IF NOT GrProComis.GET(Item."C¢d. grupo comisi¢n") THEN;
                                                                END;
                                                                IF GrProComis."M‚todo aplicaci¢n" = GrProComis."M‚todo aplicaci¢n"::"Base-IIEE" THEN BEGIN
                                                                  "Importe comisi¢n (DL)" := ROUND(
                                                                     ("Line Amount" - "Inv. Discount Amount" - "Pmt. Discount Amount" -
                                                                      "IIEE Amount")
                                                                       * "% comisi¢n"/100);
                                                                  IF "Importe comisi¢n (DL)" < 0 THEN "Importe comisi¢n (DL)" := 0;
                                                                END ELSE
                                                                //F-BAIN-0089
                                                                "Importe comisi¢n (DL)" := ROUND(
                                                                   ("Line Amount" - "Inv. Discount Amount" - "Pmt. Discount Amount")
                                                                     * "% comisi¢n"/100);

                                                                GetSalesHeader;
                                                                IF SalesHeader."Currency Code" <> '' THEN BEGIN
                                                                  Currency.InitRoundingPrecision;
                                                                  "Importe comisi¢n (DL)" :=
                                                                    ROUND(
                                                                      CurrExchRate.ExchangeAmtFCYToLCY(
                                                                        GetDate,SalesHeader."Currency Code",
                                                                        "Importe comisi¢n (DL)",SalesHeader."Currency Factor"),
                                                                        Currency."Amount Rounding Precision")
                                                                END;
                                                                //F-BAIN-0025
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 50006;  ;Importe comisi¢n (DL);Decimal      ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 50008;  ;Promoci¢n manual    ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0049 }
    { 50011;  ;C¢d. conjunto       ;Code10        ;TableRelation=IF (Type=CONST(Item)) "Conjunto productos";
                                                   OnValidate=VAR
                                                                CodConjunto@1170170000 : Code[20];
                                                              BEGIN
                                                                // I-23069
                                                                CodConjunto := "C¢d. conjunto";
                                                                IF "C¢d. conjunto" <> xRec."C¢d. conjunto" THEN
                                                                  IF "No." <> '' THEN
                                                                    VALIDATE("No.",'');
                                                                "C¢d. conjunto" := CodConjunto;
                                                                // F-23069
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   Description=23069 }
    { 7014451;;Price Unit Price    ;Decimal       ;OnValidate=BEGIN
                                                                GestCodigoLinVenta.T37ValidatePrecioUnidadPrecio(Rec); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Price Unit Price;
                                                              ESP=Precio unidad precio];
                                                   Description=VNTES;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
    { 7014452;;Qty. Input Unit Of Measure;Decimal ;OnValidate=BEGIN
                                                                GestCodigoLinVenta.T37ValidateCdadEnUMEntrada(Rec,CurrFieldNo); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Qty. Input Unit Of Measure;
                                                              ESP=Cdad. en udad. med. entrada];
                                                   DecimalPlaces=0:6;
                                                   Description=VNTES }
    { 7014454;;Price Unit Of Measure Code;Code10  ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   OnValidate=BEGIN
                                                                GestCodigoLinVenta.T37ValidateCodUnidadMedidaPre(Rec,CurrFieldNo); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Price Unit Of Measure Code;
                                                              ESP=C¢d. ud. medida precio];
                                                   Description=VNTES }
    { 7014455;;Qty. On Price UOM   ;Decimal       ;OnValidate=BEGIN
                                                                GestCodigoLinVenta.T37ValidateCdadUnidadMedidaPre(Rec,xRec,CurrFieldNo); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Qty. On UOM Price;
                                                              ESP=Cdad. en unidad medida precio];
                                                   DecimalPlaces=0:6;
                                                   Description=VNTES }
    { 7014456;;Quantity (Price UOM);Decimal       ;OnValidate=BEGIN
                                                                GestCodigoLinVenta.T37ValidateCantidadUnidadPre(Rec); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Quantity (Price UOM);
                                                              ESP=Cantidad (unidad precio)];
                                                   Description=VNTES }
    { 7014459;;Input UOM Code      ;Code10        ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   OnValidate=VAR
                                                                dCantUdad@1170170000 : Decimal;
                                                              BEGIN
                                                                GestCodigoLinVenta.T37ValidateCantidadUnidadEntr(Rec); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Input UOM Code;
                                                              ESP=C¢d. ud. medida entrada];
                                                   Description=VNTES }
    { 7014460;;Quantity (Input UOM);Decimal       ;OnValidate=BEGIN
                                                                VALIDATE("Qty. Input Unit Of Measure"); //  VNTES
                                                                CheckItemAvailable(FIELDNO("Quantity (Input UOM)"));// VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Quantity (Input UOM);
                                                              ESP=Cantidad ud. medida entrada];
                                                   DecimalPlaces=0:5;
                                                   Description=VNTES }
    { 7014520;;Dealing Document No.;Code20        ;TableRelation="Sales Line";
                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Dealing Document No.;
                                                              ESP=N§ documento distribuci¢n];
                                                   Description=VNTES }
    { 7014521;;Dealing Document Line No.;Integer  ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Dealing Line Document No.;
                                                              ESP=N§ l¡nea doc. distribuci¢n];
                                                   Description=VNTES }
    { 7014522;;Dealer Quantity To Pay;Decimal     ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Quantity Dealer To Pay;
                                                              ESP=Cdad. a abonar distribuidor];
                                                   DecimalPlaces=0:5;
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014523;;Dealer Quantity Paied;Decimal      ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Quantity paied Dealer;
                                                              ESP=Cdad. abonada distribuidor];
                                                   DecimalPlaces=0:5;
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014524;;Dealing Document Type;Option       ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Dealing Document Type;
                                                              ESP=Tipo documento distribuci¢n];
                                                   OptionCaptionML=[ENU=Quote,Order,Invoice,Credit Memo,Blanket Order,Order Return ,,,,,,,,,,,,,,,EDI Order;
                                                                    ESP=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,,,,,,,,,,,,,,,Pedido EDI];
                                                   OptionString=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,,,,,,,,,,,,,,,Pedido EDI;
                                                   Description=VNTES }
    { 7014550;;Automatic Lot       ;Boolean       ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Automatic Lot;
                                                              ESP=Lote autom tico];
                                                   Description=VNTES }
    { 7014683;;Line Type           ;Option        ;OnValidate=BEGIN
                                                                GestCodigoLinVenta.T37ValidateTipoLinea(Rec,xRec); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Line Type;
                                                              ESP=Tipo l¡nea];
                                                   OptionCaptionML=[ENU=Normal,Shows,Gift;
                                                                    ESP=Normal,Muestra,Obsequio];
                                                   OptionString=Normal,Muestra,Obsequio;
                                                   Description=VNTES }
    { 7014684;;Gift Reason Code    ;Code10        ;TableRelation="Concepto obsequio";
                                                   OnValidate=BEGIN
                                                                GestCodigoLinVenta.T37ValidateCodConceptoObsequio(Rec); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Gift Reason Code;
                                                              ESP=C¢d. concepto obsequio];
                                                   Description=VNTES }
    { 7014823;;Harvest Code        ;Code10        ;TableRelation=Cosecha;
                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Harvest Code;
                                                              ESP=C¢d. cosecha];
                                                   Description=VNTES }
    { 7014854;;Item Promo Discount Group;Code10   ;TableRelation="Grupo dto. promoci¢n producto";
                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Discount Promo Item Group;
                                                              ESP=Grupo dto. promoci¢n producto;
                                                              PTG=Grupo Dto. Promo‡Æo Produto];
                                                   Description=VNTES }
    { 7014855;;Cust. Promo Discount Group;Code10  ;TableRelation="Grupo dto. promoci¢n cliente";
                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Cust. Promo Discount Group;
                                                              ESP=Grupo dto. promoci¢n cliente;
                                                              PTG=Grupo Dto. Promo‡Æo Cliente];
                                                   Description=VNTES }
    { 7014857;;Promotion           ;Boolean       ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Promotion;
                                                              ESP=Promoci¢n;
                                                              PTG=Promo‡Æo];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014858;;Promo Source Line No.;Integer      ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Promo Source Line No.;
                                                              ESP=N§ l¡nea origen promoci¢n;
                                                              PTG=N§ Linha Origem Promo‡Æo];
                                                   Description=VNTES }
    { 7014859;;Promo Code          ;Code10        ;TableRelation=Promoci¢n.C¢digo;
                                                   OnValidate=BEGIN
                                                                GestCodigoLinVenta.T37ValidateCodPromocion(Rec,xRec); //  VNTES
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Promo Code;
                                                              ESP=C¢d. promoci¢n;
                                                              PTG=C¢d. Promo‡Æo];
                                                   Description=VNTES }
    { 7014860;;Promo Quantity (Base);Decimal      ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Promo Quantity (Base);
                                                              ESP=Cdad. promoci¢n (base);
                                                              PTG=Qnt. Promo‡Æo (base)];
                                                   Description=VNTES }
    { 7014861;;Promo No.           ;Integer       ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Promo No.;
                                                              ESP=N§ promoci¢n;
                                                              PTG=N§ Promo‡Æo];
                                                   Description=VNTES }
    { 7014874;;IIEE Price          ;Decimal       ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=IISS Price;
                                                              ESP=Precio IIEE];
                                                   MinValue=0;
                                                   Description=VNTES;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
    { 7014876;;IIEE Amount         ;Decimal       ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=IISS Amount;
                                                              ESP=Importe IIEE];
                                                   Description=VNTES;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 7014877;;Comercial Price     ;Decimal       ;OnValidate=BEGIN
                                                                // VNTES.i
                                                                GestCodigoLinVenta.T37ValidatePrecioComercial(Rec);
                                                                // VNTES.f
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Retail Price;
                                                              ESP=Precio comercial];
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
  }
  KEYS
  {
    {    ;Document Type,Document No.,Line No.     ;Clustered=Yes }
    { No ;Document No.,Line No.,Document Type      }
    {    ;Document Type,Type,No.,Variant Code,Drop Shipment,Location Code,Shipment Date;
                                                   SumIndexFields=Outstanding Qty. (Base) }
    {    ;Document Type,Bill-to Customer No.,Currency Code,Document No.;
                                                   SumIndexFields=Outstanding Amount,Shipped Not Invoiced,Outstanding Amount (LCY),Shipped Not Invoiced (LCY),Return Rcd. Not Invd. (LCY) }
    { No ;Document Type,Type,No.,Variant Code,Drop Shipment,Shortcut Dimension 1 Code,Shortcut Dimension 2 Code,Location Code,Shipment Date;
                                                   SumIndexFields=Outstanding Qty. (Base) }
    { No ;Document Type,Bill-to Customer No.,Shortcut Dimension 1 Code,Shortcut Dimension 2 Code,Currency Code,Document No.;
                                                   SumIndexFields=Outstanding Amount,Shipped Not Invoiced,Outstanding Amount (LCY),Shipped Not Invoiced (LCY) }
    {    ;Document Type,Blanket Order No.,Blanket Order Line No. }
    {    ;Document Type,Document No.,Location Code;SumIndexFields=Amount,Amount Including VAT,Outstanding Amount,Shipped Not Invoiced,Outstanding Amount (LCY),Shipped Not Invoiced (LCY);
                                                   MaintainSQLIndex=No }
    {    ;Document Type,Shipment No.,Shipment Line No. }
    {    ;Type,No.,Variant Code,Drop Shipment,Location Code,Document Type,Shipment Date;
                                                   MaintainSQLIndex=No }
    {    ;Document Type,Sell-to Customer No.,Shipment No.,Document No.;
                                                   SumIndexFields=Outstanding Amount (LCY) }
    {    ;Job Contract Entry No.                   }
    { No ;Document Type,Document No.,Qty. Shipped Not Invoiced }
    { No ;Document Type,Document No.,Type,No.      }
    {    ;Recalculate Invoice Disc.                }
    {    ;Qty. Shipped Not Invoiced                }
    {    ;Qty. Shipped (Base)                      }
    {    ;Shipment Date,Outstanding Quantity       }
  }
  FIELDGROUPS
  {
    { 1   ;Brick               ;No.,Description,Line Amount,Quantity,Unit of Measure Code,Price description }
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=You cannot delete the order line because it is associated with purchase order %1 line %2.;ESP=No se puede eliminar la l¡nea del pedido porque est  asociada a la l¡nea %2 del pedido de compra %1.';
      Text001@1001 : TextConst 'ENU=You cannot rename a %1.;ESP=No se puede cambiar el nombre a %1.';
      Text002@1002 : TextConst 'ENU=You cannot change %1 because the order line is associated with purchase order %2 line %3.;ESP=No se puede cambiar %1 porque la l¡nea de pedido est  asociada a la l¡nea %3 del pedido de compra %2.';
      Text003@1003 : TextConst 'ENU=must not be less than %1;ESP=No puede ser inferior a %1.';
      Text005@1004 : TextConst 'ENU=You cannot invoice more than %1 units.;ESP=No se pueden facturar m s de %1 unidades.';
      Text006@1005 : TextConst 'ENU=You cannot invoice more than %1 base units.;ESP=No se pueden facturar m s de %1 unidades base.';
      Text007@1006 : TextConst 'ENU=You cannot ship more than %1 units.;ESP=No se pueden enviar m s de %1 unidades.';
      Text008@1007 : TextConst 'ENU=You cannot ship more than %1 base units.;ESP=No se pueden enviar m s de %1 unidades base.';
      Text009@1008 : TextConst 'ENU=" must be 0 when %1 is %2";ESP=" debe ser 0 cuando %1 es %2"';
      ManualReserveQst@1010 : TextConst 'ENU=Automatic reservation is not possible.\Do you want to reserve items manually?;ESP=No se puede reservar autom ticamente.\¨Desea reservar los productos manualmente?';
      Text014@1013 : TextConst 'ENU=%1 %2 is before work date %3;ESP=%1 %2 es antes de la fecha trab. %3';
      Text016@1040 : TextConst 'ENU="%1 is required for %2 = %3.";ESP="Se requiere %1 para %2 = %3."';
      WhseRequirementMsg@1044 : TextConst '@@@="%1=Document";ENU=%1 is required for this line. The entered information may be disregarded by warehouse activities.;ESP=%1 se requiere para esta l¡nea. La informaci¢n introducida puede ser ignorada por las actividades de almac‚n.';
      Text020@1019 : TextConst 'ENU=You cannot return more than %1 units.;ESP=No puede devolver m s de %1 unidades.';
      Text021@1020 : TextConst 'ENU=You cannot return more than %1 base units.;ESP=No puede dev. m s del %1 unidades base.';
      Text026@1025 : TextConst 'ENU=You cannot change %1 if the item charge has already been posted.;ESP=No puede cambiar %1 si el cargo prod. ya ha sido registrado.';
      CurrExchRate@1030 : Record 330;
      SalesHeader@1031 : Record 36;
      SalesLine2@1032 : Record 37;
      GLAcc@1035 : Record 15;
      Resource@1400 : Record 156;
      Currency@1037 : Record 4;
      Res@1043 : Record 156;
      ResCost@1045 : Record 202;
      VATPostingSetup@1048 : Record 325;
      GenBusPostingGrp@1050 : Record 250;
      GenProdPostingGrp@1051 : Record 251;
      UnitOfMeasure@1054 : Record 204;
      NonstockItem@1058 : Record 5718;
      SKU@1060 : Record 5700;
      ItemCharge@1061 : Record 5800;
      InvtSetup@1063 : Record 313;
      Location@1064 : Record 14;
      ATOLink@1016 : Record 904;
      SalesSetup@1065 : Record 311;
      TempItemTemplate@1099 : TEMPORARY Record 1301;
      CalChange@1052 : Record 7602;
      ConfigTemplateHeader@1057 : Record 8618;
      TempErrorMessage@1036 : TEMPORARY Record 700;
      PriceCalcMgt@1071 : Codeunit 7000;
      CustCheckCreditLimit@1074 : Codeunit 312;
      ItemCheckAvail@1075 : Codeunit 311;
      SalesTaxCalculate@1076 : Codeunit 398;
      ReserveSalesLine@1079 : Codeunit 99000832;
      UOMMgt@1080 : Codeunit 5402;
      AddOnIntegrMgt@1081 : Codeunit 5403;
      DimMgt@1082 : Codeunit 408;
      ItemSubstitutionMgt@1085 : Codeunit 5701;
      DistIntegration@1086 : Codeunit 5702;
      CatalogItemMgt@1087 : Codeunit 5703;
      WhseValidateSourceLine@1088 : Codeunit 5777;
      TransferExtendedText@1100 : Codeunit 378;
      DeferralUtilities@1026 : Codeunit 1720;
      CalendarMgmt@1056 : Codeunit 7600;
      PostingSetupMgt@1068 : Codeunit 48;
      FullAutoReservation@1092 : Boolean;
      StatusCheckSuspended@1094 : Boolean;
      HasBeenShown@1018 : Boolean;
      PlannedShipmentDateCalculated@1012 : Boolean;
      PlannedDeliveryDateCalculated@1070 : Boolean;
      Text028@1098 : TextConst 'ENU=You cannot change the %1 when the %2 has been filled in.;ESP=No puede cambiar %1 despu‚s de introducir datos en %2.';
      Text029@1021 : TextConst 'ENU=must be positive;ESP=debe ser positivo';
      Text030@1042 : TextConst 'ENU=must be negative;ESP=debe ser negativo';
      Text031@1093 : TextConst 'ENU=You must either specify %1 or %2.;ESP=Debe especificar %1 o %2.';
      Text034@1084 : TextConst 'ENU=The value of %1 field must be a whole number for the item included in the service item group if the %2 field in the Service Item Groups window contains a check mark.;ESP=El valor del campo %1 debe ser un n£mero entero correspondiente al producto incluido en el grupo de productos de servicio si est  activada la casilla de verificaci¢n del campo %2 en la ventana Grupos producto servicio.';
      Text035@1083 : TextConst 'ENU="Warehouse ";ESP="Almac‚n "';
      Text036@1090 : TextConst 'ENU="Inventory ";ESP="Inventario "';
      HideValidationDialog@1109 : Boolean;
      Text037@1009 : TextConst 'ENU=You cannot change %1 when %2 is %3 and %4 is positive.;ESP=No puede cambiar el %1 cuando la %2 es %3 y la %4 es positiva.';
      Text038@1014 : TextConst 'ENU=You cannot change %1 when %2 is %3 and %4 is negative.;ESP=No puede cambiar el %1 cuando la %2 es %3 y la %4 es negativa.';
      Text039@1034 : TextConst 'ENU=%1 units for %2 %3 have already been returned. Therefore, only %4 units can be returned.;ESP=%1 unidades para el %2 %3 ya se han devuelto. Por lo tanto, s¢lo se pueden devolver %4 unidades.';
      Text040@1039 : TextConst 'ENU=You must use form %1 to enter %2, if item tracking is used.;ESP=Utilice el formulario %1 para insertar %2, si se utiliza el seguimiento de productos.';
      Text042@1055 : TextConst 'ENU=When posting the Applied to Ledger Entry %1 will be opened first;ESP=Al registrar, se abrir  primero Liq. por mov. producto %1';
      ShippingMoreUnitsThanReceivedErr@1047 : TextConst 'ENU=You cannot ship more than the %1 units that you have received for document no. %2.;ESP=No se puede enviar m s de %1 unidades que se hayan recibido para el documento n§ %2.';
      Text044@1103 : TextConst 'ENU=cannot be less than %1;ESP=no puede ser inferior a %1';
      Text045@1104 : TextConst 'ENU=cannot be more than %1;ESP=no puede ser superior a %1';
      Text046@1105 : TextConst 'ENU=You cannot return more than the %1 units that you have shipped for %2 %3.;ESP=No puede devolver m s de las %1 unidades enviadas para el %2 %3.';
      Text047@1106 : TextConst 'ENU=must be positive when %1 is not 0.;ESP=debe ser positivo cuando %1 no es 0.';
      Text048@1108 : TextConst 'ENU=You cannot use item tracking on a %1 created from a %2.;ESP=No puede utilizar el seguimiento de productos en una %1 creada desde un %2.';
      Text049@1139 : TextConst 'ENU=cannot be %1.;ESP=no puede ser %1.';
      Text051@1141 : TextConst 'ENU=You cannot use %1 in a %2.;ESP=No puede usar %1 en un %2.';
      PrePaymentLineAmountEntered@1015 : Boolean;
      Text052@1022 : TextConst 'ENU=You cannot add an item line because an open warehouse shipment exists for the sales header and Shipping Advice is %1.\\You must add items as new lines to the existing warehouse shipment or change Shipping Advice to Partial.;ESP=No puede agregar una l¡nea de producto porque existe un env¡o de almac‚n abierto para la Cabecera venta y el Aviso env¡o es %1.\\Debe agregar productos como l¡neas nuevas en el env¡o de almac‚n existente o cambiar el Aviso env¡o a Parcial.';
      Text053@1017 : TextConst 'ENU=You have changed one or more dimensions on the %1, which is already shipped. When you post the line with the changed dimension to General Ledger, amounts on the Inventory Interim account will be out of balance when reported per dimension.\\Do you want to keep the changed dimension?;ESP=Ha modificado una o varias dimensiones de %1, que ya se ha enviado. Al registrar la l¡nea con la dimensi¢n modificada en la contabilidad, los importes de la cuenta provisional de inventario no cuadrar n cuando se notifiquen por dimensi¢n.\\¨Desea conservar la dimensi¢n modificada?';
      Text054@1023 : TextConst 'ENU=Cancelled.;ESP=Cancelado.';
      Text055@1024 : TextConst '@@@=Quantity Invoiced must not be greater than the sum of Qty. Assigned and Qty. to Assign.;ENU=%1 must not be greater than the sum of %2 and %3.;ESP=%1 no debe ser superior a la suma de %2 y %3.';
      Text056@1011 : TextConst 'ENU=You cannot add an item line because an open inventory pick exists for the Sales Header and because Shipping Advice is %1.\\You must first post or delete the inventory pick or change Shipping Advice to Partial.;ESP=No puede agregar una l¡nea de producto porque existe un picking inventario para la Cabecera venta y porque el Aviso env¡o es %1.\\Primero debe registrar o eliminar el picking inventario o cambiar el Aviso env¡o a Parcial.';
      Text057@1027 : TextConst 'ENU=must have the same sign as the shipment;ESP=debe tener el mismo signo que el env¡o.';
      Text058@1028 : TextConst 'ENU=The quantity that you are trying to invoice is greater than the quantity in shipment %1.;ESP=La cantidad que est  intentando facturar es mayor que la cantidad en el env¡o %1.';
      Text059@1029 : TextConst 'ENU=must have the same sign as the return receipt;ESP=debe tener el mismo nombre que la recep. dev.';
      Text060@1041 : TextConst 'ENU=The quantity that you are trying to invoice is greater than the quantity in return receipt %1.;ESP=La cantidad que est  intentando facturar es mayor que la cantidad en la recepci¢n de devoluci¢n %1.';
      ItemChargeAssignmentErr@1097 : TextConst 'ENU=You can only assign Item Charges for Line Types of Charge (Item).;ESP=Solo puede asignar cargos de producto a los tipos de cargo de l¡nea (producto).';
      SalesLineCompletelyShippedErr@1053 : TextConst 'ENU=You cannot change the purchasing code for a sales line that has been completely shipped.;ESP=No es posible modificar el c¢digo de compra para una l¡nea de venta que se ha enviado por completo.';
      SalesSetupRead@1067 : Boolean;
      LookupRequested@1059 : Boolean;
      FreightLineDescriptionTxt@1033 : TextConst 'ENU=Freight Amount;ESP=Importe de flete';
      CannotFindDescErr@1200 : TextConst '@@@="%1 = Type caption %2 = Description";ENU=Cannot find %1 with Description %2.\\Make sure to use the correct type.;ESP=No se encuentra %1 con la descripci¢n %2.\\Aseg£rese de usar el tipo correcto.';
      PriceDescriptionTxt@1038 : TextConst '@@@={Locked};ENU=x%1 (%2%3/%4);ESP=x%1 (%2%3/%4)';
      PriceDescriptionWithLineDiscountTxt@1066 : TextConst '@@@={Locked};ENU=x%1 (%2%3/%4) - %5%;ESP=x%1 (%2%3/%4) - %5%';
      SelectNonstockItemErr@1062 : TextConst 'ENU=You can only select a catalog item for an empty line.;ESP=Solo puede seleccionar un producto del cat logo para una l¡nea vac¡a.';
      EstimateLbl@1072 : TextConst 'ENU=Estimate;ESP=Estimar';
      CommentLbl@1046 : TextConst 'ENU=Comment;ESP=Comentario';
      LineDiscountPctErr@1073 : TextConst 'ENU=The value in the Line Discount % field must be between 0 and 100.;ESP=El valor en el campo % Descuento l¡nea debe ser entre 0 y 100.';
      SalesBlockedErr@1077 : TextConst 'ENU=You cannot sell this item because the Sales Blocked check box is selected on the item card.;ESP=No puede vender este producto porque la casilla Ventas bloqueadas est  seleccionada en la ficha de producto.';
      CannotChangePrepaidServiceChargeErr@1078 : TextConst 'ENU=You cannot change the line because it will affect service charges that are already invoiced as part of a prepayment.;ESP=No puede cambiar la l¡nea porque afectar  a los cargos por servicios que ya se han facturado como parte de un prepago.';
      LineAmountInvalidErr@1089 : TextConst 'ENU=You have set the line amount to a value that results in a discount that is not valid. Consider increasing the unit price instead.;ESP=Ha establecido la cantidad de l¡neas para un valor que da como resultado un descuento que no es v lido. En su lugar, considere un aumento del precio unitario.';
      GestCodigoLinVenta@1170170000 : Codeunit 7014617;
      LineInvoiceDiscountAmountResetTok@1096 : TextConst '@@@=%1 - Record ID;ENU=The value in the Inv. Discount Amount field in %1 has been cleared.;ESP=Se ha borrado el valor del campo Importe dto. factura de %1.';
      UnitPriceChangedMsg@1091 : TextConst '@@@="%1 = Type caption %2 = No.";ENU=The unit price for %1 %2 that was copied from the posted document has been changed.;ESP=Se ha modificado el precio unitario de %1 %2 que se copi¢ del documento registrado.';
      FuncionesBAINES@1170000000 : Codeunit 50000;
      Error001@1170000001 : TextConst 'ESP=Las l¡neas de IVA desglosado deben pertenecer a productos con Listas de materiales.';
      Error002@1170000002 : TextConst 'ESP=Los productos de la lista de materiales deben tener especificado un precio de referencia.';
      Error003@1170000004 : TextConst 'ESP=Las l¡neas con IVA desglosado no pueden tener precios con IVA Incluido.';
      Error004@1170000003 : TextConst 'ESP=Las l¡neas con IVA desglosado solo pueden tener el tipo de calculo IVA Normal.';

    [External]
    PROCEDURE InitOutstanding@16();
    BEGIN
      IF IsCreditDocType THEN BEGIN
        "Outstanding Quantity" := Quantity - "Return Qty. Received";
        "Outstanding Qty. (Base)" := "Quantity (Base)" - "Return Qty. Received (Base)";
        "Return Qty. Rcd. Not Invd." := "Return Qty. Received" - "Quantity Invoiced";
        "Ret. Qty. Rcd. Not Invd.(Base)" := "Return Qty. Received (Base)" - "Qty. Invoiced (Base)";
      END ELSE BEGIN
        "Outstanding Quantity" := Quantity - "Quantity Shipped";
        "Outstanding Qty. (Base)" := "Quantity (Base)" - "Qty. Shipped (Base)";
        "Qty. Shipped Not Invoiced" := "Quantity Shipped" - "Quantity Invoiced";
        "Qty. Shipped Not Invd. (Base)" := "Qty. Shipped (Base)" - "Qty. Invoiced (Base)";
      END;
      OnAfterInitOutstandingQty(Rec);
      UpdatePlanned;
      "Completely Shipped" := (Quantity <> 0) AND ("Outstanding Quantity" = 0);
      InitOutstandingAmount;

      OnAfterInitOutstanding(Rec);
    END;

    [External]
    PROCEDURE InitOutstandingAmount@17();
    VAR
      AmountInclVAT@1000 : Decimal;
    BEGIN
      IF Quantity = 0 THEN BEGIN
        "Outstanding Amount" := 0;
        "Outstanding Amount (LCY)" := 0;
        "Shipped Not Invoiced" := 0;
        "Shipped Not Invoiced (LCY)" := 0;
        "Return Rcd. Not Invd." := 0;
        "Return Rcd. Not Invd. (LCY)" := 0;
      END ELSE BEGIN
        GetSalesHeader;
        AmountInclVAT := "Amount Including VAT";
        VALIDATE(
          "Outstanding Amount",
          ROUND(
            AmountInclVAT * "Outstanding Quantity" / Quantity,
            Currency."Amount Rounding Precision"));
        IF IsCreditDocType THEN
          VALIDATE(
            "Return Rcd. Not Invd.",
            ROUND(
              AmountInclVAT * "Return Qty. Rcd. Not Invd." / Quantity,
              Currency."Amount Rounding Precision"))
        ELSE
          VALIDATE(
            "Shipped Not Invoiced",
            ROUND(
              AmountInclVAT * "Qty. Shipped Not Invoiced" / Quantity,
              Currency."Amount Rounding Precision"));
      END;

      OnAfterInitOutstandingAmount(Rec,SalesHeader,Currency);
    END;

    [External]
    PROCEDURE InitQtyToShip@15();
    BEGIN
      GetSalesSetup;
      IF (SalesSetup."Default Quantity to Ship" = SalesSetup."Default Quantity to Ship"::Remainder) OR
         ("Document Type" = "Document Type"::Invoice)
      THEN BEGIN
        "Qty. to Ship" := "Outstanding Quantity";
        "Qty. to Ship (Base)" := "Outstanding Qty. (Base)";
      END ELSE
        IF "Qty. to Ship" <> 0 THEN
          "Qty. to Ship (Base)" := CalcBaseQty("Qty. to Ship");

      CheckServItemCreation;

      OnAfterInitQtyToShip(Rec,CurrFieldNo);

      InitQtyToInvoice;
    END;

    [External]
    PROCEDURE InitQtyToReceive@5803();
    BEGIN
      GetSalesSetup;
      IF (SalesSetup."Default Quantity to Ship" = SalesSetup."Default Quantity to Ship"::Remainder) OR
         ("Document Type" = "Document Type"::"Credit Memo")
      THEN BEGIN
        "Return Qty. to Receive" := "Outstanding Quantity";
        "Return Qty. to Receive (Base)" := "Outstanding Qty. (Base)";
      END ELSE
        IF "Return Qty. to Receive" <> 0 THEN
          "Return Qty. to Receive (Base)" := CalcBaseQty("Return Qty. to Receive");

      OnAfterInitQtyToReceive(Rec,CurrFieldNo);

      InitQtyToInvoice;
    END;

    [External]
    PROCEDURE InitQtyToInvoice@13();
    BEGIN
      "Qty. to Invoice" := MaxQtyToInvoice;
      "Qty. to Invoice (Base)" := MaxQtyToInvoiceBase;
      "VAT Difference" := 0;
      "EC Difference" := 0;

      OnBeforeCalcInvDiscToInvoice(Rec,CurrFieldNo);
      CalcInvDiscToInvoice;
      IF SalesHeader."Document Type" <> SalesHeader."Document Type"::Invoice THEN
        CalcPrepaymentToDeduct;

      OnAfterInitQtyToInvoice(Rec,CurrFieldNo);
    END;

    LOCAL PROCEDURE InitItemAppl@40(OnlyApplTo@1000 : Boolean);
    BEGIN
      "Appl.-to Item Entry" := 0;
      IF NOT OnlyApplTo THEN
        "Appl.-from Item Entry" := 0;
    END;

    [External]
    PROCEDURE MaxQtyToInvoice@18() : Decimal;
    VAR
      MaxQty@1002 : Decimal;
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeMaxQtyToInvoice(Rec,MaxQty,IsHandled);
      IF IsHandled THEN
        EXIT(MaxQty);

      IF "Prepayment Line" THEN
        EXIT(1);

      IF IsCreditDocType THEN
        EXIT("Return Qty. Received" + "Return Qty. to Receive" - "Quantity Invoiced");

      EXIT("Quantity Shipped" + "Qty. to Ship" - "Quantity Invoiced");
    END;

    [External]
    PROCEDURE MaxQtyToInvoiceBase@19() : Decimal;
    VAR
      MaxQtyBase@1001 : Decimal;
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeMaxQtyToInvoiceBase(Rec,MaxQtyBase,IsHandled);
      IF IsHandled THEN
        EXIT(MaxQtyBase);

      IF IsCreditDocType THEN
        EXIT("Return Qty. Received (Base)" + "Return Qty. to Receive (Base)" - "Qty. Invoiced (Base)");

      EXIT("Qty. Shipped (Base)" + "Qty. to Ship (Base)" - "Qty. Invoiced (Base)");
    END;

    LOCAL PROCEDURE CalcBaseQty@14(Qty@1000 : Decimal) : Decimal;
    BEGIN
      TESTFIELD("Qty. per Unit of Measure");
      EXIT(ROUND(Qty * "Qty. per Unit of Measure",UOMMgt.QtyRndPrecision));
    END;

    [External]
    PROCEDURE CalcLineAmount@163() LineAmount : Decimal;
    BEGIN
      LineAmount := "Line Amount" - "Inv. Discount Amount";

      OnAfterCalcLineAmount(Rec,LineAmount);
    END;

    LOCAL PROCEDURE CopyFromStandardText@131();
    VAR
      StandardText@1000 : Record 7;
    BEGIN
      StandardText.GET("No.");
      Description := StandardText.Description;
      "Allow Item Charge Assignment" := FALSE;
      OnAfterAssignStdTxtValues(Rec,StandardText);
    END;

    LOCAL PROCEDURE CopyFromGLAccount@142();
    BEGIN
      GLAcc.GET("No.");
      GLAcc.CheckGLAcc;
      IF NOT "System-Created Entry" THEN
        GLAcc.TESTFIELD("Direct Posting",TRUE);
      Description := GLAcc.Name;
      "Gen. Prod. Posting Group" := GLAcc."Gen. Prod. Posting Group";
      "VAT Prod. Posting Group" := GLAcc."VAT Prod. Posting Group";
      "Tax Group Code" := GLAcc."Tax Group Code";
      "Allow Invoice Disc." := NOT GLAcc.InvoiceDiscountAllowed("No.");
      "Allow Item Charge Assignment" := FALSE;
      InitDeferralCode;
      OnAfterAssignGLAccountValues(Rec,GLAcc);
    END;

    LOCAL PROCEDURE CopyFromItem@144();
    VAR
      Item@1001 : Record 27;
      PrepaymentMgt@1000 : Codeunit 441;
      IsHandled@1002 : Boolean;
    BEGIN
      GetItem(Item);
      IsHandled := FALSE;
      OnBeforeCopyFromItem(Rec,Item,IsHandled);
      IF NOT IsHandled THEN BEGIN
        Item.TESTFIELD(Blocked,FALSE);
        Item.TESTFIELD("Gen. Prod. Posting Group");
        IF Item."Sales Blocked" AND NOT IsCreditDocType THEN
          ERROR(SalesBlockedErr);
        IF Item.Type = Item.Type::Inventory THEN BEGIN
          Item.TESTFIELD("Inventory Posting Group");
          "Posting Group" := Item."Inventory Posting Group";
        END;
      END;

      OnCopyFromItemOnAfterCheck(Rec,Item);

      Description := Item.Description;
      "Description 2" := Item."Description 2";
      GetUnitCost;
      "Allow Invoice Disc." := Item."Allow Invoice Disc.";
      "Units per Parcel" := Item."Units per Parcel";
      "Gen. Prod. Posting Group" := Item."Gen. Prod. Posting Group";
      "VAT Prod. Posting Group" := Item."VAT Prod. Posting Group";
      "Tax Group Code" := Item."Tax Group Code";
      "Item Category Code" := Item."Item Category Code";
      Nonstock := Item."Created From Nonstock Item";
      "Profit %" := Item."Profit %";
      "Allow Item Charge Assignment" := TRUE;
      PrepaymentMgt.SetSalesPrepaymentPct(Rec,SalesHeader."Posting Date");
      IF Item.Type = Item.Type::Inventory THEN
        PostingSetupMgt.CheckInvtPostingSetupInventoryAccount("Location Code","Posting Group");

      IF SalesHeader."Language Code" <> '' THEN
        GetItemTranslation;

      IF Item.Reserve = Item.Reserve::Optional THEN
        Reserve := SalesHeader.Reserve
      ELSE
        Reserve := Item.Reserve;

      "Unit of Measure Code" := Item."Sales Unit of Measure";
      OnAfterCopyFromItem(Rec,Item);

      InitDeferralCode;
      SetDefaultItemQuantity;
      OnAfterAssignItemValues(Rec,Item);
    END;

    LOCAL PROCEDURE CopyFromResource@146();
    BEGIN
      Res.GET("No.");
      Res.CheckResourcePrivacyBlocked(FALSE);
      Res.TESTFIELD(Blocked,FALSE);
      Res.TESTFIELD("Gen. Prod. Posting Group");
      Description := Res.Name;
      "Description 2" := Res."Name 2";
      "Unit of Measure Code" := Res."Base Unit of Measure";
      "Unit Cost (LCY)" := Res."Unit Cost";
      "Gen. Prod. Posting Group" := Res."Gen. Prod. Posting Group";
      "VAT Prod. Posting Group" := Res."VAT Prod. Posting Group";
      "Tax Group Code" := Res."Tax Group Code";
      "Allow Item Charge Assignment" := FALSE;
      FindResUnitCost;
      InitDeferralCode;
      OnAfterAssignResourceValues(Rec,Res);
    END;

    LOCAL PROCEDURE CopyFromFixedAsset@148();
    VAR
      FixedAsset@1000 : Record 5600;
    BEGIN
      FixedAsset.GET("No.");
      FixedAsset.TESTFIELD(Inactive,FALSE);
      FixedAsset.TESTFIELD(Blocked,FALSE);
      GetFAPostingGroup;
      Description := FixedAsset.Description;
      "Description 2" := FixedAsset."Description 2";
      "Allow Invoice Disc." := FALSE;
      "Allow Item Charge Assignment" := FALSE;
      OnAfterAssignFixedAssetValues(Rec,FixedAsset);
    END;

    LOCAL PROCEDURE CopyFromItemCharge@150();
    BEGIN
      ItemCharge.GET("No.");
      Description := ItemCharge.Description;
      "Gen. Prod. Posting Group" := ItemCharge."Gen. Prod. Posting Group";
      "VAT Prod. Posting Group" := ItemCharge."VAT Prod. Posting Group";
      "Tax Group Code" := ItemCharge."Tax Group Code";
      "Allow Invoice Disc." := FALSE;
      "Allow Item Charge Assignment" := FALSE;
      OnAfterAssignItemChargeValues(Rec,ItemCharge);
    END;

    LOCAL PROCEDURE SelectItemEntry@8(CurrentFieldNo@1000 : Integer);
    VAR
      ItemLedgEntry@1001 : Record 32;
      SalesLine3@1002 : Record 37;
    BEGIN
      ItemLedgEntry.SETRANGE("Item No.","No.");
      IF "Location Code" <> '' THEN
        ItemLedgEntry.SETRANGE("Location Code","Location Code");
      ItemLedgEntry.SETRANGE("Variant Code","Variant Code");

      IF CurrentFieldNo = FIELDNO("Appl.-to Item Entry") THEN BEGIN
        ItemLedgEntry.SETCURRENTKEY("Item No.",Open);
        ItemLedgEntry.SETRANGE(Positive,TRUE);
        ItemLedgEntry.SETRANGE(Open,TRUE);
      END ELSE BEGIN
        ItemLedgEntry.SETCURRENTKEY("Item No.",Positive);
        ItemLedgEntry.SETRANGE(Positive,FALSE);
        ItemLedgEntry.SETFILTER("Shipped Qty. Not Returned",'<0');
      END;
      IF PAGE.RUNMODAL(PAGE::"Item Ledger Entries",ItemLedgEntry) = ACTION::LookupOK THEN BEGIN
        SalesLine3 := Rec;
        IF CurrentFieldNo = FIELDNO("Appl.-to Item Entry") THEN
          SalesLine3.VALIDATE("Appl.-to Item Entry",ItemLedgEntry."Entry No.")
        ELSE
          SalesLine3.VALIDATE("Appl.-from Item Entry",ItemLedgEntry."Entry No.");
        CheckItemAvailable(CurrentFieldNo);
        Rec := SalesLine3;
      END;
    END;

    [External]
    PROCEDURE SetSalesHeader@24(NewSalesHeader@1000 : Record 36);
    BEGIN
      SalesHeader := NewSalesHeader;

      IF SalesHeader."Currency Code" = '' THEN
        Currency.InitRoundingPrecision
      ELSE BEGIN
        SalesHeader.TESTFIELD("Currency Factor");
        Currency.GET(SalesHeader."Currency Code");
        Currency.TESTFIELD("Amount Rounding Precision");
      END;
    END;

    [External]
    PROCEDURE GetSalesHeader@1();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      OnBeforeGetSalesHeader(Rec,SalesHeader,IsHandled);
      IF IsHandled THEN
        EXIT;

      TESTFIELD("Document No.");
      IF ("Document Type" <> SalesHeader."Document Type") OR ("Document No." <> SalesHeader."No.") THEN BEGIN
        SalesHeader.GET("Document Type","Document No.");
        IF SalesHeader."Currency Code" = '' THEN
          Currency.InitRoundingPrecision
        ELSE BEGIN
          SalesHeader.TESTFIELD("Currency Factor");
          Currency.GET(SalesHeader."Currency Code");
          Currency.TESTFIELD("Amount Rounding Precision");
        END;
      END;

      OnAfterGetSalesHeader(Rec,SalesHeader,Currency);
    END;

    LOCAL PROCEDURE GetItem@9(VAR Item@1000 : Record 27);
    BEGIN
      TESTFIELD("No.");
      Item.GET("No.");
    END;

    LOCAL PROCEDURE GetResource@49();
    BEGIN
      TESTFIELD("No.");
      IF "No." <> Resource."No." THEN
        Resource.GET("No.");
    END;

    [External]
    PROCEDURE UpdateUnitPrice@2(CalledByFieldNo@1000 : Integer);
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeUpdateUnitPrice(Rec,xRec,CalledByFieldNo,CurrFieldNo,IsHandled);
      IF IsHandled THEN
        EXIT;

      GetSalesHeader;
      TESTFIELD("Qty. per Unit of Measure");

      CASE Type OF
        Type::Item,
        Type::Resource:
          BEGIN
            IsHandled := FALSE;
            OnUpdateUnitPriceOnBeforeFindPrice(SalesHeader,Rec,CalledByFieldNo,CurrFieldNo,IsHandled);
            IF NOT IsHandled THEN BEGIN
              IF NOT ("Copied From Posted Doc." AND IsCreditDocType) THEN
                PriceCalcMgt.FindSalesLineLineDisc(SalesHeader,Rec);
              PriceCalcMgt.FindSalesLinePrice(SalesHeader,Rec,CalledByFieldNo);
            END;
          END;
      END;

      IF "Copied From Posted Doc." AND IsCreditDocType AND ("Appl.-from Item Entry" <> 0) THEN
        IF xRec."Unit Price" <> "Unit Price" THEN
          IF GUIALLOWED THEN
            ShowMessageOnce(STRSUBSTNO(UnitPriceChangedMsg,Type,"No."));

      VALIDATE("Unit Price");

      OnAfterUpdateUnitPrice(Rec,xRec,CalledByFieldNo,CurrFieldNo);
    END;

    LOCAL PROCEDURE ShowMessageOnce@229(MessageText@1000 : Text);
    BEGIN
      TempErrorMessage.SetContext(Rec);
      IF TempErrorMessage.FindRecord(RECORDID,0,TempErrorMessage."Message Type"::Warning,MessageText) = 0 THEN BEGIN
        TempErrorMessage.LogMessage(Rec,0,TempErrorMessage."Message Type"::Warning,MessageText);
        MESSAGE(MessageText);
      END;
    END;

    [External]
    PROCEDURE FindResUnitCost@5();
    BEGIN
      ResCost.INIT;
      ResCost.Code := "No.";
      ResCost."Work Type Code" := "Work Type Code";
      CODEUNIT.RUN(CODEUNIT::"Resource-Find Cost",ResCost);
      OnAfterFindResUnitCost(Rec,ResCost);
      VALIDATE("Unit Cost (LCY)",ResCost."Unit Cost" * "Qty. per Unit of Measure");
    END;

    [External]
    PROCEDURE UpdatePrepmtSetupFields@102();
    VAR
      GenPostingSetup@1001 : Record 252;
      GLAcc@1000 : Record 15;
      IsHandled@1002 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeUpdatePrepmtSetupFields(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF ("Prepayment %" <> 0) AND (Type <> Type::" ") THEN BEGIN
        TESTFIELD("Document Type","Document Type"::Order);
        TESTFIELD("No.");
        IF CurrFieldNo = FIELDNO("Prepayment %") THEN
          IF "System-Created Entry" AND NOT IsServiceCharge THEN
            FIELDERROR("Prepmt. Line Amount",STRSUBSTNO(Text045,0));
        IF "System-Created Entry" AND NOT IsServiceCharge THEN
          "Prepayment %" := 0;
        GenPostingSetup.GET("Gen. Bus. Posting Group","Gen. Prod. Posting Group");
        IF GenPostingSetup."Sales Prepayments Account" <> '' THEN BEGIN
          GLAcc.GET(GenPostingSetup."Sales Prepayments Account");
          VATPostingSetup.GET("VAT Bus. Posting Group",GLAcc."VAT Prod. Posting Group");
          VATPostingSetup.TESTFIELD("VAT Calculation Type","VAT Calculation Type");
        END ELSE
          CLEAR(VATPostingSetup);
        "Prepayment VAT %" := VATPostingSetup."VAT %";
        "Prepayment EC %" := VATPostingSetup."EC %";
        "Prepmt. VAT Calc. Type" := VATPostingSetup."VAT Calculation Type";
        "Prepayment VAT Identifier" := VATPostingSetup."VAT Identifier";
        IF "Prepmt. VAT Calc. Type" IN
           ["Prepmt. VAT Calc. Type"::"Reverse Charge VAT","Prepmt. VAT Calc. Type"::"Sales Tax"]
        THEN BEGIN
          "Prepayment VAT %" := 0;
          "Prepayment EC %" := 0;
        END;
        "Prepayment Tax Group Code" := GLAcc."Tax Group Code";
      END;
    END;

    LOCAL PROCEDURE UpdatePrepmtAmounts@197();
    VAR
      RemLineAmountToInvoice@1000 : Decimal;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeUpdatePrepmtAmounts(Rec,SalesHeader,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF "Prepayment %" <> 0 THEN BEGIN
        IF Quantity < 0 THEN
          FIELDERROR(Quantity,STRSUBSTNO(Text047,FIELDCAPTION("Prepayment %")));
        IF "Unit Price" < 0 THEN
          FIELDERROR("Unit Price",STRSUBSTNO(Text047,FIELDCAPTION("Prepayment %")));
      END;
      IF SalesHeader."Document Type" <> SalesHeader."Document Type"::Invoice THEN BEGIN
        "Prepayment VAT Difference" := 0;
        IF NOT PrePaymentLineAmountEntered THEN
          "Prepmt. Line Amount" := ROUND("Line Amount" * "Prepayment %" / 100,Currency."Amount Rounding Precision");
        IF "Prepmt. Line Amount" < "Prepmt. Amt. Inv." THEN BEGIN
          IF IsServiceCharge THEN
            ERROR(CannotChangePrepaidServiceChargeErr);
          FIELDERROR("Prepmt. Line Amount",STRSUBSTNO(Text049,"Prepmt. Amt. Inv."));
        END;
        PrePaymentLineAmountEntered := FALSE;
        IF "Prepmt. Line Amount" <> 0 THEN BEGIN
          RemLineAmountToInvoice :=
            ROUND("Line Amount" * (Quantity - "Quantity Invoiced") / Quantity,Currency."Amount Rounding Precision");
          IF RemLineAmountToInvoice < ("Prepmt. Line Amount" - "Prepmt Amt Deducted") THEN
            FIELDERROR("Prepmt. Line Amount",STRSUBSTNO(Text045,RemLineAmountToInvoice + "Prepmt Amt Deducted"));
        END;
      END ELSE
        IF (CurrFieldNo <> 0) AND ("Line Amount" <> xRec."Line Amount") AND
           ("Prepmt. Amt. Inv." <> 0) AND ("Prepayment %" = 100)
        THEN BEGIN
          IF "Line Amount" < xRec."Line Amount" THEN
            FIELDERROR("Line Amount",STRSUBSTNO(Text044,xRec."Line Amount"));
          FIELDERROR("Line Amount",STRSUBSTNO(Text045,xRec."Line Amount"));
        END;
    END;

    [External]
    PROCEDURE UpdateAmounts@3();
    VAR
      VATBaseAmount@1003 : Decimal;
      LineAmountChanged@1002 : Boolean;
    BEGIN
      IF Type = Type::" " THEN
        EXIT;
      //++ BAIN-0067
      FuncionesBAINES.T37TestPromotion(CurrFieldNo,Rec);
      //-- BAIN-0067
      GetSalesHeader;
      VATBaseAmount := "VAT Base Amount";
      "Recalculate Invoice Disc." := TRUE;

      IF "Line Amount" <> xRec."Line Amount" THEN BEGIN
        "VAT Difference" := 0;
        LineAmountChanged := TRUE;
      END;
      IF "Line Amount" <> ROUND(Quantity * "Unit Price",Currency."Amount Rounding Precision") - "Line Discount Amount" THEN BEGIN
        "Line Amount" := ROUND(Quantity * "Unit Price",Currency."Amount Rounding Precision") - "Line Discount Amount";
        "VAT Difference" := 0;
        LineAmountChanged := TRUE;
        "EC Difference" := 0;
      END;

      IF NOT "Prepayment Line" THEN
        UpdatePrepmtAmounts;

      OnAfterUpdateAmounts(Rec,xRec,CurrFieldNo);

      UpdateVATAmounts;
      InitOutstandingAmount;
      CheckCreditLimit;

      IF Type = Type::"Charge (Item)" THEN
        UpdateItemChargeAssgnt;

      CalcPrepaymentToDeduct;
      IF VATBaseAmount <> "VAT Base Amount" THEN
        LineAmountChanged := TRUE;

      IF LineAmountChanged THEN BEGIN
        UpdateDeferralAmounts;
        LineAmountChanged := FALSE;
      END;

      OnAfterUpdateAmountsDone(Rec,xRec,CurrFieldNo);
    END;

    [External]
    PROCEDURE UpdateVATAmounts@38();
    VAR
      SalesLine2@1000 : Record 37;
      TotalLineAmount@1005 : Decimal;
      TotalInvDiscAmount@1004 : Decimal;
      TotalAmount@1001 : Decimal;
      TotalAmountInclVAT@1002 : Decimal;
      TotalQuantityBase@1003 : Decimal;
    BEGIN
      OnBeforeUpdateVATAmounts(Rec);

      GetSalesHeader;
      SalesLine2.SETRANGE("Document Type","Document Type");
      SalesLine2.SETRANGE("Document No.","Document No.");
      SalesLine2.SETFILTER("Line No.",'<>%1',"Line No.");
      SalesLine2.SETRANGE("VAT Identifier","VAT Identifier");
      SalesLine2.SETRANGE("Tax Group Code","Tax Group Code");

      IF "Line Amount" = "Inv. Discount Amount" THEN BEGIN
        Amount := 0;
        "VAT Base Amount" := 0;
        "Amount Including VAT" := 0;
        IF (Quantity = 0) AND (xRec.Quantity <> 0) AND (xRec.Amount <> 0) THEN BEGIN
          IF "Line No." <> 0 THEN
            MODIFY;
          SalesLine2.SETFILTER(Amount,'<>0');
          IF SalesLine2.FIND('<>') THEN BEGIN
            SalesLine2.ValidateLineDiscountPercent(FALSE);
            SalesLine2.MODIFY;
          END;
        END;
      END ELSE BEGIN
        TotalLineAmount := 0;
        TotalInvDiscAmount := 0;
        TotalAmount := 0;
        TotalAmountInclVAT := 0;
        TotalQuantityBase := 0;
        IF ("VAT Calculation Type" = "VAT Calculation Type"::"Sales Tax") OR
           (("VAT Calculation Type" IN
             ["VAT Calculation Type"::"Normal VAT","VAT Calculation Type"::"No Taxable VAT",
              "VAT Calculation Type"::"Reverse Charge VAT"]) AND ("VAT %" <> 0))
        THEN BEGIN
          SalesLine2.SETFILTER("VAT %",'<>0');
          IF NOT SalesLine2.ISEMPTY THEN BEGIN
            SalesLine2.CALCSUMS("Line Amount","Inv. Discount Amount",Amount,"Amount Including VAT","Quantity (Base)");
            TotalLineAmount := SalesLine2."Line Amount";
            TotalInvDiscAmount := SalesLine2."Inv. Discount Amount";
            TotalAmount := SalesLine2.Amount;
            TotalAmountInclVAT := SalesLine2."Amount Including VAT";
            TotalQuantityBase := SalesLine2."Quantity (Base)";
            OnAfterUpdateTotalAmounts(Rec,SalesLine2,TotalAmount,TotalAmountInclVAT,TotalLineAmount,TotalInvDiscAmount);
          END;
        END;

        IF SalesHeader."Prices Including VAT" THEN
          CASE "VAT Calculation Type" OF
            "VAT Calculation Type"::"Normal VAT",
            "VAT Calculation Type"::"Reverse Charge VAT",
            "VAT Calculation Type"::"No Taxable VAT":
              BEGIN
                Amount :=
                  ROUND(
                    (TotalLineAmount - TotalInvDiscAmount + CalcLineAmount) / (1 + ("VAT %" + "EC %") / 100),
                    Currency."Amount Rounding Precision") -
                  TotalAmount;
                "VAT Base Amount" :=
                  ROUND(
                    Amount * (1 - SalesHeader."VAT Base Discount %" / 100),
                    Currency."Amount Rounding Precision");
                "Amount Including VAT" :=
                  TotalLineAmount + "Line Amount" -
                  ROUND(
                    (TotalAmount + Amount) * (SalesHeader."VAT Base Discount %" / 100) * ("VAT %" + "EC %") / 100,
                    Currency."Amount Rounding Precision",Currency.VATRoundingDirection) -
                  TotalAmountInclVAT - TotalInvDiscAmount - "Inv. Discount Amount";
              END;
            "VAT Calculation Type"::"Full VAT":
              BEGIN
                Amount := 0;
                "VAT Base Amount" := 0;
              END;
            "VAT Calculation Type"::"Sales Tax":
              BEGIN
                SalesHeader.TESTFIELD("VAT Base Discount %",0);
                Amount :=
                  SalesTaxCalculate.ReverseCalculateTax(
                    "Tax Area Code","Tax Group Code","Tax Liable",SalesHeader."Posting Date",
                    TotalAmountInclVAT + "Amount Including VAT",TotalQuantityBase + "Quantity (Base)",
                    SalesHeader."Currency Factor") -
                  TotalAmount;
                OnAfterSalesTaxCalculateReverse(Rec,SalesHeader,Currency);
                UpdateVATPercent(Amount,"Amount Including VAT" - Amount);
                Amount := ROUND(Amount,Currency."Amount Rounding Precision");
                "VAT Base Amount" := Amount;
              END;
          END
        ELSE
          CASE "VAT Calculation Type" OF
            "VAT Calculation Type"::"Normal VAT",
            "VAT Calculation Type"::"Reverse Charge VAT",
            "VAT Calculation Type"::"No Taxable VAT":
              BEGIN
                Amount := ROUND(CalcLineAmount,Currency."Amount Rounding Precision");
                "VAT Base Amount" :=
                  ROUND(Amount * (1 - SalesHeader."VAT Base Discount %" / 100),Currency."Amount Rounding Precision");
                "Amount Including VAT" :=
                  TotalAmount + Amount +
                  ROUND(
                    (TotalAmount + Amount) * (1 - SalesHeader."VAT Base Discount %" / 100) * ("VAT %" + "EC %") / 100,
                    Currency."Amount Rounding Precision",Currency.VATRoundingDirection) -
                  TotalAmountInclVAT;
              END;
            "VAT Calculation Type"::"Full VAT":
              BEGIN
                Amount := 0;
                "VAT Base Amount" := 0;
                "Amount Including VAT" := CalcLineAmount;
              END;
            "VAT Calculation Type"::"Sales Tax":
              BEGIN
                Amount := ROUND(CalcLineAmount,Currency."Amount Rounding Precision");
                "VAT Base Amount" := Amount;
                "Amount Including VAT" :=
                  TotalAmount + Amount +
                  ROUND(
                    SalesTaxCalculate.CalculateTax(
                      "Tax Area Code","Tax Group Code","Tax Liable",SalesHeader."Posting Date",
                      TotalAmount + Amount,TotalQuantityBase + "Quantity (Base)",
                      SalesHeader."Currency Factor"),Currency."Amount Rounding Precision") -
                  TotalAmountInclVAT;
                OnAfterSalesTaxCalculate(Rec,SalesHeader,Currency);
                UpdateVATPercent("VAT Base Amount","Amount Including VAT" - "VAT Base Amount");
              END;
          END;
      END;

      OnAfterUpdateVATAmounts(Rec);
    END;

    [External]
    PROCEDURE CheckItemAvailable@4(CalledByFieldNo@1000 : Integer);
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeCheckItemAvailable(Rec,CalledByFieldNo,IsHandled,CurrFieldNo);
      IF IsHandled THEN
        EXIT;

      IF Reserve = Reserve::Always THEN
        EXIT;

      IF "Shipment Date" = 0D THEN BEGIN
        GetSalesHeader;
        IF SalesHeader."Shipment Date" <> 0D THEN
          VALIDATE("Shipment Date",SalesHeader."Shipment Date")
        ELSE
          VALIDATE("Shipment Date",WORKDATE);
      END;

      IF ((CalledByFieldNo = CurrFieldNo) OR (CalledByFieldNo = FIELDNO("Shipment Date"))) AND GUIALLOWED AND
         ("Document Type" IN ["Document Type"::Order,"Document Type"::Invoice]) AND
         (Type = Type::Item) AND ("No." <> '') AND
         ("Outstanding Quantity" > 0) AND
         ("Job Contract Entry No." = 0) AND
         NOT "Special Order"
      THEN BEGIN
        IF ItemCheckAvail.SalesLineCheck(Rec) THEN
          ItemCheckAvail.RaiseUpdateInterruptedError;
      END;
    END;

    LOCAL PROCEDURE CheckCreditLimit@204();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IF (CurrFieldNo <> 0) AND
         NOT ((Type = Type::Item) AND (CurrFieldNo = FIELDNO("No.")) AND (Quantity <> 0) AND
              ("Qty. per Unit of Measure" <> xRec."Qty. per Unit of Measure")) AND
         CheckCreditLimitCondition AND
         (("Outstanding Amount" + "Shipped Not Invoiced") > 0) AND
         (CurrFieldNo <> FIELDNO("Blanket Order No.")) AND
         (CurrFieldNo <> FIELDNO("Blanket Order Line No."))
      THEN BEGIN
        IsHandled := FALSE;
        OnUpdateAmountOnBeforeCheckCreditLimit(Rec,IsHandled);
        IF NOT IsHandled THEN
          CustCheckCreditLimit.SalesLineCheck(Rec);
      END;
    END;

    LOCAL PROCEDURE CheckCreditLimitCondition@186() : Boolean;
    VAR
      RunCheck@1000 : Boolean;
    BEGIN
      RunCheck := "Document Type" <= "Document Type"::Invoice;
      OnAfterCheckCreditLimitCondition(Rec,RunCheck);
      EXIT(RunCheck);
    END;

    [External]
    PROCEDURE ShowReservation@10();
    VAR
      Reservation@1000 : Page 498;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeShowReservation(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      TESTFIELD(Type,Type::Item);
      TESTFIELD("No.");
      TESTFIELD(Reserve);
      CLEAR(Reservation);
      Reservation.SetSalesLine(Rec);
      Reservation.RUNMODAL;
      UpdatePlanned;
    END;

    [External]
    PROCEDURE ShowReservationEntries@21(Modal@1000 : Boolean);
    VAR
      ReservEntry@1001 : Record 337;
      ReservEngineMgt@1002 : Codeunit 99000831;
      IsHandled@1003 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeShowReservationEntries(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      TESTFIELD(Type,Type::Item);
      TESTFIELD("No.");
      ReservEngineMgt.InitFilterAndSortingLookupFor(ReservEntry,TRUE);
      ReserveSalesLine.FilterReservFor(ReservEntry,Rec);
      IF Modal THEN
        PAGE.RUNMODAL(PAGE::"Reservation Entries",ReservEntry)
      ELSE
        PAGE.RUN(PAGE::"Reservation Entries",ReservEntry);
    END;

    [External]
    PROCEDURE AutoReserve@11();
    VAR
      SalesSetup@1003 : Record 311;
      ReservMgt@1002 : Codeunit 99000845;
      ConfirmManagement@1004 : Codeunit 27;
      QtyToReserve@1000 : Decimal;
      QtyToReserveBase@1001 : Decimal;
      IsHandled@1005 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeAutoReserve(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      TESTFIELD(Type,Type::Item);
      TESTFIELD("No.");

      ReserveSalesLine.ReservQuantity(Rec,QtyToReserve,QtyToReserveBase);
      IF QtyToReserveBase <> 0 THEN BEGIN
        ReservMgt.SetSalesLine(Rec);
        TESTFIELD("Shipment Date");
        ReservMgt.AutoReserve(FullAutoReservation,'',"Shipment Date",QtyToReserve,QtyToReserveBase);
        FIND;
        SalesSetup.GET;
        IF (NOT FullAutoReservation) AND (NOT SalesSetup."Skip Manual Reservation") THEN BEGIN
          COMMIT;
          IF ConfirmManagement.ConfirmProcessUI(ManualReserveQst,TRUE) THEN BEGIN
            ShowReservation;
            FIND;
          END;
        END;
      END;

      OnAfterAutoReserve(Rec);
    END;

    [External]
    PROCEDURE AutoAsmToOrder@82();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeAutoAsmToOrder(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      ATOLink.UpdateAsmFromSalesLine(Rec);

      OnAfterAutoAsmToOrder(Rec);
    END;

    LOCAL PROCEDURE GetDate@22() : Date;
    BEGIN
      GetSalesHeader;
      IF SalesHeader."Posting Date" <> 0D THEN
        EXIT(SalesHeader."Posting Date");
      EXIT(WORKDATE);
    END;

    [External]
    PROCEDURE CalcPlannedDeliveryDate@92(CurrFieldNo@1000 : Integer) PlannedDeliveryDate : Date;
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      PlannedDeliveryDate := "Planned Delivery Date";
      OnBeforeCalcPlannedDeliveryDate(Rec,PlannedDeliveryDate,CurrFieldNo,IsHandled);
      IF IsHandled THEN
        EXIT(PlannedDeliveryDate);

      IF "Shipment Date" = 0D THEN
        EXIT("Planned Delivery Date");

      CASE CurrFieldNo OF
        FIELDNO("Shipment Date"):
          EXIT(CalendarMgmt.CalcDateBOC(
              FORMAT("Shipping Time"),
              "Planned Shipment Date",
              CalChange."Source Type"::"Shipping Agent",
              "Shipping Agent Code",
              "Shipping Agent Service Code",
              CalChange."Source Type"::Customer,
              "Sell-to Customer No.",
              '',
              TRUE));
        FIELDNO("Planned Delivery Date"):
          EXIT(CalendarMgmt.CalcDateBOC2(
              FORMAT("Shipping Time"),
              "Planned Delivery Date",
              CalChange."Source Type"::"Shipping Agent",
              "Shipping Agent Code",
              "Shipping Agent Service Code",
              CalChange."Source Type"::Location,
              "Location Code",
              '',
              TRUE));
      END;
    END;

    [External]
    PROCEDURE CalcPlannedShptDate@93(CurrFieldNo@1000 : Integer) PlannedShipmentDate : Date;
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      OnBeforeCalcPlannedShptDate(Rec,PlannedShipmentDate,CurrFieldNo,IsHandled);
      IF IsHandled THEN
        EXIT(PlannedShipmentDate);

      IF "Shipment Date" = 0D THEN
        EXIT("Planned Shipment Date");

      CASE CurrFieldNo OF
        FIELDNO("Shipment Date"):
          EXIT(CalendarMgmt.CalcDateBOC(
              FORMAT("Outbound Whse. Handling Time"),
              "Shipment Date",
              CalChange."Source Type"::Location,
              "Location Code",
              '',
              CalChange."Source Type"::"Shipping Agent",
              "Shipping Agent Code",
              "Shipping Agent Service Code",
              TRUE));
        FIELDNO("Planned Delivery Date"):
          EXIT(CalendarMgmt.CalcDateBOC(
              FORMAT(''),
              "Planned Delivery Date",
              CalChange."Source Type"::Customer,
              "Sell-to Customer No.",
              '',
              CalChange."Source Type"::"Shipping Agent",
              "Shipping Agent Code",
              "Shipping Agent Service Code",
              TRUE));
      END;
    END;

    [External]
    PROCEDURE CalcShipmentDate@111() : Date;
    VAR
      ShipmentDate@1000 : Date;
      IsHandled@1001 : Boolean;
    BEGIN
      IF "Planned Shipment Date" = 0D THEN
        EXIT("Shipment Date");

      IsHandled := FALSE;
      OnCalcShipmentDateOnPlannedShipmentDate(Rec,ShipmentDate,IsHandled);
      IF IsHandled THEN
        EXIT(ShipmentDate);

      IF FORMAT("Outbound Whse. Handling Time") <> '' THEN
        EXIT(
          CalendarMgmt.CalcDateBOC2(
            FORMAT("Outbound Whse. Handling Time"),
            "Planned Shipment Date",
            CalChange."Source Type"::Location,
            "Location Code",
            '',
            CalChange."Source Type"::"Shipping Agent",
            "Shipping Agent Code",
            "Shipping Agent Service Code",
            FALSE));

      EXIT(
        CalendarMgmt.CalcDateBOC(
          FORMAT(FORMAT('')),
          "Planned Shipment Date",
          CalChange."Source Type"::"Shipping Agent",
          "Shipping Agent Code",
          "Shipping Agent Service Code",
          CalChange."Source Type"::Location,
          "Location Code",
          '',
          FALSE));
    END;

    [External]
    PROCEDURE SignedXX@20(Value@1000 : Decimal) : Decimal;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Quote,
        "Document Type"::Order,
        "Document Type"::Invoice,
        "Document Type"::"Blanket Order":
          EXIT(-Value);
        "Document Type"::"Return Order",
        "Document Type"::"Credit Memo":
          EXIT(Value);
      END;
    END;

    LOCAL PROCEDURE BlanketOrderLookup@23();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeBlanketOrderLookup(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      SalesLine2.RESET;
      SalesLine2.SETCURRENTKEY("Document Type",Type,"No.");
      SalesLine2.SETRANGE("Document Type","Document Type"::"Blanket Order");
      SalesLine2.SETRANGE(Type,Type);
      SalesLine2.SETRANGE("No.","No.");
      SalesLine2.SETRANGE("Bill-to Customer No.","Bill-to Customer No.");
      SalesLine2.SETRANGE("Sell-to Customer No.","Sell-to Customer No.");
      IF PAGE.RUNMODAL(PAGE::"Sales Lines",SalesLine2) = ACTION::LookupOK THEN BEGIN
        SalesLine2.TESTFIELD("Document Type","Document Type"::"Blanket Order");
        "Blanket Order No." := SalesLine2."Document No.";
        VALIDATE("Blanket Order Line No.",SalesLine2."Line No.");
      END;

      OnAfterBlanketOrderLookup(Rec);
    END;

    [External]
    PROCEDURE ShowDimensions@25() IsChanged : Boolean;
    VAR
      OldDimSetID@1000 : Integer;
    BEGIN
      OldDimSetID := "Dimension Set ID";
      "Dimension Set ID" :=
        DimMgt.EditDimensionSet("Dimension Set ID",STRSUBSTNO('%1 %2 %3',"Document Type","Document No.","Line No."));
      VerifyItemLineDim;
      DimMgt.UpdateGlobalDimFromDimSetID("Dimension Set ID","Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
      ATOLink.UpdateAsmDimFromSalesLine(Rec);
      IsChanged := OldDimSetID <> "Dimension Set ID";
    END;

    [External]
    PROCEDURE OpenItemTrackingLines@6500();
    VAR
      Job@1000 : Record 167;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeOpenItemTrackingLines(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      TESTFIELD(Type,Type::Item);
      TESTFIELD("No.");
      TESTFIELD("Quantity (Base)");
      IF "Job Contract Entry No." <> 0 THEN
        ERROR(Text048,TABLECAPTION,Job.TABLECAPTION);
      ReserveSalesLine.CallItemTracking(Rec);
    END;

    [External]
    PROCEDURE CreateDim@26(Type1@1000 : Integer;No1@1001 : Code[20];Type2@1002 : Integer;No2@1003 : Code[20];Type3@1004 : Integer;No3@1005 : Code[20]);
    VAR
      SourceCodeSetup@1006 : Record 242;
      TableID@1007 : ARRAY [10] OF Integer;
      No@1008 : ARRAY [10] OF Code[20];
    BEGIN
      SourceCodeSetup.GET;
      TableID[1] := Type1;
      No[1] := No1;
      TableID[2] := Type2;
      No[2] := No2;
      TableID[3] := Type3;
      No[3] := No3;
      OnAfterCreateDimTableIDs(Rec,CurrFieldNo,TableID,No);

      "Shortcut Dimension 1 Code" := '';
      "Shortcut Dimension 2 Code" := '';
      GetSalesHeader;
      "Dimension Set ID" :=
        DimMgt.GetRecDefaultDimID(
          Rec,CurrFieldNo,TableID,No,SourceCodeSetup.Sales,
          "Shortcut Dimension 1 Code","Shortcut Dimension 2 Code",SalesHeader."Dimension Set ID",DATABASE::Customer);
      DimMgt.UpdateGlobalDimFromDimSetID("Dimension Set ID","Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
      ATOLink.UpdateAsmDimFromSalesLine(Rec);
    END;

    [External]
    PROCEDURE ValidateShortcutDimCode@29(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    BEGIN
      DimMgt.ValidateShortcutDimValues(FieldNumber,ShortcutDimCode,"Dimension Set ID");
      VerifyItemLineDim;
    END;

    [External]
    PROCEDURE LookupShortcutDimCode@28(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    BEGIN
      DimMgt.LookupDimValueCode(FieldNumber,ShortcutDimCode);
      ValidateShortcutDimCode(FieldNumber,ShortcutDimCode);
    END;

    [External]
    PROCEDURE ShowShortcutDimCode@27(VAR ShortcutDimCode@1000 : ARRAY [8] OF Code[20]);
    BEGIN
      DimMgt.GetShortcutDimensions("Dimension Set ID",ShortcutDimCode);
    END;

    [External]
    PROCEDURE SelectMultipleItems@180();
    VAR
      ItemListPage@1000 : Page 31;
      SelectionFilter@1001 : Text;
    BEGIN
      IF IsCreditDocType THEN
        SelectionFilter := ItemListPage.SelectActiveItems
      ELSE
        SelectionFilter := ItemListPage.SelectActiveItemsForSale;
      IF SelectionFilter <> '' THEN
        AddItems(SelectionFilter);
    END;

    LOCAL PROCEDURE AddItems@181(SelectionFilter@1000 : Text);
    VAR
      Item@1001 : Record 27;
      SalesLine@1002 : Record 37;
      LastSalesLine@1003 : Record 37;
    BEGIN
      OnBeforeAddItems(Rec);

      InitNewLine(SalesLine);
      Item.SETFILTER("No.",SelectionFilter);
      IF Item.FINDSET THEN
        REPEAT
          SalesLine.INIT;
          SalesLine."Line No." += 10000;
          SalesLine.VALIDATE(Type,Type::Item);
          SalesLine.VALIDATE("No.",Item."No.");
          SalesLine.INSERT(TRUE);
          IF TransferExtendedText.SalesCheckIfAnyExtText(SalesLine,FALSE) THEN BEGIN
            TransferExtendedText.InsertSalesExtTextRetLast(SalesLine,LastSalesLine);
            SalesLine."Line No." := LastSalesLine."Line No."
          END;
          OnAfterAddItem(SalesLine,LastSalesLine);
        UNTIL Item.NEXT = 0;
    END;

    LOCAL PROCEDURE InitNewLine@183(VAR NewSalesLine@1001 : Record 37);
    VAR
      SalesLine@1000 : Record 37;
    BEGIN
      NewSalesLine.COPY(Rec);
      SalesLine.SETRANGE("Document Type",NewSalesLine."Document Type");
      SalesLine.SETRANGE("Document No.",NewSalesLine."Document No.");
      IF SalesLine.FINDLAST THEN
        NewSalesLine."Line No." := SalesLine."Line No."
      ELSE
        NewSalesLine."Line No." := 0;
    END;

    [Internal]
    PROCEDURE ShowItemSub@30();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeShowItemSub(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      CLEAR(SalesHeader);
      TestStatusOpen;
      ItemSubstitutionMgt.ItemSubstGet(Rec);
      IF TransferExtendedText.SalesCheckIfAnyExtText(Rec,FALSE) THEN
        TransferExtendedText.InsertSalesExtText(Rec);

      OnAfterShowItemSub(Rec);
    END;

    [External]
    PROCEDURE ShowNonstock@32();
    BEGIN
      TESTFIELD(Type,Type::Item);
      IF "No." <> '' THEN
        ERROR(SelectNonstockItemErr);
      IF PAGE.RUNMODAL(PAGE::"Catalog Item List",NonstockItem) = ACTION::LookupOK THEN BEGIN
        NonstockItem.TESTFIELD("Item Template Code");
        ConfigTemplateHeader.SETRANGE(Code,NonstockItem."Item Template Code");
        ConfigTemplateHeader.FINDFIRST;
        TempItemTemplate.InitializeTempRecordFromConfigTemplate(TempItemTemplate,ConfigTemplateHeader);
        TempItemTemplate.TESTFIELD("Gen. Prod. Posting Group");
        TempItemTemplate.TESTFIELD("Inventory Posting Group");

        "No." := NonstockItem."Entry No.";
        CatalogItemMgt.NonStockSales(Rec);
        VALIDATE("No.","No.");
        VALIDATE("Unit Price",NonstockItem."Unit Price");

        OnAfterShowNonStock(Rec,NonstockItem);
      END;
    END;

    LOCAL PROCEDURE GetSalesSetup@100();
    BEGIN
      IF NOT SalesSetupRead THEN
        SalesSetup.GET;
      SalesSetupRead := TRUE;
    END;

    LOCAL PROCEDURE GetFAPostingGroup@6();
    VAR
      LocalGLAcc@1000 : Record 15;
      FASetup@1001 : Record 5603;
      FAPostingGr@1002 : Record 5606;
      FADeprBook@1003 : Record 5612;
    BEGIN
      IF (Type <> Type::"Fixed Asset") OR ("No." = '') THEN
        EXIT;
      IF "Depreciation Book Code" = '' THEN BEGIN
        FASetup.GET;
        "Depreciation Book Code" := FASetup."Default Depr. Book";
        IF NOT FADeprBook.GET("No.","Depreciation Book Code") THEN
          "Depreciation Book Code" := '';
        IF "Depreciation Book Code" = '' THEN
          EXIT;
      END;
      FADeprBook.GET("No.","Depreciation Book Code");
      FADeprBook.TESTFIELD("FA Posting Group");
      FAPostingGr.GET(FADeprBook."FA Posting Group");
      LocalGLAcc.GET(FAPostingGr.GetAcquisitionCostAccountOnDisposal);
      LocalGLAcc.CheckGLAcc;
      LocalGLAcc.TESTFIELD("Gen. Prod. Posting Group");
      "Posting Group" := FADeprBook."FA Posting Group";
      "Gen. Prod. Posting Group" := LocalGLAcc."Gen. Prod. Posting Group";
      "Tax Group Code" := LocalGLAcc."Tax Group Code";
      VALIDATE("VAT Prod. Posting Group",LocalGLAcc."VAT Prod. Posting Group");
    END;

    [External]
    PROCEDURE GetCaptionClass@34(FieldNumber@1000 : Integer) : Text[80];
    VAR
      SalesLineCaptionClassMgmt@1001 : Codeunit 345;
    BEGIN
      EXIT(SalesLineCaptionClassMgmt.GetSalesLineCaptionClass(Rec,FieldNumber));
    END;

    LOCAL PROCEDURE GetSKU@5806() : Boolean;
    BEGIN
      IF (SKU."Location Code" = "Location Code") AND
         (SKU."Item No." = "No.") AND
         (SKU."Variant Code" = "Variant Code")
      THEN
        EXIT(TRUE);
      IF SKU.GET("Location Code","No.","Variant Code") THEN
        EXIT(TRUE);

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE GetUnitCost@5808();
    VAR
      Item@1000 : Record 27;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeGetUnitCost(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      TESTFIELD(Type,Type::Item);
      TESTFIELD("No.");
      GetItem(Item);
      "Qty. per Unit of Measure" := UOMMgt.GetQtyPerUnitOfMeasure(Item,"Unit of Measure Code");
      IF GetSKU THEN
        VALIDATE("Unit Cost (LCY)",SKU."Unit Cost" * "Qty. per Unit of Measure")
      ELSE
        VALIDATE("Unit Cost (LCY)",Item."Unit Cost" * "Qty. per Unit of Measure");

      OnAfterGetUnitCost(Rec,Item);
    END;

    LOCAL PROCEDURE CalcUnitCost@5809(ItemLedgEntry@1000 : Record 32) : Decimal;
    VAR
      ValueEntry@1001 : Record 5802;
      UnitCost@1004 : Decimal;
    BEGIN
      WITH ValueEntry DO BEGIN
        SETCURRENTKEY("Item Ledger Entry No.");
        SETRANGE("Item Ledger Entry No.",ItemLedgEntry."Entry No.");
        IF IsNonInventoriableItem THEN BEGIN
          CALCSUMS("Cost Amount (Non-Invtbl.)");
          UnitCost := "Cost Amount (Non-Invtbl.)" / ItemLedgEntry.Quantity;
        END ELSE BEGIN
          CALCSUMS("Cost Amount (Actual)","Cost Amount (Expected)");
          UnitCost :=
            ("Cost Amount (Expected)" + "Cost Amount (Actual)") / ItemLedgEntry.Quantity;
        END;
      END;

      EXIT(ABS(UnitCost * "Qty. per Unit of Measure"));
    END;

    [External]
    PROCEDURE ShowItemChargeAssgnt@5801();
    VAR
      ItemChargeAssgntSales@1003 : Record 5809;
      AssignItemChargeSales@1001 : Codeunit 5807;
      ItemChargeAssgnts@1000 : Page 5814;
      ItemChargeAssgntLineAmt@1002 : Decimal;
      IsHandled@1004 : Boolean;
    BEGIN
      GET("Document Type","Document No.","Line No.");
      TESTFIELD("No.");
      TESTFIELD(Quantity);

      IF Type <> Type::"Charge (Item)" THEN
        ERROR(ItemChargeAssignmentErr);

      GetSalesHeader;
      Currency.Initialize(SalesHeader."Currency Code");
      IF ("Inv. Discount Amount" = 0) AND ("Line Discount Amount" = 0) AND
         (NOT SalesHeader."Prices Including VAT")
      THEN
        ItemChargeAssgntLineAmt := "Line Amount"
      ELSE
        IF SalesHeader."Prices Including VAT" THEN
          ItemChargeAssgntLineAmt :=
            ROUND(CalcLineAmount / (1 + ("VAT %" + "EC %") / 100),Currency."Amount Rounding Precision")
        ELSE
          ItemChargeAssgntLineAmt := CalcLineAmount;

      ItemChargeAssgntSales.RESET;
      ItemChargeAssgntSales.SETRANGE("Document Type","Document Type");
      ItemChargeAssgntSales.SETRANGE("Document No.","Document No.");
      ItemChargeAssgntSales.SETRANGE("Document Line No.","Line No.");
      ItemChargeAssgntSales.SETRANGE("Item Charge No.","No.");
      IF NOT ItemChargeAssgntSales.FINDLAST THEN BEGIN
        ItemChargeAssgntSales."Document Type" := "Document Type";
        ItemChargeAssgntSales."Document No." := "Document No.";
        ItemChargeAssgntSales."Document Line No." := "Line No.";
        ItemChargeAssgntSales."Item Charge No." := "No.";
        ItemChargeAssgntSales."Unit Cost" :=
          ROUND(ItemChargeAssgntLineAmt / Quantity,Currency."Unit-Amount Rounding Precision");
      END;

      IsHandled := FALSE;
      OnShowItemChargeAssgntOnBeforeCalcItemCharge(Rec,ItemChargeAssgntLineAmt,Currency,IsHandled);
      IF NOT IsHandled THEN
        ItemChargeAssgntLineAmt :=
          ROUND(ItemChargeAssgntLineAmt * ("Qty. to Invoice" / Quantity),Currency."Amount Rounding Precision");

      IF IsCreditDocType THEN
        AssignItemChargeSales.CreateDocChargeAssgn(ItemChargeAssgntSales,"Return Receipt No.")
      ELSE
        AssignItemChargeSales.CreateDocChargeAssgn(ItemChargeAssgntSales,"Shipment No.");
      CLEAR(AssignItemChargeSales);
      COMMIT;

      ItemChargeAssgnts.Initialize(Rec,ItemChargeAssgntLineAmt);
      ItemChargeAssgnts.RUNMODAL;
      CALCFIELDS("Qty. to Assign");
    END;

    [External]
    PROCEDURE UpdateItemChargeAssgnt@5807();
    VAR
      ItemChargeAssgntSales@1003 : Record 5809;
      ShareOfVAT@1000 : Decimal;
      TotalQtyToAssign@1001 : Decimal;
      TotalAmtToAssign@1002 : Decimal;
    BEGIN
      IF "Document Type" = "Document Type"::"Blanket Order" THEN
        EXIT;

      CALCFIELDS("Qty. Assigned","Qty. to Assign");
      IF ABS("Quantity Invoiced") > ABS(("Qty. Assigned" + "Qty. to Assign")) THEN
        ERROR(Text055,FIELDCAPTION("Quantity Invoiced"),FIELDCAPTION("Qty. Assigned"),FIELDCAPTION("Qty. to Assign"));

      ItemChargeAssgntSales.RESET;
      ItemChargeAssgntSales.SETRANGE("Document Type","Document Type");
      ItemChargeAssgntSales.SETRANGE("Document No.","Document No.");
      ItemChargeAssgntSales.SETRANGE("Document Line No.","Line No.");
      ItemChargeAssgntSales.CALCSUMS("Qty. to Assign");
      TotalQtyToAssign := ItemChargeAssgntSales."Qty. to Assign";
      IF (CurrFieldNo <> 0) AND (Amount <> xRec.Amount) AND
         NOT ((Quantity <> xRec.Quantity) AND (TotalQtyToAssign = 0))
      THEN BEGIN
        ItemChargeAssgntSales.SETFILTER("Qty. Assigned",'<>0');
        IF NOT ItemChargeAssgntSales.ISEMPTY THEN
          ERROR(Text026,
            FIELDCAPTION(Amount));
        ItemChargeAssgntSales.SETRANGE("Qty. Assigned");
      END;

      IF ItemChargeAssgntSales.FINDSET(TRUE) THEN BEGIN
        GetSalesHeader;
        TotalAmtToAssign := CalcTotalAmtToAssign(TotalQtyToAssign);
        REPEAT
          ShareOfVAT := 1;
          IF SalesHeader."Prices Including VAT" THEN
            ShareOfVAT := 1 + "VAT %" / 100;
          IF Quantity <> 0 THEN
            IF ItemChargeAssgntSales."Unit Cost" <>
               ROUND(CalcLineAmount / Quantity / ShareOfVAT,Currency."Unit-Amount Rounding Precision")
            THEN
              ItemChargeAssgntSales."Unit Cost" :=
                ROUND(CalcLineAmount / Quantity / ShareOfVAT,Currency."Unit-Amount Rounding Precision");
          IF TotalQtyToAssign <> 0 THEN BEGIN
            ItemChargeAssgntSales."Amount to Assign" :=
              ROUND(ItemChargeAssgntSales."Qty. to Assign" / TotalQtyToAssign * TotalAmtToAssign,
                Currency."Amount Rounding Precision");
            TotalQtyToAssign -= ItemChargeAssgntSales."Qty. to Assign";
            TotalAmtToAssign -= ItemChargeAssgntSales."Amount to Assign";
          END;
          ItemChargeAssgntSales.MODIFY;
        UNTIL ItemChargeAssgntSales.NEXT = 0;
        CALCFIELDS("Qty. to Assign");
      END;
    END;

    LOCAL PROCEDURE DeleteItemChargeAssgnt@5802(DocType@1000 : Option;DocNo@1001 : Code[20];DocLineNo@1002 : Integer);
    VAR
      ItemChargeAssgntSales@1003 : Record 5809;
    BEGIN
      ItemChargeAssgntSales.SETRANGE("Applies-to Doc. Type",DocType);
      ItemChargeAssgntSales.SETRANGE("Applies-to Doc. No.",DocNo);
      ItemChargeAssgntSales.SETRANGE("Applies-to Doc. Line No.",DocLineNo);
      IF NOT ItemChargeAssgntSales.ISEMPTY THEN
        ItemChargeAssgntSales.DELETEALL(TRUE);
    END;

    LOCAL PROCEDURE DeleteChargeChargeAssgnt@5804(DocType@1000 : Option;DocNo@1001 : Code[20];DocLineNo@1002 : Integer);
    VAR
      ItemChargeAssgntSales@1003 : Record 5809;
    BEGIN
      IF DocType <> "Document Type"::"Blanket Order" THEN
        IF "Quantity Invoiced" <> 0 THEN BEGIN
          CALCFIELDS("Qty. Assigned");
          TESTFIELD("Qty. Assigned","Quantity Invoiced");
        END;

      ItemChargeAssgntSales.RESET;
      ItemChargeAssgntSales.SETRANGE("Document Type",DocType);
      ItemChargeAssgntSales.SETRANGE("Document No.",DocNo);
      ItemChargeAssgntSales.SETRANGE("Document Line No.",DocLineNo);
      IF NOT ItemChargeAssgntSales.ISEMPTY THEN
        ItemChargeAssgntSales.DELETEALL;

      OnAfterDeleteChargeChargeAssgnt(Rec,xRec,CurrFieldNo);
    END;

    LOCAL PROCEDURE CheckItemChargeAssgnt@5800();
    VAR
      ItemChargeAssgntSales@1000 : Record 5809;
    BEGIN
      ItemChargeAssgntSales.SETRANGE("Applies-to Doc. Type","Document Type");
      ItemChargeAssgntSales.SETRANGE("Applies-to Doc. No.","Document No.");
      ItemChargeAssgntSales.SETRANGE("Applies-to Doc. Line No.","Line No.");
      ItemChargeAssgntSales.SETRANGE("Document Type","Document Type");
      ItemChargeAssgntSales.SETRANGE("Document No.","Document No.");
      IF ItemChargeAssgntSales.FINDSET THEN BEGIN
        TESTFIELD("Allow Item Charge Assignment");
        REPEAT
          ItemChargeAssgntSales.TESTFIELD("Qty. to Assign",0);
        UNTIL ItemChargeAssgntSales.NEXT = 0;
      END;
    END;

    [External]
    PROCEDURE TestStatusOpen@33();
    BEGIN
      IF StatusCheckSuspended THEN
        EXIT;

      GetSalesHeader;
      OnBeforeTestStatusOpen(Rec,SalesHeader);

      IF NOT "System-Created Entry" THEN
        IF HasTypeToFillMandatoryFields THEN
          SalesHeader.TESTFIELD(Status,SalesHeader.Status::Open);

      OnAfterTestStatusOpen(Rec,SalesHeader);
    END;

    [External]
    PROCEDURE SuspendStatusCheck@39(Suspend@1000 : Boolean);
    BEGIN
      StatusCheckSuspended := Suspend;
    END;

    [External]
    PROCEDURE UpdateVATOnLines@36(QtyType@1000 : 'General,Invoicing,Shipping';VAR SalesHeader@1001 : Record 36;VAR SalesLine@1002 : Record 37;VAR VATAmountLine@1003 : Record 290) LineWasModified : Boolean;
    VAR
      TempVATAmountLineRemainder@1004 : TEMPORARY Record 290;
      Currency@1005 : Record 4;
      NewAmount@1006 : Decimal;
      NewAmountIncludingVAT@1007 : Decimal;
      NewVATBaseAmount@1008 : Decimal;
      VATAmount@1009 : Decimal;
      VATDifference@1010 : Decimal;
      InvDiscAmount@1011 : Decimal;
      LineAmountToInvoice@1012 : Decimal;
      ECDifference@1100000 : Decimal;
      LineAmountToInvoiceDiscounted@1013 : Decimal;
      DeferralAmount@1014 : Decimal;
      ImporteBaseDtoAFacturar@1170000010 : Decimal;
      BOM@1170000009 : Record 90;
      TotalImporteBOM@1170000008 : Decimal;
      BOM2@1170000007 : Record 90;
      UltimaLinea@1170000006 : Boolean;
      TotalImporteDesglosado@1170000005 : Decimal;
      ConfIVA@1170000004 : Record 325;
      ImporteLinea@1170000003 : Decimal;
      NewAmountTotal@1170000002 : Decimal;
      NewAmountIncludingVATTotal@1170000001 : Decimal;
      NewVATBaseAmountTotal@1170000000 : Decimal;
      xRecRef@1170000011 : RecordRef;
    BEGIN
      LineWasModified := FALSE;
      IF QtyType = QtyType::Shipping THEN
        EXIT;
      IF SalesHeader."Currency Code" = '' THEN
        Currency.InitRoundingPrecision
      ELSE
        Currency.GET(SalesHeader."Currency Code");

      TempVATAmountLineRemainder.DELETEALL;

      WITH SalesLine DO BEGIN
        SETRANGE("Document Type",SalesHeader."Document Type");
        SETRANGE("Document No.",SalesHeader."No.");
        LOCKTABLE;
        IF FINDSET THEN
          REPEAT
            IF NOT ZeroAmountLine(QtyType) THEN BEGIN
      //++ BAIN-0010
              IF NOT FuncionesBAINES.T37IVADesglosado(Rec) THEN BEGIN
      //-- BAIN-0010
                DeferralAmount := GetDeferralAmount;
                VATAmountLine.GET("VAT Identifier","VAT Calculation Type","Tax Group Code",FALSE,"Line Amount" >= 0);
                IF VATAmountLine.Modified THEN BEGIN
                  IF NOT TempVATAmountLineRemainder.GET(
                       "VAT Identifier","VAT Calculation Type","Tax Group Code",FALSE,"Line Amount" >= 0)
                  THEN BEGIN
                    TempVATAmountLineRemainder := VATAmountLine;
                    TempVATAmountLineRemainder.INIT;
                    TempVATAmountLineRemainder.INSERT;
                  END;

                  IF QtyType = QtyType::General THEN
                    LineAmountToInvoice := "Line Amount"
                  ELSE
                    LineAmountToInvoice :=
                      ROUND("Line Amount" * "Qty. to Invoice" / Quantity,Currency."Amount Rounding Precision");
                  // VNTES.i
                  IF QtyType = QtyType::General THEN
                    LineAmountToInvoice := GestCodigoLinVenta.ImporteBaseDto(Rec,Quantity)
                  ELSE
                    LineAmountToInvoice := GestCodigoLinVenta.ImporteBaseDto(Rec,"Qty. to Invoice");
                  // VNTES.f

                  IF "Allow Invoice Disc." THEN BEGIN
                    IF (VATAmountLine."Inv. Disc. Base Amount" = 0) OR (LineAmountToInvoice = 0) THEN
                      InvDiscAmount := 0
                    ELSE BEGIN
                      LineAmountToInvoiceDiscounted :=
                        VATAmountLine."Invoice Discount Amount" * LineAmountToInvoice /
                        VATAmountLine."Inv. Disc. Base Amount";
                      TempVATAmountLineRemainder."Invoice Discount Amount" :=
                        TempVATAmountLineRemainder."Invoice Discount Amount" + LineAmountToInvoiceDiscounted;
                      InvDiscAmount :=
                        ROUND(
                          TempVATAmountLineRemainder."Invoice Discount Amount",Currency."Amount Rounding Precision");
                      TempVATAmountLineRemainder."Invoice Discount Amount" :=
                        TempVATAmountLineRemainder."Invoice Discount Amount" - InvDiscAmount;
                    END;
                    IF QtyType = QtyType::General THEN BEGIN
                      "Inv. Discount Amount" := InvDiscAmount;
                      CalcInvDiscToInvoice;
                    END ELSE
                      "Inv. Disc. Amount to Invoice" := InvDiscAmount;
                  END ELSE
                    InvDiscAmount := 0;

                  IF QtyType = QtyType::General THEN
                    IF SalesHeader."Prices Including VAT" THEN BEGIN
                      IF (VATAmountLine.CalcLineAmount = 0) OR ("Line Amount" = 0) THEN BEGIN
                        VATAmount := 0;
                        NewAmountIncludingVAT := 0;
                      END ELSE BEGIN
                        VATAmount :=
                          TempVATAmountLineRemainder."VAT Amount" +
                          VATAmountLine."VAT Amount" * CalcLineAmount / VATAmountLine.CalcLineAmount +
                          VATAmountLine."EC Amount" * CalcLineAmount / VATAmountLine.CalcLineAmount;
                        NewAmountIncludingVAT :=
                          TempVATAmountLineRemainder."Amount Including VAT" +
                          VATAmountLine."Amount Including VAT" * CalcLineAmount / VATAmountLine.CalcLineAmount;
                      END;
                      OnUpdateVATOnLinesOnBeforeCalculateNewAmount(
                        Rec,SalesHeader,VATAmountLine,TempVATAmountLineRemainder,NewAmountIncludingVAT,VATAmount);
                      NewAmount :=
                        ROUND(NewAmountIncludingVAT,Currency."Amount Rounding Precision") -
                        ROUND(VATAmount,Currency."Amount Rounding Precision");
                      NewVATBaseAmount :=
                        ROUND(
                          NewAmount * (1 - SalesHeader."VAT Base Discount %" / 100),Currency."Amount Rounding Precision");
                    END ELSE BEGIN
                      IF "VAT Calculation Type" = "VAT Calculation Type"::"Full VAT" THEN BEGIN
                        VATAmount := CalcLineAmount - "Pmt. Discount Amount";
                        NewAmount := 0;
                        NewVATBaseAmount := 0;
                      END ELSE BEGIN
                        NewAmount := CalcLineAmount - "Pmt. Discount Amount";
                        NewVATBaseAmount :=
                          ROUND(
                            NewAmount * (1 - SalesHeader."VAT Base Discount %" / 100),Currency."Amount Rounding Precision");
                        IF VATAmountLine."VAT Base" = 0 THEN
                          VATAmount := 0
                        ELSE
                          VATAmount :=
                            TempVATAmountLineRemainder."VAT Amount" +
                            VATAmountLine."VAT Amount" * NewAmount / VATAmountLine."VAT Base" +
                            VATAmountLine."EC Amount" * NewAmount / VATAmountLine."VAT Base";
                      END;
                      OnUpdateVATOnLinesOnBeforeCalculateNewAmount(
                        Rec,SalesHeader,VATAmountLine,TempVATAmountLineRemainder,NewAmount,VATAmount);
                      NewAmountIncludingVAT := NewAmount + ROUND(VATAmount,Currency."Amount Rounding Precision");
                    END
                  ELSE BEGIN
                    IF VATAmountLine.CalcLineAmount = 0 THEN BEGIN
                      VATDifference := 0;
                      ECDifference := 0;
                    END ELSE BEGIN
                      VATDifference :=
                        TempVATAmountLineRemainder."VAT Difference" +
                        VATAmountLine."VAT Difference" * (LineAmountToInvoice - InvDiscAmount) / VATAmountLine.CalcLineAmount;
                      ECDifference :=
                        TempVATAmountLineRemainder."EC Difference" +
                        VATAmountLine."EC Difference" * (LineAmountToInvoice - InvDiscAmount) / VATAmountLine.CalcLineAmount;
                    END;

                    IF LineAmountToInvoice = 0 THEN BEGIN
                      "VAT Difference" := 0;
                      "EC Difference" := 0;
                    END ELSE BEGIN
                      "VAT Difference" := ROUND(VATDifference,Currency."Amount Rounding Precision");
                      "EC Difference" := ROUND(ECDifference,Currency."Amount Rounding Precision");
                    END;
                  END;
                  IF QtyType = QtyType::General THEN
                    UpdateBaseAmounts(NewAmount,ROUND(NewAmountIncludingVAT,Currency."Amount Rounding Precision"),NewVATBaseAmount);
                  InitOutstanding;
                  IF Type = Type::"Charge (Item)" THEN
                    UpdateItemChargeAssgnt;
                  MODIFY;
                  LineWasModified := TRUE;

                  IF ("Deferral Code" <> '') AND (DeferralAmount <> GetDeferralAmount) THEN
                    UpdateDeferralAmounts;

                  TempVATAmountLineRemainder."Amount Including VAT" :=
                    NewAmountIncludingVAT - ROUND(NewAmountIncludingVAT,Currency."Amount Rounding Precision");
                  TempVATAmountLineRemainder."VAT Amount" := VATAmount - NewAmountIncludingVAT + NewAmount;
                  TempVATAmountLineRemainder."VAT Difference" := VATDifference - "VAT Difference";
                  TempVATAmountLineRemainder."EC Difference" := ECDifference - "EC Difference";
                  TempVATAmountLineRemainder.MODIFY;
                END;
              END ELSE BEGIN  // Se trata de una l¡nea con el IVA Desglosado
                BOM.RESET;
                BOM.SETRANGE("Parent Item No.","No.");
                BOM.SETFILTER("Quantity per",'<>%1',0);
                BOM.SETFILTER("Grupo regis. IVA producto",'<>%1','');
                BOM.SETFILTER("Precio venta referencia",'<>%1',0);
                IF NOT BOM.FIND('-') THEN BEGIN
                  ERROR(Error001)
                END ELSE BEGIN
                  // Calculo del total de las l¡neas de la lista de materiales
                  TotalImporteBOM := 0;
                  REPEAT
                    // b-59793 TotalImporteBOM += BOM."Precio venta referencia" * BOM."Quantity per";
                    TotalImporteBOM += BOM."Precio venta referencia"; // 59793

                  UNTIL BOM.NEXT = 0;
                  IF TotalImporteBOM = 0 THEN
                    ERROR(Error002);

                  // Actualizaci¢n de las lineas de importe de IVA
                  BOM2.COPY(BOM);
                  UltimaLinea := FALSE;
                  TotalImporteDesglosado := 0;
                  // i-60783 TS
                  NewAmountTotal := 0;
                  NewVATBaseAmountTotal := 0;
                  NewAmountIncludingVATTotal := 0;
                  // f-60783 TS
                  BOM.FIND('-');
                  REPEAT
                    BOM2 := BOM;
                    UltimaLinea := BOM2.NEXT = 0;
                    ConfIVA.GET("VAT Bus. Posting Group",BOM."Grupo regis. IVA producto");

                    VATAmountLine.GET(ConfIVA."VAT Identifier","VAT Calculation Type",
                                     "Tax Group Code",FALSE,"Line Amount" >= 0,"Line No.");


                    IF VATAmountLine.Modified THEN BEGIN
                      xRecRef.GETTABLE(SalesLine);

                      IF NOT TempVATAmountLineRemainder.GET(
                             ConfIVA."VAT Identifier","VAT Calculation Type","Tax Group Code",FALSE,"Line Amount" >= 0,"Line No.") // 100907



                      THEN BEGIN
                        TempVATAmountLineRemainder := VATAmountLine;
                        TempVATAmountLineRemainder."VAT Prod. Posting Group" := BOM."Grupo regis. IVA producto"; // ????
                        TempVATAmountLineRemainder.INIT;
                        TempVATAmountLineRemainder.INSERT;
                      END;
                      IF NOT UltimaLinea THEN BEGIN
                        // b-59793 ImporteLinea := "Line Amount" * BOM."Quantity per" * BOM."Precio venta referencia" / TotalImporteBOM;
                        ImporteLinea := "Line Amount" * BOM."Precio venta referencia" / TotalImporteBOM;  // 59793

                        IF QtyType = QtyType::General THEN
                          LineAmountToInvoice := ImporteLinea
                        ELSE
                          LineAmountToInvoice :=
                            ROUND(ImporteLinea * "Qty. to Invoice" / Quantity,Currency."Amount Rounding Precision");
                        TotalImporteDesglosado += LineAmountToInvoice;
                      END ELSE BEGIN
                        ImporteLinea := "Line Amount" - TotalImporteDesglosado;
                        IF QtyType = QtyType::General THEN
                          LineAmountToInvoice := ImporteLinea
                        ELSE
                          LineAmountToInvoice :=
                            ROUND(ImporteLinea * "Qty. to Invoice" / Quantity,Currency."Amount Rounding Precision");
                        TotalImporteDesglosado += LineAmountToInvoice;  // 60783 TS
                      END;

                      IF "Allow Invoice Disc." THEN BEGIN
                        IF VATAmountLine."Inv. Disc. Base Amount" = 0 THEN
                          InvDiscAmount := 0
                        ELSE BEGIN
                          TempVATAmountLineRemainder."Invoice Discount Amount" :=
                            TempVATAmountLineRemainder."Invoice Discount Amount" +
                            VATAmountLine."Invoice Discount Amount" * LineAmountToInvoice /
                            VATAmountLine."Inv. Disc. Base Amount";
                          InvDiscAmount :=
                            ROUND(
                              TempVATAmountLineRemainder."Invoice Discount Amount",Currency."Amount Rounding Precision");
                          TempVATAmountLineRemainder."Invoice Discount Amount" :=
                            TempVATAmountLineRemainder."Invoice Discount Amount" - InvDiscAmount;
                        END;
                        IF QtyType = QtyType::General THEN BEGIN
                          "Inv. Discount Amount" := InvDiscAmount;
                          CalcInvDiscToInvoice;
                        END ELSE
                          "Inv. Disc. Amount to Invoice" := InvDiscAmount;
                      END ELSE
                        InvDiscAmount := 0;

                      IF QtyType = QtyType::General THEN BEGIN
                        IF SalesHeader."Prices Including VAT" THEN BEGIN
                           ERROR(Error003);
                        END ELSE BEGIN
                          IF "VAT Calculation Type" = "VAT Calculation Type"::"Full VAT" THEN BEGIN
                            ERROR(Error004);
                          END ELSE BEGIN
                            IF NOT UltimaLinea THEN BEGIN
                              NewAmount := "Line Amount" - "Inv. Discount Amount" - - "Pmt. Discount Amount";
                              NewAmount := NewAmount *
                                           // b-59793 (BOM."Precio venta referencia" * BOM."Quantity per") /
                                           (BOM."Precio venta referencia") /  // 59793
                                           TotalImporteBOM;
                              NewVATBaseAmount :=
                                // b-60783 TS ROUND(
                                  NewAmount * (1 - SalesHeader."VAT Base Discount %" / 100)
                                  // b-60783 TS ,Currency."Amount Rounding Precision")
                                  ;
                              IF VATAmountLine."VAT Base" = 0 THEN
                                VATAmount := 0
                              ELSE
                                VATAmount :=
                                  TempVATAmountLineRemainder."VAT Amount" +
                                  VATAmountLine."VAT Amount" * NewAmount / VATAmountLine."VAT Base" +
                                  VATAmountLine."EC Amount" * NewAmount / VATAmountLine."VAT Base";
                            //b-60783 TS END;
                            // I-60783 TS
                            END ELSE BEGIN
                              NewAmount := ("Line Amount" - "Inv. Discount Amount" - "Pmt. Discount Amount") - NewAmountTotal;
                              NewVATBaseAmount := ("Line Amount" - "Inv. Discount Amount" - "Pmt. Discount Amount")
                                                   - NewVATBaseAmountTotal;
                              IF VATAmountLine."VAT Base" = 0 THEN
                                VATAmount := 0
                              ELSE
                                VATAmount := (NewVATBaseAmount * VATAmountLine."VAT %" / 100) +
                                             (NewVATBaseAmount * VATAmountLine."EC %" / 100);
                            END;
                            // F-60783 TS
                          END;
                          // b-60783 TS NewAmountIncludingVAT := NewAmount + ROUND(VATAmount,Currency."Amount Rounding Precision");
                          NewAmountIncludingVAT := NewAmount + VATAmount;  // 60783 TS
                        END;
                      END ELSE BEGIN
                        IF (VATAmountLine."Line Amount" - VATAmountLine."Invoice Discount Amount") = 0 THEN BEGIN
                          VATDifference := 0;
                          ECDifference := 0;
                        END ELSE BEGIN
                          VATDifference :=
                            TempVATAmountLineRemainder."VAT Difference" +
                            VATAmountLine."VAT Difference" * (LineAmountToInvoice - InvDiscAmount) /
                            (VATAmountLine."Line Amount" - VATAmountLine."Invoice Discount Amount");
                          ECDifference :=
                            TempVATAmountLineRemainder."EC Difference" +
                            VATAmountLine."EC Difference" * (LineAmountToInvoice - InvDiscAmount) /
                            (VATAmountLine."Line Amount" - VATAmountLine."Invoice Discount Amount");
                        END;

                        IF LineAmountToInvoice = 0 THEN BEGIN
                          "VAT Difference" := 0;
                          "EC Difference" := 0;
                        END ELSE BEGIN
                          "VAT Difference" := ROUND(VATDifference,Currency."Amount Rounding Precision");
                          "EC Difference" := ROUND(ECDifference,Currency."Amount Rounding Precision");
                        END;
                      END;
                    END;
                    NewAmountTotal += NewAmount;
                    NewAmountIncludingVATTotal += NewAmountIncludingVAT;
                    // b-60783 TS NewVATBaseAmountTotal += NewVATBaseAmountTotal;
                    NewVATBaseAmountTotal += NewVATBaseAmount;  // 60783 TS
                  UNTIL BOM.NEXT = 0;
                  IF (QtyType = QtyType::General) AND (SalesHeader.Status = SalesHeader.Status::Released) THEN BEGIN
                    // b-60783 TS Amount := NewAmountTotal;
                    Amount := ROUND(NewAmountTotal,Currency."Amount Rounding Precision");  // 60783 TS
                    "Amount Including VAT" := ROUND(NewAmountIncludingVATTotal,Currency."Amount Rounding Precision");
                    // b-60783 TS "VAT Base Amount" := NewVATBaseAmountTotal;
                    "VAT Base Amount" := ROUND(NewVATBaseAmountTotal,Currency."Amount Rounding Precision");  // 60783 TS
                  END;
                  SalesLine.InitOutstanding;
                  MODIFY;
                  TempVATAmountLineRemainder."Amount Including VAT" :=
                    NewAmountIncludingVAT - ROUND(NewAmountIncludingVAT,Currency."Amount Rounding Precision");
                  TempVATAmountLineRemainder."VAT Amount" := VATAmount - NewAmountIncludingVAT + NewAmount;
                  TempVATAmountLineRemainder."VAT Difference" := VATDifference - "VAT Difference";
                  TempVATAmountLineRemainder."EC Difference" := ECDifference - "EC Difference";
                  TempVATAmountLineRemainder.MODIFY;
                END;
              END;
              // f-BAIN-0010
            END;
          UNTIL NEXT = 0;
      END;

      OnAfterUpdateVATOnLines(SalesHeader,SalesLine,VATAmountLine,QtyType);
    END;

    [External]
    PROCEDURE CalcVATAmountLines@35(QtyType@1000 : 'General,Invoicing,Shipping';VAR SalesHeader@1001 : Record 36;VAR SalesLine@1002 : Record 37;VAR VATAmountLine@1003 : Record 290);
    VAR
      TotalVATAmount@1011 : Decimal;
      QtyToHandle@1006 : Decimal;
      AmtToHandle@1015 : Decimal;
      RoundingLineInserted@1010 : Boolean;
    BEGIN
      IF IsCalcVATAmountLinesHandled(SalesHeader,SalesLine,VATAmountLine) THEN
        EXIT;

      Currency.Initialize(SalesHeader."Currency Code");

      VATAmountLine.DELETEALL;

      WITH SalesLine DO BEGIN
        SETRANGE("Document Type",SalesHeader."Document Type");
        SETRANGE("Document No.",SalesHeader."No.");
        IF FINDSET THEN
          REPEAT
            IF NOT ZeroAmountLine(QtyType) THEN BEGIN
              IF (Type = Type::"G/L Account") AND NOT "Prepayment Line" THEN
                RoundingLineInserted :=
                  (("No." = GetCPGInvRoundAcc(SalesHeader)) AND "System-Created Entry") OR RoundingLineInserted;
              IF "VAT Calculation Type" IN
                 ["VAT Calculation Type"::"Reverse Charge VAT","VAT Calculation Type"::"Sales Tax"]
              THEN BEGIN
                "VAT %" := 0;
                "EC %" := 0;
              END;
              IF NOT VATAmountLine.GET(
                   "VAT Identifier","VAT Calculation Type","Tax Group Code",FALSE,"Line Amount" >= 0)
              THEN
                VATAmountLine.InsertNewLine(
                  "VAT Identifier","VAT Calculation Type","Tax Group Code",FALSE,"VAT %","Line Amount" >= 0,FALSE,"EC %");

              CASE QtyType OF
                QtyType::General:
                  BEGIN
                    VATAmountLine.Quantity += "Quantity (Base)";
                    VATAmountLine.SumLine(
                      "Line Amount","Inv. Discount Amount","Pmt. Discount Amount","VAT Difference","EC Difference",
                      "Allow Invoice Disc.","Prepayment Line");
                    // VNTES.i
                    IF "Allow Invoice Disc." THEN
                      VATAmountLine."Inv. Disc. Base Amount" :=
                        VATAmountLine."Inv. Disc. Base Amount" + GestCodigoLinVenta.DiferenciaImporteBaseDto(SalesLine,SalesLine.Quantity);
                    // VNTES.f
                  END;
                QtyType::Invoicing:
                  BEGIN
                    CASE TRUE OF
                      ("Document Type" IN ["Document Type"::Order,"Document Type"::Invoice]) AND
                      (NOT SalesHeader.Ship) AND SalesHeader.Invoice AND (NOT "Prepayment Line"):
                        IF "Shipment No." = '' THEN BEGIN
                          QtyToHandle := GetAbsMin("Qty. to Invoice","Qty. Shipped Not Invoiced");
                          VATAmountLine.Quantity += GetAbsMin("Qty. to Invoice (Base)","Qty. Shipped Not Invd. (Base)");
                        END ELSE BEGIN
                          QtyToHandle := "Qty. to Invoice";
                          VATAmountLine.Quantity += "Qty. to Invoice (Base)";
                        END;
                      IsCreditDocType AND (NOT SalesHeader.Receive) AND SalesHeader.Invoice:
                        IF "Return Receipt No." = '' THEN BEGIN
                          QtyToHandle := GetAbsMin("Qty. to Invoice","Return Qty. Rcd. Not Invd.");
                          VATAmountLine.Quantity += GetAbsMin("Qty. to Invoice (Base)","Ret. Qty. Rcd. Not Invd.(Base)");
                        END ELSE BEGIN
                          QtyToHandle := "Qty. to Invoice";
                          VATAmountLine.Quantity += "Qty. to Invoice (Base)";
                        END;
                      ELSE
                        BEGIN
                        QtyToHandle := "Qty. to Invoice";
                        VATAmountLine.Quantity += "Qty. to Invoice (Base)";
                      END;
                    END;
                    AmtToHandle := GetLineAmountToHandleInclPrepmt(QtyToHandle);
                    IF SalesHeader."Invoice Discount Calculation" <> SalesHeader."Invoice Discount Calculation"::Amount THEN
                      VATAmountLine.SumLine(
                        AmtToHandle,ROUND("Inv. Discount Amount" * QtyToHandle / Quantity,Currency."Amount Rounding Precision"),
                        ROUND("Pmt. Discount Amount" * QtyToHandle / Quantity,Currency."Amount Rounding Precision"),
                        "VAT Difference","EC Difference","Allow Invoice Disc.","Prepayment Line")
                    ELSE
                      VATAmountLine.SumLine(
                        AmtToHandle,"Inv. Disc. Amount to Invoice",
                        ROUND("Pmt. Discount Amount" * QtyToHandle / Quantity,Currency."Amount Rounding Precision"),
                        "VAT Difference","EC Difference","Allow Invoice Disc.","Prepayment Line");
                    // VNTES.i
                    IF "Allow Invoice Disc." THEN
                      VATAmountLine."Inv. Disc. Base Amount" :=
                        VATAmountLine."Inv. Disc. Base Amount" + GestCodigoLinVenta.DiferenciaImporteBaseDto(Rec,QtyToHandle);
                    // VNTES.f
                  END;
                QtyType::Shipping:
                  BEGIN
                    IF "Document Type" IN
                       ["Document Type"::"Return Order","Document Type"::"Credit Memo"]
                    THEN BEGIN
                      QtyToHandle := "Return Qty. to Receive";
                      VATAmountLine.Quantity += "Return Qty. to Receive (Base)";
                    END ELSE BEGIN
                      QtyToHandle := "Qty. to Ship";
                      VATAmountLine.Quantity += "Qty. to Ship (Base)";
                    END;
                    AmtToHandle := GetLineAmountToHandleInclPrepmt(QtyToHandle);
                    VATAmountLine.SumLine(
                      AmtToHandle,ROUND("Inv. Discount Amount" * QtyToHandle / Quantity,Currency."Amount Rounding Precision"),
                      ROUND("Pmt. Discount Amount" * QtyToHandle / Quantity,Currency."Amount Rounding Precision"),
                      "VAT Difference","EC Difference","Allow Invoice Disc.","Prepayment Line");
                    // VNTES.i
                    IF "Allow Invoice Disc." THEN
                      VATAmountLine."Inv. Disc. Base Amount" :=
                        VATAmountLine."Inv. Disc. Base Amount" + GestCodigoLinVenta.DiferenciaImporteBaseDto(Rec,QtyToHandle);
                    // VNTES.f
                  END;
              END;
              TotalVATAmount += "Amount Including VAT" - Amount;
              OnCalcVATAmountLinesOnAfterCalcLineTotals(VATAmountLine,SalesHeader,SalesLine,Currency,QtyType,TotalVATAmount);
            END;
          UNTIL NEXT = 0;
      END;

      VATAmountLine.UpdateLines(
        TotalVATAmount,Currency,SalesHeader."Currency Factor",SalesHeader."Prices Including VAT",
        SalesHeader."VAT Base Discount %",SalesHeader."Tax Area Code",SalesHeader."Tax Liable",SalesHeader."Posting Date");

      IF RoundingLineInserted AND (TotalVATAmount <> 0) THEN
        IF GetVATAmountLineOfMaxAmt(VATAmountLine,SalesLine) THEN BEGIN
          VATAmountLine."VAT Amount" += TotalVATAmount;
          VATAmountLine."Amount Including VAT" += TotalVATAmount;
          VATAmountLine."Calculated VAT Amount" += TotalVATAmount;
          VATAmountLine.MODIFY;
        END;

      OnAfterCalcVATAmountLines(SalesHeader,SalesLine,VATAmountLine,QtyType);
    END;

    [External]
    PROCEDURE GetCPGInvRoundAcc@71(VAR SalesHeader@1000 : Record 36) : Code[20];
    VAR
      Cust@1002 : Record 18;
      CustTemplate@1003 : Record 5105;
      CustPostingGroup@1004 : Record 92;
    BEGIN
      GetSalesSetup;
      IF SalesSetup."Invoice Rounding" THEN
        IF Cust.GET(SalesHeader."Bill-to Customer No.") THEN
          CustPostingGroup.GET(Cust."Customer Posting Group")
        ELSE
          IF CustTemplate.GET(SalesHeader."Sell-to Customer Template Code") THEN
            CustPostingGroup.GET(CustTemplate."Customer Posting Group");

      EXIT(CustPostingGroup."Invoice Rounding Account");
    END;

    LOCAL PROCEDURE GetVATAmountLineOfMaxAmt@231(VAR VATAmountLine@1001 : Record 290;SalesLine@1000 : Record 37) : Boolean;
    VAR
      VATAmount1@1002 : Decimal;
      VATAmount2@1003 : Decimal;
      IsPositive1@1004 : Boolean;
      IsPositive2@1005 : Boolean;
    BEGIN
      IF VATAmountLine.GET(SalesLine."VAT Identifier",SalesLine."VAT Calculation Type",SalesLine."Tax Group Code",FALSE,FALSE) THEN BEGIN
        VATAmount1 := VATAmountLine."VAT Amount";
        IsPositive1 := VATAmountLine.Positive;
      END;
      IF VATAmountLine.GET(SalesLine."VAT Identifier",SalesLine."VAT Calculation Type",SalesLine."Tax Group Code",FALSE,TRUE) THEN BEGIN
        VATAmount2 := VATAmountLine."VAT Amount";
        IsPositive2 := VATAmountLine.Positive;
      END;
      IF ABS(VATAmount1) >= ABS(VATAmount2) THEN
        EXIT(
          VATAmountLine.GET(SalesLine."VAT Identifier",SalesLine."VAT Calculation Type",SalesLine."Tax Group Code",FALSE,IsPositive1));
      EXIT(
        VATAmountLine.GET(SalesLine."VAT Identifier",SalesLine."VAT Calculation Type",SalesLine."Tax Group Code",FALSE,IsPositive2));
    END;

    LOCAL PROCEDURE CalcInvDiscToInvoice@37();
    VAR
      OldInvDiscAmtToInv@1000 : Decimal;
    BEGIN
      GetSalesHeader;
      OldInvDiscAmtToInv := "Inv. Disc. Amount to Invoice";
      IF Quantity = 0 THEN
        VALIDATE("Inv. Disc. Amount to Invoice",0)
      ELSE
        VALIDATE(
          "Inv. Disc. Amount to Invoice",
          ROUND(
            "Inv. Discount Amount" * "Qty. to Invoice" / Quantity,
            Currency."Amount Rounding Precision"));

      IF OldInvDiscAmtToInv <> "Inv. Disc. Amount to Invoice" THEN BEGIN
        "Amount Including VAT" := "Amount Including VAT" - "VAT Difference";
        "VAT Difference" := 0;
        "EC Difference" := 0;
      END;
    END;

    [External]
    PROCEDURE UpdateWithWarehouseShip@41();
    BEGIN
      IF Type = Type::Item THEN
        CASE TRUE OF
          ("Document Type" IN ["Document Type"::Quote,"Document Type"::Order]) AND (Quantity >= 0):
            IF Location.RequireShipment("Location Code") THEN
              VALIDATE("Qty. to Ship",0)
            ELSE
              VALIDATE("Qty. to Ship","Outstanding Quantity");
          ("Document Type" IN ["Document Type"::Quote,"Document Type"::Order]) AND (Quantity < 0):
            IF Location.RequireReceive("Location Code") THEN
              VALIDATE("Qty. to Ship",0)
            ELSE
              VALIDATE("Qty. to Ship","Outstanding Quantity");
          ("Document Type" = "Document Type"::"Return Order") AND (Quantity >= 0):
            IF Location.RequireReceive("Location Code") THEN
              VALIDATE("Return Qty. to Receive",0)
            ELSE
              VALIDATE("Return Qty. to Receive","Outstanding Quantity");
          ("Document Type" = "Document Type"::"Return Order") AND (Quantity < 0):
            IF Location.RequireShipment("Location Code") THEN
              VALIDATE("Return Qty. to Receive",0)
            ELSE
              VALIDATE("Return Qty. to Receive","Outstanding Quantity");
        END;

      SetDefaultQuantity;

      OnAfterUpdateWithWarehouseShip(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE CheckWarehouse@46();
    VAR
      Location2@1002 : Record 14;
      WhseSetup@1000 : Record 5769;
      ShowDialog@1001 : ' ,Message,Error';
      DialogText@1003 : Text[50];
    BEGIN
      GetLocation("Location Code");
      IF "Location Code" = '' THEN BEGIN
        WhseSetup.GET;
        Location2."Require Shipment" := WhseSetup."Require Shipment";
        Location2."Require Pick" := WhseSetup."Require Pick";
        Location2."Require Receive" := WhseSetup."Require Receive";
        Location2."Require Put-away" := WhseSetup."Require Put-away";
      END ELSE
        Location2 := Location;

      DialogText := Text035;
      IF ("Document Type" IN ["Document Type"::Order,"Document Type"::"Return Order"]) AND
         Location2."Directed Put-away and Pick"
      THEN BEGIN
        ShowDialog := ShowDialog::Error;
        IF (("Document Type" = "Document Type"::Order) AND (Quantity >= 0)) OR
           (("Document Type" = "Document Type"::"Return Order") AND (Quantity < 0))
        THEN
          DialogText :=
            DialogText + Location2.GetRequirementText(Location2.FIELDNO("Require Shipment"))
        ELSE
          DialogText :=
            DialogText + Location2.GetRequirementText(Location2.FIELDNO("Require Receive"));
      END ELSE BEGIN
        IF (("Document Type" = "Document Type"::Order) AND (Quantity >= 0) AND
            (Location2."Require Shipment" OR Location2."Require Pick")) OR
           (("Document Type" = "Document Type"::"Return Order") AND (Quantity < 0) AND
            (Location2."Require Shipment" OR Location2."Require Pick"))
        THEN BEGIN
          IF WhseValidateSourceLine.WhseLinesExist(
               DATABASE::"Sales Line",
               "Document Type",
               "Document No.",
               "Line No.",
               0,
               Quantity)
          THEN
            ShowDialog := ShowDialog::Error
          ELSE
            IF Location2."Require Shipment" THEN
              ShowDialog := ShowDialog::Message;
          IF Location2."Require Shipment" THEN
            DialogText :=
              DialogText + Location2.GetRequirementText(Location2.FIELDNO("Require Shipment"))
          ELSE BEGIN
            DialogText := Text036;
            DialogText :=
              DialogText + Location2.GetRequirementText(Location2.FIELDNO("Require Pick"));
          END;
        END;

        IF (("Document Type" = "Document Type"::Order) AND (Quantity < 0) AND
            (Location2."Require Receive" OR Location2."Require Put-away")) OR
           (("Document Type" = "Document Type"::"Return Order") AND (Quantity >= 0) AND
            (Location2."Require Receive" OR Location2."Require Put-away"))
        THEN BEGIN
          IF WhseValidateSourceLine.WhseLinesExist(
               DATABASE::"Sales Line",
               "Document Type",
               "Document No.",
               "Line No.",
               0,
               Quantity)
          THEN
            ShowDialog := ShowDialog::Error
          ELSE
            IF Location2."Require Receive" THEN
              ShowDialog := ShowDialog::Message;
          IF Location2."Require Receive" THEN
            DialogText :=
              DialogText + Location2.GetRequirementText(Location2.FIELDNO("Require Receive"))
          ELSE BEGIN
            DialogText := Text036;
            DialogText :=
              DialogText + Location2.GetRequirementText(Location2.FIELDNO("Require Put-away"));
          END;
        END;
      END;

      OnCheckWarehouseOnBeforeShowDialog(Rec,Location2,ShowDialog,DialogText);

      CASE ShowDialog OF
        ShowDialog::Message:
          MESSAGE(WhseRequirementMsg,DialogText);
        ShowDialog::Error:
          ERROR(Text016,DialogText,FIELDCAPTION("Line No."),"Line No.");
      END;

      HandleDedicatedBin(TRUE);
    END;

    LOCAL PROCEDURE UpdateDates@43();
    BEGIN
      IF CurrFieldNo = 0 THEN BEGIN
        PlannedShipmentDateCalculated := FALSE;
        PlannedDeliveryDateCalculated := FALSE;
      END;
      IF "Promised Delivery Date" <> 0D THEN
        VALIDATE("Promised Delivery Date")
      ELSE
        IF "Requested Delivery Date" <> 0D THEN
          VALIDATE("Requested Delivery Date")
        ELSE
          VALIDATE("Shipment Date");

      OnAfterUpdateDates(Rec);
    END;

    [External]
    PROCEDURE GetItemTranslation@42();
    VAR
      ItemTranslation@1000 : Record 30;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeGetItemTranslation(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      GetSalesHeader;
      IF ItemTranslation.GET("No.","Variant Code",SalesHeader."Language Code") THEN BEGIN
        Description := ItemTranslation.Description;
        "Description 2" := ItemTranslation."Description 2";
        OnAfterGetItemTranslation(Rec,SalesHeader,ItemTranslation);
      END;
    END;

    LOCAL PROCEDURE GetLocation@7300(LocationCode@1000 : Code[10]);
    BEGIN
      IF LocationCode = '' THEN
        CLEAR(Location)
      ELSE
        IF Location.Code <> LocationCode THEN
          Location.GET(LocationCode);
    END;

    [External]
    PROCEDURE PriceExists@44() : Boolean;
    BEGIN
      IF "Document No." <> '' THEN BEGIN
        GetSalesHeader;
        EXIT(PriceCalcMgt.SalesLinePriceExists(SalesHeader,Rec,TRUE));
      END;
      EXIT(FALSE);
    END;

    [External]
    PROCEDURE LineDiscExists@45() : Boolean;
    BEGIN
      IF "Document No." <> '' THEN BEGIN
        GetSalesHeader;
        EXIT(PriceCalcMgt.SalesLineLineDiscExists(SalesHeader,Rec,TRUE));
      END;
      EXIT(FALSE);
    END;

    [External]
    PROCEDURE RowID1@47() : Text[250];
    VAR
      ItemTrackingMgt@1000 : Codeunit 6500;
    BEGIN
      EXIT(ItemTrackingMgt.ComposeRowID(DATABASE::"Sales Line","Document Type",
          "Document No.",'',0,"Line No."));
    END;

    LOCAL PROCEDURE UpdateItemCrossRef@48();
    BEGIN
      DistIntegration.EnterSalesItemCrossRef(Rec);
      UpdateICPartner;

      OnAfterUpdateItemCrossRef(Rec);
    END;

    LOCAL PROCEDURE GetDefaultBin@50();
    VAR
      WMSManagement@1000 : Codeunit 7302;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeGetDefaultBin(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF Type <> Type::Item THEN
        EXIT;

      "Bin Code" := '';
      IF "Drop Shipment" THEN
        EXIT;

      IF ("Location Code" <> '') AND ("No." <> '') THEN BEGIN
        GetLocation("Location Code");
        IF Location."Bin Mandatory" AND NOT Location."Directed Put-away and Pick" THEN BEGIN
          IF ("Qty. to Assemble to Order" > 0) OR IsAsmToOrderRequired THEN
            IF GetATOBin(Location,"Bin Code") THEN
              EXIT;

          WMSManagement.GetDefaultBin("No.","Variant Code","Location Code","Bin Code");
          HandleDedicatedBin(FALSE);
        END;
      END;
    END;

    [External]
    PROCEDURE GetATOBin@89(Location@1001 : Record 14;VAR BinCode@1002 : Code[20]) : Boolean;
    VAR
      AsmHeader@1000 : Record 900;
    BEGIN
      IF NOT Location."Require Shipment" THEN
        BinCode := Location."Asm.-to-Order Shpt. Bin Code";
      IF BinCode <> '' THEN
        EXIT(TRUE);

      IF AsmHeader.GetFromAssemblyBin(Location,BinCode) THEN
        EXIT(TRUE);

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE IsInbound@97() : Boolean;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Order,"Document Type"::Invoice,"Document Type"::Quote,"Document Type"::"Blanket Order":
          EXIT("Quantity (Base)" < 0);
        "Document Type"::"Return Order","Document Type"::"Credit Memo":
          EXIT("Quantity (Base)" > 0);
      END;

      EXIT(FALSE);
    END;

    LOCAL PROCEDURE HandleDedicatedBin@70(IssueWarning@1001 : Boolean);
    VAR
      WhseIntegrationMgt@1002 : Codeunit 7317;
    BEGIN
      IF NOT IsInbound AND ("Quantity (Base)" <> 0) THEN
        WhseIntegrationMgt.CheckIfBinDedicatedOnSrcDoc("Location Code","Bin Code",IssueWarning);
    END;

    [External]
    PROCEDURE CheckAssocPurchOrder@51(TheFieldCaption@1000 : Text[250]);
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeCheckAssocPurchOrder(Rec,TheFieldCaption,IsHandled,xRec);
      IF IsHandled THEN
        EXIT;

      IF TheFieldCaption = '' THEN BEGIN // If sales line is being deleted
        IF "Purch. Order Line No." <> 0 THEN
          ERROR(Text000,"Purchase Order No.","Purch. Order Line No.");
        IF "Special Order Purch. Line No." <> 0 THEN
          CheckPurchOrderLineDeleted("Special Order Purchase No.","Special Order Purch. Line No.");
      END ELSE BEGIN
        IF "Purch. Order Line No." <> 0 THEN
          ERROR(Text002,TheFieldCaption,"Purchase Order No.","Purch. Order Line No.");

        IF "Special Order Purch. Line No." <> 0 THEN
          ERROR(Text002,TheFieldCaption,"Special Order Purchase No.","Special Order Purch. Line No.");
      END;
    END;

    LOCAL PROCEDURE CheckPurchOrderLineDeleted@209(PurchaseOrderNo@1001 : Code[20];PurchaseLineNo@1002 : Integer);
    VAR
      PurchaseLine@1000 : Record 39;
    BEGIN
      IF PurchaseLine.GET(PurchaseLine."Document Type"::Order,PurchaseOrderNo,PurchaseLineNo) THEN
        ERROR(Text000,PurchaseOrderNo,PurchaseLineNo);
    END;

    [External]
    PROCEDURE CrossReferenceNoLookUp@53();
    VAR
      ItemCrossReference@1000 : Record 5717;
      ICGLAcc@1001 : Record 410;
    BEGIN
      CASE Type OF
        Type::Item:
          BEGIN
            GetSalesHeader;
            ItemCrossReference.RESET;
            ItemCrossReference.SETCURRENTKEY("Cross-Reference Type","Cross-Reference Type No.");
            ItemCrossReference.SETFILTER(
              "Cross-Reference Type",'%1|%2',
              ItemCrossReference."Cross-Reference Type"::Customer,
              ItemCrossReference."Cross-Reference Type"::" ");
            ItemCrossReference.SETFILTER("Cross-Reference Type No.",'%1|%2',SalesHeader."Sell-to Customer No.",'');
            IF PAGE.RUNMODAL(PAGE::"Cross Reference List",ItemCrossReference) = ACTION::LookupOK THEN BEGIN
              "Cross-Reference No." := ItemCrossReference."Cross-Reference No.";
              ValidateCrossReferenceNo(ItemCrossReference,FALSE);
              PriceCalcMgt.FindSalesLineLineDisc(SalesHeader,Rec);
              PriceCalcMgt.FindSalesLinePrice(SalesHeader,Rec,FIELDNO("Cross-Reference No."));
              OnCrossReferenceNoLookupOnBeforeValidateUnitPrice(SalesHeader,Rec);
              VALIDATE("Unit Price");
            END;
          END;
        Type::"G/L Account",Type::Resource:
          BEGIN
            GetSalesHeader;
            SalesHeader.TESTFIELD("Sell-to IC Partner Code");
            IF PAGE.RUNMODAL(PAGE::"IC G/L Account List",ICGLAcc) = ACTION::LookupOK THEN
              "Cross-Reference No." := ICGLAcc."No.";
          END;
      END;
    END;

    LOCAL PROCEDURE ValidateCrossReferenceNo@211(ItemCrossReference@1001 : Record 5717;SearchItem@1000 : Boolean);
    VAR
      ReturnedItemCrossReference@1002 : Record 5717;
    BEGIN
      ReturnedItemCrossReference.INIT;
      IF "Cross-Reference No." <> '' THEN BEGIN
        IF SearchItem THEN
          DistIntegration.ICRLookupSalesItem(Rec,ReturnedItemCrossReference,CurrFieldNo <> 0)
        ELSE
          ReturnedItemCrossReference := ItemCrossReference;

        OnBeforeCrossReferenceNoAssign(Rec,ReturnedItemCrossReference);

        IF "No." <> ReturnedItemCrossReference."Item No." THEN
          VALIDATE("No.",ReturnedItemCrossReference."Item No.");
        IF ReturnedItemCrossReference."Variant Code" <> '' THEN
          VALIDATE("Variant Code",ReturnedItemCrossReference."Variant Code");

        IF ReturnedItemCrossReference."Unit of Measure" <> '' THEN
          VALIDATE("Unit of Measure Code",ReturnedItemCrossReference."Unit of Measure");
      END;

      "Unit of Measure (Cross Ref.)" := ReturnedItemCrossReference."Unit of Measure";
      "Cross-Reference Type" := ReturnedItemCrossReference."Cross-Reference Type";
      "Cross-Reference Type No." := ReturnedItemCrossReference."Cross-Reference Type No.";
      "Cross-Reference No." := ReturnedItemCrossReference."Cross-Reference No.";

      IF (ReturnedItemCrossReference.Description <> '') OR (ReturnedItemCrossReference."Description 2" <> '') THEN BEGIN
        Description := ReturnedItemCrossReference.Description;
        "Description 2" := ReturnedItemCrossReference."Description 2";
      END;

      UpdateUnitPrice(FIELDNO("Cross-Reference No."));
      UpdateICPartner;

      OnAfterValidateCrossReferenceNo(Rec,ItemCrossReference);
    END;

    LOCAL PROCEDURE CheckServItemCreation@52();
    VAR
      Item@1001 : Record 27;
      ServItemGroup@1000 : Record 5904;
    BEGIN
      IF CurrFieldNo = 0 THEN
        EXIT;
      IF Type <> Type::Item THEN
        EXIT;
      GetItem(Item);
      IF Item."Service Item Group" = '' THEN
        EXIT;
      IF ServItemGroup.GET(Item."Service Item Group") THEN
        IF ServItemGroup."Create Service Item" THEN
          IF "Qty. to Ship (Base)" <> ROUND("Qty. to Ship (Base)",1) THEN
            ERROR(
              Text034,
              FIELDCAPTION("Qty. to Ship (Base)"),
              ServItemGroup.FIELDCAPTION("Create Service Item"));
    END;

    [External]
    PROCEDURE ItemExists@54(ItemNo@1000 : Code[20]) : Boolean;
    VAR
      Item2@1001 : Record 27;
    BEGIN
      IF Type = Type::Item THEN
        IF NOT Item2.GET(ItemNo) THEN
          EXIT(FALSE);
      EXIT(TRUE);
    END;

    [External]
    PROCEDURE IsShipment@55() : Boolean;
    BEGIN
      EXIT(SignedXX("Quantity (Base)") < 0);
    END;

    LOCAL PROCEDURE GetAbsMin@56(QtyToHandle@1000 : Decimal;QtyHandled@1001 : Decimal) : Decimal;
    BEGIN
      IF ABS(QtyHandled) < ABS(QtyToHandle) THEN
        EXIT(QtyHandled);

      EXIT(QtyToHandle);
    END;

    [External]
    PROCEDURE SetHideValidationDialog@57(NewHideValidationDialog@1000 : Boolean);
    BEGIN
      HideValidationDialog := NewHideValidationDialog;
    END;

    [External]
    PROCEDURE GetHideValidationDialog@123() : Boolean;
    VAR
      IdentityManagement@1000 : Codeunit 9801;
    BEGIN
      EXIT(HideValidationDialog OR IdentityManagement.IsInvAppId);
    END;

    LOCAL PROCEDURE CheckApplFromItemLedgEntry@157(VAR ItemLedgEntry@1000 : Record 32);
    VAR
      ItemTrackingLines@1003 : Page 6510;
      QtyNotReturned@1002 : Decimal;
      QtyReturned@1004 : Decimal;
    BEGIN
      IF "Appl.-from Item Entry" = 0 THEN
        EXIT;

      IF "Shipment No." <> '' THEN
        EXIT;

      TESTFIELD(Type,Type::Item);
      TESTFIELD(Quantity);
      IF IsCreditDocType THEN BEGIN
        IF Quantity < 0 THEN
          FIELDERROR(Quantity,Text029);
      END ELSE BEGIN
        IF Quantity > 0 THEN
          FIELDERROR(Quantity,Text030);
      END;

      ItemLedgEntry.GET("Appl.-from Item Entry");
      ItemLedgEntry.TESTFIELD(Positive,FALSE);
      ItemLedgEntry.TESTFIELD("Item No.","No.");
      ItemLedgEntry.TESTFIELD("Variant Code","Variant Code");
      IF ItemLedgEntry.TrackingExists THEN
        ERROR(Text040,ItemTrackingLines.CAPTION,FIELDCAPTION("Appl.-from Item Entry"));

      IF ABS("Quantity (Base)") > -ItemLedgEntry.Quantity THEN
        ERROR(
          Text046,
          -ItemLedgEntry.Quantity,ItemLedgEntry.FIELDCAPTION("Document No."),
          ItemLedgEntry."Document No.");

      IF IsCreditDocType THEN
        IF ABS("Outstanding Qty. (Base)") > -ItemLedgEntry."Shipped Qty. Not Returned" THEN BEGIN
          QtyNotReturned := ItemLedgEntry."Shipped Qty. Not Returned";
          QtyReturned := ItemLedgEntry.Quantity - ItemLedgEntry."Shipped Qty. Not Returned";
          IF "Qty. per Unit of Measure" <> 0 THEN BEGIN
            QtyNotReturned :=
              ROUND(ItemLedgEntry."Shipped Qty. Not Returned" / "Qty. per Unit of Measure",UOMMgt.QtyRndPrecision);
            QtyReturned :=
              ROUND(
                (ItemLedgEntry.Quantity - ItemLedgEntry."Shipped Qty. Not Returned") /
                "Qty. per Unit of Measure",UOMMgt.QtyRndPrecision);
          END;
          ERROR(
            Text039,
            -QtyReturned,ItemLedgEntry.FIELDCAPTION("Document No."),
            ItemLedgEntry."Document No.",-QtyNotReturned);
        END;
    END;

    [External]
    PROCEDURE CalcPrepaymentToDeduct@63();
    BEGIN
      IF ("Qty. to Invoice" <> 0) AND ("Prepmt. Amt. Inv." <> 0) THEN BEGIN
        GetSalesHeader;
        IF ("Prepayment %" = 100) AND NOT IsFinalInvoice THEN
          "Prepmt Amt to Deduct" := GetLineAmountToHandle("Qty. to Invoice")
        ELSE
          "Prepmt Amt to Deduct" :=
            ROUND(
              ("Prepmt. Amt. Inv." - "Prepmt Amt Deducted") *
              "Qty. to Invoice" / (Quantity - "Quantity Invoiced"),Currency."Amount Rounding Precision")
      END ELSE
        "Prepmt Amt to Deduct" := 0
    END;

    [External]
    PROCEDURE IsFinalInvoice@116() : Boolean;
    BEGIN
      EXIT("Qty. to Invoice" = Quantity - "Quantity Invoiced");
    END;

    [External]
    PROCEDURE GetLineAmountToHandle@117(QtyToHandle@1002 : Decimal) : Decimal;
    VAR
      LineAmount@1001 : Decimal;
      LineDiscAmount@1000 : Decimal;
    BEGIN
      IF "Line Discount %" = 100 THEN
        EXIT(0);

      GetSalesHeader;

      IF "Prepmt Amt to Deduct" = 0 THEN
        LineAmount := ROUND(QtyToHandle * "Unit Price",Currency."Amount Rounding Precision")
      ELSE BEGIN
        LineAmount := ROUND(Quantity * "Unit Price",Currency."Amount Rounding Precision");
        LineAmount := ROUND(QtyToHandle * LineAmount / Quantity,Currency."Amount Rounding Precision");
      END;

      IF QtyToHandle <> Quantity THEN
        LineDiscAmount := ROUND(LineAmount * "Line Discount %" / 100,Currency."Amount Rounding Precision")
      ELSE
        LineDiscAmount := "Line Discount Amount";

      OnAfterGetLineAmountToHandle(Rec,QtyToHandle,LineAmount,LineDiscAmount);
      EXIT(LineAmount - LineDiscAmount);
    END;

    [External]
    PROCEDURE GetLineAmountToHandleInclPrepmt@265(QtyToHandle@1002 : Decimal) : Decimal;
    BEGIN
      IF "Line Discount %" = 100 THEN
        EXIT(0);
      IF ("Prepayment %" = 100) AND NOT "Prepayment Line" AND ("Prepmt Amt to Deduct" <> 0) THEN
        EXIT("Prepmt Amt to Deduct");
      EXIT(GetLineAmountToHandle(QtyToHandle));
    END;

    [External]
    PROCEDURE GetLineAmountExclVAT@349() : Decimal;
    BEGIN
      IF "Document No." = '' THEN
        EXIT(0);
      GetSalesHeader;
      IF NOT SalesHeader."Prices Including VAT" THEN
        EXIT("Line Amount");

      EXIT(ROUND("Line Amount" / (1 + "VAT %" / 100),Currency."Amount Rounding Precision"));
    END;

    [External]
    PROCEDURE GetLineAmountInclVAT@351() : Decimal;
    BEGIN
      IF "Document No." = '' THEN
        EXIT(0);
      GetSalesHeader;
      IF SalesHeader."Prices Including VAT" THEN
        EXIT("Line Amount");

      EXIT(ROUND("Line Amount" * (1 + "VAT %" / 100),Currency."Amount Rounding Precision"));
    END;

    [External]
    PROCEDURE SetHasBeenShown@59();
    BEGIN
      HasBeenShown := TRUE;
    END;

    LOCAL PROCEDURE TestJobPlanningLine@60();
    VAR
      JobPostLine@1000 : Codeunit 1001;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeTestJobPlanningLine(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF "Job Contract Entry No." = 0 THEN
        EXIT;

      JobPostLine.TestSalesLine(Rec);
    END;

    [External]
    PROCEDURE BlockDynamicTracking@58(SetBlock@1000 : Boolean);
    BEGIN
      ReserveSalesLine.Block(SetBlock);
    END;

    [External]
    PROCEDURE InitQtyToShip2@7();
    BEGIN
      "Qty. to Ship" := "Outstanding Quantity";
      "Qty. to Ship (Base)" := "Outstanding Qty. (Base)";

      OnAfterInitQtyToShip2(Rec,CurrFieldNo);

      ATOLink.UpdateQtyToAsmFromSalesLine(Rec);

      CheckServItemCreation;

      "Qty. to Invoice" := MaxQtyToInvoice;
      "Qty. to Invoice (Base)" := MaxQtyToInvoiceBase;
      "VAT Difference" := 0;

      OnInitQtyToShip2OnBeforeCalcInvDiscToInvoice(Rec,xRec);

      CalcInvDiscToInvoice;

      CalcPrepaymentToDeduct;
    END;

    [External]
    PROCEDURE ShowLineComments@61();
    VAR
      SalesCommentLine@1000 : Record 44;
      SalesCommentSheet@1001 : Page 67;
    BEGIN
      TESTFIELD("Document No.");
      TESTFIELD("Line No.");
      SalesCommentLine.SETRANGE("Document Type","Document Type");
      SalesCommentLine.SETRANGE("No.","Document No.");
      SalesCommentLine.SETRANGE("Document Line No.","Line No.");
      SalesCommentSheet.SETTABLEVIEW(SalesCommentLine);
      SalesCommentSheet.RUNMODAL;
    END;

    [External]
    PROCEDURE SetDefaultQuantity@62();
    BEGIN
      GetSalesSetup;
      IF SalesSetup."Default Quantity to Ship" = SalesSetup."Default Quantity to Ship"::Blank THEN BEGIN
        IF ("Document Type" = "Document Type"::Order) OR ("Document Type" = "Document Type"::Quote) THEN BEGIN
          "Qty. to Ship" := 0;
          "Qty. to Ship (Base)" := 0;
          "Qty. to Invoice" := 0;
          "Qty. to Invoice (Base)" := 0;
        END;
        IF "Document Type" = "Document Type"::"Return Order" THEN BEGIN
          "Return Qty. to Receive" := 0;
          "Return Qty. to Receive (Base)" := 0;
          "Qty. to Invoice" := 0;
          "Qty. to Invoice (Base)" := 0;
        END;
      END;

      OnAfterSetDefaultQuantity(Rec,xRec);
    END;

    LOCAL PROCEDURE SetReserveWithoutPurchasingCode@198();
    VAR
      Item@1000 : Record 27;
    BEGIN
      GetItem(Item);
      IF Item.Reserve = Item.Reserve::Optional THEN BEGIN
        GetSalesHeader;
        Reserve := SalesHeader.Reserve;
      END ELSE
        Reserve := Item.Reserve;

      OnAfterSetReserveWithoutPurchasingCode(Rec,SalesHeader,Item);
    END;

    LOCAL PROCEDURE SetDefaultItemQuantity@122();
    BEGIN
      GetSalesSetup;
      IF SalesSetup."Default Item Quantity" THEN BEGIN
        VALIDATE(Quantity,1);
        CheckItemAvailable(CurrFieldNo);
      END;
    END;

    [External]
    PROCEDURE UpdatePrePaymentAmounts@64();
    VAR
      ShipmentLine@1000 : Record 111;
      SalesOrderLine@1001 : Record 37;
      SalesOrderHeader@1002 : Record 36;
    BEGIN
      IF ("Document Type" <> "Document Type"::Invoice) OR ("Prepayment %" = 0) THEN
        EXIT;

      IF NOT ShipmentLine.GET("Shipment No.","Shipment Line No.") THEN BEGIN
        "Prepmt Amt to Deduct" := 0;
        "Prepmt VAT Diff. to Deduct" := 0;
      END ELSE
        IF SalesOrderLine.GET(SalesOrderLine."Document Type"::Order,ShipmentLine."Order No.",ShipmentLine."Order Line No.") THEN BEGIN
          IF ("Prepayment %" = 100) AND (Quantity <> SalesOrderLine.Quantity - SalesOrderLine."Quantity Invoiced") THEN
            "Prepmt Amt to Deduct" := "Line Amount"
          ELSE
            "Prepmt Amt to Deduct" :=
              ROUND((SalesOrderLine."Prepmt. Amt. Inv." - SalesOrderLine."Prepmt Amt Deducted") *
                Quantity / (SalesOrderLine.Quantity - SalesOrderLine."Quantity Invoiced"),Currency."Amount Rounding Precision");
          "Prepmt VAT Diff. to Deduct" := "Prepayment VAT Difference" - "Prepmt VAT Diff. Deducted";
          SalesOrderHeader.GET(SalesOrderHeader."Document Type"::Order,SalesOrderLine."Document No.");
        END ELSE BEGIN
          "Prepmt Amt to Deduct" := 0;
          "Prepmt VAT Diff. to Deduct" := 0;
        END;

      GetSalesHeader;
      SalesHeader.TESTFIELD("Prices Including VAT",SalesOrderHeader."Prices Including VAT");
      IF SalesHeader."Prices Including VAT" THEN BEGIN
        "Prepmt. Amt. Incl. VAT" := "Prepmt Amt to Deduct";
        "Prepayment Amount" :=
          ROUND(
            "Prepmt Amt to Deduct" / (1 + ("Prepayment VAT %" / 100)),
            Currency."Amount Rounding Precision");
      END ELSE BEGIN
        "Prepmt. Amt. Incl. VAT" :=
          ROUND(
            "Prepmt Amt to Deduct" * (1 + ("Prepayment VAT %" / 100)),
            Currency."Amount Rounding Precision");
        "Prepayment Amount" := "Prepmt Amt to Deduct";
      END;
      "Prepmt. Line Amount" := "Prepmt Amt to Deduct";
      "Prepmt. Amt. Inv." := "Prepmt. Line Amount";
      "Prepmt. VAT Base Amt." := "Prepayment Amount";
      "Prepmt. Amount Inv. Incl. VAT" := "Prepmt. Amt. Incl. VAT";
      "Prepmt Amt Deducted" := 0;
    END;

    [External]
    PROCEDURE ZeroAmountLine@65(QtyType@1000 : 'General,Invoicing,Shipping') : Boolean;
    BEGIN
      IF NOT HasTypeToFillMandatoryFields THEN
        EXIT(TRUE);
      IF Quantity = 0 THEN
        EXIT(TRUE);
      IF "Unit Price" = 0 THEN
        EXIT(TRUE);
      IF QtyType = QtyType::Invoicing THEN
        IF "Qty. to Invoice" = 0 THEN
          EXIT(TRUE);
      EXIT(FALSE);
    END;

    [External]
    PROCEDURE FilterLinesWithItemToPlan@69(VAR Item@1000 : Record 27;DocumentType@1001 : Option);
    BEGIN
      RESET;
      SETCURRENTKEY("Document Type",Type,"No.","Variant Code","Drop Shipment","Location Code","Shipment Date");
      SETRANGE("Document Type",DocumentType);
      SETRANGE(Type,Type::Item);
      SETRANGE("No.",Item."No.");
      SETFILTER("Variant Code",Item.GETFILTER("Variant Filter"));
      SETFILTER("Location Code",Item.GETFILTER("Location Filter"));
      SETFILTER("Drop Shipment",Item.GETFILTER("Drop Shipment Filter"));
      SETFILTER("Shortcut Dimension 1 Code",Item.GETFILTER("Global Dimension 1 Filter"));
      SETFILTER("Shortcut Dimension 2 Code",Item.GETFILTER("Global Dimension 2 Filter"));
      SETFILTER("Shipment Date",Item.GETFILTER("Date Filter"));
      SETFILTER("Outstanding Qty. (Base)",'<>0');

      OnAfterFilterLinesWithItemToPlan(Rec,Item,DocumentType);
    END;

    [External]
    PROCEDURE FindLinesWithItemToPlan@66(VAR Item@1000 : Record 27;DocumentType@1001 : Option) : Boolean;
    BEGIN
      FilterLinesWithItemToPlan(Item,DocumentType);
      EXIT(FIND('-'));
    END;

    [External]
    PROCEDURE LinesWithItemToPlanExist@67(VAR Item@1000 : Record 27;DocumentType@1001 : Option) : Boolean;
    BEGIN
      FilterLinesWithItemToPlan(Item,DocumentType);
      EXIT(NOT ISEMPTY);
    END;

    LOCAL PROCEDURE DateFormularZero@73(VAR DateFormularValue@1001 : DateFormula;CalledByFieldNo@1002 : Integer;CalledByFieldCaption@1003 : Text[250]);
    VAR
      DateFormularZero@1000 : DateFormula;
    BEGIN
      EVALUATE(DateFormularZero,'<0D>');
      IF (DateFormularValue <> DateFormularZero) AND (CalledByFieldNo = CurrFieldNo) THEN
        ERROR(Text051,CalledByFieldCaption,FIELDCAPTION("Drop Shipment"));
      EVALUATE(DateFormularValue,'<0D>');
    END;

    LOCAL PROCEDURE InitQtyToAsm@76();
    BEGIN
      OnBeforeInitQtyToAsm(Rec,CurrFieldNo);

      IF NOT IsAsmToOrderAllowed THEN BEGIN
        "Qty. to Assemble to Order" := 0;
        "Qty. to Asm. to Order (Base)" := 0;
        EXIT;
      END;

      IF ((xRec."Qty. to Asm. to Order (Base)" = 0) AND IsAsmToOrderRequired AND ("Qty. Shipped (Base)" = 0)) OR
         ((xRec."Qty. to Asm. to Order (Base)" <> 0) AND
          (xRec."Qty. to Asm. to Order (Base)" = xRec."Quantity (Base)")) OR
         ("Qty. to Asm. to Order (Base)" > "Quantity (Base)")
      THEN BEGIN
        "Qty. to Assemble to Order" := Quantity;
        "Qty. to Asm. to Order (Base)" := "Quantity (Base)";
      END;

      OnAfterInitQtyToAsm(Rec,CurrFieldNo)
    END;

    [External]
    PROCEDURE AsmToOrderExists@72(VAR AsmHeader@1000 : Record 900) : Boolean;
    VAR
      ATOLink@1001 : Record 904;
    BEGIN
      IF NOT ATOLink.AsmExistsForSalesLine(Rec) THEN
        EXIT(FALSE);
      EXIT(AsmHeader.GET(ATOLink."Assembly Document Type",ATOLink."Assembly Document No."));
    END;

    [External]
    PROCEDURE FullQtyIsForAsmToOrder@74() : Boolean;
    BEGIN
      IF "Qty. to Asm. to Order (Base)" = 0 THEN
        EXIT(FALSE);
      EXIT("Quantity (Base)" = "Qty. to Asm. to Order (Base)");
    END;

    LOCAL PROCEDURE FullReservedQtyIsForAsmToOrder@75() : Boolean;
    BEGIN
      IF "Qty. to Asm. to Order (Base)" = 0 THEN
        EXIT(FALSE);
      CALCFIELDS("Reserved Qty. (Base)");
      EXIT("Reserved Qty. (Base)" = "Qty. to Asm. to Order (Base)");
    END;

    [External]
    PROCEDURE QtyBaseOnATO@86() : Decimal;
    VAR
      AsmHeader@1000 : Record 900;
    BEGIN
      IF AsmToOrderExists(AsmHeader) THEN
        EXIT(AsmHeader."Quantity (Base)");
      EXIT(0);
    END;

    [External]
    PROCEDURE QtyAsmRemainingBaseOnATO@90() : Decimal;
    VAR
      AsmHeader@1000 : Record 900;
    BEGIN
      IF AsmToOrderExists(AsmHeader) THEN
        EXIT(AsmHeader."Remaining Quantity (Base)");
      EXIT(0);
    END;

    [External]
    PROCEDURE QtyToAsmBaseOnATO@88() : Decimal;
    VAR
      AsmHeader@1000 : Record 900;
    BEGIN
      IF AsmToOrderExists(AsmHeader) THEN
        EXIT(AsmHeader."Quantity to Assemble (Base)");
      EXIT(0);
    END;

    [External]
    PROCEDURE IsAsmToOrderAllowed@77() : Boolean;
    BEGIN
      IF NOT ("Document Type" IN ["Document Type"::Quote,"Document Type"::"Blanket Order","Document Type"::Order]) THEN
        EXIT(FALSE);
      IF Quantity < 0 THEN
        EXIT(FALSE);
      IF Type <> Type::Item THEN
        EXIT(FALSE);
      IF "No." = '' THEN
        EXIT(FALSE);
      IF "Drop Shipment" OR "Special Order" THEN
        EXIT(FALSE);
      EXIT(TRUE)
    END;

    [External]
    PROCEDURE IsAsmToOrderRequired@81() : Boolean;
    VAR
      Item@1000 : Record 27;
      Result@1002 : Boolean;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      Result := FALSE;
      OnBeforeIsAsmToOrderRequired(Rec,Result,IsHandled);
      IF IsHandled THEN
        EXIT(Result);

      IF (Type <> Type::Item) OR ("No." = '') THEN
        EXIT(FALSE);
      GetItem(Item);
      IF GetSKU THEN
        EXIT(SKU."Assembly Policy" = SKU."Assembly Policy"::"Assemble-to-Order");
      EXIT(Item."Assembly Policy" = Item."Assembly Policy"::"Assemble-to-Order");
    END;

    [External]
    PROCEDURE CheckAsmToOrder@85(AsmHeader@1001 : Record 900);
    BEGIN
      TESTFIELD("Qty. to Assemble to Order",AsmHeader.Quantity);
      TESTFIELD("Document Type",AsmHeader."Document Type");
      TESTFIELD(Type,Type::Item);
      TESTFIELD("No.",AsmHeader."Item No.");
      TESTFIELD("Location Code",AsmHeader."Location Code");
      TESTFIELD("Unit of Measure Code",AsmHeader."Unit of Measure Code");
      TESTFIELD("Variant Code",AsmHeader."Variant Code");
      TESTFIELD("Shipment Date",AsmHeader."Due Date");
      IF "Document Type" = "Document Type"::Order THEN BEGIN
        AsmHeader.CALCFIELDS("Reserved Qty. (Base)");
        AsmHeader.TESTFIELD("Reserved Qty. (Base)",AsmHeader."Remaining Quantity (Base)");
      END;
      TESTFIELD("Qty. to Asm. to Order (Base)",AsmHeader."Quantity (Base)");
      IF "Outstanding Qty. (Base)" < AsmHeader."Remaining Quantity (Base)" THEN
        AsmHeader.FIELDERROR("Remaining Quantity (Base)",STRSUBSTNO(Text045,AsmHeader."Remaining Quantity (Base)"));
    END;

    [External]
    PROCEDURE ShowAsmToOrderLines@80();
    VAR
      ATOLink@1000 : Record 904;
    BEGIN
      ATOLink.ShowAsmToOrderLines(Rec);
    END;

    [External]
    PROCEDURE FindOpenATOEntry@96(LotNo@1003 : Code[50];SerialNo@1004 : Code[50]) : Integer;
    VAR
      PostedATOLink@1002 : Record 914;
      ItemLedgEntry@1001 : Record 32;
    BEGIN
      TESTFIELD("Document Type","Document Type"::Order);
      IF PostedATOLink.FindLinksFromSalesLine(Rec) THEN
        REPEAT
          ItemLedgEntry.SETRANGE("Document Type",ItemLedgEntry."Document Type"::"Posted Assembly");
          ItemLedgEntry.SETRANGE("Document No.",PostedATOLink."Assembly Document No.");
          ItemLedgEntry.SETRANGE("Document Line No.",0);
          ItemLedgEntry.SetTrackingFilter(SerialNo,LotNo);
          ItemLedgEntry.SETRANGE(Open,TRUE);
          IF ItemLedgEntry.FINDFIRST THEN
            EXIT(ItemLedgEntry."Entry No.");
        UNTIL PostedATOLink.NEXT = 0;
    END;

    [External]
    PROCEDURE RollUpAsmCost@83();
    BEGIN
      ATOLink.RollUpCost(Rec);
    END;

    [External]
    PROCEDURE RollupAsmPrice@84();
    BEGIN
      GetSalesHeader;
      ATOLink.RollUpPrice(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE UpdateICPartner@78();
    VAR
      ICPartner@1000 : Record 413;
      ItemCrossReference@1001 : Record 5717;
    BEGIN
      IF SalesHeader."Send IC Document" AND
         (SalesHeader."IC Direction" = SalesHeader."IC Direction"::Outgoing) AND
         (SalesHeader."Bill-to IC Partner Code" <> '')
      THEN
        CASE Type OF
          Type::" ",Type::"Charge (Item)":
            BEGIN
              "IC Partner Ref. Type" := Type;
              "IC Partner Reference" := "No.";
            END;
          Type::"G/L Account":
            BEGIN
              "IC Partner Ref. Type" := Type;
              "IC Partner Reference" := GLAcc."Default IC Partner G/L Acc. No";
            END;
          Type::Item:
            BEGIN
              IF SalesHeader."Sell-to IC Partner Code" <> '' THEN
                ICPartner.GET(SalesHeader."Sell-to IC Partner Code")
              ELSE
                ICPartner.GET(SalesHeader."Bill-to IC Partner Code");
              CASE ICPartner."Outbound Sales Item No. Type" OF
                ICPartner."Outbound Sales Item No. Type"::"Common Item No.":
                  VALIDATE("IC Partner Ref. Type","IC Partner Ref. Type"::"Common Item No.");
                ICPartner."Outbound Sales Item No. Type"::"Internal No.",
                ICPartner."Outbound Sales Item No. Type"::"Cross Reference":
                  BEGIN
                    IF ICPartner."Outbound Sales Item No. Type" = ICPartner."Outbound Sales Item No. Type"::"Internal No." THEN
                      VALIDATE("IC Partner Ref. Type","IC Partner Ref. Type"::Item)
                    ELSE
                      VALIDATE("IC Partner Ref. Type","IC Partner Ref. Type"::"Cross Reference");
                    ItemCrossReference.SETRANGE("Cross-Reference Type",ItemCrossReference."Cross-Reference Type"::Customer);
                    ItemCrossReference.SETRANGE("Cross-Reference Type No.","Sell-to Customer No.");
                    ItemCrossReference.SETRANGE("Item No.","No.");
                    ItemCrossReference.SETRANGE("Variant Code","Variant Code");
                    ItemCrossReference.SETRANGE("Unit of Measure","Unit of Measure Code");
                    IF ItemCrossReference.FINDFIRST THEN
                      "IC Partner Reference" := ItemCrossReference."Cross-Reference No."
                    ELSE
                      "IC Partner Reference" := "No.";
                  END;
              END;
            END;
          Type::"Fixed Asset":
            BEGIN
              "IC Partner Ref. Type" := "IC Partner Ref. Type"::" ";
              "IC Partner Reference" := '';
            END;
          Type::Resource:
            BEGIN
              Resource.GET("No.");
              "IC Partner Ref. Type" := "IC Partner Ref. Type"::"G/L Account";
              "IC Partner Reference" := Resource."IC Partner Purch. G/L Acc. No.";
            END;
        END;
    END;

    [External]
    PROCEDURE OutstandingInvoiceAmountFromShipment@12(SellToCustomerNo@1000 : Code[20]) : Decimal;
    VAR
      SalesLine@1001 : Record 37;
    BEGIN
      SalesLine.SETCURRENTKEY("Document Type","Sell-to Customer No.","Shipment No.");
      SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Invoice);
      SalesLine.SETRANGE("Sell-to Customer No.",SellToCustomerNo);
      SalesLine.SETFILTER("Shipment No.",'<>%1','');
      SalesLine.CALCSUMS("Outstanding Amount (LCY)");
      EXIT(SalesLine."Outstanding Amount (LCY)");
    END;

    LOCAL PROCEDURE CheckShipmentRelation@94();
    VAR
      SalesShptLine@1001 : Record 111;
    BEGIN
      SalesShptLine.GET("Shipment No.","Shipment Line No.");
      IF (Quantity * SalesShptLine."Qty. Shipped Not Invoiced") < 0 THEN
        FIELDERROR("Qty. to Invoice",Text057);
      IF ABS(Quantity) > ABS(SalesShptLine."Qty. Shipped Not Invoiced") THEN
        ERROR(Text058,SalesShptLine."Document No.");

      OnAfterCheckShipmentRelation(Rec,SalesShptLine);
    END;

    LOCAL PROCEDURE CheckRetRcptRelation@95();
    VAR
      ReturnRcptLine@1000 : Record 6661;
    BEGIN
      ReturnRcptLine.GET("Return Receipt No.","Return Receipt Line No.");
      IF (Quantity * (ReturnRcptLine.Quantity - ReturnRcptLine."Quantity Invoiced")) < 0 THEN
        FIELDERROR("Qty. to Invoice",Text059);
      IF ABS(Quantity) > ABS(ReturnRcptLine.Quantity - ReturnRcptLine."Quantity Invoiced") THEN
        ERROR(Text060,ReturnRcptLine."Document No.");

      OnAfterCheckRetRcptRelation(Rec,ReturnRcptLine);
    END;

    LOCAL PROCEDURE VerifyItemLineDim@87();
    BEGIN
      IF IsShippedReceivedItemDimChanged THEN
        ConfirmShippedReceivedItemDimChange;
    END;

    [External]
    PROCEDURE IsShippedReceivedItemDimChanged@113() : Boolean;
    BEGIN
      EXIT(("Dimension Set ID" <> xRec."Dimension Set ID") AND (Type = Type::Item) AND
        (("Qty. Shipped Not Invoiced" <> 0) OR ("Return Rcd. Not Invd." <> 0)));
    END;

    LOCAL PROCEDURE IsServiceCharge@177() : Boolean;
    VAR
      CustomerPostingGroup@1001 : Record 92;
    BEGIN
      IF Type <> Type::"G/L Account" THEN
        EXIT(FALSE);

      GetSalesHeader;
      CustomerPostingGroup.GET(SalesHeader."Customer Posting Group");
      EXIT(CustomerPostingGroup."Service Charge Acc." = "No.");
    END;

    [External]
    PROCEDURE ConfirmShippedReceivedItemDimChange@114() : Boolean;
    VAR
      ConfirmManagement@1000 : Codeunit 27;
    BEGIN
      IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text053,TABLECAPTION),TRUE) THEN
        ERROR(Text054);

      EXIT(TRUE);
    END;

    [External]
    PROCEDURE InitType@91();
    BEGIN
      IF "Document No." <> '' THEN BEGIN
        IF NOT SalesHeader.GET("Document Type","Document No.") THEN
          EXIT;
        IF (SalesHeader.Status = SalesHeader.Status::Released) AND
           (xRec.Type IN [xRec.Type::Item,xRec.Type::"Fixed Asset"])
        THEN
          Type := Type::" "
        ELSE
          Type := xRec.Type;
      END;
    END;

    LOCAL PROCEDURE CheckWMS@98();
    BEGIN
      IF CurrFieldNo <> 0 THEN
        CheckLocationOnWMS;
    END;

    [External]
    PROCEDURE CheckLocationOnWMS@101();
    VAR
      DialogText@1001 : Text;
    BEGIN
      IF Type = Type::Item THEN BEGIN
        DialogText := Text035;
        IF "Quantity (Base)" <> 0 THEN
          CASE "Document Type" OF
            "Document Type"::Invoice:
              IF "Shipment No." = '' THEN
                IF Location.GET("Location Code") AND Location."Directed Put-away and Pick" THEN BEGIN
                  DialogText += Location.GetRequirementText(Location.FIELDNO("Require Shipment"));
                  ERROR(Text016,DialogText,FIELDCAPTION("Line No."),"Line No.");
                END;
            "Document Type"::"Credit Memo":
              IF "Return Receipt No." = '' THEN
                IF Location.GET("Location Code") AND Location."Directed Put-away and Pick" THEN BEGIN
                  DialogText += Location.GetRequirementText(Location.FIELDNO("Require Receive"));
                  ERROR(Text016,DialogText,FIELDCAPTION("Line No."),"Line No.");
                END;
          END;
      END;
    END;

    [External]
    PROCEDURE IsNonInventoriableItem@195() : Boolean;
    VAR
      Item@1000 : Record 27;
    BEGIN
      IF Type <> Type::Item THEN
        EXIT(FALSE);
      IF "No." = '' THEN
        EXIT(FALSE);
      GetItem(Item);
      EXIT(Item.IsNonInventoriableType);
    END;

    [External]
    PROCEDURE IsInventoriableItem@196() : Boolean;
    VAR
      Item@1000 : Record 27;
    BEGIN
      IF Type <> Type::Item THEN
        EXIT(FALSE);
      IF "No." = '' THEN
        EXIT(FALSE);
      GetItem(Item);
      EXIT(Item.IsInventoriableType);
    END;

    LOCAL PROCEDURE ValidateReturnReasonCode@99(CallingFieldNo@1000 : Integer);
    VAR
      ReturnReason@1001 : Record 6635;
      IsHandled@1002 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeValidateReturnReasonCode(Rec,CallingFieldNo,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF CallingFieldNo = 0 THEN
        EXIT;
      IF "Return Reason Code" = '' THEN BEGIN
        IF (Type = Type::Item) AND ("No." <> '') THEN
          GetUnitCost;
        UpdateUnitPrice(CallingFieldNo);
      END;

      IF ReturnReason.GET("Return Reason Code") THEN BEGIN
        IF (CallingFieldNo <> FIELDNO("Location Code")) AND (ReturnReason."Default Location Code" <> '') THEN
          VALIDATE("Location Code",ReturnReason."Default Location Code");
        IF ReturnReason."Inventory Value Zero" THEN
          VALIDATE("Unit Cost (LCY)",0)
        ELSE
          IF "Unit Price" = 0 THEN
            UpdateUnitPrice(CallingFieldNo);
      END;

      OnAfterValidateReturnReasonCode(Rec,CallingFieldNo);
    END;

    [Internal]
    PROCEDURE ValidateLineDiscountPercent@226(DropInvoiceDiscountAmount@1000 : Boolean);
    BEGIN
      TestJobPlanningLine;
      TestStatusOpen;
      "Line Discount Amount" :=
        ROUND(
          ROUND(Quantity * "Unit Price",Currency."Amount Rounding Precision") *
          "Line Discount %" / 100,Currency."Amount Rounding Precision");
      IF DropInvoiceDiscountAmount THEN BEGIN
        "Inv. Discount Amount" := 0;
        "Inv. Disc. Amount to Invoice" := 0;
        "Pmt. Discount Amount" := 0;
      END;
      UpdateAmounts;
    END;

    [External]
    PROCEDURE HasTypeToFillMandatoryFields@103() : Boolean;
    BEGIN
      EXIT(Type <> Type::" ");
    END;

    [External]
    PROCEDURE GetDeferralAmount@104() DeferralAmount : Decimal;
    BEGIN
      IF "VAT Base Amount" <> 0 THEN
        DeferralAmount := "VAT Base Amount"
      ELSE
        DeferralAmount := CalcLineAmount;
    END;

    LOCAL PROCEDURE UpdateDeferralAmounts@105();
    VAR
      AdjustStartDate@1000 : Boolean;
      DeferralPostDate@1001 : Date;
    BEGIN
      GetSalesHeader;
      OnGetDeferralPostDate(SalesHeader,DeferralPostDate,Rec);
      IF DeferralPostDate = 0D THEN
        DeferralPostDate := SalesHeader."Posting Date";
      AdjustStartDate := TRUE;
      IF "Document Type" = "Document Type"::"Return Order" THEN BEGIN
        IF "Returns Deferral Start Date" = 0D THEN
          "Returns Deferral Start Date" := SalesHeader."Posting Date";
        DeferralPostDate := "Returns Deferral Start Date";
        AdjustStartDate := FALSE;
      END;

      DeferralUtilities.RemoveOrSetDeferralSchedule(
        "Deferral Code",DeferralUtilities.GetSalesDeferralDocType,'','',
        "Document Type","Document No.","Line No.",
        GetDeferralAmount,DeferralPostDate,Description,SalesHeader."Currency Code",AdjustStartDate);
    END;

    [External]
    PROCEDURE UpdatePriceDescription@147();
    VAR
      Currency@1000 : Record 4;
    BEGIN
      "Price description" := '';
      IF Type IN [Type::"Charge (Item)",Type::"Fixed Asset",Type::Item,Type::Resource] THEN BEGIN
        IF "Line Discount %" = 0 THEN
          "Price description" := STRSUBSTNO(
              PriceDescriptionTxt,Quantity,Currency.ResolveGLCurrencySymbol("Currency Code"),
              "Unit Price","Unit of Measure")
        ELSE
          "Price description" := STRSUBSTNO(
              PriceDescriptionWithLineDiscountTxt,Quantity,Currency.ResolveGLCurrencySymbol("Currency Code"),
              "Unit Price","Unit of Measure","Line Discount %")
      END;
    END;

    LOCAL PROCEDURE UpdateVATPercent@248(BaseAmount@1000 : Decimal;VATAmount@1001 : Decimal);
    BEGIN
      IF BaseAmount <> 0 THEN
        "VAT %" := ROUND(100 * VATAmount / BaseAmount,0.00001)
      ELSE BEGIN
        "VAT %" := 0;
        "EC %" := 0;
      END;
    END;

    PROCEDURE ShowDeferrals@106(PostingDate@1000 : Date;CurrencyCode@1001 : Code[10]) : Boolean;
    BEGIN
      EXIT(DeferralUtilities.OpenLineScheduleEdit(
          "Deferral Code",DeferralUtilities.GetSalesDeferralDocType,'','',
          "Document Type","Document No.","Line No.",
          GetDeferralAmount,PostingDate,Description,CurrencyCode));
    END;

    LOCAL PROCEDURE InitHeaderDefaults@107(SalesHeader@1000 : Record 36);
    BEGIN
      IF SalesHeader."Document Type" = SalesHeader."Document Type"::Quote THEN BEGIN
        IF (SalesHeader."Sell-to Customer No." = '') AND
           (SalesHeader."Sell-to Customer Template Code" = '')
        THEN
          ERROR(
            Text031,
            SalesHeader.FIELDCAPTION("Sell-to Customer No."),
            SalesHeader.FIELDCAPTION("Sell-to Customer Template Code"));
        IF (SalesHeader."Bill-to Customer No." = '') AND
           (SalesHeader."Bill-to Customer Template Code" = '')
        THEN
          ERROR(
            Text031,
            SalesHeader.FIELDCAPTION("Bill-to Customer No."),
            SalesHeader.FIELDCAPTION("Bill-to Customer Template Code"));
      END ELSE
        SalesHeader.TESTFIELD("Sell-to Customer No.");

      "Sell-to Customer No." := SalesHeader."Sell-to Customer No.";
      "Currency Code" := SalesHeader."Currency Code";
      IF NOT IsNonInventoriableItem THEN
        "Location Code" := SalesHeader."Location Code";
      "Customer Price Group" := SalesHeader."Customer Price Group";
      "Customer Disc. Group" := SalesHeader."Customer Disc. Group";
      "Allow Line Disc." := SalesHeader."Allow Line Disc.";
      "Transaction Type" := SalesHeader."Transaction Type";
      "Transport Method" := SalesHeader."Transport Method";
      "Bill-to Customer No." := SalesHeader."Bill-to Customer No.";
      "Gen. Bus. Posting Group" := SalesHeader."Gen. Bus. Posting Group";
      "VAT Bus. Posting Group" := SalesHeader."VAT Bus. Posting Group";
      "Exit Point" := SalesHeader."Exit Point";
      Area := SalesHeader.Area;
      "Transaction Specification" := SalesHeader."Transaction Specification";
      "Tax Area Code" := SalesHeader."Tax Area Code";
      "Tax Liable" := SalesHeader."Tax Liable";
      IF NOT "System-Created Entry" AND ("Document Type" = "Document Type"::Order) AND HasTypeToFillMandatoryFields OR
         IsServiceCharge
      THEN
        "Prepayment %" := SalesHeader."Prepayment %";
      "Prepayment Tax Area Code" := SalesHeader."Tax Area Code";
      "Prepayment Tax Liable" := SalesHeader."Tax Liable";
      "Responsibility Center" := SalesHeader."Responsibility Center";

      "Shipping Agent Code" := SalesHeader."Shipping Agent Code";
      "Shipping Agent Service Code" := SalesHeader."Shipping Agent Service Code";
      "Outbound Whse. Handling Time" := SalesHeader."Outbound Whse. Handling Time";
      "Shipping Time" := SalesHeader."Shipping Time";

      OnAfterInitHeaderDefaults(Rec,SalesHeader);
    END;

    LOCAL PROCEDURE InitDeferralCode@108();
    VAR
      Item@1000 : Record 27;
    BEGIN
      IF "Document Type" IN
         ["Document Type"::Order,"Document Type"::Invoice,"Document Type"::"Credit Memo","Document Type"::"Return Order"]
      THEN
        CASE Type OF
          Type::"G/L Account":
            VALIDATE("Deferral Code",GLAcc."Default Deferral Template Code");
          Type::Item:
            BEGIN
              GetItem(Item);
              VALIDATE("Deferral Code",Item."Default Deferral Template Code");
            END;
          Type::Resource:
            VALIDATE("Deferral Code",Res."Default Deferral Template Code");
        END;
    END;

    [External]
    PROCEDURE DefaultDeferralCode@109();
    VAR
      Item@1000 : Record 27;
    BEGIN
      CASE Type OF
        Type::"G/L Account":
          BEGIN
            GLAcc.GET("No.");
            InitDeferralCode;
          END;
        Type::Item:
          BEGIN
            GetItem(Item);
            InitDeferralCode;
          END;
        Type::Resource:
          BEGIN
            Res.GET("No.");
            InitDeferralCode;
          END;
      END;
    END;

    [External]
    PROCEDURE IsCreditDocType@110() : Boolean;
    BEGIN
      EXIT("Document Type" IN ["Document Type"::"Return Order","Document Type"::"Credit Memo"]);
    END;

    LOCAL PROCEDURE IsFullyInvoiced@224() : Boolean;
    BEGIN
      EXIT(("Qty. Shipped Not Invd. (Base)" = 0) AND ("Qty. Shipped (Base)" = "Quantity (Base)"))
    END;

    LOCAL PROCEDURE CleanDropShipmentFields@112();
    BEGIN
      IF ("Purch. Order Line No." <> 0) AND IsFullyInvoiced THEN
        IF CleanPurchaseLineDropShipmentFields THEN BEGIN
          "Purchase Order No." := '';
          "Purch. Order Line No." := 0;
        END;
    END;

    LOCAL PROCEDURE CleanSpecialOrderFieldsAndCheckAssocPurchOrder@125();
    BEGIN
      IF ("Special Order Purch. Line No." <> 0) AND IsFullyInvoiced THEN
        IF CleanPurchaseLineSpecialOrderFields THEN BEGIN
          "Special Order Purchase No." := '';
          "Special Order Purch. Line No." := 0;
        END;
      CheckAssocPurchOrder('');
    END;

    LOCAL PROCEDURE CleanPurchaseLineDropShipmentFields@155() : Boolean;
    VAR
      PurchaseLine@1000 : Record 39;
    BEGIN
      IF PurchaseLine.GET(PurchaseLine."Document Type"::Order,"Purchase Order No.","Purch. Order Line No.") THEN BEGIN
        IF PurchaseLine."Qty. Received (Base)" < "Qty. Shipped (Base)" THEN
          EXIT(FALSE);

        PurchaseLine."Sales Order No." := '';
        PurchaseLine."Sales Order Line No." := 0;
        PurchaseLine.MODIFY;
      END;

      EXIT(TRUE);
    END;

    LOCAL PROCEDURE CleanPurchaseLineSpecialOrderFields@219() : Boolean;
    VAR
      PurchaseLine@1000 : Record 39;
    BEGIN
      IF PurchaseLine.GET(PurchaseLine."Document Type"::Order,"Special Order Purchase No.","Special Order Purch. Line No.") THEN BEGIN
        IF PurchaseLine."Qty. Received (Base)" < "Qty. Shipped (Base)" THEN
          EXIT(FALSE);

        PurchaseLine."Special Order" := FALSE;
        PurchaseLine."Special Order Sales No." := '';
        PurchaseLine."Special Order Sales Line No." := 0;
        PurchaseLine.MODIFY;
      END;

      EXIT(TRUE);
    END;

    [External]
    PROCEDURE CanEditUnitOfMeasureCode@115() : Boolean;
    VAR
      ItemUnitOfMeasure@1000 : Record 5404;
    BEGIN
      IF (Type = Type::Item) AND ("No." <> '') THEN BEGIN
        ItemUnitOfMeasure.SETRANGE("Item No.","No.");
        EXIT(ItemUnitOfMeasure.COUNT > 1);
      END;
      EXIT(TRUE);
    END;

    LOCAL PROCEDURE ValidateTaxGroupCode@79();
    VAR
      TaxDetail@1001 : Record 322;
    BEGIN
      IF ("Tax Area Code" <> '') AND ("Tax Group Code" <> '') THEN
        TaxDetail.ValidateTaxSetup("Tax Area Code","Tax Group Code","Posting Date");
    END;

    [External]
    PROCEDURE InsertFreightLine@121(VAR FreightAmount@1000 : Decimal);
    VAR
      SalesLine@1001 : Record 37;
      FreightAmountQuantity@1002 : Integer;
    BEGIN
      IF FreightAmount <= 0 THEN BEGIN
        FreightAmount := 0;
        EXIT;
      END;

      FreightAmountQuantity := 1;

      SalesSetup.GET;
      SalesSetup.TESTFIELD("Freight G/L Acc. No.");

      TESTFIELD("Document Type");
      TESTFIELD("Document No.");

      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","Document No.");
      SalesLine.SETRANGE(Type,SalesLine.Type::"G/L Account");
      SalesLine.SETRANGE("No.",SalesSetup."Freight G/L Acc. No.");
      // "Quantity Shipped" will be equal to 0 until FreightAmount line successfully shipped
      SalesLine.SETRANGE("Quantity Shipped",0);
      IF SalesLine.FINDFIRST THEN BEGIN
        SalesLine.VALIDATE(Quantity,FreightAmountQuantity);
        SalesLine.VALIDATE("Unit Price",FreightAmount);
        SalesLine.MODIFY;
      END ELSE BEGIN
        SalesLine.SETRANGE(Type);
        SalesLine.SETRANGE("No.");
        SalesLine.SETRANGE("Quantity Shipped");
        SalesLine.FINDLAST;
        SalesLine."Line No." += 10000;
        SalesLine.INIT;
        SalesLine.VALIDATE(Type,SalesLine.Type::"G/L Account");
        SalesLine.VALIDATE("No.",SalesSetup."Freight G/L Acc. No.");
        SalesLine.VALIDATE(Description,FreightLineDescriptionTxt);
        SalesLine.VALIDATE(Quantity,FreightAmountQuantity);
        SalesLine.VALIDATE("Unit Price",FreightAmount);
        SalesLine.INSERT;
      END;
    END;

    LOCAL PROCEDURE CalcTotalAmtToAssign@154(TotalQtyToAssign@1000 : Decimal) TotalAmtToAssign : Decimal;
    BEGIN
      TotalAmtToAssign := CalcLineAmount * TotalQtyToAssign / Quantity;
      IF SalesHeader."Prices Including VAT" THEN
        TotalAmtToAssign := TotalAmtToAssign / (1 + "VAT %" / 100) - "VAT Difference";

      TotalAmtToAssign := ROUND(TotalAmtToAssign,Currency."Amount Rounding Precision");
    END;

    [External]
    PROCEDURE IsLookupRequested@119() Result : Boolean;
    BEGIN
      Result := LookupRequested;
      LookupRequested := FALSE;
    END;

    [External]
    PROCEDURE TestItemFields@120(ItemNo@1000 : Code[20];VariantCode@1001 : Code[10];LocationCode@1002 : Code[10]);
    BEGIN
      TESTFIELD(Type,Type::Item);
      TESTFIELD("No.",ItemNo);
      TESTFIELD("Variant Code",VariantCode);
      TESTFIELD("Location Code",LocationCode);
    END;

    [External]
    PROCEDURE CalculateNotShippedInvExlcVatLCY@118();
    VAR
      Currency2@1000 : Record 4;
    BEGIN
      Currency2.InitRoundingPrecision;
      "Shipped Not Inv. (LCY) No VAT" :=
        ROUND("Shipped Not Invoiced (LCY)" / (1 + "VAT %" / 100),Currency2."Amount Rounding Precision");
    END;

    [External]
    PROCEDURE ClearSalesHeader@124();
    BEGIN
      CLEAR(SalesHeader);
    END;

    [External]
    PROCEDURE SendLineInvoiceDiscountResetNotification@323();
    VAR
      NotificationLifecycleMgt@1003 : Codeunit 1511;
      NotificationToSend@1000 : Notification;
    BEGIN
      IF ("Inv. Discount Amount" = 0) AND (xRec."Inv. Discount Amount" <> 0) AND ("Line Amount" <> 0) THEN BEGIN
        NotificationToSend.ID := SalesHeader.GetLineInvoiceDiscountResetNotificationId;
        NotificationToSend.MESSAGE := STRSUBSTNO(LineInvoiceDiscountAmountResetTok,RECORDID);

        NotificationLifecycleMgt.SendNotification(NotificationToSend,RECORDID);
      END;
    END;

    [External]
    PROCEDURE GetDocumentTypeDescription@156() : Text;
    VAR
      IdentityManagement@1000 : Codeunit 9801;
    BEGIN
      IF IdentityManagement.IsInvAppId AND ("Document Type" = "Document Type"::Quote) THEN
        EXIT(EstimateLbl);

      EXIT(FORMAT("Document Type"));
    END;

    [External]
    PROCEDURE FormatType@149() : Text[20];
    BEGIN
      IF Type = Type::" " THEN
        EXIT(CommentLbl);

      EXIT(FORMAT(Type));
    END;

    [External]
    PROCEDURE RenameNo@133(LineType@1000 : Option;OldNo@1001 : Code[20];NewNo@1002 : Code[20]);
    BEGIN
      RESET;
      SETRANGE(Type,LineType);
      SETRANGE("No.",OldNo);
      MODIFYALL("No.",NewNo,TRUE);
    END;

    [External]
    PROCEDURE UpdatePlanned@151() : Boolean;
    BEGIN
      TESTFIELD("Qty. per Unit of Measure");
      CALCFIELDS("Reserved Quantity");
      IF Planned = ("Reserved Quantity" = "Outstanding Quantity") THEN
        EXIT(FALSE);
      Planned := NOT Planned;
      EXIT(TRUE);
    END;

    [External]
    PROCEDURE AssignedItemCharge@153() : Boolean;
    BEGIN
      EXIT((Type = Type::"Charge (Item)") AND ("No." <> '') AND ("Qty. to Assign" < Quantity));
    END;

    LOCAL PROCEDURE UpdateLineDiscPct@189();
    VAR
      LineDiscountPct@1000 : Decimal;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeUpdateLineDiscPct(Rec,IsHandled,Currency);
      IF IsHandled THEN
        EXIT;

      IF ROUND(Quantity * "Unit Price",Currency."Amount Rounding Precision") <> 0 THEN BEGIN
        LineDiscountPct := ROUND(
            "Line Discount Amount" / ROUND(Quantity * "Unit Price",Currency."Amount Rounding Precision") * 100,
            0.00001);
        IF NOT (LineDiscountPct IN [0..100]) THEN
          ERROR(LineDiscountPctErr);
        "Line Discount %" := LineDiscountPct;
      END ELSE
        "Line Discount %" := 0;

      OnAfterUpdateLineDiscPct(Rec);
    END;

    LOCAL PROCEDURE UpdateBaseAmounts@173(NewAmount@1000 : Decimal;NewAmountIncludingVAT@1001 : Decimal;NewVATBaseAmount@1002 : Decimal);
    BEGIN
      Amount := NewAmount;
      "Amount Including VAT" := NewAmountIncludingVAT;
      "VAT Base Amount" := NewVATBaseAmount;
      IF NOT SalesHeader."Prices Including VAT" AND (Amount > 0) AND (Amount < "Prepmt. Line Amount") THEN
        "Prepmt. Line Amount" := Amount;
      IF SalesHeader."Prices Including VAT" AND ("Amount Including VAT" > 0) AND ("Amount Including VAT" < "Prepmt. Line Amount") THEN
        "Prepmt. Line Amount" := "Amount Including VAT";
    END;

    [External]
    PROCEDURE CalcPlannedDate@218() : Date;
    BEGIN
      IF FORMAT("Shipping Time") <> '' THEN
        EXIT(CalcPlannedDeliveryDate(FIELDNO("Planned Delivery Date")));

      EXIT(CalcPlannedShptDate(FIELDNO("Planned Delivery Date")));
    END;

    LOCAL PROCEDURE IsCalcVATAmountLinesHandled@192(SalesHeader@1001 : Record 36;VAR SalesLine@1002 : Record 37;VAR VATAmountLine@1003 : Record 290) IsHandled : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeCalcVATAmountLines(SalesHeader,SalesLine,VATAmountLine,IsHandled);
      EXIT(IsHandled);
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignFieldsForNo@158(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37;SalesHeader@1002 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignHeaderValues@134(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignStdTxtValues@135(VAR SalesLine@1000 : Record 37;StandardText@1001 : Record 7);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignGLAccountValues@138(VAR SalesLine@1000 : Record 37;GLAccount@1001 : Record 15);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignItemValues@136(VAR SalesLine@1000 : Record 37;Item@1001 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignItemChargeValues@137(VAR SalesLine@1000 : Record 37;ItemCharge@1001 : Record 5800);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignResourceValues@139(VAR SalesLine@1000 : Record 37;Resource@1001 : Record 156);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignFixedAssetValues@140(VAR SalesLine@1000 : Record 37;FixedAsset@1001 : Record 5600);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignItemUOM@141(VAR SalesLine@1000 : Record 37;Item@1001 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAssignResourceUOM@143(VAR SalesLine@1001 : Record 37;Resource@1000 : Record 156;ResourceUOM@1002 : Record 205);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAutoReserve@208(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckShipmentRelation@272(SalesLine@1000 : Record 37;SalesShipmentLine@1001 : Record 111);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckRetRcptRelation@274(SalesLine@1000 : Record 37;ReturnReceiptLine@1001 : Record 6661);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyFromItem@230(VAR SalesLine@1000 : Record 37;Item@1001 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterDeleteChargeChargeAssgnt@267(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37;CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterFilterLinesWithItemToPlan@217(VAR SalesLine@1000 : Record 37;VAR Item@1001 : Record 27;DocumentType@1002 : Option);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterFindResUnitCost@214(VAR SalesLine@1000 : Record 37;VAR ResourceCost@1001 : Record 202);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetItemTranslation@329(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36;ItemTranslation@1002 : Record 30);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetSalesHeader@241(VAR SalesLine@1000 : Record 37;VAR SalesHeader@1001 : Record 36;VAR Currency@1002 : Record 4);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetUnitCost@172(VAR SalesLine@1000 : Record 37;Item@1001 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitQtyToAsm@223(VAR SalesLine@1000 : Record 37;CallingFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterShowNonStock@263(VAR SalesLine@1000 : Record 37;NonstockItem@1001 : Record 5718);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateLineDiscPct@232(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateUnitPrice@126(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37;CalledByFieldNo@1002 : Integer;CurrFieldNo@1003 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAddItem@268(VAR SalesLine@1000 : Record 37;LastSalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeAddItems@252(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeAutoReserve@235(SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCalcInvDiscToInvoice@220(VAR SalesLine@1000 : Record 37;CallingFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCalcPlannedShptDate@261(VAR SalesLine@1000 : Record 37;VAR PlannedShipmentDate@1001 : Date;CallingFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCalcVATAmountLines@190(SalesHeader@1002 : Record 36;VAR SalesLine@1001 : Record 37;VAR VATAmountLine@1000 : Record 290;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCheckAssocPurchOrder@175(VAR SalesLine@1000 : Record 37;FieldCaption@1001 : Text[250];VAR IsHandled@1002 : Boolean;xSalesLine@1003 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCheckItemAvailable@225(SalesLine@1000 : Record 37;CalledByFieldNo@1001 : Integer;VAR IsHandled@1002 : Boolean;CurrentFieldNo@1003 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCopyFromItem@222(VAR SalesLine@1000 : Record 37;Item@1001 : Record 27;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCrossReferenceNoAssign@193(VAR SalesLine@1000 : Record 37;ItemCrossReference@1001 : Record 5717);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeFindNoByDescription@260(SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37;VAR CurrentFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetDefaultBin@216(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetItemTranslation@275(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetSalesHeader@262(VAR SalesLine@1000 : Record 37;VAR SalesHeader@1001 : Record 36;VAR IsHanded@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetUnitCost@333(SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInitQtyToAsm@221(VAR SalesLine@1000 : Record 37;CallingFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeIsAsmToOrderRequired@314(SalesLine@1000 : Record 37;VAR Result@1001 : Boolean;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeMaxQtyToInvoice@332(SalesLine@1000 : Record 37;VAR MaxQty@1001 : Decimal;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeMaxQtyToInvoiceBase@234(SalesLine@1000 : Record 37;VAR MaxQty@1001 : Decimal;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeShowItemSub@238(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeShowReservation@242(SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeShowReservationEntries@240(SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeTestJobPlanningLine@237(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeTestStatusOpen@205(VAR SalesLine@1000 : Record 37;VAR SalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdatePrepmtAmounts@245(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdatePrepmtSetupFields@236(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateLineDiscPct@429(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean;Currency@1002 : Record 4);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateUnitPrice@127(VAR SalesLine@1003 : Record 37;xSalesLine@1002 : Record 37;CalledByFieldNo@1001 : Integer;CurrFieldNo@1000 : Integer;VAR Handled@1004 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeUpdateVATAmounts@206(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeValidateReturnReasonCode@227(VAR SalesLine@1000 : Record 37;CallingFieldNo@1001 : Integer;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeVerifyReservedQty@145(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37;CalledByFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitHeaderDefaults@161(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitOutstanding@215(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitOutstandingQty@202(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitOutstandingAmount@132(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36;Currency@1002 : Record 4);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitQtyToInvoice@128(VAR SalesLine@1000 : Record 37;CurrFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitQtyToShip@129(VAR SalesLine@1000 : Record 37;CurrFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitQtyToShip2@315(VAR SalesLine@1000 : Record 37;CurrFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitQtyToReceive@130(VAR SalesLine@1000 : Record 37;CurrFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCalcLineAmount@251(VAR SalesLine@1000 : Record 37;VAR LineAmount@1001 : Decimal);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCalcVATAmountLines@170(VAR SalesHeader@1003 : Record 36;VAR SalesLine@1002 : Record 37;VAR VATAmountLine@1001 : Record 290;QtyType@1000 : 'General,Invoicing,Shipping');
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetLineAmountToHandle@171(SalesLine@1000 : Record 37;QtyToHandle@1001 : Decimal;VAR LineAmount@1002 : Decimal;VAR LineDiscAmount@1003 : Decimal);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSalesTaxCalculate@249(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36;Currency@1002 : Record 4);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSalesTaxCalculateReverse@246(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36;Currency@1002 : Record 4);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSetReserveWithoutPurchasingCode@233(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36;Item@1002 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateAmounts@152(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1002 : Record 37;CurrentFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateAmountsDone@165(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37;CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateDates@200(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateItemCrossRef@257(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateVATAmounts@199(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateVATOnLines@162(VAR SalesHeader@1002 : Record 36;VAR SalesLine@1001 : Record 37;VAR VATAmountLine@1000 : Record 290;QtyType@1003 : 'General,Invoicing,Shipping');
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateWithWarehouseShip@271(SalesHeader@1000 : Record 36;VAR SalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateCrossReferenceNo@258(SalesLine@1000 : Record 37;ItemCrossReference@1001 : Record 5717);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCreateDimTableIDs@164(VAR SalesLine@1000 : Record 37;CallingFieldNo@1001 : Integer;VAR TableID@1003 : ARRAY [10] OF Integer;VAR No@1002 : ARRAY [10] OF Code[20]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterShowItemSub@166(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateReturnReasonCode@174(VAR SalesLine@1000 : Record 37;CallingFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnInitQtyToShip2OnBeforeCalcInvDiscToInvoice@239(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnShowItemChargeAssgntOnBeforeCalcItemCharge@194(VAR SalesLine@1000 : Record 37;VAR ItemChargeAssgntLineAmt@1001 : Decimal;Currency@1002 : Record 4;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnUpdateUnitPriceOnBeforeFindPrice@191(SalesHeader@1000 : Record 36;VAR SalesLine@1001 : Record 37;CalledByFieldNo@1002 : Integer;CallingFieldNo@1003 : Integer;VAR IsHandled@1004 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateLocationCodeOnBeforeSetShipmentDate@201(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateTypeOnAfterCheckItem@188(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateTypeOnCopyFromTempSalesLine@167(VAR SalesLine@1000 : Record 37;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateNoOnAfterInitHeaderDefaults@269(VAR SalesHeader@1000 : Record 36;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateNoOnAfterUpdateUnitPrice@255(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateNoOnAfterVerifyChange@187(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateNoOnCopyFromTempSalesLine@168(VAR SalesLine@1000 : Record 37;VAR TempSalesLine@1001 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateNoOnBeforeInitRec@31(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37;CallingFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateNoOnBeforeUpdateDates@210(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37;SalesHeader@1002 : Record 36;CallingFieldNo@1003 : Integer;VAR IsHandled@1004 : Boolean;VAR TempSalesLine@1005 : TEMPORARY Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateQuantityOnAfterCalcBaseQty@256(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateQuantityOnBeforeGetUnitCost@254(VAR SalesLine@1000 : Record 37;Item@1001 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateQtyToShipAfterInitQty@244(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37;CallingFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateQtyToShipOnAfterCheck@270(VAR SalesLine@1000 : Record 37;CurrentFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateQtyToReturnAfterInitQty@250(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37;CallingFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateReturnQtyToReceiveOnAfterCheck@273(VAR SalesLine@1000 : Record 37;CurrentFieldNo@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateVariantCodeOnAfterChecks@213(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37;CallingFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateVATProdPostingGroupOnBeforeCheckVATCalcType@259(VAR SalesLine@1000 : Record 37;VATPostingSetup@1001 : Record 325;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterTestStatusOpen@169(VAR SalesLine@1000 : Record 37;VAR SalesHeader@1001 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSetDefaultQuantity@176(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateTotalAmounts@68(VAR SalesLine@1000 : Record 37;SalesLine2@1001 : Record 37;VAR TotalAmount@1003 : Decimal;VAR TotalAmountInclVAT@1002 : Decimal;VAR TotalLineAmount@1005 : Decimal;VAR TotalInvDiscAmount@1004 : Decimal);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCheckWarehouseOnBeforeShowDialog@247(SalesLine@1000 : Record 37;Location@1001 : Record 14;ShowDialog@1004 : ' ,Message,Error';VAR DialogText@1003 : Text[50]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCalcShipmentDateOnPlannedShipmentDate@253(SalesLine@1000 : Record 37;VAR ShipmentDate@1001 : Date;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCopyFromItemOnAfterCheck@243(VAR SalesLine@1000 : Record 37;Item@1001 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnGetDeferralPostDate@159(SalesHeader@1000 : Record 36;VAR DeferralPostingDate@1001 : Date;SalesLine@1002 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterAutoAsmToOrder@179(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeAutoAsmToOrder@178(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterBlanketOrderLookup@182(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeBlanketOrderLookup@184(VAR SalesLine@1000 : Record 37;IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCalcPlannedDeliveryDate@203(VAR SalesLine@1000 : Record 37;VAR PlannedDeliveryDate@1001 : Date;CallingFieldNo@1002 : Integer;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeOpenItemTrackingLines@212(SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCheckCreditLimitCondition@185(SalesLine@1000 : Record 37;VAR RunCheck@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnUpdateAmountOnBeforeCheckCreditLimit@207(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnUpdateVATOnLinesOnBeforeCalculateNewAmount@264(VAR SalesLine@1000 : Record 37;SalesHeader@1001 : Record 36;VATAmountLine@1003 : Record 290;VATAmountLineReminder@1002 : Record 290;VAR NewAmount@1004 : Decimal;VAR VATAmount@1005 : Decimal);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateDescriptionOnBeforeCannotFindDescrError@451(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCalcVATAmountLinesOnAfterCalcLineTotals@266(VAR VATAmountLine@1000 : Record 290;SalesHeader@1001 : Record 36;SalesLine@1002 : Record 37;Currency@1003 : Record 4;QtyType@1004 : 'General,Invoicing,Shipping';VAR TotalVATAmount@1005 : Decimal);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCrossReferenceNoLookupOnBeforeValidateUnitPrice@228(SalesHeader@1000 : Record 36;VAR SalesLine@1001 : Record 37);
    BEGIN
    END;

    PROCEDURE ShowDeferralSchedule@160();
    BEGIN
      GetSalesHeader;
      ShowDeferrals(SalesHeader."Posting Date",SalesHeader."Currency Code");
    END;

    PROCEDURE GetItemVNT@1170170001(VAR Producto@1100001 : Record 27);
    BEGIN
      // VNTES.i
      GetItem(Producto);
      // VNTES.f
    END;

    PROCEDURE GetSalesHeaderVNT@1100001(VAR CabVenta@1100000 : Record 36;VAR Divisa@1100001 : Record 4);
    BEGIN
      // VNTES.i
      GetSalesHeader;
      CabVenta := SalesHeader;
      Divisa := Currency;
      // VNTES.f
    END;

    BEGIN
    {

      BAINES
      =======

      BAIN-0010 AM 100807 Se modifican las funciones de c lculo de lineas de IVA y actualizaci¢n
                             de las mismas.
      BAIN-0067 AC 220708 Se a¤ade tipo descuento porcentual
      BAIN-0044 Redondear Unidad Media Precio
    }
    END.
  }
}

OBJECT Table 91 User Setup
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=13:22:13;
    Modified=Yes;
    Version List=NAVW114.00,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    OnInsert=VAR
               User@1000 : Record 2000000120;
             BEGIN
               IF "E-Mail" <> '' THEN
                 EXIT;
               IF "User ID" <> '' THEN
                 EXIT;
               User.SETRANGE("User Name","User ID");
               IF User.FINDFIRST THEN
                 "E-Mail" := COPYSTR(User."Contact Email",1,MAXSTRLEN("E-Mail"));
             END;

    OnDelete=VAR
               NotificationSetup@1000 : Record 1512;
             BEGIN
               NotificationSetup.SETRANGE("User ID","User ID");
               NotificationSetup.DELETEALL(TRUE);
             END;

    ReplicateData=No;
    CaptionML=[ENU=User Setup;
               ESP=Configuraci¢n usuarios];
    LookupPageID=Page119;
    DrillDownPageID=Page119;
  }
  FIELDS
  {
    { 1   ;   ;User ID             ;Code50        ;TableRelation=User."User Name";
                                                   OnValidate=VAR
                                                                UserMgt@1000 : Codeunit 418;
                                                              BEGIN
                                                                UserMgt.ValidateUserID("User ID");
                                                              END;

                                                   OnLookup=VAR
                                                              UserMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                              UserMgt.LookupUserID("User ID");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=User ID;
                                                              ESP=Id. usuario];
                                                   NotBlank=Yes }
    { 2   ;   ;Allow Posting From  ;Date          ;OnValidate=BEGIN
                                                                CheckAllowedPostingDates(0);
                                                              END;

                                                   CaptionML=[ENU=Allow Posting From;
                                                              ESP=Permitir registro desde] }
    { 3   ;   ;Allow Posting To    ;Date          ;OnValidate=BEGIN
                                                                CheckAllowedPostingDates(0);
                                                              END;

                                                   CaptionML=[ENU=Allow Posting To;
                                                              ESP=Permitir registro hasta] }
    { 4   ;   ;Register Time       ;Boolean       ;CaptionML=[ENU=Register Time;
                                                              ESP=Registrar tiempo conexi¢n] }
    { 10  ;   ;Salespers./Purch. Code;Code20      ;TableRelation=Salesperson/Purchaser;
                                                   OnValidate=VAR
                                                                UserSetup@1000 : Record 91;
                                                              BEGIN
                                                                IF "Salespers./Purch. Code" <> '' THEN BEGIN
                                                                  ValidateSalesPersonPurchOnUserSetup(Rec);
                                                                  UserSetup.SETCURRENTKEY("Salespers./Purch. Code");
                                                                  UserSetup.SETRANGE("Salespers./Purch. Code","Salespers./Purch. Code");
                                                                  IF UserSetup.FINDFIRST THEN
                                                                    ERROR(Text001,"Salespers./Purch. Code",UserSetup."User ID");
                                                                  UpdateSalesPerson;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Salespers./Purch. Code;
                                                              ESP=C¢d. vendedor/comprador] }
    { 11  ;   ;Approver ID         ;Code50        ;TableRelation="User Setup"."User ID";
                                                   OnValidate=BEGIN
                                                                IF "Approver ID" = "User ID" THEN
                                                                  FIELDERROR("Approver ID");
                                                              END;

                                                   OnLookup=VAR
                                                              UserSetup@1000 : Record 91;
                                                            BEGIN
                                                              UserSetup.SETFILTER("User ID",'<>%1',"User ID");
                                                              IF PAGE.RUNMODAL(PAGE::"Approval User Setup",UserSetup) = ACTION::LookupOK THEN
                                                                VALIDATE("Approver ID",UserSetup."User ID");
                                                            END;

                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=Approver ID;
                                                              ESP=Id. aprobador] }
    { 12  ;   ;Sales Amount Approval Limit;Integer;OnValidate=BEGIN
                                                                IF "Unlimited Sales Approval" AND ("Sales Amount Approval Limit" <> 0) THEN
                                                                  ERROR(Text003,FIELDCAPTION("Sales Amount Approval Limit"),FIELDCAPTION("Unlimited Sales Approval"));
                                                                IF "Sales Amount Approval Limit" < 0 THEN
                                                                  ERROR(Text005);
                                                              END;

                                                   CaptionML=[ENU=Sales Amount Approval Limit;
                                                              ESP=Importe l¡mite aprob. ventas];
                                                   BlankZero=Yes }
    { 13  ;   ;Purchase Amount Approval Limit;Integer;
                                                   OnValidate=BEGIN
                                                                IF "Unlimited Purchase Approval" AND ("Purchase Amount Approval Limit" <> 0) THEN
                                                                  ERROR(Text003,FIELDCAPTION("Purchase Amount Approval Limit"),FIELDCAPTION("Unlimited Purchase Approval"));
                                                                IF "Purchase Amount Approval Limit" < 0 THEN
                                                                  ERROR(Text005);
                                                              END;

                                                   CaptionML=[ENU=Purchase Amount Approval Limit;
                                                              ESP=Importe l¡mite aprob. compras];
                                                   BlankZero=Yes }
    { 14  ;   ;Unlimited Sales Approval;Boolean   ;OnValidate=BEGIN
                                                                IF "Unlimited Sales Approval" THEN
                                                                  "Sales Amount Approval Limit" := 0;
                                                              END;

                                                   CaptionML=[ENU=Unlimited Sales Approval;
                                                              ESP=Aprobaci¢n venta ilimitada] }
    { 15  ;   ;Unlimited Purchase Approval;Boolean;OnValidate=BEGIN
                                                                IF "Unlimited Purchase Approval" THEN
                                                                  "Purchase Amount Approval Limit" := 0;
                                                              END;

                                                   CaptionML=[ENU=Unlimited Purchase Approval;
                                                              ESP=Aprobaci¢n compra ilimitada] }
    { 16  ;   ;Substitute          ;Code50        ;TableRelation="User Setup"."User ID";
                                                   OnValidate=BEGIN
                                                                IF Substitute = "User ID" THEN
                                                                  FIELDERROR(Substitute);
                                                              END;

                                                   OnLookup=VAR
                                                              UserSetup@1000 : Record 91;
                                                            BEGIN
                                                              UserSetup.SETFILTER("User ID",'<>%1',"User ID");
                                                              IF PAGE.RUNMODAL(PAGE::"Approval User Setup",UserSetup) = ACTION::LookupOK THEN
                                                                VALIDATE(Substitute,UserSetup."User ID");
                                                            END;

                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=Substitute;
                                                              ESP=Sustituir] }
    { 17  ;   ;E-Mail              ;Text100       ;OnValidate=VAR
                                                                MailManagement@1000 : Codeunit 9520;
                                                              BEGIN
                                                                UpdateSalesPerson;
                                                                MailManagement.ValidateEmailAddressField("E-Mail");
                                                              END;

                                                   ExtendedDatatype=E-Mail;
                                                   CaptionML=[ENU=E-Mail;
                                                              ESP=Correo electr¢nico] }
    { 19  ;   ;Request Amount Approval Limit;Integer;
                                                   OnValidate=BEGIN
                                                                IF "Unlimited Request Approval" AND ("Request Amount Approval Limit" <> 0) THEN
                                                                  ERROR(Text003,FIELDCAPTION("Request Amount Approval Limit"),FIELDCAPTION("Unlimited Request Approval"));
                                                                IF "Request Amount Approval Limit" < 0 THEN
                                                                  ERROR(Text005);
                                                              END;

                                                   CaptionML=[ENU=Request Amount Approval Limit;
                                                              ESP=Imp. l¡m. aprob. solic. compra];
                                                   BlankZero=Yes }
    { 20  ;   ;Unlimited Request Approval;Boolean ;OnValidate=BEGIN
                                                                IF "Unlimited Request Approval" THEN
                                                                  "Request Amount Approval Limit" := 0;
                                                              END;

                                                   CaptionML=[ENU=Unlimited Request Approval;
                                                              ESP=Aprob. solic. compra ilimitada] }
    { 21  ;   ;Approval Administrator;Boolean     ;OnValidate=VAR
                                                                UserSetup@1000 : Record 91;
                                                              BEGIN
                                                                IF "Approval Administrator" THEN BEGIN
                                                                  UserSetup.SETRANGE("Approval Administrator",TRUE);
                                                                  IF NOT UserSetup.ISEMPTY THEN
                                                                    FIELDERROR("Approval Administrator");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Approval Administrator;
                                                              ESP=Administrador aprobaci¢n] }
    { 31  ;   ;License Type        ;Option        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(User."License Type" WHERE (User Name=FIELD(User ID)));
                                                   CaptionML=[ENU=License Type;
                                                              ESP=Tipo de licencia];
                                                   OptionCaptionML=[ENU=Full User,Limited User,Device Only User,Windows Group,External User;
                                                                    ESP=Usuario completo,Usuario limitado,Usuario solo dispositivo,Grupo Windows,Usuario externo];
                                                   OptionString=Full User,Limited User,Device Only User,Windows Group,External User }
    { 950 ;   ;Time Sheet Admin.   ;Boolean       ;CaptionML=[ENU=Time Sheet Admin.;
                                                              ESP=Admin. parte horas] }
    { 5600;   ;Allow FA Posting From;Date         ;CaptionML=[ENU=Allow FA Posting From;
                                                              ESP=A/F Permitir registro desde] }
    { 5601;   ;Allow FA Posting To ;Date          ;CaptionML=[ENU=Allow FA Posting To;
                                                              ESP=A/F Permitir registro hasta] }
    { 5700;   ;Sales Resp. Ctr. Filter;Code10     ;TableRelation="Responsibility Center".Code;
                                                   CaptionML=[ENU=Sales Resp. Ctr. Filter;
                                                              ESP=Filtro centro resp. vent.] }
    { 5701;   ;Purchase Resp. Ctr. Filter;Code10  ;TableRelation="Responsibility Center";
                                                   CaptionML=[ENU=Purchase Resp. Ctr. Filter;
                                                              ESP=Filtro centro resp. compras] }
    { 5900;   ;Service Resp. Ctr. Filter;Code10   ;TableRelation="Responsibility Center";
                                                   CaptionML=[ENU=Service Resp. Ctr. Filter;
                                                              ESP=Filtro centro resp. servicio] }
    { 50000;  ;Autoriza margen m¡nimo ventas;Boolean;
                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 7014704;;Usuario TPV         ;Boolean       ;OnValidate=BEGIN
                                                                "C¢d. TPV por defecto" := ''; //  VNTES
                                                              END;

                                                   CaptionML=[ENU=User TPV;
                                                              ESP=Usuario TPV];
                                                   Description=VNTES }
    { 7014705;;C¢d. TPV por defecto;Code10        ;TableRelation=TPV.C¢digo;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Usuario TPV"); //  VNTES
                                                              END;

                                                   CaptionML=[ENU=Cod. TPV default;
                                                              ESP=C¢d. TPV por defecto];
                                                   Description=VNTES }
    { 7014890;;Nombre libro diario ventanilla;Code10;
                                                   TableRelation="Gen. Journal Template".Name WHERE (Type=CONST(Ventanilla));
                                                   OnValidate=BEGIN
                                                                "Secc. libro diario ventanilla" := ''; //  VNTES
                                                              END;

                                                   CaptionML=[ENU=Name journal window;
                                                              ESP=Nombre libro diario ventanilla];
                                                   Description=VNTES }
    { 7014891;;Secc. libro diario ventanilla;Code10;
                                                   TableRelation="Gen. Journal Batch".Name WHERE (Journal Template Name=FIELD(Nombre libro diario ventanilla));
                                                   OnLookup=BEGIN
                                                              GestOtros.T91LookupSeccLibroDiarioVent(Rec); //  VNTES
                                                            END;

                                                   CaptionML=[ENU=Sec. journal window;
                                                              ESP=Secc. libro diario ventanilla];
                                                   Description=VNTES }
  }
  KEYS
  {
    {    ;User ID                                 ;Clustered=Yes }
    {    ;Salespers./Purch. Code                   }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Text001@1000 : TextConst 'ENU=The %1 Salesperson/Purchaser code is already assigned to another User ID %2.;ESP=El c¢digo de Vendedor/Comprador %1 ya est  asignado a otro id. usuario %2.';
      Text003@1002 : TextConst 'ENU="You cannot have both a %1 and %2. ";ESP="No puede tener un %1 y una %2. "';
      Text005@1004 : TextConst 'ENU=You cannot have approval limits less than zero.;ESP=No puede tener l¡mites de aprobaci¢n inferiores a cero.';
      GestOtros@1170170000 : Codeunit 7014614;
      SalesPersonPurchaser@1011 : Record 13;
      PrivacyBlockedGenericErr@1013 : TextConst '@@@="%1 = salesperson / purchaser code.";ENU=Privacy Blocked must not be true for Salesperson / Purchaser %1.;ESP=La opci¢n Privacidad bloqueada no debe ser verdadera para el Vendedor/Comprador %1.';
      UserSetupManagement@1001 : Codeunit 5700;

    [External]
    PROCEDURE CreateApprovalUserSetup@3(User@1000 : Record 2000000120);
    VAR
      UserSetup@1001 : Record 91;
      ApprovalUserSetup@1002 : Record 91;
    BEGIN
      ApprovalUserSetup.INIT;
      ApprovalUserSetup.VALIDATE("User ID",User."User Name");
      ApprovalUserSetup.VALIDATE("Sales Amount Approval Limit",GetDefaultSalesAmountApprovalLimit);
      ApprovalUserSetup.VALIDATE("Purchase Amount Approval Limit",GetDefaultPurchaseAmountApprovalLimit);
      ApprovalUserSetup.VALIDATE("E-Mail",User."Contact Email");
      UserSetup.SETRANGE("Sales Amount Approval Limit",UserSetup.GetDefaultSalesAmountApprovalLimit);
      IF UserSetup.FINDFIRST THEN
        ApprovalUserSetup.VALIDATE("Approver ID",UserSetup."Approver ID");
      IF ApprovalUserSetup.INSERT THEN;
    END;

    [External]
    PROCEDURE GetDefaultSalesAmountApprovalLimit@1() : Integer;
    VAR
      UserSetup@1001 : Record 91;
      DefaultApprovalLimit@1000 : Integer;
      LimitedApprovers@1002 : Integer;
    BEGIN
      UserSetup.SETRANGE("Unlimited Sales Approval",FALSE);

      IF UserSetup.FINDFIRST THEN BEGIN
        DefaultApprovalLimit := UserSetup."Sales Amount Approval Limit";
        LimitedApprovers := UserSetup.COUNT;
        UserSetup.SETRANGE("Sales Amount Approval Limit",DefaultApprovalLimit);
        IF LimitedApprovers = UserSetup.COUNT THEN
          EXIT(DefaultApprovalLimit);
      END;

      // Return 0 if no user setup exists or no default value is found
      EXIT(0);
    END;

    [External]
    PROCEDURE GetDefaultPurchaseAmountApprovalLimit@2() : Integer;
    VAR
      UserSetup@1002 : Record 91;
      DefaultApprovalLimit@1001 : Integer;
      LimitedApprovers@1000 : Integer;
    BEGIN
      UserSetup.SETRANGE("Unlimited Purchase Approval",FALSE);

      IF UserSetup.FINDFIRST THEN BEGIN
        DefaultApprovalLimit := UserSetup."Purchase Amount Approval Limit";
        LimitedApprovers := UserSetup.COUNT;
        UserSetup.SETRANGE("Purchase Amount Approval Limit",DefaultApprovalLimit);
        IF LimitedApprovers = UserSetup.COUNT THEN
          EXIT(DefaultApprovalLimit);
      END;

      // Return 0 if no user setup exists or no default value is found
      EXIT(0);
    END;

    [External]
    PROCEDURE HideExternalUsers@5();
    VAR
      PermissionManager@1001 : Codeunit 9002;
      OriginalFilterGroup@1000 : Integer;
    BEGIN
      IF NOT PermissionManager.SoftwareAsAService THEN
        EXIT;

      OriginalFilterGroup := FILTERGROUP;
      FILTERGROUP := 2;
      CALCFIELDS("License Type");
      SETFILTER("License Type",'<>%1',"License Type"::"External User");
      FILTERGROUP := OriginalFilterGroup;
    END;

    LOCAL PROCEDURE UpdateSalesPerson@4();
    VAR
      SalespersonPurchaser@1000 : Record 13;
    BEGIN
      IF ("E-Mail" <> '') AND SalespersonPurchaser.GET("Salespers./Purch. Code") THEN BEGIN
        SalespersonPurchaser."E-Mail" := COPYSTR("E-Mail",1,MAXSTRLEN(SalespersonPurchaser."E-Mail"));
        SalespersonPurchaser.MODIFY;
      END;
    END;

    LOCAL PROCEDURE ValidateSalesPersonPurchOnUserSetup@298(UserSetup2@1000 : Record 91);
    BEGIN
      IF UserSetup2."Salespers./Purch. Code" <> '' THEN
        IF SalesPersonPurchaser.GET(UserSetup2."Salespers./Purch. Code") THEN
          IF SalesPersonPurchaser.VerifySalesPersonPurchaserPrivacyBlocked(SalesPersonPurchaser) THEN
            ERROR(PrivacyBlockedGenericErr,UserSetup2."Salespers./Purch. Code")
    END;

    [External]
    PROCEDURE CheckAllowedPostingDates@6(NotificationType@1000 : 'Error,Notification');
    BEGIN
      UserSetupManagement.CheckAllowedPostingDatesRange(
        "Allow Posting From","Allow Posting To",NotificationType,DATABASE::"User Setup");
    END;

    BEGIN
    END.
  }
}

OBJECT Table 110 Sales Shipment Header
{
  OBJECT-PROPERTIES
  {
    Date=29/04/20;
    Time=11:40:33;
    Modified=Yes;
    Version List=NAVW114.03,NAVES14.03,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    DataCaptionFields=No.,Sell-to Customer Name;
    OnDelete=VAR
               CertificateOfSupply@1000 : Record 780;
               PostSalesDelete@1001 : Codeunit 363;
             BEGIN
               TESTFIELD("No. Printed");
               LOCKTABLE;
               PostSalesDelete.DeleteSalesShptLines(Rec);

               SalesCommentLine.SETRANGE("Document Type",SalesCommentLine."Document Type"::Shipment);
               SalesCommentLine.SETRANGE("No.","No.");
               SalesCommentLine.DELETEALL;

               ApprovalsMgmt.DeletePostedApprovalEntries(RECORDID);

               IF CertificateOfSupply.GET(CertificateOfSupply."Document Type"::"Sales Shipment","No.") THEN
                 CertificateOfSupply.DELETE(TRUE);
             END;

    CaptionML=[ENU=Sales Shipment Header;
               ESP=Hist¢rico cab. albar n venta];
    LookupPageID=Page142;
    DrillDownPageID=Page142;
  }
  FIELDS
  {
    { 2   ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Sell-to Customer No.;
                                                              ESP=Venta a-No. cliente];
                                                   NotBlank=Yes }
    { 3   ;   ;No.                 ;Code20        ;CaptionML=[ENU=No.;
                                                              ESP=No.] }
    { 4   ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Bill-to Customer No.;
                                                              ESP=Factura-a No. cliente];
                                                   NotBlank=Yes }
    { 5   ;   ;Bill-to Name        ;Text100       ;CaptionML=[ENU=Bill-to Name;
                                                              ESP=Fact. a-Nombre] }
    { 6   ;   ;Bill-to Name 2      ;Text50        ;CaptionML=[ENU=Bill-to Name 2;
                                                              ESP=Fact. a-Nombre 2] }
    { 7   ;   ;Bill-to Address     ;Text100       ;CaptionML=[ENU=Bill-to Address;
                                                              ESP=Fact. a-Direcci¢n] }
    { 8   ;   ;Bill-to Address 2   ;Text50        ;CaptionML=[ENU=Bill-to Address 2;
                                                              ESP=Fact. a-Direcci¢n 2] }
    { 9   ;   ;Bill-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Bill-to City;
                                                              ESP=Fact. a-Poblaci¢n] }
    { 10  ;   ;Bill-to Contact     ;Text100       ;CaptionML=[ENU=Bill-to Contact;
                                                              ESP=Fact. a-Atenci¢n] }
    { 11  ;   ;Your Reference      ;Text35        ;CaptionML=[ENU=Your Reference;
                                                              ESP=Su/Ntra. ref.] }
    { 12  ;   ;Ship-to Code        ;Code10        ;TableRelation="Ship-to Address".Code WHERE (Customer No.=FIELD(Sell-to Customer No.));
                                                   CaptionML=[ENU=Ship-to Code;
                                                              ESP=C¢d. direcci¢n env¡o cliente] }
    { 13  ;   ;Ship-to Name        ;Text100       ;CaptionML=[ENU=Ship-to Name;
                                                              ESP=Nombre direcci¢n de env¡o] }
    { 14  ;   ;Ship-to Name 2      ;Text50        ;CaptionML=[ENU=Ship-to Name 2;
                                                              ESP=Nombre direcci¢n de env¡o 2] }
    { 15  ;   ;Ship-to Address     ;Text100       ;CaptionML=[ENU=Ship-to Address;
                                                              ESP=Direcci¢n de env¡o] }
    { 16  ;   ;Ship-to Address 2   ;Text50        ;CaptionML=[ENU=Ship-to Address 2;
                                                              ESP=Direcci¢n de env¡o 2] }
    { 17  ;   ;Ship-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Ship-to City;
                                                              ESP=Poblaci¢n direcci¢n de env¡o] }
    { 18  ;   ;Ship-to Contact     ;Text100       ;CaptionML=[ENU=Ship-to Contact;
                                                              ESP=Contacto de direcci¢n de env¡o] }
    { 19  ;   ;Order Date          ;Date          ;CaptionML=[ENU=Order Date;
                                                              ESP=Fecha pedido] }
    { 20  ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              ESP=Fecha registro] }
    { 21  ;   ;Shipment Date       ;Date          ;CaptionML=[ENU=Shipment Date;
                                                              ESP=Fecha env¡o] }
    { 22  ;   ;Posting Description ;Text100       ;CaptionML=[ENU=Posting Description;
                                                              ESP=Texto de registro] }
    { 23  ;   ;Payment Terms Code  ;Code10        ;TableRelation="Payment Terms";
                                                   CaptionML=[ENU=Payment Terms Code;
                                                              ESP=C¢d. t‚rminos pago] }
    { 24  ;   ;Due Date            ;Date          ;CaptionML=[ENU=Due Date;
                                                              ESP=Fecha vencimiento] }
    { 25  ;   ;Payment Discount %  ;Decimal       ;CaptionML=[ENU=Payment Discount %;
                                                              ESP=% Dto. P.P.];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 26  ;   ;Pmt. Discount Date  ;Date          ;CaptionML=[ENU=Pmt. Discount Date;
                                                              ESP=Fecha dto. P.P.] }
    { 27  ;   ;Shipment Method Code;Code10        ;TableRelation="Shipment Method";
                                                   CaptionML=[ENU=Shipment Method Code;
                                                              ESP=C¢d. condiciones env¡o] }
    { 28  ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 29  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Shortcut Dimension 1 Code;
                                                              ESP=C¢d. dim. acceso dir. 1];
                                                   CaptionClass='1,2,1' }
    { 30  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Shortcut Dimension 2 Code;
                                                              ESP=C¢d. dim. acceso dir. 2];
                                                   CaptionClass='1,2,2' }
    { 31  ;   ;Customer Posting Group;Code20      ;TableRelation="Customer Posting Group";
                                                   CaptionML=[ENU=Customer Posting Group;
                                                              ESP=Grupo registro cliente];
                                                   Editable=No }
    { 32  ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa];
                                                   Editable=No }
    { 33  ;   ;Currency Factor     ;Decimal       ;CaptionML=[ENU=Currency Factor;
                                                              ESP=Factor divisa];
                                                   DecimalPlaces=0:15;
                                                   MinValue=0 }
    { 34  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   CaptionML=[ENU=Customer Price Group;
                                                              ESP=Grupo precio cliente] }
    { 35  ;   ;Prices Including VAT;Boolean       ;CaptionML=[ENU=Prices Including VAT;
                                                              ESP=Precios IVA incluido] }
    { 37  ;   ;Invoice Disc. Code  ;Code20        ;CaptionML=[ENU=Invoice Disc. Code;
                                                              ESP=C¢d. dto. factura] }
    { 40  ;   ;Customer Disc. Group;Code20        ;TableRelation="Customer Discount Group";
                                                   CaptionML=[ENU=Customer Disc. Group;
                                                              ESP=Grupo dto. cliente] }
    { 41  ;   ;Language Code       ;Code10        ;TableRelation=Language;
                                                   CaptionML=[ENU=Language Code;
                                                              ESP=C¢d. idioma] }
    { 43  ;   ;Salesperson Code    ;Code20        ;TableRelation=Salesperson/Purchaser;
                                                   CaptionML=[ENU=Salesperson Code;
                                                              ESP=C¢d. vendedor] }
    { 44  ;   ;Order No.           ;Code20        ;CaptionML=[ENU=Order No.;
                                                              ESP=No. pedido] }
    { 46  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Comment Line" WHERE (Document Type=CONST(Shipment),
                                                                                                 No.=FIELD(No.),
                                                                                                 Document Line No.=CONST(0)));
                                                   CaptionML=[ENU=Comment;
                                                              ESP=Comentario];
                                                   Editable=No }
    { 47  ;   ;No. Printed         ;Integer       ;CaptionML=[ENU=No. Printed;
                                                              ESP=No. copias impresas];
                                                   Editable=No }
    { 51  ;   ;On Hold             ;Code3         ;CaptionML=[ENU=On Hold;
                                                              ESP=Esperar] }
    { 52  ;   ;Applies-to Doc. Type;Option        ;CaptionML=[ENU=Applies-to Doc. Type;
                                                              ESP=Liq. por tipo documento];
                                                   OptionCaptionML=[ENU=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill";
                                                                    ESP=" ,Pago,Factura,Abono,Docs. inter‚s,Recordatorio,Reembolso,,,,,,,,,,,,,,,Efecto"];
                                                   OptionString=[ ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill] }
    { 53  ;   ;Applies-to Doc. No. ;Code20        ;OnLookup=BEGIN
                                                              CustLedgEntry.SETCURRENTKEY("Document No.");
                                                              CustLedgEntry.SETRANGE("Document Type","Applies-to Doc. Type");
                                                              CustLedgEntry.SETRANGE("Document No.","Applies-to Doc. No.");
                                                              CustLedgEntry.SETRANGE("Bill No.","Applies-to Bill No.");
                                                              PAGE.RUN(0,CustLedgEntry);
                                                            END;

                                                   CaptionML=[ENU=Applies-to Doc. No.;
                                                              ESP=Liq. por No. documento] }
    { 55  ;   ;Bal. Account No.    ;Code20        ;TableRelation=IF (Bal. Account Type=CONST(G/L Account)) "G/L Account"
                                                                 ELSE IF (Bal. Account Type=CONST(Bank Account)) "Bank Account";
                                                   CaptionML=[ENU=Bal. Account No.;
                                                              ESP=Cta. contrapartida] }
    { 70  ;   ;VAT Registration No.;Text20        ;CaptionML=[ENU=VAT Registration No.;
                                                              ESP=CIF/NIF] }
    { 73  ;   ;Reason Code         ;Code10        ;TableRelation="Reason Code";
                                                   CaptionML=[ENU=Reason Code;
                                                              ESP=C¢d. auditor¡a] }
    { 74  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESP=Grupo registro neg. gen.] }
    { 75  ;   ;EU 3-Party Trade    ;Boolean       ;CaptionML=[ENU=EU 3-Party Trade;
                                                              ESP=Op. triangular] }
    { 76  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   CaptionML=[ENU=Transaction Type;
                                                              ESP=Naturaleza transacci¢n] }
    { 77  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   CaptionML=[ENU=Transport Method;
                                                              ESP=Modo transporte] }
    { 78  ;   ;VAT Country/Region Code;Code10     ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=VAT Country/Region Code;
                                                              ESP=C¢d. IVA pa¡s/regi¢n] }
    { 79  ;   ;Sell-to Customer Name;Text100      ;CaptionML=[ENU=Sell-to Customer Name;
                                                              ESP=Venta a-Nombre] }
    { 80  ;   ;Sell-to Customer Name 2;Text50     ;CaptionML=[ENU=Sell-to Customer Name 2;
                                                              ESP=Venta a-Nombre 2] }
    { 81  ;   ;Sell-to Address     ;Text100       ;CaptionML=[ENU=Sell-to Address;
                                                              ESP=Venta a-Direcci¢n] }
    { 82  ;   ;Sell-to Address 2   ;Text50        ;CaptionML=[ENU=Sell-to Address 2;
                                                              ESP=Venta a-Direcci¢n 2] }
    { 83  ;   ;Sell-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Sell-to City;
                                                              ESP=Venta a-Poblaci¢n] }
    { 84  ;   ;Sell-to Contact     ;Text100       ;CaptionML=[ENU=Sell-to Contact;
                                                              ESP=Venta a-Atenci¢n] }
    { 85  ;   ;Bill-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Bill-to Post Code;
                                                              ESP=Fact. a-C.P.] }
    { 86  ;   ;Bill-to County      ;Text30        ;CaptionML=[ENU=Bill-to County;
                                                              ESP=Fact. a-Provincia];
                                                   CaptionClass='5,1,' + "Bill-to Country/Region Code" }
    { 87  ;   ;Bill-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Bill-to Country/Region Code;
                                                              ESP=Fact. a-C¢d. pa¡s/regi¢n] }
    { 88  ;   ;Sell-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Sell-to Post Code;
                                                              ESP=Venta a-C.P.] }
    { 89  ;   ;Sell-to County      ;Text30        ;CaptionML=[ENU=Sell-to County;
                                                              ESP=Venta a-Provincia];
                                                   CaptionClass='5,1,' + "Sell-to Country/Region Code" }
    { 90  ;   ;Sell-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Sell-to Country/Region Code;
                                                              ESP=Venta a-C¢d. pa¡s/regi¢n] }
    { 91  ;   ;Ship-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Ship-to Post Code;
                                                              ESP=C.P. direcci¢n de env¡o] }
    { 92  ;   ;Ship-to County      ;Text30        ;CaptionML=[ENU=Ship-to County;
                                                              ESP=Provincia direcci¢n de env¡o];
                                                   CaptionClass='5,1,' + "Ship-to Country/Region Code" }
    { 93  ;   ;Ship-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Ship-to Country/Region Code;
                                                              ESP=C¢d. pa¡s/regi¢n direcci¢n de env¡o] }
    { 94  ;   ;Bal. Account Type   ;Option        ;CaptionML=[ENU=Bal. Account Type;
                                                              ESP=Tipo contrapartida];
                                                   OptionCaptionML=[ENU=G/L Account,Bank Account;
                                                                    ESP=Cuenta,Banco];
                                                   OptionString=G/L Account,Bank Account }
    { 97  ;   ;Exit Point          ;Code10        ;TableRelation="Entry/Exit Point";
                                                   CaptionML=[ENU=Exit Point;
                                                              ESP=Puerto/Aerop. carga] }
    { 98  ;   ;Correction          ;Boolean       ;CaptionML=[ENU=Correction;
                                                              ESP=Correcci¢n] }
    { 99  ;   ;Document Date       ;Date          ;CaptionML=[ENU=Document Date;
                                                              ESP=Fecha emisi¢n documento] }
    { 100 ;   ;External Document No.;Code35       ;CaptionML=[ENU=External Document No.;
                                                              ESP=No. documento externo] }
    { 101 ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   CaptionML=[ENU=Area;
                                                              ESP=C¢d. provincia] }
    { 102 ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   CaptionML=[ENU=Transaction Specification;
                                                              ESP=Especificaci¢n transacci¢n] }
    { 104 ;   ;Payment Method Code ;Code10        ;TableRelation="Payment Method";
                                                   CaptionML=[ENU=Payment Method Code;
                                                              ESP=C¢d. forma pago] }
    { 105 ;   ;Shipping Agent Code ;Code10        ;TableRelation="Shipping Agent";
                                                   OnValidate=BEGIN
                                                                IF "Shipping Agent Code" <> xRec."Shipping Agent Code" THEN
                                                                  VALIDATE("Shipping Agent Service Code",'');
                                                              END;

                                                   AccessByPermission=TableData 5790=R;
                                                   CaptionML=[ENU=Shipping Agent Code;
                                                              ESP=C¢d. transportista] }
    { 106 ;   ;Package Tracking No.;Text30        ;CaptionML=[ENU=Package Tracking No.;
                                                              ESP=No. seguimiento bulto] }
    { 109 ;   ;No. Series          ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. Series;
                                                              ESP=Nos. serie];
                                                   Editable=No }
    { 110 ;   ;Order No. Series    ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Order No. Series;
                                                              ESP=No. serie pedido] }
    { 112 ;   ;User ID             ;Code50        ;TableRelation=User."User Name";
                                                   OnLookup=VAR
                                                              UserMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                              UserMgt.LookupUserID("User ID");
                                                            END;

                                                   TestTableRelation=No;
                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=User ID;
                                                              ESP=Id. usuario] }
    { 113 ;   ;Source Code         ;Code10        ;TableRelation="Source Code";
                                                   CaptionML=[ENU=Source Code;
                                                              ESP=C¢d. origen] }
    { 114 ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESP=C¢d.  rea impuesto] }
    { 115 ;   ;Tax Liable          ;Boolean       ;CaptionML=[ENU=Tax Liable;
                                                              ESP=Sujeto a impuesto] }
    { 116 ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=VAT Bus. Posting Group;
                                                              ESP=Grupo registro IVA neg.] }
    { 119 ;   ;VAT Base Discount % ;Decimal       ;CaptionML=[ENU=VAT Base Discount %;
                                                              ESP=% Dto. base IVA];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 151 ;   ;Quote No.           ;Code20        ;CaptionML=[ENU=Quote No.;
                                                              ESP=No. oferta];
                                                   Editable=No }
    { 171 ;   ;Sell-to Phone No.   ;Text30        ;ExtendedDatatype=Phone No.;
                                                   CaptionML=[ENU=Sell-to Phone No.;
                                                              ESP=N.§ de tel‚fono de venta] }
    { 172 ;   ;Sell-to E-Mail      ;Text80        ;ExtendedDatatype=E-Mail;
                                                   CaptionML=[ENU=Email;
                                                              ESP=Correo electr¢nico] }
    { 200 ;   ;Work Description    ;BLOB          ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Work Description;
                                                              ESP=Descripci¢n del trabajo] }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              ESP=Id. grupo dimensiones];
                                                   Editable=No }
    { 5050;   ;Campaign No.        ;Code20        ;TableRelation=Campaign;
                                                   CaptionML=[ENU=Campaign No.;
                                                              ESP=No. campa¤a] }
    { 5052;   ;Sell-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   CaptionML=[ENU=Sell-to Contact No.;
                                                              ESP=Venta a-No. contacto] }
    { 5053;   ;Bill-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   CaptionML=[ENU=Bill-to Contact No.;
                                                              ESP=Fact. a-No. contacto] }
    { 5055;   ;Opportunity No.     ;Code20        ;TableRelation=Opportunity;
                                                   CaptionML=[ENU=Opportunity No.;
                                                              ESP=N§ oportunidad] }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   CaptionML=[ENU=Responsibility Center;
                                                              ESP=Centro responsabilidad] }
    { 5790;   ;Requested Delivery Date;Date       ;CaptionML=[ENU=Requested Delivery Date;
                                                              ESP=Fecha entrega requerida] }
    { 5791;   ;Promised Delivery Date;Date        ;CaptionML=[ENU=Promised Delivery Date;
                                                              ESP=Fecha entrega prometida] }
    { 5792;   ;Shipping Time       ;DateFormula   ;AccessByPermission=TableData 5790=R;
                                                   CaptionML=[ENU=Shipping Time;
                                                              ESP=Tiempo env¡o] }
    { 5793;   ;Outbound Whse. Handling Time;DateFormula;
                                                   AccessByPermission=TableData 14=R;
                                                   CaptionML=[ENU=Outbound Whse. Handling Time;
                                                              ESP=Tiempo manip. alm. salida] }
    { 5794;   ;Shipping Agent Service Code;Code10 ;TableRelation="Shipping Agent Services".Code WHERE (Shipping Agent Code=FIELD(Shipping Agent Code));
                                                   CaptionML=[ENU=Shipping Agent Service Code;
                                                              ESP=C¢d. servicio transportista] }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 50001;  ;Alias cliente       ;Code30        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Customer."Search Name" WHERE (No.=FIELD(Bill-to Customer No.)));
                                                   Description=BAIN-0062 }
    { 7000000;;Applies-to Bill No. ;Code20        ;CaptionML=[ENU=Applies-to Bill No.;
                                                              ESP=Liq. por No. efecto] }
    { 7000001;;Cust. Bank Acc. Code;Code20        ;TableRelation="Customer Bank Account".Code WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Cust. Bank Acc. Code;
                                                              ESP=C¢d. banco cliente] }
    { 7000003;;Pay-at Code         ;Code10        ;TableRelation="Customer Pmt. Address".Code WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Pay-at Code;
                                                              ESP=Pago en-C¢digo] }
    { 7014596;;No. Anexo           ;Code20        ;CaptionML=[ENU=Annex No.;
                                                              ESP=Nº Anexo;
                                                              PTG=No. DAA];
                                                   Description=VNTES }
    { 7014805;;Grupo descuento promocional;Code10 ;TableRelation="Grupo dto. promoci¢n cliente";
                                                   CaptionML=[ENU=Group discount coupon;
                                                              ESP=Grupo descuento promocional;
                                                              PTG=Grupo Desconto Promo‡Æo];
                                                   Description=VNTES }
    { 7014823;;C¢d. cosecha        ;Code10        ;TableRelation=Cosecha;
                                                   CaptionML=[ENU=Cod. harvest;
                                                              ESP=C¢d. cosecha];
                                                   Description=VNTES }
    { 7014890;;Id. sesi¢n TPV      ;Code20        ;TableRelation="Sesi¢n TPV";
                                                   CaptionML=[ENU=Id. Sign TPV;
                                                              ESP=Id. sesi¢n TPV];
                                                   Description=VNTES }
    { 7014891;;C¢d. TPV            ;Code20        ;TableRelation=TPV.C¢digo;
                                                   CaptionML=[ENU=Cod. TPV;
                                                              ESP=C¢d. TPV];
                                                   Description=VNTES }
    { 7014892;;Pendiente facturar  ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Shipment Line" WHERE (Document No.=FIELD(No.),
                                                                                                  Qty. Shipped Not Invoiced=FILTER(<>0)));
                                                   CaptionML=[ENU=Pending bill;
                                                              ESP=Pendiente facturar];
                                                   Description=VNTES }
    { 7014897;;C¢d. departamento EDI;Code20       ;CaptionML=[ENU=Cod. EDI department;
                                                              ESP=C¢d. departamento EDI];
                                                   Description=VNTES }
    { 7014899;;No. exportaciones   ;Integer       ;CaptionML=[ENU=No. exports;
                                                              ESP=Nº exportaciones];
                                                   Description=VNTES }
    { 7014900;;Enviado EDI         ;Boolean       ;CaptionML=[ENU=Posted EDI;
                                                              ESP=Enviado EDI];
                                                   Description=VNTES }
    { 7014901;;EDI Requested Delivery Date;Date   ;CaptionML=ESP=Fecha entrega requerida EDI;
                                                   Description=VNTES }
  }
  KEYS
  {
    {    ;No.                                     ;Clustered=Yes }
    {    ;Order No.                                }
    {    ;Bill-to Customer No.                     }
    {    ;Sell-to Customer No.                     }
    {    ;Posting Date                             }
    {    ;C¢d. TPV,Id. sesi¢n TPV,Posting Date     }
    {    ;Enviado EDI,No. exportaciones,Sell-to Customer No.,Posting Date }
    {    ;Location Code                            }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;No.,Sell-to Customer No.,Sell-to Customer Name,Posting Date,Posting Description }
  }
  CODE
  {
    VAR
      SalesShptHeader@1000 : Record 110;
      SalesCommentLine@1001 : Record 44;
      CustLedgEntry@1002 : Record 21;
      ShippingAgent@1004 : Record 291;
      DimMgt@1006 : Codeunit 408;
      ApprovalsMgmt@1011 : Codeunit 1535;
      UserSetupMgt@1008 : Codeunit 5700;
      TrackingInternetAddr@1007 : Text;
      DocTxt@1003 : TextConst 'ENU=Shipment;ESP=Env¡o';

    [External]
    PROCEDURE SendProfile@12(VAR DocumentSendingProfile@1000 : Record 60);
    VAR
      DummyReportSelections@1003 : Record 77;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeSendProfile(DocumentSendingProfile,Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      DocumentSendingProfile.Send(
        DummyReportSelections.Usage::"S.Shipment",Rec,"No.","Sell-to Customer No.",
        DocTxt,FIELDNO("Sell-to Customer No."),FIELDNO("No."));
    END;

    [External]
    PROCEDURE PrintRecords@3(ShowRequestForm@1000 : Boolean);
    VAR
      ReportSelection@1001 : Record 77;
      IsHandled@1002 : Boolean;
    BEGIN
      WITH SalesShptHeader DO BEGIN
        COPY(Rec);
        OnBeforePrintRecords(SalesShptHeader,ShowRequestForm,IsHandled);
        IF IsHandled THEN
          EXIT;

        ReportSelection.PrintWithGUIYesNo(
          ReportSelection.Usage::"S.Shipment",SalesShptHeader,ShowRequestForm,FIELDNO("Bill-to Customer No."));
      END;
    END;

    [Internal]
    PROCEDURE EmailRecords@17(ShowDialog@1000 : Boolean);
    VAR
      DocumentSendingProfile@1003 : Record 60;
      DummyReportSelections@1001 : Record 77;
      IsHandled@1002 : Boolean;
    BEGIN
      OnBeforeEmailRecords(Rec,ShowDialog,IsHandled);
      IF IsHandled THEN
        EXIT;

      DocumentSendingProfile.TrySendToEMail(
        DummyReportSelections.Usage::"S.Shipment",Rec,FIELDNO("No."),DocTxt,FIELDNO("Bill-to Customer No."),ShowDialog);
    END;

    [External]
    PROCEDURE Navigate@2();
    VAR
      NavigateForm@1000 : Page 344;
    BEGIN
      NavigateForm.SetDoc("Posting Date","No.");
      NavigateForm.RUN;
    END;

    [External]
    PROCEDURE StartTrackingSite@1();
    BEGIN
      HYPERLINK(GetTrackingInternetAddr);
    END;

    [External]
    PROCEDURE ShowDimensions@4();
    BEGIN
      DimMgt.ShowDimensionSet("Dimension Set ID",STRSUBSTNO('%1 %2',TABLECAPTION,"No."));
    END;

    [External]
    PROCEDURE IsCompletlyInvoiced@5() : Boolean;
    VAR
      SalesShipmentLine@1008 : Record 111;
    BEGIN
      SalesShipmentLine.SETRANGE("Document No.","No.");
      SalesShipmentLine.SETFILTER("Qty. Shipped Not Invoiced",'<>0');
      IF SalesShipmentLine.ISEMPTY THEN
        EXIT(TRUE);
      EXIT(FALSE);
    END;

    [External]
    PROCEDURE SetSecurityFilterOnRespCenter@6();
    BEGIN
      IF UserSetupMgt.GetSalesFilter <> '' THEN BEGIN
        FILTERGROUP(2);
        SETRANGE("Responsibility Center",UserSetupMgt.GetSalesFilter);
        FILTERGROUP(0);
      END;
    END;

    [External]
    PROCEDURE GetTrackingInternetAddr@7() : Text;
    VAR
      HttpStr@1001 : Text;
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeGetTrackingInternetAddr(Rec,TrackingInternetAddr,IsHandled);
      IF IsHandled THEN
        EXIT;

      HttpStr := 'http://';
      TESTFIELD("Shipping Agent Code");
      ShippingAgent.GET("Shipping Agent Code");
      TrackingInternetAddr := STRSUBSTNO(ShippingAgent."Internet Address","Package Tracking No.");

      IF STRPOS(TrackingInternetAddr,HttpStr) = 0 THEN
        TrackingInternetAddr := HttpStr + TrackingInternetAddr;
      EXIT(TrackingInternetAddr);
    END;

    [External]
    PROCEDURE GetWorkDescription@9() : Text;
    VAR
      TempBlob@1000 : TEMPORARY Record 99008535;
      CR@1004 : Text[1];
    BEGIN
      CALCFIELDS("Work Description");
      IF NOT "Work Description".HASVALUE THEN
        EXIT('');

      CR[1] := 10;
      TempBlob.Blob := "Work Description";
      EXIT(TempBlob.ReadAsText(CR,TEXTENCODING::UTF8));
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeEmailRecords@8(VAR SalesShipmentHeader@1000 : Record 110;SendDialog@1001 : Boolean;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforePrintRecords@10(VAR SalesShipmentHeader@1000 : Record 110;ShowDialog@1001 : Boolean;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSendProfile@11(VAR DocumentSendingProfile@1000 : Record 60;VAR SalesShipmentHeader@1001 : Record 110;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetTrackingInternetAddr@13(VAR SalesShipmentHeader@1000 : Record 110;VAR TrackingInternetAddr@1003 : Text;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    BEGIN
    {

      BAINES
      =========
      BAIN-0062 VM 120508 Se a¤ade el campo alias cliente.
    }
    END.
  }
}

OBJECT Table 112 Sales Invoice Header
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=12:38:17;
    Modified=Yes;
    Version List=NAVW114.04,NAVES14.04,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    DataCaptionFields=No.,Sell-to Customer Name;
    OnDelete=VAR
               PostedDeferralHeader@1002 : Record 1704;
               PostSalesDelete@1003 : Codeunit 363;
               DeferralUtilities@1001 : Codeunit 1720;
             BEGIN
               PostSalesDelete.IsDocumentDeletionAllowed("Posting Date");
               TESTFIELD("No. Printed");
               LOCKTABLE;
               PostSalesDelete.DeleteSalesInvLines(Rec);

               SalesCommentLine.SETRANGE("Document Type",SalesCommentLine."Document Type"::"Posted Invoice");
               SalesCommentLine.SETRANGE("No.","No.");
               SalesCommentLine.DELETEALL;

               ApprovalsMgmt.DeletePostedApprovalEntries(RECORDID);
               PostedDeferralHeader.DeleteForDoc(DeferralUtilities.GetSalesDeferralDocType,'','',
                 SalesCommentLine."Document Type"::"Posted Invoice","No.");
             END;

    CaptionML=[ENU=Sales Invoice Header;
               ESP=Hist¢rico cab. factura venta];
    LookupPageID=Page143;
    DrillDownPageID=Page143;
  }
  FIELDS
  {
    { 2   ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Sell-to Customer No.;
                                                              ESP=Venta a-N§ cliente];
                                                   NotBlank=Yes }
    { 3   ;   ;No.                 ;Code20        ;CaptionML=[ENU=No.;
                                                              ESP=N§] }
    { 4   ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Bill-to Customer No.;
                                                              ESP=Factura-a N§ cliente];
                                                   NotBlank=Yes }
    { 5   ;   ;Bill-to Name        ;Text100       ;CaptionML=[ENU=Bill-to Name;
                                                              ESP=Fact. a-Nombre] }
    { 6   ;   ;Bill-to Name 2      ;Text50        ;CaptionML=[ENU=Bill-to Name 2;
                                                              ESP=Fact. a-Nombre 2] }
    { 7   ;   ;Bill-to Address     ;Text100       ;CaptionML=[ENU=Bill-to Address;
                                                              ESP=Fact. a-Direcci¢n] }
    { 8   ;   ;Bill-to Address 2   ;Text50        ;CaptionML=[ENU=Bill-to Address 2;
                                                              ESP=Fact. a-Direcci¢n 2] }
    { 9   ;   ;Bill-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Bill-to City;
                                                              ESP=Fact. a-Poblaci¢n] }
    { 10  ;   ;Bill-to Contact     ;Text100       ;CaptionML=[ENU=Bill-to Contact;
                                                              ESP=Fact. a-Atenci¢n] }
    { 11  ;   ;Your Reference      ;Text35        ;CaptionML=[ENU=Your Reference;
                                                              ESP=Su/Ntra. ref.] }
    { 12  ;   ;Ship-to Code        ;Code10        ;TableRelation="Ship-to Address".Code WHERE (Customer No.=FIELD(Sell-to Customer No.));
                                                   CaptionML=[ENU=Ship-to Code;
                                                              ESP=C¢d. direcci¢n env¡o cliente] }
    { 13  ;   ;Ship-to Name        ;Text100       ;CaptionML=[ENU=Ship-to Name;
                                                              ESP=Nombre direcci¢n de env¡o] }
    { 14  ;   ;Ship-to Name 2      ;Text50        ;CaptionML=[ENU=Ship-to Name 2;
                                                              ESP=Nombre direcci¢n de env¡o 2] }
    { 15  ;   ;Ship-to Address     ;Text100       ;CaptionML=[ENU=Ship-to Address;
                                                              ESP=Direcci¢n de env¡o] }
    { 16  ;   ;Ship-to Address 2   ;Text50        ;CaptionML=[ENU=Ship-to Address 2;
                                                              ESP=Direcci¢n de env¡o 2] }
    { 17  ;   ;Ship-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Ship-to City;
                                                              ESP=Poblaci¢n direcci¢n de env¡o] }
    { 18  ;   ;Ship-to Contact     ;Text100       ;CaptionML=[ENU=Ship-to Contact;
                                                              ESP=Contacto de direcci¢n de env¡o] }
    { 19  ;   ;Order Date          ;Date          ;CaptionML=[ENU=Order Date;
                                                              ESP=Fecha pedido] }
    { 20  ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              ESP=Fecha registro] }
    { 21  ;   ;Shipment Date       ;Date          ;CaptionML=[ENU=Shipment Date;
                                                              ESP=Fecha env¡o] }
    { 22  ;   ;Posting Description ;Text100       ;CaptionML=[ENU=Posting Description;
                                                              ESP=Texto de registro] }
    { 23  ;   ;Payment Terms Code  ;Code10        ;TableRelation="Payment Terms";
                                                   CaptionML=[ENU=Payment Terms Code;
                                                              ESP=C¢d. t‚rminos pago] }
    { 24  ;   ;Due Date            ;Date          ;CaptionML=[ENU=Due Date;
                                                              ESP=Fecha vencimiento] }
    { 25  ;   ;Payment Discount %  ;Decimal       ;CaptionML=[ENU=Payment Discount %;
                                                              ESP=% Dto. P.P.];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 26  ;   ;Pmt. Discount Date  ;Date          ;CaptionML=[ENU=Pmt. Discount Date;
                                                              ESP=Fecha dto. P.P.] }
    { 27  ;   ;Shipment Method Code;Code10        ;TableRelation="Shipment Method";
                                                   CaptionML=[ENU=Shipment Method Code;
                                                              ESP=C¢d. condiciones env¡o] }
    { 28  ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 29  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Shortcut Dimension 1 Code;
                                                              ESP=C¢d. dim. acceso dir. 1];
                                                   CaptionClass='1,2,1' }
    { 30  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Shortcut Dimension 2 Code;
                                                              ESP=C¢d. dim. acceso dir. 2];
                                                   CaptionClass='1,2,2' }
    { 31  ;   ;Customer Posting Group;Code20      ;TableRelation="Customer Posting Group";
                                                   CaptionML=[ENU=Customer Posting Group;
                                                              ESP=Grupo registro cliente];
                                                   Editable=No }
    { 32  ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa];
                                                   Editable=No }
    { 33  ;   ;Currency Factor     ;Decimal       ;CaptionML=[ENU=Currency Factor;
                                                              ESP=Factor divisa];
                                                   DecimalPlaces=0:15;
                                                   MinValue=0 }
    { 34  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   CaptionML=[ENU=Customer Price Group;
                                                              ESP=Grupo precio cliente] }
    { 35  ;   ;Prices Including VAT;Boolean       ;CaptionML=[ENU=Prices Including VAT;
                                                              ESP=Precios IVA incluido] }
    { 37  ;   ;Invoice Disc. Code  ;Code20        ;CaptionML=[ENU=Invoice Disc. Code;
                                                              ESP=C¢d. dto. factura] }
    { 40  ;   ;Customer Disc. Group;Code20        ;TableRelation="Customer Discount Group";
                                                   CaptionML=[ENU=Customer Disc. Group;
                                                              ESP=Grupo dto. cliente] }
    { 41  ;   ;Language Code       ;Code10        ;TableRelation=Language;
                                                   CaptionML=[ENU=Language Code;
                                                              ESP=C¢d. idioma] }
    { 43  ;   ;Salesperson Code    ;Code20        ;TableRelation=Salesperson/Purchaser;
                                                   CaptionML=[ENU=Salesperson Code;
                                                              ESP=C¢d. vendedor] }
    { 44  ;   ;Order No.           ;Code20        ;AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Order No.;
                                                              ESP=N§ pedido] }
    { 46  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Comment Line" WHERE (Document Type=CONST(Posted Invoice),
                                                                                                 No.=FIELD(No.),
                                                                                                 Document Line No.=CONST(0)));
                                                   CaptionML=[ENU=Comment;
                                                              ESP=Comentario];
                                                   Editable=No }
    { 47  ;   ;No. Printed         ;Integer       ;CaptionML=[ENU=No. Printed;
                                                              ESP=N§ copias impresas];
                                                   Editable=No }
    { 51  ;   ;On Hold             ;Code3         ;CaptionML=[ENU=On Hold;
                                                              ESP=Esperar] }
    { 52  ;   ;Applies-to Doc. Type;Option        ;CaptionML=[ENU=Applies-to Doc. Type;
                                                              ESP=Liq. por tipo documento];
                                                   OptionCaptionML=[ENU=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill";
                                                                    ESP=" ,Pago,Factura,Abono,Docs. inter‚s,Recordatorio,Reembolso,,,,,,,,,,,,,,,Efecto"];
                                                   OptionString=[ ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill] }
    { 53  ;   ;Applies-to Doc. No. ;Code20        ;OnLookup=BEGIN
                                                              CustLedgEntry.SETCURRENTKEY("Document No.");
                                                              CustLedgEntry.SETRANGE("Document Type","Applies-to Doc. Type");
                                                              CustLedgEntry.SETRANGE("Document No.","Applies-to Doc. No.");
                                                              CustLedgEntry.SETRANGE("Bill No.","Applies-to Bill No.");
                                                              PAGE.RUN(0,CustLedgEntry);
                                                            END;

                                                   CaptionML=[ENU=Applies-to Doc. No.;
                                                              ESP=Liq. por n§ documento] }
    { 55  ;   ;Bal. Account No.    ;Code20        ;TableRelation=IF (Bal. Account Type=CONST(G/L Account)) "G/L Account"
                                                                 ELSE IF (Bal. Account Type=CONST(Bank Account)) "Bank Account";
                                                   CaptionML=[ENU=Bal. Account No.;
                                                              ESP=Cta. contrapartida] }
    { 60  ;   ;Amount              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Invoice Line".Amount WHERE (Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 61  ;   ;Amount Including VAT;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Invoice Line"."Amount Including VAT" WHERE (Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Amount Including VAT;
                                                              ESP=Importe IVA incl.];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 70  ;   ;VAT Registration No.;Text20        ;CaptionML=[ENU=VAT Registration No.;
                                                              ESP=CIF/NIF] }
    { 73  ;   ;Reason Code         ;Code10        ;TableRelation="Reason Code";
                                                   CaptionML=[ENU=Reason Code;
                                                              ESP=C¢d. auditor¡a] }
    { 74  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESP=Grupo registro neg. gen.] }
    { 75  ;   ;EU 3-Party Trade    ;Boolean       ;CaptionML=[ENU=EU 3-Party Trade;
                                                              ESP=Op. triangular] }
    { 76  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   CaptionML=[ENU=Transaction Type;
                                                              ESP=Naturaleza transacci¢n] }
    { 77  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   CaptionML=[ENU=Transport Method;
                                                              ESP=Modo transporte] }
    { 78  ;   ;VAT Country/Region Code;Code10     ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=VAT Country/Region Code;
                                                              ESP=C¢d. IVA pa¡s/regi¢n] }
    { 79  ;   ;Sell-to Customer Name;Text100      ;CaptionML=[ENU=Sell-to Customer Name;
                                                              ESP=Venta a-Nombre] }
    { 80  ;   ;Sell-to Customer Name 2;Text50     ;CaptionML=[ENU=Sell-to Customer Name 2;
                                                              ESP=Venta a-Nombre 2] }
    { 81  ;   ;Sell-to Address     ;Text100       ;CaptionML=[ENU=Sell-to Address;
                                                              ESP=Venta a-Direcci¢n] }
    { 82  ;   ;Sell-to Address 2   ;Text50        ;CaptionML=[ENU=Sell-to Address 2;
                                                              ESP=Venta a-Direcci¢n 2] }
    { 83  ;   ;Sell-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Sell-to City;
                                                              ESP=Venta a-Poblaci¢n] }
    { 84  ;   ;Sell-to Contact     ;Text100       ;CaptionML=[ENU=Sell-to Contact;
                                                              ESP=Venta a-Atenci¢n] }
    { 85  ;   ;Bill-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Bill-to Post Code;
                                                              ESP=Fact. a-C.P.] }
    { 86  ;   ;Bill-to County      ;Text30        ;CaptionML=[ENU=Bill-to County;
                                                              ESP=Fact. a-Provincia];
                                                   CaptionClass='5,1,' + "Bill-to Country/Region Code" }
    { 87  ;   ;Bill-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Bill-to Country/Region Code;
                                                              ESP=Fact. a-C¢d. pa¡s/regi¢n] }
    { 88  ;   ;Sell-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Sell-to Post Code;
                                                              ESP=Venta a-C.P.] }
    { 89  ;   ;Sell-to County      ;Text30        ;CaptionML=[ENU=Sell-to County;
                                                              ESP=Venta a-Provincia];
                                                   CaptionClass='5,1,' + "Sell-to Country/Region Code" }
    { 90  ;   ;Sell-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Sell-to Country/Region Code;
                                                              ESP=Venta a-C¢d. pa¡s/regi¢n] }
    { 91  ;   ;Ship-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Ship-to Post Code;
                                                              ESP=C.P. direcci¢n de env¡o] }
    { 92  ;   ;Ship-to County      ;Text30        ;CaptionML=[ENU=Ship-to County;
                                                              ESP=Provincia direcci¢n de env¡o];
                                                   CaptionClass='5,1,' + "Ship-to Country/Region Code" }
    { 93  ;   ;Ship-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Ship-to Country/Region Code;
                                                              ESP=C¢d. pa¡s/regi¢n direcci¢n de env¡o] }
    { 94  ;   ;Bal. Account Type   ;Option        ;CaptionML=[ENU=Bal. Account Type;
                                                              ESP=Tipo contrapartida];
                                                   OptionCaptionML=[ENU=G/L Account,Bank Account;
                                                                    ESP=Cuenta,Banco];
                                                   OptionString=G/L Account,Bank Account }
    { 97  ;   ;Exit Point          ;Code10        ;TableRelation="Entry/Exit Point";
                                                   CaptionML=[ENU=Exit Point;
                                                              ESP=Puerto/Aerop. carga] }
    { 98  ;   ;Correction          ;Boolean       ;CaptionML=[ENU=Correction;
                                                              ESP=Correcci¢n] }
    { 99  ;   ;Document Date       ;Date          ;CaptionML=[ENU=Document Date;
                                                              ESP=Fecha emisi¢n documento] }
    { 100 ;   ;External Document No.;Code35       ;CaptionML=[ENU=External Document No.;
                                                              ESP=N§ documento externo] }
    { 101 ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   CaptionML=[ENU=Area;
                                                              ESP=C¢d. provincia] }
    { 102 ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   CaptionML=[ENU=Transaction Specification;
                                                              ESP=Especificaci¢n transacci¢n] }
    { 104 ;   ;Payment Method Code ;Code10        ;TableRelation="Payment Method";
                                                   CaptionML=[ENU=Payment Method Code;
                                                              ESP=C¢d. forma pago] }
    { 105 ;   ;Shipping Agent Code ;Code10        ;TableRelation="Shipping Agent";
                                                   AccessByPermission=TableData 5790=R;
                                                   CaptionML=[ENU=Shipping Agent Code;
                                                              ESP=C¢d. transportista] }
    { 106 ;   ;Package Tracking No.;Text30        ;CaptionML=[ENU=Package Tracking No.;
                                                              ESP=N§ seguimiento bulto] }
    { 107 ;   ;Pre-Assigned No. Series;Code20     ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Pre-Assigned No. Series;
                                                              ESP=N§ serie preasignado] }
    { 108 ;   ;No. Series          ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. Series;
                                                              ESP=Nos. serie];
                                                   Editable=No }
    { 110 ;   ;Order No. Series    ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Order No. Series;
                                                              ESP=N§ serie pedido] }
    { 111 ;   ;Pre-Assigned No.    ;Code20        ;CaptionML=[ENU=Pre-Assigned No.;
                                                              ESP=N§ preasignado] }
    { 112 ;   ;User ID             ;Code50        ;TableRelation=User."User Name";
                                                   OnLookup=VAR
                                                              UserMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                              UserMgt.LookupUserID("User ID");
                                                            END;

                                                   TestTableRelation=No;
                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=User ID;
                                                              ESP=Id. usuario] }
    { 113 ;   ;Source Code         ;Code10        ;TableRelation="Source Code";
                                                   CaptionML=[ENU=Source Code;
                                                              ESP=C¢d. origen] }
    { 114 ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESP=C¢d.  rea impuesto] }
    { 115 ;   ;Tax Liable          ;Boolean       ;CaptionML=[ENU=Tax Liable;
                                                              ESP=Sujeto a impuesto] }
    { 116 ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=VAT Bus. Posting Group;
                                                              ESP=Grupo registro IVA neg.] }
    { 119 ;   ;VAT Base Discount % ;Decimal       ;CaptionML=[ENU=VAT Base Discount %;
                                                              ESP=% Dto. base IVA];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 121 ;   ;Invoice Discount Calculation;Option;CaptionML=[ENU=Invoice Discount Calculation;
                                                              ESP=C lculo de descuento en factura];
                                                   OptionCaptionML=[ENU=None,%,Amount;
                                                                    ESP=Ninguno,%,Importe];
                                                   OptionString=None,%,Amount }
    { 122 ;   ;Invoice Discount Value;Decimal     ;CaptionML=[ENU=Invoice Discount Value;
                                                              ESP=Valor de descuento en factura];
                                                   AutoFormatType=1 }
    { 131 ;   ;Prepayment No. Series;Code20       ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Prepayment No. Series;
                                                              ESP=N§ serie prepago] }
    { 136 ;   ;Prepayment Invoice  ;Boolean       ;CaptionML=[ENU=Prepayment Invoice;
                                                              ESP=Factura prepago] }
    { 137 ;   ;Prepayment Order No.;Code20        ;CaptionML=[ENU=Prepayment Order No.;
                                                              ESP=N§ pedido prepago] }
    { 151 ;   ;Quote No.           ;Code20        ;CaptionML=[ENU=Quote No.;
                                                              ESP=N§ oferta];
                                                   Editable=No }
    { 166 ;   ;Last Email Sent Time;DateTime      ;FieldClass=FlowField;
                                                   CalcFormula=Max("O365 Document Sent History"."Created Date-Time" WHERE (Document Type=CONST(Invoice),
                                                                                                                           Document No.=FIELD(No.),
                                                                                                                           Posted=CONST(Yes)));
                                                   CaptionML=[ENU=Last Email Sent Time;
                                                              ESP=Hora del £ltimo correo electr¢nico enviado] }
    { 167 ;   ;Last Email Sent Status;Option      ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("O365 Document Sent History"."Job Last Status" WHERE (Document Type=CONST(Invoice),
                                                                                                                            Document No.=FIELD(No.),
                                                                                                                            Posted=CONST(Yes),
                                                                                                                            Created Date-Time=FIELD(Last Email Sent Time)));
                                                   CaptionML=[ENU=Last Email Sent Status;
                                                              ESP=Estado del £ltimo correo electr¢nico enviado];
                                                   OptionCaptionML=[ENU=Not Sent,In Process,Finished,Error;
                                                                    ESP=No enviado,En proceso,Finalizado,Error];
                                                   OptionString=Not Sent,In Process,Finished,Error }
    { 168 ;   ;Sent as Email       ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("O365 Document Sent History" WHERE (Document Type=CONST(Invoice),
                                                                                                         Document No.=FIELD(No.),
                                                                                                         Posted=CONST(Yes),
                                                                                                         Job Last Status=CONST(Finished)));
                                                   CaptionML=[ENU=Sent as Email;
                                                              ESP=Enviado como correo electr¢nico] }
    { 169 ;   ;Last Email Notif Cleared;Boolean   ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("O365 Document Sent History".NotificationCleared WHERE (Document Type=CONST(Invoice),
                                                                                                                              Document No.=FIELD(No.),
                                                                                                                              Posted=CONST(Yes),
                                                                                                                              Created Date-Time=FIELD(Last Email Sent Time)));
                                                   CaptionML=[ENU=Last Email Notif Cleared;
                                                              ESP=éltima notif. correo electr¢nico borrada] }
    { 171 ;   ;Sell-to Phone No.   ;Text30        ;ExtendedDatatype=Phone No.;
                                                   CaptionML=[ENU=Sell-to Phone No.;
                                                              ESP=N.§ de tel‚fono de venta] }
    { 172 ;   ;Sell-to E-Mail      ;Text80        ;ExtendedDatatype=E-Mail;
                                                   CaptionML=[ENU=Email;
                                                              ESP=Correo electr¢nico] }
    { 176 ;   ;Payment Instructions;BLOB          ;CaptionML=[ENU=Payment Instructions;
                                                              ESP=Instrucciones de pago] }
    { 177 ;   ;Payment Instructions Name;Text20   ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Payment Instructions Name;
                                                              ESP=Nombre de instrucciones de pago] }
    { 200 ;   ;Work Description    ;BLOB          ;CaptionML=[ENU=Work Description;
                                                              ESP=Descripci¢n del trabajo] }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              ESP=Id. grupo dimensiones];
                                                   Editable=No }
    { 600 ;   ;Payment Service Set ID;Integer     ;CaptionML=[ENU=Payment Service Set ID;
                                                              ESP=Id. de conjunto de servicios de pago] }
    { 710 ;   ;Document Exchange Identifier;Text50;CaptionML=[ENU=Document Exchange Identifier;
                                                              ESP=Identificador de intercambio de documentos] }
    { 711 ;   ;Document Exchange Status;Option    ;CaptionML=[ENU=Document Exchange Status;
                                                              ESP=Estado de intercambio de documentos];
                                                   OptionCaptionML=[ENU=Not Sent,Sent to Document Exchange Service,Delivered to Recipient,Delivery Failed,Pending Connection to Recipient;
                                                                    ESP=Sin enviar,Enviado al servicio de intercambio de documentos,Entregado al destinatario,Error de entrega,Conexi¢n pendiente a destinatario];
                                                   OptionString=Not Sent,Sent to Document Exchange Service,Delivered to Recipient,Delivery Failed,Pending Connection to Recipient }
    { 712 ;   ;Doc. Exch. Original Identifier;Text50;
                                                   CaptionML=[ENU=Doc. Exch. Original Identifier;
                                                              ESP=Identificador original de intercambio documentos] }
    { 720 ;   ;Coupled to CRM      ;Boolean       ;CaptionML=[ENU=Coupled to Dynamics 365 for Sales;
                                                              ESP=Emparejado con Dynamics 365 for Sales] }
    { 1200;   ;Direct Debit Mandate ID;Code35     ;TableRelation="SEPA Direct Debit Mandate" WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Direct Debit Mandate ID;
                                                              ESP=Id. de orden de domiciliaci¢n de adeudo directo] }
    { 1302;   ;Closed              ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=-Exist("Cust. Ledger Entry" WHERE (Entry No.=FIELD(Cust. Ledger Entry No.),
                                                                                                  Open=FILTER(Yes)));
                                                   CaptionML=[ENU=Paid;
                                                              ESP=Cerrado];
                                                   Editable=No }
    { 1303;   ;Remaining Amount    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Cust. Ledger Entry No.=FIELD(Cust. Ledger Entry No.)));
                                                   CaptionML=[ENU=Remaining Amount;
                                                              ESP=Importe pendiente];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 1304;   ;Cust. Ledger Entry No.;Integer     ;TableRelation="Cust. Ledger Entry"."Entry No.";
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Cust. Ledger Entry No.;
                                                              ESP=N§ mov. cliente];
                                                   Editable=No }
    { 1305;   ;Invoice Discount Amount;Decimal    ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Invoice Line"."Inv. Discount Amount" WHERE (Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Invoice Discount Amount;
                                                              ESP=Importe descuento factura];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 1310;   ;Cancelled           ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Cancelled Document" WHERE (Source ID=CONST(112),
                                                                                                 Cancelled Doc. No.=FIELD(No.)));
                                                   CaptionML=[ENU=Cancelled;
                                                              ESP=Cancelado];
                                                   Editable=No }
    { 1311;   ;Corrective          ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Cancelled Document" WHERE (Source ID=CONST(114),
                                                                                                 Cancelled By Doc. No.=FIELD(No.)));
                                                   CaptionML=[ENU=Corrective;
                                                              ESP=Correctivo];
                                                   Editable=No }
    { 1312;   ;Reversed            ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Cust. Ledger Entry".Reversed WHERE (Entry No.=FIELD(Cust. Ledger Entry No.)));
                                                   CaptionML=[ENU=Reversed;
                                                              ESP=Revertido];
                                                   Editable=No }
    { 5050;   ;Campaign No.        ;Code20        ;TableRelation=Campaign;
                                                   CaptionML=[ENU=Campaign No.;
                                                              ESP=N§ campa¤a] }
    { 5052;   ;Sell-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   CaptionML=[ENU=Sell-to Contact No.;
                                                              ESP=Venta a-N§ contacto] }
    { 5053;   ;Bill-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   CaptionML=[ENU=Bill-to Contact No.;
                                                              ESP=Fact. a-N§ contacto] }
    { 5055;   ;Opportunity No.     ;Code20        ;TableRelation=Opportunity;
                                                   CaptionML=[ENU=Opportunity No.;
                                                              ESP=N§ oportunidad] }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   CaptionML=[ENU=Responsibility Center;
                                                              ESP=Centro responsabilidad] }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 7200;   ;Get Shipment Used   ;Boolean       ;CaptionML=[ENU=Get Shipment Used;
                                                              ESP=Obtener m‚todo de env¡o usado] }
    { 8000;   ;Id                  ;GUID          ;CaptionML=[ENU=Id;
                                                              ESP=Id.] }
    { 10706;  ;SII Status          ;Option        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("SII Doc. Upload State".Status WHERE (Document Source=CONST(Customer Ledger),
                                                                                                            Document Type=CONST(Invoice),
                                                                                                            Document No.=FIELD(No.)));
                                                   OnLookup=VAR
                                                              SIIDocUploadState@1100000 : Record 10752;
                                                              SIIHistory@1100001 : Record 10750;
                                                            BEGIN
                                                              SIIDocUploadState.SETRANGE("Document Source",SIIDocUploadState."Document Source"::"Customer Ledger");
                                                              SIIDocUploadState.SETRANGE("Document Type",SIIDocUploadState."Document Type"::Invoice);
                                                              SIIDocUploadState.SETRANGE("Document No.","No.");
                                                              IF SIIDocUploadState.FINDFIRST THEN BEGIN
                                                                SIIHistory.SETRANGE("Document State Id",SIIDocUploadState.Id);
                                                                PAGE.RUN(PAGE::"SII History",SIIHistory);
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=SII Status;
                                                              ESP=Estado SII];
                                                   OptionCaptionML=[ENU=Pending,Incorrect,Accepted,"Accepted With Errors",Communication Error,Failed,Not Supported;
                                                                    ESP=Pendiente,Incorrecto,Aceptado,"Aceptado con errores",Error de comunicaci¢n,Errores,No compatible];
                                                   OptionString=Pending,Incorrect,Accepted,"Accepted With Errors",Communication Error,Failed,Not Supported }
    { 10707;  ;Invoice Type        ;Option        ;CaptionML=[ENU=Invoice Type;
                                                              ESP=Tipo de factura];
                                                   OptionCaptionML=[ENU=F1 Invoice,F2 Simplified Invoice,F3 Invoice issued to replace simplified invoices,F4 Invoice summary entry;
                                                                    ESP=F1 Factura,F2 Factura simplificada,F3 Factura emitida para sustituir a las facturas simplificadas,F4 Movimiento de resumen de facturas];
                                                   OptionString=F1 Invoice,F2 Simplified Invoice,F3 Invoice issued to replace simplified invoices,F4 Invoice summary entry }
    { 10708;  ;Cr. Memo Type       ;Option        ;CaptionML=[ENU=Cr. Memo Type;
                                                              ESP=Tipo de abono];
                                                   OptionCaptionML=[ENU=R1 Corrected Invoice,R2 Corrected Invoice (Art. 80.3),R3 Corrected Invoice (Art. 80.4),R4 Corrected Invoice (Other),R5 Corrected Invoice in Simplified Invoices;
                                                                    ESP=R1 Factura corregida,R2 Factura corregida (art¡culo 80.3),R3 Factura corregida (art¡culo 80.4),R4 Factura corregida (otros),R5 Factura corregida en facturas simplificadas];
                                                   OptionString=R1 Corrected Invoice,R2 Corrected Invoice (Art. 80.3),R3 Corrected Invoice (Art. 80.4),R4 Corrected Invoice (Other),R5 Corrected Invoice in Simplified Invoices }
    { 10709;  ;Special Scheme Code ;Option        ;CaptionML=[ENU=Special Scheme Code;
                                                              ESP=C¢d. de esquema especial];
                                                   OptionCaptionML=[ENU=01 General,02 Export,03 Special System,04 Gold,05 Travel Agencies,06 Groups of Entities,07 Special Cash,08  IPSI / IGIC,09 Travel Agency Services,10 Third Party,11 Business Withholding,12 Business not Withholding,13 Business Withholding and not Withholding,14 Invoice Work Certification,15 Invoice of Consecutive Nature,16 First Half 2017;
                                                                    ESP=01 General,02 Exportaciones,03 Sistema especial,04 Oro,05 Agencias de viajes,06 Grupos de entidades,07 Efectivo especial,08 IPSI/IGIC,09 Servicios de agencias de viajes,10 Terceros,11 Negocio con retenci¢n,12 Negocio sin retenci¢n,13 Negocio con y sin retenci¢n,14 Certificaci¢n laboral de factura,15 Factura consecutiva,16 Primer semestre 2017];
                                                   OptionString=01 General,02 Export,03 Special System,04 Gold,05 Travel Agencies,06 Groups of Entities,07 Special Cash,08  IPSI / IGIC,09 Travel Agency Services,10 Third Party,11 Business Withholding,12 Business not Withholding,13 Business Withholding and not Withholding,14 Invoice Work Certification,15 Invoice of Consecutive Nature,16 First Half 2017 }
    { 10710;  ;Operation Description;Text250      ;CaptionML=[ENU=Operation Description;
                                                              ESP=Descripci¢n de la operaci¢n] }
    { 10712;  ;Operation Description 2;Text250    ;CaptionML=[ENU=Operation Description 2;
                                                              ESP=Descripci¢n de la operaci¢n 2] }
    { 10720;  ;Succeeded Company Name;Text250     ;CaptionML=[ENU=Succeeded Company Name;
                                                              ESP=Nombre de empresa correcto] }
    { 10721;  ;Succeeded VAT Registration No.;Text20;
                                                   CaptionML=[ENU=Succeeded VAT Registration No.;
                                                              ESP=CIF/NIF correcto] }
    { 10722;  ;ID Type             ;Option        ;CaptionML=[ENU=ID Type;
                                                              ESP=Tipo de id.];
                                                   OptionCaptionML=[ENU=" ,02-VAT Registration No.,03-Passport,04-ID Document,05-Certificate Of Residence,06-Other Probative Document,07-Not On The Census";
                                                                    ESP=" ,02-CIF-NIF,03-Pasaporte,04-Doc. Oficial Identif. (Residencia),05- Certificado De Residencia,06-Otro Documento Probatorio,07-No Censado"];
                                                   OptionString=[ ,02-VAT Registration No.,03-Passport,04-ID Document,05-Certificate Of Residence,06-Other Probative Document,07-Not On The Census] }
    { 50002;  ;Importe IIEE        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Invoice Line"."Importe IIEE" WHERE (Document No.=FIELD(No.)));
                                                   Description=BAIN-0064 }
    { 50021;  ;Importe comisi¢n (DL);Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Invoice Line"."Importe comisi¢n (DL)" WHERE (Document No.=FIELD(No.)));
                                                   Description=BAIN-0025;
                                                   Editable=No }
    { 7000000;;Applies-to Bill No. ;Code20        ;CaptionML=[ENU=Applies-to Bill No.;
                                                              ESP=Liq. por n§ efecto] }
    { 7000001;;Cust. Bank Acc. Code;Code20        ;TableRelation="Customer Bank Account".Code WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Cust. Bank Acc. Code;
                                                              ESP=C¢d. banco cliente] }
    { 7000003;;Pay-at Code         ;Code10        ;TableRelation="Customer Pmt. Address".Code WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Pay-at Code;
                                                              ESP=Pago en-C¢digo] }
    { 7014596;;No. Anexo           ;Code20        ;CaptionML=[ENU=Annex No.;
                                                              ESP=Nº Anexo;
                                                              PTG=N§ DAA];
                                                   Description=VNTES }
    { 7014650;;Muestra             ;Boolean       ;CaptionML=[ENU=It Shows;
                                                              ESP=Muestra];
                                                   Description=VNTES }
    { 7014805;;Grupo descuento promocional;Code10 ;TableRelation="Grupo dto. promoci¢n cliente";
                                                   CaptionML=[ENU=Group discount coupon;
                                                              ESP=Grupo descuento promocional;
                                                              PTG=Grupo Desconto Promo‡Æo];
                                                   Description=VNTES }
    { 7014823;;C¢d. cosecha        ;Code10        ;TableRelation=Cosecha;
                                                   CaptionML=[ENU=Cod. harvest;
                                                              ESP=C¢d. cosecha];
                                                   Description=VNTES }
    { 7014890;;Id. sesi¢n TPV      ;Code20        ;TableRelation="Sesi¢n TPV";
                                                   CaptionML=[ENU=Id. Sign TPV;
                                                              ESP=Id. sesi¢n TPV];
                                                   Description=VNTES }
    { 7014891;;C¢d. TPV            ;Code20        ;TableRelation=TPV.C¢digo;
                                                   CaptionML=[ENU=Cod. TPV;
                                                              ESP=C¢d. TPV];
                                                   Description=VNTES }
    { 7014892;;Ticket              ;Boolean       ;CaptionML=[ENU=Ticket;
                                                              ESP=Ticket];
                                                   Description=VNTES }
    { 7014893;;Contado             ;Decimal       ;CaptionML=[ENU=Counted;
                                                              ESP=Contado];
                                                   Description=VNTES }
    { 7014894;;Tipo cta. banco s.c. contrp.;Option;OnValidate=VAR
                                                                Banco@1170170000 : Record 270;
                                                              BEGIN
                                                              END;

                                                   CaptionML=[ENU=Cta type. Bank sc contrp.;
                                                              ESP=Tipo cta. banco s.c. contrp.];
                                                   OptionCaptionML=[ENU=Acct. Savings,Safety sec. cred.;
                                                                    ESP=Cta. ahorro,Caja sec. cr‚d.];
                                                   OptionString=Cta. ahorro,Caja sec. cr‚d.;
                                                   Description=VNTES }
    { 7014896;;Cta. ahorro contrp. banco s.c.;Code20;
                                                   OnLookup=VAR
                                                              NoCtaAhorro@1170170000 : Code[20];
                                                            BEGIN
                                                            END;

                                                   CaptionML=[ENU=Acct. contrp savings. Bank sc;
                                                              ESP=Cta. ahorro contrp. banco s.c.];
                                                   Description=VNTES }
    { 7014897;;C¢d. departamento EDI;Code20       ;CaptionML=[ENU=Cod. EDI department;
                                                              ESP=C¢d. departamento EDI];
                                                   Description=VNTES }
    { 7014898;;Albar n para EDI    ;Code20        ;TableRelation="Sales Shipment Header".No.;
                                                   CaptionML=[ENU=Waybill for EDI;
                                                              ESP=Albar n para EDI];
                                                   Description=VNTES }
    { 7014899;;No. exportaciones   ;Integer       ;CaptionML=[ENU=No. exports;
                                                              ESP=Nº exportaciones];
                                                   Description=VNTES }
    { 7014900;;Enviado EDI         ;Boolean       ;CaptionML=[ENU=Posted EDI;
                                                              ESP=Enviado EDI];
                                                   Description=VNTES }
  }
  KEYS
  {
    {    ;No.                                     ;Clustered=Yes }
    {    ;Order No.                                }
    {    ;Pre-Assigned No.                         }
    {    ;Sell-to Customer No.,External Document No.;
                                                   MaintainSQLIndex=No }
    {    ;Sell-to Customer No.,Order Date         ;MaintainSQLIndex=No }
    {    ;Sell-to Customer No.                     }
    {    ;Prepayment Order No.,Prepayment Invoice  }
    {    ;Bill-to Customer No.                     }
    {    ;Ticket                                   }
    {    ;Payment Method Code                      }
    {    ;C¢d. TPV,Id. sesi¢n TPV,No. Series,Posting Date }
    {    ;Muestra                                  }
    {    ;Enviado EDI,No. exportaciones,Bill-to Customer No.,Posting Date }
    {    ;Posting Date                             }
    {    ;Document Exchange Status                 }
    {    ;Due Date                                 }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;No.,Sell-to Customer No.,Bill-to Customer No.,Posting Date,Posting Description }
    { 2   ;Brick               ;No.,Sell-to Customer Name,Amount,Due Date,Amount Including VAT }
  }
  CODE
  {
    VAR
      SalesCommentLine@1001 : Record 44;
      SalesSetup@1007 : Record 311;
      CustLedgEntry@1003 : Record 21;
      DimMgt@1005 : Codeunit 408;
      ApprovalsMgmt@1008 : Codeunit 1535;
      UserSetupMgt@1002 : Codeunit 5700;
      DocTxt@1000 : TextConst 'ENU=Invoice;ESP=Factura';
      PaymentReference@1214 : Text;
      PaymentReferenceLbl@1215 : Text;
      CorrInvDoesNotExistErr@1100000 : TextConst '@@@="%1 = number of document";ENU="The Corrected Invoice No. does not exist. \Identification fields and values:\Corrected Invoice No. = %1.";ESP="El N§ de factura corregida no existe. \Campos y valores identificativos:\N§ factura corregida = %1."';

    [External]
    PROCEDURE IsFullyOpen@26() : Boolean;
    BEGIN
      CALCFIELDS("Amount Including VAT","Remaining Amount");
      EXIT("Amount Including VAT" = "Remaining Amount");
    END;

    [Internal]
    PROCEDURE SendRecords@12();
    VAR
      DocumentSendingProfile@1001 : Record 60;
      DummyReportSelections@1000 : Record 77;
      IsHandled@1002 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeSendRecords(DummyReportSelections,Rec,DocTxt,IsHandled);
      IF NOT IsHandled THEN
        DocumentSendingProfile.SendCustomerRecords(
          DummyReportSelections.Usage::"S.Invoice",Rec,DocTxt,"Bill-to Customer No.","No.",
          FIELDNO("Bill-to Customer No."),FIELDNO("No."));
    END;

    [External]
    PROCEDURE SendProfile@72(VAR DocumentSendingProfile@1000 : Record 60);
    VAR
      DummyReportSelections@1003 : Record 77;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeSendProfile(DummyReportSelections,Rec,DocTxt,IsHandled,DocumentSendingProfile);
      IF NOT IsHandled THEN
        DocumentSendingProfile.Send(
          DummyReportSelections.Usage::"S.Invoice",Rec,"No.","Bill-to Customer No.",
          DocTxt,FIELDNO("Bill-to Customer No."),FIELDNO("No."));
    END;

    [External]
    PROCEDURE PrintRecords@1(ShowRequestPage@1000 : Boolean);
    VAR
      DocumentSendingProfile@1002 : Record 60;
      DummyReportSelections@1001 : Record 77;
      IsHandled@1003 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforePrintRecords(DummyReportSelections,Rec,ShowRequestPage,IsHandled);
      IF NOT IsHandled THEN
        DocumentSendingProfile.TrySendToPrinter(
          DummyReportSelections.Usage::"S.Invoice",Rec,FIELDNO("Bill-to Customer No."),ShowRequestPage);
    END;

    [External]
    PROCEDURE EmailRecords@17(ShowDialog@1000 : Boolean);
    VAR
      DocumentSendingProfile@1003 : Record 60;
      DummyReportSelections@1001 : Record 77;
      IsHandled@1002 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeEmailRecords(DummyReportSelections,Rec,DocTxt,ShowDialog,IsHandled);
      IF NOT IsHandled THEN
        DocumentSendingProfile.TrySendToEMail(
          DummyReportSelections.Usage::"S.Invoice",Rec,FIELDNO("No."),DocTxt,FIELDNO("Bill-to Customer No."),ShowDialog);
    END;

    [External]
    PROCEDURE GetDocTypeTxt@140() : Text[50];
    BEGIN
      EXIT(DocTxt);
    END;

    [External]
    PROCEDURE Navigate@2();
    VAR
      NavigateForm@1000 : Page 344;
    BEGIN
      NavigateForm.SetDoc("Posting Date","No.");
      NavigateForm.RUN;
    END;

    [External]
    PROCEDURE LookupAdjmtValueEntries@3();
    VAR
      ValueEntry@1000 : Record 5802;
    BEGIN
      ValueEntry.SETCURRENTKEY("Document No.");
      ValueEntry.SETRANGE("Document No.","No.");
      ValueEntry.SETRANGE("Document Type",ValueEntry."Document Type"::"Sales Invoice");
      ValueEntry.SETRANGE(Adjustment,TRUE);
      PAGE.RUNMODAL(0,ValueEntry);
    END;

    PROCEDURE LookupInvoice@1100001(CustNo@1100000 : Code[20]) Selected : Boolean;
    VAR
      PostedSalesInvoices@1100001 : Page 143;
    BEGIN
      SETCURRENTKEY("No.");
      SETRANGE("Bill-to Customer No.",CustNo);

      PostedSalesInvoices.SETTABLEVIEW(Rec);
      PostedSalesInvoices.SETRECORD(Rec);
      PostedSalesInvoices.LOOKUPMODE(TRUE);
      IF PostedSalesInvoices.RUNMODAL = ACTION::LookupOK THEN BEGIN
        PostedSalesInvoices.GETRECORD(Rec);
        Selected := TRUE;
      END;
      CLEAR(PostedSalesInvoices);
      EXIT(Selected);
    END;

    [External]
    PROCEDURE GetCustomerVATRegistrationNumber@14() : Text;
    BEGIN
      EXIT("VAT Registration No.");
    END;

    [External]
    PROCEDURE GetCustomerVATRegistrationNumberLbl@15() : Text;
    BEGIN
      IF "VAT Registration No." = '' THEN
        EXIT('');
      EXIT(FIELDCAPTION("VAT Registration No."));
    END;

    [External]
    PROCEDURE GetCustomerGlobalLocationNumber@8() : Text;
    VAR
      Customer@1000 : Record 18;
    BEGIN
      IF Customer.GET("Sell-to Customer No.") THEN
        EXIT(Customer.GLN);
      EXIT('');
    END;

    [External]
    PROCEDURE GetCustomerGlobalLocationNumberLbl@10() : Text;
    VAR
      Customer@1000 : Record 18;
    BEGIN
      IF Customer.GET("Sell-to Customer No.") THEN
        EXIT(Customer.FIELDCAPTION(GLN));
      EXIT('');
    END;

    PROCEDURE GetSellToCustomerFaxNo@209() : Text;
    VAR
      Customer@1000 : Record 18;
    BEGIN
      IF Customer.GET("Sell-to Customer No.") THEN
        EXIT(Customer."Fax No.");
    END;

    [External]
    PROCEDURE GetPaymentReference@9() : Text;
    BEGIN
      OnGetPaymentReference(PaymentReference);
      EXIT(PaymentReference);
    END;

    [External]
    PROCEDURE GetPaymentReferenceLbl@11() : Text;
    BEGIN
      OnGetPaymentReferenceLbl(PaymentReferenceLbl);
      EXIT(PaymentReferenceLbl);
    END;

    [External]
    PROCEDURE GetLegalStatement@60() : Text;
    BEGIN
      SalesSetup.GET;
      EXIT(SalesSetup.GetLegalStatement);
    END;

    [External]
    PROCEDURE GetRemainingAmount@6() : Decimal;
    VAR
      CustLedgerEntry@1000 : Record 21;
    BEGIN
      CustLedgerEntry.SETRANGE("Customer No.","Bill-to Customer No.");
      CustLedgerEntry.SETRANGE("Posting Date","Posting Date");
      CustLedgerEntry.SETRANGE("Document Type",CustLedgerEntry."Document Type"::Invoice);
      CustLedgerEntry.SETRANGE("Document No.","No.");
      CustLedgerEntry.SETAUTOCALCFIELDS("Remaining Amount");

      IF NOT CustLedgerEntry.FINDFIRST THEN
        EXIT(0);

      EXIT(CustLedgerEntry."Remaining Amount");
    END;

    PROCEDURE CheckCorrectedDocumentExist@1100000(CustNo@1100000 : Code[20];CorrInvNo@1100001 : Code[20]);
    BEGIN
      SETRANGE("Bill-to Customer No.",CustNo);
      SETRANGE("No.",CorrInvNo);
      IF NOT FINDFIRST THEN
        ERROR(CorrInvDoesNotExistErr,CorrInvNo);
    END;

    [External]
    PROCEDURE ShowDimensions@4();
    BEGIN
      DimMgt.ShowDimensionSet("Dimension Set ID",STRSUBSTNO('%1 %2',TABLECAPTION,"No."));
    END;

    [External]
    PROCEDURE SetSecurityFilterOnRespCenter@5();
    BEGIN
      IF UserSetupMgt.GetSalesFilter <> '' THEN BEGIN
        FILTERGROUP(2);
        SETRANGE("Responsibility Center",UserSetupMgt.GetSalesFilter);
        FILTERGROUP(0);
      END;
    END;

    [External]
    PROCEDURE GetDocExchStatusStyle@13() : Text;
    BEGIN
      CASE "Document Exchange Status" OF
        "Document Exchange Status"::"Not Sent":
          EXIT('Standard');
        "Document Exchange Status"::"Sent to Document Exchange Service":
          EXIT('Ambiguous');
        "Document Exchange Status"::"Delivered to Recipient":
          EXIT('Favorable');
        ELSE
          EXIT('Unfavorable');
      END;
    END;

    [External]
    PROCEDURE ShowActivityLog@116();
    VAR
      ActivityLog@1000 : Record 710;
    BEGIN
      ActivityLog.ShowEntries(RECORDID);
    END;

    [External]
    PROCEDURE GetSelectedPaymentsText@84() : Text;
    VAR
      PaymentServiceSetup@1000 : Record 1060;
    BEGIN
      EXIT(PaymentServiceSetup.GetSelectedPaymentsText("Payment Service Set ID"));
    END;

    [External]
    PROCEDURE GetWorkDescription@113() : Text;
    BEGIN
      CALCFIELDS("Work Description");
      EXIT(GetWorkDescriptionWorkDescriptionCalculated);
    END;

    [External]
    PROCEDURE GetWorkDescriptionWorkDescriptionCalculated@7() : Text;
    VAR
      TempBlob@1000 : TEMPORARY Record 99008535;
      CR@1004 : Text[1];
    BEGIN
      IF NOT "Work Description".HASVALUE THEN
        EXIT('');

      CR[1] := 10;
      TempBlob.Blob := "Work Description";
      EXIT(TempBlob.ReadAsText(CR,TEXTENCODING::UTF8));
    END;

    [External]
    PROCEDURE GetCurrencySymbol@145() : Text[10];
    VAR
      GeneralLedgerSetup@1000 : Record 98;
      Currency@1001 : Record 4;
    BEGIN
      IF GeneralLedgerSetup.GET THEN
        IF ("Currency Code" = '') OR ("Currency Code" = GeneralLedgerSetup."LCY Code") THEN
          EXIT(GeneralLedgerSetup.GetCurrencySymbol);

      IF Currency.GET("Currency Code") THEN
        EXIT(Currency.GetCurrencySymbol);

      EXIT("Currency Code");
    END;

    [External]
    PROCEDURE DocExchangeStatusIsSent@18() : Boolean;
    BEGIN
      EXIT("Document Exchange Status" <> "Document Exchange Status"::"Not Sent");
    END;

    [External]
    PROCEDURE ShowCanceledOrCorrCrMemo@22();
    BEGIN
      CALCFIELDS(Cancelled,Corrective);
      CASE TRUE OF
        Cancelled:
          ShowCorrectiveCreditMemo;
        Corrective:
          ShowCancelledCreditMemo;
      END;
    END;

    [External]
    PROCEDURE ShowCorrectiveCreditMemo@19();
    VAR
      CancelledDocument@1000 : Record 1900;
      SalesCrMemoHeader@1001 : Record 114;
    BEGIN
      CALCFIELDS(Cancelled);
      IF NOT Cancelled THEN
        EXIT;

      IF CancelledDocument.FindSalesCancelledInvoice("No.") THEN BEGIN
        SalesCrMemoHeader.GET(CancelledDocument."Cancelled By Doc. No.");
        PAGE.RUN(PAGE::"Posted Sales Credit Memo",SalesCrMemoHeader);
      END;
    END;

    [External]
    PROCEDURE ShowCancelledCreditMemo@20();
    VAR
      CancelledDocument@1000 : Record 1900;
      SalesCrMemoHeader@1001 : Record 114;
    BEGIN
      CALCFIELDS(Corrective);
      IF NOT Corrective THEN
        EXIT;

      IF CancelledDocument.FindSalesCorrectiveInvoice("No.") THEN BEGIN
        SalesCrMemoHeader.GET(CancelledDocument."Cancelled Doc. No.");
        PAGE.RUN(PAGE::"Posted Sales Credit Memo",SalesCrMemoHeader);
      END;
    END;

    [External]
    PROCEDURE GetDefaultEmailDocumentName@21() : Text[150];
    BEGIN
      EXIT(DocTxt);
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeEmailRecords@25(VAR ReportSelections@1003 : Record 77;VAR SalesInvoiceHeader@1002 : Record 112;DocTxt@1004 : Text;ShowDialog@1001 : Boolean;VAR IsHandled@1000 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforePrintRecords@24(VAR ReportSelections@1003 : Record 77;VAR SalesInvoiceHeader@1002 : Record 112;ShowRequestPage@1001 : Boolean;VAR IsHandled@1000 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSendProfile@23(VAR ReportSelections@1003 : Record 77;VAR SalesInvoiceHeader@1002 : Record 112;DocTxt@1001 : Text;VAR IsHandled@1000 : Boolean;VAR DocumentSendingProfile@1004 : Record 60);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSendRecords@16(VAR ReportSelections@1000 : Record 77;VAR SalesInvoiceHeader@1001 : Record 112;DocTxt@1002 : Text;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    [Integration(TRUE)]
    LOCAL PROCEDURE OnGetPaymentReference@1214(VAR PaymentReference@1213 : Text);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnGetPaymentReferenceLbl@1213(VAR PaymentReferenceLbl@1213 : Text);
    BEGIN
    END;

    BEGIN
    {

      BAINES
      =========
      BAIN-0064 VM 230508 A¤adir campo Importe IIEE.
    }
    END.
  }
}

OBJECT Table 113 Sales Invoice Line
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=17:22:12;
    Modified=Yes;
    Version List=NAVW114.06,NAVES14.06,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    Permissions=TableData 32=r,
                TableData 5802=r;
    OnDelete=VAR
               SalesDocLineComments@1000 : Record 44;
               PostedDeferralHeader@1001 : Record 1704;
             BEGIN
               SalesDocLineComments.SETRANGE("Document Type",SalesDocLineComments."Document Type"::"Posted Invoice");
               SalesDocLineComments.SETRANGE("No.","Document No.");
               SalesDocLineComments.SETRANGE("Document Line No.","Line No.");
               IF NOT SalesDocLineComments.ISEMPTY THEN
                 SalesDocLineComments.DELETEALL;

               PostedDeferralHeader.DeleteHeader(DeferralUtilities.GetSalesDeferralDocType,'','',
                 SalesDocLineComments."Document Type"::"Posted Invoice","Document No.","Line No.");
             END;

    CaptionML=[ENU=Sales Invoice Line;
               ESP=Hist¢rico l¡n. factura venta];
    LookupPageID=Page526;
    DrillDownPageID=Page526;
  }
  FIELDS
  {
    { 2   ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Sell-to Customer No.;
                                                              ESP=Venta a-No. cliente];
                                                   Editable=No }
    { 3   ;   ;Document No.        ;Code20        ;TableRelation="Sales Invoice Header";
                                                   CaptionML=[ENU=Document No.;
                                                              ESP=No. documento] }
    { 4   ;   ;Line No.            ;Integer       ;CaptionML=[ENU=Line No.;
                                                              ESP=No. l¡nea] }
    { 5   ;   ;Type                ;Option        ;CaptionML=[ENU=Type;
                                                              ESP=Tipo];
                                                   OptionCaptionML=[ENU=" ,G/L Account,Item,Resource,Fixed Asset,Charge (Item)";
                                                                    ESP=" ,Cuenta,Producto,Recurso,Activo fijo,Cargo (prod.)"];
                                                   OptionString=[ ,G/L Account,Item,Resource,Fixed Asset,Charge (Item)] }
    { 6   ;   ;No.                 ;Code20        ;TableRelation=IF (Type=CONST(G/L Account)) "G/L Account"
                                                                 ELSE IF (Type=CONST(Item)) Item
                                                                 ELSE IF (Type=CONST(Resource)) Resource
                                                                 ELSE IF (Type=CONST(Fixed Asset)) "Fixed Asset"
                                                                 ELSE IF (Type=CONST("Charge (Item)")) "Item Charge";
                                                   CaptionML=[ENU=No.;
                                                              ESP=No.];
                                                   CaptionClass=GetCaptionClass(FIELDNO("No.")) }
    { 7   ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 8   ;   ;Posting Group       ;Code20        ;TableRelation=IF (Type=CONST(Item)) "Inventory Posting Group"
                                                                 ELSE IF (Type=CONST(Fixed Asset)) "FA Posting Group";
                                                   CaptionML=[ENU=Posting Group;
                                                              ESP=Grupo de registro];
                                                   Editable=No }
    { 10  ;   ;Shipment Date       ;Date          ;CaptionML=[ENU=Shipment Date;
                                                              ESP=Fecha env¡o] }
    { 11  ;   ;Description         ;Text100       ;CaptionML=[ENU=Description;
                                                              ESP=Descripci¢n] }
    { 12  ;   ;Description 2       ;Text50        ;CaptionML=[ENU=Description 2;
                                                              ESP=Descripci¢n 2] }
    { 13  ;   ;Unit of Measure     ;Text50        ;CaptionML=[ENU=Unit of Measure;
                                                              ESP=Unidad medida] }
    { 15  ;   ;Quantity            ;Decimal       ;CaptionML=[ENU=Quantity;
                                                              ESP=Cantidad];
                                                   DecimalPlaces=0:5 }
    { 22  ;   ;Unit Price          ;Decimal       ;CaptionML=[ENU=Unit Price;
                                                              ESP=Precio venta];
                                                   AutoFormatType=2;
                                                   AutoFormatExpr=GetCurrencyCode;
                                                   CaptionClass=GetCaptionClass(FIELDNO("Unit Price")) }
    { 23  ;   ;Unit Cost (LCY)     ;Decimal       ;CaptionML=[ENU=Unit Cost (LCY);
                                                              ESP=Coste unitario (DL)];
                                                   AutoFormatType=2 }
    { 25  ;   ;VAT %               ;Decimal       ;CaptionML=[ENU=VAT %;
                                                              ESP=% IVA];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 27  ;   ;Line Discount %     ;Decimal       ;CaptionML=[ENU=Line Discount %;
                                                              ESP=% Descuento l¡nea];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 28  ;   ;Line Discount Amount;Decimal       ;CaptionML=[ENU=Line Discount Amount;
                                                              ESP=Importe dto. l¡nea];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 29  ;   ;Amount              ;Decimal       ;CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 30  ;   ;Amount Including VAT;Decimal       ;CaptionML=[ENU=Amount Including VAT;
                                                              ESP=Importe IVA incl.];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 32  ;   ;Allow Invoice Disc. ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Invoice Disc.;
                                                              ESP=Permitir dto. factura] }
    { 34  ;   ;Gross Weight        ;Decimal       ;CaptionML=[ENU=Gross Weight;
                                                              ESP=Peso bruto];
                                                   DecimalPlaces=0:5 }
    { 35  ;   ;Net Weight          ;Decimal       ;CaptionML=[ENU=Net Weight;
                                                              ESP=Peso neto];
                                                   DecimalPlaces=0:5 }
    { 36  ;   ;Units per Parcel    ;Decimal       ;CaptionML=[ENU=Units per Parcel;
                                                              ESP=Unidades por lote];
                                                   DecimalPlaces=0:5 }
    { 37  ;   ;Unit Volume         ;Decimal       ;CaptionML=[ENU=Unit Volume;
                                                              ESP=Volumen];
                                                   DecimalPlaces=0:5 }
    { 38  ;   ;Appl.-to Item Entry ;Integer       ;AccessByPermission=TableData 27=R;
                                                   CaptionML=[ENU=Appl.-to Item Entry;
                                                              ESP=Liq. por No. orden producto] }
    { 40  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Shortcut Dimension 1 Code;
                                                              ESP=C¢d. dim. acceso dir. 1];
                                                   CaptionClass='1,2,1' }
    { 41  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Shortcut Dimension 2 Code;
                                                              ESP=C¢d. dim. acceso dir. 2];
                                                   CaptionClass='1,2,2' }
    { 42  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   CaptionML=[ENU=Customer Price Group;
                                                              ESP=Grupo precio cliente] }
    { 45  ;   ;Job No.             ;Code20        ;TableRelation=Job;
                                                   CaptionML=[ENU=Job No.;
                                                              ESP=No. proyecto] }
    { 52  ;   ;Work Type Code      ;Code10        ;TableRelation="Work Type";
                                                   CaptionML=[ENU=Work Type Code;
                                                              ESP=C¢d. tipo trabajo] }
    { 63  ;   ;Shipment No.        ;Code20        ;CaptionML=[ENU=Shipment No.;
                                                              ESP=No. albar n];
                                                   Editable=No }
    { 64  ;   ;Shipment Line No.   ;Integer       ;CaptionML=[ENU=Shipment Line No.;
                                                              ESP=No. l¡nea albar n];
                                                   Editable=No }
    { 65  ;   ;Order No.           ;Code20        ;CaptionML=[ENU=Order No.;
                                                              ESP=N.§ pedido] }
    { 66  ;   ;Order Line No.      ;Integer       ;CaptionML=[ENU=Order Line No.;
                                                              ESP=N.§ l¡nea pedido] }
    { 68  ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Bill-to Customer No.;
                                                              ESP=Factura-a No. cliente];
                                                   Editable=No }
    { 69  ;   ;Inv. Discount Amount;Decimal       ;CaptionML=[ENU=Inv. Discount Amount;
                                                              ESP=Importe dto. factura];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 73  ;   ;Drop Shipment       ;Boolean       ;AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Drop Shipment;
                                                              ESP=Env¡o directo] }
    { 74  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESP=Grupo registro neg. gen.] }
    { 75  ;   ;Gen. Prod. Posting Group;Code20    ;TableRelation="Gen. Product Posting Group";
                                                   CaptionML=[ENU=Gen. Prod. Posting Group;
                                                              ESP=Grupo registro prod. gen.] }
    { 77  ;   ;VAT Calculation Type;Option        ;CaptionML=[ENU=VAT Calculation Type;
                                                              ESP=Tipo c lculo IVA];
                                                   OptionCaptionML=[ENU=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax,No Taxable VAT;
                                                                    ESP=Normal,Reversi¢n,Total,Impto. venta,No sujeto];
                                                   OptionString=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax,No Taxable VAT }
    { 78  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   CaptionML=[ENU=Transaction Type;
                                                              ESP=Naturaleza transacci¢n] }
    { 79  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   CaptionML=[ENU=Transport Method;
                                                              ESP=Modo transporte] }
    { 80  ;   ;Attached to Line No.;Integer       ;TableRelation="Sales Invoice Line"."Line No." WHERE (Document No.=FIELD(Document No.));
                                                   CaptionML=[ENU=Attached to Line No.;
                                                              ESP=No. l¡nea texto adicional] }
    { 81  ;   ;Exit Point          ;Code10        ;TableRelation="Entry/Exit Point";
                                                   CaptionML=[ENU=Exit Point;
                                                              ESP=Puerto/Aerop. carga] }
    { 82  ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   CaptionML=[ENU=Area;
                                                              ESP=C¢d. provincia] }
    { 83  ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   CaptionML=[ENU=Transaction Specification;
                                                              ESP=Especificaci¢n transacci¢n] }
    { 84  ;   ;Tax Category        ;Code10        ;CaptionML=[ENU=Tax Category;
                                                              ESP=Categor¡a de impuesto] }
    { 85  ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESP=C¢d.  rea impuesto] }
    { 86  ;   ;Tax Liable          ;Boolean       ;CaptionML=[ENU=Tax Liable;
                                                              ESP=Sujeto a impuesto] }
    { 87  ;   ;Tax Group Code      ;Code20        ;TableRelation="Tax Group";
                                                   CaptionML=[ENU=Tax Group Code;
                                                              ESP=C¢d. grupo impuesto] }
    { 88  ;   ;VAT Clause Code     ;Code20        ;TableRelation="VAT Clause";
                                                   CaptionML=[ENU=VAT Clause Code;
                                                              ESP=C¢digo de cl usula de IVA] }
    { 89  ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=VAT Bus. Posting Group;
                                                              ESP=Grupo registro IVA neg.] }
    { 90  ;   ;VAT Prod. Posting Group;Code20     ;TableRelation="VAT Product Posting Group";
                                                   CaptionML=[ENU=VAT Prod. Posting Group;
                                                              ESP=Grupo registro IVA prod.] }
    { 97  ;   ;Blanket Order No.   ;Code20        ;TableRelation="Sales Header".No. WHERE (Document Type=CONST(Blanket Order));
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Blanket Order No.;
                                                              ESP=No. pedido abierto] }
    { 98  ;   ;Blanket Order Line No.;Integer     ;TableRelation="Sales Line"."Line No." WHERE (Document Type=CONST(Blanket Order),
                                                                                                Document No.=FIELD(Blanket Order No.));
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Blanket Order Line No.;
                                                              ESP=No. l¡n. pedido abierto] }
    { 99  ;   ;VAT Base Amount     ;Decimal       ;CaptionML=[ENU=VAT Base Amount;
                                                              ESP=Importe base IVA];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 100 ;   ;Unit Cost           ;Decimal       ;CaptionML=[ENU=Unit Cost;
                                                              ESP=Coste unitario];
                                                   Editable=No;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 101 ;   ;System-Created Entry;Boolean       ;CaptionML=[ENU=System-Created Entry;
                                                              ESP=Asiento autom tico];
                                                   Editable=No }
    { 103 ;   ;Line Amount         ;Decimal       ;CaptionML=[ENU=Line Amount;
                                                              ESP=Importe l¡nea];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode;
                                                   CaptionClass=GetCaptionClass(FIELDNO("Line Amount")) }
    { 104 ;   ;VAT Difference      ;Decimal       ;CaptionML=[ENU=VAT Difference;
                                                              ESP=Diferencia  IVA];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 106 ;   ;VAT Identifier      ;Code20        ;CaptionML=[ENU=VAT Identifier;
                                                              ESP=Identific. IVA];
                                                   Editable=No }
    { 107 ;   ;IC Partner Ref. Type;Option        ;CaptionML=[ENU=IC Partner Ref. Type;
                                                              ESP=Tipo referencia socio IC];
                                                   OptionCaptionML=[ENU=" ,G/L Account,Item,,,Charge (Item),Cross reference,Common Item No.";
                                                                    ESP=" ,Cuenta,Producto,,,Cargo (prod.),Referencia cruzada,No. producto com£n"];
                                                   OptionString=[ ,G/L Account,Item,,,Charge (Item),Cross reference,Common Item No.] }
    { 108 ;   ;IC Partner Reference;Code20        ;CaptionML=[ENU=IC Partner Reference;
                                                              ESP=Referencia socio IC] }
    { 123 ;   ;Prepayment Line     ;Boolean       ;CaptionML=[ENU=Prepayment Line;
                                                              ESP=L¡nea prepago];
                                                   Editable=No }
    { 130 ;   ;IC Partner Code     ;Code20        ;TableRelation="IC Partner";
                                                   CaptionML=[ENU=IC Partner Code;
                                                              ESP=C¢digo socio IC] }
    { 131 ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              ESP=Fecha registro] }
    { 145 ;   ;Pmt. Discount Amount;Decimal       ;CaptionML=[ENU=Pmt. Discount Amount;
                                                              ESP=Imp. dto. P.P.];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 180 ;   ;Line Discount Calculation;Option   ;CaptionML=[ENU=Line Discount Calculation;
                                                              ESP=Calculo de descuento de l¡nea];
                                                   OptionCaptionML=[ENU=None,%,Amount;
                                                                    ESP=Ninguno,%,Importe];
                                                   OptionString=None,%,Amount }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              ESP=Id. grupo dimensiones];
                                                   Editable=No }
    { 1001;   ;Job Task No.        ;Code20        ;TableRelation="Job Task"."Job Task No." WHERE (Job No.=FIELD(Job No.));
                                                   CaptionML=[ENU=Job Task No.;
                                                              ESP=No. tarea proyecto];
                                                   Editable=No }
    { 1002;   ;Job Contract Entry No.;Integer     ;CaptionML=[ENU=Job Contract Entry No.;
                                                              ESP=No. mov. contrato proyecto];
                                                   Editable=No }
    { 1700;   ;Deferral Code       ;Code10        ;TableRelation="Deferral Template"."Deferral Code";
                                                   CaptionML=[ENU=Deferral Code;
                                                              ESP=C¢digo de fraccionamiento] }
    { 5402;   ;Variant Code        ;Code10        ;TableRelation=IF (Type=CONST(Item)) "Item Variant".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Variant Code;
                                                              ESP=C¢d. variante] }
    { 5403;   ;Bin Code            ;Code20        ;TableRelation=Bin.Code WHERE (Location Code=FIELD(Location Code),
                                                                                 Item Filter=FIELD(No.),
                                                                                 Variant Filter=FIELD(Variant Code));
                                                   CaptionML=[ENU=Bin Code;
                                                              ESP=C¢d. ubicaci¢n] }
    { 5404;   ;Qty. per Unit of Measure;Decimal   ;CaptionML=[ENU=Qty. per Unit of Measure;
                                                              ESP=Cant. por unidad medida];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5407;   ;Unit of Measure Code;Code10        ;TableRelation=IF (Type=CONST(Item)) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.))
                                                                 ELSE "Unit of Measure";
                                                   CaptionML=[ENU=Unit of Measure Code;
                                                              ESP=C¢d. unidad medida] }
    { 5415;   ;Quantity (Base)     ;Decimal       ;CaptionML=[ENU=Quantity (Base);
                                                              ESP=Cantidad (base)];
                                                   DecimalPlaces=0:5 }
    { 5600;   ;FA Posting Date     ;Date          ;CaptionML=[ENU=FA Posting Date;
                                                              ESP=A/F Fecha registro] }
    { 5602;   ;Depreciation Book Code;Code10      ;TableRelation="Depreciation Book";
                                                   CaptionML=[ENU=Depreciation Book Code;
                                                              ESP=C¢d. libro amortizaci¢n] }
    { 5605;   ;Depr. until FA Posting Date;Boolean;CaptionML=[ENU=Depr. until FA Posting Date;
                                                              ESP=A/F Amort. hasta fecha reg.] }
    { 5612;   ;Duplicate in Depreciation Book;Code10;
                                                   TableRelation="Depreciation Book";
                                                   CaptionML=[ENU=Duplicate in Depreciation Book;
                                                              ESP=Duplicado en libro amort.] }
    { 5613;   ;Use Duplication List;Boolean       ;CaptionML=[ENU=Use Duplication List;
                                                              ESP=Utilizar lista duplicados] }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   CaptionML=[ENU=Responsibility Center;
                                                              ESP=Centro responsabilidad] }
    { 5705;   ;Cross-Reference No. ;Code20        ;AccessByPermission=TableData 5717=R;
                                                   CaptionML=[ENU=Cross-Reference No.;
                                                              ESP=No. referencia cruzada] }
    { 5706;   ;Unit of Measure (Cross Ref.);Code10;TableRelation=IF (Type=CONST(Item)) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Unit of Measure (Cross Ref.);
                                                              ESP=Unidad de medida (ref.cruz.)] }
    { 5707;   ;Cross-Reference Type;Option        ;CaptionML=[ENU=Cross-Reference Type;
                                                              ESP=Tipo referencia cruzada];
                                                   OptionCaptionML=[ENU=" ,Customer,Vendor,Bar Code";
                                                                    ESP=" ,Cliente,Prov.,C¢d. barra"];
                                                   OptionString=[ ,Customer,Vendor,Bar Code] }
    { 5708;   ;Cross-Reference Type No.;Code30    ;CaptionML=[ENU=Cross-Reference Type No.;
                                                              ESP=No. tipo referencia cruzada] }
    { 5709;   ;Item Category Code  ;Code20        ;TableRelation=IF (Type=CONST(Item)) "Item Category";
                                                   CaptionML=[ENU=Item Category Code;
                                                              ESP=C¢d. categor¡a producto] }
    { 5710;   ;Nonstock            ;Boolean       ;CaptionML=[ENU=Catalog;
                                                              ESP=Cat logo] }
    { 5711;   ;Purchasing Code     ;Code10        ;TableRelation=Purchasing;
                                                   CaptionML=[ENU=Purchasing Code;
                                                              ESP=C¢d. compra] }
    { 5712;   ;Product Group Code  ;Code10        ;TableRelation="Product Group".Code WHERE (Item Category Code=FIELD(Item Category Code));
                                                   ValidateTableRelation=No;
                                                   ObsoleteState=Removed;
                                                   ObsoleteReason=Product Groups became first level children of Item Categories.;
                                                   CaptionML=[ENU=Product Group Code;
                                                              ESP=C¢d. grupo producto] }
    { 5811;   ;Appl.-from Item Entry;Integer      ;AccessByPermission=TableData 27=R;
                                                   CaptionML=[ENU=Appl.-from Item Entry;
                                                              ESP=Liquid.-de mov. pdto];
                                                   MinValue=0 }
    { 6608;   ;Return Reason Code  ;Code10        ;TableRelation="Return Reason";
                                                   CaptionML=[ENU=Return Reason Code;
                                                              ESP=C¢d. auditor¡a dev.] }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 7002;   ;Customer Disc. Group;Code20        ;TableRelation="Customer Discount Group";
                                                   CaptionML=[ENU=Customer Disc. Group;
                                                              ESP=Grupo dto. cliente] }
    { 7004;   ;Price description   ;Text80        ;CaptionML=[ENU=Price description;
                                                              ESP=Descripci¢n del precio] }
    { 10700;  ;Pmt. Disc. Given Amount (Old);Decimal;
                                                   ObsoleteState=Removed;
                                                   ObsoleteReason=Merged to W1;
                                                   CaptionML=[ENU=Pmt. Disc. Given Amount (Old);
                                                              ESP=Importe concedido de dto. por pronto pago (anterior)];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 10701;  ;EC %                ;Decimal       ;CaptionML=[ENU=EC %;
                                                              ESP=% RE] }
    { 10702;  ;EC Difference       ;Decimal       ;CaptionML=[ENU=EC Difference;
                                                              ESP=Diferencia RE];
                                                   Editable=Yes;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 50000;  ;% margen real       ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50001;  ;% margen m¡nimo     ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50004;  ;Usuario autorizaci¢n margen;Code20 ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50005;  ;% comisi¢n          ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 50006;  ;Importe comisi¢n (DL);Decimal      ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 50008;  ;Promoci¢n manual    ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0049 }
    { 7014451;;Precio unidad precio;Decimal       ;CaptionML=[ENU=Unit price price;
                                                              ESP=Precio unidad precio];
                                                   Description=VNTES;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 7014452;;Densidad granel     ;Decimal       ;CaptionML=[ENU=Bulk Density;
                                                              ESP=Densidad granel];
                                                   Description=VNTES }
    { 7014454;;C¢d. ud. medida precio;Code10      ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Cod. ud. As price;
                                                              ESP=C¢d. ud. medida precio];
                                                   Description=VNTES }
    { 7014455;;Cdad. en unidad medida precio;Decimal;
                                                   CaptionML=[ENU=Qty. measured in unit price;
                                                              ESP=Cdad. en unidad medida precio];
                                                   DecimalPlaces=0:6;
                                                   Description=VNTES }
    { 7014456;;Cantidad (unidad precio);Decimal   ;CaptionML=[ENU=Quantity (unit price);
                                                              ESP=Cantidad (unidad precio)];
                                                   Description=VNTES }
    { 7014459;;C¢d. ud. medida entrada;Code10     ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   OnValidate=VAR
                                                                dCantUdad@1170170000 : Decimal;
                                                              BEGIN
                                                              END;

                                                   CaptionML=[ENU=Cod. ud. measured input;
                                                              ESP=C¢d. ud. medida entrada];
                                                   Description=VNTES }
    { 7014460;;Cantidad ud. medida entrada;Decimal;CaptionML=[ENU=Quantity ud. measured input;
                                                              ESP=Cantidad ud. medida entrada];
                                                   DecimalPlaces=0:5;
                                                   Description=VNTES }
    { 7014683;;Tipo l¡nea          ;Option        ;CaptionML=[ENU=Type line;
                                                              ESP=Tipo l¡nea];
                                                   OptionCaptionML=[ENU=Normal,Shows,Gift;
                                                                    ESP=Normal,Muestra,Obsequio];
                                                   OptionString=Normal,Muestra,Obsequio;
                                                   Description=VNTES }
    { 7014684;;C¢d. concepto obsequio;Code10      ;CaptionML=[ENU=Cod. concept gift;
                                                              ESP=C¢d. concepto obsequio];
                                                   Description=VNTES }
    { 7014823;;C¢d. cosecha        ;Code10        ;TableRelation=Cosecha;
                                                   CaptionML=[ENU=Cod. harvest;
                                                              ESP=C¢d. cosecha];
                                                   Description=VNTES }
    { 7014854;;Grupo dto. promoci¢n producto;Code10;
                                                   TableRelation="Grupo dto. promoci¢n producto";
                                                   CaptionML=[ENU=Group discount. product promotion;
                                                              ESP=Grupo dto. promoci¢n producto;
                                                              PTG=Grupo Dto. Promo‡Æo Produto];
                                                   Description=VNTES }
    { 7014855;;Grupo dto. promoci¢n cliente;Code10;TableRelation="Grupo dto. promoci¢n cliente";
                                                   CaptionML=[ENU=Group discount. Customer promotion;
                                                              ESP=Grupo dto. promoci¢n cliente;
                                                              PTG=Grupo Dto. Promo‡Æo Cliente];
                                                   Description=VNTES }
    { 7014856;;Fecha pedido        ;Date          ;CaptionML=[ENU=Order Date;
                                                              ESP=Fecha pedido;
                                                              PTG=Data Pedido];
                                                   Description=VNTES }
    { 7014857;;Promoci¢n           ;Boolean       ;CaptionML=[ENU=Promotion;
                                                              ESP=Promoci¢n;
                                                              PTG=Promo‡Æo];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014858;;No. l¡nea origen promoci¢n;Integer ;CaptionML=[ENU=No home online promotion;
                                                              ESP=Nº l¡nea origen promoci¢n;
                                                              PTG=No. Linha Origem Promo‡Æo];
                                                   Description=VNTES }
    { 7014859;;C¢d. promoci¢n      ;Code10        ;TableRelation=Promoci¢n.C¢digo;
                                                   CaptionML=[ENU=Cod. promotion;
                                                              ESP=C¢d. promoci¢n;
                                                              PTG=C¢d. Promo‡Æo];
                                                   Description=VNTES }
    { 7014860;;Cdad. promoci¢n (base);Decimal     ;CaptionML=[ENU=Qty. promotion (base);
                                                              ESP=Cdad. promoci¢n (base);
                                                              PTG=Qnt. Promo‡Æo (base)];
                                                   Description=VNTES }
    { 7014861;;No. promoci¢n       ;Integer       ;CaptionML=[ENU=No promotion;
                                                              ESP=Nº promoci¢n;
                                                              PTG=No. Promo‡Æo];
                                                   Description=VNTES }
    { 7014874;;Precio IIEE         ;Decimal       ;CaptionML=[ENU=Price IISS;
                                                              ESP=Precio IIEE];
                                                   MinValue=0;
                                                   Description=VNTES;
                                                   AutoFormatType=2 }
    { 7014876;;Importe IIEE        ;Decimal       ;CaptionML=[ENU=Amount IISS;
                                                              ESP=Importe IIEE];
                                                   Description=VNTES;
                                                   AutoFormatType=1 }
  }
  KEYS
  {
    {    ;Document No.,Line No.                   ;SumIndexFields=Importe IIEE;
                                                   Clustered=Yes }
    {    ;Blanket Order No.,Blanket Order Line No. }
    {    ;Sell-to Customer No.                     }
    { No ;Sell-to Customer No.,Type,Document No.  ;MaintainSQLIndex=No }
    {    ;Shipment No.,Shipment Line No.           }
    {    ;Job Contract Entry No.                   }
    {    ;Bill-to Customer No.                     }
    {    ;Tipo l¡nea,Sell-to Customer No.,Document No.,Type,No.,Unit of Measure Code }
    {    ;Order No.,Order Line No.,Posting Date    }
    {    ;Document No.,Location Code              ;SumIndexFields=Amount,Amount Including VAT;
                                                   MaintainSQLIndex=No }
  }
  FIELDGROUPS
  {
    { 1   ;Brick               ;No.,Description,Line Amount,Price description,Quantity,Unit of Measure Code }
  }
  CODE
  {
    VAR
      SalesInvoiceHeader@1002 : Record 112;
      Currency@1003 : Record 4;
      DimMgt@1001 : Codeunit 408;
      UOMMgt@1005 : Codeunit 5402;
      DeferralUtilities@1000 : Codeunit 1720;
      PriceDescriptionTxt@1004 : TextConst '@@@={Locked};ENU=x%1 (%2%3/%4);ESP=x%1 (%2%3/%4)';
      PriceDescriptionWithLineDiscountTxt@1066 : TextConst '@@@={Locked};ENU=x%1 (%2%3/%4) - %5%;ESP=x%1 (%2%3/%4) - %5%';

    [External]
    PROCEDURE GetCurrencyCode@1() : Code[10];
    BEGIN
      GetHeader;
      EXIT(SalesInvoiceHeader."Currency Code");
    END;

    [External]
    PROCEDURE ShowDimensions@25();
    BEGIN
      DimMgt.ShowDimensionSet("Dimension Set ID",STRSUBSTNO('%1 %2 %3',TABLECAPTION,"Document No.","Line No."));
    END;

    [External]
    PROCEDURE ShowItemTrackingLines@3();
    VAR
      ItemTrackingDocMgt@1000 : Codeunit 6503;
    BEGIN
      ItemTrackingDocMgt.ShowItemTrackingForInvoiceLine(RowID1);
    END;

    [External]
    PROCEDURE CalcVATAmountLines@2(SalesInvHeader@1000 : Record 112;VAR TempVATAmountLine@1001 : TEMPORARY Record 290);
    BEGIN
      TempVATAmountLine.DELETEALL;
      SETRANGE("Document No.",SalesInvHeader."No.");
      IF FIND('-') THEN
        REPEAT
          TempVATAmountLine.INIT;
          TempVATAmountLine.CopyFromSalesInvLine(Rec);
          IF SalesInvHeader."Prices Including VAT" THEN
            TempVATAmountLine."Prices Including VAT" := TRUE;
          TempVATAmountLine.InsertLine;
        UNTIL NEXT = 0;
    END;

    [External]
    PROCEDURE GetLineAmountExclVAT@149() : Decimal;
    BEGIN
      GetHeader;
      IF NOT SalesInvoiceHeader."Prices Including VAT" THEN
        EXIT("Line Amount");

      EXIT(ROUND("Line Amount" / (1 + "VAT %" / 100),Currency."Amount Rounding Precision"));
    END;

    [External]
    PROCEDURE GetLineAmountInclVAT@151() : Decimal;
    BEGIN
      GetHeader;
      IF SalesInvoiceHeader."Prices Including VAT" THEN
        EXIT("Line Amount");

      EXIT(ROUND("Line Amount" * (1 + "VAT %" / 100),Currency."Amount Rounding Precision"));
    END;

    LOCAL PROCEDURE GetHeader@15();
    BEGIN
      IF SalesInvoiceHeader."No." = "Document No." THEN
        EXIT;
      IF NOT SalesInvoiceHeader.GET("Document No.") THEN
        SalesInvoiceHeader.INIT;

      IF SalesInvoiceHeader."Currency Code" = '' THEN
        Currency.InitRoundingPrecision
      ELSE
        IF NOT Currency.GET(SalesInvoiceHeader."Currency Code") THEN
          Currency.InitRoundingPrecision;
    END;

    LOCAL PROCEDURE GetFieldCaption@31(FieldNumber@1000 : Integer) : Text[100];
    VAR
      Field@1001 : Record 2000000041;
    BEGIN
      Field.GET(DATABASE::"Sales Invoice Line",FieldNumber);
      EXIT(Field."Field Caption");
    END;

    [External]
    PROCEDURE GetCaptionClass@34(FieldNumber@1000 : Integer) : Text[80];
    BEGIN
      GetHeader;
      CASE FieldNumber OF
        FIELDNO("No."):
          EXIT(STRSUBSTNO('3,%1',GetFieldCaption(FieldNumber)));
        ELSE BEGIN
          IF SalesInvoiceHeader."Prices Including VAT" THEN
            EXIT('2,1,' + GetFieldCaption(FieldNumber));
          EXIT('2,0,' + GetFieldCaption(FieldNumber));
        END
      END;
    END;

    [External]
    PROCEDURE RowID1@44() : Text[250];
    VAR
      ItemTrackingMgt@1000 : Codeunit 6500;
    BEGIN
      EXIT(ItemTrackingMgt.ComposeRowID(DATABASE::"Sales Invoice Line",
          0,"Document No.",'',0,"Line No."));
    END;

    [External]
    PROCEDURE GetSalesShptLines@4(VAR TempSalesShptLine@1000 : TEMPORARY Record 111);
    VAR
      SalesShptLine@1003 : Record 111;
      ItemLedgEntry@1002 : Record 32;
      ValueEntry@1001 : Record 5802;
    BEGIN
      TempSalesShptLine.RESET;
      TempSalesShptLine.DELETEALL;

      IF Type <> Type::Item THEN
        EXIT;

      FilterPstdDocLineValueEntries(ValueEntry);
      IF ValueEntry.FINDSET THEN
        REPEAT
          ItemLedgEntry.GET(ValueEntry."Item Ledger Entry No.");
          IF ItemLedgEntry."Document Type" = ItemLedgEntry."Document Type"::"Sales Shipment" THEN
            IF SalesShptLine.GET(ItemLedgEntry."Document No.",ItemLedgEntry."Document Line No.") THEN BEGIN
              TempSalesShptLine.INIT;
              TempSalesShptLine := SalesShptLine;
              IF TempSalesShptLine.INSERT THEN;
            END;
        UNTIL ValueEntry.NEXT = 0;
    END;

    [External]
    PROCEDURE CalcShippedSaleNotReturned@5(VAR ShippedQtyNotReturned@1006 : Decimal;VAR RevUnitCostLCY@1004 : Decimal;ExactCostReverse@1003 : Boolean);
    VAR
      TempItemLedgEntry@1002 : TEMPORARY Record 32;
      TotalCostLCY@1009 : Decimal;
      TotalQtyBase@1007 : Decimal;
    BEGIN
      ShippedQtyNotReturned := 0;
      IF (Type <> Type::Item) OR (Quantity <= 0) THEN BEGIN
        RevUnitCostLCY := "Unit Cost (LCY)";
        EXIT;
      END;

      RevUnitCostLCY := 0;
      GetItemLedgEntries(TempItemLedgEntry,FALSE);
      IF TempItemLedgEntry.FINDSET THEN
        REPEAT
          ShippedQtyNotReturned := ShippedQtyNotReturned - TempItemLedgEntry."Shipped Qty. Not Returned";
          IF ExactCostReverse THEN BEGIN
            TempItemLedgEntry.CALCFIELDS("Cost Amount (Expected)","Cost Amount (Actual)");
            TotalCostLCY :=
              TotalCostLCY + TempItemLedgEntry."Cost Amount (Expected)" + TempItemLedgEntry."Cost Amount (Actual)";
            TotalQtyBase := TotalQtyBase + TempItemLedgEntry.Quantity;
          END;
        UNTIL TempItemLedgEntry.NEXT = 0;

      IF ExactCostReverse AND (ShippedQtyNotReturned <> 0) AND (TotalQtyBase <> 0) THEN
        RevUnitCostLCY := ABS(TotalCostLCY / TotalQtyBase) * "Qty. per Unit of Measure"
      ELSE
        RevUnitCostLCY := "Unit Cost (LCY)";
      ShippedQtyNotReturned := CalcQty(ShippedQtyNotReturned);

      IF ShippedQtyNotReturned > Quantity THEN
        ShippedQtyNotReturned := Quantity;
    END;

    LOCAL PROCEDURE CalcQty@11(QtyBase@1000 : Decimal) : Decimal;
    BEGIN
      IF "Qty. per Unit of Measure" = 0 THEN
        EXIT(QtyBase);
      EXIT(ROUND(QtyBase / "Qty. per Unit of Measure",UOMMgt.QtyRndPrecision));
    END;

    [External]
    PROCEDURE GetItemLedgEntries@6(VAR TempItemLedgEntry@1000 : TEMPORARY Record 32;SetQuantity@1003 : Boolean);
    VAR
      ItemLedgEntry@1002 : Record 32;
      ValueEntry@1001 : Record 5802;
    BEGIN
      IF SetQuantity THEN BEGIN
        TempItemLedgEntry.RESET;
        TempItemLedgEntry.DELETEALL;

        IF Type <> Type::Item THEN
          EXIT;
      END;

      FilterPstdDocLineValueEntries(ValueEntry);
      ValueEntry.SETFILTER("Invoiced Quantity",'<>0');
      IF ValueEntry.FINDSET THEN
        REPEAT
          ItemLedgEntry.GET(ValueEntry."Item Ledger Entry No.");
          TempItemLedgEntry := ItemLedgEntry;
          IF SetQuantity THEN BEGIN
            TempItemLedgEntry.Quantity := ValueEntry."Invoiced Quantity";
            IF ABS(TempItemLedgEntry."Shipped Qty. Not Returned") > ABS(TempItemLedgEntry.Quantity) THEN
              TempItemLedgEntry."Shipped Qty. Not Returned" := TempItemLedgEntry.Quantity;
          END;
          OnGetItemLedgEntriesOnBeforeTempItemLedgEntryInsert(TempItemLedgEntry,ValueEntry,SetQuantity);
          IF TempItemLedgEntry.INSERT THEN;
        UNTIL ValueEntry.NEXT = 0;
    END;

    [External]
    PROCEDURE FilterPstdDocLineValueEntries@7(VAR ValueEntry@1000 : Record 5802);
    BEGIN
      ValueEntry.RESET;
      ValueEntry.SETCURRENTKEY("Document No.");
      ValueEntry.SETRANGE("Document No.","Document No.");
      ValueEntry.SETRANGE("Document Type",ValueEntry."Document Type"::"Sales Invoice");
      ValueEntry.SETRANGE("Document Line No.","Line No.");
    END;

    [External]
    PROCEDURE ShowItemShipmentLines@9();
    VAR
      TempSalesShptLine@1000 : TEMPORARY Record 111;
    BEGIN
      IF Type = Type::Item THEN BEGIN
        GetSalesShptLines(TempSalesShptLine);
        PAGE.RUNMODAL(0,TempSalesShptLine);
      END;
    END;

    [External]
    PROCEDURE ShowLineComments@8();
    VAR
      SalesCommentLine@1000 : Record 44;
    BEGIN
      SalesCommentLine.ShowComments(SalesCommentLine."Document Type"::"Posted Invoice","Document No.","Line No.");
    END;

    [External]
    PROCEDURE ShowShortcutDimCode@27(VAR ShortcutDimCode@1000 : ARRAY [8] OF Code[20]);
    BEGIN
      DimMgt.GetShortcutDimensions("Dimension Set ID",ShortcutDimCode);
    END;

    [External]
    PROCEDURE InitFromSalesLine@12(SalesInvHeader@1002 : Record 112;SalesLine@1001 : Record 37);
    BEGIN
      INIT;
      TRANSFERFIELDS(SalesLine);
      IF ("No." = '') AND (Type IN [Type::"G/L Account"..Type::"Charge (Item)"]) THEN
        Type := Type::" ";
      "Posting Date" := SalesInvHeader."Posting Date";
      "Document No." := SalesInvHeader."No.";
      Quantity := SalesLine."Qty. to Invoice";
      "Quantity (Base)" := SalesLine."Qty. to Invoice (Base)";

      OnAfterInitFromSalesLine(Rec,SalesInvHeader,SalesLine);
    END;

    [External]
    PROCEDURE ShowDeferrals@13();
    BEGIN
      DeferralUtilities.OpenLineScheduleView(
        "Deferral Code",DeferralUtilities.GetSalesDeferralDocType,'','',
        GetDocumentType,"Document No.","Line No.");
    END;

    [External]
    PROCEDURE UpdatePriceDescription@143();
    VAR
      Currency@1000 : Record 4;
    BEGIN
      "Price description" := '';
      IF Type IN [Type::"Charge (Item)",Type::"Fixed Asset",Type::Item,Type::Resource] THEN BEGIN
        IF "Line Discount %" = 0 THEN
          "Price description" := STRSUBSTNO(
              PriceDescriptionTxt,Quantity,Currency.ResolveGLCurrencySymbol(GetCurrencyCode),
              "Unit Price","Unit of Measure")
        ELSE
          "Price description" := STRSUBSTNO(
              PriceDescriptionWithLineDiscountTxt,Quantity,Currency.ResolveGLCurrencySymbol(GetCurrencyCode),
              "Unit Price","Unit of Measure","Line Discount %")
      END;
    END;

    [External]
    PROCEDURE FormatType@144() : Text;
    VAR
      SalesLine@1000 : Record 37;
    BEGIN
      IF Type = Type::" " THEN
        EXIT(SalesLine.FormatType);

      EXIT(FORMAT(Type));
    END;

    [External]
    PROCEDURE GetDocumentType@14() : Integer;
    VAR
      SalesCommentLine@1000 : Record 44;
    BEGIN
      EXIT(SalesCommentLine."Document Type"::"Posted Invoice")
    END;

    [External]
    PROCEDURE HasTypeToFillMandatoryFields@103() : Boolean;
    BEGIN
      EXIT(Type <> Type::" ");
    END;

    [External]
    PROCEDURE IsCancellationSupported@29() : Boolean;
    BEGIN
      EXIT(Type IN [Type::" ",Type::Item,Type::"G/L Account",Type::"Charge (Item)"]);
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitFromSalesLine@10(VAR SalesInvLine@1002 : Record 113;SalesInvHeader@1000 : Record 112;SalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnGetItemLedgEntriesOnBeforeTempItemLedgEntryInsert@16(VAR TempItemLedgerEntry@1000 : TEMPORARY Record 32;ValueEntry@1001 : Record 5802;SetQuantity@1002 : Boolean);
    BEGIN
    END;

    BEGIN
    {

      BAINES
      =========
      BAIN-0064 VM 230508 Se a¤ade el SumIndexField "Importe IIEE" en la clave.
    }
    END.
  }
}

OBJECT Table 114 Sales Cr.Memo Header
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=12:38:54;
    Modified=Yes;
    Version List=NAVW114.00,NAVES14.00,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    DataCaptionFields=No.,Sell-to Customer Name;
    OnDelete=VAR
               PostedDeferralHeader@1002 : Record 1704;
               PostSalesDelete@1000 : Codeunit 363;
               DeferralUtilities@1001 : Codeunit 1720;
             BEGIN
               PostSalesDelete.IsDocumentDeletionAllowed("Posting Date");
               TESTFIELD("No. Printed");
               LOCKTABLE;
               PostSalesDelete.DeleteSalesCrMemoLines(Rec);

               SalesCommentLine.SETRANGE("Document Type",SalesCommentLine."Document Type"::"Posted Credit Memo");
               SalesCommentLine.SETRANGE("No.","No.");
               SalesCommentLine.DELETEALL;

               ApprovalsMgmt.DeletePostedApprovalEntries(RECORDID);
               PostedDeferralHeader.DeleteForDoc(DeferralUtilities.GetSalesDeferralDocType,'','',
                 SalesCommentLine."Document Type"::"Posted Credit Memo","No.");
             END;

    CaptionML=[ENU=Sales Cr.Memo Header;
               ESP=Hist¢rico cab. abono venta];
    LookupPageID=Page144;
    DrillDownPageID=Page144;
  }
  FIELDS
  {
    { 2   ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Sell-to Customer No.;
                                                              ESP=Venta a-No. cliente];
                                                   NotBlank=Yes }
    { 3   ;   ;No.                 ;Code20        ;CaptionML=[ENU=No.;
                                                              ESP=No.] }
    { 4   ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Bill-to Customer No.;
                                                              ESP=Factura-a No. cliente];
                                                   NotBlank=Yes }
    { 5   ;   ;Bill-to Name        ;Text100       ;CaptionML=[ENU=Bill-to Name;
                                                              ESP=Fact. a-Nombre] }
    { 6   ;   ;Bill-to Name 2      ;Text50        ;CaptionML=[ENU=Bill-to Name 2;
                                                              ESP=Fact. a-Nombre 2] }
    { 7   ;   ;Bill-to Address     ;Text100       ;CaptionML=[ENU=Bill-to Address;
                                                              ESP=Fact. a-Direcci¢n] }
    { 8   ;   ;Bill-to Address 2   ;Text50        ;CaptionML=[ENU=Bill-to Address 2;
                                                              ESP=Fact. a-Direcci¢n 2] }
    { 9   ;   ;Bill-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Bill-to City;
                                                              ESP=Fact. a-Poblaci¢n] }
    { 10  ;   ;Bill-to Contact     ;Text100       ;CaptionML=[ENU=Bill-to Contact;
                                                              ESP=Fact. a-Atenci¢n] }
    { 11  ;   ;Your Reference      ;Text35        ;CaptionML=[ENU=Your Reference;
                                                              ESP=Su/Ntra. ref.] }
    { 12  ;   ;Ship-to Code        ;Code10        ;TableRelation="Ship-to Address".Code WHERE (Customer No.=FIELD(Sell-to Customer No.));
                                                   CaptionML=[ENU=Ship-to Code;
                                                              ESP=C¢d. direcci¢n env¡o cliente] }
    { 13  ;   ;Ship-to Name        ;Text100       ;CaptionML=[ENU=Ship-to Name;
                                                              ESP=Nombre direcci¢n de env¡o] }
    { 14  ;   ;Ship-to Name 2      ;Text50        ;CaptionML=[ENU=Ship-to Name 2;
                                                              ESP=Nombre direcci¢n de env¡o 2] }
    { 15  ;   ;Ship-to Address     ;Text100       ;CaptionML=[ENU=Ship-to Address;
                                                              ESP=Direcci¢n de env¡o] }
    { 16  ;   ;Ship-to Address 2   ;Text50        ;CaptionML=[ENU=Ship-to Address 2;
                                                              ESP=Direcci¢n de env¡o 2] }
    { 17  ;   ;Ship-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Ship-to City;
                                                              ESP=Poblaci¢n direcci¢n de env¡o] }
    { 18  ;   ;Ship-to Contact     ;Text100       ;CaptionML=[ENU=Ship-to Contact;
                                                              ESP=Contacto de direcci¢n de env¡o] }
    { 20  ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              ESP=Fecha registro] }
    { 21  ;   ;Shipment Date       ;Date          ;CaptionML=[ENU=Shipment Date;
                                                              ESP=Fecha env¡o] }
    { 22  ;   ;Posting Description ;Text100       ;CaptionML=[ENU=Posting Description;
                                                              ESP=Texto de registro] }
    { 23  ;   ;Payment Terms Code  ;Code10        ;TableRelation="Payment Terms";
                                                   CaptionML=[ENU=Payment Terms Code;
                                                              ESP=C¢d. t‚rminos pago] }
    { 24  ;   ;Due Date            ;Date          ;CaptionML=[ENU=Due Date;
                                                              ESP=Fecha vencimiento] }
    { 25  ;   ;Payment Discount %  ;Decimal       ;CaptionML=[ENU=Payment Discount %;
                                                              ESP=% Dto. P.P.];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 26  ;   ;Pmt. Discount Date  ;Date          ;CaptionML=[ENU=Pmt. Discount Date;
                                                              ESP=Fecha dto. P.P.] }
    { 27  ;   ;Shipment Method Code;Code10        ;TableRelation="Shipment Method";
                                                   CaptionML=[ENU=Shipment Method Code;
                                                              ESP=C¢d. condiciones env¡o] }
    { 28  ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 29  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Shortcut Dimension 1 Code;
                                                              ESP=C¢d. dim. acceso dir. 1];
                                                   CaptionClass='1,2,1' }
    { 30  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Shortcut Dimension 2 Code;
                                                              ESP=C¢d. dim. acceso dir. 2];
                                                   CaptionClass='1,2,2' }
    { 31  ;   ;Customer Posting Group;Code20      ;TableRelation="Customer Posting Group";
                                                   CaptionML=[ENU=Customer Posting Group;
                                                              ESP=Grupo registro cliente];
                                                   Editable=No }
    { 32  ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa];
                                                   Editable=No }
    { 33  ;   ;Currency Factor     ;Decimal       ;CaptionML=[ENU=Currency Factor;
                                                              ESP=Factor divisa];
                                                   DecimalPlaces=0:15;
                                                   MinValue=0 }
    { 34  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   CaptionML=[ENU=Customer Price Group;
                                                              ESP=Grupo precio cliente] }
    { 35  ;   ;Prices Including VAT;Boolean       ;CaptionML=[ENU=Prices Including VAT;
                                                              ESP=Precios IVA incluido] }
    { 37  ;   ;Invoice Disc. Code  ;Code20        ;CaptionML=[ENU=Invoice Disc. Code;
                                                              ESP=C¢d. dto. factura] }
    { 40  ;   ;Customer Disc. Group;Code20        ;TableRelation="Customer Discount Group";
                                                   CaptionML=[ENU=Customer Disc. Group;
                                                              ESP=Grupo dto. cliente] }
    { 41  ;   ;Language Code       ;Code10        ;TableRelation=Language;
                                                   CaptionML=[ENU=Language Code;
                                                              ESP=C¢d. idioma] }
    { 43  ;   ;Salesperson Code    ;Code20        ;TableRelation=Salesperson/Purchaser;
                                                   CaptionML=[ENU=Salesperson Code;
                                                              ESP=C¢d. vendedor] }
    { 46  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Comment Line" WHERE (Document Type=CONST(Posted Credit Memo),
                                                                                                 No.=FIELD(No.),
                                                                                                 Document Line No.=CONST(0)));
                                                   CaptionML=[ENU=Comment;
                                                              ESP=Comentario];
                                                   Editable=No }
    { 47  ;   ;No. Printed         ;Integer       ;CaptionML=[ENU=No. Printed;
                                                              ESP=No. copias impresas];
                                                   Editable=No }
    { 51  ;   ;On Hold             ;Code3         ;CaptionML=[ENU=On Hold;
                                                              ESP=Esperar] }
    { 52  ;   ;Applies-to Doc. Type;Option        ;CaptionML=[ENU=Applies-to Doc. Type;
                                                              ESP=Liq. por tipo documento];
                                                   OptionCaptionML=[ENU=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill";
                                                                    ESP=" ,Pago,Factura,Abono,Docs. inter‚s,Recordatorio,Reembolso,,,,,,,,,,,,,,,Efecto"];
                                                   OptionString=[ ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,,,,,,,,,,,,,,,Bill] }
    { 53  ;   ;Applies-to Doc. No. ;Code20        ;OnLookup=BEGIN
                                                              CustLedgEntry.SETCURRENTKEY("Document No.");
                                                              CustLedgEntry.SETRANGE("Document Type","Applies-to Doc. Type");
                                                              CustLedgEntry.SETRANGE("Document No.","Applies-to Doc. No.");
                                                              CustLedgEntry.SETRANGE("Bill No.","Applies-to Bill No.");
                                                              PAGE.RUN(0,CustLedgEntry);
                                                            END;

                                                   CaptionML=[ENU=Applies-to Doc. No.;
                                                              ESP=Liq. por No. documento] }
    { 55  ;   ;Bal. Account No.    ;Code20        ;TableRelation=IF (Bal. Account Type=CONST(G/L Account)) "G/L Account"
                                                                 ELSE IF (Bal. Account Type=CONST(Bank Account)) "Bank Account";
                                                   CaptionML=[ENU=Bal. Account No.;
                                                              ESP=Cta. contrapartida] }
    { 60  ;   ;Amount              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Cr.Memo Line".Amount WHERE (Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 61  ;   ;Amount Including VAT;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Cr.Memo Line"."Amount Including VAT" WHERE (Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Amount Including VAT;
                                                              ESP=Importe IVA incl.];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 70  ;   ;VAT Registration No.;Text20        ;CaptionML=[ENU=VAT Registration No.;
                                                              ESP=CIF/NIF] }
    { 73  ;   ;Reason Code         ;Code10        ;TableRelation="Reason Code";
                                                   CaptionML=[ENU=Reason Code;
                                                              ESP=C¢d. auditor¡a] }
    { 74  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESP=Grupo registro neg. gen.] }
    { 75  ;   ;EU 3-Party Trade    ;Boolean       ;CaptionML=[ENU=EU 3-Party Trade;
                                                              ESP=Op. triangular] }
    { 76  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   CaptionML=[ENU=Transaction Type;
                                                              ESP=Naturaleza transacci¢n] }
    { 77  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   CaptionML=[ENU=Transport Method;
                                                              ESP=Modo transporte] }
    { 78  ;   ;VAT Country/Region Code;Code10     ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=VAT Country/Region Code;
                                                              ESP=C¢d. IVA pa¡s/regi¢n] }
    { 79  ;   ;Sell-to Customer Name;Text100      ;CaptionML=[ENU=Sell-to Customer Name;
                                                              ESP=Venta a-Nombre] }
    { 80  ;   ;Sell-to Customer Name 2;Text50     ;CaptionML=[ENU=Sell-to Customer Name 2;
                                                              ESP=Venta a-Nombre 2] }
    { 81  ;   ;Sell-to Address     ;Text100       ;CaptionML=[ENU=Sell-to Address;
                                                              ESP=Venta a-Direcci¢n] }
    { 82  ;   ;Sell-to Address 2   ;Text50        ;CaptionML=[ENU=Sell-to Address 2;
                                                              ESP=Venta a-Direcci¢n 2] }
    { 83  ;   ;Sell-to City        ;Text30        ;TableRelation="Post Code".City;
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Sell-to City;
                                                              ESP=Venta a-Poblaci¢n] }
    { 84  ;   ;Sell-to Contact     ;Text100       ;CaptionML=[ENU=Sell-to Contact;
                                                              ESP=Venta a-Atenci¢n] }
    { 85  ;   ;Bill-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Bill-to Post Code;
                                                              ESP=Fact. a-C.P.] }
    { 86  ;   ;Bill-to County      ;Text30        ;CaptionML=[ENU=Bill-to County;
                                                              ESP=Fact. a-Provincia];
                                                   CaptionClass='5,1,' + "Bill-to Country/Region Code" }
    { 87  ;   ;Bill-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Bill-to Country/Region Code;
                                                              ESP=Fact. a-C¢d. pa¡s/regi¢n] }
    { 88  ;   ;Sell-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Sell-to Post Code;
                                                              ESP=Venta a-C.P.] }
    { 89  ;   ;Sell-to County      ;Text30        ;CaptionML=[ENU=Sell-to County;
                                                              ESP=Venta a-Provincia];
                                                   CaptionClass='5,1,' + "Sell-to Country/Region Code" }
    { 90  ;   ;Sell-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Sell-to Country/Region Code;
                                                              ESP=Venta a-C¢d. pa¡s/regi¢n] }
    { 91  ;   ;Ship-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Ship-to Post Code;
                                                              ESP=C.P. direcci¢n de env¡o] }
    { 92  ;   ;Ship-to County      ;Text30        ;CaptionML=[ENU=Ship-to County;
                                                              ESP=Provincia direcci¢n de env¡o];
                                                   CaptionClass='5,1,' + "Ship-to Country/Region Code" }
    { 93  ;   ;Ship-to Country/Region Code;Code10 ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Ship-to Country/Region Code;
                                                              ESP=C¢d. pa¡s/regi¢n direcci¢n de env¡o] }
    { 94  ;   ;Bal. Account Type   ;Option        ;CaptionML=[ENU=Bal. Account Type;
                                                              ESP=Tipo contrapartida];
                                                   OptionCaptionML=[ENU=G/L Account,Bank Account;
                                                                    ESP=Cuenta,Banco];
                                                   OptionString=G/L Account,Bank Account }
    { 97  ;   ;Exit Point          ;Code10        ;TableRelation="Entry/Exit Point";
                                                   CaptionML=[ENU=Exit Point;
                                                              ESP=Puerto/Aerop. carga] }
    { 98  ;   ;Correction          ;Boolean       ;CaptionML=[ENU=Correction;
                                                              ESP=Correcci¢n] }
    { 99  ;   ;Document Date       ;Date          ;CaptionML=[ENU=Document Date;
                                                              ESP=Fecha emisi¢n documento] }
    { 100 ;   ;External Document No.;Code35       ;CaptionML=[ENU=External Document No.;
                                                              ESP=No. documento externo] }
    { 101 ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   CaptionML=[ENU=Area;
                                                              ESP=C¢d. provincia] }
    { 102 ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   CaptionML=[ENU=Transaction Specification;
                                                              ESP=Especificaci¢n transacci¢n] }
    { 104 ;   ;Payment Method Code ;Code10        ;TableRelation="Payment Method";
                                                   CaptionML=[ENU=Payment Method Code;
                                                              ESP=C¢d. forma pago] }
    { 107 ;   ;Pre-Assigned No. Series;Code20     ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Pre-Assigned No. Series;
                                                              ESP=No. serie preasignado] }
    { 108 ;   ;No. Series          ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. Series;
                                                              ESP=Nos. serie];
                                                   Editable=No }
    { 111 ;   ;Pre-Assigned No.    ;Code20        ;CaptionML=[ENU=Pre-Assigned No.;
                                                              ESP=No. preasignado] }
    { 112 ;   ;User ID             ;Code50        ;TableRelation=User."User Name";
                                                   OnLookup=VAR
                                                              UserMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                              UserMgt.LookupUserID("User ID");
                                                            END;

                                                   TestTableRelation=No;
                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=User ID;
                                                              ESP=Id. usuario] }
    { 113 ;   ;Source Code         ;Code10        ;TableRelation="Source Code";
                                                   CaptionML=[ENU=Source Code;
                                                              ESP=C¢d. origen] }
    { 114 ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESP=C¢d.  rea impuesto] }
    { 115 ;   ;Tax Liable          ;Boolean       ;CaptionML=[ENU=Tax Liable;
                                                              ESP=Sujeto a impuesto] }
    { 116 ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=VAT Bus. Posting Group;
                                                              ESP=Grupo registro IVA neg.] }
    { 119 ;   ;VAT Base Discount % ;Decimal       ;CaptionML=[ENU=VAT Base Discount %;
                                                              ESP=% Dto. base IVA];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 134 ;   ;Prepmt. Cr. Memo No. Series;Code20 ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Prepmt. Cr. Memo No. Series;
                                                              ESP=No. serie abono prepago] }
    { 136 ;   ;Prepayment Credit Memo;Boolean     ;CaptionML=[ENU=Prepayment Credit Memo;
                                                              ESP=Abono prepago] }
    { 137 ;   ;Prepayment Order No.;Code20        ;CaptionML=[ENU=Prepayment Order No.;
                                                              ESP=No. pedido prepago] }
    { 171 ;   ;Sell-to Phone No.   ;Text30        ;ExtendedDatatype=Phone No.;
                                                   CaptionML=[ENU=Sell-to Phone No.;
                                                              ESP=N.§ de tel‚fono de venta] }
    { 172 ;   ;Sell-to E-Mail      ;Text80        ;ExtendedDatatype=E-Mail;
                                                   CaptionML=[ENU=Email;
                                                              ESP=Correo electr¢nico] }
    { 200 ;   ;Work Description    ;BLOB          ;DataClassification=CustomerContent;
                                                   CaptionML=[ENU=Work Description;
                                                              ESP=Descripci¢n del trabajo] }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              ESP=Id. grupo dimensiones];
                                                   Editable=No }
    { 710 ;   ;Document Exchange Identifier;Text50;CaptionML=[ENU=Document Exchange Identifier;
                                                              ESP=Identificador de intercambio de documentos] }
    { 711 ;   ;Document Exchange Status;Option    ;CaptionML=[ENU=Document Exchange Status;
                                                              ESP=Estado de intercambio de documentos];
                                                   OptionCaptionML=[ENU=Not Sent,Sent to Document Exchange Service,Delivered to Recipient,Delivery Failed,Pending Connection to Recipient;
                                                                    ESP=Sin enviar,Enviado al servicio de intercambio de documentos,Entregado al destinatario,Error de entrega,Conexi¢n pendiente a destinatario];
                                                   OptionString=Not Sent,Sent to Document Exchange Service,Delivered to Recipient,Delivery Failed,Pending Connection to Recipient }
    { 712 ;   ;Doc. Exch. Original Identifier;Text50;
                                                   CaptionML=[ENU=Doc. Exch. Original Identifier;
                                                              ESP=Identificador original de intercambio documentos] }
    { 1302;   ;Paid                ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=-Exist("Cust. Ledger Entry" WHERE (Entry No.=FIELD(Cust. Ledger Entry No.),
                                                                                                  Open=FILTER(Yes)));
                                                   CaptionML=[ENU=Paid;
                                                              ESP=Pagado];
                                                   Editable=No }
    { 1303;   ;Remaining Amount    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Cust. Ledger Entry No.=FIELD(Cust. Ledger Entry No.)));
                                                   CaptionML=[ENU=Remaining Amount;
                                                              ESP=Importe pendiente];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 1304;   ;Cust. Ledger Entry No.;Integer     ;TableRelation="Cust. Ledger Entry"."Entry No.";
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Cust. Ledger Entry No.;
                                                              ESP=No. mov. cliente];
                                                   Editable=No }
    { 1305;   ;Invoice Discount Amount;Decimal    ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Cr.Memo Line"."Inv. Discount Amount" WHERE (Document No.=FIELD(No.)));
                                                   CaptionML=[ENU=Invoice Discount Amount;
                                                              ESP=Importe descuento factura];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 1310;   ;Cancelled           ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Cancelled Document" WHERE (Source ID=CONST(114),
                                                                                                 Cancelled Doc. No.=FIELD(No.)));
                                                   CaptionML=[ENU=Cancelled;
                                                              ESP=Cancelado];
                                                   Editable=No }
    { 1311;   ;Corrective          ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Cancelled Document" WHERE (Source ID=CONST(112),
                                                                                                 Cancelled By Doc. No.=FIELD(No.)));
                                                   CaptionML=[ENU=Corrective;
                                                              ESP=Correctivo];
                                                   Editable=No }
    { 5050;   ;Campaign No.        ;Code20        ;TableRelation=Campaign;
                                                   CaptionML=[ENU=Campaign No.;
                                                              ESP=No. campa¤a] }
    { 5052;   ;Sell-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   CaptionML=[ENU=Sell-to Contact No.;
                                                              ESP=Venta a-No. contacto] }
    { 5053;   ;Bill-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   CaptionML=[ENU=Bill-to Contact No.;
                                                              ESP=Fact. a-No. contacto] }
    { 5055;   ;Opportunity No.     ;Code20        ;TableRelation=Opportunity;
                                                   CaptionML=[ENU=Opportunity No.;
                                                              ESP=N§ oportunidad] }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   CaptionML=[ENU=Responsibility Center;
                                                              ESP=Centro responsabilidad] }
    { 6601;   ;Return Order No.    ;Code20        ;AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Return Order No.;
                                                              ESP=No. devoluci¢n] }
    { 6602;   ;Return Order No. Series;Code20     ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Return Order No. Series;
                                                              ESP=No. serie devoluci¢n] }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 7200;   ;Get Return Receipt Used;Boolean    ;CaptionML=[ENU=Get Return Receipt Used;
                                                              ESP=Obtener recepc. dev. usada] }
    { 8000;   ;Id                  ;GUID          ;CaptionML=[ENU=Id;
                                                              ESP=Id] }
    { 10705;  ;Corrected Invoice No.;Code20       ;TableRelation="Sales Invoice Header";
                                                   OnLookup=VAR
                                                              PostedSalesInvoices@1100002 : Page 143;
                                                              SalesInvoiceHeader@1100003 : Record 112;
                                                            BEGIN
                                                              SalesInvoiceHeader.SETCURRENTKEY("No.");
                                                              SalesInvoiceHeader.SETRANGE("Bill-to Customer No.","Bill-to Customer No.");
                                                              SalesInvoiceHeader.SETRANGE("No.","Corrected Invoice No.");

                                                              PostedSalesInvoices.SETTABLEVIEW(SalesInvoiceHeader);
                                                              PostedSalesInvoices.SETRECORD(SalesInvoiceHeader);
                                                              PostedSalesInvoices.LOOKUPMODE(TRUE);
                                                              IF PostedSalesInvoices.RUNMODAL = ACTION::LookupOK THEN
                                                                PostedSalesInvoices.GETRECORD(SalesInvoiceHeader);
                                                              CLEAR(PostedSalesInvoices);
                                                            END;

                                                   CaptionML=[ENU=Corrected Invoice No.;
                                                              ESP=N.§ factura corregida] }
    { 10706;  ;SII Status          ;Option        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("SII Doc. Upload State".Status WHERE (Document Source=CONST(Customer Ledger),
                                                                                                            Document Type=CONST(Credit Memo),
                                                                                                            Document No.=FIELD(No.)));
                                                   OnLookup=VAR
                                                              SIIDocUploadState@1100001 : Record 10752;
                                                              SIIHistory@1100000 : Record 10750;
                                                            BEGIN
                                                              SIIDocUploadState.SETRANGE("Document Source",SIIDocUploadState."Document Source"::"Customer Ledger");
                                                              SIIDocUploadState.SETRANGE("Document Type",SIIDocUploadState."Document Type"::"Credit Memo");
                                                              SIIDocUploadState.SETRANGE("Document No.","No.");
                                                              IF SIIDocUploadState.FINDFIRST THEN BEGIN
                                                                SIIHistory.SETRANGE("Document State Id",SIIDocUploadState.Id);
                                                                PAGE.RUN(PAGE::"SII History",SIIHistory);
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=SII Status;
                                                              ESP=Estado SII];
                                                   OptionCaptionML=[ENU=Pending,Incorrect,Accepted,Accepted With Errors,Communication Error,Failed,Not Supported;
                                                                    ESP=Pendiente,Incorrecto,Aceptado,Aceptado con errores,Error de comunicaci¢n,Errores,No compatible];
                                                   OptionString=Pending,Incorrect,Accepted,Accepted With Errors,Communication Error,Failed,Not Supported }
    { 10707;  ;Invoice Type        ;Option        ;CaptionML=[ENU=Invoice Type;
                                                              ESP=Tipo de factura];
                                                   OptionCaptionML=[ENU=F1 Invoice,F2 Simplified Invoice,F3 Invoice issued to replace simplified invoices,F4 Invoice summary entry;
                                                                    ESP=F1 Factura,F2 Factura simplificada,F3 Factura emitida para sustituir a las facturas simplificadas,F4 Movimiento de resumen de facturas];
                                                   OptionString=F1 Invoice,F2 Simplified Invoice,F3 Invoice issued to replace simplified invoices,F4 Invoice summary entry }
    { 10708;  ;Cr. Memo Type       ;Option        ;CaptionML=[ENU=Cr. Memo Type;
                                                              ESP=Tipo de abono];
                                                   OptionCaptionML=[ENU=R1 Corrected Invoice,R2 Corrected Invoice (Art. 80.3),R3 Corrected Invoice (Art. 80.4),R4 Corrected Invoice (Other),R5 Corrected Invoice in Simplified Invoices,F1 Invoice,F2 Simplified Invoice;
                                                                    ESP=R1 Factura corregida,R2 Factura corregida (art¡culo 80.3),R3 Factura corregida (art¡culo 80.4),R4 Factura corregida (otros),R5 Factura corregida en facturas simplificadas,F1 Factura,F2 Factura simplificada];
                                                   OptionString=R1 Corrected Invoice,R2 Corrected Invoice (Art. 80.3),R3 Corrected Invoice (Art. 80.4),R4 Corrected Invoice (Other),R5 Corrected Invoice in Simplified Invoices,F1 Invoice,F2 Simplified Invoice }
    { 10709;  ;Special Scheme Code ;Option        ;CaptionML=[ENU=Special Scheme Code;
                                                              ESP=C¢d. de esquema especial];
                                                   OptionCaptionML=[ENU=01 General,02 Export,03 Special System,04 Gold,05 Travel Agencies,06 Groups of Entities,07 Special Cash,08  IPSI / IGIC,09 Travel Agency Services,10 Third Party,11 Business Withholding,12 Business not Withholding,13 Business Withholding and not Withholding,14 Invoice Work Certification,15 Invoice of Consecutive Nature,16 First Half 2017;
                                                                    ESP=01 General,02 Exportaciones,03 Sistema especial,04 Oro,05 Agencias de viajes,06 Grupos de entidades,07 Efectivo especial,08 IPSI/IGIC,09 Servicios de agencias de viajes,10 Terceros,11 Negocio con retenci¢n,12 Negocio sin retenci¢n,13 Negocio con y sin retenci¢n,14 Certificaci¢n laboral de factura,15 Factura consecutiva,16 Primer semestre 2017];
                                                   OptionString=01 General,02 Export,03 Special System,04 Gold,05 Travel Agencies,06 Groups of Entities,07 Special Cash,08  IPSI / IGIC,09 Travel Agency Services,10 Third Party,11 Business Withholding,12 Business not Withholding,13 Business Withholding and not Withholding,14 Invoice Work Certification,15 Invoice of Consecutive Nature,16 First Half 2017 }
    { 10710;  ;Operation Description;Text250      ;CaptionML=[ENU=Operation Description;
                                                              ESP=Descripci¢n de la operaci¢n] }
    { 10711;  ;Correction Type     ;Option        ;CaptionML=[ENU=Correction Type;
                                                              ESP=Tipo de correcci¢n];
                                                   OptionCaptionML=[ENU=" ,Replacement,Difference,Removal";
                                                                    ESP=" ,Sustituci¢n,Diferencia,Eliminaci¢n"];
                                                   OptionString=[ ,Replacement,Difference,Removal] }
    { 10712;  ;Operation Description 2;Text250    ;CaptionML=[ENU=Operation Description 2;
                                                              ESP=Descripci¢n de la operaci¢n 2] }
    { 10720;  ;Succeeded Company Name;Text250     ;CaptionML=[ENU=Succeeded Company Name;
                                                              ESP=Nombre de empresa correcto] }
    { 10721;  ;Succeeded VAT Registration No.;Text20;
                                                   CaptionML=[ENU=Succeeded VAT Registration No.;
                                                              ESP=CIF/NIF correcto] }
    { 10722;  ;ID Type             ;Option        ;CaptionML=[ENU=ID Type;
                                                              ESP=Tipo de id.];
                                                   OptionCaptionML=[ENU=" ,02-VAT Registration No.,03-Passport,04-ID Document,05-Certificate Of Residence,06-Other Probative Document,07-Not On The Census";
                                                                    ESP=" ,02-CIF-NIF,03-Pasaporte,04-Doc. Oficial Identif. (Residencia),05- Certificado De Residencia,06-Otro Documento Probatorio,07-No Censado"];
                                                   OptionString=[ ,02-VAT Registration No.,03-Passport,04-ID Document,05-Certificate Of Residence,06-Other Probative Document,07-Not On The Census] }
    { 50001;  ;Alias cliente       ;Code30        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Customer."Search Name" WHERE (No.=FIELD(Bill-to Customer No.)));
                                                   Description=BAIN-0062 }
    { 50002;  ;Importe IIEE        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Cr.Memo Line"."Importe IIEE" WHERE (Document No.=FIELD(No.)));
                                                   Description=BAIN-0064 }
    { 50021;  ;Importe comisi¢n (DL);Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Cr.Memo Line"."Importe comisi¢n (DL)" WHERE (Document No.=FIELD(No.)));
                                                   Description=BAIN-0025;
                                                   Editable=No }
    { 7000000;;Applies-to Bill No. ;Code20        ;CaptionML=[ENU=Applies-to Bill No.;
                                                              ESP=Liq. por No. efecto] }
    { 7000001;;Cust. Bank Acc. Code;Code20        ;TableRelation="Customer Bank Account".Code WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Cust. Bank Acc. Code;
                                                              ESP=C¢d. banco cliente] }
    { 7000003;;Pay-at Code         ;Code10        ;TableRelation="Customer Pmt. Address".Code WHERE (Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[ENU=Pay-at Code;
                                                              ESP=Pago en-C¢digo] }
    { 7014596;;No. Anexo           ;Code20        ;CaptionML=[ENU=Annex No.;
                                                              ESP=Nº Anexo;
                                                              PTG=No. DAA];
                                                   Description=VNTES }
    { 7014805;;Grupo descuento promocional;Code10 ;TableRelation="Grupo dto. promoci¢n cliente";
                                                   CaptionML=[ENU=Group discount coupon;
                                                              ESP=Grupo descuento promocional;
                                                              PTG=Grupo Desconto Promo‡Æo];
                                                   Description=VNTES }
    { 7014823;;C¢d. cosecha        ;Code10        ;TableRelation=Cosecha;
                                                   CaptionML=[ENU=Cod. harvest;
                                                              ESP=C¢d. cosecha];
                                                   Description=VNTES }
    { 7014890;;Id. sesi¢n TPV      ;Code20        ;TableRelation="Sesi¢n TPV";
                                                   CaptionML=[ENU=Id. Sign TPV;
                                                              ESP=Id. sesi¢n TPV];
                                                   Description=VNTES }
    { 7014891;;C¢d. TPV            ;Code20        ;TableRelation=TPV.C¢digo;
                                                   CaptionML=[ENU=Cod. TPV;
                                                              ESP=C¢d. TPV];
                                                   Description=VNTES }
    { 7014892;;Ticket              ;Boolean       ;CaptionML=[ENU=Ticket;
                                                              ESP=Ticket];
                                                   Description=VNTES }
    { 7014893;;Contado             ;Decimal       ;CaptionML=[ENU=Counted;
                                                              ESP=Contado];
                                                   Description=VNTES }
    { 7014894;;Tipo cta. banco s.c. contrp.;Option;OnValidate=VAR
                                                                Banco@1170170000 : Record 270;
                                                              BEGIN
                                                              END;

                                                   CaptionML=[ENU=Cta type. Bank sc contrp.;
                                                              ESP=Tipo cta. banco s.c. contrp.];
                                                   OptionCaptionML=[ENU=Acct. Savings,Safety sec. cred.;
                                                                    ESP=Cta. ahorro,Caja sec. cr‚d.];
                                                   OptionString=Cta. ahorro,Caja sec. cr‚d.;
                                                   Description=VNTES }
    { 7014896;;Cta. ahorro contrp. banco s.c.;Code20;
                                                   OnLookup=VAR
                                                              NoCtaAhorro@1170170000 : Code[20];
                                                            BEGIN
                                                            END;

                                                   CaptionML=[ENU=Acct. contrp savings. Bank sc;
                                                              ESP=Cta. ahorro contrp. banco s.c.];
                                                   Description=VNTES }
  }
  KEYS
  {
    {    ;No.                                     ;Clustered=Yes }
    {    ;Pre-Assigned No.                         }
    {    ;Return Order No.                         }
    {    ;Sell-to Customer No.                     }
    {    ;Prepayment Order No.                     }
    {    ;Bill-to Customer No.                     }
    {    ;Payment Method Code                      }
    {    ;Ticket                                   }
    {    ;Corrected Invoice No.                    }
    {    ;Posting Date                             }
    {    ;Document Exchange Status                 }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;No.,Sell-to Customer No.,Bill-to Customer No.,Posting Date,Posting Description }
    { 2   ;Brick               ;No.,Sell-to Customer Name,Amount,Due Date,Amount Including VAT }
  }
  CODE
  {
    VAR
      SalesCommentLine@1001 : Record 44;
      CustLedgEntry@1002 : Record 21;
      ApprovalsMgmt@1004 : Codeunit 1535;
      DimMgt@1005 : Codeunit 408;
      UserSetupMgt@1006 : Codeunit 5700;
      DocTxt@1000 : TextConst 'ENU=Credit Memo;ESP=Abono';

    [Internal]
    PROCEDURE SendRecords@12();
    VAR
      DocumentSendingProfile@1001 : Record 60;
      DummyReportSelections@1000 : Record 77;
      IsHandled@1002 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeSendRecords(DummyReportSelections,Rec,DocTxt,IsHandled);
      IF IsHandled THEN
        EXIT;

      DocumentSendingProfile.SendCustomerRecords(
        DummyReportSelections.Usage::"S.Cr.Memo",Rec,DocTxt,"Bill-to Customer No.","No.",
        FIELDNO("Bill-to Customer No."),FIELDNO("No."));
    END;

    [External]
    PROCEDURE SendProfile@6(VAR DocumentSendingProfile@1000 : Record 60);
    VAR
      DummyReportSelections@1002 : Record 77;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeSendProfile(DummyReportSelections,Rec,DocTxt,IsHandled,DocumentSendingProfile);
      IF IsHandled THEN
        EXIT;

      DocumentSendingProfile.Send(
        DummyReportSelections.Usage::"S.Cr.Memo",Rec,"No.","Bill-to Customer No.",
        DocTxt,FIELDNO("Bill-to Customer No."),FIELDNO("No."));
    END;

    [External]
    PROCEDURE PrintRecords@1(ShowRequestPage@1000 : Boolean);
    VAR
      DocumentSendingProfile@1002 : Record 60;
      DummyReportSelections@1001 : Record 77;
      IsHandled@1003 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforePrintRecords(DummyReportSelections,Rec,ShowRequestPage,IsHandled);
      IF IsHandled THEN
        EXIT;

      DocumentSendingProfile.TrySendToPrinter(
        DummyReportSelections.Usage::"S.Cr.Memo",Rec,FIELDNO("Bill-to Customer No."),ShowRequestPage);
    END;

    [External]
    PROCEDURE EmailRecords@17(ShowRequestPage@1000 : Boolean);
    VAR
      DocumentSendingProfile@1002 : Record 60;
      DummyReportSelections@1001 : Record 77;
      IsHandled@1003 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeEmailRecords(DummyReportSelections,Rec,DocTxt,ShowRequestPage,IsHandled);
      IF IsHandled THEN
        EXIT;

      DocumentSendingProfile.TrySendToEMail(
        DummyReportSelections.Usage::"S.Cr.Memo",Rec,FIELDNO("No."),DocTxt,FIELDNO("Bill-to Customer No."),ShowRequestPage);
    END;

    [External]
    PROCEDURE Navigate@2();
    VAR
      NavigateForm@1000 : Page 344;
    BEGIN
      NavigateForm.SetDoc("Posting Date","No.");
      NavigateForm.RUN;
    END;

    [External]
    PROCEDURE LookupAdjmtValueEntries@3();
    VAR
      ValueEntry@1000 : Record 5802;
    BEGIN
      ValueEntry.SETCURRENTKEY("Document No.");
      ValueEntry.SETRANGE("Document No.","No.");
      ValueEntry.SETRANGE("Document Type",ValueEntry."Document Type"::"Sales Credit Memo");
      ValueEntry.SETRANGE(Adjustment,TRUE);
      PAGE.RUNMODAL(0,ValueEntry);
    END;

    [External]
    PROCEDURE GetCustomerVATRegistrationNumber@14() : Text;
    BEGIN
      EXIT("VAT Registration No.");
    END;

    [External]
    PROCEDURE GetCustomerVATRegistrationNumberLbl@15() : Text;
    BEGIN
      EXIT(FIELDCAPTION("VAT Registration No."));
    END;

    [External]
    PROCEDURE GetCustomerGlobalLocationNumber@8() : Text;
    BEGIN
      EXIT('');
    END;

    [External]
    PROCEDURE GetCustomerGlobalLocationNumberLbl@10() : Text;
    BEGIN
      EXIT('');
    END;

    [External]
    PROCEDURE GetLegalStatement@60() : Text;
    VAR
      SalesSetup@1000 : Record 311;
    BEGIN
      SalesSetup.GET;
      EXIT(SalesSetup.GetLegalStatement);
    END;

    [External]
    PROCEDURE ShowDimensions@4();
    BEGIN
      DimMgt.ShowDimensionSet("Dimension Set ID",STRSUBSTNO('%1 %2',TABLECAPTION,"No."));
    END;

    [External]
    PROCEDURE SetSecurityFilterOnRespCenter@5();
    BEGIN
      IF UserSetupMgt.GetSalesFilter <> '' THEN BEGIN
        FILTERGROUP(2);
        SETRANGE("Responsibility Center",UserSetupMgt.GetSalesFilter);
        FILTERGROUP(0);
      END;
    END;

    [External]
    PROCEDURE GetDocExchStatusStyle@13() : Text;
    BEGIN
      CASE "Document Exchange Status" OF
        "Document Exchange Status"::"Not Sent":
          EXIT('Standard');
        "Document Exchange Status"::"Sent to Document Exchange Service":
          EXIT('Ambiguous');
        "Document Exchange Status"::"Delivered to Recipient":
          EXIT('Favorable');
        ELSE
          EXIT('Unfavorable');
      END;
    END;

    [External]
    PROCEDURE ShowActivityLog@116();
    VAR
      ActivityLog@1000 : Record 710;
    BEGIN
      ActivityLog.ShowEntries(RECORDID);
    END;

    [External]
    PROCEDURE DocExchangeStatusIsSent@112() : Boolean;
    BEGIN
      EXIT("Document Exchange Status" <> "Document Exchange Status"::"Not Sent");
    END;

    [External]
    PROCEDURE ShowCanceledOrCorrInvoice@18();
    BEGIN
      CALCFIELDS(Cancelled,Corrective);
      CASE TRUE OF
        Cancelled:
          ShowCorrectiveInvoice;
        Corrective:
          ShowCancelledInvoice;
      END;
    END;

    [External]
    PROCEDURE ShowCorrectiveInvoice@16();
    VAR
      CancelledDocument@1000 : Record 1900;
      SalesInvHeader@1001 : Record 112;
    BEGIN
      CALCFIELDS(Cancelled);
      IF NOT Cancelled THEN
        EXIT;

      IF CancelledDocument.FindSalesCancelledCrMemo("No.") THEN BEGIN
        SalesInvHeader.GET(CancelledDocument."Cancelled By Doc. No.");
        PAGE.RUN(PAGE::"Posted Sales Invoice",SalesInvHeader);
      END;
    END;

    [External]
    PROCEDURE ShowCancelledInvoice@37();
    VAR
      CancelledDocument@1000 : Record 1900;
      SalesInvHeader@1001 : Record 112;
    BEGIN
      CALCFIELDS(Corrective);
      IF NOT Corrective THEN
        EXIT;

      IF CancelledDocument.FindSalesCorrectiveCrMemo("No.") THEN BEGIN
        SalesInvHeader.GET(CancelledDocument."Cancelled Doc. No.");
        PAGE.RUN(PAGE::"Posted Sales Invoice",SalesInvHeader);
      END;
    END;

    [External]
    PROCEDURE GetWorkDescription@9() : Text;
    VAR
      TempBlob@1000 : TEMPORARY Record 99008535;
      CR@1004 : Text[1];
    BEGIN
      CALCFIELDS("Work Description");
      IF NOT "Work Description".HASVALUE THEN
        EXIT('');

      CR[1] := 10;
      TempBlob.Blob := "Work Description";
      EXIT(TempBlob.ReadAsText(CR,TEXTENCODING::UTF8));
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeEmailRecords@25(VAR ReportSelections@1003 : Record 77;VAR SalesCrMemoHeader@1002 : Record 114;DocTxt@1004 : Text;ShowDialog@1001 : Boolean;VAR IsHandled@1000 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforePrintRecords@24(VAR ReportSelections@1003 : Record 77;VAR SalesCrMemoHeader@1002 : Record 114;ShowRequestPage@1001 : Boolean;VAR IsHandled@1000 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSendProfile@23(VAR ReportSelections@1003 : Record 77;VAR SalesCrMemoHeader@1002 : Record 114;DocTxt@1001 : Text;VAR IsHandled@1000 : Boolean;VAR DocumentSendingProfile@1004 : Record 60);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSendRecords@7(VAR ReportSelections@1000 : Record 77;VAR SalesCrMemoHeader@1001 : Record 114;DocTxt@1002 : Text;VAR IsHandled@1003 : Boolean);
    BEGIN
    END;

    BEGIN
    {

      BAINES
      =========
      BAIN-0062 VM 120508 Se a¤ade el campo alias cliente.
    }
    END.
  }
}

OBJECT Table 115 Sales Cr.Memo Line
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=17:22:19;
    Modified=Yes;
    Version List=NAVW114.06,NAVES14.06,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    Permissions=TableData 32=r,
                TableData 5802=r;
    OnDelete=VAR
               SalesDocLineComments@1000 : Record 44;
               PostedDeferralHeader@1001 : Record 1704;
             BEGIN
               SalesDocLineComments.SETRANGE("Document Type",SalesDocLineComments."Document Type"::"Posted Credit Memo");
               SalesDocLineComments.SETRANGE("No.","Document No.");
               SalesDocLineComments.SETRANGE("Document Line No.","Line No.");
               IF NOT SalesDocLineComments.ISEMPTY THEN
                 SalesDocLineComments.DELETEALL;

               PostedDeferralHeader.DeleteHeader(DeferralUtilities.GetSalesDeferralDocType,'','',
                 SalesDocLineComments."Document Type"::"Posted Credit Memo","Document No.","Line No.");
             END;

    CaptionML=[ENU=Sales Cr.Memo Line;
               ESP=Hist¢rico l¡n. abono venta];
    LookupPageID=Page527;
    DrillDownPageID=Page527;
  }
  FIELDS
  {
    { 2   ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Sell-to Customer No.;
                                                              ESP=Venta a-No. cliente];
                                                   Editable=No }
    { 3   ;   ;Document No.        ;Code20        ;TableRelation="Sales Cr.Memo Header";
                                                   CaptionML=[ENU=Document No.;
                                                              ESP=No. documento] }
    { 4   ;   ;Line No.            ;Integer       ;CaptionML=[ENU=Line No.;
                                                              ESP=No. l¡nea] }
    { 5   ;   ;Type                ;Option        ;CaptionML=[ENU=Type;
                                                              ESP=Tipo];
                                                   OptionCaptionML=[ENU=" ,G/L Account,Item,Resource,Fixed Asset,Charge (Item)";
                                                                    ESP=" ,Cuenta,Producto,Recurso,Activo fijo,Cargo (prod.)"];
                                                   OptionString=[ ,G/L Account,Item,Resource,Fixed Asset,Charge (Item)] }
    { 6   ;   ;No.                 ;Code20        ;TableRelation=IF (Type=CONST(G/L Account)) "G/L Account"
                                                                 ELSE IF (Type=CONST(Item)) Item
                                                                 ELSE IF (Type=CONST(Resource)) Resource
                                                                 ELSE IF (Type=CONST(Fixed Asset)) "Fixed Asset"
                                                                 ELSE IF (Type=CONST("Charge (Item)")) "Item Charge";
                                                   CaptionML=[ENU=No.;
                                                              ESP=No.];
                                                   CaptionClass=GetCaptionClass(FIELDNO("No.")) }
    { 7   ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   CaptionML=[ENU=Location Code;
                                                              ESP=C¢d. almac‚n] }
    { 8   ;   ;Posting Group       ;Code20        ;TableRelation=IF (Type=CONST(Item)) "Inventory Posting Group"
                                                                 ELSE IF (Type=CONST(Fixed Asset)) "FA Posting Group";
                                                   CaptionML=[ENU=Posting Group;
                                                              ESP=Grupo de registro];
                                                   Editable=No }
    { 10  ;   ;Shipment Date       ;Date          ;CaptionML=[ENU=Shipment Date;
                                                              ESP=Fecha env¡o] }
    { 11  ;   ;Description         ;Text100       ;CaptionML=[ENU=Description;
                                                              ESP=Descripci¢n] }
    { 12  ;   ;Description 2       ;Text50        ;CaptionML=[ENU=Description 2;
                                                              ESP=Descripci¢n 2] }
    { 13  ;   ;Unit of Measure     ;Text50        ;CaptionML=[ENU=Unit of Measure;
                                                              ESP=Unidad medida] }
    { 15  ;   ;Quantity            ;Decimal       ;CaptionML=[ENU=Quantity;
                                                              ESP=Cantidad];
                                                   DecimalPlaces=0:5 }
    { 22  ;   ;Unit Price          ;Decimal       ;CaptionML=[ENU=Unit Price;
                                                              ESP=Precio venta];
                                                   AutoFormatType=2;
                                                   AutoFormatExpr=GetCurrencyCode;
                                                   CaptionClass=GetCaptionClass(FIELDNO("Unit Price")) }
    { 23  ;   ;Unit Cost (LCY)     ;Decimal       ;CaptionML=[ENU=Unit Cost (LCY);
                                                              ESP=Coste unitario (DL)];
                                                   AutoFormatType=2 }
    { 25  ;   ;VAT %               ;Decimal       ;CaptionML=[ENU=VAT %;
                                                              ESP=% IVA];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 27  ;   ;Line Discount %     ;Decimal       ;CaptionML=[ENU=Line Discount %;
                                                              ESP=% Descuento l¡nea];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 28  ;   ;Line Discount Amount;Decimal       ;CaptionML=[ENU=Line Discount Amount;
                                                              ESP=Importe dto. l¡nea];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 29  ;   ;Amount              ;Decimal       ;CaptionML=[ENU=Amount;
                                                              ESP=Importe];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 30  ;   ;Amount Including VAT;Decimal       ;CaptionML=[ENU=Amount Including VAT;
                                                              ESP=Importe IVA incl.];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 32  ;   ;Allow Invoice Disc. ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Invoice Disc.;
                                                              ESP=Permitir dto. factura] }
    { 34  ;   ;Gross Weight        ;Decimal       ;CaptionML=[ENU=Gross Weight;
                                                              ESP=Peso bruto];
                                                   DecimalPlaces=0:5 }
    { 35  ;   ;Net Weight          ;Decimal       ;CaptionML=[ENU=Net Weight;
                                                              ESP=Peso neto];
                                                   DecimalPlaces=0:5 }
    { 36  ;   ;Units per Parcel    ;Decimal       ;CaptionML=[ENU=Units per Parcel;
                                                              ESP=Unidades por lote];
                                                   DecimalPlaces=0:5 }
    { 37  ;   ;Unit Volume         ;Decimal       ;CaptionML=[ENU=Unit Volume;
                                                              ESP=Volumen];
                                                   DecimalPlaces=0:5 }
    { 38  ;   ;Appl.-to Item Entry ;Integer       ;AccessByPermission=TableData 27=R;
                                                   CaptionML=[ENU=Appl.-to Item Entry;
                                                              ESP=Liq. por No. orden producto] }
    { 40  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   CaptionML=[ENU=Shortcut Dimension 1 Code;
                                                              ESP=C¢d. dim. acceso dir. 1];
                                                   CaptionClass='1,2,1' }
    { 41  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   CaptionML=[ENU=Shortcut Dimension 2 Code;
                                                              ESP=C¢d. dim. acceso dir. 2];
                                                   CaptionClass='1,2,2' }
    { 42  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   CaptionML=[ENU=Customer Price Group;
                                                              ESP=Grupo precio cliente] }
    { 45  ;   ;Job No.             ;Code20        ;TableRelation=Job;
                                                   CaptionML=[ENU=Job No.;
                                                              ESP=No. proyecto] }
    { 52  ;   ;Work Type Code      ;Code10        ;TableRelation="Work Type";
                                                   CaptionML=[ENU=Work Type Code;
                                                              ESP=C¢d. tipo trabajo] }
    { 65  ;   ;Order No.           ;Code20        ;CaptionML=[ENU=Order No.;
                                                              ESP=N.§ pedido] }
    { 66  ;   ;Order Line No.      ;Integer       ;CaptionML=[ENU=Order Line No.;
                                                              ESP=N.§ l¡nea pedido] }
    { 68  ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Bill-to Customer No.;
                                                              ESP=Factura-a No. cliente];
                                                   Editable=No }
    { 69  ;   ;Inv. Discount Amount;Decimal       ;CaptionML=[ENU=Inv. Discount Amount;
                                                              ESP=Importe dto. factura];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 74  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESP=Grupo registro neg. gen.] }
    { 75  ;   ;Gen. Prod. Posting Group;Code20    ;TableRelation="Gen. Product Posting Group";
                                                   CaptionML=[ENU=Gen. Prod. Posting Group;
                                                              ESP=Grupo registro prod. gen.] }
    { 77  ;   ;VAT Calculation Type;Option        ;CaptionML=[ENU=VAT Calculation Type;
                                                              ESP=Tipo c lculo IVA];
                                                   OptionCaptionML=[ENU=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax,No Taxable VAT;
                                                                    ESP=Normal,Reversi¢n,Total,Impto. venta,No sujeto];
                                                   OptionString=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax,No Taxable VAT }
    { 78  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   CaptionML=[ENU=Transaction Type;
                                                              ESP=Naturaleza transacci¢n] }
    { 79  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   CaptionML=[ENU=Transport Method;
                                                              ESP=Modo transporte] }
    { 80  ;   ;Attached to Line No.;Integer       ;TableRelation="Sales Cr.Memo Line"."Line No." WHERE (Document No.=FIELD(Document No.));
                                                   CaptionML=[ENU=Attached to Line No.;
                                                              ESP=No. l¡nea texto adicional] }
    { 81  ;   ;Exit Point          ;Code10        ;TableRelation="Entry/Exit Point";
                                                   CaptionML=[ENU=Exit Point;
                                                              ESP=Puerto/Aerop. carga] }
    { 82  ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   CaptionML=[ENU=Area;
                                                              ESP=C¢d. provincia] }
    { 83  ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   CaptionML=[ENU=Transaction Specification;
                                                              ESP=Especificaci¢n transacci¢n] }
    { 84  ;   ;Tax Category        ;Code10        ;CaptionML=[ENU=Tax Category;
                                                              ESP=Categor¡a de impuesto] }
    { 85  ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESP=C¢d.  rea impuesto] }
    { 86  ;   ;Tax Liable          ;Boolean       ;CaptionML=[ENU=Tax Liable;
                                                              ESP=Sujeto a impuesto] }
    { 87  ;   ;Tax Group Code      ;Code20        ;TableRelation="Tax Group";
                                                   CaptionML=[ENU=Tax Group Code;
                                                              ESP=C¢d. grupo impuesto] }
    { 88  ;   ;VAT Clause Code     ;Code20        ;TableRelation="VAT Clause";
                                                   CaptionML=[ENU=VAT Clause Code;
                                                              ESP=C¢digo de cl usula de IVA] }
    { 89  ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=VAT Bus. Posting Group;
                                                              ESP=Grupo registro IVA neg.] }
    { 90  ;   ;VAT Prod. Posting Group;Code20     ;TableRelation="VAT Product Posting Group";
                                                   CaptionML=[ENU=VAT Prod. Posting Group;
                                                              ESP=Grupo registro IVA prod.] }
    { 97  ;   ;Blanket Order No.   ;Code20        ;TableRelation="Sales Header".No. WHERE (Document Type=CONST(Blanket Order));
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Blanket Order No.;
                                                              ESP=No. pedido abierto] }
    { 98  ;   ;Blanket Order Line No.;Integer     ;TableRelation="Sales Line"."Line No." WHERE (Document Type=CONST(Blanket Order),
                                                                                                Document No.=FIELD(Blanket Order No.));
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Blanket Order Line No.;
                                                              ESP=No. l¡n. pedido abierto] }
    { 99  ;   ;VAT Base Amount     ;Decimal       ;CaptionML=[ENU=VAT Base Amount;
                                                              ESP=Importe base IVA];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 100 ;   ;Unit Cost           ;Decimal       ;CaptionML=[ENU=Unit Cost;
                                                              ESP=Coste unitario];
                                                   Editable=No;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 101 ;   ;System-Created Entry;Boolean       ;CaptionML=[ENU=System-Created Entry;
                                                              ESP=Asiento autom tico];
                                                   Editable=No }
    { 103 ;   ;Line Amount         ;Decimal       ;CaptionML=[ENU=Line Amount;
                                                              ESP=Importe l¡nea];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode;
                                                   CaptionClass=GetCaptionClass(FIELDNO("Line Amount")) }
    { 104 ;   ;VAT Difference      ;Decimal       ;CaptionML=[ENU=VAT Difference;
                                                              ESP=Diferencia  IVA];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 106 ;   ;VAT Identifier      ;Code20        ;CaptionML=[ENU=VAT Identifier;
                                                              ESP=Identific. IVA];
                                                   Editable=No }
    { 107 ;   ;IC Partner Ref. Type;Option        ;CaptionML=[ENU=IC Partner Ref. Type;
                                                              ESP=Tipo referencia socio IC];
                                                   OptionCaptionML=[ENU=" ,G/L Account,Item,,,Charge (Item),Cross reference,Common Item No.";
                                                                    ESP=" ,Cuenta,Producto,,,Cargo (prod.),Referencia cruzada,No. producto com£n"];
                                                   OptionString=[ ,G/L Account,Item,,,Charge (Item),Cross reference,Common Item No.] }
    { 108 ;   ;IC Partner Reference;Code20        ;CaptionML=[ENU=IC Partner Reference;
                                                              ESP=Referencia socio IC] }
    { 123 ;   ;Prepayment Line     ;Boolean       ;CaptionML=[ENU=Prepayment Line;
                                                              ESP=L¡nea prepago];
                                                   Editable=No }
    { 130 ;   ;IC Partner Code     ;Code20        ;TableRelation="IC Partner";
                                                   CaptionML=[ENU=IC Partner Code;
                                                              ESP=C¢digo socio IC] }
    { 131 ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              ESP=Fecha registro] }
    { 145 ;   ;Pmt. Discount Amount;Decimal       ;CaptionML=[ENU=Pmt. Discount Amount;
                                                              ESP=Imp. dto. P.P.];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 180 ;   ;Line Discount Calculation;Option   ;CaptionML=[ENU=Line Discount Calculation;
                                                              ESP=Calculo de descuento de l¡nea];
                                                   OptionCaptionML=[ENU=None,%,Amount;
                                                                    ESP=Ninguno,%,Importe];
                                                   OptionString=None,%,Amount }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              ESP=Id. grupo dimensiones];
                                                   Editable=No }
    { 1001;   ;Job Task No.        ;Code20        ;TableRelation="Job Task"."Job Task No." WHERE (Job No.=FIELD(Job No.));
                                                   CaptionML=[ENU=Job Task No.;
                                                              ESP=No. tarea proyecto];
                                                   Editable=No }
    { 1002;   ;Job Contract Entry No.;Integer     ;CaptionML=[ENU=Job Contract Entry No.;
                                                              ESP=No. mov. contrato proyecto];
                                                   Editable=No }
    { 1700;   ;Deferral Code       ;Code10        ;TableRelation="Deferral Template"."Deferral Code";
                                                   CaptionML=[ENU=Deferral Code;
                                                              ESP=C¢digo de fraccionamiento] }
    { 5402;   ;Variant Code        ;Code10        ;TableRelation=IF (Type=CONST(Item)) "Item Variant".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Variant Code;
                                                              ESP=C¢d. variante] }
    { 5403;   ;Bin Code            ;Code20        ;TableRelation=Bin.Code WHERE (Location Code=FIELD(Location Code),
                                                                                 Item Filter=FIELD(No.),
                                                                                 Variant Filter=FIELD(Variant Code));
                                                   CaptionML=[ENU=Bin Code;
                                                              ESP=C¢d. ubicaci¢n] }
    { 5404;   ;Qty. per Unit of Measure;Decimal   ;CaptionML=[ENU=Qty. per Unit of Measure;
                                                              ESP=Cant. por unidad medida];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5407;   ;Unit of Measure Code;Code10        ;TableRelation=IF (Type=CONST(Item)) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.))
                                                                 ELSE "Unit of Measure";
                                                   CaptionML=[ENU=Unit of Measure Code;
                                                              ESP=C¢d. unidad medida] }
    { 5415;   ;Quantity (Base)     ;Decimal       ;CaptionML=[ENU=Quantity (Base);
                                                              ESP=Cantidad (base)];
                                                   DecimalPlaces=0:5 }
    { 5600;   ;FA Posting Date     ;Date          ;CaptionML=[ENU=FA Posting Date;
                                                              ESP=A/F Fecha registro] }
    { 5602;   ;Depreciation Book Code;Code10      ;TableRelation="Depreciation Book";
                                                   CaptionML=[ENU=Depreciation Book Code;
                                                              ESP=C¢d. libro amortizaci¢n] }
    { 5605;   ;Depr. until FA Posting Date;Boolean;CaptionML=[ENU=Depr. until FA Posting Date;
                                                              ESP=A/F Amort. hasta fecha reg.] }
    { 5612;   ;Duplicate in Depreciation Book;Code10;
                                                   TableRelation="Depreciation Book";
                                                   CaptionML=[ENU=Duplicate in Depreciation Book;
                                                              ESP=Duplicado en libro amort.] }
    { 5613;   ;Use Duplication List;Boolean       ;CaptionML=[ENU=Use Duplication List;
                                                              ESP=Utilizar lista duplicados] }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   CaptionML=[ENU=Responsibility Center;
                                                              ESP=Centro responsabilidad] }
    { 5705;   ;Cross-Reference No. ;Code20        ;AccessByPermission=TableData 5717=R;
                                                   CaptionML=[ENU=Cross-Reference No.;
                                                              ESP=No. referencia cruzada] }
    { 5706;   ;Unit of Measure (Cross Ref.);Code10;TableRelation=IF (Type=CONST(Item)) "Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Unit of Measure (Cross Ref.);
                                                              ESP=Unidad de medida (ref.cruz.)] }
    { 5707;   ;Cross-Reference Type;Option        ;CaptionML=[ENU=Cross-Reference Type;
                                                              ESP=Tipo referencia cruzada];
                                                   OptionCaptionML=[ENU=" ,Customer,Vendor,Bar Code";
                                                                    ESP=" ,Cliente,Prov.,C¢d. barra"];
                                                   OptionString=[ ,Customer,Vendor,Bar Code] }
    { 5708;   ;Cross-Reference Type No.;Code30    ;CaptionML=[ENU=Cross-Reference Type No.;
                                                              ESP=No. tipo referencia cruzada] }
    { 5709;   ;Item Category Code  ;Code20        ;TableRelation=IF (Type=CONST(Item)) "Item Category";
                                                   CaptionML=[ENU=Item Category Code;
                                                              ESP=C¢d. categor¡a producto] }
    { 5710;   ;Nonstock            ;Boolean       ;CaptionML=[ENU=Catalog;
                                                              ESP=Cat logo] }
    { 5711;   ;Purchasing Code     ;Code10        ;TableRelation=Purchasing;
                                                   CaptionML=[ENU=Purchasing Code;
                                                              ESP=C¢d. compra] }
    { 5712;   ;Product Group Code  ;Code10        ;TableRelation="Product Group".Code WHERE (Item Category Code=FIELD(Item Category Code));
                                                   ValidateTableRelation=No;
                                                   ObsoleteState=Removed;
                                                   ObsoleteReason=Product Groups became first level children of Item Categories.;
                                                   CaptionML=[ENU=Product Group Code;
                                                              ESP=C¢d. grupo producto] }
    { 5811;   ;Appl.-from Item Entry;Integer      ;AccessByPermission=TableData 27=R;
                                                   CaptionML=[ENU=Appl.-from Item Entry;
                                                              ESP=Liquid.-de mov. pdto] }
    { 6600;   ;Return Receipt No.  ;Code20        ;CaptionML=[ENU=Return Receipt No.;
                                                              ESP=No. recep. devol.];
                                                   Editable=No }
    { 6601;   ;Return Receipt Line No.;Integer    ;CaptionML=[ENU=Return Receipt Line No.;
                                                              ESP=No. l¡n. recep. dev.];
                                                   Editable=No }
    { 6608;   ;Return Reason Code  ;Code10        ;TableRelation="Return Reason";
                                                   CaptionML=[ENU=Return Reason Code;
                                                              ESP=C¢d. auditor¡a dev.] }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 7002;   ;Customer Disc. Group;Code20        ;TableRelation="Customer Discount Group";
                                                   CaptionML=[ENU=Customer Disc. Group;
                                                              ESP=Grupo dto. cliente] }
    { 10700;  ;Pmt. Disc. Given Amount (Old);Decimal;
                                                   ObsoleteState=Removed;
                                                   ObsoleteReason=Merged to W1;
                                                   CaptionML=[ENU=Pmt. Disc. Given Amount (Old);
                                                              ESP=Importe concedido de dto. por pronto pago (anterior)];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 10701;  ;EC %                ;Decimal       ;CaptionML=[ENU=EC %;
                                                              ESP=% RE] }
    { 10702;  ;EC Difference       ;Decimal       ;CaptionML=[ENU=EC Difference;
                                                              ESP=Diferencia RE];
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 50000;  ;% margen real       ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50001;  ;% margen m¡nimo     ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50004;  ;Usuario autorizaci¢n margen;Code20 ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50005;  ;% comisi¢n          ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 50006;  ;Importe comisi¢n (DL);Decimal      ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 50008;  ;Promoci¢n manual    ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0049 }
    { 7014451;;Precio unidad precio;Decimal       ;CaptionML=[ENU=Unit price price;
                                                              ESP=Precio unidad precio];
                                                   Description=VNTES;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 7014452;;Densidad granel     ;Decimal       ;CaptionML=[ENU=Bulk Density;
                                                              ESP=Densidad granel];
                                                   Description=VNTES }
    { 7014454;;C¢d. ud. medida precio;Code10      ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   CaptionML=[ENU=Cod. ud. As price;
                                                              ESP=C¢d. ud. medida precio];
                                                   Description=VNTES }
    { 7014455;;Cdad. en unidad medida precio;Decimal;
                                                   CaptionML=[ENU=Qty. measured in unit price;
                                                              ESP=Cdad. en unidad medida precio];
                                                   DecimalPlaces=0:6;
                                                   Description=VNTES }
    { 7014456;;Cantidad (unidad precio);Decimal   ;CaptionML=[ENU=Quantity (unit price);
                                                              ESP=Cantidad (unidad precio)];
                                                   Description=VNTES }
    { 7014459;;C¢d. ud. medida entrada;Code10     ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(No.));
                                                   OnValidate=VAR
                                                                dCantUdad@1170170000 : Decimal;
                                                              BEGIN
                                                              END;

                                                   CaptionML=[ENU=Cod. ud. measured input;
                                                              ESP=C¢d. ud. medida entrada];
                                                   Description=VNTES }
    { 7014460;;Cantidad ud. medida entrada;Decimal;CaptionML=[ENU=Quantity ud. measured input;
                                                              ESP=Cantidad ud. medida entrada];
                                                   DecimalPlaces=0:5;
                                                   Description=VNTES }
    { 7014520;;No. documento distribuci¢n;Code20  ;TableRelation="Sales Line";
                                                   CaptionML=[ENU=No document distribution;
                                                              ESP=Nº documento distribuci¢n];
                                                   Description=VNTES }
    { 7014521;;No. l¡nea doc. distribuci¢n;Integer;CaptionML=[ENU=Line No. doc. distribution;
                                                              ESP=Nº l¡nea doc. distribuci¢n];
                                                   Description=VNTES }
    { 7014524;;Tipo documento distribuci¢n;Option ;CaptionML=[ENU=Document type distribution;
                                                              ESP=Tipo documento distribuci¢n];
                                                   OptionCaptionML=[ENU=Quote,Order,Invoice,Credit Memo,Blanket Order,Order Return ,,,,,,,,,,,,,,,EDI Order;
                                                                    ESP=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,,,,,,,,,,,,,,,Pedido EDI];
                                                   OptionString=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,,,,,,,,,,,,,,,Pedido EDI;
                                                   Description=VNTES }
    { 7014683;;Tipo l¡nea          ;Option        ;CaptionML=[ENU=Type line;
                                                              ESP=Tipo l¡nea];
                                                   OptionCaptionML=[ENU=Normal,Shows,Gift;
                                                                    ESP=Normal,Muestra,Obsequio];
                                                   OptionString=Normal,Muestra,Obsequio;
                                                   Description=VNTES }
    { 7014684;;C¢d. concepto obsequio;Code10      ;CaptionML=[ENU=Cod. concept gift;
                                                              ESP=C¢d. concepto obsequio];
                                                   Description=VNTES }
    { 7014823;;C¢d. cosecha        ;Code10        ;TableRelation=Cosecha;
                                                   CaptionML=[ENU=Cod. harvest;
                                                              ESP=C¢d. cosecha];
                                                   Description=VNTES }
    { 7014854;;Grupo dto. promoci¢n producto;Code10;
                                                   TableRelation="Grupo dto. promoci¢n producto";
                                                   CaptionML=[ENU=Group discount. product promotion;
                                                              ESP=Grupo dto. promoci¢n producto;
                                                              PTG=Grupo Dto. Promo‡Æo Produto];
                                                   Description=VNTES }
    { 7014855;;Grupo dto. promoci¢n cliente;Code10;TableRelation="Grupo dto. promoci¢n cliente";
                                                   CaptionML=[ENU=Group discount. Customer promotion;
                                                              ESP=Grupo dto. promoci¢n cliente;
                                                              PTG=Grupo Dto. Promo‡Æo Cliente];
                                                   Description=VNTES }
    { 7014856;;Fecha pedido        ;Date          ;CaptionML=[ENU=Order Date;
                                                              ESP=Fecha pedido;
                                                              PTG=Data Pedido];
                                                   Description=VNTES }
    { 7014857;;Promoci¢n           ;Boolean       ;CaptionML=[ENU=Promotion;
                                                              ESP=Promoci¢n;
                                                              PTG=Promo‡Æo];
                                                   Description=VNTES;
                                                   Editable=No }
    { 7014858;;No. l¡nea origen promoci¢n;Integer ;CaptionML=[ENU=No home online promotion;
                                                              ESP=Nº l¡nea origen promoci¢n;
                                                              PTG=No. Linha Origem Promo‡Æo];
                                                   Description=VNTES }
    { 7014859;;C¢d. promoci¢n      ;Code10        ;TableRelation=Promoci¢n.C¢digo;
                                                   CaptionML=[ENU=Cod. promotion;
                                                              ESP=C¢d. promoci¢n;
                                                              PTG=C¢d. Promo‡Æo];
                                                   Description=VNTES }
    { 7014860;;Cdad. promoci¢n (base);Decimal     ;CaptionML=[ENU=Qty. promotion (base);
                                                              ESP=Cdad. promoci¢n (base);
                                                              PTG=Qnt. Promo‡Æo (base)];
                                                   Description=VNTES }
    { 7014861;;No. promoci¢n       ;Integer       ;CaptionML=[ENU=No promotion;
                                                              ESP=Nº promoci¢n;
                                                              PTG=No. Promo‡Æo];
                                                   Description=VNTES }
    { 7014874;;Precio IIEE         ;Decimal       ;CaptionML=[ENU=Price IISS;
                                                              ESP=Precio IIEE];
                                                   MinValue=0;
                                                   Description=VNTES;
                                                   AutoFormatType=2 }
    { 7014876;;Importe IIEE        ;Decimal       ;CaptionML=[ENU=Amount IISS;
                                                              ESP=Importe IIEE];
                                                   Description=VNTES;
                                                   AutoFormatType=1 }
  }
  KEYS
  {
    {    ;Document No.,Line No.                   ;SumIndexFields=Importe IIEE;
                                                   MaintainSIFTIndex=No;
                                                   Clustered=Yes }
    {    ;Blanket Order No.,Blanket Order Line No. }
    {    ;Sell-to Customer No.                     }
    {    ;Return Receipt No.,Return Receipt Line No. }
    {    ;Job Contract Entry No.                   }
    {    ;Bill-to Customer No.                     }
    {    ;Order No.,Order Line No.,Posting Date    }
    {    ;Document No.,Location Code              ;SumIndexFields=Amount,Amount Including VAT;
                                                   MaintainSQLIndex=No }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      SalesCrMemoHeader@1004 : Record 114;
      Currency@1005 : Record 4;
      DimMgt@1001 : Codeunit 408;
      DeferralUtilities@1000 : Codeunit 1720;

    [External]
    PROCEDURE GetCurrencyCode@1() : Code[10];
    BEGIN
      GetHeader;
      EXIT(SalesCrMemoHeader."Currency Code");
    END;

    [External]
    PROCEDURE ShowDimensions@25();
    BEGIN
      DimMgt.ShowDimensionSet("Dimension Set ID",STRSUBSTNO('%1 %2 %3',TABLECAPTION,"Document No.","Line No."));
    END;

    [External]
    PROCEDURE ShowItemTrackingLines@3();
    VAR
      ItemTrackingDocMgt@1000 : Codeunit 6503;
    BEGIN
      ItemTrackingDocMgt.ShowItemTrackingForInvoiceLine(RowID1);
    END;

    [External]
    PROCEDURE CalcVATAmountLines@2(SalesCrMemoHeader@1000 : Record 114;VAR TempVATAmountLine@1001 : TEMPORARY Record 290);
    BEGIN
      TempVATAmountLine.DELETEALL;
      SETRANGE("Document No.",SalesCrMemoHeader."No.");
      IF FIND('-') THEN
        REPEAT
          TempVATAmountLine.INIT;
          TempVATAmountLine.CopyFromSalesCrMemoLine(Rec);
          IF SalesCrMemoHeader."Prices Including VAT" THEN
            TempVATAmountLine."Prices Including VAT" := TRUE;
          TempVATAmountLine.InsertLine;
        UNTIL NEXT = 0;
    END;

    [External]
    PROCEDURE GetLineAmountExclVAT@149() : Decimal;
    BEGIN
      GetHeader;
      IF NOT SalesCrMemoHeader."Prices Including VAT" THEN
        EXIT("Line Amount");

      EXIT(ROUND("Line Amount" / (1 + "VAT %" / 100),Currency."Amount Rounding Precision"));
    END;

    [External]
    PROCEDURE GetLineAmountInclVAT@151() : Decimal;
    BEGIN
      GetHeader;
      IF SalesCrMemoHeader."Prices Including VAT" THEN
        EXIT("Line Amount");

      EXIT(ROUND("Line Amount" * (1 + "VAT %" / 100),Currency."Amount Rounding Precision"));
    END;

    LOCAL PROCEDURE GetHeader@15();
    BEGIN
      IF SalesCrMemoHeader."No." = "Document No." THEN
        EXIT;
      IF NOT SalesCrMemoHeader.GET("Document No.") THEN
        SalesCrMemoHeader.INIT;

      IF SalesCrMemoHeader."Currency Code" = '' THEN
        Currency.InitRoundingPrecision
      ELSE
        IF NOT Currency.GET(SalesCrMemoHeader."Currency Code") THEN
          Currency.InitRoundingPrecision;
    END;

    LOCAL PROCEDURE GetFieldCaption@31(FieldNumber@1000 : Integer) : Text[100];
    VAR
      Field@1001 : Record 2000000041;
    BEGIN
      Field.GET(DATABASE::"Sales Cr.Memo Line",FieldNumber);
      EXIT(Field."Field Caption");
    END;

    [External]
    PROCEDURE GetCaptionClass@34(FieldNumber@1000 : Integer) : Text[80];
    BEGIN
      GetHeader;
      CASE FieldNumber OF
        FIELDNO("No."):
          EXIT(STRSUBSTNO('3,%1',GetFieldCaption(FieldNumber)));
        ELSE BEGIN
          IF SalesCrMemoHeader."Prices Including VAT" THEN
            EXIT('2,1,' + GetFieldCaption(FieldNumber));
          EXIT('2,0,' + GetFieldCaption(FieldNumber));
        END
      END;
    END;

    [External]
    PROCEDURE RowID1@44() : Text[250];
    VAR
      ItemTrackingMgt@1000 : Codeunit 6500;
    BEGIN
      EXIT(ItemTrackingMgt.ComposeRowID(DATABASE::"Sales Cr.Memo Line",
          0,"Document No.",'',0,"Line No."));
    END;

    [External]
    PROCEDURE GetReturnRcptLines@4(VAR TempReturnRcptLine@1000 : TEMPORARY Record 6661);
    VAR
      ReturnRcptLine@1003 : Record 6661;
      ItemLedgEntry@1002 : Record 32;
      ValueEntry@1001 : Record 5802;
    BEGIN
      TempReturnRcptLine.RESET;
      TempReturnRcptLine.DELETEALL;

      IF Type <> Type::Item THEN
        EXIT;

      FilterPstdDocLineValueEntries(ValueEntry);
      ValueEntry.SETFILTER("Invoiced Quantity",'<>0');
      IF ValueEntry.FINDSET THEN
        REPEAT
          ItemLedgEntry.GET(ValueEntry."Item Ledger Entry No.");
          IF ItemLedgEntry."Document Type" = ItemLedgEntry."Document Type"::"Sales Return Receipt" THEN
            IF ReturnRcptLine.GET(ItemLedgEntry."Document No.",ItemLedgEntry."Document Line No.") THEN BEGIN
              TempReturnRcptLine.INIT;
              TempReturnRcptLine := ReturnRcptLine;
              IF TempReturnRcptLine.INSERT THEN;
            END;
        UNTIL ValueEntry.NEXT = 0;
    END;

    [External]
    PROCEDURE GetItemLedgEntries@6(VAR TempItemLedgEntry@1000 : TEMPORARY Record 32;SetQuantity@1003 : Boolean);
    VAR
      ItemLedgEntry@1002 : Record 32;
      ValueEntry@1001 : Record 5802;
    BEGIN
      IF SetQuantity THEN BEGIN
        TempItemLedgEntry.RESET;
        TempItemLedgEntry.DELETEALL;

        IF Type <> Type::Item THEN
          EXIT;
      END;

      FilterPstdDocLineValueEntries(ValueEntry);
      ValueEntry.SETFILTER("Invoiced Quantity",'<>0');
      IF ValueEntry.FINDSET THEN
        REPEAT
          ItemLedgEntry.GET(ValueEntry."Item Ledger Entry No.");
          TempItemLedgEntry := ItemLedgEntry;
          IF SetQuantity THEN BEGIN
            TempItemLedgEntry.Quantity := ValueEntry."Invoiced Quantity";
            IF ABS(TempItemLedgEntry."Shipped Qty. Not Returned") > ABS(TempItemLedgEntry.Quantity) THEN
              TempItemLedgEntry."Shipped Qty. Not Returned" := TempItemLedgEntry.Quantity;
          END;
          OnGetItemLedgEntriesOnBeforeTempItemLedgEntryInsert(TempItemLedgEntry,ValueEntry,SetQuantity);
          IF TempItemLedgEntry.INSERT THEN;
        UNTIL ValueEntry.NEXT = 0;
    END;

    [External]
    PROCEDURE FilterPstdDocLineValueEntries@7(VAR ValueEntry@1000 : Record 5802);
    BEGIN
      ValueEntry.RESET;
      ValueEntry.SETCURRENTKEY("Document No.");
      ValueEntry.SETRANGE("Document No.","Document No.");
      ValueEntry.SETRANGE("Document Type",ValueEntry."Document Type"::"Sales Credit Memo");
      ValueEntry.SETRANGE("Document Line No.","Line No.");
    END;

    [External]
    PROCEDURE ShowItemReturnRcptLines@9();
    VAR
      TempReturnRcptLine@1000 : TEMPORARY Record 6661;
    BEGIN
      IF Type = Type::Item THEN BEGIN
        GetReturnRcptLines(TempReturnRcptLine);
        PAGE.RUNMODAL(0,TempReturnRcptLine);
      END;
    END;

    [External]
    PROCEDURE ShowLineComments@5();
    VAR
      SalesCommentLine@1000 : Record 44;
    BEGIN
      SalesCommentLine.ShowComments(SalesCommentLine."Document Type"::"Posted Credit Memo","Document No.","Line No.");
    END;

    [External]
    PROCEDURE ShowShortcutDimCode@27(VAR ShortcutDimCode@1000 : ARRAY [8] OF Code[20]);
    BEGIN
      DimMgt.GetShortcutDimensions("Dimension Set ID",ShortcutDimCode);
    END;

    [External]
    PROCEDURE InitFromSalesLine@8(SalesCrMemoHeader@1001 : Record 114;SalesLine@1002 : Record 37);
    BEGIN
      INIT;
      TRANSFERFIELDS(SalesLine);
      IF ("No." = '') AND (Type IN [Type::"G/L Account"..Type::"Charge (Item)"]) THEN
        Type := Type::" ";
      "Posting Date" := SalesCrMemoHeader."Posting Date";
      "Document No." := SalesCrMemoHeader."No.";
      Quantity := SalesLine."Qty. to Invoice";
      "Quantity (Base)" := SalesLine."Qty. to Invoice (Base)";

      OnAfterInitFromSalesLine(Rec,SalesCrMemoHeader,SalesLine);
    END;

    [External]
    PROCEDURE ShowDeferrals@12();
    BEGIN
      DeferralUtilities.OpenLineScheduleView(
        "Deferral Code",DeferralUtilities.GetSalesDeferralDocType,'','',
        GetDocumentType,"Document No.","Line No.");
    END;

    [External]
    PROCEDURE GetDocumentType@13() : Integer;
    VAR
      SalesCommentLine@1000 : Record 44;
    BEGIN
      EXIT(SalesCommentLine."Document Type"::"Posted Credit Memo")
    END;

    [External]
    PROCEDURE HasTypeToFillMandatoryFields@103() : Boolean;
    BEGIN
      EXIT(Type <> Type::" ");
    END;

    [External]
    PROCEDURE FormatType@144() : Text;
    VAR
      SalesLine@1000 : Record 37;
    BEGIN
      IF Type = Type::" " THEN
        EXIT(SalesLine.FormatType);

      EXIT(FORMAT(Type));
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterInitFromSalesLine@10(VAR SalesCrMemoLine@1002 : Record 115;SalesCrMemoHeader@1000 : Record 114;SalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnGetItemLedgEntriesOnBeforeTempItemLedgEntryInsert@16(VAR TempItemLedgerEntry@1000 : TEMPORARY Record 32;ValueEntry@1001 : Record 5802;SetQuantity@1002 : Boolean);
    BEGIN
    END;

    BEGIN
    END.
  }
}

OBJECT Table 311 Sales & Receivables Setup
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=18:36:05;
    Modified=Yes;
    Version List=NAVW114.01,NAVES14.01,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Sales & Receivables Setup;
               ESP=Conf. ventas y cobros];
    LookupPageID=Page459;
    DrillDownPageID=Page459;
  }
  FIELDS
  {
    { 1   ;   ;Primary Key         ;Code10        ;CaptionML=[ENU=Primary Key;
                                                              ESP=Clave primaria] }
    { 2   ;   ;Discount Posting    ;Option        ;CaptionML=[ENU=Discount Posting;
                                                              ESP=Registro dto.];
                                                   OptionCaptionML=[ENU=No Discounts,Invoice Discounts,Line Discounts,All Discounts;
                                                                    ESP=Ninguno,Dto. factura,Dto. l¡nea,Todos];
                                                   OptionString=No Discounts,Invoice Discounts,Line Discounts,All Discounts }
    { 4   ;   ;Credit Warnings     ;Option        ;CaptionML=[ENU=Credit Warnings;
                                                              ESP=Advertencia cr‚dito];
                                                   OptionCaptionML=[ENU=Both Warnings,Credit Limit,Overdue Balance,No Warning;
                                                                    ESP=Ambos,L¡mite cr‚dito,Saldo vencido,Ninguno];
                                                   OptionString=Both Warnings,Credit Limit,Overdue Balance,No Warning }
    { 5   ;   ;Stockout Warning    ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Stockout Warning;
                                                              ESP=Advertencia falta stock] }
    { 6   ;   ;Shipment on Invoice ;Boolean       ;AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Shipment on Invoice;
                                                              ESP=Albar n al facturar] }
    { 7   ;   ;Invoice Rounding    ;Boolean       ;CaptionML=[ENU=Invoice Rounding;
                                                              ESP=Redondeo factura] }
    { 8   ;   ;Ext. Doc. No. Mandatory;Boolean    ;CaptionML=[ENU=Ext. Doc. No. Mandatory;
                                                              ESP=N§ doc. externo obligatorio] }
    { 9   ;   ;Customer Nos.       ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Customer Nos.;
                                                              ESP=N§ serie cliente] }
    { 10  ;   ;Quote Nos.          ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Quote Nos.;
                                                              ESP=N§ serie oferta] }
    { 11  ;   ;Order Nos.          ;Code20        ;TableRelation="No. Series";
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Order Nos.;
                                                              ESP=N§ ser. pedido] }
    { 12  ;   ;Invoice Nos.        ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Invoice Nos.;
                                                              ESP=N§ serie factura] }
    { 13  ;   ;Posted Invoice Nos. ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Posted Invoice Nos.;
                                                              ESP=N§ serie fact. registrada] }
    { 14  ;   ;Credit Memo Nos.    ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Credit Memo Nos.;
                                                              ESP=N§ serie abono] }
    { 15  ;   ;Posted Credit Memo Nos.;Code20     ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Posted Credit Memo Nos.;
                                                              ESP=N§ serie abono registrado] }
    { 16  ;   ;Posted Shipment Nos.;Code20        ;TableRelation="No. Series";
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Posted Shipment Nos.;
                                                              ESP=N§ serie alb. venta registrado] }
    { 17  ;   ;Reminder Nos.       ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Reminder Nos.;
                                                              ESP=N§ serie recordatorio] }
    { 18  ;   ;Issued Reminder Nos.;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Issued Reminder Nos.;
                                                              ESP=N£meros recordatorios emitidos] }
    { 19  ;   ;Fin. Chrg. Memo Nos.;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Fin. Chrg. Memo Nos.;
                                                              ESP=N§ serie doc. inter‚s] }
    { 20  ;   ;Issued Fin. Chrg. M. Nos.;Code20   ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Issued Fin. Chrg. M. Nos.;
                                                              ESP=N§ serie doc. inter‚s emitido] }
    { 21  ;   ;Posted Prepmt. Inv. Nos.;Code20    ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Posted Prepmt. Inv. Nos.;
                                                              ESP=N§ fact. prepago registrada] }
    { 22  ;   ;Posted Prepmt. Cr. Memo Nos.;Code20;TableRelation="No. Series";
                                                   CaptionML=[ENU=Posted Prepmt. Cr. Memo Nos.;
                                                              ESP=N§ abono prepago registrado] }
    { 23  ;   ;Blanket Order Nos.  ;Code20        ;TableRelation="No. Series";
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Blanket Order Nos.;
                                                              ESP=N§ serie pedido abierto] }
    { 24  ;   ;Calc. Inv. Discount ;Boolean       ;CaptionML=[ENU=Calc. Inv. Discount;
                                                              ESP=Calc. dto. factura] }
    { 25  ;   ;Appln. between Currencies;Option   ;AccessByPermission=TableData 4=R;
                                                   CaptionML=[ENU=Appln. between Currencies;
                                                              ESP=Liquidaci¢n entre divisas];
                                                   OptionCaptionML=[ENU=None,EMU,All;
                                                                    ESP=Ninguna,UME,Todas];
                                                   OptionString=None,EMU,All }
    { 26  ;   ;Copy Comments Blanket to Order;Boolean;
                                                   InitValue=Yes;
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Copy Comments Blanket to Order;
                                                              ESP=Copiar coment. ped. abto a ped.] }
    { 27  ;   ;Copy Comments Order to Invoice;Boolean;
                                                   InitValue=Yes;
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Copy Comments Order to Invoice;
                                                              ESP=Copiar coment. pedido a factura] }
    { 28  ;   ;Copy Comments Order to Shpt.;Boolean;
                                                   InitValue=Yes;
                                                   AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Copy Comments Order to Shpt.;
                                                              ESP=Copiar coment. ped. a alb. venta] }
    { 29  ;   ;Allow VAT Difference;Boolean       ;CaptionML=[ENU=Allow VAT Difference;
                                                              ESP=Permitir diferen. IVA] }
    { 30  ;   ;Calc. Inv. Disc. per VAT ID;Boolean;CaptionML=[ENU=Calc. Inv. Disc. per VAT ID;
                                                              ESP=Calc. dto. fra. por ID IVA] }
    { 31  ;   ;Logo Position on Documents;Option  ;CaptionML=[ENU=Logo Position on Documents;
                                                              ESP=Posici¢n logo documentos];
                                                   OptionCaptionML=[ENU=No Logo,Left,Center,Right;
                                                                    ESP=Sin logo,Izquierda,Centro,Derecha];
                                                   OptionString=No Logo,Left,Center,Right }
    { 32  ;   ;Check Prepmt. when Posting;Boolean ;CaptionML=[ENU=Check Prepmt. when Posting;
                                                              ESP=Comprobar prepago al registrar] }
    { 33  ;   ;Prepmt. Auto Update Frequency;Option;
                                                   OnValidate=VAR
                                                                PrepaymentMgt@1000 : Codeunit 441;
                                                              BEGIN
                                                                IF "Prepmt. Auto Update Frequency" = xRec."Prepmt. Auto Update Frequency" THEN
                                                                  EXIT;

                                                                PrepaymentMgt.CreateAndStartJobQueueEntrySales("Prepmt. Auto Update Frequency");
                                                              END;

                                                   DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Prepmt. Auto Update Frequency;
                                                              ESP=Frecuencia de actualizaci¢n autom tica prepago];
                                                   OptionCaptionML=[ENU=Never,Daily,Weekly;
                                                                    ESP=Nunca,A diario,Semanal];
                                                   OptionString=Never,Daily,Weekly }
    { 35  ;   ;Default Posting Date;Option        ;CaptionML=[ENU=Default Posting Date;
                                                              ESP=Fecha registro predeterminada];
                                                   OptionCaptionML=[ENU=Work Date,No Date;
                                                                    ESP=Fecha de trabajo,Sin fecha];
                                                   OptionString=Work Date,No Date }
    { 36  ;   ;Default Quantity to Ship;Option    ;AccessByPermission=TableData 110=R;
                                                   CaptionML=[ENU=Default Quantity to Ship;
                                                              ESP=Cantidad predeterminada para enviar];
                                                   OptionCaptionML=[ENU=Remainder,Blank;
                                                                    ESP=Restante,En blanco];
                                                   OptionString=Remainder,Blank }
    { 37  ;   ;Archive Quotes and Orders;Boolean  ;ObsoleteState=Pending;
                                                   ObsoleteReason=Replaced by new fields Archive Quotes and Archive Orders;
                                                   CaptionML=[ENU=Archive Quotes and Orders;
                                                              ESP=Archivar ofertas y pedidos] }
    { 38  ;   ;Post with Job Queue ;Boolean       ;CaptionML=[ENU=Post with Job Queue;
                                                              ESP=Registrar con cola de proyectos] }
    { 39  ;   ;Job Queue Category Code;Code10     ;TableRelation="Job Queue Category";
                                                   CaptionML=[ENU=Job Queue Category Code;
                                                              ESP=C¢d. categor¡a cola proyectos] }
    { 40  ;   ;Job Queue Priority for Post;Integer;InitValue=1000;
                                                   OnValidate=BEGIN
                                                                IF "Job Queue Priority for Post" < 0 THEN
                                                                  ERROR(Text001);
                                                              END;

                                                   CaptionML=[ENU=Job Queue Priority for Post;
                                                              ESP=Prioridad cola proyectos para registro];
                                                   MinValue=0 }
    { 41  ;   ;Post & Print with Job Queue;Boolean;CaptionML=[ENU=Post & Print with Job Queue;
                                                              ESP=Registrar e imprimir con cola de proyectos] }
    { 42  ;   ;Job Q. Prio. for Post & Print;Integer;
                                                   InitValue=1000;
                                                   OnValidate=BEGIN
                                                                IF "Job Queue Priority for Post" < 0 THEN
                                                                  ERROR(Text001);
                                                              END;

                                                   CaptionML=[ENU=Job Q. Prio. for Post & Print;
                                                              ESP=Prio. cola proyectos para registro e impresi¢n];
                                                   MinValue=0 }
    { 43  ;   ;Notify On Success   ;Boolean       ;CaptionML=[ENU=Notify On Success;
                                                              ESP=Notificar operaci¢n correcta] }
    { 44  ;   ;VAT Bus. Posting Gr. (Price);Code20;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=VAT Bus. Posting Gr. (Price);
                                                              ESP=Gr.regis. IVA negocio (precio)] }
    { 45  ;   ;Direct Debit Mandate Nos.;Code20   ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Direct Debit Mandate Nos.;
                                                              ESP=N§ de ¢rdenes de domiciliaci¢n de adeudo directo] }
    { 46  ;   ;Allow Document Deletion Before;Date;CaptionML=[ENU=Allow Document Deletion Before;
                                                              ESP=Permitir eliminar documentos anteriores a] }
    { 50  ;   ;Default Item Quantity;Boolean      ;CaptionML=[ENU=Default Item Quantity;
                                                              ESP=Cantidad de producto predeterminada] }
    { 51  ;   ;Create Item from Description;Boolean;
                                                   CaptionML=[ENU=Create Item from Description;
                                                              ESP=Crear art¡culo a partir de la descripci¢n] }
    { 52  ;   ;Archive Quotes      ;Option        ;CaptionML=[ENU=Archive Quotes;
                                                              ESP=Archivar ofertas];
                                                   OptionCaptionML=[ENU=Never,Question,Always;
                                                                    ESP=Nunca,Preguntar,Siempre];
                                                   OptionString=Never,Question,Always }
    { 53  ;   ;Archive Orders      ;Boolean       ;CaptionML=[ENU=Archive Orders;
                                                              ESP=Archivar pedidos] }
    { 54  ;   ;Archive Blanket Orders;Boolean     ;CaptionML=[ENU=Archive Blanket Orders;
                                                              ESP=Archivar pedidos abiertos] }
    { 55  ;   ;Archive Return Orders;Boolean      ;CaptionML=[ENU=Archive Return Orders;
                                                              ESP=Archivar devoluciones] }
    { 57  ;   ;Create Item from Item No.;Boolean  ;CaptionML=[ENU=Create Item from Item No.;
                                                              ESP=Crear producto a partir del n£mero de producto] }
    { 58  ;   ;Copy Customer Name to Entries;Boolean;
                                                   OnValidate=VAR
                                                                CustEntryEdit@1000 : Codeunit 103;
                                                              BEGIN
                                                                IF "Copy Customer Name to Entries" THEN
                                                                  CustEntryEdit.UpdateCustomerNamesInLedgerEntries;
                                                              END;

                                                   CaptionML=[ENU=Copy Customer Name to Entries;
                                                              ESP=Copiar el nombre del cliente en movimientos] }
    { 60  ;   ;Batch Archiving Quotes;Boolean     ;CaptionML=[ENU=Batch Archiving Quotes;
                                                              ESP=Archivado por lotes de ofertas] }
    { 61  ;   ;Ignore Updated Addresses;Boolean   ;CaptionML=[ENU=Ignore Updated Addresses;
                                                              ESP=Omitirÿdirecciones actualizadas] }
    { 65  ;   ;Skip Manual Reservation;Boolean    ;DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Skip Manual Reservation;
                                                              ESP=Omitir reserva manual] }
    { 170 ;   ;Insert Std. Sales Lines Mode;Option;ObsoleteState=Pending;
                                                   ObsoleteReason=Not needed after refactoring;
                                                   DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Insert Std. Sales Lines Mode;
                                                              ESP=Insertar modo de l¡neas de ventas est ndar];
                                                   OptionCaptionML=[ENU=Manual,Automatic,Always Ask;
                                                                    ESP=Manual,Autom tica,Preguntar siempre];
                                                   OptionString=Manual,Automatic,Always Ask }
    { 171 ;   ;Insert Std. Lines on Quotes;Boolean;ObsoleteState=Pending;
                                                   ObsoleteReason=Not needed after refactoring;
                                                   DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Insert Std. Lines on Quotes;
                                                              ESP=Insertar l¡neas est ndar en ofertas] }
    { 172 ;   ;Insert Std. Lines on Orders;Boolean;ObsoleteState=Pending;
                                                   ObsoleteReason=Not needed after refactoring;
                                                   DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Insert Std. Lines on Orders;
                                                              ESP=Insertar l¡neas est ndar en pedidos] }
    { 173 ;   ;Insert Std. Lines on Invoices;Boolean;
                                                   ObsoleteState=Pending;
                                                   ObsoleteReason=Not needed after refactoring;
                                                   DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Insert Std. Lines on Invoices;
                                                              ESP=Insertar l¡neas est ndar en facturas] }
    { 174 ;   ;Insert Std. Lines on Cr. Memos;Boolean;
                                                   ObsoleteState=Pending;
                                                   ObsoleteReason=Not needed after refactoring;
                                                   DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Insert Std. Lines on Cr. Memos;
                                                              ESP=Insertar l¡neas est ndar en abonos] }
    { 200 ;   ;Quote Validity Calculation;DateFormula;
                                                   DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Quote Validity Calculation;
                                                              ESP=C lculo de validez de la oferta] }
    { 5329;   ;Write-in Product Type;Option       ;CaptionML=[ENU=Write-in Product Type;
                                                              ESP=Tipo de producto fuera de cat logo];
                                                   OptionCaptionML=[ENU=Item,Resource;
                                                                    ESP=Producto,Recurso];
                                                   OptionString=Item,Resource }
    { 5330;   ;Write-in Product No.;Code20        ;TableRelation=IF (Write-in Product Type=CONST(Item)) Item.No. WHERE (Type=FILTER(Service|Non-Inventory))
                                                                 ELSE IF (Write-in Product Type=CONST(Resource)) Resource.No.;
                                                   CaptionML=[ENU=Write-in Product No.;
                                                              ESP=N.§ de producto fuera de cat logo] }
    { 5800;   ;Posted Return Receipt Nos.;Code20  ;TableRelation="No. Series";
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Posted Return Receipt Nos.;
                                                              ESP=N§ serie recep. devol. regis.] }
    { 5801;   ;Copy Cmts Ret.Ord. to Ret.Rcpt;Boolean;
                                                   InitValue=Yes;
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Copy Cmts Ret.Ord. to Ret.Rcpt;
                                                              ESP=Copiar coment. dev. a recep. dev.] }
    { 5802;   ;Copy Cmts Ret.Ord. to Cr. Memo;Boolean;
                                                   InitValue=Yes;
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Copy Cmts Ret.Ord. to Cr. Memo;
                                                              ESP=Copiar coment. dev. a abono] }
    { 6600;   ;Return Order Nos.   ;Code20        ;TableRelation="No. Series";
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Return Order Nos.;
                                                              ESP=N§ serie devoluci¢n] }
    { 6601;   ;Return Receipt on Credit Memo;Boolean;
                                                   AccessByPermission=TableData 6660=R;
                                                   CaptionML=[ENU=Return Receipt on Credit Memo;
                                                              ESP=Recep. dev. en abono] }
    { 6602;   ;Exact Cost Reversing Mandatory;Boolean;
                                                   CaptionML=[ENU=Exact Cost Reversing Mandatory;
                                                              ESP=Coste exacto devol. obligatorio] }
    { 7101;   ;Customer Group Dimension Code;Code20;
                                                   TableRelation=Dimension;
                                                   CaptionML=[ENU=Customer Group Dimension Code;
                                                              ESP=C¢d. dimensi¢n grupo clientes] }
    { 7102;   ;Salesperson Dimension Code;Code20  ;TableRelation=Dimension;
                                                   CaptionML=[ENU=Salesperson Dimension Code;
                                                              ESP=C¢d. dimensi¢n vendedor] }
    { 7103;   ;Freight G/L Acc. No.;Code20        ;TableRelation="G/L Account";
                                                   OnValidate=BEGIN
                                                                CheckGLAccPostingTypeBlockedAndGenProdPostingType("Freight G/L Acc. No.");
                                                              END;

                                                   CaptionML=[ENU=Freight G/L Acc. No.;
                                                              ESP=N.§ de cuenta de flete] }
    { 10700;  ;Post Invoice Discount;Boolean      ;CaptionML=[ENU=Post Invoice Discount;
                                                              ESP=Registro dto. factura] }
    { 10701;  ;Post Line Discount  ;Boolean       ;CaptionML=[ENU=Post Line Discount;
                                                              ESP=Registro dto. l¡nea] }
    { 10702;  ;Post Payment Discount;Boolean      ;OnValidate=BEGIN
                                                                IF "Post Payment Discount" THEN BEGIN
                                                                  GLSetup.GET;
                                                                  GLSetup.TESTFIELD("Payment Discount Type",GLSetup."Payment Discount Type"::"Calc. Pmt. Disc. on Lines");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Post Payment Discount;
                                                              ESP=Registro dto. P.P.] }
    { 10705;  ;Correct. Doc. No. Mandatory;Boolean;CaptionML=[ENU=Correct. Doc. No. Mandatory;
                                                              ESP=N.§ doc. correg. obligatorio] }
    { 50002;  ;Bloqueo margen m¡nimo ventas;Boolean;
                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0034 }
    { 50003;  ;Omitir facturar en pedido;Boolean  ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0038 }
    { 50004;  ;Comisi¢n obligatoria;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0025 }
    { 50010;  ;Prom. oblig. l¡ns.importe cero;Boolean;
                                                   DataClassification=ToBeClassified;
                                                   Description=BAIN-0049 }
    { 7014650;;No. serie muestras  ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. samples series;
                                                              ESP=No. serie muestras];
                                                   Description=VNTES }
    { 7014651;;No. serie muestras reg.;Code20     ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. samples series reg.;
                                                              ESP=No. serie muestras reg.];
                                                   Description=VNTES }
    { 7014652;;Grupo negocio muestras;Code20      ;TableRelation="Gen. Business Posting Group".Code;
                                                   OnValidate=BEGIN
                                                                GestTablasVentas.T311OnValidateGrupoNegocioMues(Rec,xRec); //  VNTES
                                                              END;

                                                   CaptionML=[ENU=Business group samples;
                                                              ESP=Grupo negocio muestras];
                                                   Description=VNTES }
    { 7014653;;Grupo IVA negocio muestras;Code20  ;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=Business Group IVA samples;
                                                              ESP=Grupo IVA negocio muestras];
                                                   Description=VNTES }
    { 7014654;;C¢d. tarifa muestras;Code10        ;TableRelation="Customer Price Group";
                                                   CaptionML=[ENU=Cod. sample rate;
                                                              ESP=C¢d. tarifa muestras];
                                                   Description=VNTES }
    { 7014811;;Calc. dto. promocional (F9);Boolean;CaptionML=[ENU=Calc. Dto. Promotional (F9);
                                                              ESP=Calc. dto. promocional (F9);
                                                              PTG=Calc. Dto. Promocional];
                                                   Description=VNTES }
    { 7014812;;Registro dto. promocional;Boolean  ;CaptionML=[ENU=Register dto. Promotional;
                                                              ESP=Registro dto. promocional;
                                                              PTG=Registo Dto. Promocional];
                                                   Description=VNTES }
    { 7014813;;Aviso promoci¢n otras medidas;Boolean;
                                                   CaptionML=[ENU=Notice promoting other measures;
                                                              ESP=Aviso promoci¢n otras medidas];
                                                   Description=VNTES }
    { 7014814;;Aviso promoc. cliente gen‚rico;Boolean;
                                                   CaptionML=[ENU=Notice promoc. generic client;
                                                              ESP=Aviso promoc. cliente gen‚rico];
                                                   Description=VNTES }
    { 7014815;;No. serie orden de carga;Code20    ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Serial No. load order;
                                                              ESP=No. serie orden de carga];
                                                   Description=VNTES }
    { 7014816;;Ruta imp. datos terminal;Text250   ;CaptionML=[ENU=Route imp. data terminal;
                                                              ESP=Ruta imp. datos terminal];
                                                   Description=VNTES }
    { 7014817;;Calcular IIEE       ;Boolean       ;CaptionML=[ENU=Calculate IISS;
                                                              ESP=Calcular IIEE];
                                                   Description=VNTES }
    { 7014818;;Registro IIEE       ;Boolean       ;CaptionML=[ENU=Register IISS;
                                                              ESP=Registro IIEE];
                                                   Description=VNTES }
    { 7014819;;Tipo IIEE           ;Option        ;CaptionML=[ENU=Type IISS;
                                                              ESP=Tipo IIEE];
                                                   OptionCaptionML=[ENU=Including price,excl price;
                                                                    ESP=Incluido precio,Excluido precio];
                                                   OptionString=Incluido precio,Excluido precio;
                                                   Description=VNTES }
    { 7014820;;Calcular IIEE por botellas;Boolean ;CaptionML=[ENU=Calculate IISS for bottles;
                                                              ESP=Calcular IIEE por botellas];
                                                   Description=VNTES }
    { 7014823;;No. serie pagos traspasados;Code20 ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Serial No payments transferred;
                                                              ESP=No. serie pagos traspasados];
                                                   Description=VNTES }
    { 7014830;;C¢d. concepto cargo rappell;Code10 ;TableRelation="Concepto de cargo cadena".C¢digo;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Usar conceptos de cargo"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Cod. concept rappell charge;
                                                              ESP=C¢d. concepto cargo rappell];
                                                   Description=VNTES }
    { 7014831;;C¢d. concepto cargo ventas;Code10  ;TableRelation="Concepto de cargo cadena".C¢digo;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Usar conceptos de cargo"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Cod. concept sales charge;
                                                              ESP=C¢d. concepto cargo ventas];
                                                   Description=VNTES }
    { 7014832;;C¢d. concepto cargo dto. fact.;Code10;
                                                   TableRelation="Concepto de cargo cadena".C¢digo;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Usar conceptos de cargo"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Cod. concept dto charge. fact.;
                                                              ESP=C¢d. concepto cargo dto. fact.];
                                                   Description=VNTES }
    { 7014833;;C¢d. concepto cargo dto. P.P.;Code10;
                                                   TableRelation="Concepto de cargo cadena".C¢digo;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Usar conceptos de cargo"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Cod. concept dto charge. P. P.;
                                                              ESP=C¢d. concepto cargo dto. P.P.];
                                                   Description=VNTES }
    { 7014834;;C¢d. concepto cargo dto. l¡nea;Code10;
                                                   TableRelation="Concepto de cargo cadena".C¢digo;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Usar conceptos de cargo"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Cod. concept dto charge. line;
                                                              ESP=C¢d. concepto cargo dto. l¡nea];
                                                   Description=VNTES }
    { 7014835;;C¢d. concepto cargo dto. prom.;Code10;
                                                   TableRelation="Concepto de cargo cadena".C¢digo;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Usar conceptos de cargo"); // VNTES
                                                              END;

                                                   CaptionML=[ENU=Cod. concept dto charge. prom.;
                                                              ESP=C¢d. concepto cargo dto. prom.];
                                                   Description=VNTES }
    { 7014836;;Usar conceptos de cargo;Boolean    ;OnValidate=BEGIN
                                                                GestTablasVentas.T311OnValidateUsarConceptos(Rec,xRec); //  VNTES
                                                              END;

                                                   CaptionML=[ENU=Using concepts of charge;
                                                              ESP=Usar conceptos de cargo];
                                                   Description=VNTES }
  }
  KEYS
  {
    {    ;Primary Key                             ;Clustered=Yes }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Text001@1000 : TextConst 'ENU=Job Queue Priority must be zero or positive.;ESP=La prioridad de la cola de proyecto debe ser cero o positiva.';
      GLSetup@1100000 : Record 98;
      GestTablasVentas@1170170000 : Codeunit 7014613;
      RecordHasBeenRead@1001 : Boolean;

    [External]
    PROCEDURE GetRecordOnce@3();
    BEGIN
      IF RecordHasBeenRead THEN
        EXIT;
      GET;
      RecordHasBeenRead := TRUE;
    END;

    [External]
    PROCEDURE GetLegalStatement@11() : Text;
    BEGIN
      EXIT('');
    END;

    [External]
    PROCEDURE JobQueueActive@1() : Boolean;
    BEGIN
      GET;
      EXIT("Post with Job Queue" OR "Post & Print with Job Queue");
    END;

    LOCAL PROCEDURE CheckGLAccPostingTypeBlockedAndGenProdPostingType@2(AccNo@1000 : Code[20]);
    VAR
      GLAcc@1002 : Record 15;
    BEGIN
      IF AccNo <> '' THEN BEGIN
        GLAcc.GET(AccNo);
        GLAcc.CheckGLAcc;
        GLAcc.TESTFIELD("Gen. Prod. Posting Group");
      END;
    END;

    BEGIN
    END.
  }
}

OBJECT Table 7012 Purchase Price
{
  OBJECT-PROPERTIES
  {
    Date=30/04/20;
    Time=11:17:07;
    Modified=Yes;
    Version List=NAVW114.00,UPG365,BAN;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               TESTFIELD("Vendor No.");
               TESTFIELD("Item No.");
             END;

    OnRename=BEGIN
               TESTFIELD("Vendor No.");
               TESTFIELD("Item No.");
             END;

    CaptionML=[ENU=Purchase Price;
               ESP=Precio compra];
    LookupPageID=Page7012;
  }
  FIELDS
  {
    { 1   ;   ;Item No.            ;Code20        ;TableRelation=Item;
                                                   OnValidate=BEGIN
                                                                IF "Item No." <> xRec."Item No." THEN BEGIN
                                                                  "Unit of Measure Code" := '';
                                                                  "Variant Code" := '';
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Item No.;
                                                              ESP=N§ producto];
                                                   NotBlank=Yes }
    { 2   ;   ;Vendor No.          ;Code20        ;TableRelation=Vendor;
                                                   OnValidate=BEGIN
                                                                IF Vend.GET("Vendor No.") THEN
                                                                  "Currency Code" := Vend."Currency Code";
                                                              END;

                                                   CaptionML=[ENU=Vendor No.;
                                                              ESP=N§ proveedor];
                                                   NotBlank=Yes }
    { 3   ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa] }
    { 4   ;   ;Starting Date       ;Date          ;OnValidate=BEGIN
                                                                IF ("Starting Date" > "Ending Date") AND ("Ending Date" <> 0D) THEN
                                                                  ERROR(Text000,FIELDCAPTION("Starting Date"),FIELDCAPTION("Ending Date"));
                                                              END;

                                                   CaptionML=[ENU=Starting Date;
                                                              ESP=Fecha inicial] }
    { 5   ;   ;Direct Unit Cost    ;Decimal       ;CaptionML=[ENU=Direct Unit Cost;
                                                              ESP=Coste unit. directo];
                                                   MinValue=0;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
    { 14  ;   ;Minimum Quantity    ;Decimal       ;CaptionML=[ENU=Minimum Quantity;
                                                              ESP=Cantidad m¡nima];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 15  ;   ;Ending Date         ;Date          ;OnValidate=BEGIN
                                                                VALIDATE("Starting Date");
                                                              END;

                                                   CaptionML=[ENU=Ending Date;
                                                              ESP=Fecha final] }
    { 5400;   ;Unit of Measure Code;Code10        ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(Item No.));
                                                   CaptionML=[ENU=Unit of Measure Code;
                                                              ESP=C¢d. unidad medida] }
    { 5700;   ;Variant Code        ;Code10        ;TableRelation="Item Variant".Code WHERE (Item No.=FIELD(Item No.));
                                                   CaptionML=[ENU=Variant Code;
                                                              ESP=C¢d. variante] }
    { 50000;  ;Rappell 1 %         ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0053 }
    { 50001;  ;Rappell 2 %         ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0053 }
    { 50002;  ;Rappell 3 %         ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0053 }
    { 50003;  ;Precio cargo 1      ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0063;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
    { 50004;  ;Precio cargo 2      ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0063;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
  }
  KEYS
  {
    {    ;Item No.,Vendor No.,Starting Date,Currency Code,Variant Code,Unit of Measure Code,Minimum Quantity;
                                                   Clustered=Yes }
    {    ;Vendor No.,Item No.,Starting Date,Currency Code,Variant Code,Unit of Measure Code,Minimum Quantity }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Vend@1000 : Record 23;
      Text000@1004 : TextConst 'ENU=%1 cannot be after %2;ESP=%1 no puede ser posterior %2';

    [External]
    PROCEDURE CopyPurchPriceToVendorsPurchPrice@3(VAR PurchPrice@1000 : Record 7012;VendNo@1002 : Code[20]);
    VAR
      NewPurchasePrice@1001 : Record 7012;
    BEGIN
      IF PurchPrice.FINDSET THEN
        REPEAT
          NewPurchasePrice := PurchPrice;
          NewPurchasePrice."Vendor No." := VendNo;
          OnBeforeNewPurchasePriceInsert(NewPurchasePrice,PurchPrice);
          IF NewPurchasePrice.INSERT THEN;
        UNTIL PurchPrice.NEXT = 0;
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeNewPurchasePriceInsert@1(VAR NewPurchasePrice@1000 : Record 7012;PurchasePrice@1001 : Record 7012);
    BEGIN
    END;

    BEGIN
    {

      BAINES
      ======================
      BAIN-0063 JA 150508 Se a¤aden los campos: "Precio cargo 1","Precio cargo 2"
    }
    END.
  }
}

OBJECT Table 7023 Sales Price Worksheet
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=11:34:06;
    Modified=Yes;
    Version List=NAVW114.05,BAN;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               IF "Sales Type" = "Sales Type"::"All Customers" THEN
                 "Sales Code" := ''
               ELSE
                 TESTFIELD("Sales Code");
               TESTFIELD("Item No.");
             END;

    OnRename=BEGIN
               IF "Sales Type" <> "Sales Type"::"All Customers" THEN
                 TESTFIELD("Sales Code");
               TESTFIELD("Item No.");
             END;

    CaptionML=[ENU=Sales Price Worksheet;
               ESP=Hoja precios venta];
  }
  FIELDS
  {
    { 1   ;   ;Item No.            ;Code20        ;TableRelation=Item;
                                                   OnValidate=BEGIN
                                                                IF "Item No." <> xRec."Item No." THEN BEGIN
                                                                  "Unit of Measure Code" := '';
                                                                  "Variant Code" := '';
                                                                END;

                                                                IF "Sales Type" = "Sales Type"::"Customer Price Group" THEN
                                                                  IF CustPriceGr.GET("Sales Code") AND
                                                                     (CustPriceGr."Allow Invoice Disc." <> "Allow Invoice Disc.")
                                                                  THEN
                                                                    IF Item.GET("Item No.") THEN
                                                                      "Allow Invoice Disc." := Item."Allow Invoice Disc.";

                                                                CalcCurrentPrice(PriceAlreadyExists);
                                                              END;

                                                   CaptionML=[ENU=Item No.;
                                                              ESP=N§ producto];
                                                   NotBlank=Yes }
    { 2   ;   ;Sales Code          ;Code20        ;TableRelation=IF (Sales Type=CONST(Customer Price Group)) "Customer Price Group"
                                                                 ELSE IF (Sales Type=CONST(Customer)) Customer
                                                                 ELSE IF (Sales Type=CONST(Campaign)) Campaign;
                                                   OnValidate=BEGIN
                                                                IF ("Sales Code" <> '') AND ("Sales Type" = "Sales Type"::"All Customers") THEN
                                                                  ERROR(Text001,FIELDCAPTION("Sales Code"));

                                                                SetSalesDescription;
                                                                CalcCurrentPrice(PriceAlreadyExists);

                                                                IF ("Sales Code" = '') AND ("Sales Type" <> "Sales Type"::"All Customers") THEN
                                                                  EXIT;

                                                                IF NOT PriceAlreadyExists AND ("Sales Code" <> '') THEN
                                                                  CASE "Sales Type" OF
                                                                    "Sales Type"::"Customer Price Group":
                                                                      BEGIN
                                                                        CustPriceGr.GET("Sales Code");
                                                                        "Price Includes VAT" := CustPriceGr."Price Includes VAT";
                                                                        "VAT Bus. Posting Gr. (Price)" := CustPriceGr."VAT Bus. Posting Gr. (Price)";
                                                                        "Allow Line Disc." := CustPriceGr."Allow Line Disc.";
                                                                        "Allow Invoice Disc." := CustPriceGr."Allow Invoice Disc.";
                                                                      END;
                                                                    "Sales Type"::Customer:
                                                                      BEGIN
                                                                        Cust.GET("Sales Code");
                                                                        "Currency Code" := Cust."Currency Code";
                                                                        "Price Includes VAT" := Cust."Prices Including VAT";
                                                                        "Allow Line Disc." := Cust."Allow Line Disc.";
                                                                      END;
                                                                    "Sales Type"::Campaign:
                                                                      BEGIN
                                                                        Campaign.GET("Sales Code");
                                                                        "Starting Date" := Campaign."Starting Date";
                                                                        "Ending Date" := Campaign."Ending Date";
                                                                      END;
                                                                  END;
                                                              END;

                                                   CaptionML=[ENU=Sales Code;
                                                              ESP=C¢digo ventas] }
    { 3   ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   OnValidate=BEGIN
                                                                CalcCurrentPrice(PriceAlreadyExists);
                                                              END;

                                                   CaptionML=[ENU=Currency Code;
                                                              ESP=C¢d. divisa] }
    { 4   ;   ;Starting Date       ;Date          ;OnValidate=BEGIN
                                                                IF ("Starting Date" > "Ending Date") AND ("Ending Date" <> 0D) THEN
                                                                  ERROR(Text000,FIELDCAPTION("Starting Date"),FIELDCAPTION("Ending Date"));

                                                                IF CurrFieldNo <> 0 THEN
                                                                  IF "Sales Type" = "Sales Type"::Campaign THEN
                                                                    ERROR(Text002,FIELDCAPTION("Starting Date"),FIELDCAPTION("Ending Date"),FIELDCAPTION("Sales Type"),"Sales Type");

                                                                CalcCurrentPrice(PriceAlreadyExists);
                                                              END;

                                                   CaptionML=[ENU=Starting Date;
                                                              ESP=Fecha inicial] }
    { 5   ;   ;Current Unit Price  ;Decimal       ;CaptionML=[ENU=Current Unit Price;
                                                              ESP=Precio venta actual];
                                                   MinValue=0;
                                                   Editable=No;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
    { 6   ;   ;New Unit Price      ;Decimal       ;CaptionML=[ENU=New Unit Price;
                                                              ESP=Nuevo precio venta];
                                                   MinValue=0;
                                                   AutoFormatType=2;
                                                   AutoFormatExpr="Currency Code" }
    { 7   ;   ;Price Includes VAT  ;Boolean       ;CaptionML=[ENU=Price Includes VAT;
                                                              ESP=Precio IVA incluido] }
    { 10  ;   ;Allow Invoice Disc. ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Invoice Disc.;
                                                              ESP=Permitir dto. factura] }
    { 11  ;   ;VAT Bus. Posting Gr. (Price);Code20;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=VAT Bus. Posting Gr. (Price);
                                                              ESP=Gr.regis. IVA negocio (precio)] }
    { 13  ;   ;Sales Type          ;Option        ;OnValidate=BEGIN
                                                                IF "Sales Type" <> xRec."Sales Type" THEN
                                                                  VALIDATE("Sales Code",'');
                                                              END;

                                                   CaptionML=[ENU=Sales Type;
                                                              ESP=Tipo venta];
                                                   OptionCaptionML=[ENU=Customer,Customer Price Group,All Customers,Campaign;
                                                                    ESP=Cliente,Grupo precio cliente,Todos clientes,Campa¤a];
                                                   OptionString=Customer,Customer Price Group,All Customers,Campaign }
    { 14  ;   ;Minimum Quantity    ;Decimal       ;OnValidate=BEGIN
                                                                CalcCurrentPrice(PriceAlreadyExists);
                                                              END;

                                                   CaptionML=[ENU=Minimum Quantity;
                                                              ESP=Cantidad m¡nima];
                                                   MinValue=0 }
    { 15  ;   ;Ending Date         ;Date          ;OnValidate=BEGIN
                                                                VALIDATE("Starting Date");

                                                                IF CurrFieldNo <> 0 THEN
                                                                  IF "Sales Type" = "Sales Type"::Campaign THEN
                                                                    ERROR(Text002,FIELDCAPTION("Starting Date"),FIELDCAPTION("Ending Date"),FIELDCAPTION("Sales Type"),"Sales Type");
                                                              END;

                                                   CaptionML=[ENU=Ending Date;
                                                              ESP=Fecha final] }
    { 20  ;   ;Item Description    ;Text100       ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Item.Description WHERE (No.=FIELD(Item No.)));
                                                   CaptionML=[ENU=Item Description;
                                                              ESP=Descripci¢n producto] }
    { 21  ;   ;Sales Description   ;Text100       ;CaptionML=[ENU=Sales Description;
                                                              ESP=Descripci¢n ventas] }
    { 5400;   ;Unit of Measure Code;Code10        ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(Item No.));
                                                   OnValidate=BEGIN
                                                                CalcCurrentPrice(PriceAlreadyExists);
                                                              END;

                                                   CaptionML=[ENU=Unit of Measure Code;
                                                              ESP=C¢d. unidad medida] }
    { 5700;   ;Variant Code        ;Code10        ;TableRelation="Item Variant".Code WHERE (Item No.=FIELD(Item No.));
                                                   OnValidate=BEGIN
                                                                CalcCurrentPrice(PriceAlreadyExists);
                                                              END;

                                                   CaptionML=[ENU=Variant Code;
                                                              ESP=C¢d. variante] }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Allow Line Disc.;
                                                              ESP=Permite dto. l¡nea] }
    { 50000;  ;Cambio coste tarifa ;Boolean       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0014 }
    { 50001;  ;Coste tarifa actual ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Item."Precio coste tarifa" WHERE (No.=FIELD(Item No.)));
                                                   Description=BAIN-0014;
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 50002;  ;Precio £ltima compra;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Item."Last Direct Cost" WHERE (No.=FIELD(Item No.)));
                                                   Description=BAIN-0014;
                                                   Editable=No }
    { 50003;  ;Coste tarifa nuevo  ;Decimal       ;DataClassification=ToBeClassified;
                                                   Description=BAIN-0014;
                                                   AutoFormatType=2 }
    { 50005;  ;N§  Proveedor       ;Code20        ;DataClassification=ToBeClassified;
                                                   Description=BAIN-060208;
                                                   Editable=No }
    { 50006;  ;Nombre proveedor    ;Text50        ;DataClassification=ToBeClassified;
                                                   Description=BAIN-060208;
                                                   Editable=No }
  }
  KEYS
  {
    {    ;Starting Date,Ending Date,Sales Type,Sales Code,Currency Code,Item No.,Variant Code,Unit of Measure Code,Minimum Quantity;
                                                   Clustered=Yes }
    {    ;Item No.,Variant Code,Unit of Measure Code,Minimum Quantity,Starting Date,Ending Date,Sales Type,Sales Code,Currency Code }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      CustPriceGr@1000 : Record 6;
      Text000@1001 : TextConst 'ENU=%1 cannot be after %2;ESP=%1 no puede ser posterior %2';
      Cust@1002 : Record 18;
      Text001@1003 : TextConst 'ENU=%1 must be blank.;ESP=%1 debe ser blanco.';
      Campaign@1006 : Record 5071;
      Item@1005 : Record 27;
      PriceAlreadyExists@1004 : Boolean;
      Text002@1007 : TextConst 'ENU="%1 and %2 can only be altered from the Campaign Card when %3 = %4.";ESP="%1 y %2 pueden ser alterados solo desde la Ficha campa¤a cuando %3 = %4."';

    [External]
    PROCEDURE CalcCurrentPrice@1(VAR PriceAlreadyExists@1000 : Boolean);
    VAR
      SalesPrice@1001 : Record 7002;
    BEGIN
      SalesPrice.SETRANGE("Item No.","Item No.");
      SalesPrice.SETRANGE("Sales Type","Sales Type");
      SalesPrice.SETRANGE("Sales Code","Sales Code");
      SalesPrice.SETRANGE("Currency Code","Currency Code");
      SalesPrice.SETRANGE("Unit of Measure Code","Unit of Measure Code");
      SalesPrice.SETRANGE("Starting Date",0D,"Starting Date");
      SalesPrice.SETRANGE("Minimum Quantity",0,"Minimum Quantity");
      SalesPrice.SETRANGE("Variant Code","Variant Code");
      OnCalcCurrentPriceOnAfterSetFilters(SalesPrice,Rec);
      IF SalesPrice.FINDLAST THEN BEGIN
        "Current Unit Price" := SalesPrice."Unit Price";
        "Price Includes VAT" := SalesPrice."Price Includes VAT";
        "Allow Line Disc." := SalesPrice."Allow Line Disc.";
        "Allow Invoice Disc." := SalesPrice."Allow Invoice Disc.";
        "VAT Bus. Posting Gr. (Price)" := SalesPrice."VAT Bus. Posting Gr. (Price)";
        PriceAlreadyExists := SalesPrice."Starting Date" = "Starting Date";
        OnAfterCalcCurrentPriceFound(Rec,SalesPrice);
      END ELSE BEGIN
        "Current Unit Price" := 0;
        PriceAlreadyExists := FALSE;
      END;
    END;

    [External]
    PROCEDURE SetSalesDescription@4();
    VAR
      Customer@1002 : Record 18;
      CustomerPriceGroup@1003 : Record 6;
      Campaign@1004 : Record 5071;
    BEGIN
      "Sales Description" := '';
      IF "Sales Code" = '' THEN
        EXIT;
      CASE "Sales Type" OF
        "Sales Type"::Customer:
          IF Customer.GET("Sales Code") THEN
            "Sales Description" := Customer.Name;
        "Sales Type"::"Customer Price Group":
          IF CustomerPriceGroup.GET("Sales Code") THEN
            "Sales Description" := CustomerPriceGroup.Description;
        "Sales Type"::Campaign:
          IF Campaign.GET("Sales Code") THEN
            "Sales Description" := Campaign.Description;
      END;
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCalcCurrentPriceFound@2(VAR SalesPriceWorksheet@1000 : Record 7023;SalesPrice@1001 : Record 7002);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCalcCurrentPriceOnAfterSetFilters@3(VAR SalesPrice@1000 : Record 7002;SalesPriceWorksheet@1001 : Record 7023);
    BEGIN
    END;

    BEGIN
    END.
  }
}

OBJECT Table 50003 Dto. l¡nea documento
{
  OBJECT-PROPERTIES
  {
    Date=08/05/20;
    Time=12:31:52;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               //B-BAIN-0060 TESTFIELD("Source Type",37);
               //I-BAIN-0060
               ValidarEdici¢n;
               //F-BAIN-0060
             END;

    OnModify=BEGIN
               //B-BAIN-0060 TESTFIELD("Source Type",37);
               //I-BAIN-0060
               ValidarEdici¢n;
               //F-BAIN-0060
             END;

    OnDelete=BEGIN
               //B-BAIN-0060 TESTFIELD("Source Type",37);
               //I-BAIN-0060
               ValidarEdici¢n;
               //F-BAIN-0060
             END;

    LookupPageID=Page50005;
    DrillDownPageID=Page50005;
  }
  FIELDS
  {
    { 1   ;   ;Source Type         ;Integer       ;CaptionML=[ENU=Source Type;
                                                              ESP=Tipo procedencia mov.] }
    { 2   ;   ;Source Subtype      ;Option        ;CaptionML=[ENU=Source Subtype;
                                                              ESP=Subtipo origen];
                                                   OptionCaptionML=[ENU=0,1,2,3,4,5,6,7,8,9,10;
                                                                    ESP=0,1,2,3,4,5,6,7,8,9,10];
                                                   OptionString=0,1,2,3,4,5,6,7,8,9,10 }
    { 3   ;   ;Source ID           ;Code20        ;CaptionML=[ENU=Source ID;
                                                              ESP=Id. origen] }
    { 4   ;   ;Source Ref. No.     ;Integer       ;CaptionML=[ENU=Source Ref. No.;
                                                              ESP=N§ ref. origen] }
    { 5   ;   ;Secuencia descuento ;Integer       ;OnValidate=BEGIN
                                                                {ConfVtas.GET;
                                                                ConfVtas.TESTFIELD("M xima secuencia dto. l¡nea");
                                                                IF "Secuencia descuento" > ConfVtas."M xima secuencia dto. l¡nea" THEN
                                                                  FIELDERROR("Secuencia descuento",Text50002 +
                                                                  FORMAT(ConfVtas."M xima secuencia dto. l¡nea") + '.');}
                                                              END;

                                                   MinValue=1;
                                                   NotBlank=Yes }
    { 6   ;   ;Line Discount %     ;Decimal       ;OnValidate=BEGIN
                                                                IF CurrFieldNo <> 0 THEN Manual := TRUE;
                                                              END;

                                                   CaptionML=[ENU=Line Discount %;
                                                              ESP=% Descuento l¡nea];
                                                   MinValue=0;
                                                   MaxValue=100;
                                                   AutoFormatType=2 }
    { 7   ;   ;Base descuento      ;Decimal       ;AutoFormatType=1 }
    { 8   ;   ;Importe descuento   ;Decimal       ;AutoFormatType=1 }
    { 9   ;   ;Manual              ;Boolean        }
  }
  KEYS
  {
    {    ;Source Type,Source Subtype,Source ID,Source Ref. No.,Secuencia descuento;
                                                   Clustered=Yes }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      DtoLinDoc@1170170000 : Record 50003;
      Text50001@1170170001 : TextConst 'ESP=Existen mas de un descuento para la l¡nea';
      ConfVtas@1170170002 : Record 311;
      Text50002@1170170003 : TextConst 'ESP=No puede ser mayor que';
      Text50003@1170170004 : TextConst 'ESP=No se pueden modificar los descuentos de los hist¢ricos.';

    PROCEDURE FiltrarDtoLinea@1170170006(LinVta@1170170000 : Record 37);
    VAR
      PorcCascada@1170170003 : Decimal;
    BEGIN
      RESET;
      SETRANGE("Source Type",37);
      SETRANGE("Source Subtype",LinVta."Document Type");
      SETRANGE("Source ID",LinVta."Document No.");
      SETRANGE("Source Ref. No.",LinVta."Line No.");
    END;

    PROCEDURE BorraDtoLinea@1170170003(LinVta@1170170000 : Record 37);
    BEGIN
      FiltrarDtoLinea(LinVta);
      DELETEALL(TRUE);
    END;

    PROCEDURE TotalPorcDtoLinea@1170170005(LinVta@1170170000 : Record 37) SumDtos : Decimal;
    VAR
      PorcCascada@1170170003 : Decimal;
    BEGIN
      FiltrarDtoLinea(LinVta);
      IF FIND('-') THEN REPEAT
        PorcCascada := (100 - SumDtos)*("Line Discount %"/100);
        SumDtos += ROUND(PorcCascada,0.000001);
      UNTIL NEXT = 0;
    END;

    PROCEDURE InsertarDtoLinea@1170170001(DtoLinea@1170170000 : Record 7004;LinVta@1170170001 : Record 37;DtoLineaMultiple@1170170003 : Record 50015);
    VAR
      DtoLinDoc@1170170002 : Record 50003;
    BEGIN
      INIT;
      IF DtoLinea."Line Discount %" = 0 THEN EXIT;
      "Source Type" := 37;
      "Source Subtype" := LinVta."Document Type";
      "Source ID" := LinVta."Document No.";
      "Source Ref. No." := LinVta."Line No.";
      "Secuencia descuento" := DtoLineaMultiple.Secuencia;
      "Line Discount %" := DtoLineaMultiple."Line Discount %";
      INSERT;
    END;

    PROCEDURE TrapasarATabla@1170170000(NoTabla@1170170000 : Integer;SubTipo@1170170001 : Integer;NoDoc@1170170002 : Code[20]);
    BEGIN
      DtoLinDoc := Rec;
      DtoLinDoc."Source Type" := NoTabla;
      DtoLinDoc."Source Subtype" := SubTipo;
      DtoLinDoc."Source ID" := NoDoc;
      DtoLinDoc.INSERT;
    END;

    PROCEDURE TrapasarAHistorico@1170170009(LinVta@1170170000 : Record 37;NuevoDoc@1170170001 : Code[20]);
    BEGIN
      ActualizaImportesDesdeLinVta(LinVta);
      IF FIND('-') THEN REPEAT
        IF LinVta."Document Type" IN
          [LinVta."Document Type"::"Credit Memo",LinVta."Document Type"::"Return Order"] THEN
          TrapasarATabla(115,0,NuevoDoc)
        ELSE TrapasarATabla(113,0,NuevoDoc)
      UNTIL NEXT = 0;
    END;

    PROCEDURE ObtLinVta@1170170002(VAR LinVta@1170170000 : Record 37) : Boolean;
    BEGIN
      LinVta."Document Type" := "Source Subtype";
      EXIT(LinVta.GET(LinVta."Document Type","Source ID","Source Ref. No."));
    END;

    PROCEDURE ActPorcLin@1170170008();
    VAR
      LinVta@1170170000 : Record 37;
      dTotal@1170170001 : Decimal;
      LinCompra@1170170002 : Record 39;
    BEGIN
      //I-BAIN-0060
      IF "Source Type" = 39 THEN BEGIN
        IF ObtLinCompra(LinCompra) THEN BEGIN
          dTotal := TotalPorcDtoLineaCompra(LinCompra);
          IF dTotal <> LinCompra."Line Discount %" THEN BEGIN
            LinCompra.VALIDATE("Line Discount %",dTotal);
            LinCompra.MODIFY;
          END;
        END;
      END;
      //F-BAIN-0060

      IF ObtLinVta(LinVta) THEN BEGIN
        dTotal := TotalPorcDtoLinea(LinVta);
        IF dTotal <> LinVta."Line Discount %" THEN BEGIN
          LinVta.VALIDATE("Line Discount %",dTotal);
          LinVta.MODIFY;
        END;
      END;
    END;

    PROCEDURE ActualizarDesdeLinVta@1170170014(LinVta@1170170000 : Record 37);
    VAR
      DtoLin@1170170001 : Record 7004;
      DtoLinMultiple@1170170002 : Record 50015;
    BEGIN
      IF TotalPorcDtoLinea(LinVta) = LinVta."Line Discount %" THEN EXIT;
      IF LinVta."Line Discount %" = 0 THEN BEGIN
        DELETEALL(TRUE);
        EXIT;
      END;
      IF COUNT > 1 THEN ERROR(Text50001);
      IF COUNT = 1 THEN BEGIN
        FIND('-');
        "Line Discount %" := LinVta."Line Discount %";
        MODIFY;
      END ELSE BEGIN
        DtoLinMultiple.Secuencia := 1;
        DtoLinMultiple."Line Discount %" := LinVta."Line Discount %";
        InsertarDtoLinea(DtoLin,LinVta,DtoLinMultiple);
      END;
    END;

    PROCEDURE ActualizaImportesDesdeLinVta@1170170004(LinVta@1170170000 : Record 37);
    VAR
      DtoLin@1170170001 : Record 7004;
      dBase@1170170002 : Decimal;
      CabVta@1170170003 : Record 36;
      ImpDtoOriginal@1170170004 : Decimal;
      TotImpDto@1170170005 : Decimal;
    BEGIN
      FiltrarDtoLinea(LinVta);
      dBase := LinVta."Line Discount Amount" + LinVta."Line Amount";
      IF NOT FIND('-') THEN EXIT;
      IF NOT CabVta.GET(LinVta."Document Type",LinVta."Document No.") THEN EXIT;
      CabVta.Status := CabVta.Status::Open;
      LinVta.SetSalesHeader(CabVta);
      ImpDtoOriginal := LinVta."Line Discount Amount";
      REPEAT
        IF LinVta.Quantity = 0 THEN BEGIN
          "Base descuento" := 0;
          "Importe descuento" := 0;
        END ELSE BEGIN
          "Base descuento" := dBase;
          LinVta."Unit Price" := dBase /LinVta.Quantity;
          //LinVta.SetOmitirActualizarDtoLin(TRUE);
          LinVta.VALIDATE("Line Discount %","Line Discount %");
          "Importe descuento" := LinVta."Line Discount Amount";
        END;
        TotImpDto := TotImpDto + "Importe descuento";
        MODIFY;
        dBase := dBase - "Importe descuento";
      UNTIL NEXT = 0;
      IF ImpDtoOriginal <> TotImpDto THEN BEGIN
        "Importe descuento" := "Importe descuento" +
         + ImpDtoOriginal - TotImpDto;
      END;
    END;

    PROCEDURE BorraDtoLineaCabVta@1170170007(CabVta@1170170000 : Record 36);
    VAR
      LinVta@1170170001 : Record 37;
    BEGIN
      LinVta.SETRANGE("Document Type",CabVta."Document Type");
      LinVta.SETRANGE("Document No.",CabVta."No.");
      IF LinVta.FIND('-') THEN REPEAT
        BorraDtoLinea(LinVta);
      UNTIL LinVta.NEXT = 0;
    END;

    PROCEDURE FiltrarDtoLineaOtros@1170170010(Tipo@1170170000 : Integer;SubTipo@1170170001 : Integer;ID@1170170002 : Code[20];Referencia@1170170003 : Integer);
    BEGIN
      RESET;
      SETRANGE("Source Type",Tipo);
      SETRANGE("Source Subtype",SubTipo);
      SETRANGE("Source ID",ID);
      SETRANGE("Source Ref. No.",Referencia);
    END;

    PROCEDURE ValidarEdici¢n@1170170012();
    BEGIN
      //I-BAIN-0060
      IF NOT ("Source Type" IN [37,39]) THEN
        ERROR(Text50003);
      //F-BAIN-0060
    END;

    PROCEDURE FiltrarDtoLineaCompra@1170170023(LinCompra@1170170000 : Record 39);
    VAR
      PorcCascada@1170170003 : Decimal;
    BEGIN
      //I-BAIN-0060
      FiltrarDtoLineaOtros(39,LinCompra."Document Type",LinCompra."Document No.",LinCompra."Line No.");
      //F-BAIN-0060
    END;

    PROCEDURE BorraDtoLineaCompra@1170170022(LinCompra@1170170000 : Record 39);
    BEGIN
      //I-BAIN-0060
      FiltrarDtoLineaCompra(LinCompra);
      DELETEALL(TRUE);
      //F-BAIN-0060
    END;

    PROCEDURE TotalPorcDtoLineaCompra@1170170021(LinCompra@1170170000 : Record 39) SumDtos : Decimal;
    VAR
      PorcCascada@1170170003 : Decimal;
    BEGIN
      //I-BAIN-0060
      FiltrarDtoLineaCompra(LinCompra);
      IF FIND('-') THEN REPEAT
        PorcCascada := (100 - SumDtos)*("Line Discount %"/100);
        SumDtos += ROUND(PorcCascada,0.000001);
      UNTIL NEXT = 0;
      //F-BAIN-0060
    END;

    PROCEDURE InsertarDtoLineaCompra@1170170020(DtoLinea@1170170000 : Record 7014;LinCompra@1170170001 : Record 39;DtoLineaAdicional@1170170003 : Record 50015);
    VAR
      DtoLinDoc@1170170002 : Record 50003;
    BEGIN
      //I-BAIN-0060
      INIT;
      IF DtoLinea."Line Discount %" = 0 THEN EXIT;
      "Source Type" := 39;
      "Source Subtype" := LinCompra."Document Type";
      "Source ID" := LinCompra."Document No.";
      "Source Ref. No." := LinCompra."Line No.";
      "Secuencia descuento" := DtoLineaAdicional.Secuencia;
      "Line Discount %" := DtoLineaAdicional."Line Discount %";
      INSERT;
      //F-BAIN-0060
    END;

    PROCEDURE TrapasarAHistoricoCompra@1170170018(LinCompra@1170170000 : Record 39;NuevoDoc@1170170001 : Code[20]);
    BEGIN
      //I-BAIN-0060
      ActualizaImportesDesdeCompra(LinCompra);
      IF FIND('-') THEN REPEAT
        IF LinCompra."Document Type" IN
          [LinCompra."Document Type"::"Credit Memo",LinCompra."Document Type"::"Return Order"] THEN
          TrapasarATabla(125,0,NuevoDoc)
        ELSE TrapasarATabla(123,0,NuevoDoc)
      UNTIL NEXT = 0;
      //F-BAIN-0060
    END;

    PROCEDURE ObtLinCompra@1170170017(VAR LinCompra@1170170000 : Record 39) : Boolean;
    BEGIN
      //I-BAIN-0060
      LinCompra."Document Type" := "Source Subtype";
      EXIT(LinCompra.GET(LinCompra."Document Type","Source ID","Source Ref. No."));
      //F-BAIN-0060
    END;

    PROCEDURE ActualizarDesdeLinCompra@1170170015(LinCompra@1170170000 : Record 39);
    VAR
      DtoLin@1170170001 : Record 7014;
      DtoLineaAdicional@1170170002 : Record 50015;
    BEGIN
      //I-BAIN-0060
      IF TotalPorcDtoLineaCompra(LinCompra) = LinCompra."Line Discount %" THEN EXIT;
      IF LinCompra."Line Discount %" = 0 THEN BEGIN
        DELETEALL(TRUE);
        EXIT;
      END;
      IF COUNT > 1 THEN ERROR(Text50001);
      IF COUNT = 1 THEN BEGIN
        FIND('-');
        "Line Discount %" := LinCompra."Line Discount %";
        MODIFY;
      END ELSE BEGIN
        DtoLineaAdicional.Secuencia := 1;
        DtoLineaAdicional."Line Discount %" := LinCompra."Line Discount %";
        InsertarDtoLineaCompra(DtoLin,LinCompra);
      END;
      //F-BAIN-0060
    END;

    PROCEDURE ActualizaImportesDesdeCompra@1170170013(LinCompra@1170170000 : Record 39);
    VAR
      DtoLin@1170170001 : Record 7014;
      dBase@1170170002 : Decimal;
      CabCompra@1170170003 : Record 38;
      ImpDtoOriginal@1170170004 : Decimal;
      TotImpDto@1170170005 : Decimal;
    BEGIN
      //I-BAIN-0060
      FiltrarDtoLineaCompra(LinCompra);
      dBase := LinCompra."Precio base dto. l¡nea" *LinCompra.Quantity;
      IF NOT FIND('-') THEN EXIT;
      IF NOT CabCompra.GET(LinCompra."Document Type",LinCompra."Document No.") THEN EXIT;
      CabCompra.Status := CabCompra.Status::Open;
      LinCompra.SetPurchHeader(CabCompra);
      ImpDtoOriginal := LinCompra."Line Discount Amount";
      REPEAT
        IF LinCompra.Quantity = 0 THEN BEGIN
          "Base descuento" := 0;
          "Importe descuento" := 0;
        END ELSE BEGIN
          "Base descuento" := dBase;
          LinCompra."Precio base dto. l¡nea" := dBase /LinCompra.Quantity;
          //LinCompra.SetOmitirActualizarDtoLin(TRUE);
          LinCompra.VALIDATE("Line Discount %","Line Discount %");
          "Importe descuento" := LinCompra."Line Discount Amount";
        END;
        TotImpDto := TotImpDto + "Importe descuento";
        MODIFY;
        dBase := dBase - "Importe descuento";
      UNTIL NEXT = 0;
      IF ImpDtoOriginal <> TotImpDto THEN BEGIN
        "Importe descuento" := "Importe descuento" +
         + ImpDtoOriginal - TotImpDto;
      END;
      //F-BAIN-0060
    END;

    PROCEDURE BorraDtoLineaCabCpra@1170170011(CabCpra@1170170000 : Record 38);
    VAR
      LinCompra@1170170001 : Record 39;
    BEGIN
      //I-BAIN-0060
      LinCompra.SETRANGE("Document Type",CabCpra."Document Type");
      LinCompra.SETRANGE("Document No.",CabCpra."No.");
      IF LinCompra.FIND('-') THEN REPEAT
        BorraDtoLineaCompra(LinCompra);
      UNTIL LinCompra.NEXT = 0;
      //F-BAIN-0060
    END;

    BEGIN
    {
      BAIN-0015 JA 151107 Creado objeto.
      BAIN-0060 JA 170508 Poner en compras.
    }
    END.
  }
}

OBJECT Table 50010 Conjunto productos
{
  OBJECT-PROPERTIES
  {
    Date=29/04/20;
    Time=13:00:03;
    Modified=Yes;
    Version List=BAIN,BAN;
  }
  PROPERTIES
  {
    LookupPageID=Page50029;
    DrillDownPageID=Page50029;
  }
  FIELDS
  {
    { 1   ;   ;C¢digo              ;Code10        ;NotBlank=Yes }
    { 2   ;   ;Descripci¢n         ;Text50         }
    { 3   ;   ;C¢d. unidad medida precio;Code10   ;TableRelation="Unit of Measure".Code }
  }
  KEYS
  {
    {    ;C¢digo                                  ;Clustered=Yes }
  }
  FIELDGROUPS
  {
  }
  CODE
  {

    PROCEDURE ExistenciasTotalesUdadPrecio@1170170000() Existencias : Decimal;
    VAR
      Prod@1170170002 : Record 27;
      UdadMedProd@1170170000 : Record 5404;
    BEGIN
      IF C¢digo = '' THEN
        EXIT(0);
      Prod.RESET;
      Prod.SETCURRENTKEY("C¢d. conjunto");
      Prod.SETRANGE("C¢d. conjunto",C¢digo);
      Existencias := 0;
      IF Prod.FINDSET THEN REPEAT
        Prod.TESTFIELD("C¢d. ud. medida precio","C¢d. unidad medida precio");
        UdadMedProd.GET(Prod."No.","C¢d. unidad medida precio");
        UdadMedProd.TESTFIELD("Qty. per Unit of Measure");
        Prod.CALCFIELDS(Inventory);
        Existencias += (Prod.Inventory / UdadMedProd."Qty. per Unit of Measure");
      UNTIL Prod.NEXT = 0;
    END;

    BEGIN
    {
      BAIN
      =============================

      23069 AC 110914 Se crea el objeto
    }
    END.
  }
}

OBJECT Table 50015 Dto. l¡nea adicional
{
  OBJECT-PROPERTIES
  {
    Date=08/05/20;
    Time=12:03:44;
    Modified=Yes;
    Version List=BAIN,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Dto. l¡nea m£ltiple;
               ESP=Dto. l¡nea m£ltiple];
  }
  FIELDS
  {
    { 1   ;   ;Id dto. linea       ;GUID          ;DataClassification=ToBeClassified }
    { 2   ;   ;Secuencia           ;Integer       ;DataClassification=ToBeClassified }
    { 3   ;   ;Line Discount %     ;Decimal       ;DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Line Discount %;
                                                              ESP=% Descuento l¡nea];
                                                   MinValue=0;
                                                   MaxValue=100;
                                                   AutoFormatType=2 }
  }
  KEYS
  {
    {    ;Id dto. linea,Secuencia                 ;Clustered=Yes }
  }
  FIELDGROUPS
  {
  }
  CODE
  {

    BEGIN
    END.
  }
}

OBJECT Report 50004 Sugerir precio coste tarifa
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=11:21:18;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    ProcessingOnly=Yes;
    OnPreReport=BEGIN
                  Window.OPEN(Text000);
                  RoundingMethod.SETRANGE(Code,RoundingMethod.Code);
                END;

  }
  DATASET
  {
    { 1170170000;;DataItem;                  ;
               DataItemTable=Table27;
               OnAfterGetRecord=BEGIN

                                  Window.UPDATE(1,"No.");
                                  WITH SalesPriceWksh DO BEGIN
                                    INIT;
                                    "Sales Type" := "Sales Type"::"All Customers";
                                    VALIDATE("Sales Code",'');
                                    VALIDATE("Item No.",Item."No.");

                                    "Coste tarifa nuevo" := Item."Precio coste tarifa" * Factor;

                                    IF RoundingMethod.Code <> '' THEN BEGIN
                                      RoundingMethod."Minimum Amount" := "Coste tarifa nuevo";
                                      IF RoundingMethod.FIND('=<') THEN BEGIN
                                        "Coste tarifa nuevo" := "Coste tarifa nuevo" + RoundingMethod."Amount Added Before";
                                        IF RoundingMethod.Precision > 0 THEN
                                          "Coste tarifa nuevo" :=
                                            ROUND(
                                              "Coste tarifa nuevo",
                                              RoundingMethod.Precision,COPYSTR('=><',RoundingMethod.Type + 1,1));
                                        "Coste tarifa nuevo" := "Coste tarifa nuevo" + RoundingMethod."Amount Added After";
                                      END;
                                    END;

                                    "VAT Bus. Posting Gr. (Price)" := Item."VAT Bus. Posting Gr. (Price)";
                                    "Cambio coste tarifa" := TRUE;
                                    SalesPriceWksh2 := SalesPriceWksh;
                                    IF SalesPriceWksh2.FIND('=') THEN
                                      SalesPriceWksh.MODIFY
                                    ELSE
                                      SalesPriceWksh.INSERT;
                                  END;
                                END;

               ReqFilterFields=No.,Vendor No.,Inventory Posting Group }

  }
  REQUESTPAGE
  {
    PROPERTIES
    {
      SaveValues=Yes;
    }
    CONTROLS
    {
      { 1170170000;;Container;
                  CaptionML=ESP=Opciones;
                  ContainerType=ContentArea }

      { 1170170001;1;Field  ;
                  CaptionML=ESP=M‚todo redondeo;
                  SourceExpr=RoundingMethod.Code;
                  TableRelation="Rounding Method" }

      { 1170170002;1;Field  ;
                  CaptionML=ESP=Factor precio;
                  SourceExpr=Factor }

    }
  }
  LABELS
  {
  }
  CODE
  {
    VAR
      RoundingMethod@1170170004 : Record 42;
      SalesPriceWksh2@1170170003 : Record 7023;
      SalesPriceWksh@1170170002 : Record 7023;
      Window@1170170001 : Dialog;
      Factor@1170170000 : Decimal;
      Text000@1170170006 : TextConst 'ENU=Processing items  #1##########;ESP=Procesando prods.#1##########';
      Text002@1170170005 : TextConst 'ENU=%1 must be specified.;ESP=Se debe indicar %1.';

    BEGIN
    {
      LICORES BAINES
      ==============

      BAIN-0014 JA 121107 Crear objeto.
    }
    END.
  }
  RDLDATA
  {
  }
}

OBJECT Report 50028 Estad¡sticas compras din micas
{
  OBJECT-PROPERTIES
  {
    Date=30/04/20;
    Time=11:20:40;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    ProcessingOnly=Yes;
  }
  DATASET
  {
    { 1170170000;;DataItem;                  ;
               DataItemTable=Table2000000006;
               OnPreDataItem=VAR
                               FileManagement@1170170000 : Codeunit 419;
                             BEGIN

                               Ventana.OPEN('Exportando Movimientos a Excel \\' +
                                            'Empresa    : #1##########################\' +
                                            'Movimientos: @2@@@@@@@@@@@@@@@@@@@@@@@@@@');

                               // Creacion del archivo temporal de datos
                               ARCHIVO_TEMPORAL := FileManagement.ServerTempFileName('TXT');
                               FichTemp.TEXTMODE:=TRUE;
                               FichTemp.CREATE(ARCHIVO_TEMPORAL);
                               Linea := 'Num. mov.' + SEPARADOR_COLUMNA +
                                        'Fecha' + SEPARADOR_COLUMNA +
                                        'A¤o' + SEPARADOR_COLUMNA +
                                        'Mes' + SEPARADOR_COLUMNA +
                                        'N§ producto' + SEPARADOR_COLUMNA +
                                        'Nombre Producto' + SEPARADOR_COLUMNA +
                                        'Denominaci¢n de Origen' + SEPARADOR_COLUMNA +
                                        'Color vino' + SEPARADOR_COLUMNA +
                                        'Calificaci¢n' + SEPARADOR_COLUMNA +
                                        'Formato' + SEPARADOR_COLUMNA +
                                        'Formato botella' + SEPARADOR_COLUMNA +
                                        'Formato caja' + SEPARADOR_COLUMNA +
                                        'A¤ada' + SEPARADOR_COLUMNA +
                                        'Proveedor' + SEPARADOR_COLUMNA +
                                        'Tarifa' + SEPARADOR_COLUMNA +
                                        'Pa¡s' + SEPARADOR_COLUMNA +
                                        'Unidad medida' + SEPARADOR_COLUMNA +
                                        // I-0400
                                        'Tipo l¡nea' + SEPARADOR_COLUMNA +
                                        'Concepto obsequio' + SEPARADOR_COLUMNA +
                                        // F-0400
                                        //I-BAIN-0027
                                        'Familia' + SEPARADOR_COLUMNA +
                                        'Subfamilia' + SEPARADOR_COLUMNA +
                                        'Capacidad' + SEPARADOR_COLUMNA +
                                        'Grado' + SEPARADOR_COLUMNA +
                                        'Frutos' + SEPARADOR_COLUMNA +
                                        //F-BAIN-0027
                                        //I-BAIN-0028
                                        'Precinta' + SEPARADOR_COLUMNA +
                                        'Precinta propia' + SEPARADOR_COLUMNA +
                                        'Tipo precinta' + SEPARADOR_COLUMNA +
                                        //F-BAIN-0028
                                        'Empresa' + SEPARADOR_COLUMNA +
                                        'Cantidad' + SEPARADOR_COLUMNA +
                                        'N§ botellas' + SEPARADOR_COLUMNA + // 240708
                                        'Litros' + SEPARADOR_COLUMNA +
                                        'Cajas de 9' + SEPARADOR_COLUMNA +
                                        'Importe' + SEPARADOR_COLUMNA +
                                        'Rappel 1 %' + SEPARADOR_COLUMNA +
                                        'Rappel 2 %' + SEPARADOR_COLUMNA +
                                        'Rappel 3 %'
                                        //I-BAIN-0107
                                        + SEPARADOR_COLUMNA + TablaProducto.FIELDCAPTION("Con precinta")
                                        + SEPARADOR_COLUMNA + TablaProducto.FIELDCAPTION("Precinta propia")
                                        + SEPARADOR_COLUMNA + TablaProducto.FIELDCAPTION("C¢d. tipo precinta");
                                        //F-BAIN-0107


                               ElimExtExp(Linea);
                               FichTemp.WRITE(Linea);
                             END;

               OnAfterGetRecord=BEGIN
                                  Ventana.UPDATE(1,Company.Name);
                                END;

               OnPostDataItem=VAR
                                NCols@1170170000 : Integer;
                                Filtros@1170170001 : Text;
                              BEGIN
                                Ventana.CLOSE;
                                FichTemp.CLOSE;
                                Columna := 'AJ'; // 240708
                                Columna := 'AM'; // BAIN-0107
                                RangoTD := 'A1:' + Columna + FORMAT(ContadorFila + 1); // 210809
                                NCols := 39;
                                GenExcel.EstConfigTablaDinamica(NCols,RutaArchivo);
                                Filtros := 'N§ producto: ' + "Item Ledger Entry".GETFILTER("Item No.") +
                                          ' C¢d. almac‚n: ' + "Item Ledger Entry".GETFILTER("Location Code") +
                                          ' Empresa: ' + Company.GETFILTER(Name) +
                                          ' Fecha registro: ' + "Item Ledger Entry".GETFILTER("Posting Date") +
                                          ' Variante: ' + "Item Ledger Entry".GETFILTER("Variant Code");

                                IF ContadorFila <> 0 THEN BEGIN
                                  GenExcel.ActTablaDinamica(ContadorFila,ARCHIVO_TEMPORAL,SEPARADOR_COLUMNA,Filtros);
                                  GenExcel.AbrirExcel;
                                END ELSE
                                  MESSAGE(Text007);

                                ERASE(ARCHIVO_TEMPORAL);
                              END;

               ReqFilterFields=Name }

    { 1170170001;1;DataItem;                 ;
               DataItemTable=Table32;
               OnPreDataItem=BEGIN
                               // Cambiar las tablas de empresa
                               CHANGECOMPANY(Company.Name);
                               //TIPSA I-231006
                               Total := COUNT;
                               Parcial := 0;
                               //TIPSA F-231006
                               TablaProducto.CHANGECOMPANY(Company.Name);
                               TablaDenom.CHANGECOMPANY(Company.Name);
                               TablaColorVino.CHANGECOMPANY(Company.Name);
                               TablaDOC.CHANGECOMPANY(Company.Name);
                               TablaFormato.CHANGECOMPANY(Company.Name);
                               TablaFormatoBot.CHANGECOMPANY(Company.Name);
                               TablaFormatoCaja.CHANGECOMPANY(Company.Name);
                               TablaA¤ada.CHANGECOMPANY(Company.Name);
                               TablaProveedor.CHANGECOMPANY(Company.Name);
                               //I-BAIN-0027
                               TablaCategoria.CHANGECOMPANY(Company.Name);
                               //TablaGrupo.CHANGECOMPANY(Company.Name);
                               //F-BAIN-0027
                               //I-BAIN-0028
                               TablaPrecinta.CHANGECOMPANY(Company.Name);
                               //F-BAIN-0028
                               TablaPrecio.CHANGECOMPANY(Company.Name);
                             END;

               OnAfterGetRecord=BEGIN

                                  Parcial := Parcial + 1;
                                  Ventana.UPDATE(2,ROUND(10000 * Parcial / Total,1));

                                  //IF "Item Ledger Entry"."Invoiced Quantity" = 0 THEN
                                  //  EXIT;
                                  IF "Entry Type" <> "Entry Type"::Purchase THEN CurrReport.SKIP;
                                  TESTFIELD("Item Ledger Entry"."Posting Date");

                                  // Escribir los estadisticos del producto
                                  IF NOT TablaProducto.GET("Item Ledger Entry"."Item No.") THEN TablaProducto.INIT;
                                  //I-171106
                                  IF TablaProducto."Producto compuesto" AND DesgloseCompuesto THEN
                                    CurrReport.SKIP;
                                  //F-171106
                                  IF NOT TablaDenom.GET(TablaProducto."C¢d. denominaci¢n origen") THEN TablaDenom.INIT;
                                  IF NOT TablaColorVino.GET(TablaProducto."C¢d. color vino") THEN TablaColorVino.INIT;
                                  IF NOT TablaDOC.GET(TablaProducto."C¢d. calificaci¢n") THEN TablaDOC.INIT;
                                  IF NOT TablaFormato.GET(TablaProducto."C¢d. formato") THEN TablaFormato.INIT;
                                  IF NOT TablaFormatoBot.GET(TablaProducto."C¢d. formato botella") THEN TablaFormatoBot.INIT;
                                  IF NOT TablaFormatoCaja.GET(TablaProducto."C¢d. formato caja") THEN TablaFormatoCaja.INIT;
                                  IF NOT TablaA¤ada.GET(TablaProducto."C¢d. a¤ada") THEN TablaA¤ada.INIT;
                                  IF NOT TablaObsequio.GET("C¢d. concepto obsequio") THEN TablaObsequio.INIT; // 0400

                                  // Escribir los estad¡sticos del proveedor
                                  IF NOT TablaProveedor.GET("Item Ledger Entry"."Source No.") THEN TablaProveedor.INIT;

                                  //I-BAIN-0027
                                  IF NOT TablaCategoria.GET(TablaProducto."Item Category Code") THEN TablaCategoria.INIT;
                                  //IF NOT TablaGrupo.GET(TablaProducto."Item Category Code",
                                  //                      TablaProducto."Product Group Code") THEN TablaGrupo.INIT;
                                  //F-BAIN-0027
                                  //I-BAIN-0028
                                  IF NOT TablaPrecinta.GET(TablaProducto."C¢d. tipo precinta") THEN TablaPrecinta.INIT;
                                  //F-BAIN-0028
                                  //Item No.,Vendor No.,Starting Date,Currency Code,Variant Code,Unit of Measure Code,Minimum Quantity
                                  TablaPrecio.SETRANGE("Item No.","Item Ledger Entry"."Item No.");
                                  TablaPrecio.SETRANGE("Vendor No.","Item Ledger Entry"."Source No.");
                                  //TablaPrecio.SETRANGE("Variant Code","Item Ledger Entry"."Variant Code");
                                  // I-240708
                                  CALCFIELDS("Fecha factura");
                                  IF "Fecha factura" = 0D THEN
                                    "Fecha factura" := "Posting Date";
                                  TablaPrecio.SETRANGE("Starting Date",0D,"Fecha factura");
                                  TablaPrecio.SETFILTER("Ending Date",'>=%1|''''',"Fecha factura");
                                  // F-240708
                                  IF NOT TablaPrecio.FIND('-') THEN
                                    TablaPrecio.INIT;
                                  "Item Ledger Entry".CALCFIELDS("Item Ledger Entry"."Purchase Amount (Actual)");//060508
                                  Linea := STRSUBSTNO('%1%2',"Entry No.",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',"Posting Date",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',DATE2DMY("Posting Date",3),SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',DATE2DMY("Posting Date",2),SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',"Item No.",SEPARADOR_COLUMNA);
                                  Linea += TablaProducto.Description + ' ' + TablaProducto."Description 2" + SEPARADOR_COLUMNA;
                                  Linea += TablaDenom.Descripci¢n + SEPARADOR_COLUMNA;
                                  Linea += TablaColorVino.Descripci¢n + SEPARADOR_COLUMNA;
                                  Linea += TablaDOC.Descripci¢n + SEPARADOR_COLUMNA;
                                  Linea += TablaFormato.Descripci¢n + SEPARADOR_COLUMNA;
                                  Linea += TablaFormatoBot.Descripci¢n + SEPARADOR_COLUMNA;
                                  Linea += TablaFormatoCaja.Descripci¢n + SEPARADOR_COLUMNA;
                                  Linea += TablaA¤ada.Descripci¢n + SEPARADOR_COLUMNA;
                                  //TIPSA B-031106  Linea += TablaCliente.Name + SEPARADOR_COLUMNA;
                                  //TIPSA I-031106
                                  Linea += TablaProveedor."No." + ' - ' + TablaProveedor.Name + SEPARADOR_COLUMNA;
                                  //TIPSA F-031106
                                  Linea +=TablaProveedor."Vendor Posting Group" + SEPARADOR_COLUMNA;
                                  Linea += TablaProveedor."Country/Region Code" + SEPARADOR_COLUMNA;
                                  Linea += "Unit of Measure Code" + SEPARADOR_COLUMNA;
                                  // I-0400
                                  Linea += STRSUBSTNO('%1%2',"Tipo l¡nea",SEPARADOR_COLUMNA);
                                  Linea += TablaObsequio.Descripci¢n + SEPARADOR_COLUMNA;
                                  // F-0400
                                  //I-BAIN-0027
                                  Linea += TablaProducto."Item Category Code" + SEPARADOR_COLUMNA;
                                  {Falta Linea += TablaProducto."Product Group Code" + SEPARADOR_COLUMNA;

                                  Linea += STRSUBSTNO('%1%2',TablaGrupo.Capacidad,SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',TablaGrupo.Grado,SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',TablaGrupo.Frutos,SEPARADOR_COLUMNA);}
                                  Linea += '' + SEPARADOR_COLUMNA;

                                  Linea += STRSUBSTNO('%1%2','',SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2','',SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2','',SEPARADOR_COLUMNA);

                                  //F-BAIN-0027
                                  //I-BAIN-0028
                                  Linea += STRSUBSTNO('%1%2',TablaProducto."Con precinta",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',TablaProducto."Precinta propia",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1-%2%3',TablaProducto."C¢d. tipo precinta",
                                           TablaPrecinta.Descripci¢n,SEPARADOR_COLUMNA);
                                  //F-BAIN-0028

                                  Linea += Company.Name + SEPARADOR_COLUMNA;
                                  //I-49736
                                  Linea += STRSUBSTNO('%1%2',Quantity,SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',Quantity * TablaFormatoCaja."Cantidad botellas",SEPARADOR_COLUMNA);  // 240708
                                  Linea += STRSUBSTNO('%1%2',Quantity * TablaProducto."Unit Volume",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',Quantity * TablaProducto."Unit Volume" / 9,SEPARADOR_COLUMNA);
                                  //F-49736
                                  Linea += STRSUBSTNO('%1%2',"Purchase Amount (Actual)",SEPARADOR_COLUMNA);

                                  Linea += STRSUBSTNO('%1%2',TablaPrecio."Rappell 1 %",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',TablaPrecio."Rappell 2 %",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',TablaPrecio."Rappell 3 %",SEPARADOR_COLUMNA);

                                  //I-BAIN-0107
                                  Linea += STRSUBSTNO('%1%2',TablaProducto."Con precinta",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',TablaProducto."Precinta propia",SEPARADOR_COLUMNA);
                                  Linea += STRSUBSTNO('%1%2',TablaProducto."C¢d. tipo precinta",SEPARADOR_COLUMNA);
                                  ElimExtExp(Linea);
                                  FichTemp.WRITE(Linea);
                                  ContadorFila+= 1;
                                END;

               ReqFilterFields=Item No.,Location Code,Fecha factura,Posting Date,Variant Code,Source Type,Source No.,No. proveedor }

    { 1170170002;1;DataItem;                 ;
               DataItemTable=Table27;
               DataItemTableView=SORTING(No.)
                                 WHERE(Producto compuesto=CONST(Yes));
               OnPreDataItem=BEGIN
                               //TIPSA I-0364
                               IF NOT DesgloseCompuesto THEN
                                 CurrReport.BREAK;
                               RcMovPtoTemp.RESET;
                               RcMovPtoTemp.DELETEALL;
                               NumSigMov := 1;
                               CHANGECOMPANY(Company.Name);
                               //TIPSA F-0364
                             END;

               OnAfterGetRecord=BEGIN

                                  //TIPSA I-0364
                                  TotalImporte := 0;
                                  TotalImpFijo := 0; // 0421
                                  RcComponente.CHANGECOMPANY(Company.Name);
                                  RcComponente.RESET;
                                  RcComponente.SETRANGE(Type,RcComponente.Type::Item);
                                  RcComponente.SETRANGE("Parent Item No.",Item."No.");
                                  IF RcComponente.FIND('-') THEN
                                  REPEAT
                                    IF NOT RcPtoCompo.GET(RcComponente."No.") THEN
                                      RcPtoCompo.INIT;
                                    CantidadPorUD := 0;
                                    CantidadPorUD := UOMMgt.GetQtyPerUnitOfMeasure(RcPtoCompo,RcComponente."Unit of Measure Code");
                                    ImpPorCompo := ROUND(RcPtoCompo."Unit Price" *
                                              RcComponente."Quantity per" *
                                              UOMMgt.GetQtyPerUnitOfMeasure(RcPtoCompo,RcComponente."Unit of Measure Code") /
                                              CantidadPorUD,0.01);
                                    // I-0421
                                    IF GrExist.GET("Inventory Posting Group") AND
                                       GrExist."Fijar en compuesto" THEN
                                      TotalImpFijo := TotalImpFijo + ImpPorCompo
                                    ELSE
                                    // F-0421
                                    TotalImporte := TotalImporte + ImpPorCompo;
                                  UNTIL RcComponente.NEXT = 0;
                                  //TIPSA F-0364
                                END;
                                 }

    { 1170170003;2;DataItem;MovProdComponente;
               DataItemTable=Table32;
               DataItemTableView=SORTING(Entry No.);
               OnPreDataItem=BEGIN

                               //TIPSA I-0364
                               CHANGECOMPANY(Company.Name);
                               //TIPSA F-0364
                               // I-201106
                               COPYFILTERS("Item Ledger Entry");
                               FILTERGROUP(4);
                               SETRANGE("Item No.",Item."No.");
                               FILTERGROUP(0);
                               // F-201106
                             END;

               OnAfterGetRecord=BEGIN
                                  //TIPSA I-0364
                                  IF "Entry Type" <> "Entry Type"::Purchase THEN
                                    CurrReport.SKIP;

                                  TESTFIELD(MovProdComponente."Posting Date");

                                  RcComponente.RESET;
                                  RcComponente.SETRANGE(Type,RcComponente.Type::Item);
                                  RcComponente.SETRANGE("Parent Item No.",MovProdComponente."Item No.");
                                  IF RcComponente.FIND('-') THEN
                                  REPEAT
                                    InicMovPtoTemp(MovProdComponente,RcComponente);
                                  UNTIL RcComponente.NEXT = 0;
                                  //TIPSA F-0364
                                END;

               DataItemLink=Item No.=FIELD(No.) }

    { 1170170004;2;DataItem;                 ;
               DataItemTable=Table2000000026;
               DataItemTableView=SORTING(Number);
               OnPreDataItem=BEGIN
                               //TIPSA I-0364
                               RcMovPtoTemp.RESET;
                               RcMovPtoTemp.COPYFILTERS("Item Ledger Entry");

                               IF RcMovPtoTemp.COUNT > 0 THEN
                                 SETRANGE(Number,1,RcMovPtoTemp.COUNT)
                               ELSE
                                 CurrReport.BREAK;
                               //TIPSA F-0364
                             END;

               OnAfterGetRecord=BEGIN

                                  //TIPSA I-0364
                                  IF Number = 1 THEN
                                    RcMovPtoTemp.FIND('-')
                                  ELSE
                                    RcMovPtoTemp.NEXT;

                                  WITH RcMovPtoTemp DO BEGIN

                                    IF NOT TablaProducto.GET("Item No.") THEN
                                      TablaProducto.INIT;

                                    IF NOT TablaDenom.GET(TablaProducto."C¢d. denominaci¢n origen") THEN
                                      TablaDenom.INIT;
                                    IF NOT TablaColorVino.GET(TablaProducto."C¢d. color vino") THEN
                                      TablaColorVino.INIT;
                                    IF NOT TablaDOC.GET(TablaProducto."C¢d. calificaci¢n") THEN
                                      TablaDOC.INIT;
                                    IF NOT TablaFormato.GET(TablaProducto."C¢d. formato") THEN
                                      TablaFormato.INIT;
                                    IF NOT TablaFormatoBot.GET(TablaProducto."C¢d. formato botella") THEN
                                      TablaFormatoBot.INIT;
                                    IF NOT TablaFormatoCaja.GET(TablaProducto."C¢d. formato caja") THEN
                                      TablaFormatoCaja.INIT;
                                    IF NOT TablaA¤ada.GET(TablaProducto."C¢d. a¤ada") THEN
                                      TablaA¤ada.INIT;

                                    IF NOT TablaProveedor.GET("Source No.") THEN TablaProveedor.INIT;
                                    // I-0400
                                    IF NOT TablaObsequio.GET("C¢d. concepto obsequio") THEN
                                      TablaObsequio.INIT;
                                    // F-0400
                                    //I-BAIN-0027
                                    IF NOT TablaCategoria.GET(TablaProducto."Item Category Code") THEN TablaCategoria.INIT;
                                  //  IF NOT TablaGrupo.GET(TablaProducto."Item Category Code",
                                  //                      TablaProducto."Product Group Code") THEN TablaGrupo.INIT;
                                    //F-BAIN-0027
                                    //I-BAIN-0028
                                    IF NOT TablaPrecinta.GET(TablaProducto."C¢d. tipo precinta") THEN TablaPrecinta.INIT;
                                    //F-BAIN-0028
                                    TablaPrecio.SETRANGE("Item No.","Item Ledger Entry"."Item No.");
                                    TablaPrecio.SETRANGE("Vendor No.","Item Ledger Entry"."Source No.");
                                    IF NOT TablaPrecio.FIND('-') THEN
                                      TablaPrecio.INIT;
                                  "Item Ledger Entry".CALCFIELDS("Item Ledger Entry"."Purchase Amount (Actual)");//060508

                                    Linea := STRSUBSTNO('%1%2',"Entry No.",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',"Posting Date",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',DATE2DMY("Posting Date",3),SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',DATE2DMY("Posting Date",2),SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',"Item No.",SEPARADOR_COLUMNA);
                                    Linea += TablaProducto.Description + ' ' + TablaProducto."Description 2" + SEPARADOR_COLUMNA;
                                    Linea += TablaDenom.Descripci¢n + SEPARADOR_COLUMNA;
                                    Linea += TablaColorVino.Descripci¢n + SEPARADOR_COLUMNA;
                                    Linea += TablaDOC.Descripci¢n + SEPARADOR_COLUMNA;
                                    Linea += TablaFormato.Descripci¢n + SEPARADOR_COLUMNA;
                                    Linea += TablaFormatoBot.Descripci¢n + SEPARADOR_COLUMNA;
                                    Linea += TablaFormatoCaja.Descripci¢n + SEPARADOR_COLUMNA;
                                    Linea += TablaA¤ada.Descripci¢n + SEPARADOR_COLUMNA;
                                    //TIPSA B-031106  Linea += TablaCliente.Name + SEPARADOR_COLUMNA;
                                    //TIPSA I-031106
                                    Linea += TablaProveedor."No." + ' - ' + TablaProveedor.Name + SEPARADOR_COLUMNA;
                                    //TIPSA F-031106
                                    Linea += TablaProveedor."Vendor Posting Group" + SEPARADOR_COLUMNA;
                                    Linea += TablaProveedor."Country/Region Code" + SEPARADOR_COLUMNA;
                                    Linea += "Unit of Measure Code" + SEPARADOR_COLUMNA;
                                    // I-0400
                                    Linea += STRSUBSTNO('%1%2',"Tipo l¡nea",SEPARADOR_COLUMNA);
                                    Linea += TablaObsequio.Descripci¢n + SEPARADOR_COLUMNA;
                                    // F-0400
                                    //I-BAIN-0027
                                    Linea += TablaProducto."Item Category Code" + SEPARADOR_COLUMNA;
                                    {Falta Linea += TablaProducto."Product Group Code" + SEPARADOR_COLUMNA;
                                    Linea += STRSUBSTNO('%1%2',TablaGrupo.Capacidad,SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',TablaGrupo.Grado,SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',TablaGrupo.Frutos,SEPARADOR_COLUMNA);}
                                    //F-BAIN-0027
                                    Linea += '' + SEPARADOR_COLUMNA;
                                    Linea += STRSUBSTNO('%1%2','',SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2','',SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2','',SEPARADOR_COLUMNA);

                                    //I-BAIN-0028
                                    Linea += STRSUBSTNO('%1%2',TablaProducto."Con precinta",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',TablaProducto."Precinta propia",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1-%2%3',TablaProducto."C¢d. tipo precinta",
                                           TablaPrecinta.Descripci¢n,SEPARADOR_COLUMNA);
                                    //F-BAIN-0028

                                    Linea += Company.Name + SEPARADOR_COLUMNA;
                                    //B-49736
                                    {
                                    Linea += STRSUBSTNO('%1%2',- Quantity,SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',- Quantity * TablaFormatoCaja."N§ botellas / caja",SEPARADOR_COLUMNA);  // 240708
                                    Linea += STRSUBSTNO('%1%2',- Quantity * TablaProducto."Unit Volume",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',- Quantity * TablaProducto."Unit Volume" / 9,SEPARADOR_COLUMNA);
                                    }
                                    //I-49736
                                    Linea += STRSUBSTNO('%1%2', Quantity,SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2', Quantity * TablaFormatoCaja."Cantidad botellas",SEPARADOR_COLUMNA);  // 240708
                                    Linea += STRSUBSTNO('%1%2', Quantity * TablaProducto."Unit Volume",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2', Quantity * TablaProducto."Unit Volume" / 9,SEPARADOR_COLUMNA);
                                    //F-49736
                                    Linea += STRSUBSTNO('%1%2',"Purchase Amount (Actual)",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',TablaPrecio."Rappell 1 %",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',TablaPrecio."Rappell 2 %",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',TablaPrecio."Rappell 3 %",SEPARADOR_COLUMNA);

                                    //I-BAIN-0107
                                    Linea += STRSUBSTNO('%1%2',TablaProducto."Con precinta",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',TablaProducto."Precinta propia",SEPARADOR_COLUMNA);
                                    Linea += STRSUBSTNO('%1%2',TablaProducto."C¢d. tipo precinta",SEPARADOR_COLUMNA);
                                    //F-BAIN-0107

                                    ElimExtExp(Linea);
                                    FichTemp.WRITE(Linea);
                                    ContadorFila += 1;
                                  END;
                                  //TIPSA F-0364
                                END;
                                 }

  }
  REQUESTPAGE
  {
    PROPERTIES
    {
      SaveValues=Yes;
    }
    CONTROLS
    {
      { 1170170000;;Container;
                  CaptionML=ESP=Opciones;
                  ContainerType=ContentArea }

      { 1170170001;1;Field  ;
                  CaptionML=ESP=Desglosar compuestos;
                  SourceExpr=DesgloseCompuesto }

      { 1170170002;1;Field  ;
                  CaptionML=[ENU=Excel file;
                             ESP=Archivo Excel];
                  SourceExpr=RutaArchivo;
                  OnAssistEdit=VAR
                                 NFich@1170170002 : Text[1024];
                                 CommonDialogMgt@1170170000 : Codeunit 419;
                               BEGIN
                                 //B-VNTES RutaArchivo := CommonDialogMgt.OpenFile(Text006,NFich,2,'',0);
                                 RutaArchivo := CommonDialogMgt.OpenFileDialog(Text006,NFich,TextExcelExt);//VNTES
                               END;
                                }

    }
  }
  LABELS
  {
  }
  CODE
  {
    VAR
      RutaArchivo@1170170038 : Text[100];
      GenExcel@1170170037 : Codeunit 7014607;
      FiltrosEscritos@1170170036 : Boolean;
      ContadorFila@1170170035 : Integer;
      Ventana@1170170034 : Dialog;
      Parcial@1170170033 : Integer;
      Total@1170170032 : Integer;
      FichTemp@1170170031 : File;
      ARCHIVO_TEMPORAL@1170170030 : Text[200];
      Linea@1170170029 : Text[500];
      TablaProducto@1170170028 : Record 27;
      TablaDenom@1170170027 : Record 7014473;
      TablaColorVino@1170170026 : Record 7014455;
      TablaDOC@1170170025 : Record 7014456;
      TablaFormatoBot@1170170024 : Record 7014453;
      TablaFormatoCaja@1170170023 : Record 7014454;
      TablaFormato@1170170022 : Record 7014452;
      TablaA¤ada@1170170021 : Record 7014451;
      TablaObsequio@1170170020 : Record 7014684;
      ArchivoSeleccionado@1170170019 : Boolean;
      DesgloseCompuesto@1170170018 : Boolean;
      RcComponente@1170170017 : Record 90;
      TotalImporte@1170170016 : Decimal;
      ImpPorCompo@1170170015 : Decimal;
      RcPtoCompo@1170170014 : Record 27;
      ImpCalculado@1170170013 : Decimal;
      RcMovPtoTemp@1170170012 : TEMPORARY Record 32;
      NumSigMov@1170170011 : Integer;
      UOMMgt@1170170010 : Codeunit 5402;
      CantidadPorUD@1170170009 : Decimal;
      Columna@1170170008 : Text[30];
      RangoTD@1170170007 : Text[30];
      TotalImpFijo@1170170006 : Decimal;
      GrExist@1170170005 : Record 94;
      TablaCategoria@1170170004 : Record 5722;
      TablaPrecinta@1170170002 : Record 50002;
      TablaProveedor@1170170001 : Record 23;
      TablaPrecio@1170170000 : Record 7012;
      SEPARADOR_COLUMNA@1170170040 : TextConst 'ESP=~';
      Text006@1170170039 : TextConst 'ESP=Importar plantilla excel';
      TextExcelExt@1170170041 : TextConst 'ESP=Ficheros excel|*.xls*';
      Text042@1170170043 : TextConst 'ESP=Factura:';
      Text043@1170170042 : TextConst 'ESP=. Abono:';
      Text007@1170170044 : TextConst 'ESP=Nada que mostrar.';

    PROCEDURE ElimExtExp@1170170005(VAR Parametro@1170170000 : Text[500]);
    BEGIN
      Parametro := CONVERTSTR(Parametro,'µÖàé ‚¡¢£¤¥§¦š°','Á-ÓÚáéíóúñÑºªÜü€');
    END;

    PROCEDURE InicMovPtoTemp@1170170001(VAR MovProd@1170170000 : Record 32;VAR RcCompo@1170170001 : Record 90);
    VAR
      RcProducto@1170170002 : Record 27;
      CantidadCompo@1170170004 : Decimal;
      ImpOrigen@1170170003 : Decimal;
    BEGIN
      //TIPSA I-0364
      RcProducto.CHANGECOMPANY(Company.Name);
      // B-201106 IF NOT RcProducto.GET(RcCompo."No.") THEN
      // B-201106   RcProducto.INIT;
      // I-201106
      RcCompo.TESTFIELD("No.");
      RcProducto.GET(RcCompo."No.");
      // F-201106

      RcMovPtoTemp.RESET;
      RcMovPtoTemp.INIT;
      RcMovPtoTemp.TRANSFERFIELDS(MovProd);
      RcMovPtoTemp."Entry No." := NumSigMov;
      RcMovPtoTemp."Item No." := RcProducto."No.";
      RcMovPtoTemp.Description := RcProducto.Description;
      RcMovPtoTemp."Variant Code" := RcCompo."Variant Code";
      RcMovPtoTemp."Item Category Code" := RcProducto."Item Category Code";
      RcMovPtoTemp."Product Group Code" := RcProducto."Product Group Code";
      //RcMovPtoTemp.Grado := RcProducto.Grado;
      RcMovPtoTemp."Unit of Measure Code" := RcCompo."Unit of Measure Code";
      RcMovPtoTemp."Qty. per Unit of Measure" :=
        UOMMgt.GetQtyPerUnitOfMeasure(RcProducto,RcCompo."Unit of Measure Code");
      CantidadPorUD := 0;
      CantidadCompo := 0;
      CantidadPorUD := UOMMgt.GetQtyPerUnitOfMeasure(RcProducto,RcCompo."Unit of Measure Code");
      CantidadCompo :=
            ROUND(
              RcMovPtoTemp.Quantity * RcCompo."Quantity per" *
              UOMMgt.GetQtyPerUnitOfMeasure(RcProducto,RcCompo."Unit of Measure Code") /
              CantidadPorUD,
              0.00001);
      RcMovPtoTemp.Quantity := CantidadCompo;

      ImpPorCompo := ROUND(RcProducto."Unit Price" *
                RcCompo."Quantity per" *
                UOMMgt.GetQtyPerUnitOfMeasure(RcProducto,RcCompo."Unit of Measure Code") /
                CantidadPorUD,0.01);

      MovProd.CALCFIELDS("Sales Amount (Actual)");
      ImpOrigen := MovProd."Sales Amount (Actual)";

      // I-0421
      ImpOrigen -= TotalImpFijo;
      IF GrExist.GET(RcProducto."Inventory Posting Group") AND
         GrExist."Fijar en compuesto" THEN
         ImpCalculado := ImpPorCompo
      ELSE
      // F-0421
      IF TotalImporte <> 0 THEN
        ImpCalculado := ROUND((ImpOrigen / TotalImporte) * ImpPorCompo,0.01)
      ELSE
        ImpCalculado := 0;

      RcMovPtoTemp."Importe auxiliar temporal" := ImpCalculado;
      RcMovPtoTemp.INSERT;
      NumSigMov := NumSigMov + 1;
      //TIPSA F-0364
    END;

    BEGIN
    END.
  }
  RDLDATA
  {
  }
}

OBJECT Codeunit 50005 Gesti¢n Baines
{
  OBJECT-PROPERTIES
  {
    Date=29/04/20;
    Time=12:30:12;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    OnRun=BEGIN
          END;

  }
  CODE
  {
    VAR
      BAIN0049001@1170170001 : TextConst 'ESP=No se encuentra l¡nea anterior.';
      BAIN0049002@1170170000 : TextConst 'ESP=Margen incumplido no puede ser No.';
      Text50000@1170170002 : TextConst 'ESP=Debe ser autorizado porque no cumple el margen m¡nimo';
      Text0050002@1170170003 : TextConst 'ESP=Se va a crear una factura para el env¡o %1 ¨Est  de acuerdo?';
      Text7014501@1170170004 : TextConst 'ESP=Acci¢n cancelada a petici¢n del usuario.';
      Text0050001@1170170005 : TextConst 'ESP=Factura debe ser seleccionado. El cliente tiene %1 %2. ¨Desea continuar?';
      ConfRegistro@1170170007 : TextConst 'ENU=&Ship,&Invoice,Ship &and Invoice;ESP=&Enviar,E&nviar y asignar factura';
      ConfFactura@1170170006 : TextConst 'ENU=&Ship,&Invoice,Ship &and Invoice;ESP=¨Desea contabilizar la factura N§ %1?';
      ErrExistePrefactura@1170170008 : TextConst 'ESP=Existe una factura sin registrar para ese albar n';

    [EventSubscriber(Table,37,OnAfterUpdateUnitPrice)]
    LOCAL PROCEDURE ComisionTraerDespuesDeActualizarPrecioLinVenta@1170170000(VAR SalesLine@1170170000 : Record 37;xSalesLine@1170170001 : Record 37;CalledByFieldNo@1170170002 : Integer;CurrFieldNo@1170170003 : Integer);
    VAR
      ConfComision@1170170004 : Record 7014622;
      SalesHeader@1170170005 : Record 36;
    BEGIN
      //I-BAIN-0025
      WITH SalesLine DO BEGIN
        IF NOT SalesHeader.GET("Document Type","Document No.") THEN
          EXIT;
        IF "Bill-to Customer No." = '' THEN
          ConfComision.INIT
        ELSE
        ConfComision.BuscarComision(SalesHeader,SalesLine);
        "% comisi¢n" := ConfComision."% comisi¢n";
      END;
    END;

    [EventSubscriber(Table,37,OnAfterUpdateAmounts)]
    LOCAL PROCEDURE ComisionCalcularImporteDespuesDeActualizarImporteLinVenta@1170170003(VAR SalesLine@1170170000 : Record 37;VAR xSalesLine@1170170001 : Record 37;CurrentFieldNo@1170170002 : Integer);
    BEGIN
      WITH SalesLine DO
        VALIDATE("% comisi¢n");
    END;

    [EventSubscriber(Codeunit,80,OnAfterDivideAmount)]
    LOCAL PROCEDURE ComisionDividirImporteAlRegistrarVenta@1170170001(SalesHeader@1170170000 : Record 36;VAR SalesLine@1170170001 : Record 37;QtyType@1170170002 : 'General,Invoicing,Shipping';SalesLineQty@1170170003 : Decimal;VAR TempVATAmountLine@1170170004 : TEMPORARY Record 290;VAR TempVATAmountLineRemainder@1170170005 : TEMPORARY Record 290);
    VAR
      Currency@1170170006 : Record 4;
    BEGIN
      WITH SalesLine DO BEGIN
        Currency.Initialize("Currency Code");
        IF Quantity <> 0 THEN
                "Importe comisi¢n (DL)" :=
                  ROUND("Importe comisi¢n (DL)" * SalesLineQty / Quantity,Currency."Amount Rounding Precision")
        ELSE
          SalesLine."Importe comisi¢n (DL)" := 0;
      END;
    END;

    [EventSubscriber(Codeunit,80,OnAfterReverseAmount)]
    LOCAL PROCEDURE ComisionInvertirSignoImporteAlRegistrarVenta@1170170004(VAR SalesLine@1170170000 : Record 37);
    BEGIN
      WITH SalesLine DO
        "Importe comisi¢n (DL)" := -"Importe comisi¢n (DL)";
    END;

    [EventSubscriber(Codeunit,80,OnAfterIncrAmount)]
    LOCAL PROCEDURE ComisionIncrementarImporteAlRegistrarVenta@1170170005(VAR TotalSalesLine@1170170000 : Record 37;SalesLine@1170170001 : Record 37;SalesHeader@1170170002 : Record 36);
    BEGIN
      WITH SalesLine DO
        TotalSalesLine."Importe comisi¢n (DL)" := TotalSalesLine."Importe comisi¢n (DL)" + "Importe comisi¢n (DL)";
    END;

    PROCEDURE ConjuntoLookpNoLinVenta@1170170002(VAR SalesLine@1170170000 : Record 37);
    VAR
      FmProd@1170170007 : Page 31;
      FmRec@1170170006 : Page 77;
      FmCta@1170170005 : Page 18;
      FmTxtStd@1170170004 : Page 8;
      FmActFijo@1170170003 : Page 5601;
      FmCargo@1170170002 : Page 5800;
      Prod@1170170001 : Record 27;
      StdTxt@1170170008 : Record 7;
      GLAcc@1170170009 : Record 15;
      Item@1170170010 : Record 27;
      Resource@1170170011 : Record 156;
      FA@1170170012 : Record 5600;
      ItemCharge@1170170013 : Record 5800;
    BEGIN
      WITH SalesLine DO BEGIN
        // I-23069
        CASE Type OF
          Type::" ":
            BEGIN
              CLEAR(FmTxtStd);
              FmTxtStd.LOOKUPMODE := TRUE;
              IF "No." <> '' THEN
                IF StdTxt.GET("No.") THEN
                  FmTxtStd.SETRECORD(StdTxt);
              IF FmTxtStd.RUNMODAL = ACTION::LookupOK THEN BEGIN
                FmTxtStd.GETRECORD(StdTxt);
                VALIDATE("No.",StdTxt.Code);
              END;
            END;
          Type::"G/L Account":
            BEGIN
              CLEAR(FmCta);
              FmCta.LOOKUPMODE := TRUE;
              IF "No." <> '' THEN
                IF GLAcc.GET("No.") THEN
                  FmCta.SETRECORD(GLAcc);
              IF FmCta.RUNMODAL = ACTION::LookupOK THEN BEGIN
                FmCta.GETRECORD(GLAcc);
                VALIDATE("No.",GLAcc."No.");
              END;
            END;
          Type::Item:
            BEGIN
              CLEAR(FmProd);
              FmProd.LOOKUPMODE := TRUE;
              IF "No." <> '' THEN
                IF Prod.GET("No.") THEN
                  FmProd.SETRECORD(Prod);
              IF "C¢d. conjunto" <> '' THEN BEGIN // 311014
              Prod.SETCURRENTKEY("C¢d. conjunto");
              Prod.SETRANGE("C¢d. conjunto","C¢d. conjunto");
              END; // 311014
              FmProd.SETTABLEVIEW(Prod);
              IF FmProd.RUNMODAL = ACTION::LookupOK THEN BEGIN
                FmProd.GETRECORD(Item);
                VALIDATE("No.",Item."No.");
              END;
            END;
          Type::Resource:
            BEGIN
              CLEAR(FmRec);
              FmRec.LOOKUPMODE := TRUE;
              IF "No." <> '' THEN
                IF Resource.GET("No.") THEN
                  FmRec.SETRECORD(Resource);
              IF FmRec.RUNMODAL = ACTION::LookupOK THEN BEGIN
                FmRec.GETRECORD(Resource);
                VALIDATE("No.",Resource."No.");
              END;
            END;
          Type::"Fixed Asset":
            BEGIN
              CLEAR(FmActFijo);
              FmActFijo.LOOKUPMODE := TRUE;
              IF "No." <> '' THEN
                IF FA.GET("No.") THEN
                  FmActFijo.SETRECORD(FA);
              IF FmActFijo.RUNMODAL = ACTION::LookupOK THEN BEGIN
                FmActFijo.GETRECORD(FA);
                VALIDATE("No.",FA."No.");
              END;
            END;
          Type::"Charge (Item)":
            BEGIN
              CLEAR(FmCargo);
              FmCargo.LOOKUPMODE := TRUE;
              IF "No." <> '' THEN
                IF ItemCharge.GET("No.") THEN
                  FmCargo.SETRECORD(ItemCharge);
              IF FmCargo.RUNMODAL = ACTION::LookupOK THEN BEGIN
                FmCargo.GETRECORD(ItemCharge);
                VALIDATE("No.",ItemCharge."No.");
              END;
            END;
        END;
        // F-23069
      END;
    END;

    [EventSubscriber(Table,37,OnValidateNoOnCopyFromTempSalesLine)]
    LOCAL PROCEDURE ConjuntoDespuesDeValidarNoCopiarTempLinesLinVenta@1170170007(VAR SalesLine@1170170000 : Record 37;VAR TempSalesLine@1170170001 : TEMPORARY Record 37);
    VAR
      Item@1170170003 : Record 27;
    BEGIN
      //I-23069
      SalesLine."C¢d. conjunto" := TempSalesLine."C¢d. conjunto";
      //F-23069
    END;

    [EventSubscriber(Table,37,OnAfterAssignFieldsForNo)]
    LOCAL PROCEDURE ConjuntoDespuesDeIniciarNoLinVenta@1170170006(VAR SalesLine@1170170000 : Record 37;VAR xSalesLine@1170170001 : Record 37;SalesHeader@1170170002 : Record 36);
    VAR
      Item@1170170003 : Record 27;
    BEGIN
      //I-23069
      WITH SalesLine DO BEGIN
        IF Type <> Type::Item THEN
          EXIT;
        IF Item.GET("No.") THEN
          "C¢d. conjunto" := Item."C¢d. conjunto";
      END;
      //F-23069
    END;

    [EventSubscriber(Table,7023,OnAfterValidateEvent,"Item No.")]
    LOCAL PROCEDURE TarifaCosteAlValidarProductoHojaTarifas@1170170008(VAR Rec@1170170000 : Record 7023;VAR xRec@1170170001 : Record 7023;CurrFieldNo@1170170002 : Integer);
    VAR
      RcItems@1170170003 : Record 27;
      RcProveedor@1170170004 : Record 23;
    BEGIN
      //I-BAIN-060308
      WITH Rec DO BEGIN
        IF NOT RcItems.GET("Item No.") THEN
          RcItems.INIT;
        IF RcProveedor.GET(RcItems."Vendor No.") THEN BEGIN
          "N§  Proveedor" := RcProveedor."No.";
          "Nombre proveedor" := RcProveedor.Name;
        END;
      END;
      //F-BAIN-060308
    END;

    [EventSubscriber(Table,37,OnAfterUpdateUnitPrice)]
    LOCAL PROCEDURE MargenMinimoTraerALinventaDespuesDeActualizarPrecioLinVenta@1170170009(VAR SalesLine@1170170000 : Record 37;xSalesLine@1170170001 : Record 37;CalledByFieldNo@1170170002 : Integer;CurrFieldNo@1170170003 : Integer);
    BEGIN
      MargenMinimoTraerLinVenta(SalesLine);
    END;

    [EventSubscriber(Table,37,OnAfterUpdateAmounts)]
    LOCAL PROCEDURE MargenMinimoCalcularMargenRealDespuesDeActualizarImporteLinVenta@1170170016(VAR SalesLine@1170170000 : Record 37;VAR xSalesLine@1170170001 : Record 37;CurrentFieldNo@1170170002 : Integer);
    BEGIN
      MargenminimoCalcMargenRealLinVenta(SalesLine);
    END;

    PROCEDURE MargenMinimoTraerLinVenta@1170170029(VAR SalesLine@1170170001 : Record 37);
    VAR
      MargenMin@1170170000 : Record 50005;
    BEGIN
        //I-BAIN-0034
      WITH SalesLine DO BEGIN
        IF NOT MargenMin.GET(MargenMin."Sales Type"::"Customer Price Group",
                             "Customer Price Group",
                             "No.") THEN MargenMin.INIT;
        "% margen m¡nimo" := MargenMin."% margen";
      END;
        //F-BAIN-0034
    END;

    PROCEDURE MargenminimoCalcMargenRealLinVenta@1170170035(VAR SalesLine@1170170005 : Record 37);
    VAR
      ImporteBase@1170170000 : Decimal;
      Currency2@1170170001 : Record 4;
      LinVta@1170170002 : Record 37;
      Prod2@1170170003 : Record 27;
      ImpCosteTarifa@1170170004 : Decimal;
      Item@1170170006 : Record 27;
      CurrExchRate@1170170007 : Record 330;
      SalesHeader@1170170008 : Record 36;
      LinVentaTot@1170170009 : Record 37;
    BEGIN
      //I-BAIN-0034
      // BAIN-0049 Cuidad¡n que aqu¡ no se calcula autom tico siempre para las l¡neas de promoci¢n. S¢lo se calcula
      // en el informe y al registrar
      WITH SalesLine DO BEGIN
        Item."No." := '';
        IF (Type <> Type::Item) OR ("No." = '') THEN BEGIN
          "% margen real" := 0;
          EXIT;
        END;
        IF NOT Item.GET("No.") THEN
          Item.INIT;
        IF (Item."Precio coste tarifa" = 0) OR ("Quantity (Base)" = 0)  THEN BEGIN
          "% margen real" := 0;
          EXIT;
        END;
        // I-BAIN-0049
        IF Promotion THEN BEGIN
          "% margen real" := 0;
          EXIT;
        END;
        // F-BAIN-0049
        ImporteBase := "Line Amount" - "Inv. Discount Amount" - "Pmt. Discount Amount";
        IF NOT SalesHeader.GET("Document Type","Document No.") THEN
          SalesHeader.INIT;
        IF "Currency Code" <> '' THEN BEGIN
          GetSalesHeader;
          Currency2.GET("Currency Code");
          ImporteBase :=
            ROUND(
              CurrExchRate.ExchangeAmtFCYToLCY(
                WORKDATE,"Currency Code",
                ImporteBase,SalesHeader."Currency Factor"),
                Currency2."Amount Rounding Precision")
        END;
        // I-BAIN-0049
        LinVentaTot.RESET;
        // b-18017  LinVentaTot.SETCURRENTKEY("N§ promoci¢n",Promoci¢n);
        LinVentaTot.SETCURRENTKEY("Promo No.",Promotion);  // 18017
        LinVentaTot.SETRANGE("Promo No.","Promo No.");
        LinVentaTot.SETRANGE(Promotion,TRUE);
        LinVentaTot.SETRANGE("Promo Source Line No.","Line No.");
        LinVentaTot.SETRANGE(Type,LinVentaTot.Type::Item);  // 18017
        ImpCosteTarifa := Item."Precio coste tarifa" * "Quantity (Base)";
        IF LinVentaTot.FIND('-') THEN REPEAT
          // b-18017  IF (LinVentaTot.Type = LinVentaTot.Type::Item) AND (Prod2.GET(LinVentaTot."No.")) THEN
          IF Prod2.GET(LinVentaTot."No.") THEN  // 18017
            ImpCosteTarifa += Item."Precio coste tarifa" * LinVentaTot."Quantity (Base)";
        UNTIL LinVentaTot.NEXT = 0;

        "% margen real" := ((ImporteBase * 100) / ImpCosteTarifa) - 100;
        // F-BAIN-0049
      END;
    END;

    PROCEDURE MargenMinimoAutorizar@1170170031(VAR SalesLine@1170170001 : Record 37);
    VAR
      ConfUsu@1170170000 : Record 91;
    BEGIN
      WITH SalesLine DO BEGIN
        //I-BAIN-0034
        // B-BAIN-0049 TESTFIELD("Margen incumplido");
        // I-BAIN-0049
        IF NOT MargenMinimoIncumplidoLinVenta(SalesLine) THEN
          ERROR(BAIN0049002);
        // F-BAIN-0049
        ConfUsu.GET(USERID);
        ConfUsu.TESTFIELD("Autoriza margen m¡nimo ventas");
        "Usuario autorizaci¢n margen" := USERID;
      END;
        //F-BAIN-0034
    END;

    PROCEDURE MargenMinimoComprobarAutorizaci¢n@1170170037(VAR SalesLine@1170170000 : Record 37);
    VAR
      ConfVtas@1170170001 : Record 311;
    BEGIN
      WITH SalesLine DO BEGIN
        //I-BAIN-0034
        IF "Document Type" IN ["Document Type"::"Credit Memo",
                               "Document Type"::"Return Order"] THEN EXIT;
        IF Type <> Type::Item THEN EXIT;

        IF NOT MargenMinimoIncumplidoLinVenta(SalesLine) THEN EXIT;
        ConfVtas.GET;
        IF NOT ConfVtas."Bloqueo margen m¡nimo ventas" THEN EXIT;
        IF "Usuario autorizaci¢n margen" = '' THEN
          FIELDERROR("Usuario autorizaci¢n margen",Text50000);
        //F-BAIN-0034
      END;
    END;

    PROCEDURE MargenMinimoIncumplidoLinVenta@1170170039(SalesLine@1170170000 : Record 37) : Boolean;
    VAR
      Item@1170170001 : Record 27;
    BEGIN
      WITH SalesLine DO BEGIN
        // I-BAIN-0049
        MargenminimoCalcMargenRealLinVenta(SalesLine);
        IF NOT Item.GET("No.") THEN
          Item.INIT;
        IF (Type <> Type::Item) OR ("No." = '') OR (Item."Precio coste tarifa" = 0) OR ("Quantity (Base)" = 0) OR Promotion THEN
          EXIT(FALSE);
        EXIT("% margen m¡nimo" > "% margen real");
        // F-BAIN-0049
      END;
    END;

    [EventSubscriber(Codeunit,80,OnBeforePostSalesDoc)]
    LOCAL PROCEDURE MargenMinimoComprobarAntesRegistrarVenta@1170170020(VAR Sender@1170170000 : Codeunit 80;VAR SalesHeader@1170170001 : Record 36;CommitIsSuppressed@1170170002 : Boolean;PreviewMode@1170170003 : Boolean;VAR HideProgressWindow@1170170004 : Boolean);
    VAR
      SalesLine@1170170005 : Record 37;
    BEGIN
      WITH SalesLine DO BEGIN
        SETRANGE("Document Type",SalesHeader."Document Type");
        SETRANGE("Document No.",SalesHeader."No.");
        IF NOT FINDSET THEN
          EXIT;
        REPEAT
          MargenMinimoComprobarAutorizaci¢n(SalesLine);
        UNTIL NEXT = 0;
      END;
    END;

    [EventSubscriber(Codeunit,6620,OnAfterInitSalesLineFields)]
    LOCAL PROCEDURE MargenMinimoInicializarUsarioAlCopiarDoc@1170170010(VAR SalesLine@1170170000 : Record 37);
    BEGIN
      SalesLine."Usuario autorizaci¢n margen" := '';
    END;

    [EventSubscriber(Table,37,OnBeforeInsertEvent)]
    LOCAL PROCEDURE PromocionManualPonerLineapromoAlInsertarLinVenta@1170170011(VAR Rec@1170170000 : Record 37;RunTrigger@1170170001 : Boolean);
    BEGIN
      // I-BAIN-0049
      WITH Rec DO BEGIN
      IF ("Promo Code" <> '') AND ("Promo Source Line No." = 0) THEN BEGIN
        "Promo Source Line No." := PromocionManualBuscaLineaBasePromo(Rec);
        IF "Promo Source Line No." = 0 THEN
          ERROR(BAIN0049001);
      END;
      // F-BAIN-0049
      END;
    END;

    PROCEDURE PromocionManualBuscaLineaBasePromo@1170170026(SalesLine@1170170001 : Record 37) : Integer;
    VAR
      LinVta@1170170000 : Record 37;
    BEGIN
      // I-BAIN-0049
      WITH SalesLine DO BEGIN
        LinVta.SETRANGE("Document Type","Document Type");
        LinVta.SETRANGE("Document No.","Document No.");
        LinVta.SETRANGE("Line No.",0,"Line No." - 1);
        LinVta.SETRANGE(Type,Type::Item);
        LinVta.SETRANGE(Promotion,FALSE);
        // B-BAIN-0119  IF NOT LinVta.FIND('-') THEN
        IF NOT LinVta.FIND('+') THEN  // BAIN-0119
          EXIT(0);
        EXIT(LinVta."Line No.");
      END;
      // F-BAIN-0049
    END;

    [EventSubscriber(Table,37,OnAfterValidateEvent,"Promo Code")]
    LOCAL PROCEDURE PromocionManualGrabarAlValoidarCodigoPromocionLinVenta@1170170021(VAR Rec@1170170000 : Record 37;VAR xRec@1170170001 : Record 37;CurrFieldNo@1170170002 : Integer);
    BEGIN
      // I-BAIN-0049
      WITH Rec DO BEGIN
        IF "Promo Code" <> '' THEN BEGIN
          Promotion := TRUE;
          "Promoci¢n manual" := TRUE;
          VALIDATE("Line Discount %",100);
          IF "Line No." <> 0 THEN BEGIN
            "Promo Source Line No." := PromocionManualBuscaLineaBasePromo(Rec);
            IF "Promo Source Line No." = 0 THEN
              ERROR(BAIN0049001);
          END;
        END;
      END;
      // F-BAIN-0049
    END;

    [EventSubscriber(Codeunit,80,OnBeforePostSalesDoc)]
    LOCAL PROCEDURE PromocionManualComprobarAntesRegistrarVenta@1170170012(VAR Sender@1170170000 : Codeunit 80;VAR SalesHeader@1170170001 : Record 36;CommitIsSuppressed@1170170002 : Boolean;PreviewMode@1170170003 : Boolean;VAR HideProgressWindow@1170170004 : Boolean);
    VAR
      SalesSetup@1170170005 : Record 311;
      SalesLine@1170170006 : Record 37;
    BEGIN
      SalesSetup.GET;
      IF NOT SalesSetup."Prom. oblig. l¡ns.importe cero" THEN
        EXIT;
      WITH SalesHeader DO BEGIN
        SalesLine.RESET;
        SalesLine.SETRANGE("Document Type","Document Type");
        SalesLine.SETRANGE("Document No.","No.");
        SalesLine.SETRANGE(Type,SalesLine.Type::Item);
        SalesLine.SETRANGE(SalesLine."Line Type",SalesLine."Line Type"::Normal);
        SalesLine.SETRANGE("Line Amount",0);
        IF SalesLine.FIND('-') THEN REPEAT
            SalesLine.TESTFIELD("Promo Code");
            SalesLine.TESTFIELD(Promotion);
            SalesLine.TESTFIELD("Promo Source Line No.");
        UNTIL SalesLine.NEXT = 0;
      END;
    END;

    [EventSubscriber(Codeunit,7014458,OnBeforeBorrarLineasPromocion)]
    LOCAL PROCEDURE PromocionManualOnBeforeBorrarLineasPromocionCalcPromo@1170170013(VAR SalesLine@1170170000 : Record 37);
    BEGIN
      SalesLine.SETRANGE("Promoci¢n manual",FALSE);
    END;

    [EventSubscriber(Codeunit,7014458,OnBeforeReturnExistePromocion)]
    LOCAL PROCEDURE PromocionManualOnBeforeReturnExistePromocion@1170170017(VAR SalesLine@1170170000 : Record 37);
    BEGIN
      SalesLine.SETRANGE("Promoci¢n manual",FALSE);
    END;

    [EventSubscriber(Codeunit,7014458,OnBeforeInsertarLineaPromocion)]
    LOCAL PROCEDURE PromocionManualOnBeforeOnBeforeInsertarLineaPromocion@1170170014(VAR SalesLineOrigen@1170170000 : Record 37;VAR SalesLinePromocion@1170170001 : Record 37);
    VAR
      LinVtaPromoMan@1170170002 : Record 37;
    BEGIN
      // I-BAIN-0049
      MargenminimoCalcMargenRealLinVenta(SalesLineOrigen);
      SalesLineOrigen.MODIFY;
      LinVtaPromoMan.RESET;
      LinVtaPromoMan.SETCURRENTKEY("Document Type","Document No.","Line No.");
      LinVtaPromoMan.SETRANGE("Document Type",SalesLineOrigen."Document Type");
      LinVtaPromoMan.SETRANGE("Document No.",SalesLineOrigen."Document No.");
      LinVtaPromoMan.SETRANGE("Promo Source Line No.",SalesLineOrigen."Line No.");
      LinVtaPromoMan.SETRANGE("Promoci¢n manual",TRUE);
      LinVtaPromoMan.MODIFYALL("Promo No.",SalesLineOrigen."Promo No.");
      // F-BAIN-0049
    END;

    PROCEDURE PrefacturacionCrearFacturaAlbaran@1170170015(SalesHeader@1170170003 : Record 36;SalesShptHeader@1170170004 : Record 110);
    VAR
      CabFact@1170170000 : Record 36;
      SalesGetShpt@1170170001 : Codeunit 64;
      LinAlbVta@1170170002 : Record 111;
      NoSeriesMgt@1170170005 : Codeunit 396;
    BEGIN
      //I-BAIN-0038
      //OJO faltan las cosas de carga
      IF NOT SalesHeader.Ship THEN EXIT;
      IF SalesHeader.Invoice THEN EXIT;
      IF SalesHeader."Document Type" <> SalesHeader."Document Type"::Order THEN EXIT;
      IF SalesShptHeader."No." = '' THEN EXIT;
      IF NOT SalesHeader."Asignar n§ factura" THEN EXIT;
      IF NOT CONFIRM(Text0050002,TRUE,SalesShptHeader."No.") THEN
        ERROR(Text7014501);
      CabFact."Document Type" := CabFact."Document Type"::Invoice;
      CabFact.INSERT(TRUE);
      CabFact.VALIDATE("Sell-to Customer No.",SalesShptHeader."Bill-to Customer No.");
      CabFact.VALIDATE("Posting Date",SalesShptHeader."Posting Date");

      CabFact.VALIDATE("Payment Terms Code",SalesHeader."Payment Terms Code");
      CabFact.VALIDATE("Payment Method Code",SalesHeader."Payment Method Code");
      CabFact.VALIDATE("Payment Discount %",SalesHeader."Payment Discount %");
      CabFact.VALIDATE("Ship-to Code",SalesHeader."Ship-to Code");//140708
      CabFact.VALIDATE("External Document No.",SalesHeader."External Document No.");//170708
      //Falta CabFact."Enviar factura en carga alb." := SalesHeader."Enviar factura en carga alb."; // 24044 ts

      IF (CabFact."No. Series" <> CabFact."Posting No. Series")
      THEN BEGIN
        CabFact."Posting No." := NoSeriesMgt.GetNextNo(CabFact."Posting No. Series",
                                 CabFact."Posting Date",TRUE);
      END;
      //Falta CabFact."N§ orden carga" := SalesShptHeader."N§ orden carga"; // BAIN-0026
      CabFact.MODIFY;
      //Falta RcComentarios.PasarComentarioAFctra(SalesHeader,CabFact);//BAIN-050608
      LinAlbVta.RESET;
      LinAlbVta.SETRANGE("Document No.",SalesShptHeader."No.");

      SalesGetShpt.SetSalesHeader(CabFact);
      SalesGetShpt.CreateInvLines(LinAlbVta);
      //F-BAIN-0038
    END;

    [EventSubscriber(Codeunit,80,OnAfterFinalizePostingOnBeforeCommit)]
    LOCAL PROCEDURE PrefacturacionCrearFacturaAlbaranOnAfterFinalizePostingOnBeforeCommit@1170170018(VAR SalesHeader@1170170000 : Record 36;VAR SalesShipmentHeader@1170170001 : Record 110;VAR SalesInvoiceHeader@1170170002 : Record 112;VAR SalesCrMemoHeader@1170170003 : Record 114;VAR ReturnReceiptHeader@1170170004 : Record 6660;VAR GenJnlPostLine@1170170005 : Codeunit 12;CommitIsSuppressed@1170170006 : Boolean;PreviewMode@1170170007 : Boolean);
    BEGIN
      //I-BAIN-0038
      PrefacturacionCrearFacturaAlbaran(SalesHeader,SalesShipmentHeader);
      //F-BAIN-0038
    END;

    [EventSubscriber(Codeunit,80,OnBeforePostSalesDoc)]
    LOCAL PROCEDURE PrefacturacionValidarAntesDeRegistrar@1170170019(VAR Sender@1170170000 : Codeunit 80;VAR SalesHeader@1170170001 : Record 36;CommitIsSuppressed@1170170002 : Boolean;PreviewMode@1170170003 : Boolean;VAR HideProgressWindow@1170170004 : Boolean);
    VAR
      Cust@1170170005 : Record 18;
    BEGIN
      //I-BAIN-0038
      WITH SalesHeader DO BEGIN
        IF NOT Cust.GET("Bill-to Customer No.") THEN
          EXIT;
        //I-BAIN-0022
        IF ("Document Type" = "Document Type"::Order) AND
          (Cust."Tipo facturaci¢n" = Cust."Tipo facturaci¢n"::"Factura por albar n")
        // B-BAIN-0038  AND (NOT Invoice) THEN
          AND (NOT (Invoice OR "Asignar n§ factura")) THEN // BAIN-0038
          IF NOT CONFIRM(Text0050001,FALSE,
                    Cust.FIELDCAPTION("Tipo facturaci¢n"),Cust."Tipo facturaci¢n") THEN
            ERROR(Text7014501);
        //F-BAIN-0022
      END;
      //F-BAIN-0038
    END;

    LOCAL PROCEDURE PrefacturacionConfirmarRegistrarPedidoSiNo@1170170030(VAR SalesHeader@1170170000 : Record 36;VAR HideDialog@1170170001 : Boolean;VAR IsHandled@1170170002 : Boolean;VAR DefaultOption@1170170003 : Integer);
    VAR
      ConfVtas@1170170005 : Record 311;
      Selection@1170170006 : Integer;
      Cliente@1170170007 : Record 18;
    BEGIN
      //I-BAIN-0038
      WITH SalesHeader DO BEGIN
        IF "Document Type" <> "Document Type"::Order THEN
          EXIT;
        "Asignar n§ factura" := FALSE;
        ConfVtas.GET;
        IF ConfVtas."Omitir facturar en pedido" THEN BEGIN
          IF "Posting No." <> '' THEN BEGIN
            IF CONFIRM(ConfFactura,TRUE,"Posting No.") THEN BEGIN
              Ship := FALSE;
              Invoice := TRUE;
              "Asignar n§ factura" := FALSE;
              Selection := 2;
            END ELSE
              Selection := 0;
          END ELSE BEGIN
            Cliente.GET("Sell-to Customer No.");
            IF Cliente."Tipo facturaci¢n" = Cliente."Tipo facturaci¢n"::"Factura por albar n" THEN
              Selection := STRMENU(ConfRegistro,2)
            ELSE
               Selection := STRMENU(ConfRegistro,1);
            Ship := TRUE;
            Invoice := FALSE;
            "Asignar n§ factura" := (Selection = 2);
          END;
          MODIFY;
          HideDialog := TRUE;
          IsHandled := (Selection = 0);
          EXIT;
        END;
        DefaultOption := 1;
      END;
      //F-BAIN-0038
    END;

    [EventSubscriber(Codeunit,81,OnBeforeConfirmSalesPost)]
    LOCAL PROCEDURE PrefacturacionAntesDelConfirmRegistrar@1170170034(VAR SalesHeader@1170170000 : Record 36;VAR HideDialog@1170170001 : Boolean;VAR IsHandled@1170170002 : Boolean;VAR DefaultOption@1170170003 : Integer;VAR PostAndSend@1170170004 : Boolean);
    BEGIN
      //I-BAIN-0038
      PrefacturacionConfirmarRegistrarPedidoSiNo(SalesHeader,HideDialog,IsHandled,DefaultOption);
      //F-BAIN-0038
    END;

    [EventSubscriber(Codeunit,82,OnBeforeConfirmPost)]
    LOCAL PROCEDURE PrefacturacionAntesDelConfirmRegistrarImprimir@1170170041(VAR SalesHeader@1170170000 : Record 36;VAR HideDialog@1170170001 : Boolean;VAR IsHandled@1170170002 : Boolean;VAR SendReportAsEmail@1170170003 : Boolean;VAR DefaultOption@1170170004 : Integer);
    BEGIN
      //I-BAIN-0038
      PrefacturacionConfirmarRegistrarPedidoSiNo(SalesHeader,HideDialog,IsHandled,DefaultOption);
      //F-BAIN-0038
    END;

    [EventSubscriber(Codeunit,82,OnBeforePrintShip)]
    LOCAL PROCEDURE PrefacturacionImprimirPrefacturaAntesAlbaran@1170170022(VAR SalesHeader@1170170000 : Record 36;SendReportAsEmail@1170170001 : Boolean;VAR IsHandled@1170170002 : Boolean);
    VAR
      CabFact@1170170003 : Record 36;
      SalesCalcDiscount@1170170004 : Codeunit 60;
      SalesLine@1170170005 : Record 37;
    BEGIN
      //I-BAIN-0038
      IF NOT PrefacturacionObtenerPrefactura(SalesHeader."Last Shipping No.",CabFact) THEN
        EXIT;
      CabFact.SETRECFILTER;
      SalesCalcDiscount.CalculateWithSalesHeader(CabFact,SalesLine);
      CabFact.FIND;
      //Falta REPORT.RUN(REPORT::"Prefactura ventas",FALSE,FALSE,CabFact);
      REPORT.RUN(REPORT::"Sales Document - Test",FALSE,FALSE,CabFact);//Quitar
      //Falta IF CabFact.FIND('-') THEN CabFact.ImprimirReciboSinRegistrar(FALSE);
    END;

    PROCEDURE PrefacturacionObtenerPrefactura@1170170027(NoAlbaran@1170170000 : Code[20];VAR PreFactura@1170170001 : Record 36) : Boolean;
    VAR
      SalesLine@1170170002 : Record 37;
    BEGIN
      WITH SalesLine DO BEGIN
        SETCURRENTKEY("Document Type","Shipment No.","Shipment Line No.");
        SETRANGE("Document Type","Document Type"::Invoice);
        SETRANGE("Shipment No.",NoAlbaran);
        IF NOT FINDFIRST THEN
          EXIT;
        EXIT(PreFactura.GET("Document Type","Document No."));
      END;
    END;

    [EventSubscriber(Codeunit,5815,OnBeforeCheckSalesShptLine)]
    PROCEDURE PrefacturacionValidarAnularAlbaran@1170170023(VAR SalesShipmentLine@1170170001 : Record 111;VAR IsHandled@1170170002 : Boolean;VAR SkipTestFields@1170170003 : Boolean;VAR SkipUndoPosting@1170170004 : Boolean;VAR SkipUndoInitPostATO@1170170005 : Boolean);
    VAR
      LinFact@1170170000 : Record 37;
    BEGIN
      //I-BAIN-0038
      LinFact.SETCURRENTKEY("Document Type","Shipment No.","Shipment Line No.");
      LinFact.SETRANGE("Document Type",LinFact."Document Type"::Invoice);
      LinFact.SETRANGE("Shipment No.",SalesShipmentLine."Document No.");
      LinFact.SETRANGE("Shipment Line No.",SalesShipmentLine."Line No.");
      IF LinFact.FIND('-') THEN
        ERROR(ErrExistePrefactura);
      //F-BAIN-0038
    END;

    BEGIN
    END.
  }
}

OBJECT Codeunit 7014458 Ventas-Calc. dto. promocional
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=17:59:13;
    Modified=Yes;
    Version List=VNTES13.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    TableNo=37;
    OnRun=BEGIN
            LicenseManagement.TestVinoTECLicense;
            LinVtas.COPY(Rec);

            CabVentasTemp.GET("Document Type","Document No.");
            CalcularDtoPromocional(CabVentasTemp,LinVtasTemp);

            Rec := LinVtas;
          END;

  }
  CODE
  {
    VAR
      CabVentasTemp@1170170000 : Record 36;
      LinVtas@1170170001 : Record 37;
      LinVtasTemp@1170170002 : Record 37;
      ProductoPromocionado@1170170004 : Record 7014463;
      LinVenta3@1170170005 : Record 37;
      NLin@1170170006 : Integer;
      BuscarPromocionProducto@1170170007 : Codeunit 7014550;
      Quitar@1170170008 : Integer;
      ConfVtas@1170170009 : Record 311;
      bConfirmar@1170170010 : Boolean;
      QtyBasePr@1170170012 : Decimal;
      Prod@1170170014 : Record 27;
      ProdPromocion@1170170015 : Record 27;
      LinVenta4@1170170016 : Record 37;
      Promo@1170170017 : Record 7014540;
      CdadPromo@1170170013 : Decimal;
      Text001@1170170011 : TextConst 'ESP=La promoci¢n para el producto %1 no especifica cliente ni grupo descuento. ¨Desea aplicarla?';
      Text002@1170170018 : TextConst 'ESP=Es imposible descontar del pedido la cantidad promocionada. Compruebe cual debiera ser el volumen del mismo.';
      Text003@1170170019 : TextConst 'ESP=El c lculo de promociones supondr  el borrado de las l¡neas de promoci¢n existentes y su configuraci¢n asociada. ¨Desea saltarse el c lculo?';
      LicenseManagement@1170170003 : Codeunit 7014497;

    LOCAL PROCEDURE CalcularDtoPromocional@1(VAR CabVenta@1170170000 : Record 36;VAR LinVenta2@1170170001 : Record 37);
    VAR
      CGCta@1170170002 : Record 15;
      LinVentaTot@1170170003 : Record 37;
      LinVentaTot2@1100002 : Record 37;
      UsaPAnt@1100001 : Boolean;
      PrecioAnt@1100000 : Decimal;
      UdadMed@1170170004 : Record 5404;
      NoProdPdo@1170170005 : Code[20];
      LinVtaPromoMan@1170000000 : Record 37;
    BEGIN
      WITH LinVtas DO BEGIN
        ConfVtas.GET;
        IF RECORDLEVELLOCKING THEN
          LOCKTABLE;

        LinVenta2.RESET;
        LinVenta2.SETRANGE("Document Type","Document Type");
        LinVenta2.SETRANGE("Document No.","Document No.");
        IF LinVenta2.FIND('+') THEN NLin := LinVenta2."Line No." + 10000
        ELSE NLin := 10000;
        LinVenta2.SETRANGE(Promotion,TRUE);
        LinVenta2.SETRANGE("Quantity Shipped",0);

        IF NOT LinVenta2.ISEMPTY THEN
          IF CONFIRM(Text003,FALSE) THEN
            EXIT;
        OnBeforeBorrarLineasPromocion(LinVenta2);//BAIN-0049
        LinVenta2.DELETEALL(TRUE);
        LinVenta2.RESET;
        LinVenta2.SETRANGE("Document Type","Document Type");
        LinVenta2.SETRANGE("Document No.","Document No.");
        LinVenta2.SETRANGE(Type,LinVenta2.Type::Item);
        LinVenta2.SETRANGE(Promotion,FALSE);
        COMMIT;

        IF LinVenta2.FIND('-') THEN REPEAT
          Prod.GET(LinVenta2."No.");
          Prod.CALCFIELDS("Variante obligatoria");
          IF Prod."Variante obligatoria" THEN
            LinVenta2.TESTFIELD("Variant Code")
          ELSE
            LinVenta2.TESTFIELD("Variant Code",'');
          IF LinVenta2."Promo Source Line No." = 0 THEN BEGIN
            LinVentaTot.RESET;
            LinVentaTot.SETCURRENTKEY("Document Type","Document No.",Type,"No.","Variant Code",
                                      "Unit of Measure Code","Quantity Shipped");
            LinVentaTot.SETRANGE("Document Type",LinVenta2."Document Type");
            LinVentaTot.SETRANGE("Document No.",LinVenta2."Document No.");
            LinVentaTot.SETRANGE(Type,LinVenta2.Type);
            LinVentaTot.SETRANGE("No.",LinVenta2."No.");
            LinVentaTot.SETRANGE("Variant Code",LinVenta2."Variant Code");
            LinVentaTot.SETRANGE("Unit of Measure Code",LinVenta2."Unit of Measure Code");
            LinVentaTot.SETRANGE("Quantity Shipped",0);
            LinVentaTot.CALCSUMS(Quantity,LinVentaTot."Quantity (Base)");
            ProductoPromocionado.RESET;
            LinVenta2.Quantity := LinVentaTot.Quantity;
            LinVenta2."Quantity (Base)" := LinVentaTot."Quantity (Base)";

            BuscarPromocionProducto.AsignarLinVta(LinVenta2);
            BuscarPromocionProducto.AsignarParaCalculo;
            LinVenta2.FIND;
            BuscarPromocionProducto.RUN(ProductoPromocionado);
            bConfirmar := TRUE;
      //++ BAIN-0067
      //      IF (ProductoPromocionado."Cdad. promoci¢n" <> 0) AND NOT ExistePromocion(LinVenta2) THEN BEGIN
              IF ((ProductoPromocionado."Cdad. promoci¢n" <> 0) OR (ProductoPromocionado."Tipo descuento"=ProductoPromocionado."Tipo descuento"::Porcentaje)) AND
                  NOT ExistePromocion(LinVenta2) THEN BEGIN
      //++ BAIN-0067
              bConfirmar := TRUE;
              IF (ProductoPromocionado."Venta a-No. cliente" = '') AND
                 (ProductoPromocionado."Factura-a No. cliente" = '') AND
                 (ProductoPromocionado."Cdad. promoci¢n" <> 0) AND
                 (ProductoPromocionado."Grupo promocional cliente" = '') AND
                 ConfVtas."Aviso promoc. cliente gen‚rico" THEN BEGIN
                 bConfirmar :=
                      CONFIRM(Text001,FALSE,LinVenta2."No.");
              END;
              IF bConfirmar THEN BEGIN

                // I-BAIN-0067
                IF ProductoPromocionado."Tipo descuento" = ProductoPromocionado."Tipo descuento"::Porcentaje THEN BEGIN
                  IF NOT LinVenta2.Promotion THEN
                    LinVenta2.TESTFIELD("Line Discount %",0);
                  LinVenta2.Promotion := TRUE;
                  LinVenta2."Promo Source Line No." := LinVenta2."Line No.";
                  LinVenta2."Promo Code" := ProductoPromocionado."C¢d. promoci¢n";
                  LinVenta2."Promo No." := ProductoPromocionado."No. promoci¢n";
                  LinVenta2.VALIDATE("Line Discount %",ProductoPromocionado."% descuento");
                  //I-050209
                  //LinVenta2.GrabarDtosLin;
                  //F-050209
                  //LinVenta2.CalcMargenReal;
                  LinVenta2.MODIFY;
                END ELSE BEGIN
                // F-BAIN-0067
                CLEAR(LinVenta3);
                LinVenta3 := LinVenta2;
                LinVenta3.Promotion := TRUE;
                LinVenta3."Document Type" := LinVenta2."Document Type";
                LinVenta3."Document No." := LinVenta2."Document No.";
                LinVenta3."Line No." := LinVenta2."Line No." + 2;
                LinVenta4."Document Type" := LinVenta2."Document Type";
                LinVenta4."Document No." := LinVenta2."Document No.";
                LinVenta4."Line No." := LinVenta2."Line No." + 4;
                LinVenta4.Type := LinVenta4.Type::" ";
                Promo.GET(ProductoPromocionado."C¢d. promoci¢n");
                LinVenta4.Description := Promo.Descripci¢n;
                LinVenta3.Type := LinVenta2.Type;
                IF ProductoPromocionado."No. producto promoci¢n" = '' THEN
                  LinVenta3.VALIDATE("No.",LinVenta2."No.")
                ELSE
                  LinVenta3.VALIDATE("No.",ProductoPromocionado."No. producto promoci¢n");
                IF (ProductoPromocionado."C¢d. variante promoci¢n" = '') AND
                   (ProductoPromocionado."No. producto promocionado" = ProductoPromocionado."No. producto promoci¢n") THEN
                  LinVenta3."Variant Code" := LinVenta2."Variant Code"
                ELSE
                  LinVenta3.VALIDATE("Variant Code",ProductoPromocionado."C¢d. variante promoci¢n");
                IF ProductoPromocionado."C¢d. udad. medida promoci¢n" <> '' THEN
                  LinVenta3.VALIDATE("Unit of Measure Code",ProductoPromocionado."C¢d. udad. medida promoci¢n");
                LinVenta3.VALIDATE("Location Code",LinVenta2."Location Code");
                LinVenta3.VALIDATE("Bin Code",LinVenta2."Bin Code");
                IF ProductoPromocionado."No. producto promocionado" = '' THEN BEGIN
                  ProductoPromocionado.TESTFIELD("C¢d. udad. medida promocionada");
                  UdadMed.GET(Prod."No.",ProductoPromocionado."C¢d. udad. medida promocionada");
                  ProductoPromocionado."Cdad. promocionada (base)" := UdadMed."Qty. per Unit of Measure" * ProductoPromocionado."Cdad. promocionada";
                END ELSE
                  ProductoPromocionado.TESTFIELD("Cdad. promocionada (base)");

                IF ProductoPromocionado."No. producto promoci¢n" = '' THEN BEGIN
                  ProductoPromocionado.TESTFIELD("C¢d. udad. medida promoci¢n");
                  ProdPromocion := Prod;
                END ELSE
                  ProdPromocion.GET(ProductoPromocionado."No. producto promoci¢n");

                ProductoPromocionado.TESTFIELD("C¢d. udad. medida promoci¢n");
                UdadMed.GET(ProdPromocion."No.",ProductoPromocionado."C¢d. udad. medida promoci¢n");
                UdadMed.TESTFIELD("Qty. per Unit of Measure");
                IF ProductoPromocionado."Tipo de evaluaci¢n" = ProductoPromocionado."Tipo de evaluaci¢n"::Acumulado THEN BEGIN
                  IF (ProductoPromocionado."No. producto promocionado" = '') AND (ProductoPromocionado."No. producto promoci¢n" <> '') THEN
                    NoProdPdo := ''
                  ELSE
                    NoProdPdo := Prod."No.";
                  {VNT-1857
                  CdadPromo := ProductoPromocionado."Cdad. promoci¢n" * UdadMed."Qty. per Unit of Measure" *
                  VNT-1857}
                  CdadPromo := ProductoPromocionado."Cdad. promoci¢n" * //VNT-1857
                               (ROUND((LinVentaTot."Quantity (Base)" + ProductoPromocionado.CdadBasePromocionada(NoProdPdo)) /
                               ProductoPromocionado."Cdad. promocionada (base)",1,'<') -

                               ROUND((ProductoPromocionado.CdadBasePromoci¢n(ProdPromocion."No.") /
                               {VNT-1857
                               (ProductoPromocionado."Cdad. promoci¢n" * UdadMed."Qty. per Unit of Measure")),1,'<'));
                               VNT-1857}
                               (ProductoPromocionado."Cdad. promoci¢n")),1,'<'));//VNT-1857
                END ELSE
                  {VNT-1857
                  CdadPromo := ProductoPromocionado."Cdad. promoci¢n" * UdadMed."Qty. per Unit of Measure" *
                  VNT-1857}
                  CdadPromo := ProductoPromocionado."Cdad. promoci¢n" *//VNT-1857
                               ROUND((LinVentaTot."Quantity (Base)" /
                               ProductoPromocionado."Cdad. promocionada (base)"),1,'<');

                IF (CdadPromo < ProductoPromocionado."Max. productos promocionados") OR
                   (ProductoPromocionado."Max. productos promocionados" = 0) THEN
                  LinVenta3.Quantity := CdadPromo
                ELSE
                  LinVenta3.Quantity := ProductoPromocionado."Max. productos promocionados";

                IF LinVentaTot.FIND('-') THEN
                  REPEAT
                    IF LinVenta2."Line No." <> LinVentaTot."Line No." THEN BEGIN
                      LinVentaTot."Promo Code" := ProductoPromocionado."C¢d. promoci¢n";
                      LinVentaTot."Promo Source Line No." := LinVenta2."Line No.";
                      LinVentaTot."Promo No." := ProductoPromocionado."No. promoci¢n";
                      LinVentaTot.MODIFY;
                    END;
                  UNTIL LinVentaTot.NEXT = 0;
                LinVenta3.VALIDATE(Quantity);
                IF (LinVenta3."No." = LinVenta2."No.") AND (LinVenta3."Variant Code" = LinVenta2."Variant Code") THEN
                  LinVenta3.VALIDATE("Unit Price",ROUND((LinVenta3."Qty. per Unit of Measure" * LinVenta2."Unit Price") /
                                                         LinVenta2."Qty. per Unit of Measure",0.00001));
                LinVenta3.VALIDATE("Line Discount %",100);
                IF (LinVenta3."No." = LinVenta2."No.") AND
                   (ProductoPromocionado."Tipo descuento" = ProductoPromocionado."Tipo descuento"::"Incluido en cantidad") AND
                   (LinVenta3."Variant Code" = LinVenta2."Variant Code") THEN BEGIN
                   QtyBasePr := LinVenta3."Quantity (Base)" - LinVenta2."Quantity (Base)";
                   LinVenta2."Promo Quantity (Base)"  := LinVenta2."Quantity (Base)";
                   PrecioAnt := LinVenta2."Unit Price";
                   LinVentaTot2 := LinVenta2;
                   LinVentaTot2.VALIDATE(Quantity);
                   UsaPAnt := PrecioAnt <> LinVentaTot2."Unit Price";
                   IF LinVenta2."Quantity (Base)" < LinVenta3."Quantity (Base)" THEN
                     LinVenta2.VALIDATE(Quantity,0)
                   ELSE
                     LinVenta2.VALIDATE(Quantity,LinVenta2.Quantity - ROUND(LinVenta3."Quantity (Base)" /
                                                 LinVenta2."Qty. per Unit of Measure",0.00001));
                   IF UsaPAnt THEN
                     LinVenta2.VALIDATE("Unit Price",PrecioAnt);
                   LinVenta2."Promo Quantity (Base)"  := LinVenta2."Promo Quantity (Base)" - LinVenta2."Quantity (Base)";
                   IF QtyBasePr > 0 THEN BEGIN
                     LinVentaTot.FIND('-');
                     REPEAT
                       IF LinVenta2."Line No." <> LinVentaTot."Line No." THEN BEGIN
                         LinVentaTot."Promo Quantity (Base)" := LinVentaTot."Quantity (Base)";
                         QtyBasePr := QtyBasePr - LinVentaTot."Quantity (Base)";
                         PrecioAnt := LinVentaTot."Unit Price";
                         LinVentaTot2 := LinVentaTot;
                         LinVentaTot2.VALIDATE(Quantity);
                         UsaPAnt := PrecioAnt <> LinVentaTot2."Unit Price";
                         IF QtyBasePr > 0 THEN BEGIN
                           LinVentaTot."Promo Quantity (Base)" := LinVentaTot."Quantity (Base)";
                           LinVentaTot.VALIDATE(Quantity,0)
                         END ELSE BEGIN
                           LinVentaTot.VALIDATE(Quantity,-ROUND(QtyBasePr /
                                                                LinVentaTot."Qty. per Unit of Measure",0.00001));
                         END;
                         IF UsaPAnt THEN
                           LinVentaTot.VALIDATE("Unit Price",PrecioAnt);
                         LinVentaTot."Promo Quantity (Base)" := LinVentaTot."Promo Quantity (Base)" - LinVentaTot."Quantity (Base)";
                         LinVentaTot.MODIFY;
                       END;
                     UNTIL (LinVentaTot.NEXT = 0) OR (QtyBasePr <= 0);
                   END;
                END;
                IF QtyBasePr > 0 THEN
                  ERROR(Text002);
                LinVenta2."Promo Code" := ProductoPromocionado."C¢d. promoci¢n";
                LinVenta2."Promo No." := ProductoPromocionado."No. promoci¢n";
                LinVenta2.VALIDATE("Allow Invoice Disc.",ProductoPromocionado."Permite dto. factura");
                LinVenta3."Promo No." := ProductoPromocionado."No. promoci¢n";
                LinVenta3.VALIDATE("Allow Invoice Disc.",ProductoPromocionado."Permite dto. factura");
                LinVenta2.MODIFY;
                LinVentaTot.MODIFYALL("Promo Code",ProductoPromocionado."C¢d. promoci¢n");
                LinVenta3."Promo Code" := ProductoPromocionado."C¢d. promoci¢n";
                LinVenta3."Promo Source Line No." := LinVenta2."Line No.";
                LinVenta3.Promotion := TRUE;
                OnBeforeInsertarLineaPromocion(LinVenta2,LinVenta3);//BAIN-0049
                IF NOT LinVenta3.INSERT(TRUE) THEN BEGIN
                  LinVenta3."Line No." := NLin;
                  NLin := NLin + 10000;
                  LinVenta4."Line No." := NLin;
                  NLin := NLin + 10000;
                  LinVenta3.INSERT(TRUE);
                END;
                LinVenta4."Attached to Line No." := LinVenta3."Line No.";
                IF LinVenta4.Description <> '' THEN
                IF NOT LinVenta4.INSERT(TRUE) THEN BEGIN
                  LinVenta4."Line No." := NLin;
                  NLin := NLin + 10000;
                  LinVenta4.INSERT(TRUE);
                END;
                END;//++ BAIN-0067
                COMMIT;
              END;
            END;
          END;
        UNTIL LinVenta2.NEXT = 0;
      END;
    END;

    PROCEDURE CalcularConCabVenta@24(VAR CabVentasTemp@1170170000 : Record 36;VAR LinVtasTemp@1170170001 : Record 37);
    VAR
      FiltroLinVentas@1170170002 : Record 37;
    BEGIN
      FiltroLinVentas.COPY(LinVtasTemp);
      LinVtas := LinVtasTemp;

      CalcularDtoPromocional(CabVentasTemp,LinVtasTemp);

      LinVtasTemp.COPY(FiltroLinVentas);
    END;

    PROCEDURE ExistePromocion@10(LinVtasOrigen@1170170000 : Record 37) : Boolean;
    VAR
      mLinVtas@1170170001 : Record 37;
    BEGIN
      IF LinVtasOrigen."Line No." = 0 THEN EXIT(FALSE);
      mLinVtas.SETRANGE("Document Type",LinVtasOrigen."Document Type");
      mLinVtas.SETRANGE("Document No.",LinVtasOrigen."Document No.");
      mLinVtas.SETRANGE(Promotion,TRUE);
      IF (NOT LinVtasOrigen.Promotion) AND (LinVtasOrigen."Promo Source Line No." <> 0) THEN
        mLinVtas.SETRANGE("Promo Source Line No.",LinVtasOrigen."Promo Source Line No.")
      ELSE
      mLinVtas.SETRANGE("Promo Source Line No.",LinVtasOrigen."Line No.");
      OnBeforeReturnExistePromocion(mLinVtas);// BAIN-0049
      EXIT(mLinVtas.FIND('-'));
    END;

    PROCEDURE ExistePromocionEnviada@3(LinVtasOrigen@1170170000 : Record 37) : Boolean;
    VAR
      mLinVtas@1170170001 : Record 37;
    BEGIN
      IF LinVtasOrigen."Line No." = 0 THEN EXIT(FALSE);
      mLinVtas.SETRANGE("Document Type",LinVtasOrigen."Document Type");
      mLinVtas.SETRANGE("Document No.",LinVtasOrigen."Document No.");
      mLinVtas.SETRANGE("Promo Source Line No.",LinVtasOrigen."Line No.");
      mLinVtas.SETFILTER("Quantity Shipped",'<>%1',0);
      EXIT(mLinVtas.FIND('-'));
    END;

    PROCEDURE ExistePromocionMismoProducto@2(LinVtasOrigen@1170170000 : Record 37) : Boolean;
    VAR
      mLinVtas@1170170001 : Record 37;
    BEGIN
      IF LinVtasOrigen."Line No." = 0 THEN EXIT(FALSE);
      mLinVtas.SETRANGE("Document Type",LinVtasOrigen."Document Type");
      mLinVtas.SETRANGE("Document No.",LinVtasOrigen."Document No.");
      mLinVtas.SETRANGE("Promo Source Line No.",LinVtasOrigen."Line No.");
      mLinVtas.SETRANGE("No.",LinVtasOrigen."No.");
      mLinVtas.SETRANGE("Unit of Measure Code",LinVtasOrigen."Unit of Measure Code");
      mLinVtas.SETRANGE("Variant Code",LinVtasOrigen."Variant Code");
      EXIT(mLinVtas.FIND('-'));
    END;

    PROCEDURE HayPromocion@1170170001(LinVtasOrigen@1170170000 : Record 37) : Boolean;
    VAR
      mLinVtas@1170170001 : Record 37;
    BEGIN
      IF LinVtasOrigen."Line No." = 0 THEN
        EXIT(FALSE);
      BuscarPromocionProducto.AsignarLinVta(LinVtasOrigen);
      EXIT(BuscarPromocionProducto.ExistePromo);
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeBorrarLineasPromocion@1170170000(VAR SalesLine@1170170000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeReturnExistePromocion@1170170006(VAR SalesLine@1170170000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInsertarLineaPromocion@1170170002(VAR SalesLineOrigen@1170170000 : Record 37;VAR SalesLinePromocion@1170170001 : Record 37);
    BEGIN
    END;

    BEGIN
    {

      Baines
      =======================================
      BAIN-0067 AC 220708 Se a¤aden promociones porcentuales
    }
    END.
  }
}

OBJECT MenuSuite 1080 Dept - Partner
{
  OBJECT-PROPERTIES
  {
    Date=30/04/20;
    Time=10:51:24;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
  }
  MENUNODES
  {
    {                ;[{D4E7ED8F-4F08-44D3-9D5C-6242E283CD4F}] ;NextNodeID=[{F201FD8D-763D-41D8-AE9D-8A191C15C014}] }
    { MenuGroup      ;[{F201FD8D-763D-41D8-AE9D-8A191C15C014}] ;Name=Comisiones;
                                                                CaptionML=ESP=Comisiones;
                                                                MemberOfMenu=[{2DC8C4FE-7346-4124-8C20-383346384C03}];
                                                                ParentNodeID=[{A56DFF5E-7306-43E8-B307-793D6B90F220}];
                                                                Visible=Yes;
                                                                NextNodeID=[{00000000-0000-0000-0000-000000000000}];
                                                                FirstChild=[{E37FFC27-3EEE-4D4D-9D23-EA4228C02D12}] }
    { MenuItem       ;[{E37FFC27-3EEE-4D4D-9D23-EA4228C02D12}] ;Name=Zonas comisi¢n cliente;
                                                                CaptionML=ESP=Zonas comisi¢n cliente;
                                                                ApplicationArea=;
                                                                MemberOfMenu=[{2DC8C4FE-7346-4124-8C20-383346384C03}];
                                                                RunObjectType=Page;
                                                                RunObjectID=50011;
                                                                ParentNodeID=[{F201FD8D-763D-41D8-AE9D-8A191C15C014}];
                                                                Visible=Yes;
                                                                NextNodeID=[{F4C4E86D-EFB2-43B6-9326-58B649E41F77}];
                                                                DepartmentCategory=Administration }
    { MenuItem       ;[{F4C4E86D-EFB2-43B6-9326-58B649E41F77}] ;Name=Grupos comisi¢n producto;
                                                                CaptionML=ESP=Grupos comisi¢n producto;
                                                                ApplicationArea=;
                                                                MemberOfMenu=[{2DC8C4FE-7346-4124-8C20-383346384C03}];
                                                                RunObjectType=Page;
                                                                RunObjectID=50012;
                                                                ParentNodeID=[{F201FD8D-763D-41D8-AE9D-8A191C15C014}];
                                                                Visible=Yes;
                                                                NextNodeID=[{8195C774-1AED-4ECB-8311-7B3C39E3C82F}];
                                                                DepartmentCategory=Administration }
    { MenuItem       ;[{8195C774-1AED-4ECB-8311-7B3C39E3C82F}] ;Name=Conf. comisi¢n clite./producto;
                                                                CaptionML=ESP=Conf. comisi¢n clite./producto;
                                                                ApplicationArea=;
                                                                MemberOfMenu=[{2DC8C4FE-7346-4124-8C20-383346384C03}];
                                                                RunObjectType=Page;
                                                                RunObjectID=50013;
                                                                ParentNodeID=[{F201FD8D-763D-41D8-AE9D-8A191C15C014}];
                                                                Visible=Yes;
                                                                NextNodeID=[{00000000-0000-0000-0000-000000000000}];
                                                                DepartmentCategory=Administration }
    { MenuItem       ;[{D5984523-0728-46B2-BDC5-0598218119FD}] ;Name=Lista conjuntos de producto;
                                                                CaptionML=ESP=Lista conjuntos de producto;
                                                                ApplicationArea=;
                                                                MemberOfMenu=[{2DC8C4FE-7346-4124-8C20-383346384C03}];
                                                                RunObjectType=Page;
                                                                RunObjectID=50029;
                                                                ParentNodeID=[{A56DFF5E-7306-43E8-B307-793D6B90F220}];
                                                                Visible=Yes;
                                                                NextNodeID=[{A5FF2C16-BF50-41ED-B8BA-E233FC251BA2}];
                                                                DepartmentCategory=Administration }
    {                ;[{434199E3-2BBA-4CEC-AF31-F55C5F185520}] ;NextNodeID=[{D5984523-0728-46B2-BDC5-0598218119FD}] }
    { MenuItem       ;[{D6686D93-1981-48A2-A27A-3446FDD2D2A8}] ;Name=Hoja precios venta;
                                                                CaptionML=ESP=Hoja precios venta;
                                                                ApplicationArea=;
                                                                MemberOfMenu=[{2DC8C4FE-7346-4124-8C20-383346384C03}];
                                                                RunObjectType=Page;
                                                                RunObjectID=50006;
                                                                ParentNodeID=[{D2F898F2-A0BB-4482-A977-CE588C77032C}];
                                                                Visible=Yes;
                                                                NextNodeID=[{97CBBDD0-E7A1-4B71-8C0A-3DC0D9F63D21}];
                                                                DepartmentCategory=Tasks }
    {                ;[{7865C154-032E-4D26-9DD3-24580A860777}] ;NextNodeID=[{D6686D93-1981-48A2-A27A-3446FDD2D2A8}] }
    { MenuItem       ;[{97CBBDD0-E7A1-4B71-8C0A-3DC0D9F63D21}] ;Name=Margen grupo precio/producto;
                                                                CaptionML=ESP=Margen grupo precio/producto;
                                                                ApplicationArea=;
                                                                MemberOfMenu=[{2DC8C4FE-7346-4124-8C20-383346384C03}];
                                                                RunObjectType=Page;
                                                                RunObjectID=50007;
                                                                ParentNodeID=[{D2F898F2-A0BB-4482-A977-CE588C77032C}];
                                                                Visible=Yes;
                                                                NextNodeID=[{01CCE9A9-331D-42ED-BE34-1FAF394EE08E}];
                                                                DepartmentCategory=Administration }
    {                ;[{01CCE9A9-331D-42ED-BE34-1FAF394EE08E}] ;NextNodeID=[{21065973-149F-4519-90AF-B4B41DF14C1C}] }
    { MenuItem       ;[{21065973-149F-4519-90AF-B4B41DF14C1C}] ;Name=Margen m¡nimo gr. precio/prod.;
                                                                CaptionML=ESP=Margen m¡nimo gr. precio/prod.;
                                                                ApplicationArea=;
                                                                MemberOfMenu=[{2DC8C4FE-7346-4124-8C20-383346384C03}];
                                                                RunObjectType=Page;
                                                                RunObjectID=50038;
                                                                ParentNodeID=[{D2F898F2-A0BB-4482-A977-CE588C77032C}];
                                                                Visible=Yes;
                                                                NextNodeID=[{00000000-0000-0000-0000-000000000000}];
                                                                DepartmentCategory=Administration }
    { MenuItem       ;[{C88272D0-37D2-468E-84B9-AA57667B1CA5}] ;Name=Estad¡sticas compras din micas;
                                                                CaptionML=ESP=Estad¡sticas compras din micas;
                                                                ApplicationArea=;
                                                                MemberOfMenu=[{03134937-C76A-4D80-A8B2-FF6458E180EB}];
                                                                RunObjectType=Report;
                                                                RunObjectID=50028;
                                                                ParentNodeID=[{364B37B1-8DC2-4FCF-BED0-77BF47F63F7A}];
                                                                Visible=Yes;
                                                                NextNodeID=[{3F16024D-349E-4758-AF29-3A22D8D6EE96}];
                                                                DepartmentCategory=Reports and Analysis }
    {                ;[{02E3631F-69CB-4413-91C8-FBA7BAAAAE42}] ;NextNodeID=[{C88272D0-37D2-468E-84B9-AA57667B1CA5}] }
  }
}
OBJECT Page 21 Customer Card
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=17:19:00;
    Modified=Yes;
    Version List=NAVW114.06,NAVES14.06,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Customer Card;
               ESP=Ficha cliente];
    SourceTable=Table18;
    PageType=Card;
    RefreshOnActivate=Yes;
    PromotedActionCategoriesML=[ENU=New,Process,Report,New Document,Approve,Request Approval,Prices and Discounts,Navigate,Customer;
                                ESP=Nuevo,Proceso,Informe,Nuevo Documento,Aprobar,Solicitar aprobaci¢n,Precios y descuentos,Navegar,Cliente];
    OnInit=VAR
             ApplicationAreaMgmtFacade@1000 : Codeunit 9179;
           BEGIN
             FoundationOnly := ApplicationAreaMgmtFacade.IsFoundationEnabled;

             SetCustomerNoVisibilityOnFactBoxes;

             ContactEditable := TRUE;

             OpenApprovalEntriesExistCurrUser := TRUE;

             CaptionTxt := CurrPage.CAPTION;
             SetCaption(CaptionTxt);
             CurrPage.CAPTION(CaptionTxt);
           END;

    OnOpenPage=VAR
                 OfficeManagement@1002 : Codeunit 1630;
                 PermissionManager@1000 : Codeunit 9002;
               BEGIN
                 ActivateFields;

                 CRMIntegrationEnabled := CRMIntegrationManagement.IsCRMIntegrationEnabled;

                 SetNoFieldVisible;
                 IsOfficeAddin := OfficeManagement.IsAvailable;
                 IsSaaS := PermissionManager.SoftwareAsAService;

                 IF FoundationOnly THEN
                   CurrPage.PriceAndLineDisc.PAGE.InitPage(FALSE);

                 ShowCharts := "No." <> '';
               END;

    OnAfterGetRecord=BEGIN
                       ActivateFields;
                       StyleTxt := SetStyle;
                     END;

    OnNewRecord=VAR
                  DocumentNoVisibility@1004 : Codeunit 1400;
                BEGIN
                  IF GUIALLOWED THEN
                    IF "No." = '' THEN
                      IF DocumentNoVisibility.CustomerNoSeriesIsDefault THEN
                        NewMode := TRUE;
                END;

    OnAfterGetCurrRecord=VAR
                           CRMCouplingManagement@1001 : Codeunit 5331;
                           WorkflowManagement@1000 : Codeunit 1501;
                           WorkflowEventHandling@1003 : Codeunit 1520;
                           WorkflowWebhookManagement@1002 : Codeunit 1543;
                           AgedAccReceivable@1004 : Codeunit 763;
                         BEGIN
                           CreateCustomerFromTemplate;
                           ActivateFields;
                           StyleTxt := SetStyle;
                           ShowWorkflowStatus := CurrPage.WorkflowStatus.PAGE.SetFilterOnWorkflowRecord(RECORDID);
                           IF CRMIntegrationEnabled THEN BEGIN
                             CRMIsCoupledToRecord := CRMCouplingManagement.IsRecordCoupledToCRM(RECORDID);
                             IF "No." <> xRec."No." THEN
                               CRMIntegrationManagement.SendResultNotification(Rec);
                           END;
                           OpenApprovalEntriesExistCurrUser := ApprovalsMgmt.HasOpenApprovalEntriesForCurrentUser(RECORDID);
                           OpenApprovalEntriesExist := ApprovalsMgmt.HasOpenApprovalEntries(RECORDID);

                           IF FoundationOnly THEN BEGIN
                             GetSalesPricesAndSalesLineDisc;
                             BalanceExhausted := 10000 <= CalcCreditLimitLCYExpendedPct;
                             DaysPastDueDate := AgedAccReceivable.InvoicePaymentDaysAverage("No.");
                             AttentionToPaidDay := DaysPastDueDate > 0;
                           END;

                           CanCancelApprovalForRecord := ApprovalsMgmt.CanCancelApprovalForRecord(RECORDID);

                           EventFilter := WorkflowEventHandling.RunWorkflowOnSendCustomerForApprovalCode + '|' +
                             WorkflowEventHandling.RunWorkflowOnCustomerChangedCode;

                           EnabledApprovalWorkflowsExist := WorkflowManagement.EnabledWorkflowExist(DATABASE::Customer,EventFilter);

                           WorkflowWebhookManagement.GetCanRequestAndCanCancel(RECORDID,CanRequestApprovalForFlow,CanCancelApprovalForFlow);

                           IF "No." <> '' THEN BEGIN
                             IF ShowCharts THEN
                               CurrPage.AgedAccReceivableChart.PAGE.UpdateChartForCustomer("No.");
                             IF IsOfficeAddin THEN
                               CurrPage.AgedAccReceivableChart2.PAGE.UpdateChartForCustomer("No.");
                           END;

                           ExpectedMoneyOwed := GetMoneyOwedExpected;
                         END;

    ActionList=ACTIONS
    {
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 74      ;1   ;ActionGroup;
                      CaptionML=[ENU=&Customer;
                                 ESP=&Cliente];
                      Image=Customer }
      { 84      ;2   ;Action    ;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      RunObject=Page 540;
                      RunPageLink=Table ID=CONST(18),
                                  No.=FIELD(No.);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Dimensions;
                      PromotedCategory=Category9 }
      { 99      ;2   ;Action    ;
                      CaptionML=[ENU=Bank Accounts;
                                 ESP=Bancos];
                      ToolTipML=[ENU=View or set up the customer's bank accounts. You can set up any number of bank accounts for each customer.;
                                 ESP=Permite ver o configurar las cuentas bancarias del cliente. Es posible configurar todas las cuentas bancarias deseadas para cada cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 424;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=BankAccount;
                      PromotedCategory=Category8 }
      { 19      ;2   ;Action    ;
                      CaptionML=[ENU=Direct Debit Mandates;
                                 ESP=?rdenes de domiciliaci?n de adeudo directo];
                      ToolTipML=[ENU=View the direct-debit mandates that reflect agreements with customers to collect invoice payments from their bank account.;
                                 ESP=Permite ver las ¢rdenes de domiciliaci¢n de adeudo directo para reflejar los acuerdos con los clientes a fin de cobrar los pagos de factura desde su banco.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 1230;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=MakeAgreement;
                      PromotedCategory=Category8 }
      { 81      ;2   ;Action    ;
                      Name=ShipToAddresses;
                      CaptionML=[ENU=Ship-&to Addresses;
                                 ESP=Di&recci¢n env¡o];
                      ToolTipML=[ENU=View or edit alternate shipping addresses where the customer wants items delivered if different from the regular address.;
                                 ESP=Permite ver o editar las direcciones alternativas donde el cliente desea que se entreguen los productos, si difiere de su direcci¢n habitual.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 301;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=ShipAddress;
                      PromotedCategory=Category8 }
      { 1100010 ;2   ;Action    ;
                      CaptionML=[ENU=Payment A&ddresses;
                                 ESP=&Direcci¢n de pago];
                      ToolTipML=[ENU=View or edit customers' payment address. If necessary, you can assign more than one payment address to a customer record. The payment addresses are listed by customer number.;
                                 ESP=Permite ver o editar la direcci¢n de pago de los clientes. Si es necesario, puede asignar m s de una direcci¢n de pago a un registro de cliente. Las direcciones de pago se enumeran por n£mero de cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 7000039;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Addresses;
                      PromotedCategory=Category8 }
      { 14      ;2   ;Action    ;
                      Name=Contact;
                      AccessByPermission=TableData 5050=R;
                      CaptionML=[ENU=C&ontact;
                                 ESP=&Contacto];
                      ToolTipML=[ENU=View or edit detailed information about the contact person at the customer.;
                                 ESP=Permite ver o editar la informaci¢n detallada sobre la persona de contacto del cliente.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=ContactPerson;
                      PromotedCategory=Category8;
                      OnAction=BEGIN
                                 ShowContact;
                               END;
                                }
      { 94      ;2   ;Action    ;
                      CaptionML=[ENU=Cross Re&ferences;
                                 ESP=Referencias cru&zadas];
                      ToolTipML=[ENU=Set up the customer's own identification of items that you sell to the customer. Cross-references to the customer's item number means that the item number is automatically shown on sales documents instead of the number that you use.;
                                 ESP=Permite configurar la identificaci¢n propia del cliente en aquellos productos que usted le vende. Las referencias cruzadas con el n£mero de producto del cliente indican que ese n£mero de producto (y no el que usted usa) se muestra autom ticamente en los documentos de venta.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 5723;
                      RunPageView=SORTING(Cross-Reference Type,Cross-Reference Type No.);
                      RunPageLink=Cross-Reference Type=CONST(Customer),
                                  Cross-Reference Type No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Change;
                      PromotedCategory=Category9 }
      { 78      ;2   ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      RunObject=Page 124;
                      RunPageLink=Table Name=CONST(Customer),
                                  No.=FIELD(No.);
                      Promoted=Yes;
                      Image=ViewComments;
                      PromotedCategory=Category9 }
      { 1100004 ;2   ;Action    ;
                      CaptionML=[ENU=&Payment Days;
                                 ESP=D¡a&s pago];
                      ToolTipML=[ENU=View or edit the payment days that are associated with the payment code.;
                                 ESP=Permite ver o editar los d¡as de pago que se pueden asociar a un c¢digo de pago.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 10700;
                      RunPageLink=Table Name=CONST(Customer),
                                  Code=FIELD(Payment Days Code);
                      Image=PaymentDays }
      { 1100005 ;2   ;Action    ;
                      CaptionML=[ENU=N&on-Payment Periods;
                                 ESP=&Periodos no-pago];
                      ToolTipML=[ENU=View or edit the periods for which payments will not be made.;
                                 ESP=Permite ver o editar los periodos para los que no se pueden realizar pagos.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 10701;
                      RunPageLink=Table Name=CONST(Customer),
                                  Code=FIELD(Non-Paymt. Periods Code);
                      Image=PaymentPeriod }
      { 59      ;2   ;Action    ;
                      Name=ApprovalEntries;
                      AccessByPermission=TableData 454=R;
                      CaptionML=[ENU=Approvals;
                                 ESP=Aprobaciones];
                      ToolTipML=[ENU=View a list of the records that are waiting to be approved. For example, you can see who requested the record to be approved, when it was sent, and when it is due to be approved.;
                                 ESP=Permite ver una lista de los registros en espera de aprobaci¢n. Por ejemplo, puede ver qui‚n ha solicitado la aprobaci¢n del registro, cu ndo se envi¢ y la fecha de vencimiento de la aprobaci¢n.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Image=Approvals;
                      PromotedCategory=Category9;
                      OnAction=BEGIN
                                 ApprovalsMgmt.OpenApprovalEntriesPage(RECORDID);
                               END;
                                }
      { 1901458458;2 ;Action    ;
                      Name=Attachments;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Image=Attach;
                      PromotedCategory=Category9;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1001 : Page 1173;
                                 RecRef@1002 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 243     ;2   ;Action    ;
                      Name=CustomerReportSelections;
                      CaptionML=[ENU=Document Layouts;
                                 ESP=Dise¤os de documento];
                      ToolTipML=[ENU=Set up a layout for different types of documents such as invoices, quotes, and credit memos.;
                                 ESP=Permite configurar un dise¤o para tipos diferentes de documentos, como facturas, ofertas y abonos.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=Quote;
                      PromotedCategory=Category8;
                      OnAction=VAR
                                 CustomReportSelection@1000 : Record 9657;
                               BEGIN
                                 CustomReportSelection.SETRANGE("Source Type",DATABASE::Customer);
                                 CustomReportSelection.SETRANGE("Source No.","No.");
                                 PAGE.RUNMODAL(PAGE::"Customer Report Selections",CustomReportSelection);
                               END;
                                }
      { 1170000001;2 ;Action    ;
                      Name=CopiarClientes;
                      CaptionML=ESP=Copiar Clientes;
                      Promoted=Yes;
                      Image=Copy;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 Customer@1170000000 : Record 18;
                               BEGIN
                                 //++ BAIN-0009
                                 CurrPage.SETSELECTIONFILTER(Customer);
                                 REPORT.RUNMODAL(REPORT::"Copiar cliente a empresa",TRUE,TRUE,Customer);
                                 //-- BAIN-0009
                               END;
                                }
      { 31      ;1   ;ActionGroup;
                      Name=ActionGroupCRM;
                      CaptionML=[ENU=Dynamics 365 for Sales;
                                 ESP=Dynamics 365 for Sales];
                      Visible=CRMIntegrationEnabled;
                      Image=Calculator }
      { 33      ;2   ;Action    ;
                      Name=CRMGotoAccount;
                      CaptionML=[ENU=Account;
                                 ESP=Cuenta];
                      ToolTipML=[ENU=Open the coupled Dynamics 365 for Sales account.;
                                 ESP=Abre la cuenta emparejada de Dynamics 365 for Sales.];
                      ApplicationArea=#Suite;
                      Visible=CRMIntegrationEnabled;
                      Image=CoupledCustomer;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.ShowCRMEntityFromRecordID(RECORDID);
                               END;
                                }
      { 53      ;2   ;Action    ;
                      Name=CRMSynchronizeNow;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Synchronize;
                                 ESP=Sincronizar];
                      ToolTipML=[ENU=Send or get updated data to or from Dynamics 365 for Sales.;
                                 ESP=Permite enviar u obtener datos actualizados a Dynamics 365 for Sales o desde Dynamics 365 for Sales.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Visible=CRMIntegrationEnabled;
                      Image=Refresh;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 CRMIntegrationManagement@1001 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.UpdateOneNow(RECORDID);
                               END;
                                }
      { 43      ;2   ;Action    ;
                      Name=UpdateStatisticsInCRM;
                      CaptionML=[ENU=Update Account Statistics;
                                 ESP=Actualizar estad¡sticas de cuentas];
                      ToolTipML=[ENU=Send customer statistics data to Dynamics 365 for Sales to update the Account Statistics FactBox.;
                                 ESP=Envia datos de estad¡sticas de clientes a Dynamics 365 for Sales para actualizar el cuadro informativo Estad¡sticas de cuentas.];
                      ApplicationArea=#Suite;
                      Visible=CRMIntegrationEnabled;
                      Enabled=CRMIsCoupledToRecord;
                      Image=UpdateXML;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.CreateOrUpdateCRMAccountStatistics(Rec);
                               END;
                                }
      { 51      ;2   ;ActionGroup;
                      Name=Coupling;
                      CaptionML=[@@@=Coupling is a noun;
                                 ENU=Coupling;
                                 ESP=Emparejamiento];
                      ToolTipML=[ENU=Create, change, or delete a coupling between the Business Central record and a Dynamics 365 for Sales record.;
                                 ESP=Permite crear, cambiar o eliminar un emparejamiento entre el registro de Business Central y un registro de Dynamics 365 for Sales.];
                      Image=LinkAccount }
      { 47      ;3   ;Action    ;
                      Name=ManageCRMCoupling;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Set Up Coupling;
                                 ESP=Configurar emparejamiento];
                      ToolTipML=[ENU=Create or modify the coupling to a Dynamics 365 for Sales account.;
                                 ESP=Permite crear o modificar el emparejamiento con una cuenta de Dynamics 365 for Sales.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Visible=CRMIntegrationEnabled;
                      Image=LinkAccount;
                      PromotedCategory=Category9;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.DefineCoupling(RECORDID);
                               END;
                                }
      { 49      ;3   ;Action    ;
                      Name=DeleteCRMCoupling;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Delete Coupling;
                                 ESP=Eliminar emparejamiento];
                      ToolTipML=[ENU=Delete the coupling to a Dynamics 365 for Sales account.;
                                 ESP=Permite eliminar el emparejamiento con una cuenta de Dynamics 365 for Sales.];
                      ApplicationArea=#Suite;
                      Visible=CRMIntegrationEnabled;
                      Enabled=CRMIsCoupledToRecord;
                      Image=UnLinkAccount;
                      OnAction=VAR
                                 CRMCouplingManagement@1000 : Codeunit 5331;
                               BEGIN
                                 CRMCouplingManagement.RemoveCoupling(RECORDID);
                               END;
                                }
      { 150     ;2   ;Action    ;
                      Name=ShowLog;
                      CaptionML=[ENU=Synchronization Log;
                                 ESP=Registro de sincronizaci¢n];
                      ToolTipML=[ENU=View integration synchronization jobs for the customer table.;
                                 ESP=Permite ver los trabajos de sincronizaci¢n de integraci¢n para la tabla de clientes.];
                      ApplicationArea=#Suite;
                      Visible=CRMIntegrationEnabled;
                      Image=Log;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.ShowLog(RECORDID);
                               END;
                                }
      { 5       ;1   ;ActionGroup;
                      CaptionML=[ENU=History;
                                 ESP=Historial];
                      Image=History }
      { 80      ;2   ;Action    ;
                      ShortCutKey=Ctrl+F7;
                      CaptionML=[ENU=Ledger E&ntries;
                                 ESP=&Movimientos];
                      ToolTipML=[ENU=View the history of transactions that have been posted for the selected record.;
                                 ESP=Permite ver el historial de transacciones que se han registrado para el registro seleccionado.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 25;
                      RunPageView=SORTING(Customer No.)
                                  ORDER(Descending);
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=CustomerLedger;
                      PromotedCategory=Category9 }
      { 76      ;2   ;Action    ;
                      ShortCutKey=F7;
                      CaptionML=[ENU=Statistics;
                                 ESP=Estad¡sticas];
                      ToolTipML=[ENU=View statistical information, such as the value of posted entries, for the record.;
                                 ESP=Permite ver informaci¢n estad¡stica del registro, como el valor de los movimientos registrados.];
                      ApplicationArea=#Suite;
                      RunObject=Page 151;
                      RunPageLink=No.=FIELD(No.),
                                  Date Filter=FIELD(Date Filter),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Statistics;
                      PromotedCategory=Category9 }
      { 79      ;2   ;Action    ;
                      CaptionML=[ENU=S&ales;
                                 ESP=Ve&ntas];
                      ToolTipML=[ENU=View a summary of customer ledger entries. You select the time interval in the View by field. The Period column on the left contains a series of dates that are determined by the time interval you have selected.;
                                 ESP=Permite ver un resumen de movimientos del cliente. El intervalo de tiempo se selecciona en el campo Ver por. La columna Periodo, a la izquierda, contiene una serie de fechas que se determinan mediante el intervalo de tiempo que se haya seleccionado.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 155;
                      RunPageLink=No.=FIELD(No.),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                      Promoted=Yes;
                      Image=Sales;
                      PromotedCategory=Category8 }
      { 77      ;2   ;Action    ;
                      CaptionML=[ENU=Entry Statistics;
                                 ESP=Estad¡sticas documentos];
                      ToolTipML=[ENU=View entry statistics for the record.;
                                 ESP=Permite ver estad¡sticas de movimientos para el registro.];
                      ApplicationArea=#Suite;
                      RunObject=Page 302;
                      RunPageLink=No.=FIELD(No.),
                                  Date Filter=FIELD(Date Filter),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                      Image=EntryStatistics }
      { 112     ;2   ;Action    ;
                      CaptionML=[ENU=Statistics by C&urrencies;
                                 ESP=Estad¡sticas por di&visas];
                      ToolTipML=[ENU=View statistics for customers that use multiple currencies.;
                                 ESP=Permite ver estad¡sticas de los clientes que utilizan varias monedas.];
                      ApplicationArea=#Suite;
                      RunObject=Page 486;
                      RunPageLink=Customer Filter=FIELD(No.),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter),
                                  Date Filter=FIELD(Date Filter);
                      Image=Currencies }
      { 6500    ;2   ;Action    ;
                      CaptionML=[ENU=Item &Tracking Entries;
                                 ESP=Movs. &seguim. prod.];
                      ToolTipML=[ENU=View serial or lot numbers that are assigned to items.;
                                 ESP=Permite ver los n£meros de serie o de lote que se asignan a los productos.];
                      ApplicationArea=#ItemTracking;
                      Image=ItemTrackingLedger;
                      OnAction=VAR
                                 ItemTrackingDocMgt@1000 : Codeunit 6503;
                               BEGIN
                                 ItemTrackingDocMgt.ShowItemTrackingForMasterData(1,"No.",'','','','','');
                               END;
                                }
      { 140     ;2   ;Separator  }
      { 130     ;1   ;ActionGroup;
                      Name=Prices and Discounts;
                      CaptionML=[ENU=Prices and Discounts;
                                 ESP=Precios y descuentos] }
      { 83      ;2   ;Action    ;
                      CaptionML=[ENU=Invoice &Discounts;
                                 ESP=Dto. &factura];
                      ToolTipML=[ENU=Set up different discounts that are applied to invoices for the customer. An invoice discount is automatically granted to the customer when the total on a sales invoice exceeds a certain amount.;
                                 ESP=Permite configurar descuentos diferentes que se aplican a las facturas para el cliente. Un descuento de factura se concede autom ticamente al cliente cuando el total de una factura de venta supera un importe determinado.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 23;
                      RunPageLink=Code=FIELD(Invoice Disc. Code);
                      Image=CalculateInvoiceDiscount;
                      PromotedCategory=Category7 }
      { 113     ;2   ;Action    ;
                      CaptionML=[ENU=Prices;
                                 ESP=Precios];
                      ToolTipML=[ENU=View or set up different prices for items that you sell to the customer. An item price is automatically granted on invoice lines when the specified criteria are met, such as customer, quantity, or ending date.;
                                 ESP=Permite ver o configurar distintos precios para los art¡culos que se venden al cliente. Se concede autom ticamente un precio de art¡culo en las l¡neas de factura cuando se cumplen los criterios especificados, como el cliente, la cantidad o la fecha final.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 7002;
                      RunPageView=SORTING(Sales Type,Sales Code);
                      RunPageLink=Sales Type=CONST(Customer),
                                  Sales Code=FIELD(No.);
                      Image=Price }
      { 136     ;2   ;Action    ;
                      CaptionML=[ENU=Line Discounts;
                                 ESP=Descuentos l¡nea];
                      ToolTipML=[ENU=View or set up different discounts for items that you sell to the customer. An item discount is automatically granted on invoice lines when the specified criteria are met, such as customer, quantity, or ending date.;
                                 ESP=Permite ver o configurar descuentos distintos para los productos que se venden al cliente seleccionado. Se concede autom ticamente un descuento de producto en las l¡neas de factura cuando se cumplen los criterios especificados, como el cliente, la cantidad o la fecha final.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 7004;
                      RunPageView=SORTING(Sales Type,Sales Code);
                      RunPageLink=Sales Type=CONST(Customer),
                                  Sales Code=FIELD(No.);
                      Image=LineDiscount }
      { 82      ;1   ;ActionGroup;
                      CaptionML=[ENU=S&ales;
                                 ESP=Ve&ntas];
                      Image=Sales }
      { 162     ;2   ;Action    ;
                      CaptionML=[ENU=Prepa&yment Percentages;
                                 ESP=Porcentajes &prepago];
                      ToolTipML=[ENU="View or edit the percentages of the price that can be paid as a prepayment. ";
                                 ESP="Permite ver o editar los porcentajes del precio que pueden pagarse como prepago. "];
                      ApplicationArea=#Prepayments;
                      RunObject=Page 664;
                      RunPageView=SORTING(Sales Type,Sales Code);
                      RunPageLink=Sales Type=CONST(Customer),
                                  Sales Code=FIELD(No.);
                      Image=PrepaymentPercentages }
      { 118     ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Online Map;
                                 ESP=L¡neas de ventas peri¢dicas];
                      ToolTipML=[ENU=Set up recurring sales lines for the customer, such as a monthly replenishment order, that can quickly be inserted on a sales document for the customer.;
                                 ESP=Permite configurar l¡neas de ventas peri¢dicas para el cliente, como una orden de reposici¢n mensual, que se pueden insertar r pidamente en un documento de venta para el cliente.];
                      ApplicationArea=#Suite;
                      RunObject=Page 173;
                      RunPageLink=Customer No.=FIELD(No.);
                      PromotedIsBig=Yes;
                      Image=CustomerCode;
                      PromotedCategory=Category5 }
      { 1170170022;2 ;ActionGroup;
                      CaptionML=[ENU=Charges;
                                 ESP=Cargos];
                      Image=CashFlow }
      { 1170170024;3 ;Action    ;
                      CaptionML=[ENU=Chain charges analysis;
                                 ESP=Panorama de cargos];
                      Image=ApplicationWorksheet;
                      OnAction=BEGIN
                                 GestVtas.F21MostrarPanoramaCargos(Rec); // VNTES
                               END;
                                }
      { 1170170025;3 ;Action    ;
                      CaptionML=[ENU=Commercial subchains;
                                 ESP=Subcadenas comerciales];
                      Image=BOM;
                      OnAction=BEGIN
                                 GestVtas.F21MostrarSubCadenas(Rec); // VNTES
                               END;
                                }
      { 1170170026;2 ;ActionGroup;
                      CaptionML=[ENU=EMCS;
                                 ESP=EMCS];
                      Image=Administration }
      { 1170170027;3 ;Action    ;
                      CaptionML=[ENU=Consignees;
                                 ESP=Destinatarios];
                      RunObject=Page 7061455;
                      RunPageView=SORTING(No. cliente relacionado);
                      RunPageLink=No. cliente relacionado=FIELD(No.);
                      Image=Customer }
      { 1170170028;3 ;Action    ;
                      CaptionML=[ENU=Senders;
                                 ESP=Expedidores];
                      RunObject=Page 7061456;
                      RunPageView=SORTING(No. cliente relacionado);
                      RunPageLink=No. cliente relacionado=FIELD(No.);
                      Image=Vendor }
      { 7       ;1   ;ActionGroup;
                      CaptionML=[ENU=Documents;
                                 ESP=Documentos];
                      Image=Documents }
      { 85      ;2   ;Action    ;
                      CaptionML=[ENU=Quotes;
                                 ESP=Ofertas];
                      ToolTipML=[ENU=View a list of ongoing sales quotes for the customer.;
                                 ESP=Permite ver una lista de ofertas de venta en curso para el cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 9300;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Quote;
                      PromotedCategory=Category8 }
      { 157     ;2   ;Action    ;
                      CaptionML=[ENU=Invoices;
                                 ESP=Facturas];
                      ToolTipML=[ENU=View a list of ongoing sales invoices for the customer.;
                                 ESP=Permite ver una lista de facturas de venta en curso para el cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 9301;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Invoice;
                      PromotedCategory=Category8 }
      { 86      ;2   ;Action    ;
                      CaptionML=[ENU=Orders;
                                 ESP=Pedidos];
                      ToolTipML=[ENU=View a list of ongoing sales orders for the customer.;
                                 ESP=Permite ver una lista de pedidos de venta en curso para el cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 9305;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Document;
                      PromotedCategory=Category8 }
      { 121     ;2   ;Action    ;
                      CaptionML=[ENU=Return Orders;
                                 ESP=Devoluciones];
                      ToolTipML=[ENU=Open the list of ongoing return orders.;
                                 ESP=Abre la lista de pedidos de devoluci¢n de venta en curso.];
                      ApplicationArea=#SalesReturnOrder;
                      RunObject=Page 9304;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=ReturnOrder;
                      PromotedCategory=Category8 }
      { 151     ;2   ;ActionGroup;
                      CaptionML=[ENU=Issued Documents;
                                 ESP=Documentos emitidos];
                      Image=Documents }
      { 152     ;3   ;Action    ;
                      CaptionML=[ENU=Issued &Reminders;
                                 ESP=A&visos emitidos];
                      ToolTipML=[ENU=View the reminders that you have sent to the customer.;
                                 ESP=Permite ver los recordatorios que ha enviado al cliente.];
                      ApplicationArea=#Suite;
                      RunObject=Page 440;
                      RunPageView=SORTING(Customer No.,Posting Date);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=OrderReminder }
      { 153     ;3   ;Action    ;
                      CaptionML=[ENU=Issued &Finance Charge Memos;
                                 ESP=Docs. de &financiaci¢n emitidos];
                      ToolTipML=[ENU=View the finance charge memos that you have sent to the customer.;
                                 ESP=Permite ver los documentos de inter‚s que ha enviado al cliente.];
                      ApplicationArea=#Suite;
                      RunObject=Page 452;
                      RunPageView=SORTING(Customer No.,Posting Date);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=FinChargeMemo }
      { 114     ;2   ;Action    ;
                      CaptionML=[ENU=Blanket Orders;
                                 ESP=Pedidos abiertos];
                      ToolTipML=[ENU=Open the list of ongoing blanket orders.;
                                 ESP=Abre la lista de pedidos abiertos de venta actuales.];
                      ApplicationArea=#Suite;
                      RunObject=Page 9303;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Image=BlanketOrder }
      { 147     ;2   ;Action    ;
                      CaptionML=[ENU=&Jobs;
                                 ESP=Pro&yectos];
                      ToolTipML=[ENU=Open the list of ongoing jobs.;
                                 ESP=Abre la lista de proyectos en curso.];
                      ApplicationArea=#Jobs;
                      RunObject=Page 89;
                      RunPageView=SORTING(Bill-to Customer No.);
                      RunPageLink=Bill-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Job;
                      PromotedCategory=Category8 }
      { 13      ;1   ;ActionGroup;
                      CaptionML=[ENU=Service;
                                 ESP=Servicio];
                      Image=ServiceItem }
      { 128     ;2   ;Action    ;
                      CaptionML=[ENU=Service Orders;
                                 ESP=Pedidos servicio];
                      ToolTipML=[ENU=Open the list of ongoing service orders.;
                                 ESP=Abre la lista de pedidos de servicio en curso.];
                      ApplicationArea=#Service;
                      RunObject=Page 9318;
                      RunPageView=SORTING(Document Type,Customer No.);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=Document }
      { 126     ;2   ;Action    ;
                      CaptionML=[ENU=Ser&vice Contracts;
                                 ESP=Con&tratos servicios];
                      ToolTipML=[ENU=Open the list of ongoing service contracts.;
                                 ESP=Abre la lista de contratos de servicio en curso.];
                      ApplicationArea=#Service;
                      RunObject=Page 6065;
                      RunPageView=SORTING(Customer No.,Ship-to Code);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=ServiceAgreement }
      { 127     ;2   ;Action    ;
                      CaptionML=[ENU=Service &Items;
                                 ESP=&Productos servicio];
                      ToolTipML=[ENU=View or edit the service items that are registered for the customer.;
                                 ESP=Permite ver o editar los productos de servicio registrados para el cliente.];
                      ApplicationArea=#Service;
                      RunObject=Page 5988;
                      RunPageView=SORTING(Customer No.,Ship-to Code,Item No.,Serial No.);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=ServiceItem }
      { 9       ;    ;ActionContainer;
                      CaptionML=ENU=Credit Card;
                      ActionContainerType=NewDocumentItems }
      { 1902575205;1 ;Action    ;
                      Name=NewBlanketSalesOrder;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Blanket Sales Order;
                                 ESP=Pedido abierto venta];
                      ToolTipML=[ENU=Create a blanket sales order for the customer.;
                                 ESP=Crea un pedido abierto de venta para el cliente.];
                      ApplicationArea=#Suite;
                      RunObject=Page 507;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=BlanketOrder;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1900246505;1 ;Action    ;
                      Name=NewSalesQuote;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Quote;
                                 ESP=Oferta venta];
                      ToolTipML=[ENU=Offer items or services to a customer.;
                                 ESP=Permite ofrecer productos o servicios a un cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 41;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Visible=NOT IsOfficeAddin;
                      Image=NewSalesQuote;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1906384905;1 ;Action    ;
                      Name=NewSalesInvoice;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Invoice;
                                 ESP=Factura venta];
                      ToolTipML=[ENU=Create a sales invoice for the customer.;
                                 ESP=Crea una factura de venta para el cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 43;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Visible=NOT IsOfficeAddin;
                      Image=NewSalesInvoice;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1904747105;1 ;Action    ;
                      Name=NewSalesOrder;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Order;
                                 ESP=Pedido venta];
                      ToolTipML=[ENU=Create a sales order for the customer.;
                                 ESP=Crea un pedido de venta para el cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 42;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Visible=NOT IsOfficeAddin;
                      Image=Document;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1902583505;1 ;Action    ;
                      Name=NewSalesCreditMemo;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Credit Memo;
                                 ESP=Abono venta];
                      ToolTipML=[ENU=Create a new sales credit memo to revert a posted sales invoice.;
                                 ESP=Permite crear un nuevo abono de venta para revertir una factura de venta registrada.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 44;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Visible=NOT IsOfficeAddin;
                      Image=CreditMemo;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 164     ;1   ;Action    ;
                      Name=NewSalesQuoteAddin;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Quote;
                                 ESP=Oferta de venta];
                      ToolTipML=[ENU=Offer items or services to a customer.;
                                 ESP=Permite ofrecer productos o servicios a un cliente.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsOfficeAddin;
                      Image=NewSalesQuote;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CreateAndShowNewQuote;
                               END;
                                }
      { 159     ;1   ;Action    ;
                      Name=NewSalesInvoiceAddin;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Invoice;
                                 ESP=Factura venta];
                      ToolTipML=[ENU=Create a sales invoice for the customer.;
                                 ESP=Crea una factura de venta para el cliente.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsOfficeAddin;
                      Image=NewSalesInvoice;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CreateAndShowNewInvoice;
                               END;
                                }
      { 155     ;1   ;Action    ;
                      Name=NewSalesOrderAddin;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Order;
                                 ESP=Pedido venta];
                      ToolTipML=[ENU=Create a sales order for the customer.;
                                 ESP=Crea un pedido de venta para el cliente.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsOfficeAddin;
                      Image=Document;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CreateAndShowNewOrder;
                               END;
                                }
      { 137     ;1   ;Action    ;
                      Name=NewSalesCreditMemoAddin;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Credit Memo;
                                 ESP=Abono venta];
                      ToolTipML=[ENU=Create a new sales credit memo to revert a posted sales invoice.;
                                 ESP=Permite crear un nuevo abono de venta para revertir una factura de venta registrada.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsOfficeAddin;
                      Image=CreditMemo;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CreateAndShowNewCreditMemo;
                               END;
                                }
      { 1905163705;1 ;Action    ;
                      Name=NewSalesReturnOrder;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Return Order;
                                 ESP=Devoluci¢n venta];
                      ToolTipML=[ENU=Create a new sales return order for items or services.;
                                 ESP=Permite crear un pedido de devoluci¢n de venta de productos o servicios.];
                      ApplicationArea=#SalesReturnOrder;
                      RunObject=Page 6630;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=ReturnOrder;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1905185205;1 ;Action    ;
                      Name=NewServiceQuote;
                      AccessByPermission=TableData 5900=RIM;
                      CaptionML=[ENU=Service Quote;
                                 ESP=Oferta servicio];
                      ToolTipML=[ENU=Create a new service quote for the customer.;
                                 ESP=Crea una oferta de servicio para el cliente.];
                      ApplicationArea=#Service;
                      RunObject=Page 5964;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=Quote;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1902079405;1 ;Action    ;
                      Name=NewServiceInvoice;
                      AccessByPermission=TableData 5900=RIM;
                      CaptionML=[ENU=Service Invoice;
                                 ESP=Factura servicio];
                      ToolTipML=[ENU=Create a new service invoice for the customer.;
                                 ESP=Crea una factura de servicio para el cliente.];
                      ApplicationArea=#Service;
                      RunObject=Page 5933;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=Invoice;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1907102005;1 ;Action    ;
                      Name=NewServiceOrder;
                      AccessByPermission=TableData 5900=RIM;
                      CaptionML=[ENU=Service Order;
                                 ESP=Pedido servicio];
                      ToolTipML=[ENU=Create a new service order for the customer.;
                                 ESP=Crea un pedido de servicio para el cliente.];
                      ApplicationArea=#Service;
                      RunObject=Page 5900;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=Document;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1901662105;1 ;Action    ;
                      Name=NewServiceCreditMemo;
                      AccessByPermission=TableData 5900=RIM;
                      CaptionML=[ENU=Service Credit Memo;
                                 ESP=Abono servicio];
                      ToolTipML=[ENU=Create a new service credit memo for the customer.;
                                 ESP=Crea un abono de servicio para el cliente.];
                      ApplicationArea=#Service;
                      RunObject=Page 5935;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=CreditMemo;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1903839805;1 ;Action    ;
                      Name=NewReminder;
                      AccessByPermission=TableData 295=RIM;
                      CaptionML=[ENU=Reminder;
                                 ESP=Recordatorio];
                      ToolTipML=[ENU=Create a new reminder for the customer.;
                                 ESP=Crea un recordatorio para el cliente.];
                      ApplicationArea=#Suite;
                      RunObject=Page 434;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Reminder;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1901102005;1 ;Action    ;
                      Name=NewFinanceChargeMemo;
                      AccessByPermission=TableData 302=RIM;
                      CaptionML=[ENU=Finance Charge Memo;
                                 ESP=Documento inter‚s];
                      ToolTipML=[ENU=Create a new finance charge memo.;
                                 ESP=Crea un documento de inter‚s.];
                      ApplicationArea=#Suite;
                      RunObject=Page 446;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=FinChargeMemo;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 57      ;1   ;ActionGroup;
                      CaptionML=[ENU=Approval;
                                 ESP=Aprobaci¢n];
                      Visible=OpenApprovalEntriesExistCurrUser;
                      Image=Confirm }
      { 56      ;2   ;Action    ;
                      Name=Approve;
                      CaptionML=[ENU=Approve;
                                 ESP=Aprobar];
                      ToolTipML=[ENU=Approve the requested changes.;
                                 ESP=Aprueba los cambios solicitados.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      PromotedIsBig=Yes;
                      Image=Approve;
                      PromotedCategory=Category5;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.ApproveRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 390     ;2   ;Action    ;
                      Name=Reject;
                      CaptionML=[ENU=Reject;
                                 ESP=Rechazar];
                      ToolTipML=[ENU=Reject the approval request.;
                                 ESP=Rechaza la solicitud de aprobaci¢n.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      PromotedIsBig=Yes;
                      Image=Reject;
                      PromotedCategory=Category5;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.RejectRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 41      ;2   ;Action    ;
                      Name=Delegate;
                      CaptionML=[ENU=Delegate;
                                 ESP=Delegar];
                      ToolTipML=[ENU=Delegate the approval to a substitute approver.;
                                 ESP=Delega la aprobaci¢n a un aprobador sustituto.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      Image=Delegate;
                      PromotedCategory=Category5;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.DelegateRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 148     ;2   ;Action    ;
                      Name=Comment;
                      CaptionML=[ENU=S&td. Cust. Sales Codes;
                                 ESP=Comentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      Image=ViewComments;
                      PromotedCategory=Category5;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.GetApprovalComment(Rec);
                               END;
                                }
      { 45      ;1   ;ActionGroup;
                      CaptionML=[ENU=Request Approval;
                                 ESP=Aprobaci¢n solic.];
                      Image=SendApprovalRequest }
      { 55      ;2   ;Action    ;
                      Name=SendApprovalRequest;
                      CaptionML=[ENU=Send A&pproval Request;
                                 ESP=Enviar solicitud a&probaci¢n];
                      ToolTipML=[ENU=Request approval to change the record.;
                                 ESP=Permite solicitar aprobaci¢n para cambiar el registro.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=(NOT OpenApprovalEntriesExist) AND EnabledApprovalWorkflowsExist AND CanRequestApprovalForFlow;
                      PromotedIsBig=Yes;
                      Image=SendApprovalRequest;
                      PromotedCategory=Category6;
                      OnAction=VAR
                                 ApprovalsMgmt@1001 : Codeunit 1535;
                               BEGIN
                                 IF ApprovalsMgmt.CheckCustomerApprovalsWorkflowEnabled(Rec) THEN
                                   ApprovalsMgmt.OnSendCustomerForApproval(Rec);
                               END;
                                }
      { 37      ;2   ;Action    ;
                      Name=CancelApprovalRequest;
                      CaptionML=[ENU=Cancel Approval Re&quest;
                                 ESP=&Cancelar solicitud aprobaci¢n];
                      ToolTipML=[ENU=Cancel the approval request.;
                                 ESP=Cancela la solicitud de aprobaci¢n.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=CanCancelApprovalForRecord OR CanCancelApprovalForFlow;
                      Image=CancelApprovalRequest;
                      PromotedCategory=Category6;
                      OnAction=VAR
                                 ApprovalsMgmt@1001 : Codeunit 1535;
                                 WorkflowWebhookManagement@1000 : Codeunit 1543;
                               BEGIN
                                 ApprovalsMgmt.OnCancelCustomerApprovalRequest(Rec);
                                 WorkflowWebhookManagement.FindAndCancel(RECORDID);
                               END;
                                }
      { 161     ;2   ;ActionGroup;
                      Name=Flow;
                      CaptionML=[ENU=Flow;
                                 ESP=Flow] }
      { 168     ;3   ;Action    ;
                      Name=CreateFlow;
                      CaptionML=[ENU=Create a Flow;
                                 ESP=Crear un flujo de trabajo];
                      ToolTipML=[ENU=Create a new Flow from a list of relevant Flow templates.;
                                 ESP=Crea un nuevo flujo de trabajo a partir de una lista de plantillas de flujo de trabajo pertinentes.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsSaaS;
                      Image=Flow;
                      PromotedCategory=Category6;
                      OnAction=VAR
                                 FlowServiceManagement@1001 : Codeunit 6400;
                                 FlowTemplateSelector@1000 : Page 6400;
                               BEGIN
                                 // Opens page 6400 where the user can use filtered templates to create new flows.
                                 FlowTemplateSelector.SetSearchText(FlowServiceManagement.GetCustomerTemplateFilter);
                                 FlowTemplateSelector.RUN;
                               END;
                                }
      { 166     ;3   ;Action    ;
                      Name=SeeFlows;
                      CaptionML=[ENU=See my Flows;
                                 ESP=Ver mis flujos de trabajo];
                      ToolTipML=[ENU=View and configure Flows that you created.;
                                 ESP=Permite ver y configurar los flujos de trabajo que ha creado.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 6401;
                      Promoted=Yes;
                      Image=Flow;
                      PromotedCategory=Category6 }
      { 142     ;1   ;ActionGroup;
                      CaptionML=[ENU=Workflow;
                                 ESP=Flujo de trabajo] }
      { 17      ;2   ;Action    ;
                      Name=CreateApprovalWorkflow;
                      CaptionML=[ENU=Credit Cards;
                                 ESP=Crear flujo de trabajo de aprobaci¢n];
                      ToolTipML=[ENU=Set up an approval workflow for creating or changing customers, by going through a few pages that will guide you.;
                                 ESP=Permite configurar un flujo de trabajo de aprobaci¢n para crear o cambiar clientes a trav‚s de unas cuantas p ginas que le orientar n.];
                      ApplicationArea=#Suite;
                      Enabled=NOT EnabledApprovalWorkflowsExist;
                      Image=CreateWorkflow;
                      OnAction=BEGIN
                                 PAGE.RUNMODAL(PAGE::"Cust. Approval WF Setup Wizard");
                               END;
                                }
      { 138     ;2   ;Action    ;
                      Name=ManageApprovalWorkflows;
                      CaptionML=[ENU=Manage Approval Workflows;
                                 ESP=Administrar flujos de trabajo de aprobaci¢n];
                      ToolTipML=[ENU=View or edit existing approval workflows for creating or changing customers.;
                                 ESP=Permite ver o editar flujos de trabajo de aprobaci¢n existentes para crear o modificar clientes.];
                      ApplicationArea=#Suite;
                      Enabled=EnabledApprovalWorkflowsExist;
                      Image=WorkflowSetup;
                      OnAction=VAR
                                 WorkflowManagement@1000 : Codeunit 1501;
                               BEGIN
                                 WorkflowManagement.NavigateToWorkflows(DATABASE::Customer,EventFilter);
                               END;
                                }
      { 163     ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 139     ;2   ;Action    ;
                      Name=Templates;
                      CaptionML=[ENU=Templates;
                                 ESP=Plantillas];
                      ToolTipML=[ENU=View or edit customer templates.;
                                 ESP=Permite ver o editar las plantillas de clientes.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 1340;
                      RunPageLink=Table ID=CONST(18);
                      PromotedIsBig=Yes;
                      Image=Template }
      { 167     ;2   ;Action    ;
                      Name=ApplyTemplate;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Apply Template;
                                 ESP=Aplicar plantilla];
                      ToolTipML=[ENU=Apply a template to update the entity with your standard settings for a certain type of entity.;
                                 ESP=Permite aplicar una plantilla para actualizar la entidad con su configuraci¢n est ndar para un determinado tipo de entidad.];
                      ApplicationArea=#Basic,#Suite;
                      Image=ApplyTemplate;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 MiniCustomerTemplate@1002 : Record 1300;
                               BEGIN
                                 MiniCustomerTemplate.UpdateCustomerFromTemplate(Rec);
                               END;
                                }
      { 1170170032;2 ;ActionGroup;
                      CaptionML=[ENU=Annex;
                                 ESP=Anexos];
                      Image=CashFlow }
      { 1170170023;3 ;Action    ;
                      CaptionML=[ENU=Create tax location;
                                 ESP=Crear dep¢sito fiscal];
                      Image=CostAccountingSetup;
                      OnAction=BEGIN
                                 GestVtas.T18CreaDepositoFiscal(Rec); // VNTES
                               END;
                                }
      { 1170170029;2 ;ActionGroup;
                      CaptionML=[ENU=EMCS;
                                 ESP=EMCS];
                      Image=HumanResources }
      { 1170170030;3 ;Action    ;
                      CaptionML=[ENU=Create consignee;
                                 ESP=Crear destinatario];
                      Image=Customer;
                      OnAction=BEGIN
                                 GestionEMCS.CreateDestinatarioCliente(Rec); // VNTES
                               END;
                                }
      { 1170170031;3 ;Action    ;
                      CaptionML=[ENU=Create sender;
                                 ESP=Crear expedidor];
                      Image=Vendor;
                      OnAction=BEGIN
                                 GestionEMCS.CreateExpedidorCliente(Rec); // VNTES
                               END;
                                }
      { 132     ;2   ;Action    ;
                      Name=SaveAsTemplate;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Save as Template;
                                 ESP=Guardar como plantilla];
                      ToolTipML=[ENU=Save the customer card as a template that can be reused to create new customer cards. Customer templates contain preset information to help you fill fields on customer cards.;
                                 ESP=Permite guardar la ficha cliente como plantilla que se podr  usar para crear nuevas fichas cliente. Las plantillas de cliente contienen informaci¢n predefinida para ayudarle a completar los cambios de las fichas cliente.];
                      ApplicationArea=#Basic,#Suite;
                      PromotedIsBig=Yes;
                      Image=Save;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 TempMiniCustomerTemplate@1000 : TEMPORARY Record 1300;
                               BEGIN
                                 TempMiniCustomerTemplate.SaveAsTemplate(Rec);
                               END;
                                }
      { 172     ;2   ;Action    ;
                      Name=MergeDuplicate;
                      AccessByPermission=TableData 64=RIMD;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Merge With;
                                 ESP=Combinar con];
                      ToolTipML=[ENU=Merge two customer records into one. Before merging, review which field values you want to keep or override. The merge action cannot be undone.;
                                 ESP=Permite combinar dos registros de cliente en uno. Antes de combinar, revise qu‚ valores de campo desea conservar o reemplazar. La acci¢n de combinaci¢n no se puede deshacer.];
                      ApplicationArea=#Basic,#Suite;
                      Image=ItemSubstitution;
                      OnAction=VAR
                                 TempMergeDuplicatesBuffer@1000 : TEMPORARY Record 64;
                               BEGIN
                                 TempMergeDuplicatesBuffer.Show(DATABASE::Customer,"No.");
                               END;
                                }
      { 1900839804;1 ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Cash Receipt Journal;
                                 ESP=Registrar recibos de efectivo];
                      ToolTipML=[ENU=Create a cash receipt journal line for the customer, for example, to post a payment receipt.;
                                 ESP=Permite crear una l¡nea del diario de recibos de cobro para el cliente, por ejemplo, para registrar un albar n de pago.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 255;
                      Image=CashReceiptJournal;
                      PromotedCategory=Process }
      { 1905171704;1 ;Action    ;
                      CaptionML=[ENU=Sales Journal;
                                 ESP=Diario ventas];
                      ToolTipML=[ENU=Post any sales transaction for the customer.;
                                 ESP=Registra cualquier transacci¢n de ventas del cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 253;
                      Image=Journals;
                      PromotedCategory=Process }
      { 165     ;1   ;Action    ;
                      Name=PaymentRegistration;
                      CaptionML=[ENU=Register Customer Payments;
                                 ESP=Registrar pagos de cliente];
                      ToolTipML=[ENU=Process your customer payments by matching amounts received on your bank account with the related unpaid sales invoices, and then post the payments.;
                                 ESP=Permite procesar los pagos de sus clientes al conciliar los importes recibidos en la cuenta bancaria con las facturas de venta relacionadas no pagadas y luego registrar los pagos.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 981;
                      RunPageLink=Source No.=FIELD(No.);
                      Image=Payment;
                      PromotedCategory=Process }
      { 1900000006;0 ;ActionContainer;
                      ActionContainerType=Reports }
      { 1906813206;1 ;Action    ;
                      Name=Report Customer Detailed Aging;
                      CaptionML=[ENU=Customer Detailed Aging;
                                 ESP=Deuda pendiente cliente];
                      ToolTipML=[ENU=View a detailed list of each customer's total payments due, divided into three time periods. The report can be used to decide when to issue reminders, to evaluate a customer's creditworthiness, or to prepare liquidity analyses.;
                                 ESP=Permite ver una lista detallada del total de pagos vencidos de cada cliente, divididos en tres per¡odos. El informe se puede utilizar para decidir cu ndo emitir recordatorios, valorar el cr‚dito de un cliente o preparar los an lisis de liquidez.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=No;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 RunReport(REPORT::"Customer Detailed Aging","No.");
                               END;
                                }
      { 1907586706;1 ;Action    ;
                      Name=Report Customer - Labels;
                      CaptionML=[ENU=Customer - Labels;
                                 ESP=Cliente - Etiquetas];
                      ToolTipML=[ENU=View mailing labels with the customers' names and addresses.;
                                 ESP=Permite ver etiquetas de correo con los nombres y las direcciones de los clientes.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=No;
                      Image=Report;
                      PromotedCategory=Category9;
                      OnAction=BEGIN
                                 RunReport(REPORT::"Customer - Labels","No.");
                               END;
                                }
      { 1902299006;1 ;Action    ;
                      Name=Report Customer - Balance to Date;
                      CaptionML=[ENU=Customer - Balance to Date;
                                 ESP=Cliente - Saldo por fechas];
                      ToolTipML=[ENU=View a list with customers' payment history up until a certain date. You can use the report to extract your total sales income at the close of an accounting period or fiscal year.;
                                 ESP=Permite ver una lista con el historial de pagos de los clientes hasta una fecha determinada. Puede usar el informe para extraer el ingreso total de ventas al cierre de un per¡odo contable o un ejercicio.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Report;
                      PromotedCategory=Category9;
                      OnAction=BEGIN
                                 RunReport(REPORT::"Customer - Balance to Date","No.");
                               END;
                                }
      { 133     ;1   ;Action    ;
                      Name=Report Statement;
                      CaptionML=[ENU=Statement;
                                 ESP=Extracto];
                      ToolTipML=[ENU=View a list of a customer's transactions for a selected period, for example, to send to the customer at the close of an accounting period. You can choose to have all overdue balances displayed regardless of the period specified, or you can choose to include an aging band.;
                                 ESP=Permite ver una lista de transacciones del cliente en un per¡odo seleccionado, por ejemplo, para enviar al cliente al cierre de un per¡odo contable. Tambi‚n permite ver todos los saldos vencidos, sea cual sea el per¡odo especificado, o bien elegir que se incluya un rango de antigedad.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Category8;
                      OnAction=VAR
                                 CustomerLayoutStatement@1000 : Codeunit 8810;
                               BEGIN
                                 CustomerLayoutStatement.RunReportWithoutRequestPage;
                               END;
                                }
      { 194     ;1   ;Action    ;
                      Name=BackgroundStatement;
                      CaptionML=[ENU=Scheduled Statements;
                                 ESP=Extractos programados];
                      ToolTipML=[ENU=Schedule Customer Statements in the Job Queue.;
                                 ESP=Programar extractos de cliente en la cola de proyecto.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Category8;
                      OnAction=VAR
                                 CustomerLayoutStatement@1170 : Codeunit 8810;
                               BEGIN
                                 CustomerLayoutStatement.EnqueueReport;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                CaptionML=[ENU=General;
                           ESP=General] }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the customer. The field is either filled automatically from a defined number series, or you enter the number manually because you have enabled manual number entry in the number-series setup.;
                           ESP=Especifica el n£mero del cliente. El campo se rellena autom ticamente a partir de una serie num‚rica definida o de forma manual porque se habilit¢ la entrada manual de n£meros en la configuraci¢n de series num‚ricas.];
                ApplicationArea=#All;
                SourceExpr="No.";
                Importance=Standard;
                Visible=NoFieldVisible;
                OnAssistEdit=BEGIN
                               IF AssistEdit(xRec) THEN
                                 CurrPage.UPDATE;
                             END;
                              }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's name. This name will appear on all sales documents for the customer. You can enter a maximum of 50 characters, both numbers and letters.;
                           ESP=Especifica el nombre del cliente. Este nombre aparecer  en todos los documentos de venta del cliente. Puede insertar un m ximo de 50 caracteres, tanto n£meros como letras.];
                ApplicationArea=#All;
                SourceExpr=Name;
                Importance=Promoted;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                           END;

                ShowMandatory=TRUE }

    { 1170000002;2;Field  ;
                SourceExpr="C¢d. tipo cliente" }

    { 1170000003;2;Field  ;
                SourceExpr="C¢d. subtipo cliente" }

    { 1170000004;2;Field  ;
                SourceExpr="Tipo facturaci¢n" }

    { 1170000005;2;Field  ;
                SourceExpr="Periodo facturaci¢n" }

    { 1170000006;2;Field  ;
                SourceExpr="Fecha alta" }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies an alternate name that you can use to search for a customer.;
                           ESP=Especifica un nombre alternativo que se puede usar para buscar un cliente.];
                ApplicationArea=#All;
                SourceExpr="Search Name";
                Importance=Additional;
                Visible=FALSE }

    { 154 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's intercompany partner code.;
                           ESP=Especifica el c¢digo de socio de empresas vinculadas del cliente.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Code";
                Importance=Additional }

    { 20  ;2   ;Field     ;
                Name=Balance (LCY);
                ToolTipML=[ENU=Specifies the payment amount that the customer owes for completed sales. This value is also known as the customer's balance.;
                           ESP=Especifica el importe de pago que el cliente debe por las ventas completadas. Este valor tambi‚n se conoce como saldo del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Balance (LCY)";
                OnDrillDown=BEGIN
                              OpenCustomerLedgerEntries(FALSE);
                            END;
                             }

    { 144 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies payments from the customer that are overdue per today's date.;
                           ESP=Especifica los pagos del cliente que est n vencidos seg£n la fecha actual.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Balance Due (LCY)";
                OnDrillDown=BEGIN
                              OpenCustomerLedgerEntries(TRUE);
                            END;
                             }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the maximum amount you allow the customer to exceed the payment balance before warnings are issued.;
                           ESP=Especifica el importe m ximo por el que se permite al cliente superar el saldo del pago antes de que se emitan las advertencias.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Credit Limit (LCY)";
                StyleExpr=StyleTxt;
                OnValidate=BEGIN
                             StyleTxt := SetStyle;
                           END;
                            }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which transactions with the customer that cannot be blocked, for example, because the customer is insolvent.;
                           ESP=Especifica qu‚ transacciones con el cliente no pueden bloquearse, por ejemplo, porque el cliente es insolvente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Blocked }

    { 1170000000;2;Field  ;
                SourceExpr="Pendiente revisar" }

    { 200 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to limit access to data for the data subject during daily operations. This is useful, for example, when protecting data from changes while it is under privacy review.;
                           ESP=Especifica si desea limitar el acceso a los datos del interesado durante las operaciones diarias. Esto es £til, por ejemplo, cuando desea proteger los datos para que no se introduzcan cambios mientras se encuentran en revisi¢n de privacidad.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Privacy Blocked";
                Importance=Additional }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a code for the salesperson who normally handles this customer's account.;
                           ESP=Especifica un c¢digo para el vendedor que suele encargarse de la cuenta de este cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Salesperson Code";
                Importance=Additional }

    { 64  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the responsibility center that will administer this customer by default.;
                           ESP=Especifica el c¢digo del centro de responsabilidad que administrar  este cliente de forma predeterminada.];
                ApplicationArea=#Suite;
                SourceExpr="Responsibility Center";
                Importance=Additional }

    { 93  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the service zone that is assigned to the customer.;
                           ESP=Especifica el c¢digo de la zona de servicio asignada al cliente.];
                ApplicationArea=#Service;
                SourceExpr="Service Zone Code";
                Importance=Additional }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the preferred method of sending documents to this customer, so that you do not have to select a sending option every time that you post and send a document to the customer. Sales documents to this customer will be sent using the specified sending profile and will override the default document sending profile.;
                           ESP=Especifica el m‚todo preferido de env¡o de documentos a este cliente, para que no sea necesario seleccionar una opci¢n de env¡o cada vez que registra y env¡a un documento al cliente. Los documentos de venta a este cliente se enviar n con el perfil que de env¡o especificado que reemplazar  al perfil de env¡o de documentos predeterminado.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Document Sending Profile";
                Importance=Additional }

    { 73  ;2   ;Field     ;
                Name=TotalSales2;
                CaptionML=[ENU=Total Sales;
                           ESP=Total ventas];
                ToolTipML=[ENU=Specifies your total sales turnover with the customer in the current fiscal year. It is calculated from amounts excluding VAT on all completed and open invoices and credit memos.;
                           ESP=Especifica el volumen de ventas total con el cliente en el ejercicio actual. Se calcula a partir de los importes sin IVA de todas las facturas y los abonos pendientes y completados.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetTotalSales;
                Style=Strong;
                StyleExpr=TRUE }

    { 72  ;2   ;Field     ;
                CaptionML=[ENU=Costs (LCY);
                           ESP=Costes (DL)];
                ToolTipML=[ENU=Specifies how much cost you have incurred from the customer in the current fiscal year.;
                           ESP=Especifica el coste en que ha incurrido a partir del cliente en el ejercicio actual.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CustSalesLCY - CustProfit - AdjmtCostLCY;
                AutoFormatType=1 }

    { 71  ;2   ;Field     ;
                CaptionML=[ENU=Profit (LCY);
                           ESP=Bf§ bruto (DL)];
                ToolTipML=[ENU=Specifies how much profit you have made from the customer in the current fiscal year.;
                           ESP=Especifica el beneficio que ha realizado a partir del cliente en el ejercicio actual.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=AdjCustProfit;
                AutoFormatType=1;
                Importance=Additional;
                Editable=False }

    { 69  ;2   ;Field     ;
                CaptionML=[ENU=Profit %;
                           ESP=% Bf§ bruto];
                ToolTipML=[ENU=Specifies how much profit you have made from the customer in the current fiscal year, expressed as a percentage of the customer's total sales.;
                           ESP=Especifica el beneficio que ha realizado a partir del cliente en el ejercicio actual, expresado como porcentaje del total de ventas al cliente.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=1:1;
                SourceExpr=AdjProfitPct;
                Importance=Additional;
                Editable=False }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when the customer card was last modified.;
                           ESP=Especifica cu ndo se modific¢ la ficha cliente por £ltima vez.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Last Date Modified";
                Importance=Additional }

    { 171 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you can change customer name in the document, because the name is not used in search.;
                           ESP=Especifica que puede cambiar el nombre del cliente en el documento porque el nombre no se usa en la b£squeda.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Disable Search by Name";
                Importance=Additional }

    { 1100001;2;Field     ;
                ToolTipML=[ENU=Specifies that the customer is not registered in Spanish tax agency.;
                           ESP=Especifica que el cliente no est  registrado en la agencia tributaria espa¤ola.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Not in AEAT" }

    { 1170170033;2;Field  ;
                SourceExpr="C¢d. zona comisi¢n cliente" }

    { 1170000008;1;Group  ;
                CaptionML=ESP=Cr‚dito;
                GroupType=Group }

    { 1170000009;2;Field  ;
                SourceExpr="Asegurado por Mapfre" }

    { 1170000010;2;Field  ;
                SourceExpr="C¢d. cliente Mapfre" }

    { 1170000011;2;Field  ;
                SourceExpr="Nominativo/An¢nimo" }

    { 1170000012;2;Field  ;
                SourceExpr="Riesgo concedido Mapfre" }

    { 1170000013;2;Field  ;
                SourceExpr="Limite concedido Mapfre (%)" }

    { 1902768601;1;Group  ;
                CaptionML=[ENU=Communication;
                           ESP=Direcci¢n y contacto];
                GroupType=Group }

    { 63  ;2   ;Group     ;
                Name=AddressDetails;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                GroupType=Group }

    { 6   ;3   ;Field     ;
                Name=Address;
                ToolTipML=[ENU=Specifies the customer's address. This address will appear on all sales documents for the customer.;
                           ESP=Especifica la direcci¢n del cliente. Esta direcci¢n aparecer  en todos los documentos de venta del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Address }

    { 8   ;3   ;Field     ;
                ToolTipML=[ENU=Specifies additional address information.;
                           ESP=Especifica informaci¢n adicional sobre la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Address 2" }

    { 91  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the country/region of the address.;
                           ESP=Especifica el pa¡s o la regi¢n de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Country/Region Code";
                OnValidate=BEGIN
                             IsCountyVisible := FormatAddress.UseCounty("Country/Region Code");
                           END;
                            }

    { 169 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's city.;
                           ESP=Especifica la poblaci¢n del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=City }

    { 10  ;3   ;Group     ;
                Visible=IsCountyVisible;
                GroupType=Group }

    { 177 ;4   ;Field     ;
                ToolTipML=[ENU=Specifies the state, province or county as a part of the address.;
                           ESP=Especifica el estado, provincia o comarca como parte de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=County }

    { 90  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the postal code.;
                           ESP=Especifica el c¢digo postal.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Post Code";
                Importance=Promoted }

    { 125 ;3   ;Field     ;
                Name=ShowMap;
                ToolTipML=[ENU=Specifies the customer's address on your preferred map website.;
                           ESP=Especifica la direcci¢n del cliente en su sitio web de mapas favorito.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=ShowMapLbl;
                Editable=FALSE;
                Style=StrongAccent;
                StyleExpr=TRUE;
                OnDrillDown=BEGIN
                              CurrPage.UPDATE(TRUE);
                              DisplayMap;
                            END;

                ShowCaption=No }

    { 65  ;2   ;Group     ;
                Name=ContactDetails;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                GroupType=Group }

    { 122 ;3   ;Field     ;
                CaptionML=[ENU=Contact Code;
                           ESP=C¢digo del contacto];
                ToolTipML=[ENU=Specifies the contact number for the customer.;
                           ESP=Especifica el n£mero del contacto para el cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Primary Contact No.";
                Importance=Additional }

    { 16  ;3   ;Field     ;
                Name=ContactName;
                CaptionML=[ENU=Contact Name;
                           ESP=Nombre contacto];
                ToolTipML=[ENU=Specifies the name of the person you regularly contact when you do business with this customer.;
                           ESP=Especifica el nombre de la persona con la que se comunica normalmente cuando trata con este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Contact;
                Importance=Promoted;
                Editable=ContactEditable;
                OnValidate=BEGIN
                             ContactOnAfterValidate;
                           END;
                            }

    { 12  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's telephone number.;
                           ESP=Especifica el n£mero de tel‚fono del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Phone No." }

    { 107 ;3   ;Field     ;
                ExtendedDatatype=E-Mail;
                ToolTipML=[ENU=Specifies the customer's email address.;
                           ESP=Especifica la direcci¢n de correo electr¢nico del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="E-Mail";
                Importance=Promoted }

    { 104 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's fax number.;
                           ESP=Especifica el n£mero de fax del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Fax No.";
                Importance=Additional }

    { 109 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's home page address.;
                           ESP=Especifica la direcci¢n de la p gina web del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Home Page" }

    { 66  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the language to be used on printouts for this customer.;
                           ESP=Especifica el idioma que se va a usar en las copias impresas para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Language Code";
                Importance=Additional }

    { 1170170021;1;Group  ;
                CaptionML=[ENU=Annex;
                           ESP=Anexos];
                GroupType=Group }

    { 1170170020;2;Field  ;
                SourceExpr="Tipo destinatario" }

    { 1170170019;2;Field  ;
                SourceExpr="C¢d. destinatario" }

    { 1170170018;2;Field  ;
                SourceExpr="C¢d. lugar entrega" }

    { 1170170017;2;Field  ;
                SourceExpr="C¢d. r‚gimen fiscal" }

    { 1170170016;1;Group  ;
                CaptionML=[ENU=EDI;
                           ESP=EDI];
                GroupType=Group }

    { 1170170015;2;Field  ;
                SourceExpr="C¢digo E.D.I. factura" }

    { 1170170014;2;Field  ;
                SourceExpr="Facturas EDI" }

    { 1170170013;2;Field  ;
                SourceExpr="Departamento EDI" }

    { 1170170012;2;Field  ;
                SourceExpr="C¢digo E.D.I. peticionario" }

    { 1170170011;2;Field  ;
                SourceExpr="C¢digo E.D.I. env¡o" }

    { 1170170010;2;Field  ;
                SourceExpr="Albaranes E.D.I." }

    { 1170170009;2;Field  ;
                SourceExpr="C¢d. departamento EDI" }

    { 1170170008;2;Field  ;
                SourceExpr="C¢digo E.D.I. destino mensaje" }

    { 1905885101;1;Group  ;
                CaptionML=[ENU=Invoicing;
                           ESP=Facturaci¢n] }

    { 34  ;2   ;Field     ;
                CaptionML=[ENU=Bill-to Customer;
                           ESP=Cliente de facturaci¢n];
                ToolTipML=[ENU=Specifies a different customer who will be invoiced for products that you sell to the customer in the Name field on the customer card.;
                           ESP=Especifica otro cliente al que se le facturar n los productos que venda al cliente en el campo Nombre de la ficha cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Customer No.";
                Importance=Additional }

    { 1170000007;2;Field  ;
                SourceExpr="C¢d. direcci¢n postal" }

    { 29  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's VAT registration number for customers in EU countries/regions.;
                           ESP=Especifica el CIF/NIF de clientes de pa¡ses o regiones de la UE.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Registration No.";
                OnDrillDown=VAR
                              VATRegistrationLogMgt@1000 : Codeunit 249;
                            BEGIN
                              VATRegistrationLogMgt.AssistEditCustomerVATReg(Rec);
                            END;
                             }

    { 61  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer in connection with electronic document sending.;
                           ESP=Especifica el cliente en relaci¢n con el env¡o de documentos electr¢nicos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GLN;
                Importance=Additional }

    { 156 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which customer address is inserted on sales quotes that you create for the customer.;
                           ESP=Especifica qu‚ direcci¢n del cliente se inserta en las ofertas de venta que se crean para el cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Copy Sell-to Addr. to Qte From" }

    { 1170170005;2;Field  ;
                SourceExpr="Facturar a" }

    { 1170170004;2;Field  ;
                SourceExpr="Aplicar condiciones" }

    { 1170170003;2;Field  ;
                SourceExpr="No. cliente - Cadena comercial" }

    { 1170170002;2;Field  ;
                SourceExpr="C¢d. Subcadena comercial" }

    { 1170170001;2;Field  ;
                SourceExpr="Cadena comercial S/N" }

    { 1170170000;2;Field  ;
                SourceExpr="Grupo precio abono distr." }

    { 36  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many copies of an invoice for the customer will be printed at a time.;
                           ESP=Especifica cu ntas copias de la factura del cliente se imprimir n al mismo tiempo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Invoice Copies";
                Importance=Additional }

    { 170 ;2   ;Group     ;
                Name=PostingDetails;
                CaptionML=[ENU=Posting Details;
                           ESP=Detalles del registro];
                GroupType=Group }

    { 70  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's trade type to link transactions made for this customer with the appropriate general ledger account according to the general posting setup.;
                           ESP=Especifica el tipo de comercio del cliente para vincular las transacciones realizadas para este cliente con la cuenta de contabilidad general correspondiente seg£n la configuraci¢n de registro general.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Gen. Bus. Posting Group";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 58  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's VAT specification to link transactions made for this customer to.;
                           ESP=Indica la especificaci¢n de IVA del cliente a la que vincular las transacciones realizadas para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Bus. Posting Group";
                Importance=Additional }

    { 38  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's market type to link business transactions to.;
                           ESP=Especifica el tipo de mercado del cliente al que vincular las transacciones empresariales.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Customer Posting Group";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 68  ;2   ;Group     ;
                Name=PricesandDiscounts;
                CaptionML=[ENU=Prices and Discounts;
                           ESP=Precios y descuentos];
                GroupType=Group }

    { 67  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the default currency for the customer.;
                           ESP=Especifica la divisa predeterminada para el cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Currency Code";
                Importance=Additional }

    { 40  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer price group code, which you can use to set up special sales prices in the Sales Prices window.;
                           ESP=Especifica el c¢digo de grupo de precios de cliente, que puede utilizar para configurar precios de venta especiales en la ventana Precios de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Customer Price Group";
                Importance=Promoted }

    { 44  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer discount group code, which you can use as a criterion to set up special discounts in the Sales Line Discounts window.;
                           ESP=Especifica el c¢digo de grupo de descuento de cliente, que puede utilizar como criterio para configurar descuentos especiales en la ventana Descuentos l¡nea de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Customer Disc. Group";
                Importance=Promoted }

    { 46  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies if a sales line discount is calculated when a special sales price is offered according to setup in the Sales Prices window.;
                           ESP=Especifica si se calcula un descuento de l¡nea de ventas cuando se ofrece un precio de venta especial seg£n la configuraci¢n de la ventana Precios de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Line Disc.";
                Importance=Additional }

    { 42  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies a code for the invoice discount terms that you have defined for the customer.;
                           ESP=Especifica un c¢digo para las condiciones de descuento en factura que se han definido para el cliente.];
                ApplicationArea=#Basic,#Suite;
                NotBlank=Yes;
                SourceExpr="Invoice Disc. Code";
                Importance=Additional }

    { 129 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies if the Unit Price and Line Amount fields on document lines should be shown with or without VAT.;
                           ESP=Especifica si los campos Precio venta e Importe l¡nea en las l¡neas de documento deben mostrarse con o sin IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Prices Including VAT";
                Importance=Additional }

    { 1901677601;1;Group  ;
                CaptionML=[ENU=Payments;
                           ESP=Pagos] }

    { 160 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a prepayment percentage that applies to all orders for this customer, regardless of the items or services on the order lines.;
                           ESP=Especifica un porcentaje de prepago aplicable a todos los pedidos de este cliente, independientemente de los art¡culos o servicios incluidos en las l¡neas de pedido.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepayment %";
                Importance=Additional }

    { 1170170006;2;Field  ;
                SourceExpr="Ignora punto verde" }

    { 1170170007;2;Field  ;
                SourceExpr="C¢d. grupo IIEE negocio" }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how to apply payments to entries for this customer.;
                           ESP=Especifica c¢mo liquidar pagos en los movimientos para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Application Method";
                Importance=Additional }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies for direct debit collections if the customer that the payment is collected from is a person or a company.;
                           ESP=Especifica cobros por adeudo directo si el cliente al que se cobra el pago es una persona o una empresa.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Partner Type";
                Importance=Additional }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a code that indicates the payment terms that you require of the customer.;
                           ESP=Especifica un c¢digo que indica los t‚rminos de pago que suele exigir al proveedor.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Terms Code";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 11  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how the customer usually submits payment, such as bank transfer or check.;
                           ESP=Especifica c¢mo suele enviar pagos el cliente, como transferencia bancaria o cheque.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Method Code";
                Importance=Additional }

    { 1100000;2;Field     ;
                ToolTipML=[ENU=Specifies the payment days code used by this customer.;
                           ESP=Especifica el c¢digo de d¡as de pago que usa este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Days Code" }

    { 1100002;2;Field     ;
                ToolTipML=[ENU=Specifies the non-payment period code used by this customer.;
                           ESP=Especifica el c¢digo de periodo de no pago que usa este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Non-Paymt. Periods Code" }

    { 15  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how reminders about late payments are handled for this customer.;
                           ESP=Especifica c¢mo se controlan los avisos sobre los pagos vencidos para este cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Reminder Terms Code";
                Importance=Additional }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies finance charges are calculated for the customer.;
                           ESP=Especifica que los intereses que se calculan para el cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Fin. Charge Terms Code";
                Importance=Additional }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a payment term that will be used to calculate cash flow for the customer.;
                           ESP=Especifica un t‚rmino de pago que se usar  para calcular el flujo de efectivo del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cash Flow Payment Terms Code";
                Importance=Additional }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to include this customer when you print the Statement report.;
                           ESP=Especifica si desea incluir a este cliente cuando imprime el informe Extracto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Print Statements";
                Importance=Additional }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the last statement that was printed for this customer.;
                           ESP=Especifica el n£mero del £ltimo extracto impreso para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Last Statement No.";
                Importance=Additional }

    { 143 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that the customer is not allowed a payment tolerance.;
                           ESP=Especifica que no se permite una tolerancia de pago al cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Block Payment Tolerance";
                Importance=Additional }

    { 25  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's bank account that will be used by default when you process refunds to the customer and direct debit collections.;
                           ESP=Especifica la cuenta bancaria del cliente que se utilizar  de forma predeterminada al procesar reembolsos y cobros por adeudo directo al cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Preferred Bank Account Code";
                Importance=Additional }

    { 1906801201;1;Group  ;
                CaptionML=[ENU=Shipping;
                           ESP=Env¡o] }

    { 173 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for another shipment address than the customer's own address, which is entered by default.;
                           ESP=Especifica el c¢digo para otra direcci¢n de env¡o distinta a la propia direcci¢n del cliente, que se especifica de forma predeterminada.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Code" }

    { 95  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies from which location sales to this customer will be processed by default.;
                           ESP=Especifica desde qu‚ almac‚n se procesar n las ventas a este cliente de forma predeterminada.];
                ApplicationArea=#Location;
                SourceExpr="Location Code";
                Importance=Promoted }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if several orders delivered to the customer can appear on the same sales invoice.;
                           ESP=Especifica si en una misma factura de venta pueden figurar varios pedidos entregados al cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Combine Shipments" }

    { 158 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether items will never, automatically (Always), or optionally be reserved for this customer.;
                           ESP=Especifica si los productos no se reservar n nunca, lo har n autom ticamente (siempre) u opcionalmente para este cliente.];
                ApplicationArea=#Reservation;
                SourceExpr=Reserve }

    { 123 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the customer accepts partial shipment of orders.;
                           ESP=Especifica si el cliente acepta env¡os parciales de pedidos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipping Advice";
                Importance=Promoted }

    { 145 ;2   ;Group     ;
                CaptionML=[ENU=Shipment Method;
                           ESP=Condiciones env¡o];
                GroupType=Group }

    { 30  ;3   ;Field     ;
                CaptionML=[ENU=Code;
                           ESP=C¢digo];
                ToolTipML=[ENU=Specifies which shipment method to use when you ship items to the customer.;
                           ESP=Especifica qu‚ m‚todo de env¡o usar cuando se env¡en productos al cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Method Code";
                Importance=Promoted }

    { 101 ;3   ;Field     ;
                CaptionML=[ENU=Agent;
                           ESP=Agente];
                ToolTipML=[ENU=Specifies which shipping company is used when you ship items to the customer.;
                           ESP=Especifica qu‚ empresa de env¡o se usa cuando se env¡an productos al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Code";
                Importance=Additional }

    { 131 ;3   ;Field     ;
                CaptionML=[ENU=Agent Service;
                           ESP=Servicio de agente];
                ToolTipML=[ENU=Specifies the code for the shipping agent service to use for this customer.;
                           ESP=Especifica el c¢digo del servicio transportista que se usa para este cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Service Code";
                Importance=Additional }

    { 119 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how long it takes from when the items are shipped from the warehouse to when they are delivered.;
                           ESP=Especifica el tiempo que transcurre desde que se env¡an los productos desde el almac‚n hasta que se entregan.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Time";
                Importance=Additional }

    { 141 ;2   ;Field     ;
                DrillDown=No;
                ToolTipML=[ENU=Specifies a customizable calendar for shipment planning that holds the customer's working days and holidays.;
                           ESP=Especifica un calendario personalizable para la planificaci¢n de env¡os, que incluye los d¡as laborables y festivos del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Base Calendar Code" }

    { 146 ;2   ;Field     ;
                Name=Customized Calendar;
                CaptionML=[ENU=Customized Calendar;
                           ESP=Calendario personalizado];
                ToolTipML=[ENU=Specifies that you have set up a customized version of a base calendar.;
                           ESP=Especifica si ha configurado una versi¢n personalizada de un calendario base.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CalendarMgmt.CustomizedCalendarExistText(CustomizedCalendar."Source Type"::Customer,"No.",'',"Base Calendar Code");
                Editable=FALSE;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              TESTFIELD("Base Calendar Code");
                              CalendarMgmt.ShowCustomizedCalendar(CustomizedCalEntry."Source Type"::Customer,"No.",'',"Base Calendar Code");
                            END;
                             }

    { 124 ;1   ;Group     ;
                Name=Statistics;
                CaptionML=[ENU=Statistics;
                           ESP=Estad¡sticas];
                Visible=FoundationOnly;
                Editable=false;
                GroupType=Group }

    { 120 ;2   ;Group     ;
                Name=Balance;
                CaptionML=[ENU=Balance;
                           ESP=Saldo];
                GroupType=Group }

    { 117 ;3   ;Field     ;
                Name=Balance (LCY)2;
                CaptionML=[ENU=Money Owed - Current;
                           ESP=Dinero adeudado - Actual];
                ToolTipML=[ENU=Specifies the payment amount that the customer owes for completed sales. This value is also known as the customer's balance.;
                           ESP=Especifica el importe de pago que el cliente debe para las ventas completadas. Este valor tambi‚n se conoce como el saldo del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Balance (LCY)";
                OnDrillDown=BEGIN
                              OpenCustomerLedgerEntries(FALSE);
                            END;
                             }

    { 116 ;3   ;Field     ;
                Name=ExpectedCustMoneyOwed;
                CaptionML=[ENU=Money Owed - Expected;
                           ESP=Dinero adeudado - Previsto];
                ToolTipML=[ENU=Specifies the payment amount that the customer will owe when ongoing sales invoices and credit memos are completed.;
                           ESP=Especifica el importe de pago que el cliente deber  cuando se completen las facturas y los abonos de venta en curso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=ExpectedMoneyOwed;
                Importance=Additional;
                Editable=FALSE;
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownMoneyOwedExpected("No.");
                            END;
                             }

    { 115 ;3   ;Field     ;
                Name=TotalMoneyOwed;
                CaptionML=[ENU=Money Owed - Total;
                           ESP=Dinero adeudado - Total];
                ToolTipML=[ENU=Specifies the payment amount that the customer owes for completed sales plus sales that are still ongoing. The value is the sum of the values in the Money Owed - Current and Money Owed - Expected fields.;
                           ESP=Especifica el importe pendiente de pago del cliente en cuanto a las ventas completadas m s las ventas que est n en curso. El valor es la suma de los valores en los campos Dinero adeudado - Actual y Dinero adeudado - Previsto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Balance (LCY)" + ExpectedMoneyOwed;
                Style=Strong;
                StyleExpr=TRUE }

    { 111 ;3   ;Field     ;
                Name=CreditLimit;
                CaptionML=[ENU=Credit Limit;
                           ESP=L¡mite de cr‚dito];
                ToolTipML=[ENU=Specifies the maximum amount you allow the customer to exceed the payment balance before warnings are issued.;
                           ESP=Especifica el importe m ximo por el que se permite al cliente superar el saldo del pago antes de que se emitan las advertencias.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Credit Limit (LCY)" }

    { 110 ;3   ;Field     ;
                ExtendedDatatype=Ratio;
                CaptionML=[ENU=Usage Of Credit Limit;
                           ESP=Utilizaci¢n del l¡mite de cr‚dito];
                ToolTipML=[ENU=Specifies how much of the customer's payment balance consists of credit.;
                           ESP=Especifica qu‚ cantidad del saldo del pago del cliente consiste en haber.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CalcCreditLimitLCYExpendedPct;
                Style=Attention;
                StyleExpr=BalanceExhausted }

    { 108 ;2   ;Group     ;
                CaptionML=[ENU=Payments;
                           ESP=Pagos];
                GroupType=Group }

    { 106 ;3   ;Field     ;
                Name=Balance Due;
                ToolTipML=[ENU=Specifies the sum of outstanding payments from the customer.;
                           ESP=Especifica la suma de los pagos pendientes del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CalcOverdueBalance;
                CaptionClass=FORMAT(STRSUBSTNO(OverduePaymentsMsg,FORMAT(WORKDATE)));
                OnDrillDown=VAR
                              DtldCustLedgEntry@1000 : Record 379;
                              CustLedgEntry@1001 : Record 21;
                            BEGIN
                              DtldCustLedgEntry.SETFILTER("Customer No.","No.");
                              COPYFILTER("Global Dimension 1 Filter",DtldCustLedgEntry."Initial Entry Global Dim. 1");
                              COPYFILTER("Global Dimension 2 Filter",DtldCustLedgEntry."Initial Entry Global Dim. 2");
                              COPYFILTER("Currency Filter",DtldCustLedgEntry."Currency Code");
                              CustLedgEntry.DrillDownOnOverdueEntries(DtldCustLedgEntry);
                            END;
                             }

    { 105 ;3   ;Field     ;
                CaptionML=[ENU=Payments This Year;
                           ESP=Pagos de este a¤o];
                ToolTipML=[ENU=Specifies the sum of payments received from the customer in the current fiscal year.;
                           ESP=Especifica la suma de pagos recibidos del cliente en el ejercicio actual.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payments (LCY)" }

    { 103 ;3   ;Field     ;
                CaptionML=[ENU=Average Collection Period (Days);
                           ESP=Per¡odo de pago medio (d¡as)];
                ToolTipML=[ENU=Specifies how long the customer typically takes to pay invoices in the current fiscal year.;
                           ESP=Especifica el tiempo que emplea el cliente normalmente para pagar las facturas en el ejercicio actual.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:1;
                SourceExpr=CustomerMgt.AvgDaysToPay("No.");
                Importance=Additional }

    { 102 ;3   ;Field     ;
                Name=DaysPaidPastDueDate;
                CaptionML=[ENU=Average Late Payments (Days);
                           ESP=Promedio de pagos vencidos (d¡as)];
                ToolTipML=[ENU=Specifies the average number of days the customer is late with payments.;
                           ESP=Especifica el promedio de d¡as de retraso en los pagos del cliente.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:1;
                SourceExpr=DaysPastDueDate;
                Importance=Additional;
                Style=Attention;
                StyleExpr=AttentionToPaidDay }

    { 100 ;2   ;Group     ;
                CaptionML=[ENU=Sales This Year;
                           ESP=Ventas de este a¤o];
                GroupType=Group }

    { 98  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies your sales to the customer in the current fiscal year based on posted sales invoices. The figure in parenthesis Specifies the number of posted sales invoices.;
                           ESP=Especifica las ventas al cliente en el ejercicio actual seg£n las facturas de venta registradas. La cifra entre par‚ntesis especifica el n£mero de facturas de venta registradas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetAmountOnPostedInvoices;
                CaptionClass=STRSUBSTNO(PostedInvoicesMsg,FORMAT(NoPostedInvoices));
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownOnPostedInvoices("No.")
                            END;
                             }

    { 97  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies your expected refunds to the customer in the current fiscal year based on posted sales credit memos. The figure in parenthesis shows the number of posted sales credit memos.;
                           ESP=Especifica los reembolsos previstos para el cliente en el ejercicio actual seg£n los abonos de venta registrados. La cifra entre par‚ntesis muestra el n£mero de abonos de venta registrados.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetAmountOnCrMemo;
                CaptionClass=STRSUBSTNO(CreditMemosMsg,FORMAT(NoPostedCrMemos));
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownOnPostedCrMemo("No.")
                            END;
                             }

    { 96  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies your expected sales to the customer in the current fiscal year based on ongoing sales invoices. The figure in parenthesis shows the number of ongoing sales invoices.;
                           ESP=Especifica las ventas previstas al cliente en el ejercicio actual seg£n las facturas de venta en curso. La cifra entre par‚ntesis muestra el n£mero de facturas de venta en curso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetAmountOnOutstandingInvoices;
                CaptionClass=STRSUBSTNO(OutstandingInvoicesMsg,FORMAT(NoOutstandingInvoices));
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownOnUnpostedInvoices("No.")
                            END;
                             }

    { 92  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies your refunds to the customer in the current fiscal year based on ongoing sales credit memos. The figure in parenthesis shows the number of ongoing sales credit memos.;
                           ESP=Especifica los reembolsos al cliente en el ejercicio actual seg£n los abonos de venta en curso. La cifra entre par‚ntesis muestra el n£mero de abonos de venta en curso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetAmountOnOutstandingCrMemos;
                CaptionClass=STRSUBSTNO(OutstandingCrMemosMsg,FORMAT(NoOutstandingCrMemos));
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownOnUnpostedCrMemos("No.")
                            END;
                             }

    { 89  ;3   ;Field     ;
                CaptionML=[ENU=Total Sales;
                           ESP=Total ventas];
                ToolTipML=[ENU=Specifies your total sales turnover with the customer in the current fiscal year. It is calculated from amounts excluding VAT on all completed and open invoices and credit memos.;
                           ESP=Especifica el volumen de ventas total con el cliente en el ejercicio actual. Se calcula a partir de los importes sin IVA de todas las facturas y los abonos pendientes y completados.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Totals;
                Style=Strong;
                StyleExpr=TRUE }

    { 88  ;3   ;Field     ;
                CaptionML=[ENU=Invoice Discounts;
                           ESP=Dto. factura];
                ToolTipML=[ENU=Specifies the total of all invoice discounts that you have granted to the customer in the current fiscal year.;
                           ESP=Especifica el total de todos los descuentos en factura que se han concedido al cliente en el ejercicio actual.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CustInvDiscAmountLCY }

    { 87  ;2   ;Part      ;
                Name=AgedAccReceivableChart;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page768;
                Visible=ShowCharts;
                PartType=Page }

    { 75  ;1   ;Part      ;
                Name=PriceAndLineDisc;
                CaptionML=[ENU=Special Prices & Discounts;
                           ESP=Precios y descuentos especiales];
                ApplicationArea=#All;
                PagePartID=Page1347;
                Visible=FoundationOnly;
                PartType=Page }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 149 ;1   ;Part      ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page785;
                Visible=NOT IsOfficeAddin;
                PartType=Page }

    { 1901275107;1;Part   ;
                Name=Attached Documents;
                CaptionML=[ENU=Attachments;
                           ESP=Datos adjuntos];
                ApplicationArea=#All;
                SubPageLink=Table ID=CONST(18),
                            No.=FIELD(No.);
                PagePartID=Page1174;
                Visible=NOT IsOfficeAddin;
                PartType=Page }

    { 135 ;1   ;Part      ;
                CaptionML=[ENU=Details;
                           ESP=Detalles];
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page1611;
                Visible=IsOfficeAddin;
                PartType=Page }

    { 134 ;1   ;Part      ;
                Name=AgedAccReceivableChart2;
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page768;
                Visible=IsOfficeAddin;
                PartType=Page }

    { 39  ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page5360;
                Visible=CRMIsCoupledToRecord;
                PartType=Page }

    { 35  ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=Source Type=CONST(Customer),
                            Source No.=FIELD(No.);
                PagePartID=Page875;
                Visible=SocialListeningVisible;
                PartType=Page }

    { 27  ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=Source Type=CONST(Customer),
                            Source No.=FIELD(No.);
                PagePartID=Page876;
                Visible=SocialListeningSetupVisible;
                PartType=Page;
                UpdatePropagation=Both }

    { 1903720907;1;Part   ;
                Name=SalesHistSelltoFactBox;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9080;
                PartType=Page }

    { 1907234507;1;Part   ;
                Name=SalesHistBilltoFactBox;
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9081;
                Visible=FALSE;
                PartType=Page }

    { 1902018507;1;Part   ;
                Name=CustomerStatisticsFactBox;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9082;
                PartType=Page }

    { 1903433807;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page35304;
                Visible=TRUE;
                PartType=Page }

    { 1903433607;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page35306;
                Visible=TRUE;
                PartType=Page }

    { 1905532107;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=Table ID=CONST(18),
                            No.=FIELD(No.);
                PagePartID=Page9083;
                PartType=Page }

    { 1907829707;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9085;
                Visible=FALSE;
                PartType=Page }

    { 1902613707;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9086;
                Visible=FALSE;
                PartType=Page }

    { 62  ;1   ;Part      ;
                Name=WorkflowStatus;
                ApplicationArea=#Suite;
                PagePartID=Page1528;
                Visible=ShowWorkflowStatus;
                Enabled=FALSE;
                Editable=FALSE;
                PartType=Page;
                ShowFilter=No }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      CustomizedCalEntry@1001 : Record 7603;
      CustomizedCalendar@1005 : Record 7602;
      CalendarMgmt@1002 : Codeunit 7600;
      ApprovalsMgmt@1009 : Codeunit 1535;
      CRMIntegrationManagement@1045 : Codeunit 5330;
      CustomerMgt@1024 : Codeunit 1302;
      FormatAddress@1050 : Codeunit 365;
      StyleTxt@1004 : Text;
      ContactEditable@5247 : Boolean INDATASET;
      GestVtas@1170170001 : Codeunit 7014613;
      GestionEMCS@1170170000 : Codeunit 7014538;
      SocialListeningSetupVisible@1000 : Boolean INDATASET;
      SocialListeningVisible@1003 : Boolean INDATASET;
      ShowCharts@1040 : Boolean INDATASET;
      CRMIntegrationEnabled@1007 : Boolean;
      CRMIsCoupledToRecord@1006 : Boolean;
      OpenApprovalEntriesExistCurrUser@1008 : Boolean;
      OpenApprovalEntriesExist@1010 : Boolean;
      ShowWorkflowStatus@1011 : Boolean;
      NoFieldVisible@1014 : Boolean;
      BalanceExhausted@1032 : Boolean;
      AttentionToPaidDay@1035 : Boolean;
      IsOfficeAddin@1065 : Boolean;
      NoPostedInvoices@1015 : Integer;
      NoPostedCrMemos@1018 : Integer;
      NoOutstandingInvoices@1017 : Integer;
      NoOutstandingCrMemos@1016 : Integer;
      Totals@1019 : Decimal;
      AmountOnPostedInvoices@1023 : Decimal;
      AmountOnPostedCrMemos@1022 : Decimal;
      AmountOnOutstandingInvoices@1021 : Decimal;
      AmountOnOutstandingCrMemos@1020 : Decimal;
      AdjmtCostLCY@1028 : Decimal;
      AdjCustProfit@1027 : Decimal;
      CustProfit@1026 : Decimal;
      AdjProfitPct@1025 : Decimal;
      CustInvDiscAmountLCY@1029 : Decimal;
      CustPaymentsLCY@1030 : Decimal;
      CustSalesLCY@1031 : Decimal;
      OverduePaymentsMsg@1033 : TextConst '@@@=Overdue Payments as of 27-02-2012;ENU=Overdue Payments as of %1;ESP=Pagos vencidos al %1';
      DaysPastDueDate@1034 : Decimal;
      PostedInvoicesMsg@1036 : TextConst '@@@=Invoices (5);ENU=Posted Invoices (%1);ESP=Facturas registradas (%1)';
      CreditMemosMsg@1037 : TextConst '@@@=Credit Memos (3);ENU=Posted Credit Memos (%1);ESP=Abono registrados (%1)';
      OutstandingInvoicesMsg@1039 : TextConst '@@@=Ongoing Invoices (4);ENU=Ongoing Invoices (%1);ESP=Facturas en curso (%1)';
      OutstandingCrMemosMsg@1038 : TextConst '@@@=Ongoing Credit Memos (4);ENU=Ongoing Credit Memos (%1);ESP=Abonos actuales (%1)';
      ShowMapLbl@1066 : TextConst 'ENU=Show on Map;ESP=Mostrar en el mapa';
      ExpectedMoneyOwed@1051 : Decimal;
      FoundationOnly@1012 : Boolean;
      CanCancelApprovalForRecord@1013 : Boolean;
      EnabledApprovalWorkflowsExist@1041 : Boolean;
      NewMode@1044 : Boolean;
      EventFilter@1042 : Text;
      CaptionTxt@1043 : Text;
      CanRequestApprovalForFlow@1046 : Boolean;
      CanCancelApprovalForFlow@1047 : Boolean;
      IsSaaS@1048 : Boolean;
      IsCountyVisible@1049 : Boolean;

    LOCAL PROCEDURE GetTotalSales@6() : Decimal;
    BEGIN
      NoPostedInvoices := 0;
      NoPostedCrMemos := 0;
      NoOutstandingInvoices := 0;
      NoOutstandingCrMemos := 0;
      Totals := 0;

      AmountOnPostedInvoices := CustomerMgt.CalcAmountsOnPostedInvoices("No.",NoPostedInvoices);
      AmountOnPostedCrMemos := CustomerMgt.CalcAmountsOnPostedCrMemos("No.",NoPostedCrMemos);

      AmountOnOutstandingInvoices := CustomerMgt.CalculateAmountsOnUnpostedInvoices("No.",NoOutstandingInvoices);
      AmountOnOutstandingCrMemos := CustomerMgt.CalculateAmountsOnUnpostedCrMemos("No.",NoOutstandingCrMemos);

      Totals := AmountOnPostedInvoices + AmountOnPostedCrMemos + AmountOnOutstandingInvoices + AmountOnOutstandingCrMemos;

      CustomerMgt.CalculateStatistic(
        Rec,
        AdjmtCostLCY,AdjCustProfit,AdjProfitPct,
        CustInvDiscAmountLCY,CustPaymentsLCY,CustSalesLCY,
        CustProfit);
      EXIT(Totals)
    END;

    LOCAL PROCEDURE GetAmountOnPostedInvoices@5() : Decimal;
    BEGIN
      EXIT(AmountOnPostedInvoices)
    END;

    LOCAL PROCEDURE GetAmountOnCrMemo@8() : Decimal;
    BEGIN
      EXIT(AmountOnPostedCrMemos)
    END;

    LOCAL PROCEDURE GetAmountOnOutstandingInvoices@9() : Decimal;
    BEGIN
      EXIT(AmountOnOutstandingInvoices)
    END;

    LOCAL PROCEDURE GetAmountOnOutstandingCrMemos@10() : Decimal;
    BEGIN
      EXIT(AmountOnOutstandingCrMemos)
    END;

    LOCAL PROCEDURE GetMoneyOwedExpected@11() : Decimal;
    BEGIN
      EXIT(CustomerMgt.CalculateAmountsWithVATOnUnpostedDocuments("No."))
    END;

    LOCAL PROCEDURE GetSalesPricesAndSalesLineDisc@24();
    VAR
      LoadOnDemand@1000 : Boolean;
    BEGIN
      OnBeforeGetSalesPricesAndSalesLineDisc(LoadOnDemand);

      IF LoadOnDemand THEN BEGIN
        CurrPage.PriceAndLineDisc.PAGE.SetLoadedCustno("No.");
        EXIT;
      END;

      IF "No." <> CurrPage.PriceAndLineDisc.PAGE.GetLoadedCustNo THEN BEGIN
        CurrPage.PriceAndLineDisc.PAGE.LoadCustomer(Rec);
        CurrPage.PriceAndLineDisc.PAGE.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE ActivateFields@3();
    BEGIN
      SetSocialListeningFactboxVisibility;
      ContactEditable := "Primary Contact No." = '';
      IsCountyVisible := FormatAddress.UseCounty("Country/Region Code");
    END;

    LOCAL PROCEDURE ContactOnAfterValidate@7046();
    BEGIN
      ActivateFields;
    END;

    LOCAL PROCEDURE SetSocialListeningFactboxVisibility@1();
    VAR
      SocialListeningMgt@1000 : Codeunit 871;
    BEGIN
      SocialListeningMgt.GetCustFactboxVisibility(Rec,SocialListeningSetupVisible,SocialListeningVisible);
    END;

    LOCAL PROCEDURE SetNoFieldVisible@13();
    VAR
      DocumentNoVisibility@1000 : Codeunit 1400;
    BEGIN
      NoFieldVisible := DocumentNoVisibility.CustomerNoIsVisible;
    END;

    LOCAL PROCEDURE SetCustomerNoVisibilityOnFactBoxes@12();
    BEGIN
      CurrPage.SalesHistSelltoFactBox.PAGE.SetCustomerNoVisibility(FALSE);
      CurrPage.SalesHistBilltoFactBox.PAGE.SetCustomerNoVisibility(FALSE);
      CurrPage.CustomerStatisticsFactBox.PAGE.SetCustomerNoVisibility(FALSE);
    END;

    [External]
    PROCEDURE RunReport@2(ReportNumber@1000 : Integer;CustomerNumber@1002 : Code[20]);
    VAR
      Customer@1001 : Record 18;
    BEGIN
      Customer.SETRANGE("No.",CustomerNumber);
      REPORT.RUNMODAL(ReportNumber,TRUE,TRUE,Customer);
    END;

    LOCAL PROCEDURE CreateCustomerFromTemplate@27();
    VAR
      MiniCustomerTemplate@1001 : Record 1300;
      Customer@1000 : Record 18;
      VATRegNoSrvConfig@1003 : Record 248;
      ConfigTemplateHeader@1005 : Record 8618;
      EUVATRegistrationNoCheck@1002 : Page 1339;
      CustomerRecRef@1004 : RecordRef;
    BEGIN
      OnBeforeCreateCustomerFromTemplate(NewMode);

      IF NewMode THEN BEGIN
        IF MiniCustomerTemplate.NewCustomerFromTemplate(Customer) THEN BEGIN
          IF VATRegNoSrvConfig.VATRegNoSrvIsEnabled THEN
            IF Customer."Validate EU Vat Reg. No." THEN BEGIN
              EUVATRegistrationNoCheck.SetRecordRef(Customer);
              COMMIT;
              EUVATRegistrationNoCheck.RUNMODAL;
              EUVATRegistrationNoCheck.GetRecordRef(CustomerRecRef);
              CustomerRecRef.SETTABLE(Customer);
            END;

          COPY(Customer);
          CurrPage.UPDATE;
        END ELSE BEGIN
          ConfigTemplateHeader.SETRANGE("Table ID",DATABASE::Customer);
          ConfigTemplateHeader.SETRANGE(Enabled,TRUE);
          IF NOT ConfigTemplateHeader.ISEMPTY THEN
            CurrPage.CLOSE;
        END;
        NewMode := FALSE;
      END;
    END;

    [Integration]
    PROCEDURE SetCaption@17(VAR InText@1000 : Text);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCreateCustomerFromTemplate@4(VAR NewMode@1000 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetSalesPricesAndSalesLineDisc@14(VAR LoadOnDemand@1000 : Boolean);
    BEGIN
    END;

    BEGIN
    {

      LICORES BAINES
      ========================
      BAIN-0009 JA 171107 A¤adir campo:Pendiente revisar. A¤adir copiar cliente.

      BAIN-0022 JA 121107 A¤adir campos: "C¢d. tipo cliente",
                          "C¢d. subtipo cliente","Tipo facturaci¢n",
                          "Periodo facturaci¢n","Fecha alta"
      BAIN-0023 JA 131107 A¤adir campo: "C¢d. direcci¢n postal"

      BAIN-0017 JA 131107 A¤adir campos: "Asegurado por Mapfre",
                          "C¢d. cliente Mapfre","Nominativo/An¢nimo",
                          "Riesgo concedido","Limite concedido (%)".
    }
    END.
  }
}

OBJECT Page 30 Item Card
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=16:15:40;
    Modified=Yes;
    Version List=NAVW114.04,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Item Card;
               ESP=Ficha producto];
    SourceTable=Table27;
    PageType=Card;
    RefreshOnActivate=Yes;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Item,History,Special Sales Prices & Discounts,Approve,Request Approval;
                                ESP=Nuevo,Proceso,Informe,Producto,Historial,Precios de venta y descuentos especiales,Aprobar,Solicitar aprobaci¢n];
    OnInit=BEGIN
             InitControls;
           END;

    OnOpenPage=VAR
                 PermissionManager@1000 : Codeunit 9002;
               BEGIN
                 IsFoundationEnabled := ApplicationAreaMgmtFacade.IsFoundationEnabled;
                 EnableControls;
                 SetNoFieldVisible;
                 IsSaaS := PermissionManager.SoftwareAsAService;
                 DescriptionFieldVisible := TRUE;

                 OnAfterOnOpenPage;
               END;

    OnNewRecord=BEGIN
                  OnNewRec
                END;

    OnInsertRecord=BEGIN
                     InsertItemUnitOfMeasure;
                   END;

    OnAfterGetCurrRecord=VAR
                           CRMCouplingManagement@1002 : Codeunit 5331;
                           WorkflowManagement@1001 : Codeunit 1501;
                           WorkflowEventHandling@1000 : Codeunit 1520;
                           WorkflowWebhookManagement@1003 : Codeunit 1543;
                         BEGIN
                           CreateItemFromTemplate;
                           EnableControls;
                           IF CRMIntegrationEnabled THEN BEGIN
                             CRMIsCoupledToRecord := CRMCouplingManagement.IsRecordCoupledToCRM(RECORDID);
                             IF "No." <> xRec."No." THEN
                               CRMIntegrationManagement.SendResultNotification(Rec);
                           END;
                           OpenApprovalEntriesExistCurrUser := ApprovalsMgmt.HasOpenApprovalEntriesForCurrentUser(RECORDID);
                           OpenApprovalEntriesExist := ApprovalsMgmt.HasOpenApprovalEntries(RECORDID);
                           ShowWorkflowStatus := CurrPage.WorkflowStatus.PAGE.SetFilterOnWorkflowRecord(RECORDID);

                           WorkflowWebhookManagement.GetCanRequestAndCanCancel(RECORDID,CanRequestApprovalForFlow,CanCancelApprovalForFlow);

                           EventFilter := WorkflowEventHandling.RunWorkflowOnSendItemForApprovalCode + '|' +
                             WorkflowEventHandling.RunWorkflowOnItemChangedCode;

                           EnabledApprovalWorkflowsExist := WorkflowManagement.EnabledWorkflowExist(DATABASE::Item,EventFilter);

                           CurrPage.ItemAttributesFactbox.PAGE.LoadItemAttributesData("No.");
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 123     ;1   ;ActionGroup;
                      Name=ItemActionGroup;
                      CaptionML=[ENU=Master Data;
                                 ESP=Producto];
                      Image=DataEntry }
      { 199     ;2   ;Action    ;
                      Name=Attributes;
                      AccessByPermission=TableData 7500=R;
                      CaptionML=[ENU=Attributes;
                                 ESP=Atributos];
                      ToolTipML=[ENU=View or edit the item's attributes, such as color, size, or other characteristics that help to describe the item.;
                                 ESP=Permite ver o editar los atributos del producto, como el color, el tama¤o u otras caracter¡sticas que ayudan a describir el producto.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=Category;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 PAGE.RUNMODAL(PAGE::"Item Attribute Value Editor",Rec);
                                 CurrPage.SAVERECORD;
                                 CurrPage.ItemAttributesFactbox.PAGE.LoadItemAttributesData("No.");
                               END;
                                }
      { 186     ;2   ;Action    ;
                      Name=AdjustInventory;
                      CaptionML=[ENU=Adjust Inventory;
                                 ESP=Ajustar inventario];
                      ToolTipML=[ENU=Increase or decrease the item's inventory quantity manually by entering a new quantity. Adjusting the inventory quantity manually may be relevant after a physical count or if you do not record purchased quantities.;
                                 ESP=Especifique una nueva cantidad para aumentar o disminuir la cantidad de inventario del producto manualmente. Ajustar la cantidad de inventario manualmente podr¡a ser pertinente despu‚s de un recuento f¡sico o si no se registran las cantidades compradas.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsFoundationEnabled;
                      Enabled=IsInventoriable;
                      Image=InventoryCalculation;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 AdjustInventory@1000 : Page 1327;
                               BEGIN
                                 COMMIT;
                                 AdjustInventory.SetItem("No.");
                                 AdjustInventory.RUNMODAL;
                               END;
                                }
      { 119     ;2   ;Action    ;
                      CaptionML=[ENU=Va&riants;
                                 ESP=Va&riantes];
                      ToolTipML=[ENU=View how the inventory level of an item will develop over time according to the variant that you select.;
                                 ESP=Permite ver c¢mo el nivel de inventario de un producto se desarrollar  a lo largo del tiempo seg£n la variante que seleccione.];
                      ApplicationArea=#Planning;
                      RunObject=Page 5401;
                      RunPageLink=Item No.=FIELD(No.);
                      Image=ItemVariant }
      { 218     ;2   ;Action    ;
                      CaptionML=[ENU=Identifiers;
                                 ESP=Identificadores];
                      ToolTipML=[ENU=View a unique identifier for each item that you want warehouse employees to keep track of within the warehouse when using handheld devices. The item identifier can include the item number, the variant code and the unit of measure.;
                                 ESP=Permite ver un identificador exclusivo para cada producto que desee que los empleados le realicen un seguimiento en el almac‚n cuando se usen dispositivos port tiles. El identificador de producto puede incluir el n£mero de producto, el c¢digo de variante y la unidad de medida.];
                      ApplicationArea=#Warehouse;
                      RunObject=Page 7706;
                      RunPageView=SORTING(Item No.,Variant Code,Unit of Measure Code);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=BarCode }
      { 1170000001;2 ;Action    ;
                      Name=CopiarProducto;
                      CaptionML=ESP=Copiar Producto;
                      Promoted=Yes;
                      Image=Copy;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 Item@1170000000 : Record 27;
                               BEGIN

                                 //++ BAIN-0009
                                 CurrPage.SETSELECTIONFILTER(Item);
                                 REPORT.RUNMODAL(REPORT::"Copiar producto a empresa",TRUE,TRUE,Item);
                                 //-- BAIN-0009
                               END;
                                }
      { 1170000003;2 ;Action    ;
                      Name=CosteTeorico;
                      CaptionML=ESP=Coste Te¢rico;
                      RunObject=Page 50027;
                      RunPageLink=N§=FIELD(No.);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Aging;
                      PromotedCategory=Process }
      { 1170170053;2 ;ActionGroup;
                      CaptionML=[ENU=Treatments;
                                 ESP=Fito - Tratamientos asociados];
                      Image=Worksheets }
      { 1170170054;2 ;Action    ;
                      CaptionML=ENU=Treatments;
                      RunObject=Page 7061705;
                      RunPageView=SORTING(No. producto,C¢d. tratamiento);
                      RunPageLink=No. producto=FIELD(No.);
                      Image=CreateWarehousePick }
      { 1170170056;2 ;ActionGroup;
                      CaptionML=[ENU=Lots;
                                 ESP=Lotes];
                      Image=LotInfo }
      { 1170170057;2 ;Action    ;
                      CaptionML=[ENU=Lots;
                                 ESP=&Lotes];
                      RunObject=Page 6508;
                      RunPageView=SORTING(Item No.,Variant Code,Lot No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=Lot }
      { 106     ;2   ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      RunObject=Page 124;
                      RunPageLink=Table Name=CONST(Item),
                                  No.=FIELD(No.);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=ViewComments;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes }
      { 1901458458;2 ;Action    ;
                      Name=Attachments;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Attach;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1000 : Page 1173;
                                 RecRef@1001 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 182     ;1   ;ActionGroup;
                      Name=PricesandDiscounts;
                      CaptionML=[ENU=Special Sales Prices & Discounts;
                                 ESP=Precios de venta y descuentos especiales] }
      { 82      ;2   ;Action    ;
                      CaptionML=[ENU=Prices;
                                 ESP=Establecer precios especiales];
                      ToolTipML=[ENU=Set up different prices for the item. An item price is automatically granted on invoice lines when the specified criteria are met, such as customer, quantity, or ending date.;
                                 ESP=Permite configurar precios diferentes para el producto. Se concede autom ticamente un precio de producto en las l¡neas de factura cuando se cumplen los criterios especificados, como el cliente, la cantidad o la fecha final.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 7002;
                      RunPageLink=Item No.=FIELD(No.);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Price;
                      PromotedCategory=Category6 }
      { 80      ;2   ;Action    ;
                      CaptionML=[ENU=Line Discounts;
                                 ESP=Establecer descuentos especiales];
                      ToolTipML=[ENU=Set up different discounts for the item. An item discount is automatically granted on invoice lines when the specified criteria are met, such as customer, quantity, or ending date.;
                                 ESP=Permite configurar descuentos diferentes para el producto. Se concede autom ticamente un descuento de producto en las l¡neas de factura cuando se cumplen los criterios especificados, como el cliente, la cantidad o la fecha final.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 7004;
                      RunPageView=SORTING(Type,Code);
                      RunPageLink=Type=CONST(Item),
                                  Code=FIELD(No.);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=LineDiscount;
                      PromotedCategory=Category6 }
      { 165     ;2   ;Action    ;
                      Name=PricesDiscountsOverview;
                      CaptionML=[ENU=Special Prices & Discounts Overview;
                                 ESP=Panorama de precios y descuentos especiales];
                      ToolTipML=[ENU=View the special prices and line discounts that you grant for this item when certain criteria are met, such as vendor, quantity, or ending date.;
                                 ESP=Permite ver los precios especiales y los descuentos de l¡nea que concede para este producto cuando se cumplen los criterios especificados, como el proveedor, la cantidad o la fecha final.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PriceWorksheet;
                      PromotedCategory=Category6;
                      OnAction=VAR
                                 SalesPriceAndLineDiscounts@1000 : Page 1345;
                               BEGIN
                                 SalesPriceAndLineDiscounts.InitPage(TRUE);
                                 SalesPriceAndLineDiscounts.LoadItem(Rec);
                                 SalesPriceAndLineDiscounts.RUNMODAL;
                               END;
                                }
      { 160     ;1   ;ActionGroup;
                      CaptionML=[ENU=Approval;
                                 ESP=Aprobaci¢n];
                      Image=Confirm }
      { 159     ;2   ;Action    ;
                      Name=Approve;
                      CaptionML=[ENU=Approve;
                                 ESP=Aprobar];
                      ToolTipML=[ENU=Approve the requested changes.;
                                 ESP=Aprueba los cambios solicitados.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      PromotedIsBig=Yes;
                      Image=Approve;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.ApproveRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 156     ;2   ;Action    ;
                      Name=Reject;
                      CaptionML=[ENU=Reject;
                                 ESP=Rechazar];
                      ToolTipML=[ENU=Reject the approval request.;
                                 ESP=Rechaza la solicitud de aprobaci¢n.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      PromotedIsBig=Yes;
                      Image=Reject;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.RejectRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 154     ;2   ;Action    ;
                      Name=Delegate;
                      CaptionML=[ENU=Delegate;
                                 ESP=Delegar];
                      ToolTipML=[ENU=Delegate the approval to a substitute approver.;
                                 ESP=Delega la aprobaci¢n a un aprobador sustituto.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      Image=Delegate;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.DelegateRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 503     ;2   ;Action    ;
                      Name=Comment;
                      CaptionML=[ENU=Comments;
                                 ESP=Comentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      Image=ViewComments;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.GetApprovalComment(Rec);
                               END;
                                }
      { 150     ;1   ;ActionGroup;
                      CaptionML=[ENU=Request Approval;
                                 ESP=Aprobaci¢n solic.];
                      Image=SendApprovalRequest }
      { 149     ;2   ;Action    ;
                      Name=SendApprovalRequest;
                      CaptionML=[ENU=Send A&pproval Request;
                                 ESP=Enviar solicitud a&probaci¢n];
                      ToolTipML=[ENU=Request approval to change the record.;
                                 ESP=Permite solicitar aprobaci¢n para cambiar el registro.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=(NOT OpenApprovalEntriesExist) AND EnabledApprovalWorkflowsExist AND CanRequestApprovalForFlow;
                      Image=SendApprovalRequest;
                      PromotedCategory=Category8;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1001 : Codeunit 1535;
                               BEGIN
                                 IF ApprovalsMgmt.CheckItemApprovalsWorkflowEnabled(Rec) THEN
                                   ApprovalsMgmt.OnSendItemForApproval(Rec);
                               END;
                                }
      { 148     ;2   ;Action    ;
                      Name=CancelApprovalRequest;
                      CaptionML=[ENU=Cancel Approval Re&quest;
                                 ESP=&Cancelar solicitud aprobaci¢n];
                      ToolTipML=[ENU=Cancel the approval request.;
                                 ESP=Cancela la solicitud de aprobaci¢n.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=OpenApprovalEntriesExist OR CanCancelApprovalForFlow;
                      Image=CancelApprovalRequest;
                      PromotedCategory=Category8;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1001 : Codeunit 1535;
                                 WorkflowWebhookManagement@1000 : Codeunit 1543;
                               BEGIN
                                 ApprovalsMgmt.OnCancelItemApprovalRequest(Rec);
                                 WorkflowWebhookManagement.FindAndCancel(RECORDID);
                               END;
                                }
      { 46      ;2   ;ActionGroup;
                      Name=Flow;
                      CaptionML=[ENU=Flow;
                                 ESP=Flow] }
      { 47      ;3   ;Action    ;
                      Name=CreateFlow;
                      CaptionML=[ENU=Create a Flow;
                                 ESP=Crear un flujo de trabajo];
                      ToolTipML=[ENU=Create a new Flow from a list of relevant Flow templates.;
                                 ESP=Permite crear un nuevo flujo de trabajo a partir de una lista de plantillas de flujo de trabajo pertinentes.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsSaaS;
                      Image=Flow;
                      PromotedCategory=Category8;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 FlowServiceManagement@1001 : Codeunit 6400;
                                 FlowTemplateSelector@1000 : Page 6400;
                               BEGIN
                                 // Opens page 6400 where the user can use filtered templates to create new Flows.
                                 FlowTemplateSelector.SetSearchText(FlowServiceManagement.GetItemTemplateFilter);
                                 FlowTemplateSelector.RUN;
                               END;
                                }
      { 70      ;3   ;Action    ;
                      Name=SeeFlows;
                      CaptionML=[ENU=See my Flows;
                                 ESP=Ver mis flujos de trabajo];
                      ToolTipML=[ENU=View and configure Flows that you created.;
                                 ESP=Permite ver y configurar los flujos de trabajo que ha creado.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 6401;
                      Promoted=Yes;
                      Image=Flow;
                      PromotedCategory=Category8;
                      PromotedOnly=Yes }
      { 193     ;1   ;ActionGroup;
                      CaptionML=[ENU=Workflow;
                                 ESP=Flujo de trabajo] }
      { 197     ;2   ;Action    ;
                      Name=CreateApprovalWorkflow;
                      CaptionML=[ENU=Create Approval Workflow;
                                 ESP=Crear flujo de trabajo de aprobaci¢n];
                      ToolTipML=[ENU=Set up an approval workflow for creating or changing items, by going through a few pages that will guide you.;
                                 ESP=Permite configurar un flujo de trabajo de aprobaci¢n para crear o cambiar productos a trav‚s de unas cuantas p ginas que le orientar n.];
                      ApplicationArea=#Suite;
                      Enabled=NOT EnabledApprovalWorkflowsExist;
                      Image=CreateWorkflow;
                      OnAction=BEGIN
                                 PAGE.RUNMODAL(PAGE::"Item Approval WF Setup Wizard");
                               END;
                                }
      { 195     ;2   ;Action    ;
                      Name=ManageApprovalWorkflow;
                      CaptionML=[ENU=Manage Approval Workflow;
                                 ESP=Administrar flujo de trabajo de aprobaci¢n];
                      ToolTipML=[ENU=View or edit existing approval workflows for creating or changing items.;
                                 ESP=Permite ver o editar flujos de trabajo de aprobaci¢n existentes para crear o cambiar productos.];
                      ApplicationArea=#Suite;
                      Enabled=EnabledApprovalWorkflowsExist;
                      Image=WorkflowSetup;
                      OnAction=VAR
                                 WorkflowManagement@1000 : Codeunit 1501;
                               BEGIN
                                 WorkflowManagement.NavigateToWorkflows(DATABASE::Item,EventFilter);
                               END;
                                }
      { 91      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 92      ;2   ;Action    ;
                      AccessByPermission=TableData 5700=R;
                      CaptionML=[ENU=&Create Stockkeeping Unit;
                                 ESP=&Crear ud. de almacenam.];
                      ToolTipML=[ENU=Create an instance of the item at each location that is set up.;
                                 ESP=Permite crear una instancia del producto en cada almac‚n que se haya configurado.];
                      ApplicationArea=#Warehouse;
                      Image=CreateSKU;
                      OnAction=VAR
                                 Item@1001 : Record 27;
                               BEGIN
                                 Item.SETRANGE("No.","No.");
                                 REPORT.RUNMODAL(REPORT::"Create Stockkeeping Unit",TRUE,FALSE,Item);
                               END;
                                }
      { 7380    ;2   ;Action    ;
                      Name=CalculateCountingPeriod;
                      AccessByPermission=TableData 7380=R;
                      CaptionML=[ENU=C&alculate Counting Period;
                                 ESP=Ca&lcular periodo recuento];
                      ToolTipML=[ENU=Prepare for a physical inventory by calculating which items or SKUs need to be counted in the current period.;
                                 ESP=Permite prepararse para un inventario f¡sico calculando qu‚ productos o UA deben contabilizarse en el periodo actual.];
                      ApplicationArea=#Warehouse;
                      Image=CalculateCalendar;
                      OnAction=VAR
                                 Item@1001 : Record 27;
                                 PhysInvtCountMgt@1000 : Codeunit 7380;
                               BEGIN
                                 Item.SETRANGE("No.","No.");
                                 PhysInvtCountMgt.UpdateItemPhysInvtCount(Item);
                               END;
                                }
      { 178     ;2   ;Action    ;
                      Name=Templates;
                      CaptionML=[ENU=Templates;
                                 ESP=Plantillas];
                      ToolTipML=[ENU=View or edit item templates.;
                                 ESP=Permite ver o editar las plantillas de producto.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 1340;
                      RunPageLink=Table ID=CONST(27);
                      Image=Template }
      { 219     ;2   ;Action    ;
                      Name=CopyItem;
                      AccessByPermission=TableData 27=I;
                      CaptionML=[ENU=Copy Item;
                                 ESP=Copiar producto];
                      ToolTipML=[ENU=Create a copy of the current item.;
                                 ESP=Crea una copia del elemento actual.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Copy;
                      OnAction=BEGIN
                                 CODEUNIT.RUN(CODEUNIT::"Copy Item",Rec);
                               END;
                                }
      { 242     ;2   ;Action    ;
                      Name=ApplyTemplate;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Apply Template;
                                 ESP=Aplicar plantilla];
                      ToolTipML=[ENU=Apply a template to update the entity with your standard settings for a certain type of entity.;
                                 ESP=Permite aplicar una plantilla para actualizar la entidad con su configuraci¢n est ndar para un determinado tipo de entidad.];
                      ApplicationArea=#Basic,#Suite;
                      Image=ApplyTemplate;
                      OnAction=VAR
                                 ItemTemplate@1002 : Record 1301;
                               BEGIN
                                 ItemTemplate.UpdateItemFromTemplate(Rec);
                               END;
                                }
      { 179     ;2   ;Action    ;
                      Name=SaveAsTemplate;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Save as Template;
                                 ESP=Guardar como plantilla];
                      ToolTipML=[ENU=Save the item card as a template that can be reused to create new item cards. Item templates contain preset information to help you fill in fields on item cards.;
                                 ESP=Permite guardar la ficha de producto como plantilla que se podr  utilizar para crear nuevas fichas de producto. Las plantillas de producto contienen informaci¢n predefinida para ayudarle a completar los cambios de las fichas de producto.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Save;
                      OnAction=VAR
                                 TempItemTemplate@1002 : TEMPORARY Record 1301;
                               BEGIN
                                 TempItemTemplate.SaveAsTemplate(Rec);
                               END;
                                }
      { 1905370404;1 ;Action    ;
                      CaptionML=[ENU=Requisition Worksheet;
                                 ESP=Hoja de demanda];
                      ToolTipML=[ENU=Calculate a supply plan to fulfill item demand with purchases or transfers.;
                                 ESP=Calcular un plan de suministro para cubrir la demanda de producto con compras o transferencias.];
                      ApplicationArea=#Planning;
                      RunObject=Page 291;
                      Image=Worksheet }
      { 1904344904;1 ;Action    ;
                      CaptionML=[ENU=Item Journal;
                                 ESP=Diario productos];
                      ToolTipML=[ENU=Open a list of journals where you can adjust the physical quantity of items on inventory.;
                                 ESP=Permite abrir una lista de diarios, donde puede ajustar la cantidad f¡sica de productos en stock.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 40;
                      Promoted=Yes;
                      Image=Journals;
                      PromotedCategory=Process }
      { 1906716204;1 ;Action    ;
                      CaptionML=[ENU=Item Reclassification Journal;
                                 ESP=Diario reclasificaci¢n producto];
                      ToolTipML=[ENU=Change information on item ledger entries, such as dimensions, location codes, bin codes, and serial or lot numbers.;
                                 ESP=Permite cambiar la informaci¢n en los movimientos de producto, como las dimensiones, los c¢digos de almac‚n y los n£meros de serie o lote.];
                      ApplicationArea=#Warehouse;
                      RunObject=Page 393;
                      Promoted=Yes;
                      Image=Journals;
                      PromotedCategory=Process }
      { 1902532604;1 ;Action    ;
                      CaptionML=[ENU=Item Tracing;
                                 ESP=Seguim. prod.];
                      ToolTipML=[ENU=Trace where a lot or serial number assigned to the item was used, for example, to find which lot a defective component came from or to find all the customers that have received items containing the defective component.;
                                 ESP="Hacer el seguimiento de d¢nde se utiliz¢ un lote o n£mero de serie asignado al elemento; por ejemplo, para averiguar de qu‚ lote proven¡a un componente defectuoso o para buscar todos los clientes que han recibido elementos que contienen el componente defectuoso."];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 6520;
                      Image=ItemTracing }
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 126     ;1   ;ActionGroup;
                      CaptionML=[ENU=History;
                                 ESP=Historial];
                      Image=History }
      { 101     ;2   ;ActionGroup;
                      CaptionML=[ENU=E&ntries;
                                 ESP=&Movimientos];
                      Image=Entries }
      { 105     ;3   ;Action    ;
                      ShortCutKey=Ctrl+F7;
                      CaptionML=[ENU=Ledger E&ntries;
                                 ESP=&Movimientos];
                      ToolTipML=[ENU=View the history of transactions that have been posted for the selected record.;
                                 ESP=Permite ver el historial de transacciones que se han registrado para el registro seleccionado.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 38;
                      RunPageView=SORTING(Item No.)
                                  ORDER(Descending);
                      RunPageLink=Item No.=FIELD(No.);
                      PromotedIsBig=Yes;
                      Image=ItemLedger;
                      PromotedCategory=Category5 }
      { 112     ;3   ;Action    ;
                      CaptionML=[ENU=&Phys. Inventory Ledger Entries;
                                 ESP=Movs. &inventario f¡sico];
                      ToolTipML=[ENU=View how many units of the item you had in stock at the last physical count.;
                                 ESP=Permite ver cu ntas unidades del producto hab¡a en stock en el £ltimo recuento f¡sico.];
                      ApplicationArea=#Warehouse;
                      RunObject=Page 390;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PhysicalInventoryLedger;
                      PromotedCategory=Category5 }
      { 75      ;3   ;Action    ;
                      CaptionML=[ENU=&Reservation Entries;
                                 ESP=Movs. &reserva];
                      ToolTipML=[ENU=View all reservations that are made for the item, either manually or automatically.;
                                 ESP=Permite ver todas las reservas realizadas para el producto, ya sean manuales o autom ticas.];
                      ApplicationArea=#Reservation;
                      RunObject=Page 497;
                      RunPageView=SORTING(Item No.,Variant Code,Location Code,Reservation Status);
                      RunPageLink=Reservation Status=CONST(Reservation),
                                  Item No.=FIELD(No.);
                      Image=ReservationLedger }
      { 5800    ;3   ;Action    ;
                      CaptionML=[ENU=&Value Entries;
                                 ESP=Movs. &valor];
                      ToolTipML=[ENU=View the history of posted amounts that affect the value of the item. Value entries are created for every transaction with the item.;
                                 ESP=Permite ver el historial de los importes registrados que afectan al valor del producto. Los movimientos de valor se crean para todas las transacciones con el producto.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 5802;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=ValueLedger }
      { 6500    ;3   ;Action    ;
                      CaptionML=[ENU=Item &Tracking Entries;
                                 ESP=Movs. &seguim. prod.];
                      ToolTipML=[ENU=View serial or lot numbers that are assigned to items.;
                                 ESP=Permite ver los n£meros de serie o de lote que se asignan a los productos.];
                      ApplicationArea=#ItemTracking;
                      Image=ItemTrackingLedger;
                      OnAction=VAR
                                 ItemTrackingDocMgt@1000 : Codeunit 6503;
                               BEGIN
                                 ItemTrackingDocMgt.ShowItemTrackingForMasterData(3,'',"No.",'','','','');
                               END;
                                }
      { 11      ;3   ;Action    ;
                      CaptionML=[ENU=&Warehouse Entries;
                                 ESP=Movs. &almac‚n];
                      ToolTipML=[ENU="View the history of quantities that are registered for the item in warehouse activities. ";
                                 ESP="Permite ver el historial de las cantidades que se han registrado para el producto en las actividades de almac‚n. "];
                      ApplicationArea=#Warehouse;
                      RunObject=Page 7318;
                      RunPageView=SORTING(Item No.,Bin Code,Location Code,Variant Code,Unit of Measure Code,Lot No.,Serial No.,Entry Type,Dedicated);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=BinLedger }
      { 237     ;3   ;Action    ;
                      CaptionML=[ENU=Application Worksheet;
                                 ESP=Hoja liquidaci¢n];
                      ToolTipML=[ENU=Edit item applications that are automatically created between item ledger entries during item transactions. Use special functions to manually undo or change item application entries.;
                                 ESP=Permite editar liquidaciones de art¡culo que se crean autom ticamente entre los movimientos de productos durante las transacciones de productos. Use funciones especiales para deshacer o cambiar manualmente los movimientos de liquidaci¢n de art¡culo.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 521;
                      RunPageLink=Item No.=FIELD(No.);
                      Image=ApplicationWorksheet }
      { 65      ;3   ;Action    ;
                      CaptionML=[ENU=Export Item Data;
                                 ESP=Exportar datos de productos];
                      ToolTipML=[ENU=Use this function to export item related data to text file (you can attach this file to support requests in case you may have issues with costing calculation).;
                                 ESP=Utilice esta funci¢n para exportar datos relacionados con el producto a un archivo de texto (puede adjuntar este archivo a las solicitudes de asistencia en caso de que tenga problemas al calcular los costes).];
                      ApplicationArea=#Basic,#Suite;
                      Image=ExportFile;
                      OnAction=VAR
                                 Item@1001 : Record 27;
                                 ExportItemData@1000 : XMLport 5801;
                               BEGIN
                                 Item.SETRANGE("No.","No.");
                                 CLEAR(ExportItemData);
                                 ExportItemData.SETTABLEVIEW(Item);
                                 ExportItemData.RUN;
                               END;
                                }
      { 190     ;1   ;ActionGroup;
                      CaptionML=[ENU=Item;
                                 ESP=Producto] }
      { 184     ;2   ;Action    ;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      RunObject=Page 540;
                      RunPageLink=Table ID=CONST(27),
                                  No.=FIELD(No.);
                      PromotedIsBig=Yes;
                      Image=Dimensions;
                      PromotedCategory=Category4 }
      { 161     ;2   ;Action    ;
                      CaptionML=[ENU=Cross Re&ferences;
                                 ESP=Referencias cru&zadas];
                      ToolTipML=[ENU=Set up a customer's or vendor's own identification of the item. Cross-references to the customer's item number means that the item number is automatically shown on sales documents instead of the number that you use.;
                                 ESP=Permite configurar la identificaci¢n del producto propia del cliente o del proveedor. Las referencias cruzadas con el n£mero de producto del cliente indican que ese n£mero de producto (y no el que usted usa) se muestra autom ticamente en los documentos de venta.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 5721;
                      RunPageLink=Item No.=FIELD(No.);
                      PromotedIsBig=Yes;
                      Image=Change;
                      PromotedCategory=Category4 }
      { 114     ;2   ;Action    ;
                      CaptionML=[ENU=&Units of Measure;
                                 ESP=&Unidades medida];
                      ToolTipML=[ENU=Set up the different units that the item can be traded in, such as piece, box, or hour.;
                                 ESP=Permite configurar las diferentes unidades en las que se puede comercializar el producto, como una pieza, una caja o una hora.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 5404;
                      RunPageLink=Item No.=FIELD(No.);
                      PromotedIsBig=Yes;
                      Image=UnitOfMeasure;
                      PromotedCategory=Category4 }
      { 117     ;2   ;Action    ;
                      CaptionML=[ENU=E&xtended Texts;
                                 ESP=Te&xtos adicionales];
                      ToolTipML=[ENU=Select or set up additional text for the description of the item. Extended text can be inserted under the Description field on document lines for the item.;
                                 ESP=Seleccionar o configurar texto adicional para la descripci¢n del producto. Se puede insertar texto ampliado en el campo Descripci¢n de las l¡neas del documento del producto.];
                      ApplicationArea=#Suite;
                      RunObject=Page 391;
                      RunPageView=SORTING(Table Name,No.,Language Code,All Language Codes,Starting Date,Ending Date);
                      RunPageLink=Table Name=CONST(Item),
                                  No.=FIELD(No.);
                      PromotedIsBig=Yes;
                      Image=Text;
                      PromotedCategory=Category4 }
      { 116     ;2   ;Action    ;
                      CaptionML=[ENU=Translations;
                                 ESP=Traducciones];
                      ToolTipML=[ENU=View or edit translated item descriptions. Translated item descriptions are automatically inserted on documents according to the language code.;
                                 ESP=Permite ver o editar las descripciones de productos traducidas. Tales descripciones se insertan autom ticamente en los documentos seg£n el c¢digo de idioma.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 35;
                      RunPageLink=Item No.=FIELD(No.);
                      PromotedIsBig=Yes;
                      Image=Translations;
                      PromotedCategory=Category4 }
      { 158     ;2   ;Action    ;
                      CaptionML=[ENU=Substituti&ons;
                                 ESP=Sustitu&ciones];
                      ToolTipML=[ENU=View substitute items that are set up to be sold instead of the item.;
                                 ESP=Permite ver los productos sustitutivos configurados para la venta en lugar del producto.];
                      ApplicationArea=#Suite;
                      RunObject=Page 5716;
                      RunPageLink=Type=CONST(Item),
                                  No.=FIELD(No.);
                      Image=ItemSubstitution }
      { 129     ;2   ;Action    ;
                      Name=ApprovalEntries;
                      AccessByPermission=TableData 454=R;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Aprobaciones];
                      ToolTipML=[ENU=View a list of the records that are waiting to be approved. For example, you can see who requested the record to be approved, when it was sent, and when it is due to be approved.;
                                 ESP=Permite ver una lista de los registros en espera de aprobaci¢n. Por ejemplo, puede ver qui‚n ha solicitado la aprobaci¢n del registro, cu ndo se envi¢ y la fecha de vencimiento de la aprobaci¢n.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Image=Approvals;
                      PromotedCategory=Category8;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 ApprovalsMgmt.OpenApprovalEntriesPage(RECORDID);
                               END;
                                }
      { 147     ;1   ;ActionGroup;
                      Name=ActionGroupCRM;
                      CaptionML=[ENU=Dynamics 365 for Sales;
                                 ESP=Dynamics 365 for Sales];
                      Visible=CRMIntegrationEnabled;
                      Image=Reconcile }
      { 146     ;2   ;Action    ;
                      Name=CRMGoToProduct;
                      CaptionML=[ENU=Product;
                                 ESP=Producto];
                      ToolTipML=[ENU=Open the coupled Dynamics 365 for Sales product.;
                                 ESP=Permite abrir el producto emparejado de Dynamics 365 for Sales.];
                      ApplicationArea=#Suite;
                      Image=CoupledItem;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.ShowCRMEntityFromRecordID(RECORDID);
                               END;
                                }
      { 144     ;2   ;Action    ;
                      Name=CRMSynchronizeNow;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Synchronize;
                                 ESP=Sincronizar];
                      ToolTipML=[ENU=Send updated data to Dynamics 365 for Sales.;
                                 ESP=Permite enviar datos actualizados a Dynamics 365 for Sales.];
                      ApplicationArea=#Suite;
                      Image=Refresh;
                      OnAction=VAR
                                 CRMIntegrationManagement@1001 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.UpdateOneNow(RECORDID);
                               END;
                                }
      { 142     ;2   ;ActionGroup;
                      Name=Coupling;
                      CaptionML=[@@@=Coupling is a noun;
                                 ENU=Coupling;
                                 ESP=Emparejamiento];
                      ToolTipML=[ENU=Create, change, or delete a coupling between the Business Central record and a Dynamics 365 for Sales record.;
                                 ESP=Permite crear, cambiar o eliminar un emparejamiento entre el registro de Business Central y un registro de Dynamics 365 for Sales.];
                      Image=LinkAccount }
      { 140     ;3   ;Action    ;
                      Name=ManageCRMCoupling;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Set Up Coupling;
                                 ESP=Configurar emparejamiento];
                      ToolTipML=[ENU=Create or modify the coupling to a Dynamics 365 for Sales product.;
                                 ESP=Permite crear o modificar el emparejamiento con un producto de Dynamics 365 for Sales.];
                      ApplicationArea=#Suite;
                      Image=LinkAccount;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.DefineCoupling(RECORDID);
                               END;
                                }
      { 138     ;3   ;Action    ;
                      Name=DeleteCRMCoupling;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Delete Coupling;
                                 ESP=Eliminar emparejamiento];
                      ToolTipML=[ENU=Delete the coupling to a Dynamics 365 for Sales product.;
                                 ESP=Permite eliminar el emparejamiento con un producto de Dynamics 365 for Sales.];
                      ApplicationArea=#Suite;
                      Enabled=CRMIsCoupledToRecord;
                      Image=UnLinkAccount;
                      OnAction=VAR
                                 CRMCouplingManagement@1000 : Codeunit 5331;
                               BEGIN
                                 CRMCouplingManagement.RemoveCoupling(RECORDID);
                               END;
                                }
      { 203     ;2   ;Action    ;
                      Name=ShowLog;
                      CaptionML=[ENU=Synchronization Log;
                                 ESP=Registro de sincronizaci¢n];
                      ToolTipML=[ENU=View integration synchronization jobs for the item table.;
                                 ESP=Permite ver los trabajos de sincronizaci¢n de integraci¢n para la tabla de productos.];
                      ApplicationArea=#Suite;
                      Image=Log;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.ShowLog(RECORDID);
                               END;
                                }
      { 124     ;1   ;ActionGroup;
                      CaptionML=[ENU=Availability;
                                 ESP=Disponibilidad];
                      Image=ItemAvailability }
      { 68      ;2   ;Action    ;
                      Name=ItemsByLocation;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Items b&y Location;
                                 ESP=Prods. por &almac‚n];
                      ToolTipML=[ENU=Show a list of items grouped by location.;
                                 ESP=Muestra una lista de productos agrupados por almac‚n.];
                      ApplicationArea=#Location;
                      Image=ItemAvailbyLoc;
                      OnAction=BEGIN
                                 PAGE.RUN(PAGE::"Items by Location",Rec);
                               END;
                                }
      { 76      ;2   ;ActionGroup;
                      CaptionML=[ENU=&Item Availability by;
                                 ESP=&Disponibilidad prod. por];
                      Image=ItemAvailability }
      { 3       ;3   ;Action    ;
                      Name=<Action110>;
                      CaptionML=[ENU=Event;
                                 ESP=Evento];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 ESP=Permite ver c¢mo el saldo disponible real y previsto de un art¡culo se desarrollar  a lo largo del tiempo seg£n la oferta y la demanda.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromItem(Rec,ItemAvailFormsMgt.ByEvent);
                               END;
                                }
      { 110     ;3   ;Action    ;
                      CaptionML=[ENU=Period;
                                 ESP=Periodo];
                      ToolTipML=[ENU=Show the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 ESP=Muestra la cantidad proyectada del producto a lo largo de los periodos de tiempo, como d¡as, semanas o meses.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 157;
                      RunPageLink=No.=FIELD(No.),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter),
                                  Location Filter=FIELD(Location Filter),
                                  Drop Shipment Filter=FIELD(Drop Shipment Filter),
                                  Variant Filter=FIELD(Variant Filter);
                      Image=Period }
      { 77      ;3   ;Action    ;
                      CaptionML=[ENU=Variant;
                                 ESP=Variante];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 ESP=Permite ver o editar las variantes del art¡culo. En lugar de configurar cada color de un art¡culo como un art¡culo diferente, puede configurar varios colores como variantes del art¡culo.];
                      ApplicationArea=#Planning;
                      RunObject=Page 5414;
                      RunPageLink=No.=FIELD(No.),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter),
                                  Location Filter=FIELD(Location Filter),
                                  Drop Shipment Filter=FIELD(Drop Shipment Filter),
                                  Variant Filter=FIELD(Variant Filter);
                      Image=ItemVariant }
      { 69      ;3   ;Action    ;
                      CaptionML=[ENU=Location;
                                 ESP=Almac‚n];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 ESP=Permite ver la cantidad real y proyectada del producto por almac‚n.];
                      ApplicationArea=#Location;
                      RunObject=Page 492;
                      RunPageLink=No.=FIELD(No.),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter),
                                  Location Filter=FIELD(Location Filter),
                                  Drop Shipment Filter=FIELD(Drop Shipment Filter),
                                  Variant Filter=FIELD(Variant Filter);
                      Image=Warehouse }
      { 67      ;3   ;Action    ;
                      AccessByPermission=TableData 5870=R;
                      CaptionML=[ENU=BOM Level;
                                 ESP=Nivel L.M.];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 ESP=Permite ver las cifras correspondientes a los productos en listas de materiales que indican cu ntas unidades de un producto principal puede producir seg£n la disponibilidad de productos secundarios.];
                      ApplicationArea=#Assembly;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromItem(Rec,ItemAvailFormsMgt.ByBOM);
                               END;
                                }
      { 74      ;3   ;Action    ;
                      CaptionML=[ENU=Timeline;
                                 ESP=Escala de tiempo];
                      ToolTipML=[ENU=Get a graphical view of an item's projected inventory based on future supply and demand events, with or without planning suggestions. The result is a graphical representation of the inventory profile.;
                                 ESP=Permite ver gr ficamente el inventario previsto de un art¡culo seg£n la oferta y la demanda futuras, con o sin las propuestas de planificaci¢n. Como resultado, se obtiene una representaci¢n gr fica del perfil de inventario.];
                      ApplicationArea=#Planning;
                      Image=Timeline;
                      OnAction=BEGIN
                                 ShowTimelineFromItem(Rec);
                               END;
                                }
      { 102     ;2   ;ActionGroup;
                      CaptionML=[ENU=Statistics;
                                 ESP=Estad¡sticas];
                      Image=Statistics }
      { 107     ;3   ;Action    ;
                      Name=Statistics;
                      ShortCutKey=F7;
                      CaptionML=[ENU=Statistics;
                                 ESP=Estad¡sticas];
                      ToolTipML=[ENU=View statistical information, such as the value of posted entries, for the record.;
                                 ESP=Permite ver informaci¢n estad¡stica del registro, como el valor de los movimientos registrados.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Statistics;
                      OnAction=VAR
                                 ItemStatistics@1001 : Page 5827;
                               BEGIN
                                 ItemStatistics.SetItem(Rec);
                                 ItemStatistics.RUNMODAL;
                               END;
                                }
      { 108     ;3   ;Action    ;
                      CaptionML=[ENU=Entry Statistics;
                                 ESP=Estad¡sticas documentos];
                      ToolTipML=[ENU=View statistics for item ledger entries.;
                                 ESP=Permite ver las estad¡sticas de los movimientos de productos.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 304;
                      RunPageLink=No.=FIELD(No.),
                                  Date Filter=FIELD(Date Filter),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter),
                                  Location Filter=FIELD(Location Filter),
                                  Drop Shipment Filter=FIELD(Drop Shipment Filter),
                                  Variant Filter=FIELD(Variant Filter);
                      Image=EntryStatistics }
      { 111     ;3   ;Action    ;
                      CaptionML=[ENU=T&urnover;
                                 ESP=An &lisis];
                      ToolTipML=[ENU=View a detailed account of item turnover by periods after you have set the relevant filters for location and variant.;
                                 ESP=Permite ver una cuenta detallada del an lisis de producto por periodos una vez se hayan definido los filtros necesarios para delimitar el almac‚n y la variante.];
                      ApplicationArea=#Suite;
                      RunObject=Page 158;
                      RunPageLink=No.=FIELD(No.),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter),
                                  Location Filter=FIELD(Location Filter),
                                  Drop Shipment Filter=FIELD(Drop Shipment Filter),
                                  Variant Filter=FIELD(Variant Filter);
                      Image=Turnover }
      { 84      ;1   ;ActionGroup;
                      CaptionML=[ENU=&Purchases;
                                 ESP=&Compras];
                      Image=Purchasing }
      { 81      ;2   ;Action    ;
                      CaptionML=[ENU=Ven&dors;
                                 ESP=Provee&dores];
                      ToolTipML=[ENU=View the list of vendors who can supply the item, and at which lead time.;
                                 ESP=Permite ver la lista de proveedores que pueden suministrar el art¡culo y en qu‚ plazo.];
                      ApplicationArea=#Planning;
                      RunObject=Page 114;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=Vendor }
      { 240     ;2   ;Action    ;
                      CaptionML=[ENU=Prepa&yment Percentages;
                                 ESP=Porcentajes &prepago];
                      ToolTipML=[ENU="View or edit the percentages of the price that can be paid as a prepayment. ";
                                 ESP="Permite ver o editar los porcentajes del precio que pueden pagarse como prepago. "];
                      ApplicationArea=#Prepayments;
                      RunObject=Page 665;
                      RunPageLink=Item No.=FIELD(No.);
                      Image=PrepaymentPercentages }
      { 87      ;2   ;Action    ;
                      CaptionML=[ENU=Orders;
                                 ESP=Pedidos];
                      ToolTipML=[ENU=View a list of ongoing orders for the item.;
                                 ESP=Permite ver una lista de pedidos de venta en curso para el producto.];
                      ApplicationArea=#Suite;
                      RunObject=Page 56;
                      RunPageView=SORTING(Document Type,Type,No.);
                      RunPageLink=Type=CONST(Item),
                                  No.=FIELD(No.);
                      Image=Document }
      { 191     ;2   ;Action    ;
                      CaptionML=[ENU=Return Orders;
                                 ESP=Devoluciones];
                      ToolTipML=[ENU=Open the list of ongoing return orders for the item.;
                                 ESP=Permite abrir la lista de pedidos de devoluci¢n en curso.];
                      ApplicationArea=#SalesReturnOrder,#PurchReturnOrder;
                      RunObject=Page 6643;
                      RunPageView=SORTING(Document Type,Type,No.);
                      RunPageLink=Type=CONST(Item),
                                  No.=FIELD(No.);
                      Image=ReturnOrder }
      { 42      ;1   ;ActionGroup;
                      Name=PurchPricesandDiscounts;
                      CaptionML=[ENU=Special Purchase Prices & Discounts;
                                 ESP=Precios de compra y descuentos especiales] }
      { 86      ;2   ;Action    ;
                      CaptionML=[ENU=Set Special Prices;
                                 ESP=Establecer precios especiales];
                      ToolTipML=[ENU=Set up different prices for the item. An item price is automatically granted on invoice lines when the specified criteria are met, such as vendor, quantity, or ending date.;
                                 ESP=Permite configurar precios diferentes para el producto. Se concede autom ticamente un precio de producto en las l¡neas de factura cuando se cumplen los criterios especificados, como el proveedor, la cantidad o la fecha final.];
                      ApplicationArea=#Suite;
                      RunObject=Page 7012;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=Price }
      { 85      ;2   ;Action    ;
                      CaptionML=[ENU=Set Special Discounts;
                                 ESP=Establecer descuentos especiales];
                      ToolTipML=[ENU=Set up different discounts for the item. An item discount is automatically granted on invoice lines when the specified criteria are met, such as vendor, quantity, or ending date.;
                                 ESP=Permite configurar descuentos diferentes para el producto. Se concede autom ticamente un descuento de producto en las l¡neas de factura cuando se cumplen los criterios especificados, como el proveedor, la cantidad o la fecha final.];
                      ApplicationArea=#Suite;
                      RunObject=Page 7014;
                      RunPageLink=Item No.=FIELD(No.);
                      Image=LineDiscount }
      { 209     ;2   ;Action    ;
                      Name=PurchPricesDiscountsOverview;
                      CaptionML=[ENU=Special Prices & Discounts Overview;
                                 ESP=Panorama de precios y descuentos especiales];
                      ToolTipML=[ENU=View the special prices and line discounts that you grant for this item when certain criteria are met, such as vendor, quantity, or ending date.;
                                 ESP=Permite ver los precios especiales y los descuentos de l¡nea que concede para este producto cuando se cumplen los criterios especificados, como el proveedor, la cantidad o la fecha final.];
                      ApplicationArea=#Suite;
                      Image=PriceWorksheet;
                      OnAction=VAR
                                 PurchasesPriceAndLineDisc@1000 : Page 1346;
                               BEGIN
                                 PurchasesPriceAndLineDisc.LoadItem(Rec);
                                 PurchasesPriceAndLineDisc.RUNMODAL;
                               END;
                                }
      { 79      ;1   ;ActionGroup;
                      CaptionML=[ENU=S&ales;
                                 ESP=Ve&ntas];
                      Image=Sales }
      { 300     ;2   ;Action    ;
                      CaptionML=[ENU=Prepa&yment Percentages;
                                 ESP=Porcentajes &prepago];
                      ToolTipML=[ENU="View or edit the percentages of the price that can be paid as a prepayment. ";
                                 ESP="Permite ver o editar los porcentajes del precio que pueden pagarse como prepago. "];
                      ApplicationArea=#Prepayments;
                      RunObject=Page 664;
                      RunPageLink=Item No.=FIELD(No.);
                      Image=PrepaymentPercentages }
      { 1170170009;2 ;Action    ;
                      CaptionML=[ENU=Green point price;
                                 ESP=Precio punto verde];
                      RunObject=Page 7014472;
                      RunPageView=SORTING(No. producto,Fecha inicio);
                      RunPageLink=No. producto=FIELD(No.);
                      Image=CalculateCost }
      { 83      ;2   ;Action    ;
                      CaptionML=[ENU=Orders;
                                 ESP=Pedidos];
                      ToolTipML=[ENU=View a list of ongoing orders for the item.;
                                 ESP=Permite ver una lista de pedidos de venta en curso para el producto.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 48;
                      RunPageView=SORTING(Document Type,Type,No.);
                      RunPageLink=Type=CONST(Item),
                                  No.=FIELD(No.);
                      Image=Document }
      { 163     ;2   ;Action    ;
                      CaptionML=[ENU=Return Orders;
                                 ESP=Devoluciones];
                      ToolTipML=[ENU=Open the list of ongoing return orders for the item.;
                                 ESP=Permite abrir la lista de pedidos de devoluci¢n en curso.];
                      ApplicationArea=#SalesReturnOrder,#PurchReturnOrder;
                      RunObject=Page 6633;
                      RunPageView=SORTING(Document Type,Type,No.);
                      RunPageLink=Type=CONST(Item),
                                  No.=FIELD(No.);
                      Image=ReturnOrder }
      { 128     ;1   ;ActionGroup;
                      CaptionML=[ENU=Bill of Materials;
                                 ESP=Lista de materiales];
                      Image=Production }
      { 121     ;2   ;Action    ;
                      Name=BOMStructure;
                      CaptionML=[ENU=Structure;
                                 ESP=Estructura];
                      ToolTipML=[ENU=View which child items are used in an item's assembly BOM or production BOM. Each item level can be collapsed or expanded to obtain an overview or detailed view.;
                                 ESP=Permite ver qu‚ art¡culos secundarios se usan en la L.M. de ensamblado de un art¡culo o en la L.M. de producci¢n. Cada uno de los niveles del producto se pueden contraer o expandir para obtener una vista general o detallada.];
                      ApplicationArea=#Assembly;
                      Image=Hierarchy;
                      OnAction=VAR
                                 BOMStructure@1000 : Page 5870;
                               BEGIN
                                 BOMStructure.InitItem(Rec);
                                 BOMStructure.RUN;
                               END;
                                }
      { 104     ;2   ;Action    ;
                      CaptionML=[ENU=Cost Shares;
                                 ESP=Partes costes];
                      ToolTipML=[ENU=View how the costs of underlying items in the BOM roll up to the parent item. The information is organized according to the BOM structure to reflect at which levels the individual costs apply. Each item level can be collapsed or expanded to obtain an overview or detailed view.;
                                 ESP=Permite ver c¢mo se distribuyen los costes de productos subyacentes en la L.M. en el producto principal. La informaci¢n se organiza seg£n la estructura de L.M., para reflejar en qu‚ niveles se aplicar n los costes individuales. Cada uno de los niveles del producto se pueden contraer o expandir para obtener una vista general o detallada.];
                      ApplicationArea=#Assembly;
                      Image=CostBudget;
                      OnAction=VAR
                                 BOMCostShares@1000 : Page 5872;
                               BEGIN
                                 BOMCostShares.InitItem(Rec);
                                 BOMCostShares.RUN;
                               END;
                                }
      { 100     ;2   ;ActionGroup;
                      CaptionML=[ENU=Assemb&ly;
                                 ESP=Ensa&mblado];
                      Image=AssemblyBOM }
      { 98      ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Assembly BOM;
                                 ESP=L.M. de ensamblado];
                      ToolTipML=[ENU=View or edit the bill of material that specifies which items and resources are required to assemble the assembly item.;
                                 ESP=Permite ver o editar la lista de materiales que especifica qu‚ productos y recursos se necesitan para ensamblar el elemento del ensamblado.];
                      ApplicationArea=#Assembly;
                      RunObject=Page 36;
                      RunPageLink=Parent Item No.=FIELD(No.);
                      Image=BOM }
      { 96      ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Where-Used;
                                 ESP=Puntos-de-uso];
                      ToolTipML=[ENU=View a list of BOMs in which the item is used.;
                                 ESP=Permite ver una lista de las L.M. en las que se usa el producto.];
                      ApplicationArea=#Assembly;
                      RunObject=Page 37;
                      RunPageView=SORTING(Type,No.);
                      RunPageLink=Type=CONST(Item),
                                  No.=FIELD(No.);
                      Image=Track }
      { 94      ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Calc. Stan&dard Cost;
                                 ESP=Calcular coste est n&dar];
                      ToolTipML=[ENU=Calculate the unit cost of the item by rolling up the unit cost of each component and resource in the item's assembly BOM or production BOM. The unit cost of a parent item must always equals the total of the unit costs of its components, subassemblies, and any resources.;
                                 ESP=Permite calcular el coste unitario del producto. Para ello, distribuye el coste unitario de cada componente y recurso en la L.M. de ensamblado del producto o en la L.M. de producci¢n. El coste unitario de un producto principal debe ser siempre igual al total de los costes unitarios de sus componentes, los semiterminados y los recursos.];
                      ApplicationArea=#Assembly;
                      Image=CalculateCost;
                      OnAction=BEGIN
                                 CLEAR(CalculateStdCost);
                                 CalculateStdCost.CalcItem("No.",TRUE);
                               END;
                                }
      { 90      ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Calc. Unit Price;
                                 ESP=Calc. precio venta];
                      ToolTipML=[ENU=Calculate the unit price based on the unit cost and the profit percentage.;
                                 ESP=Permite calcular el precio unitario seg£n el coste unitario y el porcentaje de beneficio bruto.];
                      ApplicationArea=#Assembly;
                      Image=SuggestItemPrice;
                      OnAction=BEGIN
                                 CLEAR(CalculateStdCost);
                                 CalculateStdCost.CalcAssemblyItemPrice("No.")
                               END;
                                }
      { 89      ;2   ;ActionGroup;
                      CaptionML=[ENU=Production;
                                 ESP=Producci¢n];
                      Image=Production }
      { 88      ;3   ;Action    ;
                      CaptionML=[ENU=Production BOM;
                                 ESP=L.M. producci¢n];
                      ToolTipML=[ENU=Open the item's production bill of material to view or edit its components.;
                                 ESP=Abrir la lista de materiales de producci¢n del art¡culo para ver o editar sus componentes.];
                      ApplicationArea=#Manufacturing;
                      RunObject=Page 99000786;
                      RunPageLink=No.=FIELD(Production BOM No.);
                      Image=BOM }
      { 78      ;3   ;Action    ;
                      AccessByPermission=TableData 99000771=R;
                      CaptionML=[ENU=Where-Used;
                                 ESP=Puntos-de-uso];
                      ToolTipML=[ENU=View a list of BOMs in which the item is used.;
                                 ESP=Permite ver una lista de las L.M. en las que se usa el producto.];
                      ApplicationArea=#Manufacturing;
                      Image=Where-Used;
                      OnAction=VAR
                                 ProdBOMWhereUsed@1001 : Page 99000811;
                               BEGIN
                                 ProdBOMWhereUsed.SetItem(Rec,WORKDATE);
                                 ProdBOMWhereUsed.RUNMODAL;
                               END;
                                }
      { 5       ;3   ;Action    ;
                      AccessByPermission=TableData 99000771=R;
                      CaptionML=[ENU=Calc. Stan&dard Cost;
                                 ESP=Calcular coste est n&dar];
                      ToolTipML=[ENU=Calculate the unit cost of the item by rolling up the unit cost of each component and resource in the item's assembly BOM or production BOM. The unit cost of a parent item must always equals the total of the unit costs of its components, subassemblies, and any resources.;
                                 ESP=Permite calcular el coste unitario del producto. Para ello, distribuye el coste unitario de cada componente y recurso en la L.M. de ensamblado del producto o en la L.M. de producci¢n. El coste unitario de un producto principal debe ser siempre igual al total de los costes unitarios de sus componentes, los semiterminados y los recursos.];
                      ApplicationArea=#Manufacturing;
                      Image=CalculateCost;
                      OnAction=BEGIN
                                 CLEAR(CalculateStdCost);
                                 CalculateStdCost.CalcItem("No.",FALSE);
                               END;
                                }
      { 103     ;1   ;ActionGroup;
                      CaptionML=[ENU=Warehouse;
                                 ESP=Almac‚n];
                      Image=Warehouse }
      { 212     ;2   ;Action    ;
                      CaptionML=[ENU=&Bin Contents;
                                 ESP=Contenidos u&bicaci¢n];
                      ToolTipML=[ENU=View the quantities of the item in each bin where it exists. You can see all the important parameters relating to bin content, and you can modify certain bin content parameters in this window.;
                                 ESP=Permite ver las cantidades del producto en cada ubicaci¢n donde existan. Puede ver todos los par metros importantes relacionados con el contenido de la ubicaci¢n y puede modificar determinados par metros de contenido de la ubicaci¢n en esta ventana.];
                      ApplicationArea=#Warehouse;
                      RunObject=Page 7379;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=BinContent }
      { 157     ;2   ;Action    ;
                      CaptionML=[ENU=Stockkeepin&g Units;
                                 ESP=Uds. de almace&nam.];
                      ToolTipML=[ENU="Open the item's SKUs to view or edit instances of the item at different locations or with different variants. ";
                                 ESP="Abrir las UA del elemento para ver o editar instancias del elemento en diferentes almacenes o con diferentes variantes. "];
                      ApplicationArea=#Planning;
                      RunObject=Page 5701;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=SKU }
      { 122     ;1   ;ActionGroup;
                      CaptionML=[ENU=Service;
                                 ESP=Servicio];
                      Image=ServiceItem }
      { 183     ;2   ;Action    ;
                      CaptionML=[ENU=Ser&vice Items;
                                 ESP=Prods. &servicio];
                      ToolTipML=[ENU="View instances of the item as service items, such as machines that you maintain or repair for customers through service orders. ";
                                 ESP="Permite ver las instancias del elemento como elementos de servicio, tales como m quinas que mantiene o repara para los clientes a trav‚s de ¢rdenes de servicio. "];
                      ApplicationArea=#Service;
                      RunObject=Page 5988;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=ServiceItem }
      { 17      ;2   ;Action    ;
                      AccessByPermission=TableData 5900=R;
                      CaptionML=[ENU=Troubleshooting;
                                 ESP=Soluci¢n de problemas];
                      ToolTipML=[ENU=View or edit information about technical problems with a service item.;
                                 ESP=Permite ver o editar informaci¢n sobre problemas t‚cnicos con un elemento de servicio.];
                      ApplicationArea=#Service;
                      Image=Troubleshoot;
                      OnAction=VAR
                                 TroubleshootingHeader@1000 : Record 5943;
                               BEGIN
                                 TroubleshootingHeader.ShowForItem(Rec);
                               END;
                                }
      { 185     ;2   ;Action    ;
                      CaptionML=[ENU=Troubleshooting Setup;
                                 ESP=Config. detecci¢n errores];
                      ToolTipML=[ENU=View or edit your settings for troubleshooting service items.;
                                 ESP=Permite ver o editar la configuraci¢n de la soluci¢n de problemas de los productos de servicio.];
                      ApplicationArea=#Service;
                      RunObject=Page 5993;
                      RunPageLink=Type=CONST(Item),
                                  No.=FIELD(No.);
                      Image=Troubleshoot }
      { 127     ;1   ;ActionGroup;
                      CaptionML=[ENU=Resources;
                                 ESP=Recursos];
                      Image=Resource }
      { 187     ;2   ;Action    ;
                      CaptionML=[ENU=Resource Skills;
                                 ESP=Cualificaciones recurso];
                      ToolTipML=[ENU=View the assignment of skills to resources, items, service item groups, and service items. You can use skill codes to allocate skilled resources to service items or items that need special skills for servicing.;
                                 ESP=Permite ver la asignaci¢n de aptitudes a recursos, art¡culos, grupos de art¡culos de servicio y art¡culos de servicio. Puede usar c¢digos de aptitud para asignar recursos cualificados a art¡culos de servicio o art¡culos que precisan de aptitudes especiales durante el servicio.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 6019;
                      RunPageLink=Type=CONST(Item),
                                  No.=FIELD(No.);
                      Image=ResourceSkills }
      { 188     ;2   ;Action    ;
                      AccessByPermission=TableData 5900=R;
                      CaptionML=[ENU=Skilled Resources;
                                 ESP=Recursos cualificados];
                      ToolTipML=[ENU=View a list of all registered resources with information about whether they have the skills required to service the particular service item group, item, or service item.;
                                 ESP=Permite ver una lista de los recursos registrados con informaci¢n sobre si tienen o no las aptitudes requeridas para el servicio de un grupo de art¡culos de servicio, art¡culo o art¡culo de servicio espec¡fico.];
                      ApplicationArea=#Basic,#Suite;
                      Image=ResourceSkills;
                      OnAction=VAR
                                 ResourceSkill@1001 : Record 5956;
                               BEGIN
                                 CLEAR(SkilledResourceList);
                                 SkilledResourceList.Initialize(ResourceSkill.Type::Item,"No.",Description);
                                 SkilledResourceList.RUNMODAL;
                               END;
                                }
      { 1170170058;1 ;ActionGroup;
                      CaptionML=ESP=VinoTEC;
                      Image=ReferenceData }
      { 1170170048;2 ;ActionGroup;
                      CaptionML=[ENU=Lab;
                                 ESP=Laboratorio];
                      Image=AnalysisView }
      { 1170170047;3 ;Action    ;
                      CaptionML=[ENU=Parameter Limits;
                                 ESP=L¡mites par metro];
                      RunObject=Page 7014485;
                      RunPageLink=No. producto=FIELD(No.);
                      Image=CapableToPromise }
      { 1170170045;3 ;Action    ;
                      CaptionML=[ENU=Analysis;
                                 ESP=An lisis];
                      RunObject=Page 7014488;
                      RunPageView=SORTING(No. producto,C¢d. variante,No. lote,Fecha creaci¢n);
                      RunPageLink=No. producto=FIELD(No.);
                      Image=AnalysisView }
      { 1170170044;2 ;ActionGroup;
                      CaptionML=ESP=EMCS;
                      Image=Travel }
      { 1170170043;3 ;Action    ;
                      CaptionML=[ENU=Packaging Types;
                                 ESP=Tipos embalaje];
                      RunObject=Page 7061578;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=Item }
      { 1170170040;3 ;Action    ;
                      CaptionML=[ENU=Wine Manip.;
                                 ESP=Manip. vin¡colas];
                      RunObject=Page 7061579;
                      RunPageView=SORTING(Item No.);
                      RunPageLink=Item No.=FIELD(No.);
                      Image=ServiceItemWorksheet }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                Name=Item;
                CaptionML=[ENU=General;
                           ESP=Producto];
                GroupType=Group }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the involved entry or record, according to the specified number series.;
                           ESP=Especifica el n£mero de la entrada o el registro relacionado, seg£n la serie num‚rica especificada.];
                ApplicationArea=#All;
                SourceExpr="No.";
                Importance=Standard;
                Visible=NoFieldVisible;
                OnAssistEdit=BEGIN
                               IF AssistEdit THEN
                                 CurrPage.UPDATE;
                             END;
                              }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the item.;
                           ESP=Especifica una descripci¢n del producto.];
                ApplicationArea=#All;
                SourceExpr=Description;
                Visible=DescriptionFieldVisible;
                ShowMandatory=TRUE }

    { 1170170007;2;Field  ;
                SourceExpr="Description 2" }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that the related record is blocked from being posted in transactions, for example a customer that is declared insolvent or an item that is placed in quarantine.;
                           ESP=Especifica que se ha bloqueado el registro relacionado para que no se registre en transacciones, por ejemplo, en el caso de un cliente que ha sido declarado insolvente o de un elemento que se encuentra en cuarentena.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Blocked }

    { 1170000000;2;Field  ;
                SourceExpr="Pendiente revisar" }

    { 166 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the item card represents a physical inventory unit (Inventory), a labor time unit (Service), or a physical unit that is not tracked in inventory (Non-Inventory).;
                           ESP=Especifica si la ficha de producto representa una unidad de inventario f¡sico (Inventario), una unidad de tiempo de mano de obra (Servicio) o una unidad f¡sica sin seguimiento en el inventario (Fuera de inventario).];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Type;
                OnValidate=BEGIN
                             EnableControls;
                           END;
                            }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the base unit used to measure the item, such as piece, box, or pallet. The base unit of measure also serves as the conversion basis for alternate units of measure.;
                           ESP=Especifica la unidad base que se usa para medir el producto, como pieza, caja o pal‚. La unidad de medida base tambi‚n sirve como base de conversi¢n para las unidades de medida alternativas.];
                ApplicationArea=#Basic,#Suite,#Invoicing;
                SourceExpr="Base Unit of Measure";
                Importance=Promoted;
                OnValidate=BEGIN
                             CurrPage.UPDATE(TRUE);
                             GET("No.");
                           END;

                ShowMandatory=TRUE }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when the item card was last modified.;
                           ESP=Especifica cu ndo se modific¢ la ficha de producto por £ltima vez.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Last Date Modified";
                Importance=Additional }

    { 135 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the Global Trade Item Number (GTIN) for the item. For example, the GTIN is used with bar codes to track items, and when sending and receiving documents electronically. The GTIN number typically contains a Universal Product Code (UPC), or European Article Number (EAN).;
                           ESP=Especifica el n£mero de producto de comercio global (GTIN) para el producto. Por ejemplo, el GTIN se utiliza con c¢digos de barras para realizar el seguimiento de productos y para enviar y recibir documentos de forma electr¢nica. El n£mero GTIN normalmente contiene un c¢digo de producto universal (UPC) o n£mero de art¡culo europeo (EAN).];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GTIN;
                Importance=Additional;
                Enabled=NOT IsService }

    { 170 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the category that the item belongs to. Item categories also contain any assigned item attributes.;
                           ESP=Especifica la categor¡a a la que pertenece el art¡culo. Las categor¡as de art¡culo tambi‚n incluyen los atributos de art¡culo asignados.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Item Category Code";
                OnValidate=BEGIN
                             CurrPage.ItemAttributesFactbox.PAGE.LoadItemAttributesData("No.");
                             EnableCostingControls;
                           END;
                            }

    { 180 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the service item group that the item belongs to.;
                           ESP=Especifica el c¢digo del grupo de art¡culos de servicio al que pertenece el art¡culo.];
                ApplicationArea=#Service;
                SourceExpr="Service Item Group";
                Importance=Additional }

    { 97  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that an extended text that you have set up will be added automatically on sales or purchase documents for this item.;
                           ESP=Especifica que se agregar  autom ticamente un texto adicional configurado en los documentos de compra y de venta de este producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Automatic Ext. Texts";
                Importance=Additional }

    { 168 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unique common item number that the intercompany partners agree upon.;
                           ESP=Especifica el n£mero de producto com£n £nico con el que los socios de empresas vinculadas est n de acuerdo.];
                ApplicationArea=#Intercompany;
                SourceExpr="Common Item No.";
                Importance=Additional }

    { 1170170067;2;Field  ;
                SourceExpr="C¢d. conjunto" }

    { 171 ;1   ;Group     ;
                Name=InventoryGrp;
                CaptionML=[ENU=Inventory;
                           ESP=Inventario];
                Visible=IsInventoriable;
                GroupType=Group }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies where to find the item in the warehouse. This is informational only.;
                           ESP=Especifica d¢nde se encuentra el producto en el almac‚n. Solo a t¡tulo informativo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shelf No." }

    { 164 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that the item was created from a catalog item.;
                           ESP=Especifica que el producto se cre¢ a partir de un producto del cat logo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Created From Nonstock Item";
                Importance=Additional }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a search description that you use to find the item in lists.;
                           ESP=Especifica una descripci¢n de b£squeda que se usa para buscar el producto en listas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Search Description";
                Importance=Additional }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units, such as pieces, boxes, or cans, of the item are in inventory.;
                           ESP=Especifica cu ntas unidades (como piezas, cajas o envases) del producto hay en el inventario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Inventory;
                Importance=Promoted;
                Visible=IsFoundationEnabled;
                Enabled=IsInventoriable;
                HideValue=IsNonInventoriable;
                OnAssistEdit=VAR
                               AdjustInventory@1000 : Page 1327;
                             BEGIN
                               MODIFY(TRUE);
                               COMMIT;

                               AdjustInventory.SetItem("No.");
                               IF AdjustInventory.RUNMODAL IN [ACTION::LookupOK,ACTION::OK] THEN
                                 GET("No.");
                               CurrPage.UPDATE
                             END;
                              }

    { 205 ;2   ;Field     ;
                Name=InventoryNonFoundation;
                AssistEdit=No;
                CaptionML=[ENU=Inventory;
                           ESP=Inventario];
                ToolTipML=[ENU=Specifies how many units, such as pieces, boxes, or cans, of the item are in inventory.;
                           ESP=Especifica cu ntas unidades (como piezas, cajas o envases) del producto hay en el inventario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Inventory;
                Importance=Promoted;
                Visible=NOT IsFoundationEnabled;
                Enabled=IsInventoriable }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are inbound on purchase orders, meaning listed on outstanding purchase order lines.;
                           ESP=Especifica cu ntas unidades del art¡culo son de entrada en pedidos de compra, es decir, est n incluidas en l¡neas de pedidos de compra pendientes.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Qty. on Purch. Order" }

    { 172 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are allocated to production orders, meaning listed on outstanding production order lines.;
                           ESP=Especifica cu ntas unidades del art¡culo est n asignadas a pedidos de producci¢n, es decir, est n incluidas en l¡neas de orden de producci¢n pendientes.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Qty. on Prod. Order";
                Importance=Additional }

    { 174 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are allocated as production order components, meaning listed under outstanding production order lines.;
                           ESP=Especifica cu ntas unidades del art¡culo est n asignadas como componentes de pedidos de producci¢n, es decir, est n incluidas en l¡neas de pedido de producci¢n pendientes.];
                ApplicationArea=#Advanced;
                SourceExpr="Qty. on Component Lines";
                Importance=Additional }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are allocated to sales orders, meaning listed on outstanding sales orders lines.;
                           ESP=Especifica cu ntas unidades del art¡culo est n asignadas a pedidos de venta, es decir, est n incluidas en l¡neas de pedidos de venta pendientes.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Qty. on Sales Order" }

    { 189 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are allocated to service orders, meaning listed on outstanding service order lines.;
                           ESP=Especifica cu ntas unidades del art¡culo est n asignadas a pedidos de servicio, es decir, est n incluidas en l¡neas de pedidos de servicio pendientes.];
                ApplicationArea=#Service;
                SourceExpr="Qty. on Service Order";
                Importance=Additional }

    { 152 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are allocated to jobs, meaning listed on outstanding job planning lines.;
                           ESP=Especifica cu ntas unidades del art¡culo est n asignadas a proyectos, es decir, est n incluidas en l¡neas de planificaci¢n de proyectos pendientes.];
                ApplicationArea=#Jobs;
                SourceExpr="Qty. on Job Order";
                Importance=Additional }

    { 7   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are allocated to assembly orders, which is how many are listed on outstanding assembly order headers.;
                           ESP=Especifica cu ntas unidades del art¡culo est n asignadas a pedidos de ensamblado, es decir, cu ntas est n incluidas en encabezados de pedidos de ensamblado pendientes.];
                ApplicationArea=#Assembly;
                SourceExpr="Qty. on Assembly Order" }

    { 9   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are allocated as assembly components, which means how many are listed on outstanding assembly order lines.;
                           ESP=Especifica cu ntas unidades del art¡culo est n asignadas como componentes del ensamblado, es decir, cu ntas est n incluidas en l¡neas de pedidos de ensamblado pendientes.];
                ApplicationArea=#Assembly;
                SourceExpr="Qty. on Asm. Component" }

    { 113 ;2   ;Field     ;
                Name=StockoutWarningDefaultYes;
                CaptionML=[ENU=Stockout Warning;
                           ESP=Advertencia falta stock];
                ToolTipML=[ENU=Specifies if a warning is displayed when you enter a quantity on a sales document that brings the item's inventory below zero.;
                           ESP=Especifica si se muestra una advertencia al indicar una cantidad en un documento de venta que ponga el inventario del producto por debajo de cero.];
                OptionCaptionML=[ENU=Default (Yes),No,Yes;
                                 ESP=Predeterminado (S¡),No,S¡];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Stockout Warning";
                Visible=ShowStockoutWarningDefaultYes;
                Editable=IsInventoriable }

    { 115 ;2   ;Field     ;
                Name=StockoutWarningDefaultNo;
                CaptionML=[ENU=Stockout Warning;
                           ESP=Advertencia falta stock];
                ToolTipML=[ENU=Specifies if a warning is displayed when you enter a quantity on a sales document that brings the item's inventory below zero.;
                           ESP=Especifica si se muestra una advertencia al indicar una cantidad en un documento de venta que ponga el inventario del producto por debajo de cero.];
                OptionCaptionML=[ENU=Default (No),No,Yes;
                                 ESP=Predeterminado (No),No,S¡];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Stockout Warning";
                Visible=ShowStockoutWarningDefaultNo }

    { 120 ;2   ;Field     ;
                Name=PreventNegInventoryDefaultYes;
                CaptionML=[ENU=Prevent Negative Inventory;
                           ESP=Evitar inventario negativo];
                ToolTipML=[ENU=Specifies if you can post a transaction that will bring the item's inventory below zero.;
                           ESP=Especifica si se puede registrar una transacci¢n que lleve el inventario del producto por debajo de cero.];
                OptionCaptionML=[ENU=Default (Yes),No,Yes;
                                 ESP=Predeterminado (S¡),No,S¡];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Prevent Negative Inventory";
                Importance=Additional;
                Visible=ShowPreventNegInventoryDefaultYes }

    { 130 ;2   ;Field     ;
                Name=PreventNegInventoryDefaultNo;
                CaptionML=[ENU=Prevent Negative Inventory;
                           ESP=Evitar inventario negativo];
                ToolTipML=[ENU=Specifies if you can post a transaction that will bring the item's inventory below zero.;
                           ESP=Especifica si se puede registrar una transacci¢n que lleve el inventario del producto por debajo de cero.];
                OptionCaptionML=[ENU=Default (No),No,Yes;
                                 ESP=Predeterminado (No),No,S¡];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Prevent Negative Inventory";
                Importance=Additional;
                Visible=ShowPreventNegInventoryDefaultNo }

    { 196 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net weight of the item.;
                           ESP=Especifica el peso neto del producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Net Weight";
                Importance=Additional }

    { 235 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the gross weight of the item.;
                           ESP=Especifica el peso bruto del producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Gross Weight";
                Importance=Additional }

    { 1170170010;2;Field  ;
                SourceExpr=Grado }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the volume of one unit of the item.;
                           ESP=Especifica el volumen de una unidad del art¡culo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit Volume" }

    { 169 ;1   ;Group     ;
                Name=Costs & Posting;
                CaptionML=[ENU=Costs & Posting;
                           ESP=Costes y registro];
                GroupType=Group }

    { 167 ;2   ;Group     ;
                Name=Cost Details;
                CaptionML=[ENU=Cost Details;
                           ESP=Detalles del coste];
                GroupType=Group }

    { 24  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies how the item's cost flow is recorded and whether an actual or budgeted value is capitalized and used in the cost calculation.;
                           ESP=Especifica c¢mo se registra el flujo de coste del producto y si un valor real o presupuestado se capitaliza y utiliza en el c lculo del coste.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Costing Method";
                OnValidate=BEGIN
                             EnableCostingControls;
                           END;
                            }

    { 28  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the unit cost that is used as an estimation to be adjusted with variances later. It is typically used in assembly and production where costs can vary.;
                           ESP=Especifica el coste unitario que se usa como estimaci¢n y que se ajustar  con desviaciones m s adelante. Normalmente se utiliza en ensamblado y producci¢n donde los costes pueden variar.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Standard Cost";
                Enabled=StandardCostEnable;
                OnDrillDown=VAR
                              ShowAvgCalcItem@1000 : Codeunit 5803;
                            BEGIN
                              ShowAvgCalcItem.DrillDownAvgCostAdjmtPoint(Rec)
                            END;
                             }

    { 30  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the cost of one unit of the item or resource on the line.;
                           ESP=Especifica el coste de una unidad del producto o recurso en la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit Cost";
                Importance=Promoted;
                Enabled=UnitCostEnable;
                Editable=UnitCostEditable;
                OnDrillDown=VAR
                              ShowAvgCalcItem@1000 : Codeunit 5803;
                            BEGIN
                              ShowAvgCalcItem.DrillDownAvgCostAdjmtPoint(Rec)
                            END;
                             }

    { 155 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the percentage of the item's last purchase cost that includes indirect costs, such as freight that is associated with the purchase of the item.;
                           ESP=Especifica el porcentaje del £ltimo coste de compra del art¡culo, que incluye los costes indirectos, como el flete asociado con la compra del art¡culo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Indirect Cost %";
                Importance=Additional;
                Enabled=IsInventoriable }

    { 32  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the most recent direct unit cost of the item.;
                           ESP=Especifica el coste unitario directo m s reciente del producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Last Direct Cost";
                Importance=Additional }

    { 207 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item in inventory have been invoiced.;
                           ESP=Especifica cu ntas unidades del art¡culo en inventario se han facturado.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Net Invoiced Qty." }

    { 238 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies whether the item's unit cost has been adjusted, either automatically or manually.;
                           ESP=Especifica si el coste unitario del producto se ha ajustado autom tica o manualmente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cost is Adjusted" }

    { 26  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies that all the inventory costs for this item have been posted to the general ledger.;
                           ESP=Especifica que todos los costes de inventario para este producto se han registrado en la contabilidad general.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cost is Posted to G/L";
                Importance=Additional }

    { 211 ;3   ;Field     ;
                CaptionML=[ENU=Special Purch. Prices & Discounts;
                           ESP=Precios de compra y descuentos especiales];
                ToolTipML=[ENU=Specifies special purchase prices and line discounts for the item.;
                           ESP=Especifica precios de compra especiales y descuentos de l¡nea para el producto.];
                ApplicationArea=#Suite;
                SourceExpr=SpecialPurchPricesAndDiscountsTxt;
                Editable=FALSE;
                OnDrillDown=VAR
                              PurchasePrice@1001 : Record 7012;
                              PurchaseLineDiscount@1002 : Record 7014;
                              PurchasesPriceAndLineDisc@1000 : Page 1346;
                            BEGIN
                              IF SpecialPurchPricesAndDiscountsTxt = ViewExistingTxt THEN BEGIN
                                PurchasesPriceAndLineDisc.LoadItem(Rec);
                                PurchasesPriceAndLineDisc.RUNMODAL;
                                EXIT;
                              END;

                              CASE STRMENU(STRSUBSTNO('%1,%2',CreateNewSpecialPriceTxt,CreateNewSpecialDiscountTxt),1,'') OF
                                1:
                                  BEGIN
                                    PurchasePrice.SETRANGE("Item No.","No.");
                                    PAGE.RUNMODAL(PAGE::"Purchase Prices",PurchasePrice);
                                  END;
                                2:
                                  BEGIN
                                    PurchaseLineDiscount.SETRANGE("Item No.","No.");
                                    PAGE.RUNMODAL(PAGE::"Purchase Line Discounts",PurchaseLineDiscount);
                                  END;
                              END;

                              UpdateSpecialPricesAndDiscountsTxt;
                            END;
                             }

    { 176 ;2   ;Group     ;
                Name=Posting Details;
                CaptionML=[ENU=Posting Details;
                           ESP=Detalles del registro];
                GroupType=Group }

    { 95  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the item's product type to link transactions made for this item with the appropriate general ledger account according to the general posting setup.;
                           ESP=Especifica el tipo de producto del art¡culo para vincular las transacciones realizadas para este art¡culo con la cuenta de contabilidad general correspondiente seg£n la configuraci¢n de registro general.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Gen. Prod. Posting Group";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 66  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT specification of the involved item or resource to link transactions made for this record with the appropriate general ledger account according to the VAT posting setup.;
                           ESP=Indica la especificaci¢n de IVA del elemento o el recurso relacionado para vincular las transacciones realizadas para este registro con la cuenta de contabilidad general correspondiente de acuerdo con la configuraci¢n de registro de IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Prod. Posting Group";
                Importance=Additional;
                ShowMandatory=TRUE }

    { 40  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies links between business transactions made for the item and an inventory account in the general ledger, to group amounts for that item type.;
                           ESP=Especifica los v¡nculos entre las transacciones empresariales realizadas para este art¡culo y una cuenta de inventario en la contabilidad general, con el fin de agrupar los importes de ese tipo de art¡culo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Inventory Posting Group";
                Importance=Promoted;
                Editable=IsInventoriable;
                ShowMandatory=IsInventoriable }

    { 136 ;3   ;Field     ;
                CaptionML=[ENU=Default Deferral Template;
                           ESP=Plantilla de fraccionamiento predeterminada];
                ToolTipML=[ENU=Specifies how revenue or expenses for the item are deferred to other accounting periods by default.;
                           ESP=Especifica c¢mo se fraccionan los ingresos o los gastos del producto en otros per¡odos contables de manera predeterminada.];
                ApplicationArea=#Suite;
                SourceExpr="Default Deferral Template Code" }

    { 1170000002;3;Field  ;
                SourceExpr="IVA desglosado" }

    { 177 ;2   ;Group     ;
                Name=ForeignTrade;
                CaptionML=[ENU=Foreign Trade;
                           ESP=Comercio exterior];
                GroupType=Group }

    { 62  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies a code for the item's tariff number.;
                           ESP=Especifica un c¢digo para el n£mero de tarifa del producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Tariff No." }

    { 93  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies a code for the country/region where the item was produced or processed.;
                           ESP=Especifica el c¢digo del pa¡s o la regi¢n donde se fabric¢ o elabor¢ el producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Country/Region of Origin Code";
                Importance=Additional }

    { 1905885101;1;Group  ;
                Name=Prices & Sales;
                CaptionML=[ENU=Prices & Sales;
                           ESP=Precios y ventas];
                GroupType=Group }

    { 38  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the price of one unit of the item or resource. You can enter a price manually or have it entered according to the Price/Profit Calculation field on the related card.;
                           ESP=Especifica el precio de una unidad del producto o recurso. Puede introducir un precio manualmente o hacer que se introduzca bas ndose en el campo C lculo precio/bf§ bruto en la ficha relacionada.];
                ApplicationArea=#Basic,#Suite,#Invoicing;
                SourceExpr="Unit Price";
                Importance=Promoted;
                Editable=PriceEditable }

    { 173 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit price excluding VAT.;
                           ESP=Especifica el precio unitario sin IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CalcUnitPriceExclVAT;
                CaptionClass='2,0,' + FIELDCAPTION("Unit Price");
                Importance=Additional }

    { 175 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the Unit Price and Line Amount fields on sales document lines for this item should be shown with or without VAT.;
                           ESP=Especifica si los campos Precio venta e Importe l¡nea en las l¡neas de documento de venta para este producto deben mostrarse con o sin IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Price Includes VAT";
                Importance=Additional;
                OnValidate=BEGIN
                             IF "Price Includes VAT" = xRec."Price Includes VAT" THEN
                               EXIT;
                           END;
                            }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the relationship between the Unit Cost, Unit Price, and Profit Percentage fields associated with this item.;
                           ESP=Especifica la relaci¢n entre los campos Coste unitario, Precio venta y Porcentaje de beneficio asociados con este producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Price/Profit Calculation";
                Importance=Additional;
                OnValidate=BEGIN
                             EnableControls;
                           END;
                            }

    { 181 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the profit margin that you want to sell the item at. You can enter a profit percentage manually or have it entered according to the Price/Profit Calculation field;
                           ESP=Especifica el margen de beneficio al que se desea vender el producto. Se puede especificar un porcentaje de beneficio manualmente o hacer que se especifique bas ndose en el campo C lculo precio/bf§ bruto.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=2:2;
                SourceExpr="Profit %";
                Editable=ProfitEditable }

    { 36  ;2   ;Field     ;
                CaptionML=[ENU=Special Sales Prices & Discounts;
                           ESP=Precios de venta y descuentos especiales];
                ToolTipML=[ENU=Specifies special prices and line discounts for the item.;
                           ESP=Especifica precios especiales y descuentos de l¡nea para el producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=SpecialPricesAndDiscountsTxt;
                Editable=FALSE;
                OnDrillDown=VAR
                              SalesPrice@1001 : Record 7002;
                              SalesLineDiscount@1002 : Record 7004;
                              SalesPriceAndLineDiscounts@1000 : Page 1345;
                            BEGIN
                              IF SpecialPricesAndDiscountsTxt = ViewExistingTxt THEN BEGIN
                                SalesPriceAndLineDiscounts.InitPage(TRUE);
                                SalesPriceAndLineDiscounts.LoadItem(Rec);
                                SalesPriceAndLineDiscounts.RUNMODAL;
                                EXIT;
                              END;

                              CASE STRMENU(STRSUBSTNO('%1,%2',CreateNewSpecialPriceTxt,CreateNewSpecialDiscountTxt),1,'') OF
                                1:
                                  BEGIN
                                    SalesPrice.SETRANGE("Item No.","No.");
                                    PAGE.RUNMODAL(PAGE::"Sales Prices",SalesPrice);
                                  END;
                                2:
                                  BEGIN
                                    SalesLineDiscount.SETRANGE(Type,SalesLineDiscount.Type::Item);
                                    SalesLineDiscount.SETRANGE(Code,"No.");
                                    PAGE.RUNMODAL(PAGE::"Sales Line Discounts",SalesLineDiscount);
                                  END;
                              END;

                              UpdateSpecialPricesAndDiscountsTxt;
                            END;
                             }

    { 44  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the item should be included in the calculation of an invoice discount on documents where the item is traded.;
                           ESP=Especifica si el producto debe incluirse en el c lculo de un descuento en factura en los documentos en los que se comercializa el producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Invoice Disc.";
                Importance=Additional }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies an item group code that can be used as a criterion to grant a discount when the item is sold to a certain customer.;
                           ESP=Especifica un c¢digo de grupo de productos que puede utilizarse como criterio para conceder un descuento cuando el producto se vende a un determinado cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Item Disc. Group";
                Importance=Additional }

    { 73  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit of measure code used when you sell the item.;
                           ESP=Especifica el c¢digo de unidad de medida que se usa al vender el art¡culo.];
                ApplicationArea=#Suite;
                SourceExpr="Sales Unit of Measure" }

    { 214 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that the item cannot be entered on sales documents, except return orders and credit memos, and journals.;
                           ESP=Especifica que el producto no se puede indicar en documentos de venta, excepto devoluciones y abonos, y diarios.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sales Blocked" }

    { 19  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the ID of a user who is working in the Application Worksheet window.;
                           ESP=Especifica el identificador del usuario que est‚ trabajando en la ventana Hoja liquidaci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Application Wksh. User ID";
                Importance=Additional;
                Visible=FALSE }

    { 1170170000;2;Field  ;
                SourceExpr="Grupo descuento promocional" }

    { 1170170001;2;Field  ;
                SourceExpr="C¢d. formato ecoembes" }

    { 1170170002;2;Field  ;
                SourceExpr="Precio punto verde" }

    { 1170170003;2;Field  ;
                SourceExpr="C¢d. grupo IIEE producto" }

    { 151 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT business posting group for customers for whom you want the sales price including VAT to apply.;
                           ESP=Especifica el grupo de registro de IVA de negocio para los clientes a los que desea aplicar el precio de venta (que incluye el IVA).];
                ApplicationArea=#Advanced;
                SourceExpr="VAT Bus. Posting Gr. (Price)" }

    { 1170170059;2;Field  ;
                SourceExpr="C¢d. grupo comisi¢n" }

    { 1170170068;2;Field  ;
                SourceExpr="Precio coste tarifa" }

    { 1904731401;1;Group  ;
                CaptionML=[ENU=Replenishment;
                           ESP=Reposici¢n] }

    { 133 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of supply order created by the planning system when the item needs to be replenished.;
                           ESP=Especifica el tipo de pedido de suministro creado por el sistema de planificaci¢n cuando se debe reabastecer el producto.];
                ApplicationArea=#Assembly,#Planning;
                SourceExpr="Replenishment System";
                Importance=Promoted }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a date formula for the amount of time it takes to replenish the item.;
                           ESP=Especifica una f¢rmula de fecha con la cantidad de tiempo que se tarda en reponer el producto.];
                ApplicationArea=#Assembly,#Planning;
                SourceExpr="Lead Time Calculation" }

    { 229 ;2   ;Group     ;
                CaptionML=[ENU=Purchase;
                           ESP=Compra] }

    { 50  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the vendor code of who supplies this item by default.;
                           ESP=Especifica el c¢digo del proveedor que suministra este producto de forma predeterminada.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Vendor No." }

    { 52  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the number that the vendor uses for this item.;
                           ESP=Especifica el n£mero que utiliza el proveedor para este producto.];
                ApplicationArea=#Planning;
                SourceExpr="Vendor Item No." }

    { 99  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the unit of measure code used when you purchase the item.;
                           ESP=Especifica el c¢digo de unidad de medida que se usa al comprar el art¡culo.];
                ApplicationArea=#Planning;
                SourceExpr="Purch. Unit of Measure" }

    { 1170170004;3;Field  ;
                SourceExpr="C¢d. ud. medida precio" }

    { 1170170005;3;Field  ;
                SourceExpr="C¢d. ud. medida entrada" }

    { 216 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies that the item cannot be entered on purchase documents, except return orders and credit memos, and journals.;
                           ESP=Especifica que el producto no se puede indicar en documentos de compra, excepto devoluciones y abonos, y diarios.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Purchasing Blocked" }

    { 230 ;2   ;Group     ;
                CaptionML=[ENU=Production;
                           ESP=Producci¢n] }

    { 227 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies if additional orders for any related components are calculated.;
                           ESP=Especifica si se calcular n pedidos adicionales para componentes relacionados.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Manufacturing Policy" }

    { 137 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the production routing that the item is used in.;
                           ESP=Especifica el n£mero de la ruta de producci¢n en la que se usa el producto.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Routing No." }

    { 139 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the production BOM that the item represents.;
                           ESP=Especifica el n£mero de la L.M. de producci¢n que representa el producto.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Production BOM No." }

    { 141 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies how calculated consumption quantities are rounded when entered on consumption journal lines.;
                           ESP=Especifica c¢mo se redondean las cantidades calculadas de consumo cuando se introducen en las l¡neas del diario de consumo.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Rounding Precision" }

    { 143 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies how consumption of the item (component) is calculated and handled in production processes. Manual: Enter and post consumption in the consumption journal manually. Forward: Automatically posts consumption according to the production order component lines when the first operation starts. Backward: Automatically calculates and posts consumption according to the production order component lines when the production order is finished. Pick + Forward / Pick + Backward: Variations with warehousing.;
                           ESP=Especifica c¢mo se calcula y controla en los procesos de producci¢n el consumo del art¡culo (componente). Manual: permite especificar y registrar el consumo manualmente en el diario de consumo. Adelante: registra autom ticamente el consumo seg£n las l¡neas de componente del pedido de producci¢n cuando se inicia la primera operaci¢n. Atr s: calcula y registra el consumo autom ticamente en funci¢n de las l¡neas de componente del pedido producci¢n cuando finaliza el pedido de producci¢n. Picking + Adelante/Picking + Atr s: variaciones con almacenamiento.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Flushing Method" }

    { 153 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the item's indirect cost as an absolute amount.;
                           ESP=Especifica el coste indirecto del producto como una cantidad absoluta.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Overhead Rate";
                Importance=Additional;
                Enabled=IsInventoriable }

    { 118 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the percentage of the item that you expect to be scrapped in the production process.;
                           ESP=Especifica el porcentaje del producto que prev‚ que se va a rechazar en el proceso de producci¢n.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Scrap %" }

    { 145 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item are processed in one production operation by default.;
                           ESP=Especifica cu ntas unidades del producto se procesan en una operaci¢n de producci¢n de forma predeterminada.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Lot Size" }

    { 13  ;2   ;Group     ;
                CaptionML=[ENU=Assembly;
                           ESP=Ensamblado];
                GroupType=Group }

    { 15  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies which default order flow is used to supply this assembly item.;
                           ESP=Especifica el flujo del pedido predeterminado que se utiliza para suministrar este elemento de ensamblado.];
                ApplicationArea=#Assembly;
                SourceExpr="Assembly Policy" }

    { 1170170042;3;Field  ;
                SourceExpr="C¢d. almac‚n consumo" }

    { 8   ;3   ;Field     ;
                AccessByPermission=TableData 90=R;
                ToolTipML=[ENU=Specifies if the item is an assembly BOM.;
                           ESP=Especifica si el art¡culo es una L.M. de ensamblado.];
                ApplicationArea=#Assembly;
                SourceExpr="Assembly BOM";
                OnDrillDown=VAR
                              BOMComponent@1000 : Record 90;
                            BEGIN
                              COMMIT;
                              BOMComponent.SETRANGE("Parent Item No.","No.");
                              PAGE.RUN(PAGE::"Assembly BOM",BOMComponent);
                              CurrPage.UPDATE;
                            END;
                             }

    { 1901343701;1;Group  ;
                CaptionML=[ENU=Planning;
                           ESP=Planificaci¢n] }

    { 125 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the reordering policy.;
                           ESP=Especifica la directiva de reaprovisionamiento.];
                ApplicationArea=#Planning;
                SourceExpr="Reordering Policy";
                Importance=Promoted;
                OnValidate=BEGIN
                             EnablePlanningControls
                           END;
                            }

    { 59  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if and how the item will be reserved. Never: It is not possible to reserve the item. Optional: You can reserve the item manually. Always: The item is automatically reserved from demand, such as sales orders, against inventory, purchase orders, assembly orders, and production orders.;
                           ESP=Especifica si el producto se reservar  y c¢mo lo har . Nunca: no es posible reservar el producto. Opcional: puede reservar el producto manualmente. Siempre: el producto se reserva autom ticamente a partir de la demanda, por ejemplo, pedidos de venta, seg£n inventario, pedidos de compra, pedidos de ensamblado y ¢rdenes de producci¢n.];
                ApplicationArea=#Reservation;
                SourceExpr=Reserve;
                Importance=Additional }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if and how order tracking entries are created and maintained between supply and its corresponding demand.;
                           ESP=Especifica si los movimientos de seguimiento de pedidos se crean y se mantienen entre el aprovisionamiento y su demanda correspondiente, y c¢mo se deben crear y mantener.];
                ApplicationArea=#Planning;
                SourceExpr="Order Tracking Policy";
                Importance=Promoted }

    { 57  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that a stockkeeping unit exists for this item.;
                           ESP=Especifica que existe una unidad de almacenamiento para este producto.];
                ApplicationArea=#Planning;
                SourceExpr="Stockkeeping Unit Exists" }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a period of time during which you do not want the planning system to propose to reschedule existing supply orders.;
                           ESP=Especifica un periodo de tiempo durante el cual no desea que el sistema de planificaci¢n proponga volver a programar pedidos de suministro existentes.];
                ApplicationArea=#Planning;
                SourceExpr="Dampener Period";
                Importance=Additional;
                Enabled=DampenerPeriodEnable }

    { 55  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a dampener quantity to block insignificant change suggestions for an existing supply, if the change quantity is lower than the dampener quantity.;
                           ESP=Especifica una cantidad de amortiguaci¢n para bloquear propuestas de cambios insignificantes para un suministro existente si la cantidad del cambio es menor que la cantidad de amortiguaci¢n.];
                ApplicationArea=#Planning;
                SourceExpr="Dampener Quantity";
                Importance=Additional;
                Enabled=DampenerQtyEnable }

    { 53  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the item is included in availability calculations to promise a shipment date for its parent item.;
                           ESP=Especifica si el producto se incluye en los c lculos de disponibilidad para comprometerse con una fecha de env¡o para su producto principal.];
                ApplicationArea=#OrderPromising;
                SourceExpr=Critical }

    { 51  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a date formula to indicate a safety lead time that can be used as a buffer period for production and other delays.;
                           ESP=Especifica una f¢rmula de fecha para indicar el plazo de seguridad que se puede utilizar como periodo de margen para la producci¢n y otros retrasos.];
                ApplicationArea=#Planning;
                SourceExpr="Safety Lead Time";
                Enabled=SafetyLeadTimeEnable }

    { 49  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a quantity of stock to have in inventory to protect against supply-and-demand fluctuations during replenishment lead time.;
                           ESP=Especifica la cantidad de stock que desea tener en inventario para protegerse de las fluctuaciones en la oferta y la demanda durante el plazo de reposici¢n.];
                ApplicationArea=#Planning;
                SourceExpr="Safety Stock Quantity";
                Enabled=SafetyStockQtyEnable }

    { 1170170055;2;Group  ;
                CaptionML=[ENU=Treatments;
                           ESP=Fitosanitarios];
                GroupType=Group }

    { 1170170046;3;Field  ;
                SourceExpr="Dosis m¡nima por hect rea" }

    { 1170170049;3;Field  ;
                SourceExpr="Dosis m xima por hect rea" }

    { 1170170050;3;Field  ;
                SourceExpr="Plazo de seguridad fitosanita" }

    { 1170170051;3;Field  ;
                SourceExpr=Dosis }

    { 1170170052;3;Field  ;
                SourceExpr="Agua parcelas";
                Visible=FALSE }

    { 1170170060;3;Field  ;
                SourceExpr="No. MAGRAMA" }

    { 43  ;2   ;Group     ;
                CaptionML=[ENU=Lot-for-Lot Parameters;
                           ESP=Par metros de lote a lote];
                GroupType=Group }

    { 45  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies that the inventory quantity is included in the projected available balance when replenishment orders are calculated.;
                           ESP=Especifica que la cantidad de inventario se incluye en el saldo disponible proyectado cuando se calculan pedidos de reposici¢n.];
                ApplicationArea=#Planning;
                SourceExpr="Include Inventory";
                Enabled=IncludeInventoryEnable;
                OnValidate=BEGIN
                             EnablePlanningControls
                           END;
                            }

    { 27  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies a period in which multiple demands are accumulated into one supply order when you use the Lot-for-Lot reordering policy.;
                           ESP=Especifica un periodo en el que las demandas m£ltiples se acumulan en un solo pedido de suministro cuando se usa la directiva de reaprovisionamiento Lote a lote.];
                ApplicationArea=#Planning;
                SourceExpr="Lot Accumulation Period";
                Enabled=LotAccumulationPeriodEnable }

    { 41  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies a period within which any suggestion to change a supply date always consists of a Reschedule action and never a Cancel + New action.;
                           ESP=Especifica un periodo en el que cualquier sugerencia para modificar una fecha de suministro consiste siempre en una acci¢n Volver a programar y nunca en una acci¢n Cancelar + Nuevo.];
                ApplicationArea=#Planning;
                SourceExpr="Rescheduling Period";
                Enabled=ReschedulingPeriodEnable }

    { 39  ;2   ;Group     ;
                CaptionML=[ENU=Reorder-Point Parameters;
                           ESP=Par metros de punto de pedido];
                GroupType=Group }

    { 64  ;3   ;Group     ;
                GroupType=Group }

    { 37  ;4   ;Field     ;
                ToolTipML=[ENU=Specifies a stock quantity that sets the inventory below the level that you must replenish the item.;
                           ESP=Especifica una cantidad de stock que establece la cantidad de inventario por debajo del nivel en el que se debe reponer el producto.];
                ApplicationArea=#Planning;
                SourceExpr="Reorder Point";
                Enabled=ReorderPointEnable }

    { 35  ;4   ;Field     ;
                ToolTipML=[ENU=Specifies a standard lot size quantity to be used for all order proposals.;
                           ESP=Especifica la cantidad de tama¤o de lote est ndar que se va a utilizar en todas las propuestas de pedido.];
                ApplicationArea=#Planning;
                SourceExpr="Reorder Quantity";
                Enabled=ReorderQtyEnable }

    { 33  ;4   ;Field     ;
                ToolTipML=[ENU=Specifies a quantity that you want to use as a maximum inventory level.;
                           ESP=Especifica la cantidad que desea utilizar como nivel de inventario m ximo.];
                ApplicationArea=#Planning;
                SourceExpr="Maximum Inventory";
                Enabled=MaximumInventoryEnable }

    { 31  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies a quantity you allow projected inventory to exceed the reorder point, before the system suggests to decrease supply orders.;
                           ESP=Especifica una cantidad por la que permitir  que las existencias estimadas excedan el punto de pedido antes de que el sistema sugiera disminuir los pedidos de suministro.];
                ApplicationArea=#Planning;
                SourceExpr="Overflow Level";
                Importance=Additional;
                Enabled=OverflowLevelEnable }

    { 29  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies a time period that defines the recurring planning horizon used with Fixed Reorder Qty. or Maximum Qty. reordering policies.;
                           ESP=Especifica un periodo que define el horizonte de planificaci¢n peri¢dico utilizado con las directivas de reaprovisionamiento Cant. fija reaprov. o Cant. m xima.];
                ApplicationArea=#Planning;
                SourceExpr="Time Bucket";
                Importance=Additional;
                Enabled=TimeBucketEnable }

    { 63  ;2   ;Group     ;
                CaptionML=[ENU=Order Modifiers;
                           ESP=Modificadores de pedido];
                GroupType=Group }

    { 61  ;3   ;Group     ;
                GroupType=Group }

    { 25  ;4   ;Field     ;
                ToolTipML=[ENU=Specifies a minimum allowable quantity for an item order proposal.;
                           ESP=Especifica una cantidad m¡nima permitida en la propuesta de un pedido de producto.];
                ApplicationArea=#Planning;
                SourceExpr="Minimum Order Quantity";
                Enabled=MinimumOrderQtyEnable }

    { 23  ;4   ;Field     ;
                ToolTipML=[ENU=Specifies a maximum allowable quantity for an item order proposal.;
                           ESP=Especifica una cantidad m xima permitida en la propuesta de un pedido de producto.];
                ApplicationArea=#Planning;
                SourceExpr="Maximum Order Quantity";
                Enabled=MaximumOrderQtyEnable }

    { 21  ;4   ;Field     ;
                ToolTipML=[ENU=Specifies a parameter used by the planning system to modify the quantity of planned supply orders.;
                           ESP=Especifica un par metro utilizado por el sistema de planificaci¢n para modificar la cantidad de pedidos de suministro planificados.];
                ApplicationArea=#Planning;
                SourceExpr="Order Multiple";
                Enabled=OrderMultipleEnable }

    { 1904830201;1;Group  ;
                CaptionML=[ENU=Item Tracking;
                           ESP=Seguim. prod.] }

    { 225 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how serial or lot numbers assigned to the item are tracked in the supply chain.;
                           ESP=Especifica c¢mo se realiza el seguimiento de los n£meros de serie o de lote asignados al producto en la cadena de suministro.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Item Tracking Code";
                Importance=Promoted }

    { 210 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a number series code to assign consecutive serial numbers to items produced.;
                           ESP=Especifica un c¢digo de serie num‚rica para asignar n£meros de serie consecutivos a los productos fabricados.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Serial Nos." }

    { 72  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number series code that will be used when assigning lot numbers.;
                           ESP=Especifica el c¢digo de serie num‚rica que se usar  al asignar n£meros de lote.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Lot Nos." }

    { 71  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the formula for calculating the expiration date on the item tracking line.;
                           ESP=Especifica la f¢rmula para calcular la fecha de caducidad en la l¡nea de seguimiento de art¡culos.];
                ApplicationArea=#ItemTracking;
                SourceExpr="Expiration Calculation" }

    { 1907509201;1;Group  ;
                CaptionML=[ENU=Warehouse;
                           ESP=Almac‚n] }

    { 215 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the warehouse class code for the item.;
                           ESP=Especifica el c¢digo de clase de almac‚n para el producto.];
                ApplicationArea=#Warehouse;
                SourceExpr="Warehouse Class Code" }

    { 213 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the equipment that warehouse employees must use when handling the item.;
                           ESP=Especifica el c¢digo del equipo que deben utilizar los empleados del almac‚n al manipular el art¡culo.];
                ApplicationArea=#Warehouse;
                SourceExpr="Special Equipment Code";
                Importance=Additional }

    { 206 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the put-away template by which the program determines the most appropriate zone and bin for storage of the item after receipt.;
                           ESP=Especifica el c¢digo de la plantilla de ubicaci¢n mediante la cual el programa determina la zona y la ubicaci¢n m s apropiadas para almacenar el art¡culo despu‚s de su recepci¢n.];
                ApplicationArea=#Warehouse;
                SourceExpr="Put-away Template Code" }

    { 204 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the item unit of measure in which the program will put the item away.;
                           ESP=Especifica el c¢digo de la unidad de medida del art¡culo que utilizar  el programa para ubicar el art¡culo.];
                ApplicationArea=#Warehouse;
                SourceExpr="Put-away Unit of Measure Code";
                Importance=Promoted }

    { 202 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the counting period that indicates how often you want to count the item in a physical inventory.;
                           ESP=Especifica el c¢digo del periodo de recuento que indica la frecuencia deseada para contar el art¡culo en un inventario f¡sico.];
                ApplicationArea=#Warehouse;
                SourceExpr="Phys Invt Counting Period Code";
                Importance=Promoted }

    { 200 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date on which you last posted the results of a physical inventory for the item to the item ledger.;
                           ESP=Especifica la fecha en la que se registr¢ por £ltima vez el resultado de un inventario f¡sico del art¡culo en los movimientos de art¡culos.];
                ApplicationArea=#Warehouse;
                SourceExpr="Last Phys. Invt. Date" }

    { 198 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the last date on which you calculated the counting period. It is updated when you use the function Calculate Counting Period.;
                           ESP=Especifica la £ltima fecha en la que se calcul¢ el periodo de recuento. Se actualiza cuando se utiliza la funci¢n Calcular periodo recuento.];
                ApplicationArea=#Warehouse;
                SourceExpr="Last Counting Period Update" }

    { 194 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the starting date of the next counting period.;
                           ESP=Especifica la fecha de inicio del siguiente periodo de recuento.];
                ApplicationArea=#Warehouse;
                SourceExpr="Next Counting Start Date" }

    { 131 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the ending date of the next counting period.;
                           ESP=Especifica la fecha de finalizaci¢n del siguiente periodo de recuento.];
                ApplicationArea=#Warehouse;
                SourceExpr="Next Counting End Date" }

    { 192 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a unique code for the item in terms that are useful for automatic data capture.;
                           ESP=Especifica un c¢digo exclusivo del art¡culo, que resulta muy £til para la captura autom tica de datos.];
                ApplicationArea=#Advanced;
                SourceExpr="Identifier Code";
                Importance=Additional }

    { 208 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if this item can be cross-docked.;
                           ESP=Especifica si puede realizarse el tr nsito directo de este producto.];
                ApplicationArea=#Warehouse;
                SourceExpr="Use Cross-Docking";
                Importance=Additional }

    { 1170170008;1;Group  ;
                CaptionML=[ENU=Annex;
                           ESP=Anexos];
                GroupType=Group }

    { 1170170011;2;Field  ;
                SourceExpr="Incluir en anexo" }

    { 1170170012;2;Field  ;
                SourceExpr="Texto anexo" }

    { 1170170013;2;Field  ;
                SourceExpr="Tipo cantidad anexo" }

    { 1170170014;2;Field  ;
                SourceExpr="C¢d. grupo EMCS producto" }

    { 1170170041;2;Field  ;
                SourceExpr="C¢d. tipo cont. existencias" }

    { 1170170015;1;Group  ;
                CaptionML=[ENU=VinoTEC;
                           ESP=VinoTEC];
                GroupType=Group }

    { 1170170006;2;Field  ;
                SourceExpr="Tipo producto";
                Editable=FALSE }

    { 1170170016;2;Field  ;
                SourceExpr="C¢d. marca" }

    { 1170170017;2;Field  ;
                SourceExpr="C¢d. a¤ada" }

    { 1170170018;2;Field  ;
                SourceExpr="C¢d. formato" }

    { 1170170019;2;Field  ;
                SourceExpr="C¢d. color vino" }

    { 1170170020;2;Field  ;
                SourceExpr="C¢d. calificaci¢n" }

    { 1170170021;2;Field  ;
                SourceExpr="C¢d. formato botella" }

    { 1170170022;2;Field  ;
                SourceExpr="C¢d. formato caja" }

    { 1170170023;2;Field  ;
                SourceExpr="C¢d. denominaci¢n origen" }

    { 1170170024;2;Field  ;
                SourceExpr="Variante obligatoria" }

    { 1170170025;2;Field  ;
                Name=VolumenUnitario;
                SourceExpr="Unit Volume" }

    { 1170170026;2;Field  ;
                SourceExpr="C¢d. Modelo 521" }

    { 1170170027;2;Field  ;
                SourceExpr="C¢d. ecovidrio" }

    { 1170170028;2;Field  ;
                Name=Gross Weight2;
                SourceExpr="Gross Weight" }

    { 1170170029;2;Field  ;
                Name=Net Weight2;
                SourceExpr="Net Weight" }

    { 1170170030;2;Field  ;
                SourceExpr=Granel }

    { 1170170031;2;Field  ;
                SourceExpr=Subproducto }

    { 1170170032;2;Field  ;
                SourceExpr="Asume costes" }

    { 1170170033;2;Field  ;
                SourceExpr=Merma }

    { 1170170034;2;Field  ;
                SourceExpr="C¢d. gr fico trazabilidad" }

    { 1170170035;2;Field  ;
                SourceExpr="Envase vendimia" }

    { 1170170036;2;Field  ;
                SourceExpr="Producto compuesto" }

    { 1170170037;2;Field  ;
                SourceExpr="EAN 13" }

    { 1170170038;2;Field  ;
                SourceExpr="DUN 14" }

    { 1170170039;2;Field  ;
                SourceExpr="Preferente si EAN repetido" }

    { 1170000004;2;Field  ;
                SourceExpr="Con precinta" }

    { 1170000005;2;Field  ;
                SourceExpr="Precinta propia" }

    { 1170000006;2;Field  ;
                SourceExpr="C¢d. tipo precinta" }

    { 1170170079;1;Group  ;
                CaptionML=[ENU=EMCS;
                           ESP=EMCS];
                GroupType=Group }

    { 1170170066;2;Field  ;
                SourceExpr="Grado plato" }

    { 1170170065;2;Field  ;
                SourceExpr=Densidad }

    { 1170170064;2;Field  ;
                SourceExpr="C¢d. categor¡a vitivinicola" }

    { 1170170063;2;Field  ;
                SourceExpr="C¢d. zona vitivin¡cola" }

    { 1170170062;2;Field  ;
                SourceExpr="Vino granel DOP/IGP" }

    { 1170170061;2;Field  ;
                SourceExpr="C¢d. grupo certificado" }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 109 ;1   ;Part      ;
                Name=ItemPicture;
                CaptionML=[ENU=Picture;
                           ESP=Imagen];
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter),
                            Location Filter=FIELD(Location Filter),
                            Drop Shipment Filter=FIELD(Drop Shipment Filter),
                            Variant Filter=FIELD(Variant Filter);
                PagePartID=Page346;
                PartType=Page }

    { 1901275107;1;Part   ;
                Name=Attached Documents;
                CaptionML=[ENU=Attachments;
                           ESP=Datos adjuntos];
                ApplicationArea=#All;
                SubPageLink=Table ID=CONST(27),
                            No.=FIELD(No.);
                PagePartID=Page1174;
                PartType=Page }

    { 201 ;1   ;Part      ;
                Name=ItemAttributesFactbox;
                ApplicationArea=#Basic,#Suite;
                PagePartID=Page9110;
                PartType=Page }

    { 132 ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=Source Type=CONST(Item),
                            Source No.=FIELD(No.);
                PagePartID=Page875;
                Visible=SocialListeningVisible;
                PartType=Page }

    { 134 ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=Source Type=CONST(Item),
                            Source No.=FIELD(No.);
                PagePartID=Page876;
                Visible=SocialListeningSetupVisible;
                PartType=Page;
                UpdatePropagation=Both }

    { 162 ;1   ;Part      ;
                Name=WorkflowStatus;
                ApplicationArea=#Suite;
                PagePartID=Page1528;
                Visible=ShowWorkflowStatus;
                Enabled=FALSE;
                Editable=FALSE;
                PartType=Page;
                ShowFilter=No }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      ApplicationAreaMgmtFacade@1027 : Codeunit 9179;
      CalculateStdCost@1005 : Codeunit 5812;
      CRMIntegrationManagement@1030 : Codeunit 5330;
      ItemAvailFormsMgt@1000 : Codeunit 353;
      ApprovalsMgmt@1013 : Codeunit 1535;
      SkilledResourceList@1001 : Page 6023;
      IsFoundationEnabled@1028 : Boolean;
      ShowStockoutWarningDefaultYes@1006 : Boolean;
      ShowStockoutWarningDefaultNo@1004 : Boolean;
      ShowPreventNegInventoryDefaultYes@1003 : Boolean;
      ShowPreventNegInventoryDefaultNo@1002 : Boolean;
      TimeBucketEnable@8576 : Boolean INDATASET;
      SafetyLeadTimeEnable@3464 : Boolean INDATASET;
      SafetyStockQtyEnable@1045 : Boolean INDATASET;
      ReorderPointEnable@1559 : Boolean INDATASET;
      ReorderQtyEnable@7337 : Boolean INDATASET;
      MaximumInventoryEnable@3237 : Boolean INDATASET;
      MinimumOrderQtyEnable@5662 : Boolean INDATASET;
      MaximumOrderQtyEnable@1780 : Boolean INDATASET;
      OrderMultipleEnable@8166 : Boolean INDATASET;
      IncludeInventoryEnable@5357 : Boolean INDATASET;
      ReschedulingPeriodEnable@3577 : Boolean INDATASET;
      LotAccumulationPeriodEnable@3181 : Boolean INDATASET;
      DampenerPeriodEnable@9019 : Boolean INDATASET;
      DampenerQtyEnable@5625 : Boolean INDATASET;
      OverflowLevelEnable@7090 : Boolean INDATASET;
      StandardCostEnable@1224 : Boolean INDATASET;
      UnitCostEnable@8240 : Boolean INDATASET;
      SocialListeningSetupVisible@1008 : Boolean INDATASET;
      SocialListeningVisible@1007 : Boolean INDATASET;
      CRMIntegrationEnabled@1010 : Boolean;
      CRMIsCoupledToRecord@1009 : Boolean;
      OpenApprovalEntriesExistCurrUser@1012 : Boolean;
      OpenApprovalEntriesExist@1011 : Boolean;
      ShowWorkflowStatus@1014 : Boolean;
      UnitCostEditable@1022 : Boolean INDATASET;
      ProfitEditable@1017 : Boolean;
      PriceEditable@1018 : Boolean;
      SpecialPricesAndDiscountsTxt@1019 : Text;
      CreateNewTxt@1020 : TextConst 'ENU=Create New...;ESP=Crear nuevo...';
      ViewExistingTxt@1021 : TextConst 'ENU=View Existing Prices and Discounts...;ESP=Permite ver los descuentos y precios existentes...';
      CreateNewSpecialPriceTxt@1023 : TextConst 'ENU=Create New Special Price...;ESP=Crear nuevo precio especial...';
      CreateNewSpecialDiscountTxt@1024 : TextConst 'ENU=Create New Special Discount...;ESP=Crear nuevo descuento especial...';
      SpecialPurchPricesAndDiscountsTxt@1033 : Text;
      EnabledApprovalWorkflowsExist@1025 : Boolean;
      EventFilter@1026 : Text;
      NoFieldVisible@1016 : Boolean;
      DescriptionFieldVisible@1037 : Boolean;
      NewMode@1029 : Boolean;
      CanRequestApprovalForFlow@1032 : Boolean;
      CanCancelApprovalForFlow@1034 : Boolean;
      IsSaaS@1035 : Boolean;
      IsService@1015 : Boolean;
      IsNonInventoriable@1031 : Boolean;
      IsInventoriable@1036 : Boolean;

    LOCAL PROCEDURE EnableControls@6();
    VAR
      ItemLedgerEntry@1000 : Record 32;
      CRMIntegrationManagement@1001 : Codeunit 5330;
    BEGIN
      IsService := IsServiceType;
      IsNonInventoriable := IsNonInventoriableType;
      IsInventoriable := IsInventoriableType;

      IF Type = Type::Inventory THEN BEGIN
        ItemLedgerEntry.SETRANGE("Item No.","No.");
        UnitCostEditable := ItemLedgerEntry.ISEMPTY;
      END ELSE
        UnitCostEditable := TRUE;

      ProfitEditable := "Price/Profit Calculation" <> "Price/Profit Calculation"::"Profit=Price-Cost";
      PriceEditable := "Price/Profit Calculation" <> "Price/Profit Calculation"::"Price=Cost+Profit";

      EnablePlanningControls;
      EnableCostingControls;

      EnableShowStockOutWarning;

      SetSocialListeningFactboxVisibility;
      EnableShowShowEnforcePositivInventory;
      CRMIntegrationEnabled := CRMIntegrationManagement.IsCRMIntegrationEnabled;

      UpdateSpecialPricesAndDiscountsTxt;
    END;

    LOCAL PROCEDURE OnNewRec@16();
    VAR
      DocumentNoVisibility@1002 : Codeunit 1400;
    BEGIN
      IF GUIALLOWED THEN BEGIN
        EnableControls;
        IF "No." = '' THEN
          IF DocumentNoVisibility.ItemNoSeriesIsDefault THEN
            NewMode := TRUE;
      END;
    END;

    LOCAL PROCEDURE EnableShowStockOutWarning@4();
    VAR
      SalesSetup@1000 : Record 311;
    BEGIN
      IF IsNonInventoriableType THEN
        "Stockout Warning" := "Stockout Warning"::No;

      SalesSetup.GET;
      ShowStockoutWarningDefaultYes := SalesSetup."Stockout Warning";
      ShowStockoutWarningDefaultNo := NOT ShowStockoutWarningDefaultYes;

      EnableShowShowEnforcePositivInventory;
    END;

    LOCAL PROCEDURE InsertItemUnitOfMeasure@8();
    VAR
      ItemUnitOfMeasure@1000 : Record 5404;
    BEGIN
      IF "Base Unit of Measure" <> '' THEN BEGIN
        ItemUnitOfMeasure.INIT;
        ItemUnitOfMeasure."Item No." := "No.";
        ItemUnitOfMeasure.VALIDATE(Code,"Base Unit of Measure");
        ItemUnitOfMeasure."Qty. per Unit of Measure" := 1;
        ItemUnitOfMeasure.INSERT;
      END;
    END;

    LOCAL PROCEDURE EnableShowShowEnforcePositivInventory@2();
    VAR
      InventorySetup@1000 : Record 313;
    BEGIN
      InventorySetup.GET;
      ShowPreventNegInventoryDefaultYes := InventorySetup."Prevent Negative Inventory";
      ShowPreventNegInventoryDefaultNo := NOT ShowPreventNegInventoryDefaultYes;
    END;

    LOCAL PROCEDURE EnablePlanningControls@1();
    VAR
      PlanningGetParam@1000 : Codeunit 99000855;
      TimeBucketEnabled@1010 : Boolean;
      SafetyLeadTimeEnabled@1009 : Boolean;
      SafetyStockQtyEnabled@1008 : Boolean;
      ReorderPointEnabled@1007 : Boolean;
      ReorderQtyEnabled@1006 : Boolean;
      MaximumInventoryEnabled@1005 : Boolean;
      MinimumOrderQtyEnabled@1004 : Boolean;
      MaximumOrderQtyEnabled@1003 : Boolean;
      OrderMultipleEnabled@1002 : Boolean;
      IncludeInventoryEnabled@1001 : Boolean;
      ReschedulingPeriodEnabled@1015 : Boolean;
      LotAccumulationPeriodEnabled@1014 : Boolean;
      DampenerPeriodEnabled@1013 : Boolean;
      DampenerQtyEnabled@1012 : Boolean;
      OverflowLevelEnabled@1011 : Boolean;
    BEGIN
      PlanningGetParam.SetUpPlanningControls("Reordering Policy","Include Inventory",
        TimeBucketEnabled,SafetyLeadTimeEnabled,SafetyStockQtyEnabled,
        ReorderPointEnabled,ReorderQtyEnabled,MaximumInventoryEnabled,
        MinimumOrderQtyEnabled,MaximumOrderQtyEnabled,OrderMultipleEnabled,IncludeInventoryEnabled,
        ReschedulingPeriodEnabled,LotAccumulationPeriodEnabled,
        DampenerPeriodEnabled,DampenerQtyEnabled,OverflowLevelEnabled);

      TimeBucketEnable := TimeBucketEnabled;
      SafetyLeadTimeEnable := SafetyLeadTimeEnabled;
      SafetyStockQtyEnable := SafetyStockQtyEnabled;
      ReorderPointEnable := ReorderPointEnabled;
      ReorderQtyEnable := ReorderQtyEnabled;
      MaximumInventoryEnable := MaximumInventoryEnabled;
      MinimumOrderQtyEnable := MinimumOrderQtyEnabled;
      MaximumOrderQtyEnable := MaximumOrderQtyEnabled;
      OrderMultipleEnable := OrderMultipleEnabled;
      IncludeInventoryEnable := IncludeInventoryEnabled;
      ReschedulingPeriodEnable := ReschedulingPeriodEnabled;
      LotAccumulationPeriodEnable := LotAccumulationPeriodEnabled;
      DampenerPeriodEnable := DampenerPeriodEnabled;
      DampenerQtyEnable := DampenerQtyEnabled;
      OverflowLevelEnable := OverflowLevelEnabled;
    END;

    LOCAL PROCEDURE EnableCostingControls@3();
    BEGIN
      StandardCostEnable := "Costing Method" = "Costing Method"::Standard;
      UnitCostEnable := "Costing Method" <> "Costing Method"::Standard;
    END;

    LOCAL PROCEDURE SetSocialListeningFactboxVisibility@5();
    VAR
      SocialListeningMgt@1000 : Codeunit 871;
    BEGIN
      SocialListeningMgt.GetItemFactboxVisibility(Rec,SocialListeningSetupVisible,SocialListeningVisible);
    END;

    LOCAL PROCEDURE InitControls@12();
    BEGIN
      UnitCostEnable := TRUE;
      StandardCostEnable := TRUE;
      OverflowLevelEnable := TRUE;
      DampenerQtyEnable := TRUE;
      DampenerPeriodEnable := TRUE;
      LotAccumulationPeriodEnable := TRUE;
      ReschedulingPeriodEnable := TRUE;
      IncludeInventoryEnable := TRUE;
      OrderMultipleEnable := TRUE;
      MaximumOrderQtyEnable := TRUE;
      MinimumOrderQtyEnable := TRUE;
      MaximumInventoryEnable := TRUE;
      ReorderQtyEnable := TRUE;
      ReorderPointEnable := TRUE;
      SafetyStockQtyEnable := TRUE;
      SafetyLeadTimeEnable := TRUE;
      TimeBucketEnable := TRUE;
      "Costing Method" := "Costing Method"::FIFO;
      UnitCostEditable := TRUE;
    END;

    LOCAL PROCEDURE UpdateSpecialPricesAndDiscountsTxt@7();
    VAR
      TempSalesPriceAndLineDiscBuff@1000 : TEMPORARY Record 1304;
      TempPurchPriceLineDiscBuff@1001 : TEMPORARY Record 1315;
    BEGIN
      SpecialPricesAndDiscountsTxt := CreateNewTxt;
      IF TempSalesPriceAndLineDiscBuff.ItemHasLines(Rec) THEN
        SpecialPricesAndDiscountsTxt := ViewExistingTxt;

      SpecialPurchPricesAndDiscountsTxt := CreateNewTxt;
      IF TempPurchPriceLineDiscBuff.ItemHasLines(Rec) THEN
        SpecialPurchPricesAndDiscountsTxt := ViewExistingTxt;
    END;

    LOCAL PROCEDURE CreateItemFromTemplate@11();
    VAR
      ItemTemplate@1001 : Record 1301;
      Item@1000 : Record 27;
      InventorySetup@1002 : Record 313;
      ConfigTemplateHeader@1003 : Record 8618;
    BEGIN
      OnBeforeCreateItemFromTemplate(NewMode);

      IF NewMode THEN BEGIN
        IF ItemTemplate.NewItemFromTemplate(Item) THEN BEGIN
          COPY(Item);
          CurrPage.UPDATE;
        END ELSE BEGIN
          ConfigTemplateHeader.SETRANGE("Table ID",DATABASE::Item);
          ConfigTemplateHeader.SETRANGE(Enabled,TRUE);
          IF NOT ConfigTemplateHeader.ISEMPTY THEN BEGIN
            CurrPage.CLOSE;
            NewMode := FALSE;
            EXIT;
          END;
        END;

        IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
          IF (Item."No." = '') AND InventorySetup.GET THEN
            VALIDATE("Costing Method",InventorySetup."Default Costing Method");

        NewMode := FALSE;
      END;
    END;

    LOCAL PROCEDURE SetNoFieldVisible@13();
    VAR
      DocumentNoVisibility@1000 : Codeunit 1400;
    BEGIN
      NoFieldVisible := DocumentNoVisibility.ItemNoIsVisible;
    END;

    [Integration(TRUE)]
    LOCAL PROCEDURE OnAfterOnOpenPage@10();
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCreateItemFromTemplate@9(VAR NewMode@1000 : Boolean);
    BEGIN
    END;

    BEGIN
    {
      CEX Campos requeridos: "C¢d. formato botella", "C¢d. formato caja", Granel, Grado, "Grado alcoh¢lico", "C¢d. tipo cont. existencias", "C¢d. tipo precinta colocada", "No. de precintas"
      EMCS A¤adidos campos requeridos en grupo EMCS. Otros campos requeridos se encuentran en otros grupos. p.e. "C¢d. grupo EMCS producto" (ANEXOS), "C¢d. formato botella" y "C¢d. formato caja" (VINOTEC), etc... (ver campos requeridos de producto por EM

      LICORES BAINES
      ========================
      BAIN-0009 JA 171107 A¤adir campo:Pendiente revisar. Copiar producto.
      BAIN-0010 AM 100807 Se a¤ade el campo IVA Desglosado
      BAIN-0048 VM 170108 Se a¤ade la funcionalidad de acceder al formulario del coste te¢rico de cada producto
      BAIN-0028 JA 131107 A¤adir campos: "Con precinta","Precinta propia",
                                         "C¢d. tipo precinta".
    }
    END.
  }
}

OBJECT Page 42 Sales Order
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=17:21:01;
    Modified=Yes;
    Version List=NAVW114.07,NAVES14.07,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Sales Order;
               ESP=Pedido venta];
    SourceTable=Table36;
    SourceTableView=WHERE(Document Type=FILTER(Order));
    PageType=Document;
    RefreshOnActivate=Yes;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Approve,Release,Posting,Prepare,Order,Request Approval,History,Print/Send,Navigate;
                                ESP=Nuevo,Proceso,Informe,Aprobar,Lanzar,Registrar,Preparar,Pedido,Solicitar aprobaci¢n,Historial,Imprimir y enviar,Navegar];
    OnInit=VAR
             SalesReceivablesSetup@1000 : Record 311;
           BEGIN
             JobQueuesUsed := SalesReceivablesSetup.JobQueueActive;
             SetExtDocNoMandatoryCondition;
           END;

    OnOpenPage=VAR
                 PaymentServiceSetup@1003 : Record 1060;
                 CRMIntegrationManagement@1000 : Codeunit 5330;
                 OfficeMgt@1001 : Codeunit 1630;
                 SIIManagement@1100000 : Codeunit 10756;
                 PermissionManager@1002 : Codeunit 9002;
               BEGIN
                 IF UserMgt.GetSalesFilter <> '' THEN BEGIN
                   FILTERGROUP(2);
                   SETRANGE("Responsibility Center",UserMgt.GetSalesFilter);
                   FILTERGROUP(0);
                 END;

                 // VNTES.i
                 IF TPV.READPERMISSION THEN
                   GestAccTPV.TraeTPVActivo(Rec,xRec,TPV);
                 FILTERGROUP(2);
                 SETRANGE("POS Code",TPV.C¢digo);
                 FILTERGROUP(0);
                 // VNTES.f
                 ActivateFields;
                 SETRANGE("Date Filter",0D,WORKDATE - 1);

                 SetDocNoVisible;

                 CRMIntegrationEnabled := CRMIntegrationManagement.IsCRMIntegrationEnabled;
                 IsOfficeHost := OfficeMgt.IsAvailable;
                 IsSaas := PermissionManager.SoftwareAsAService;

                 IF "Quote No." <> '' THEN
                   ShowQuoteNo := TRUE;
                 IF ("No." <> '') AND ("Sell-to Customer No." = '') THEN
                   DocumentIsPosted := (NOT GET("Document Type","No."));

                 SIIManagement.CombineOperationDescription("Operation Description","Operation Description 2",OperationDescription);
                 PaymentServiceVisible := PaymentServiceSetup.IsPaymentServiceVisible;
               END;

    OnAfterGetRecord=BEGIN
                       ShowQuoteNo := "Quote No." <> '';

                       SetControlVisibility;
                       UpdateShipToBillToGroupVisibility;
                       WorkDescription := GetWorkDescription;
                     END;

    OnNewRecord=BEGIN
                  xRec.INIT;
                  "Responsibility Center" := UserMgt.GetSalesFilter;
                  IF (NOT DocNoVisible) AND ("No." = '') THEN
                    SetSellToCustomerFromFilter;

                  SetDefaultPaymentServices;
                  UpdateShipToBillToGroupVisibility;
                END;

    OnInsertRecord=BEGIN
                     IF DocNoVisible THEN
                       CheckCreditMaxBeforeInsert;

                     IF ("Sell-to Customer No." = '') AND (GETFILTER("Sell-to Customer No.") <> '') THEN
                       CurrPage.UPDATE(FALSE);
                   END;

    OnDeleteRecord=BEGIN
                     CurrPage.SAVERECORD;
                     EXIT(ConfirmDeletion);
                   END;

    OnQueryClosePage=VAR
                       InstructionMgt@1001 : Codeunit 1330;
                     BEGIN
                       IF ShowReleaseNotification THEN
                         IF NOT InstructionMgt.ShowConfirmUnreleased THEN
                           EXIT(FALSE);
                       IF NOT DocumentIsPosted THEN
                         EXIT(ConfirmCloseUnposted);
                     END;

    OnAfterGetCurrRecord=VAR
                           SalesHeader@1001 : Record 36;
                           CRMCouplingManagement@1000 : Codeunit 5331;
                           CustCheckCrLimit@1002 : Codeunit 312;
                           SIIManagement@1100000 : Codeunit 10756;
                         BEGIN
                           DynamicEditable := CurrPage.EDITABLE;
                           {
                           CurrPage.IncomingDocAttachFactBox.PAGE.LoadDataFromRecord(Rec);
                           CurrPage.ApprovalFactBox.PAGE.UpdateApprovalEntriesFromSourceRecord(RECORDID);
                           CRMIsCoupledToRecord := CRMIntegrationEnabled;
                           IF CRMIsCoupledToRecord THEN
                             CRMIsCoupledToRecord := CRMCouplingManagement.IsRecordCoupledToCRM(RECORDID);
                           ShowWorkflowStatus := CurrPage.WorkflowStatus.PAGE.SetFilterOnWorkflowRecord(RECORDID);
                           }
                           UpdatePaymentService;
                           IF CallNotificationCheck THEN BEGIN
                             SalesHeader := Rec;
                             SalesHeader.CALCFIELDS("Amount Including VAT");
                             CustCheckCrLimit.SalesHeaderCheck(SalesHeader);
                             CheckItemAvailabilityInLines;
                             CallNotificationCheck := FALSE;
                           END;

                           SIIManagement.CombineOperationDescription("Operation Description","Operation Description 2",OperationDescription);
                         END;

    ActionList=ACTIONS
    {
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 59      ;1   ;ActionGroup;
                      CaptionML=[ENU=O&rder;
                                 ESP=&Pedido];
                      Image=Order }
      { 1170000000;2 ;Action    ;
                      Name=CalcDtoPromo;
                      CaptionML=ESP=Calc. Dto. Promoci¢n;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=SalesLineDisc;
                      PromotedCategory=Process;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 CurrPage.SalesLines.PAGE.AprobarCalcDtoPromo(); //BAIN-0054
                               END;
                                }
      { 61      ;2   ;Action    ;
                      Name=Statistics;
                      ShortCutKey=F7;
                      CaptionML=[ENU=Statistics;
                                 ESP=Estad¡sticas];
                      ToolTipML=[ENU=View statistical information, such as the value of posted entries, for the record.;
                                 ESP=Permite ver informaci¢n estad¡stica del registro, como el valor de los movimientos registrados.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Statistics;
                      PromotedCategory=Category8;
                      OnAction=VAR
                                 Handled@1000 : Boolean;
                               BEGIN
                                 OnBeforeStatisticsAction(Rec,Handled);
                                 IF NOT Handled THEN BEGIN
                                   OpenSalesOrderStatistics;
                                   SalesCalcDiscountByType.ResetRecalculateInvoiceDisc(Rec);
                                 END
                               END;
                                }
      { 62      ;2   ;Action    ;
                      ShortCutKey=Shift+F7;
                      CaptionML=[ENU=Customer;
                                 ESP=Cliente];
                      ToolTipML=[ENU=View or edit detailed information about the customer on the sales document.;
                                 ESP=Permite ver o editar la informaci¢n detallada sobre el cliente en el documento de venta.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 21;
                      RunPageLink=No.=FIELD(Sell-to Customer No.);
                      Promoted=Yes;
                      Enabled=IsCustomerOrContactNotEmpty;
                      Image=Customer;
                      PromotedCategory=Category12 }
      { 122     ;2   ;Action    ;
                      Name=Dimensions;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Promoted=Yes;
                      Enabled="No." <> '';
                      PromotedIsBig=Yes;
                      Image=Dimensions;
                      PromotedCategory=Category8;
                      OnAction=BEGIN
                                 ShowDocDim;
                                 CurrPage.SAVERECORD;
                               END;
                                }
      { 78      ;2   ;Action    ;
                      Name=Approvals;
                      AccessByPermission=TableData 454=R;
                      CaptionML=[ENU=A&pprovals;
                                 ESP=Aprobaciones];
                      ToolTipML=[ENU=View a list of the records that are waiting to be approved. For example, you can see who requested the record to be approved, when it was sent, and when it is due to be approved.;
                                 ESP=Permite ver una lista de los registros en espera de aprobaci¢n. Por ejemplo, puede ver qui‚n ha solicitado la aprobaci¢n del registro, cu ndo se envi¢ y la fecha de vencimiento de la aprobaci¢n.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Image=Approvals;
                      PromotedCategory=Category8;
                      OnAction=VAR
                                 WorkflowsEntriesBuffer@1000 : Record 832;
                               BEGIN
                                 WorkflowsEntriesBuffer.RunWorkflowEntriesPage(RECORDID,DATABASE::"Sales Header","Document Type","No.");
                               END;
                                }
      { 63      ;2   ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      RunObject=Page 67;
                      RunPageLink=Document Type=FIELD(Document Type),
                                  No.=FIELD(No.),
                                  Document Line No.=CONST(0);
                      Promoted=Yes;
                      Image=ViewComments;
                      PromotedCategory=Category8 }
      { 11      ;2   ;Action    ;
                      Name=AssemblyOrders;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Assembly Orders;
                                 ESP=Pedidos de ensamblado];
                      ToolTipML=[ENU="View ongoing assembly orders related to the sales order. ";
                                 ESP="Permite ver pedidos de ensamblado en curso relacionados con el pedido de ventas. "];
                      ApplicationArea=#Assembly;
                      Image=AssemblyOrder;
                      OnAction=VAR
                                 AssembleToOrderLink@1000 : Record 904;
                               BEGIN
                                 AssembleToOrderLink.ShowAsmOrders(Rec);
                               END;
                                }
      { 106     ;2   ;Action    ;
                      Name=DocAttach;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=Attach;
                      PromotedCategory=Category8;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1000 : Page 1173;
                                 RecRef@1001 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 79      ;1   ;ActionGroup;
                      Name=ActionGroupCRM;
                      CaptionML=[ENU=Dynamics 365 for Sales;
                                 ESP=Dynamics 365 for Sales];
                      Visible=CRMIntegrationEnabled;
                      Image=Reconcile }
      { 71      ;2   ;Action    ;
                      Name=CRMGoToSalesOrder;
                      CaptionML=[ENU=Sales Order;
                                 ESP=Pedido venta];
                      ToolTipML=[ENU=Open the coupled Microsoft Dynamics CRM sales order.;
                                 ESP=Permite ver el pedido de venta seleccionado.];
                      ApplicationArea=#Basic,#Suite;
                      Enabled=CRMIntegrationEnabled AND CRMIsCoupledToRecord;
                      Image=CoupledOrder;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.ShowCRMEntityFromRecordID(RECORDID);
                               END;
                                }
      { 13      ;1   ;ActionGroup;
                      CaptionML=[ENU=Documents;
                                 ESP=Documentos];
                      Image=Documents }
      { 64      ;2   ;Action    ;
                      CaptionML=[ENU=S&hipments;
                                 ESP=&Env¡os];
                      ToolTipML=[ENU=View related posted sales shipments.;
                                 ESP=Permite ver todos los albaranes de venta relacionados.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 142;
                      RunPageView=SORTING(Order No.);
                      RunPageLink=Order No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Shipment;
                      PromotedCategory=Category12 }
      { 65      ;2   ;Action    ;
                      CaptionML=[ENU=Invoices;
                                 ESP=Facturas];
                      ToolTipML=[ENU=View a list of ongoing sales invoices for the order.;
                                 ESP=Permite ver una lista de facturas de venta en curso para el pedido.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 143;
                      RunPageView=SORTING(Order No.);
                      RunPageLink=Order No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Invoice;
                      PromotedCategory=Category12 }
      { 1170170002;2 ;Action    ;
                      CaptionML=[ENU=Annex;
                                 ESP=Doc. anexo];
                      RunObject=Page 7014457;
                      RunPageView=SORTING(Generado desde tipo doc.,Generado desde No. doc.)
                                  WHERE(Generado desde tipo doc.=CONST(Pedido),
                                        Tipo=CONST(Salida));
                      RunPageLink=Generado desde No. doc.=FIELD(No.);
                      Visible=FALSE;
                      Image=Document }
      { 1170170004;2 ;Action    ;
                      CaptionML=[ENU=E-DAA;
                                 ESP=E-DAAïs];
                      RunObject=Page 7061457;
                      RunPageView=SORTING(No. tabla,No. documento);
                      RunPageLink=No. tabla=CONST(36),
                                  No. documento=FIELD(No.);
                      Image=CalculateCost }
      { 1170170013;2 ;Action    ;
                      CaptionML=[ENU=Hist§ E-DAA;
                                 ESP=Hist§ E-DAAïs];
                      RunObject=Page 7061493;
                      RunPageView=SORTING(No. tabla,No. documento);
                      RunPageLink=No. tabla=CONST(36),
                                  No. documento=FIELD(No.);
                      Image=History }
      { 15      ;1   ;ActionGroup;
                      CaptionML=[ENU=Warehouse;
                                 ESP=Almac‚n];
                      Image=Warehouse }
      { 150     ;2   ;Action    ;
                      CaptionML=[ENU=In&vt. Put-away/Pick Lines;
                                 ESP=L¡neas ubicac./ pic&k exist.];
                      ToolTipML=[ENU=View items that are inbound or outbound on inventory put-away or inventory pick documents for the transfer order.;
                                 ESP=Permite ver los productos que entran o salen de la ubicaci¢n del inventario o documentos de picking de inventario para el pedido de transferencia.];
                      ApplicationArea=#Warehouse;
                      RunObject=Page 5774;
                      RunPageView=SORTING(Source Document,Source No.,Location Code);
                      RunPageLink=Source Document=CONST(Sales Order),
                                  Source No.=FIELD(No.);
                      Image=PickLines }
      { 168     ;2   ;Action    ;
                      CaptionML=[ENU=Warehouse Shipment Lines;
                                 ESP=L¡neas env¡o almac‚n];
                      ToolTipML=[ENU=View ongoing warehouse shipments for the document, in advanced warehouse configurations.;
                                 ESP=Permite ver env¡os de almac‚n en curso para el documento, en configuraciones avanzadas de almac‚n.];
                      ApplicationArea=#Warehouse;
                      RunObject=Page 7341;
                      RunPageView=SORTING(Source Type,Source Subtype,Source No.,Source Line No.);
                      RunPageLink=Source Type=CONST(37),
                                  Source Subtype=FIELD(Document Type),
                                  Source No.=FIELD(No.);
                      Image=ShipmentLines }
      { 17      ;1   ;ActionGroup;
                      CaptionML=[ENU=Prepayment;
                                 ESP=Prepago];
                      Image=Prepayment }
      { 234     ;2   ;Action    ;
                      Name=PagePostedSalesPrepaymentInvoices;
                      CaptionML=[ENU=Prepa&yment Invoices;
                                 ESP=&Facturas prepago];
                      ToolTipML=[ENU="View related posted sales invoices that involve a prepayment. ";
                                 ESP="Permite ver facturas de ventas relacionadas que incluyen un prepago. "];
                      ApplicationArea=#Prepayments;
                      RunObject=Page 143;
                      RunPageView=SORTING(Prepayment Order No.);
                      RunPageLink=Prepayment Order No.=FIELD(No.);
                      Image=PrepaymentInvoice }
      { 235     ;2   ;Action    ;
                      Name=PagePostedSalesPrepaymentCrMemos;
                      CaptionML=[ENU=Prepayment Credi&t Memos;
                                 ESP=&Abonos prepago];
                      ToolTipML=[ENU="View related posted sales credit memos that involve a prepayment. ";
                                 ESP="Permite ver abonos de ventas relacionadas que incluyen un prepago. "];
                      ApplicationArea=#Prepayments;
                      RunObject=Page 144;
                      RunPageView=SORTING(Prepayment Order No.);
                      RunPageLink=Prepayment Order No.=FIELD(No.);
                      Image=PrepaymentCreditMemo }
      { 108     ;1   ;ActionGroup;
                      CaptionML=[ENU=History;
                                 ESP=Historial] }
      { 110     ;2   ;Action    ;
                      Name=PageInteractionLogEntries;
                      ShortCutKey=Ctrl+F7;
                      CaptionML=[ENU=Interaction Log E&ntries;
                                 ESP=&Movs. reg. interacci¢n];
                      ToolTipML=[ENU=View a list of interaction log entries related to this document.;
                                 ESP=Consulte una lista de movimientos de registro de interacci¢n relacionados con este documento.];
                      ApplicationArea=#Suite;
                      Image=InteractionLog;
                      PromotedCategory=Category10;
                      OnAction=BEGIN
                                 ShowInteractionLogEntries;
                               END;
                                }
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 47      ;1   ;ActionGroup;
                      CaptionML=[ENU=Approval;
                                 ESP=Aprobaci¢n];
                      Image=Confirm }
      { 43      ;2   ;Action    ;
                      Name=Approve;
                      CaptionML=[ENU=Approve;
                                 ESP=Aprobar];
                      ToolTipML=[ENU=Approve the requested changes.;
                                 ESP=Aprueba los cambios solicitados.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistForCurrUser;
                      PromotedIsBig=Yes;
                      Image=Approve;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.ApproveRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 41      ;2   ;Action    ;
                      Name=Reject;
                      CaptionML=[ENU=Reject;
                                 ESP=Rechazar];
                      ToolTipML=[ENU=Reject the approval request.;
                                 ESP=Rechaza la solicitud de aprobaci¢n.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistForCurrUser;
                      PromotedIsBig=Yes;
                      Image=Reject;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.RejectRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 39      ;2   ;Action    ;
                      Name=Delegate;
                      CaptionML=[ENU=Delegate;
                                 ESP=Delegar];
                      ToolTipML=[ENU=Delegate the approval to a substitute approver.;
                                 ESP=Delega la aprobaci¢n a un aprobador sustituto.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistForCurrUser;
                      Image=Delegate;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.DelegateRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 37      ;2   ;Action    ;
                      Name=Comment;
                      CaptionML=[ENU=Comments;
                                 ESP=Comentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistForCurrUser;
                      Image=ViewComments;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.GetApprovalComment(Rec);
                               END;
                                }
      { 21      ;1   ;ActionGroup;
                      CaptionML=[ENU=Release;
                                 ESP=Lanzar];
                      Image=ReleaseDoc }
      { 133     ;2   ;Action    ;
                      Name=Release;
                      ShortCutKey=Ctrl+F9;
                      CaptionML=[ENU=Re&lease;
                                 ESP=Lan&zar];
                      ToolTipML=[ENU=Release the document to the next stage of processing. When a document is released, it will be included in all availability calculations from the expected receipt date of the items. You must reopen the document before you can make changes to it.;
                                 ESP=Lance el documento a la siguiente etapa de procesamiento. Cuando se lanza un documento, este se incluir  en todos los c lculos de disponibilidad a partir de la fecha de recepci¢n esperada de los productos. Debe volver a abrir el documento antes de realizar cambios en ‚l.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=ReleaseDoc;
                      PromotedCategory=Category5;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ReleaseSalesDoc@1000 : Codeunit 414;
                               BEGIN
                                 ReleaseSalesDoc.PerformManualRelease(Rec);
                               END;
                                }
      { 134     ;2   ;Action    ;
                      Name=Reopen;
                      CaptionML=[ENU=Re&open;
                                 ESP=&Volver a abrir];
                      ToolTipML=[ENU=Reopen the document to change it after it has been approved. Approved documents have the Released status and must be opened before they can be changed.;
                                 ESP=Permite volver a abrir el documento para cambiarlo una vez que se haya aprobado. Los documentos aprobados tienen el estado Lanzado y se deben abrir para poder cambiarlos.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=Status <> Status::Open;
                      Image=ReOpen;
                      PromotedCategory=Category5;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ReleaseSalesDoc@1001 : Codeunit 414;
                               BEGIN
                                 ReleaseSalesDoc.PerformManualReopen(Rec);
                               END;
                                }
      { 66      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 1100090 ;2   ;Action    ;
                      Name=CalculateInvoiceDiscount;
                      CaptionML=[ENU=Calculate &Inv. and Pmt. Discounts;
                                 ESP=Calcular dtos. &factura y P.P.];
                      ToolTipML=[ENU=Update the lines with any payment discount that is specified in the related payment terms.;
                                 ESP=Actualiza las l¡neas con cualquier descuento por pronto pago especificado en los t‚rminos de pago relacionados.];
                      ApplicationArea=#Basic,#Suite;
                      Image=CalculateDiscount;
                      OnAction=BEGIN
                                 ApproveCalcInvDisc;
                                 SalesCalcDiscountByType.ResetRecalculateInvoiceDisc(Rec);
                               END;
                                }
      { 1170170010;2 ;Action    ;
                      CaptionML=[ENU=CCalculate promotioinal discount;
                                 ESP=Calcular dto. &promocional];
                      Image=CalculateInvoiceDiscount;
                      OnAction=BEGIN
                                 CurrPage.SalesLines.PAGE.AprobarCalcDtoPromo(); // VNTES
                               END;
                                }
      { 102     ;2   ;ActionGroup;
                      CaptionML=[ENU=Create Purchase Document;
                                 ESP=Crear documento de compra];
                      ToolTipML=[ENU=Create a new purchase document so you can buy items from a vendor.;
                                 ESP=Permite crear un nuevo documento de compra para que pueda comprar productos a un proveedor.];
                      Image=NewPurchaseInvoice }
      { 104     ;3   ;Action    ;
                      Name=CreatePurchaseOrder;
                      CaptionML=[ENU=Create Purchase Orders;
                                 ESP=Crear pedidos de compra];
                      ToolTipML=[ENU=Create one or more new purchase orders to buy the items that are required by this sales document, minus any quantity that is already available.;
                                 ESP=Permite crear uno o varios nuevos pedidos de compra para comprar los productos solicitados en este documento de venta, menos cualquier cantidad que ya est‚ disponible.];
                      ApplicationArea=#Suite;
                      Promoted=No;
                      PromotedIsBig=Yes;
                      Image=Document;
                      PromotedCategory=Category8;
                      OnAction=VAR
                                 PurchDocFromSalesDoc@1000 : Codeunit 1314;
                               BEGIN
                                 PurchDocFromSalesDoc.CreatePurchaseOrder(Rec);
                               END;
                                }
      { 87      ;3   ;Action    ;
                      Name=CreatePurchaseInvoice;
                      CaptionML=[ENU=Create Purchase Invoice;
                                 ESP=Crear factura de compra];
                      ToolTipML=[ENU=Create a new purchase invoice to buy all the items that are required by the sales document, even if some of the items are already available.;
                                 ESP=Permite crear una nueva factura de compra para comprar todos los productos solicitados en el documento de venta, aunque algunos de los productos ya est‚n disponibles.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=No;
                      PromotedIsBig=Yes;
                      Image=NewPurchaseInvoice;
                      PromotedCategory=Category8;
                      OnAction=VAR
                                 SelectedSalesLine@1001 : Record 37;
                                 PurchDocFromSalesDoc@1000 : Codeunit 1314;
                               BEGIN
                                 CurrPage.SalesLines.PAGE.SETSELECTIONFILTER(SelectedSalesLine);
                                 PurchDocFromSalesDoc.CreatePurchaseInvoice(Rec,SelectedSalesLine);
                               END;
                                }
      { 167     ;2   ;Action    ;
                      Name=GetRecurringSalesLines;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get Recurring Sales Lines;
                                 ESP=Obtener l¡neas de venta peri¢dicas];
                      ToolTipML=[ENU=Insert sales document lines that you have set up for the customer as recurring. Recurring sales lines could be for a monthly replenishment order or a fixed freight expense.;
                                 ESP=Permite insertar las l¡neas del documento de venta que se configuraron para el cliente como peri¢dicas. Las l¡neas de venta peri¢dicas pueden ser un pedido de reposici¢n mensual o un gasto de flete fijo.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Image=CustomerCode;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 StdCustSalesCode@1000 : Record 172;
                               BEGIN
                                 StdCustSalesCode.InsertSalesLines(Rec);
                               END;
                                }
      { 68      ;2   ;Action    ;
                      Name=CopyDocument;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Copy Document;
                                 ESP=Copiar l¡neas];
                      ToolTipML=[ENU=Copy document lines and header information from another sales document to this document. You can copy a posted sales invoice into a new sales invoice to quickly create a similar document.;
                                 ESP=Copia las l¡neas del documento y la informaci¢n de cabecera de otro documento de venta en este. Una factura de venta registrada se puede copiar en una nueva factura de venta para crear un documento similar con rapidez.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Enabled="No." <> '';
                      PromotedIsBig=Yes;
                      Image=CopyDocument;
                      PromotedCategory=Category7;
                      OnAction=BEGIN
                                 CopySalesDoc.SetSalesHeader(Rec);
                                 CopySalesDoc.RUNMODAL;
                                 CLEAR(CopySalesDoc);
                                 IF GET("Document Type","No.") THEN;
                               END;
                                }
      { 154     ;2   ;Action    ;
                      Name=MoveNegativeLines;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Move Negative Lines;
                                 ESP=Mover l¡neas negativas];
                      ToolTipML=[ENU=Prepare to create a replacement sales order in a sales return process.;
                                 ESP=Preparar un pedido de venta de reposici¢n en un proceso de devoluci¢n de venta.];
                      ApplicationArea=#Basic,#Suite;
                      Image=MoveNegativeLines;
                      OnAction=BEGIN
                                 CLEAR(MoveNegSalesLines);
                                 MoveNegSalesLines.SetSalesHeader(Rec);
                                 MoveNegSalesLines.RUNMODAL;
                                 MoveNegSalesLines.ShowDocument;
                               END;
                                }
      { 196     ;2   ;Action    ;
                      Name=Archive Document;
                      CaptionML=[ENU=Archi&ve Document;
                                 ESP=&Archivar documento];
                      ToolTipML=[ENU=Send the document to the archive, for example because it is too soon to delete it. Later, you delete or reprocess the archived document.;
                                 ESP="Env¡e el documento al archivo; por ejemplo, porque es demasiado pronto para eliminarlo. Despu‚s, elimina o reprocesa el documento archivado."];
                      ApplicationArea=#Suite;
                      Image=Archive;
                      OnAction=BEGIN
                                 ArchiveManagement.ArchiveSalesDocument(Rec);
                                 CurrPage.UPDATE(FALSE);
                               END;
                                }
      { 204     ;2   ;Action    ;
                      AccessByPermission=TableData 410=R;
                      CaptionML=[ENU=Send IC Sales Order;
                                 ESP=Env¡o ped. venta IC];
                      ToolTipML=[ENU=Send the sales order to the intercompany outbox or directly to the intercompany partner if automatic transaction sending is enabled.;
                                 ESP=Env¡a el pedido de venta a la bandeja de salida de empresas vinculada o directamente al socio de empresas vinculadas si est  habilitado el env¡o autom tico de transacciones.];
                      ApplicationArea=#Intercompany;
                      Image=IntercompanyOrder;
                      OnAction=VAR
                                 ICInOutboxMgt@1000 : Codeunit 427;
                                 ApprovalsMgmt@1003 : Codeunit 1535;
                               BEGIN
                                 IF ApprovalsMgmt.PrePostApprovalCheckSales(Rec) THEN
                                   ICInOutboxMgt.SendSalesDoc(Rec,FALSE);
                               END;
                                }
      { 1170170007;2 ;Separator ;
                      CaptionML=ESP=- }
      { 1170170012;2 ;Action    ;
                      CaptionML=[ENU=Generate annex doc;
                                 ESP=Generar doc. anexo];
                      Image=Capacity;
                      OnAction=VAR
                                 GenerarAnexo@1170170000 : Codeunit 7014608;
                               BEGIN
                                 GenerarAnexo.CrearAnexoI(36,0,"No.",TRUE);  // VNTES
                               END;
                                }
      { 1170170011;2 ;Separator ;
                      CaptionML=ESP=- }
      { 1170170005;2 ;Action    ;
                      CaptionML=[ENU=Palletize sales order;
                                 ESP=Pa&letizar pedido venta];
                      RunObject=Page 7014561;
                      RunPageView=SORTING(Document Type,No.);
                      RunPageLink=Document Type=FIELD(Document Type),
                                  No.=FIELD(No.);
                      Image=Production }
      { 1170170006;2 ;Action    ;
                      CaptionML=[ENU=EMCS - Generate E-DAA;
                                 ESP=EMCS - Generar e-DAA];
                      Image=CalculateCost;
                      OnAction=BEGIN
                                 GestEMCS.CreateCabeceraEDAAVenta(Rec); // VNTES
                               END;
                                }
      { 69      ;2   ;ActionGroup;
                      Name=IncomingDocument;
                      CaptionML=[ENU=Incoming Document;
                                 ESP=Documento entrante];
                      ActionContainerType=NewDocumentItems;
                      Image=Documents }
      { 60      ;3   ;Action    ;
                      Name=IncomingDocCard;
                      CaptionML=[ENU=View Incoming Document;
                                 ESP=Ver documento entrante];
                      ToolTipML=[ENU=View any incoming document records and file attachments that exist for the entry or document.;
                                 ESP=Permite ver los registros de documentos entrantes y archivos adjuntos que existen para el movimiento o el documento.];
                      ApplicationArea=#Basic,#Suite;
                      Enabled=HasIncomingDocument;
                      Image=ViewOrder;
                      OnAction=VAR
                                 IncomingDocument@1000 : Record 130;
                               BEGIN
                                 IncomingDocument.ShowCardFromEntryNo("Incoming Document Entry No.");
                               END;
                                }
      { 57      ;3   ;Action    ;
                      Name=SelectIncomingDoc;
                      AccessByPermission=TableData 130=R;
                      CaptionML=[ENU=Select Incoming Document;
                                 ESP=Seleccionar documento entrante];
                      ToolTipML=[ENU=Select an incoming document record and file attachment that you want to link to the entry or document.;
                                 ESP=Permite seleccionar un registro de documentos entrantes y un archivo adjunto que desee vincular al movimiento o al documento.];
                      ApplicationArea=#Basic,#Suite;
                      Image=SelectLineToApply;
                      OnAction=VAR
                                 IncomingDocument@1000 : Record 130;
                               BEGIN
                                 VALIDATE("Incoming Document Entry No.",IncomingDocument.SelectIncomingDocument("Incoming Document Entry No.",RECORDID));
                               END;
                                }
      { 55      ;3   ;Action    ;
                      Name=IncomingDocAttachFile;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Create Incoming Document from File;
                                 ESP=Crear documento entrante desde archivo];
                      ToolTipML=[ENU=Create an incoming document record by selecting a file to attach, and then link the incoming document record to the entry or document.;
                                 ESP=Permite crear un registro de documentos entrantes al seleccionar un archivo que se ha de adjuntar y luego vincular el registro de documentos entrantes al movimiento o al documento.];
                      ApplicationArea=#Basic,#Suite;
                      Enabled=NOT HasIncomingDocument;
                      Image=Attach;
                      OnAction=VAR
                                 IncomingDocumentAttachment@1000 : Record 133;
                               BEGIN
                                 IncomingDocumentAttachment.NewAttachmentFromSalesDocument(Rec);
                               END;
                                }
      { 53      ;3   ;Action    ;
                      Name=RemoveIncomingDoc;
                      CaptionML=[ENU=Remove Incoming Document;
                                 ESP=Eliminar documento entrante];
                      ToolTipML=[ENU=Remove any incoming document records and file attachments.;
                                 ESP=Elimina cualquier registro de documentos entrantes y los archivos adjuntos.];
                      ApplicationArea=#Basic,#Suite;
                      Enabled=HasIncomingDocument;
                      Image=RemoveLine;
                      OnAction=VAR
                                 IncomingDocument@1000 : Record 130;
                               BEGIN
                                 IF IncomingDocument.GET("Incoming Document Entry No.") THEN
                                   IncomingDocument.RemoveLinkToRelatedRecord;
                                 "Incoming Document Entry No." := 0;
                                 MODIFY(TRUE);
                               END;
                                }
      { 23      ;1   ;ActionGroup;
                      CaptionML=[ENU=Plan;
                                 ESP=Planificar];
                      Image=Planning }
      { 197     ;2   ;Action    ;
                      Name=OrderPromising;
                      AccessByPermission=TableData 99000880=R;
                      CaptionML=[ENU=Order &Promising;
                                 ESP=Comprom&iso entrega];
                      ToolTipML=[ENU=Calculate the shipment and delivery dates based on the item's known and expected availability dates, and then promise the dates to the customer.;
                                 ESP=Calcular las fechas de env¡o y entrega seg£n las fechas de disponibilidad conocidas y previstas del art¡culo y, despu‚s, comprometer dichas fechas ante el cliente.];
                      ApplicationArea=#OrderPromising;
                      Image=OrderPromising;
                      OnAction=VAR
                                 OrderPromisingLine@1000 : TEMPORARY Record 99000880;
                               BEGIN
                                 OrderPromisingLine.SETRANGE("Source Type","Document Type");
                                 OrderPromisingLine.SETRANGE("Source ID","No.");
                                 PAGE.RUNMODAL(PAGE::"Order Promising Lines",OrderPromisingLine);
                               END;
                                }
      { 248     ;2   ;Action    ;
                      CaptionML=[ENU=Demand Overview;
                                 ESP=Panorama de demanda];
                      ToolTipML=[ENU=Get an overview of demand for your items when planning sales, production, jobs, or service management and when they will be available.;
                                 ESP=Obtener una visi¢n general de la demanda de sus productos al planificar las ventas, la producci¢n, los trabajos o la gesti¢n de servicios y sobre cu ndo estar n disponibles.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Forecast;
                      OnAction=VAR
                                 DemandOverview@1000 : Page 5830;
                               BEGIN
                                 DemandOverview.SetCalculationParameter(TRUE);
                                 DemandOverview.Initialize(0D,1,"No.",'','');
                                 DemandOverview.RUNMODAL;
                               END;
                                }
      { 121     ;2   ;Action    ;
                      CaptionML=[ENU=Pla&nning;
                                 ESP=Plani&ficaci¢n];
                      ToolTipML=[ENU=Open a tool for manual supply planning that displays all new demand along with availability information and suggestions for supply. It provides the visibility and tools needed to plan for demand from sales lines and component lines and then create different types of supply orders directly.;
                                 ESP=Abrir una herramienta para la programaci¢n manual de suministros en donde se puede ver toda la nueva demanda junto con informaci¢n acerca de la disponibilidad y sugerencias sobre el suministro. Proporciona la perspectiva y las herramientas necesarias para programar la demanda de l¡neas de venta y l¡neas de componentes y crear despu‚s directamente diferentes tipos de pedidos de suministros.];
                      ApplicationArea=#Planning;
                      Image=Planning;
                      OnAction=VAR
                                 SalesPlanForm@1001 : Page 99000883;
                               BEGIN
                                 SalesPlanForm.SetSalesOrder("No.");
                                 SalesPlanForm.RUNMODAL;
                               END;
                                }
      { 25      ;1   ;ActionGroup;
                      CaptionML=[ENU=Request Approval;
                                 ESP=Aprobaci¢n solic.];
                      Image=SendApprovalRequest }
      { 250     ;2   ;Action    ;
                      Name=SendApprovalRequest;
                      CaptionML=[ENU=Send A&pproval Request;
                                 ESP=Enviar solicitud a&probaci¢n];
                      ToolTipML=[ENU=Request approval of the document.;
                                 ESP=Permite solicitar la aprobaci¢n del documento.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=NOT OpenApprovalEntriesExist AND CanRequestApprovalForFlow;
                      PromotedIsBig=Yes;
                      Image=SendApprovalRequest;
                      PromotedCategory=Category9;
                      OnAction=VAR
                                 ApprovalsMgmt@1001 : Codeunit 1535;
                               BEGIN
                                 IF ApprovalsMgmt.CheckSalesApprovalPossible(Rec) THEN
                                   ApprovalsMgmt.OnSendSalesDocForApproval(Rec);
                               END;
                                }
      { 251     ;2   ;Action    ;
                      Name=CancelApprovalRequest;
                      CaptionML=[ENU=Cancel Approval Re&quest;
                                 ESP=&Cancelar solicitud aprobaci¢n];
                      ToolTipML=[ENU=Cancel the approval request.;
                                 ESP=Cancela la solicitud de aprobaci¢n.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=CanCancelApprovalForRecord OR CanCancelApprovalForFlow;
                      Image=CancelApprovalRequest;
                      PromotedCategory=Category9;
                      OnAction=VAR
                                 ApprovalsMgmt@1001 : Codeunit 1535;
                                 WorkflowWebhookMgt@1000 : Codeunit 1543;
                               BEGIN
                                 ApprovalsMgmt.OnCancelSalesApprovalRequest(Rec);
                                 WorkflowWebhookMgt.FindAndCancel(RECORDID);
                               END;
                                }
      { 118     ;2   ;ActionGroup;
                      CaptionML=[ENU=Flow;
                                 ESP=Flujo de trabajo];
                      Image=Flow }
      { 117     ;3   ;Action    ;
                      Name=CreateFlow;
                      CaptionML=[ENU=Create a Flow;
                                 ESP=Crear un flujo de trabajo];
                      ToolTipML=[ENU=Create a new Flow from a list of relevant Flow templates.;
                                 ESP=Crea un nuevo flujo de trabajo a partir de una lista de plantillas de flujo de trabajo pertinentes.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsSaas;
                      Image=Flow;
                      PromotedCategory=Category9;
                      OnAction=VAR
                                 FlowServiceManagement@1001 : Codeunit 6400;
                                 FlowTemplateSelector@1000 : Page 6400;
                               BEGIN
                                 // Opens page 6400 where the user can use filtered templates to create new flows.
                                 FlowTemplateSelector.SetSearchText(FlowServiceManagement.GetSalesTemplateFilter);
                                 FlowTemplateSelector.RUN;
                               END;
                                }
      { 120     ;3   ;Action    ;
                      Name=SeeFlows;
                      CaptionML=[ENU=See my Flows;
                                 ESP=Ver mis flujos de trabajo];
                      ToolTipML=[ENU=View and configure Flows that you created.;
                                 ESP=Permite ver y configurar los flujos de trabajo que ha creado.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 6401;
                      Promoted=Yes;
                      Image=Flow;
                      PromotedCategory=Category9 }
      { 3       ;1   ;ActionGroup;
                      CaptionML=[ENU=Warehouse;
                                 ESP=Almac‚n];
                      Image=Warehouse }
      { 148     ;2   ;Action    ;
                      AccessByPermission=TableData 7342=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Create Inventor&y Put-away/Pick;
                                 ESP=Crear &ubicac./ pick. inventario];
                      ToolTipML=[ENU=Create an inventory put-away or inventory pick to handle items on the document according to a basic warehouse configuration that does not require warehouse receipt or shipment documents.;
                                 ESP=Crear una ubicaci¢n de inventario o un picking de existencias para gestionar los productos del documento, de acuerdo con una configuraci¢n b sica de almac‚n que no requiera documentos de recepci¢n o env¡o de almac‚n.];
                      ApplicationArea=#Warehouse;
                      Promoted=Yes;
                      Image=CreateInventoryPickup;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CreateInvtPutAwayPick;

                                 IF NOT FIND('=><') THEN
                                   INIT;
                               END;
                                }
      { 149     ;2   ;Action    ;
                      AccessByPermission=TableData 7320=R;
                      CaptionML=[ENU=Create &Warehouse Shipment;
                                 ESP=Crear env¡o de &almac‚n];
                      ToolTipML=[ENU=Create a warehouse shipment to start a pick a ship process according to an advanced warehouse configuration.;
                                 ESP=Cree un env¡o de almac‚n para iniciar un proceso de picking y env¡o seg£n una configuraci¢n avanzada del almac‚n.];
                      ApplicationArea=#Warehouse;
                      Image=NewShipment;
                      OnAction=VAR
                                 GetSourceDocOutbound@1001 : Codeunit 5752;
                               BEGIN
                                 GetSourceDocOutbound.CreateFromSalesOrder(Rec);

                                 IF NOT FIND('=><') THEN
                                   INIT;
                               END;
                                }
      { 73      ;1   ;ActionGroup;
                      CaptionML=[ENU=P&osting;
                                 ESP=&Registro];
                      Image=Post }
      { 75      ;2   ;Action    ;
                      Name=Post;
                      ShortCutKey=F9;
                      Ellipsis=Yes;
                      CaptionML=[ENU=P&ost;
                                 ESP=&Registrar];
                      ToolTipML=[ENU=Finalize the document or journal by posting the amounts and quantities to the related accounts in your company books.;
                                 ESP=Finaliza el documento o el diario registrando los importes y las cantidades en las cuentas relacionadas de los libros de su empresa.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PostOrder;
                      PromotedCategory=Category6;
                      OnAction=BEGIN
                                 Post(CODEUNIT::"Sales-Post (Yes/No)",NavigateAfterPost::"Posted Document");
                               END;
                                }
      { 19      ;2   ;Action    ;
                      Name=PostAndNew;
                      ShortCutKey=Shift+F9;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Credit Card;
                                 ESP=Registrar y nuevo];
                      ToolTipML=[ENU=Post the sales document and create a new, empty one.;
                                 ESP=Registrar el documento de ventas y crear un nuevo vac¡o.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=PostOrder;
                      PromotedCategory=Category6;
                      OnAction=BEGIN
                                 Post(CODEUNIT::"Sales-Post (Yes/No)",NavigateAfterPost::"New Document");
                               END;
                                }
      { 29      ;2   ;Action    ;
                      Name=PostAndSend;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Post and Email;
                                 ESP=Registrar y enviar];
                      ToolTipML=[ENU=Finalize and prepare to send the document according to the customer's sending profile, such as attached to an email. The Send document to window opens first so you can confirm or select a sending profile.;
                                 ESP=Permite finalizar y preparar el documento para enviarlo seg£n el perfil que cuenta con las preferencias de env¡o del cliente, por ejemplo, adjunto en un correo electr¢nico. La ventana "Enviar documento a" se abre primero para que se pueda confirmar o seleccionar un perfil de env¡o.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=PostMail;
                      PromotedCategory=Category6;
                      OnAction=BEGIN
                                 Post(CODEUNIT::"Sales-Post and Send",NavigateAfterPost::Nowhere);
                               END;
                                }
      { 74      ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Test Report;
                                 ESP=Informe prueba];
                      ToolTipML=[ENU=View a test report so that you can find and correct any errors before you perform the actual posting of the journal or document.;
                                 ESP=Permite ver un informe de prueba para poder encontrar y corregir cualquier error antes de proceder al registro propiamente dicho del diario o el documento.];
                      ApplicationArea=#Basic,#Suite;
                      Image=TestReport;
                      OnAction=BEGIN
                                 ReportPrint.PrintSalesHeader(Rec);
                               END;
                                }
      { 7       ;2   ;Action    ;
                      CaptionML=[ENU=Remove From Job Queue;
                                 ESP=Quitar de cola de proyecto];
                      ToolTipML=[ENU=Remove the scheduled processing of this record from the job queue.;
                                 ESP=Permite quitar el procesamiento programado de este registro de la cola de proyectos.];
                      ApplicationArea=#All;
                      Visible=JobQueueVisible;
                      Image=RemoveLine;
                      OnAction=BEGIN
                                 CancelBackgroundPosting;
                               END;
                                }
      { 51      ;2   ;Action    ;
                      Name=PreviewPosting;
                      CaptionML=[ENU=Preview Posting;
                                 ESP=Vista previa de registro];
                      ToolTipML=[ENU=Review the different types of entries that will be created when you post the document or journal.;
                                 ESP=Permite revisar los diferentes tipos de movimientos que se crear n al registrar el documento o el diario.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=ViewPostedOrder;
                      PromotedCategory=Category6;
                      OnAction=BEGIN
                                 ShowPreview;
                               END;
                                }
      { 52      ;2   ;Action    ;
                      Name=ProformaInvoice;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Pro Forma Invoice;
                                 ESP=Factura proforma];
                      ToolTipML=[ENU=View or print the pro forma sales invoice.;
                                 ESP=Permite ver o imprimir la factura de venta proforma.];
                      ApplicationArea=#Basic,#Suite;
                      Image=ViewPostedOrder;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 DocPrint.PrintProformaSalesInvoice(Rec);
                               END;
                                }
      { 236     ;2   ;ActionGroup;
                      CaptionML=[ENU=Prepa&yment;
                                 ESP=&Prepago];
                      Image=Prepayment }
      { 231     ;3   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Prepayment &Test Report;
                                 ESP=Informe prue&ba prepago];
                      ToolTipML=[ENU="Preview the prepayment transactions that will results from posting the sales document as invoiced. ";
                                 ESP="Vista previa de las transacciones de prepago que resultan del registro del documento de ventas seg£n lo facturado. "];
                      ApplicationArea=#Prepayments;
                      Image=PrepaymentSimulation;
                      OnAction=BEGIN
                                 ReportPrint.PrintSalesHeaderPrepmt(Rec);
                               END;
                                }
      { 232     ;3   ;Action    ;
                      Name=PostPrepaymentInvoice;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Post Prepayment &Invoice;
                                 ESP=&Registrar factura prepago];
                      ToolTipML=[ENU="Post the specified prepayment information. ";
                                 ESP="Registrar la informaci¢n de prepago especificada. "];
                      ApplicationArea=#Prepayments;
                      Image=PrepaymentPost;
                      OnAction=VAR
                                 SalesPostYNPrepmt@1000 : Codeunit 443;
                               BEGIN
                                 IF ApprovalsMgmt.PrePostApprovalCheckSales(Rec) THEN
                                   SalesPostYNPrepmt.PostPrepmtInvoiceYN(Rec,FALSE);
                               END;
                                }
      { 237     ;3   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Post and Print Prepmt. Invoic&e;
                                 ESP=&Registrar e imprimir factura prepago];
                      ToolTipML=[ENU="Post the specified prepayment information and print the related report. ";
                                 ESP="Registrar la informaci¢n de prepago especificada e imprimir el informe correspondiente. "];
                      ApplicationArea=#Prepayments;
                      Image=PrepaymentPostPrint;
                      OnAction=VAR
                                 SalesPostYNPrepmt@1000 : Codeunit 443;
                               BEGIN
                                 IF ApprovalsMgmt.PrePostApprovalCheckSales(Rec) THEN
                                   SalesPostYNPrepmt.PostPrepmtInvoiceYN(Rec,TRUE);
                               END;
                                }
      { 142     ;3   ;Action    ;
                      Name=PreviewPrepmtInvoicePosting;
                      CaptionML=[ENU=Preview Prepmt. Invoice Posting;
                                 ESP=Vista previa de contabilizaci¢n de facturas prepago];
                      ToolTipML=[ENU=Review the different types of entries that will be created when you post the prepayment invoice.;
                                 ESP=Permite revisar los diferentes tipos de movimientos que se crear n al registrar la factura prepago.];
                      ApplicationArea=#Prepayments;
                      Image=ViewPostedOrder;
                      OnAction=BEGIN
                                 ShowPrepmtInvoicePreview;
                               END;
                                }
      { 233     ;3   ;Action    ;
                      Name=PostPrepaymentCreditMemo;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Post Prepayment &Credit Memo;
                                 ESP=&Registrar abono prepago];
                      ToolTipML=[ENU=Create and post a credit memo for the specified prepayment information.;
                                 ESP=Crear y registrar un abono para la informaci¢n de prepago especificada.];
                      ApplicationArea=#Prepayments;
                      Image=PrepaymentPost;
                      OnAction=VAR
                                 SalesPostYNPrepmt@1000 : Codeunit 443;
                               BEGIN
                                 IF ApprovalsMgmt.PrePostApprovalCheckSales(Rec) THEN
                                   SalesPostYNPrepmt.PostPrepmtCrMemoYN(Rec,FALSE);
                               END;
                                }
      { 238     ;3   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Post and Print Prepmt. Cr. Mem&o;
                                 ESP=Registrar e imprimir abon&o prepago];
                      ToolTipML=[ENU=Create and post a credit memo for the specified prepayment information and print the related report.;
                                 ESP=Crear y registrar un abono para la informaci¢n de prepago especificada e imprimir el informe relacionado.];
                      ApplicationArea=#Prepayments;
                      Image=PrepaymentPostPrint;
                      OnAction=VAR
                                 SalesPostYNPrepmt@1000 : Codeunit 443;
                               BEGIN
                                 IF ApprovalsMgmt.PrePostApprovalCheckSales(Rec) THEN
                                   SalesPostYNPrepmt.PostPrepmtCrMemoYN(Rec,TRUE);
                               END;
                                }
      { 140     ;3   ;Action    ;
                      Name=PreviewPrepmtCrMemoPosting;
                      CaptionML=[ENU=Preview Prepmt. Cr. Memo Posting;
                                 ESP=Vista previa contabilizaci¢n notas cr‚dito prepago];
                      ToolTipML=[ENU=Review the different types of entries that will be created when you post the prepayment credit memo.;
                                 ESP=Permite revisar los diferentes tipos de movimientos que se crear n al registrar el abono prepago.];
                      ApplicationArea=#Prepayments;
                      Image=ViewPostedOrder;
                      OnAction=BEGIN
                                 ShowPrepmtCrMemoPreview;
                               END;
                                }
      { 223     ;1   ;ActionGroup;
                      CaptionML=[ENU=&Print;
                                 ESP=&Imprimir];
                      Image=Print }
      { 225     ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Work Order;
                                 ESP=Solicitud trabajo];
                      ToolTipML=[ENU=Prepare to registers actual item quantities or time used in connection with the sales order. For example, the document can be used by staff who perform any kind of processing work in connection with the sales order. It can also be exported to Excel if you need to process the sales line data further.;
                                 ESP=Preparar para registrar cantidades de producto reales o de tiempo empleados en relaci¢n con el pedido de venta. Por ejemplo, el personal que realice cualquier tipo de trabajo de procesamiento relacionado con el pedido de venta puede registrar estos aspectos en este documento. Tambi‚n se puede exportar a Excel si desea realizar un posterior procesamiento de los datos de la l¡nea de ventas.];
                      ApplicationArea=#Manufacturing;
                      Image=Print;
                      OnAction=BEGIN
                                 DocPrint.PrintSalesOrder(Rec,Usage::"Work Order");
                               END;
                                }
      { 5       ;2   ;Action    ;
                      CaptionML=[ENU=Pick Instruction;
                                 ESP=Instrucci¢n picking];
                      ToolTipML=[ENU=Print a picking list that shows which items to pick and ship for the sales order. If an item is assembled to order, then the report includes rows for the assembly components that must be picked. Use this report as a pick instruction to employees in charge of picking sales items or assembly components for the sales order.;
                                 ESP=Imprimir una lista de selecci¢n que muestra qu‚ elementos recoger y enviar para la orden de venta. Si un art¡culo se ensambla para un pedido, el informe incluye filas para los componentes del ensamblado que se deben recoger. Utilice este informe como una instrucci¢n de selecci¢n para los empleados a cargo de recoger art¡culos de ventas o componentes del ensamblado para el pedido de ventas.];
                      ApplicationArea=#Warehouse;
                      Image=Print;
                      OnAction=BEGIN
                                 DocPrint.PrintSalesOrder(Rec,Usage::"Pick Instruction");
                               END;
                                }
      { 31      ;1   ;ActionGroup;
                      CaptionML=[ENU=&Order Confirmation;
                                 ESP=&Confirmaci¢n pedido];
                      Image=Email }
      { 33      ;2   ;Action    ;
                      Name=SendEmailConfirmation;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Email Confirmation;
                                 ESP=Enviar confirmaci¢n por correo elect.];
                      ToolTipML=[ENU=Send a sales order confirmation by email. The attachment is sent as a .pdf.;
                                 ESP=Env¡a una confirmaci¢n de pedido de venta por correo electr¢nico. El archivo adjunto se env¡a en formato .pdf.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Email;
                      PromotedCategory=Category11;
                      OnAction=BEGIN
                                 DocPrint.EmailSalesHeader(Rec);
                               END;
                                }
      { 96      ;2   ;ActionGroup;
                      Visible=FALSE }
      { 224     ;3   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Print Confirmation;
                                 ESP=Imprimir confirmaci¢n];
                      ToolTipML=[ENU=Print a sales order confirmation.;
                                 ESP=Imprime una confirmaci¢n de pedido de venta.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=NOT IsOfficeHost;
                      Image=Print;
                      PromotedCategory=Category11;
                      OnAction=BEGIN
                                 DocPrint.PrintSalesOrder(Rec,Usage::"Order Confirmation");
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                CaptionML=[ENU=General;
                           ESP=General] }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the involved entry or record, according to the specified number series.;
                           ESP=Especifica el n£mero de la entrada o el registro relacionado, seg£n la serie num‚rica especificada.];
                ApplicationArea=#All;
                SourceExpr="No.";
                Visible=DocNoVisible;
                OnAssistEdit=BEGIN
                               IF AssistEdit(xRec) THEN
                                 CurrPage.UPDATE;
                             END;
                              }

    { 98  ;2   ;Field     ;
                CaptionML=[ENU=Customer No.;
                           ESP=N.§ de cliente];
                ToolTipML=[ENU=Specifies the number of the customer who will receive the products and be billed by default.;
                           ESP=Especifica el n£mero del cliente que recibir  los productos y al que se facturar  de forma predeterminada.];
                ApplicationArea=#Basic,#Suite;
                NotBlank=Yes;
                SourceExpr="Sell-to Customer No.";
                Importance=Additional;
                OnValidate=BEGIN
                             SelltoCustomerNoOnAfterValidate(Rec,xRec);
                             CurrPage.UPDATE;
                           END;
                            }

    { 6   ;2   ;Field     ;
                CaptionML=[ENU=Customer Name;
                           ESP=Nombre del cliente];
                ToolTipML=[ENU=Specifies the name of the customer who will receive the products and be billed by default.;
                           ESP=Especifica el nombre del cliente que recibir  los productos y al que se facturar  de forma predeterminada.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Customer Name";
                OnValidate=BEGIN
                             SelltoCustomerNoOnAfterValidate(Rec,xRec);

                             IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                               SalesCalcDiscountByType.ApplyDefaultInvoiceDiscount(0,Rec);

                             CurrPage.UPDATE;
                           END;

                ShowMandatory=TRUE }

    { 1170000001;2;Field  ;
                SourceExpr="Search Name" }

    { 114 ;2   ;Group     ;
                Visible=ShowQuoteNo;
                GroupType=Group }

    { 243 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the sales quote that the sales order was created from. You can track the number to sales quote documents that you have printed, saved, or emailed.;
                           ESP=Especifica el n£mero de la oferta de venta a partir de la cual se cre¢ el pedido de venta. Puede hacer un seguimiento del n£mero y ver los documentos de oferta de venta que imprimi¢, guard¢ o envi¢ por correo electr¢nico.];
                ApplicationArea=#All;
                SourceExpr="Quote No." }

    { 100 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies additional posting information for the document. After you post the document, the description can add detail to vendor and customer ledger entries.;
                           ESP=Especifica la informaci¢n de registro adicional del documento. Despu‚s de registrar el documento, la descripci¢n puede agregar detalles a los movimientos de cliente y proveedor.];
                ApplicationArea=#Suite;
                SourceExpr="Posting Description";
                Visible=FALSE }

    { 1170170003;2;Field  ;
                SourceExpr="Importe comisi¢n (DL)" }

    { 190 ;2   ;Group     ;
                CaptionML=[ENU=Sell-to;
                           ESP=Direcci¢n venta];
                GroupType=Group }

    { 81  ;3   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the address where the customer is located.;
                           ESP=Especifica la direcci¢n donde reside el cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Address";
                Importance=Additional;
                QuickEntry=FALSE }

    { 83  ;3   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies additional address information.;
                           ESP=Especifica informaci¢n adicional sobre la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Address 2";
                Importance=Additional;
                QuickEntry=FALSE }

    { 86  ;3   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to City";
                Importance=Additional;
                QuickEntry=FALSE }

    { 123 ;3   ;Group     ;
                Visible=IsSellToCountyVisible;
                GroupType=Group }

    { 125 ;4   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county of the address.;
                           ESP=Especifica el estado, la provincia o la comarca de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to County";
                Importance=Additional;
                QuickEntry=FALSE }

    { 115 ;3   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the postal code.;
                           ESP=Especifica el c¢digo postal.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Post Code";
                Importance=Additional;
                QuickEntry=FALSE }

    { 72  ;3   ;Field     ;
                CaptionML=[ENU=Country/Region Code;
                           ESP=C¢digo pa¡s/regi¢n];
                ToolTipML=[ENU=Specifies the country or region of the address.;
                           ESP=Especifica el pa¡s o la regi¢n de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Country/Region Code";
                Importance=Additional;
                OnValidate=BEGIN
                             IsSellToCountyVisible := FormatAddress.UseCounty("Sell-to Country/Region Code");
                           END;

                QuickEntry=FALSE }

    { 157 ;3   ;Field     ;
                CaptionML=[ENU=Contact No.;
                           ESP=N§ contacto];
                ToolTipML=[ENU=Specifies the number of the contact that the sales document will be sent to.;
                           ESP=Especifica el n£mero del contacto a quien se enviar  el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Contact No.";
                Importance=Additional;
                OnValidate=BEGIN
                             IF GETFILTER("Sell-to Contact No.") = xRec."Sell-to Contact No." THEN
                               IF "Sell-to Contact No." <> xRec."Sell-to Contact No." THEN
                                 SETRANGE("Sell-to Contact No.");
                           END;
                            }

    { 136 ;3   ;Field     ;
                CaptionML=[ENU=Phone No.;
                           ESP=N.§ de tel‚fono];
                ToolTipML=[ENU=Specifies the phone number of the contact that the sales document will be sent to.;
                           ESP=Especifica el n£mero de tel‚fono del contacto a quien se enviar  el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Phone No.";
                Importance=Additional }

    { 128 ;3   ;Field     ;
                CaptionML=[ENU=Email;
                           ESP=Correo electr¢nico];
                ToolTipML=[ENU=Specifies the email address of the contact that the sales document will be sent to.;
                           ESP=Especifica la direcci¢n de correo electr¢nico del contacto a quien se enviar  el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to E-Mail";
                Importance=Additional }

    { 8   ;2   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the person to contact at the customer.;
                           ESP=Especifica el nombre de la persona de contacto del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Contact";
                Editable="Sell-to Customer No." <> '' }

    { 198 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of archived versions for this document.;
                           ESP=Especifica el n£mero de versiones archivadas de este documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No. of Archived Versions";
                Importance=Additional }

    { 45  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date when the related document was created.;
                           ESP=Especifica la fecha en la que se cre¢ el documento correspondiente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Document Date";
                Importance=Additional }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date when the posting of the sales document will be recorded.;
                           ESP=Especifica la fecha en que se registrar  el registro del documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posting Date";
                Importance=Promoted;
                OnValidate=BEGIN
                             SaveInvoiceDiscountAmount;
                           END;
                            }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date when the order was created.;
                           ESP=Especifica la fecha en la que se cre¢ el pedido.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Order Date";
                Importance=Promoted;
                QuickEntry=FALSE }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when the related sales invoice must be paid.;
                           ESP=Especifica cu ndo se debe pagar la factura de venta correspondiente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Due Date";
                Importance=Promoted }

    { 135 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that the customer has asked for the order to be delivered.;
                           ESP=Especifica la fecha en la que el cliente ha solicitado que se entregue el pedido.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Requested Delivery Date" }

    { 137 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that you have promised to deliver the order, as a result of the Order Promising function.;
                           ESP=Especifica la fecha de entrega que acord¢ con el cliente como resultado de la funci¢n Compromiso entrega.];
                ApplicationArea=#OrderPromising;
                SourceExpr="Promised Delivery Date";
                Importance=Additional }

    { 155 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a document number that refers to the customer's or vendor's numbering system.;
                           ESP=Especifica un n£mero de documento que hace referencia al sistema de numeraci¢n del cliente o el proveedor.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="External Document No.";
                Importance=Promoted;
                ShowMandatory=ExternalDocNoMandatory }

    { 138 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's reference. The content will be printed on sales documents.;
                           ESP=Especifica la referencia del cliente. El contenido se imprimir  en los documentos de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Your Reference";
                Importance=Additional }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the name of the salesperson who is assigned to the customer.;
                           ESP=Especifica el nombre del vendedor asignado al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Salesperson Code";
                Importance=Additional;
                OnValidate=BEGIN
                             SalespersonCodeOnAfterValidate;
                           END;

                QuickEntry=FALSE }

    { 1148;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the campaign that the document is linked to.;
                           ESP=Especifica el n£mero de la campa¤a a la que est  vinculado el documento.];
                ApplicationArea=#RelationshipMgmt;
                SourceExpr="Campaign No.";
                Importance=Additional }

    { 245 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the opportunity that the sales quote is assigned to.;
                           ESP=Especifica el n£mero de la oportunidad a la que est  asignada la oferta de venta.];
                ApplicationArea=#RelationshipMgmt;
                SourceExpr="Opportunity No.";
                Importance=Additional }

    { 124 ;2   ;Field     ;
                AccessByPermission=TableData 5714=R;
                ToolTipML=[ENU=Specifies the code of the responsibility center, such as a distribution hub, that is associated with the involved user, company, customer, or vendor.;
                           ESP=Especifica el c¢digo del centro de responsabilidad, como, por ejemplo, un centro de distribuci¢n que est‚ asociado al usuario, la empresa, el cliente o el proveedor relacionado.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Responsibility Center";
                Importance=Additional }

    { 241 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the ID of the user who is responsible for the document.;
                           ESP=Especifica el id. del usuario responsable del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Assigned User ID";
                Importance=Additional }

    { 9   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the status of a job queue entry or task that handles the posting of sales orders.;
                           ESP=Especifica el estado de un movimiento de la cola de proyectos o de una tarea que controla el registro de los pedidos de venta.];
                ApplicationArea=#All;
                SourceExpr="Job Queue Status";
                Importance=Additional;
                Visible=JobQueuesUsed }

    { 129 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the document is open, waiting to be approved, has been invoiced for prepayment, or has been released to the next stage of processing.;
                           ESP=Especifica si el documento est  pendiente, en espera de aprobaci¢n, facturado para prepago o ha pasado a la etapa siguiente de procesamiento.];
                ApplicationArea=#Suite;
                SourceExpr=Status;
                Importance=Additional;
                QuickEntry=FALSE }

    { 113 ;2   ;Group     ;
                CaptionML=[ENU=Work Description;
                           ESP=Descripci¢n del trabajo];
                GroupType=Group }

    { 116 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the products or service being offered.;
                           ESP=Especifica los productos o servicios que se ofrecen.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=WorkDescription;
                Importance=Additional;
                MultiLine=Yes;
                OnValidate=BEGIN
                             SetWorkDescription(WorkDescription);
                           END;

                ShowCaption=No }

    { 58  ;1   ;Part      ;
                Name=SalesLines;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=Document No.=FIELD(No.);
                PagePartID=Page46;
                Enabled="Sell-to Customer No." <> '';
                Editable=DynamicEditable;
                UpdatePropagation=Both }

    { 1905885101;1;Group  ;
                CaptionML=[ENU=Invoicing;
                           ESP=Detalles factura];
                GroupType=Group }

    { 111 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the currency of amounts on the sales document.;
                           ESP=Especifica la divisa de los importes en el documento de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Currency Code";
                Importance=Promoted;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             SalesCalcDiscountByType.ApplyDefaultInvoiceDiscount(0,Rec);
                           END;

                OnAssistEdit=BEGIN
                               CLEAR(ChangeExchangeRate);
                               IF "Posting Date" <> 0D THEN
                                 ChangeExchangeRate.SetParameter("Currency Code","Currency Factor","Posting Date")
                               ELSE
                                 ChangeExchangeRate.SetParameter("Currency Code","Currency Factor",WORKDATE);
                               IF ChangeExchangeRate.RUNMODAL = ACTION::OK THEN BEGIN
                                 VALIDATE("Currency Factor",ChangeExchangeRate.GetParameter);
                                 SaveInvoiceDiscountAmount;
                               END;
                               CLEAR(ChangeExchangeRate);
                             END;
                              }

    { 131 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the Unit Price and Line Amount fields on document lines should be shown with or without VAT.;
                           ESP=Especifica si los campos Precio venta e Importe l¡nea en las l¡neas de documento deben mostrarse con o sin IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Prices Including VAT";
                OnValidate=BEGIN
                             PricesIncludingVATOnAfterValid;
                           END;
                            }

    { 221 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT specification of the involved customer or vendor to link transactions made for this record with the appropriate general ledger account according to the VAT posting setup.;
                           ESP=Indica la especificaci¢n de IVA del cliente o el proveedor relacionado para vincular las transacciones realizadas para este registro con la cuenta de contabilidad general correspondiente de acuerdo con la configuraci¢n de registro de IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Bus. Posting Group";
                OnValidate=BEGIN
                             IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                               SalesCalcDiscountByType.ApplyDefaultInvoiceDiscount(0,Rec);

                             CurrPage.UPDATE;
                           END;
                            }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a formula that calculates the payment due date, payment discount date, and payment discount amount.;
                           ESP=Especifica una f¢rmula que calcula la fecha de vencimiento del pago, la fecha de descuento por pronto pago y el importe de descuento por pronto pago.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Terms Code";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 105 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how to make payment, such as with bank transfer, cash, or check.;
                           ESP=Especifica c¢mo realizar el pago, por ejemplo transferencia bancaria, en efectivo o con cheque.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Method Code";
                Importance=Promoted;
                OnValidate=BEGIN
                             UpdatePaymentService;
                           END;

                ShowMandatory=TRUE }

    { 112 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the transaction is related to trade with a third party within the EU.;
                           ESP=Especifica si la transacci¢n est  relacionada con comercio con terceros dentro de la UE.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="EU 3-Party Trade" }

    { 76  ;2   ;Group     ;
                Visible=PaymentServiceVisible;
                GroupType=Group }

    { 16  ;3   ;Field     ;
                Name=SelectedPayments;
                CaptionML=[ENU=Payment Service;
                           ESP=Servicio de pago];
                ToolTipML=[ENU=Specifies the online payment service, such as PayPal, that customers can use to pay the sales document.;
                           ESP=Especifica el servicio de pago en l¡nea, como PayPal, que los clientes pueden usar para pagar el documento de venta.];
                ApplicationArea=#All;
                SourceExpr=GetSelectedPaymentServicesText;
                Enabled=PaymentServiceEnabled;
                Editable=FALSE;
                MultiLine=Yes;
                OnAssistEdit=BEGIN
                               ChangePaymentServiceSetting;
                             END;
                              }

    { 84  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                OnValidate=BEGIN
                             ShortcutDimension1CodeOnAfterV;
                           END;
                            }

    { 92  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                OnValidate=BEGIN
                             ShortcutDimension2CodeOnAfterV;
                           END;
                            }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the payment discount percentage granted if the customer pays on or before the date entered in the Pmt. Discount Date field.;
                           ESP=Especifica el porcentaje de descuento por pronto pago concedido si el cliente paga en o antes de la fecha introducida en el campo Fecha dto. P.P.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Discount %" }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date on which the amount in the entry must be paid for a payment discount to be granted.;
                           ESP=Especifica cu ndo hay que pagar el importe del movimiento para conseguir un descuento por pronto pago.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Pmt. Discount Date";
                Importance=Additional }

    { 27  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the direct-debit mandate that the customer has signed to allow direct debit collection of payments.;
                           ESP=Especifica la orden de domiciliaci¢n de adeudo directo que el cliente ha firmado para permitir realizar cobros por domiciliaci¢n de pagos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Direct Debit Mandate ID" }

    { 1100009;2;Group     ;
                CaptionML=[ENU=SII Information;
                           ESP=Informaci¢n SII];
                GroupType=Group }

    { 1100008;3;Field     ;
                CaptionML=[ENU=Operation Description;
                           ESP=Descripci¢n de la operaci¢n];
                ToolTipML=[ENU=Specifies the Operation Description.;
                           ESP=Especifica la descripci¢n de la operaci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=OperationDescription;
                MultiLine=Yes;
                OnValidate=VAR
                             SIIManagement@1100000 : Codeunit 10756;
                           BEGIN
                             SIIManagement.SplitOperationDescription(OperationDescription,"Operation Description","Operation Description 2");
                             VALIDATE("Operation Description");
                             VALIDATE("Operation Description 2");
                             MODIFY(TRUE);
                           END;
                            }

    { 1100007;3;Field     ;
                ToolTipML=[ENU=Specifies the Special Scheme Code.;
                           ESP=Especifica el c¢digo de esquema especial.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Special Scheme Code" }

    { 1100006;3;Field     ;
                ToolTipML=[ENU=Specifies the Invoice Type.;
                           ESP=Especifica el tipo de factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Invoice Type" }

    { 1100000;3;Field     ;
                ToolTipML=[ENU=Specifies the ID Type.;
                           ESP=Especifica el tipo de id.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="ID Type" }

    { 1100003;3;Field     ;
                ToolTipML=[ENU=Specifies the name of the company sucessor in connection with corporate restructuring.;
                           ESP=Especifica el nombre de la sucesora de la empresa en relaci¢n con reestructuraciones corporativas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Succeeded Company Name" }

    { 1100001;3;Field     ;
                ToolTipML=[ENU=Specifies the VAT registration number of the company sucessor in connection with corporate restructuring.;
                           ESP=Especifica el CIF/NIF de la sucesora de la empresa en relaci¢n con reestructuraciones corporativos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Succeeded VAT Registration No." }

    { 1901792801;1;Group  ;
                CaptionML=[ENU=Payment;
                           ESP=Pago] }

    { 1100020;2;Field     ;
                ToolTipML=[ENU=Specifies a code associated with a payment address other than the customer's standard payment address.;
                           ESP=Especifica un c¢digo asociado a una direcci¢n de pago diferente de la direcci¢n de pago habitual del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Pay-at Code" }

    { 1100022;2;Field     ;
                ToolTipML=[ENU=Specifies the customer bank code to assign to the sales header in this field.;
                           ESP=Especifica el c¢digo de banco de cliente que debe asignarse a la cabecera de ventas en este campo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cust. Bank Acc. Code" }

    { 1170170009;2;Field  ;
                SourceExpr="Bank Bal. Account Code" }

    { 1906801201;1;Group  ;
                CaptionML=[ENU=Shipping;
                           ESP=Env¡o y facturaci¢n];
                GroupType=Group }

    { 91  ;2   ;Group     ;
                GroupType=Group }

    { 90  ;3   ;Group     ;
                GroupType=Group }

    { 88  ;4   ;Field     ;
                Name=ShippingOptions;
                CaptionML=[ENU=Ship-to;
                           ESP=Direcci¢n de env¡o];
                ToolTipML=[ENU=Specifies the address that the products on the sales document are shipped to. Default (Sell-to Address): The same as the customer's sell-to address. Alternate Ship-to Address: One of the customer's alternate ship-to addresses. Custom Address: Any ship-to address that you specify in the fields below.;
                           ESP=Especifica la direcci¢n a la que se env¡an los productos del documento de venta. Predeterminada (direcci¢n de env¡o): la misma que la direcci¢n de env¡o del cliente. Direcci¢n de env¡o alternativa: una de las direcciones de env¡o alternativas del cliente. Direcci¢n personalizada: cualquier direcci¢n que especifique en los campos siguientes.];
                OptionCaptionML=[ENU=Default (Sell-to Address),Alternate Shipping Address,Custom Address;
                                 ESP=Predeterminada (direcci¢n de venta),Direcci¢n de env¡o alternativa,Direcci¢n personalizada];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=ShipToOptions;
                OnValidate=VAR
                             ShipToAddress@1001 : Record 222;
                             ShipToAddressList@1000 : Page 301;
                           BEGIN
                             CASE ShipToOptions OF
                               ShipToOptions::"Default (Sell-to Address)":
                                 BEGIN
                                   VALIDATE("Ship-to Code",'');
                                   CopySellToAddressToShipToAddress;
                                 END;
                               ShipToOptions::"Alternate Shipping Address":
                                 BEGIN
                                   ShipToAddress.SETRANGE("Customer No.","Sell-to Customer No.");
                                   ShipToAddressList.LOOKUPMODE := TRUE;
                                   ShipToAddressList.SETTABLEVIEW(ShipToAddress);

                                   IF ShipToAddressList.RUNMODAL = ACTION::LookupOK THEN BEGIN
                                     ShipToAddressList.GETRECORD(ShipToAddress);
                                     VALIDATE("Ship-to Code",ShipToAddress.Code);
                                     IsShipToCountyVisible := FormatAddress.UseCounty(ShipToAddress."Country/Region Code");
                                   END ELSE
                                     ShipToOptions := ShipToOptions::"Custom Address";
                                 END;
                               ShipToOptions::"Custom Address":
                                 BEGIN
                                   VALIDATE("Ship-to Code",'');
                                   IsShipToCountyVisible := FormatAddress.UseCounty("Ship-to Country/Region Code");
                                 END;
                             END;
                           END;
                            }

    { 4   ;4   ;Group     ;
                Visible=NOT (ShipToOptions = ShipToOptions::"Default (Sell-to Address)");
                GroupType=Group }

    { 36  ;5   ;Field     ;
                CaptionML=[ENU=Code;
                           ESP=C¢digo];
                ToolTipML=[ENU=Specifies the code for another shipment address than the customer's own address, which is entered by default.;
                           ESP=Especifica el c¢digo para otra direcci¢n de env¡o distinta a la propia direcci¢n del cliente, que se especifica de forma predeterminada.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Code";
                Importance=Promoted;
                Editable=ShipToOptions = ShipToOptions::"Alternate Shipping Address";
                OnValidate=VAR
                             ShipToAddress@1000 : Record 222;
                           BEGIN
                             IF (xRec."Ship-to Code" <> '') AND ("Ship-to Code" = '') THEN
                               ERROR(EmptyShipToCodeErr);
                             IF "Ship-to Code" <> '' THEN BEGIN
                               ShipToAddress.GET("Sell-to Customer No.","Ship-to Code");
                               IsShipToCountyVisible := FormatAddress.UseCounty(ShipToAddress."Country/Region Code");
                             END ELSE
                               IsShipToCountyVisible := FALSE;
                           END;
                            }

    { 38  ;5   ;Field     ;
                CaptionML=[ENU=Name;
                           ESP=Nombre];
                ToolTipML=[ENU=Specifies the name that products on the sales document will be shipped to.;
                           ESP=Especifica el nombre al que se enviar n los productos en el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Name";
                Editable=ShipToOptions = ShipToOptions::"Custom Address" }

    { 40  ;5   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the address that products on the sales document will be shipped to.;
                           ESP=Especifica la direcci¢n a la que se enviar n los productos en el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Address";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 42  ;5   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies additional address information.;
                           ESP=Especifica informaci¢n adicional sobre la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Address 2";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 44  ;5   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to City";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 297 ;5   ;Group     ;
                Visible=IsShipToCountyVisible;
                GroupType=Group }

    { 127 ;6   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county of the address.;
                           ESP=Especifica el estado, la provincia o la comarca de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to County";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 97  ;5   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the postal code.;
                           ESP=Especifica el c¢digo postal.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Post Code";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 95  ;5   ;Field     ;
                CaptionML=[ENU=Country/Region;
                           ESP=Pa¡s/regi¢n];
                ToolTipML=[ENU=Specifies the customer's country/region.;
                           ESP=Especifica el pa¡s o regi¢n del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Country/Region Code";
                Importance=Additional;
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                OnValidate=BEGIN
                             IsShipToCountyVisible := FormatAddress.UseCounty("Ship-to Country/Region Code");
                           END;

                QuickEntry=FALSE }

    { 46  ;4   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the contact person at the address that products on the sales document will be shipped to.;
                           ESP=Especifica el nombre de la persona de contacto en la direcci¢n a la que se enviar n los productos en el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Contact" }

    { 77  ;3   ;Group     ;
                CaptionML=[ENU=Shipment Method;
                           ESP=Condiciones env¡o];
                GroupType=Group }

    { 48  ;4   ;Field     ;
                CaptionML=[ENU=Code;
                           ESP=C¢digo];
                ToolTipML=[ENU=Specifies how items on the sales document are shipped to the customer.;
                           ESP=Especifica la manera en que los productos del documento de venta se env¡an al cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Method Code";
                Importance=Additional }

    { 107 ;4   ;Field     ;
                CaptionML=[ENU=Agent;
                           ESP=Agente];
                ToolTipML=[ENU=Specifies which shipping agent is used to transport the items on the sales document to the customer.;
                           ESP=Especifica el transportista que se usa para transportar los productos del documento de venta al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Code";
                Importance=Additional }

    { 139 ;4   ;Field     ;
                CaptionML=[ENU=Agent Service;
                           ESP=Servicio de agente];
                ToolTipML=[ENU=Specifies the code that represents the default shipping agent service you are using for this sales order.;
                           ESP=Especifica el c¢digo que representa el servicio de transportista predeterminado que se usa para este pedido de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Service Code";
                Importance=Additional }

    { 109 ;4   ;Field     ;
                ToolTipML=[ENU=Specifies the shipping agent's package number.;
                           ESP=Especifica el n£mero de paquete del transportista.];
                ApplicationArea=#Suite;
                SourceExpr="Package Tracking No.";
                Importance=Additional }

    { 85  ;2   ;Group     ;
                GroupType=Group }

    { 93  ;3   ;Field     ;
                Name=BillToOptions;
                CaptionML=[ENU=Bill-to;
                           ESP=Direcci¢n facturaci¢n];
                ToolTipML=[ENU=Specifies the customer that the sales invoice will be sent to. Default (Customer): The same as the customer on the sales invoice. Another Customer: Any customer that you specify in the fields below.;
                           ESP=Especifica el cliente al que se enviar  la factura de venta. Predeterminado (cliente): el mismo que el cliente en la factura de venta. Otro cliente: cualquier cliente que especifique en los campos siguientes.];
                OptionCaptionML=[ENU=Default (Customer),Another Customer,Custom Address;
                                 ESP=Predeterminado (cliente),Otro cliente,Direcci¢n personalizada];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=BillToOptions;
                OnValidate=BEGIN
                             IF BillToOptions = BillToOptions::"Default (Customer)" THEN BEGIN
                               VALIDATE("Bill-to Customer No.","Sell-to Customer No.");
                               RecallModifyAddressNotification(GetModifyBillToCustomerAddressNotificationId);
                             END;

                             CopySellToAddressToBillToAddress;
                           END;
                            }

    { 82  ;3   ;Group     ;
                Visible=NOT (BillToOptions = BillToOptions::"Default (Customer)");
                GroupType=Group }

    { 18  ;4   ;Field     ;
                CaptionML=[ENU=Name;
                           ESP=Nombre];
                ToolTipML=[ENU=Specifies the customer to whom you will send the sales invoice, when different from the customer that you are selling to.;
                           ESP=Especifica el cliente al que se enviar  la factura de venta, cuando es distinto del cliente al que se realiza la venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Name";
                Importance=Promoted;
                Enabled=BillToOptions = BillToOptions::"Another Customer";
                Editable=BillToOptions = BillToOptions::"Another Customer";
                OnValidate=BEGIN
                             IF GETFILTER("Bill-to Customer No.") = xRec."Bill-to Customer No." THEN
                               IF "Bill-to Customer No." <> xRec."Bill-to Customer No." THEN
                                 SETRANGE("Bill-to Customer No.");

                             CurrPage.SAVERECORD;
                             IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                               SalesCalcDiscountByType.ApplyDefaultInvoiceDiscount(0,Rec);

                             CurrPage.UPDATE(FALSE);
                           END;
                            }

    { 20  ;4   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the address of the customer that you will send the invoice to.;
                           ESP=Especifica la direcci¢n del cliente a quien se enviar  la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Address";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 22  ;4   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies additional address information.;
                           ESP=Especifica informaci¢n adicional sobre la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Address 2";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 24  ;4   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to City";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 130 ;4   ;Group     ;
                Visible=IsBillToCountyVisible;
                GroupType=Group }

    { 132 ;5   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county of the address.;
                           ESP=Especifica el estado, la provincia o la comarca de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to County";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 89  ;4   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the postal code.;
                           ESP=Especifica el c¢digo postal.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Post Code";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 126 ;4   ;Field     ;
                CaptionML=[ENU=Country/Region Code;
                           ESP=C¢digo pa¡s/regi¢n];
                ToolTipML=[ENU=Specifies the country or region of the address.;
                           ESP=Especifica el pa¡s o la regi¢n de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Country/Region Code";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                OnValidate=BEGIN
                             IsBillToCountyVisible := FormatAddress.UseCounty("Bill-to Country/Region Code");
                           END;

                QuickEntry=FALSE }

    { 159 ;4   ;Field     ;
                CaptionML=[ENU=Contact No.;
                           ESP=N§ contacto];
                ToolTipML=[ENU=Specifies the number of the contact the invoice will be sent to.;
                           ESP=Especifica el n£mero del contacto a quien se enviar  la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Contact No.";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.") }

    { 26  ;4   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the person you should contact at the customer who you are sending the invoice to.;
                           ESP=Especifica el nombre de la persona con quien contactarse cuando es necesario comunicarse con el cliente al que se enviar  la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Contact";
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.") }

    { 1170170008;2;Field  ;
                SourceExpr="Harvest Code" }

    { 94  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the location from where inventory items to the customer on the sales document are to be shipped by default.;
                           ESP=Especifica el almac‚n desde el que se env¡an de forma predeterminada los productos de inventario al cliente en el documento de venta.];
                ApplicationArea=#Location;
                SourceExpr="Location Code" }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when items on the document are shipped or were shipped. A shipment date is usually calculated from a requested delivery date plus lead time.;
                           ESP=Especifica cu ndo se van a enviar o se han enviado los productos del documento. Se calcula normalmente una fecha de env¡o con la fecha de entrega solicitada y el plazo de seguridad.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Date";
                Importance=Promoted }

    { 119 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the customer accepts partial shipment of orders.;
                           ESP=Especifica si el cliente acepta env¡os parciales de pedidos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipping Advice";
                Importance=Additional;
                OnValidate=VAR
                             ConfirmManagement@1000 : Codeunit 27;
                           BEGIN
                             IF "Shipping Advice" <> xRec."Shipping Advice" THEN
                               IF NOT ConfirmManagement.ConfirmProcess(STRSUBSTNO(Text001,FIELDCAPTION("Shipping Advice")),TRUE) THEN
                                 ERROR(Text002);
                           END;
                            }

    { 141 ;2   ;Field     ;
                ToolTipML=[ENU="Specifies a date formula for the time it takes to get items ready to ship from this location. The time element is used in the calculation of the delivery date as follows: Shipment Date + Outbound Warehouse Handling Time = Planned Shipment Date + Shipping Time = Planned Delivery Date.";
                           ESP="Especifica una f¢rmula de fecha con el tiempo que se tarda en preparar los productos para su env¡o desde este almac‚n. El elemento de tiempo se utiliza en el c lculo de la fecha de entrega de la siguiente manera: fecha env¡o + tiempo de manipulaci¢n en el almac‚n de salida = fecha env¡o planificada + tiempo env¡o = fecha entrega planificada."];
                ApplicationArea=#Warehouse;
                SourceExpr="Outbound Whse. Handling Time";
                Importance=Additional }

    { 143 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how long it takes from when the items are shipped from the warehouse to when they are delivered.;
                           ESP=Especifica el tiempo que transcurre desde que se env¡an los productos desde el almac‚n hasta que se entregan.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipping Time";
                Importance=Additional }

    { 145 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that the shipment of one or more lines has been delayed, or that the shipment date is before the work date.;
                           ESP=Especifica que se ha retrasado el env¡o de una o varias l¡neas o que la fecha de env¡o es anterior a la fecha de trabajo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Late Order Shipping";
                Importance=Additional }

    { 1907468901;1;Group  ;
                CaptionML=[ENU=Foreign Trade;
                           ESP=Comercio exterior] }

    { 103 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a specification of the document's transaction, for the purpose of reporting to INTRASTAT.;
                           ESP=Especifica una especificaci¢n de transacci¢n del documento de venta con el fin de notificarla a INTRASTAT.];
                ApplicationArea=#Suite;
                SourceExpr="Transaction Specification" }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of transaction that the document represents, for the purpose of reporting to INTRASTAT.;
                           ESP=Especifica el tipo de transacci¢n que representa el documento con el fin de notificarlo a INTRASTAT.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Transaction Type" }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the transport method, for the purpose of reporting to INTRASTAT.;
                           ESP=Especifica el modo de transporte con el fin de informar a INTRASTAT.];
                ApplicationArea=#Suite;
                SourceExpr="Transport Method" }

    { 99  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the point of exit through which you ship the items out of your country/region, for reporting to Intrastat.;
                           ESP=Especifica el punto de salida a trav‚s del cual se enviar n los productos fuera de su pa¡s o regi¢n, con el fin de informar a Intrastat.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Exit Point" }

    { 101 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the area of the customer or vendor, for the purpose of reporting to INTRASTAT.;
                           ESP=Especifica el  rea del cliente o proveedor con el fin de informar a INTRASTAT.];
                ApplicationArea=#Suite;
                SourceExpr=Area }

    { 1900201301;1;Group  ;
                CaptionML=[ENU=Prepayment;
                           ESP=Prepago] }

    { 228 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the prepayment percentage to use to calculate the prepayment for sales.;
                           ESP=Especifica el porcentaje de prepago que se debe usar para calcular el prepago de las ventas.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepayment %";
                Importance=Promoted;
                OnValidate=BEGIN
                             Prepayment37OnAfterValidate;
                           END;
                            }

    { 229 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that prepayments on the sales order are combined if they have the same general ledger account for prepayments or the same dimensions.;
                           ESP=Especifica que los prepagos del pedido de venta est n combinados si tienen la misma cuenta de contabilidad general para los prepagos o las mismas dimensiones.];
                ApplicationArea=#Dimensions;
                SourceExpr="Compress Prepayment" }

    { 162 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code that represents the payment terms for prepayment invoices related to the sales document.;
                           ESP=Especifica el c¢digo que representa los t‚rminos de pago para las facturas de prepago relacionadas con el documento de venta.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepmt. Payment Terms Code" }

    { 239 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when the prepayment invoice for this sales order is due.;
                           ESP=Especifica cu ndo vence la factura de prepago para este pedido de venta.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepayment Due Date";
                Importance=Promoted }

    { 164 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the payment discount percent granted on the prepayment if the customer pays on or before the date entered in the Prepmt. Pmt. Discount Date field.;
                           ESP=Especifica el porcentaje de descuento por pronto pago que se concedi¢ al prepago si el cliente paga en o antes de la fecha introducida en el campo Fecha descuento prepago.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepmt. Payment Discount %" }

    { 70  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the last date the customer can pay the prepayment invoice and still receive a payment discount on the prepayment amount.;
                           ESP=Especifica la fecha hasta la que el cliente puede abonar la factura de prepago y obtener un descuento por pronto pago en la cantidad de prepago.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepmt. Pmt. Discount Date" }

    { 1170170000;1;Group  ;
                CaptionML=[ENU=Annex;
                           ESP=Anexos];
                GroupType=Group }

    { 1170170001;2;Field  ;
                SourceExpr="Anexo No." }

    { 1901275107;1;Part   ;
                Name=Attached Documents;
                CaptionML=[ENU=Attachments;
                           ESP=Datos adjuntos];
                ApplicationArea=#All;
                SubPageLink=Table ID=CONST(36),
                            No.=FIELD(No.),
                            Document Type=FIELD(Document Type);
                PagePartID=Page1174;
                PartType=Page }

    { 1903720907;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Sell-to Customer No.);
                PagePartID=Page9080;
                PartType=Page }

    { 1902018507;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Bill-to Customer No.);
                PagePartID=Page9082;
                Visible=FALSE;
                PartType=Page }

    { 1900316107;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Sell-to Customer No.);
                PagePartID=Page9084;
                PartType=Page }

    { 1901314507;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page9089;
                ProviderID=58;
                PartType=Page }

    { 1906354007;1;Part   ;
                Name=ApprovalFactBox;
                ApplicationArea=#Basic,#Suite;
                PagePartID=Page9092;
                Visible=FALSE;
                PartType=Page }

    { 49  ;1   ;Part      ;
                Name=IncomingDocAttachFactBox;
                ApplicationArea=#Basic,#Suite;
                PagePartID=Page193;
                Visible=FALSE;
                PartType=Page;
                ShowFilter=No }

    { 1907012907;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page9108;
                ProviderID=58;
                Visible=FALSE;
                PartType=Page }

    { 1901796907;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page9109;
                ProviderID=58;
                Visible=FALSE;
                PartType=Page }

    { 1907234507;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Bill-to Customer No.);
                PagePartID=Page9081;
                Visible=FALSE;
                PartType=Page }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      CopySalesDoc@1001 : Report 292;
      MoveNegSalesLines@1007 : Report 6699;
      ApplicationAreaMgmtFacade@1022 : Codeunit 9179;
      ApprovalsMgmt@1012 : Codeunit 1535;
      ReportPrint@1002 : Codeunit 228;
      DocPrint@1003 : Codeunit 229;
      ArchiveManagement@1008 : Codeunit 5063;
      SalesCalcDiscountByType@1014 : Codeunit 56;
      UserMgt@1006 : Codeunit 5700;
      CustomerMgt@1047 : Codeunit 1302;
      FormatAddress@1044 : Codeunit 365;
      ChangeExchangeRate@1005 : Page 511;
      Usage@1010 : 'Order Confirmation,Work Order,Pick Instruction';
      NavigateAfterPost@1029 : 'Posted Document,New Document,Nowhere';
      JobQueueVisible@1004 : Boolean INDATASET;
      Text001@1015 : TextConst 'ENU=Do you want to change %1 in all related records in the warehouse?;ESP=¨Desea cambiar %1 en todos los registros relacionados del almac‚n?';
      Text002@1011 : TextConst 'ENU=The update has been interrupted to respect the warning.;ESP=Se ha interrumpido la actualizaci¢n para respetar la advertencia.';
      DynamicEditable@1009 : Boolean;
      TPV@1170170003 : Record 7014655;
      GestAccTPV@1170170002 : Codeunit 7014552;
      GestCabVenta@1170170001 : Codeunit 7014615;
      GestEMCS@1170170000 : Codeunit 7014538;
      SalesSetup@1170170004 : Record 311;
      HasIncomingDocument@1020 : Boolean;
      DocNoVisible@1013 : Boolean;
      ExternalDocNoMandatory@1016 : Boolean;
      OpenApprovalEntriesExistForCurrUser@1024 : Boolean;
      OpenApprovalEntriesExist@1023 : Boolean;
      CRMIntegrationEnabled@1000 : Boolean;
      CRMIsCoupledToRecord@1017 : Boolean;
      ShowWorkflowStatus@1018 : Boolean;
      IsOfficeHost@1019 : Boolean;
      CanCancelApprovalForRecord@1021 : Boolean;
      JobQueuesUsed@1026 : Boolean;
      ShowQuoteNo@1025 : Boolean;
      DocumentIsPosted@1027 : Boolean;
      OpenPostedSalesOrderQst@1028 : TextConst '@@@="%1 = posted document number";ENU=The order is posted as number %1 and moved to the Posted Sales Invoices window.\\Do you want to open the posted invoice?;ESP=El pedido se registr¢ con el n£mero %1 y se movi¢ a la ventana de facturas de venta registradas.\\¨Quiere abrir la factura registrada?';
      PaymentServiceVisible@1030 : Boolean;
      PaymentServiceEnabled@1031 : Boolean;
      CallNotificationCheck@1037 : Boolean;
      ShipToOptions@1033 : 'Default (Sell-to Address),Alternate Shipping Address,Custom Address';
      BillToOptions@1032 : 'Default (Customer),Another Customer,Custom Address';
      EmptyShipToCodeErr@1034 : TextConst 'ENU=The Code field can only be empty if you select Custom Address in the Ship-to field.;ESP=El campo C¢digo solo puede estar vac¡o si selecciona Direcci¢n personalizada en el campo Direcci¢n de env¡o.';
      CanRequestApprovalForFlow@1036 : Boolean;
      CanCancelApprovalForFlow@1035 : Boolean;
      IsCustomerOrContactNotEmpty@1039 : Boolean;
      WorkDescription@1038 : Text;
      OperationDescription@1100000 : Text[500];
      IsSaas@1041 : Boolean;
      IsBillToCountyVisible@1043 : Boolean;
      IsSellToCountyVisible@1042 : Boolean;
      IsShipToCountyVisible@1040 : Boolean;

    LOCAL PROCEDURE ActivateFields@11();
    BEGIN
      IsBillToCountyVisible := FormatAddress.UseCounty("Bill-to Country/Region Code");
      IsSellToCountyVisible := FormatAddress.UseCounty("Sell-to Country/Region Code");
      IsShipToCountyVisible := FormatAddress.UseCounty("Ship-to Country/Region Code");
    END;

    LOCAL PROCEDURE Post@4(PostingCodeunitID@1000 : Integer;Navigate@1004 : Option);
    VAR
      SalesHeader@1001 : Record 36;
      LinesInstructionMgt@1002 : Codeunit 1320;
      InstructionMgt@1003 : Codeunit 1330;
      IsScheduledPosting@1005 : Boolean;
    BEGIN
      IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
        LinesInstructionMgt.SalesCheckAllLinesHaveQuantityAssigned(Rec);

      SendToPosting(PostingCodeunitID);

      IsScheduledPosting := "Job Queue Status" = "Job Queue Status"::"Scheduled for Posting";
      DocumentIsPosted := (NOT SalesHeader.GET("Document Type","No.")) OR IsScheduledPosting;
      OnPostOnAfterSetDocumentIsPosted(SalesHeader,IsScheduledPosting,DocumentIsPosted);

      IF IsScheduledPosting THEN
        CurrPage.CLOSE;
      CurrPage.UPDATE(FALSE);

      IF PostingCodeunitID <> CODEUNIT::"Sales-Post (Yes/No)" THEN
        EXIT;

      CASE Navigate OF
        NavigateAfterPost::"Posted Document":
          IF InstructionMgt.IsEnabled(InstructionMgt.ShowPostedConfirmationMessageCode) THEN
            ShowPostedConfirmationMessage;
        NavigateAfterPost::"New Document":
          IF DocumentIsPosted THEN BEGIN
            SalesHeader.INIT;
            SalesHeader.VALIDATE("Document Type",SalesHeader."Document Type"::Order);
            OnPostOnBeforeSalesHeaderInsert(SalesHeader);
            SalesHeader.INSERT(TRUE);
            PAGE.RUN(PAGE::"Sales Order",SalesHeader);
          END;
      END;
    END;

    LOCAL PROCEDURE ApproveCalcInvDisc@3();
    BEGIN
      CurrPage.SalesLines.PAGE.ApproveCalcInvDisc;
    END;

    LOCAL PROCEDURE SaveInvoiceDiscountAmount@14();
    VAR
      DocumentTotals@1000 : Codeunit 57;
    BEGIN
      CurrPage.SAVERECORD;
      DocumentTotals.SalesRedistributeInvoiceDiscountAmountsOnDocument(Rec);
      CurrPage.UPDATE(FALSE);
    END;

    LOCAL PROCEDURE SalespersonCodeOnAfterValidate@5699();
    BEGIN
      CurrPage.SalesLines.PAGE.UpdateForm(TRUE);
    END;

    LOCAL PROCEDURE ShortcutDimension1CodeOnAfterV@3212();
    BEGIN
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE ShortcutDimension2CodeOnAfterV@2528();
    BEGIN
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE PricesIncludingVATOnAfterValid@2899();
    BEGIN
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE Prepayment37OnAfterValidate@4319();
    BEGIN
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE SetDocNoVisible@2();
    VAR
      DocumentNoVisibility@1000 : Codeunit 1400;
      DocType@1003 : 'Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,Reminder,FinChMemo';
    BEGIN
      DocNoVisible := DocumentNoVisibility.SalesDocumentNoIsVisible(DocType::Order,"No.");
    END;

    LOCAL PROCEDURE SetExtDocNoMandatoryCondition@5();
    VAR
      SalesReceivablesSetup@1000 : Record 311;
    BEGIN
      SalesReceivablesSetup.GET;
      ExternalDocNoMandatory := SalesReceivablesSetup."Ext. Doc. No. Mandatory"
    END;

    LOCAL PROCEDURE ShowPreview@6();
    VAR
      SalesPostYesNo@1000 : Codeunit 81;
    BEGIN
      SalesPostYesNo.Preview(Rec);
    END;

    LOCAL PROCEDURE ShowPrepmtInvoicePreview@15();
    VAR
      SalesPostPrepaymentYesNo@1000 : Codeunit 443;
    BEGIN
      SalesPostPrepaymentYesNo.Preview(Rec,2);
    END;

    LOCAL PROCEDURE ShowPrepmtCrMemoPreview@16();
    VAR
      SalesPostPrepaymentYesNo@1000 : Codeunit 443;
    BEGIN
      SalesPostPrepaymentYesNo.Preview(Rec,3);
    END;

    LOCAL PROCEDURE SetControlVisibility@7();
    VAR
      ApprovalsMgmt@1002 : Codeunit 1535;
      WorkflowWebhookMgt@1000 : Codeunit 1543;
    BEGIN
      JobQueueVisible := "Job Queue Status" = "Job Queue Status"::"Scheduled for Posting";
      HasIncomingDocument := "Incoming Document Entry No." <> 0;
      SetExtDocNoMandatoryCondition;

      OpenApprovalEntriesExistForCurrUser := ApprovalsMgmt.HasOpenApprovalEntriesForCurrentUser(RECORDID);
      OpenApprovalEntriesExist := ApprovalsMgmt.HasOpenApprovalEntries(RECORDID);
      CanCancelApprovalForRecord := ApprovalsMgmt.CanCancelApprovalForRecord(RECORDID);

      WorkflowWebhookMgt.GetCanRequestAndCanCancel(RECORDID,CanRequestApprovalForFlow,CanCancelApprovalForFlow);
      IsCustomerOrContactNotEmpty := ("Sell-to Customer No." <> '') OR ("Sell-to Contact No." <> '');
    END;

    LOCAL PROCEDURE ShowPostedConfirmationMessage@17();
    VAR
      OrderSalesHeader@1003 : Record 36;
      SalesInvoiceHeader@1000 : Record 112;
      InstructionMgt@1002 : Codeunit 1330;
    BEGIN
      IF NOT OrderSalesHeader.GET("Document Type","No.") THEN BEGIN
        SalesInvoiceHeader.SETRANGE("No.","Last Posting No.");
        IF SalesInvoiceHeader.FINDFIRST THEN
          IF InstructionMgt.ShowConfirm(STRSUBSTNO(OpenPostedSalesOrderQst,SalesInvoiceHeader."No."),
               InstructionMgt.ShowPostedConfirmationMessageCode)
          THEN
            PAGE.RUN(PAGE::"Posted Sales Invoice",SalesInvoiceHeader);
      END;
    END;

    LOCAL PROCEDURE UpdatePaymentService@1();
    VAR
      PaymentServiceSetup@1000 : Record 1060;
    BEGIN
      PaymentServiceVisible := PaymentServiceSetup.IsPaymentServiceVisible;
      PaymentServiceEnabled := PaymentServiceSetup.CanChangePaymentService(Rec);
    END;

    [External]
    PROCEDURE UpdateShipToBillToGroupVisibility@9();
    BEGIN
      CustomerMgt.CalculateShipToBillToOptions(ShipToOptions,BillToOptions,Rec);
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeStatisticsAction@8(VAR SalesHeader@1000 : Record 36;VAR Handled@1001 : Boolean);
    BEGIN
    END;

    [External]
    PROCEDURE CheckNotificationsOnce@10();
    BEGIN
      CallNotificationCheck := TRUE;
    END;

    LOCAL PROCEDURE ShowReleaseNotification@12() : Boolean;
    VAR
      LocationsQuery@1001 : Query 5001;
    BEGIN
      IF Status <> Status::Released THEN BEGIN
        LocationsQuery.SETRANGE(Document_No,"No.");
        LocationsQuery.SETRANGE(Require_Pick,TRUE);
        LocationsQuery.OPEN;
        IF LocationsQuery.READ THEN
          EXIT(TRUE);
        LocationsQuery.SETRANGE(Require_Pick);
        LocationsQuery.SETRANGE(Require_Shipment,TRUE);
        LocationsQuery.OPEN;
        EXIT(LocationsQuery.READ);
      END;
      EXIT(FALSE);
    END;

    [Integration]
    LOCAL PROCEDURE OnPostOnAfterSetDocumentIsPosted@13(SalesHeader@1000 : Record 36;VAR IsScheduledPosting@1001 : Boolean;VAR DocumentIsPosted@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnPostOnBeforeSalesHeaderInsert@18(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    BEGIN
    {
      BAIN-0054 VM 130308 Sacar un bot¢n aparte para calcular el descuento promocional
      BAIN-0043 JA 271207 A¤adir campo: "Search Name"
    }
    END.
  }
}

OBJECT Page 43 Sales Invoice
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=17:20:39;
    Modified=Yes;
    Version List=NAVW114.07,NAVES14.07,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Sales Invoice;
               ESP=Factura venta];
    SourceTable=Table36;
    SourceTableView=WHERE(Document Type=FILTER(Invoice));
    PageType=Document;
    RefreshOnActivate=Yes;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Approve,Posting,Prepare,Invoice,Release,Request Approval,View,Navigate;
                                ESP=Nuevo,Proceso,Informe,Aprobar,Registrar,Preparar,Factura,Liberar,Solicitar aprobaci¢n,Ver,Navegar];
    OnInit=VAR
             SalesReceivablesSetup@1001 : Record 311;
           BEGIN
             JobQueuesUsed := SalesReceivablesSetup.JobQueueActive;
             SetExtDocNoMandatoryCondition;
           END;

    OnOpenPage=VAR
                 PaymentServiceSetup@1002 : Record 1060;
                 OfficeMgt@1000 : Codeunit 1630;
                 PermissionManager@1001 : Codeunit 9002;
                 SIIManagement@1100000 : Codeunit 10756;
               BEGIN
                 IF UserMgt.GetSalesFilter <> '' THEN BEGIN
                   FILTERGROUP(2);
                   SETRANGE("Responsibility Center",UserMgt.GetSalesFilter);
                   FILTERGROUP(0);
                 END;
                 // VNTES.i
                 IF TPV.READPERMISSION THEN
                   GestAccTPV.TraeTPVActivo(Rec,xRec,TPV);
                 FILTERGROUP(2);
                 SETRANGE("POS Code",TPV.C¢digo);
                 FILTERGROUP(0);
                 // VNTES.f

                 ActivateFields;

                 SetDocNoVisible;
                 SetControlAppearance;

                 IF "Quote No." <> '' THEN
                   ShowQuoteNo := TRUE;

                 IF "No." = '' THEN
                   IF OfficeMgt.CheckForExistingInvoice("Sell-to Customer No.") THEN
                     ERROR(''); // Cancel invoice creation
                 IsSaaS := PermissionManager.SoftwareAsAService;
                 IF ("No." <> '') AND ("Sell-to Customer No." = '') THEN
                   DocumentIsPosted := (NOT GET("Document Type","No."));

                 SIIManagement.CombineOperationDescription("Operation Description","Operation Description 2",OperationDescription);
                 PaymentServiceVisible := PaymentServiceSetup.IsPaymentServiceVisible;
               END;

    OnAfterGetRecord=BEGIN
                       ShowQuoteNo := "Quote No." <> '';

                       SetControlAppearance;
                       WorkDescription := GetWorkDescription;
                       UpdateShipToBillToGroupVisibility
                     END;

    OnNewRecord=BEGIN
                  xRec.INIT;
                  "Responsibility Center" := UserMgt.GetSalesFilter;
                  IF (NOT DocNoVisible) AND ("No." = '') THEN
                    SetSellToCustomerFromFilter;

                  SetDefaultPaymentServices;
                  UpdateShipToBillToGroupVisibility;
                END;

    OnInsertRecord=BEGIN
                     IF DocNoVisible THEN
                       CheckCreditMaxBeforeInsert;

                     IF ("Sell-to Customer No." = '') AND (GETFILTER("Sell-to Customer No.") <> '') THEN
                       CurrPage.UPDATE(FALSE);
                   END;

    OnDeleteRecord=BEGIN
                     CurrPage.SAVERECORD;
                     EXIT(ConfirmDeletion);
                   END;

    OnQueryClosePage=BEGIN
                       IF NOT (SkipConfirmationDialogOnClosing OR DocumentIsPosted) THEN
                         EXIT(ConfirmCloseUnposted)
                     END;

    OnAfterGetCurrRecord=VAR
                           SIIManagement@1100000 : Codeunit 10756;
                         BEGIN
                           CurrPage.IncomingDocAttachFactBox.PAGE.LoadDataFromRecord(Rec);
                           CurrPage.ApprovalFactBox.PAGE.UpdateApprovalEntriesFromSourceRecord(RECORDID);
                           ShowWorkflowStatus := CurrPage.WorkflowStatus.PAGE.SetFilterOnWorkflowRecord(RECORDID);

                           UpdatePaymentService;

                           SIIManagement.CombineOperationDescription("Operation Description","Operation Description 2",OperationDescription);
                         END;

    ActionList=ACTIONS
    {
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 57      ;1   ;ActionGroup;
                      CaptionML=[ENU=&Invoice;
                                 ESP=&Factura];
                      Image=Invoice }
      { 59      ;2   ;Action    ;
                      Name=Statistics;
                      ShortCutKey=F7;
                      CaptionML=[ENU=Statistics;
                                 ESP=Estad¡sticas];
                      ToolTipML=[ENU=View statistical information, such as the value of posted entries, for the record.;
                                 ESP=Permite ver informaci¢n estad¡stica del registro, como el valor de los movimientos registrados.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled="No." <> '';
                      PromotedIsBig=Yes;
                      Image=Statistics;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 Handled@1000 : Boolean;
                               BEGIN
                                 OnBeforeStatisticsAction(Rec,Handled);
                                 IF NOT Handled THEN BEGIN
                                   CalcInvDiscForHeader;
                                   COMMIT;
                                   PAGE.RUNMODAL(PAGE::"Sales Statistics",Rec);
                                   SalesCalcDiscountByType.ResetRecalculateInvoiceDisc(Rec);
                                 END
                               END;
                                }
      { 61      ;2   ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      RunObject=Page 67;
                      RunPageLink=Document Type=FIELD(Document Type),
                                  No.=FIELD(No.),
                                  Document Line No.=CONST(0);
                      Promoted=Yes;
                      Image=ViewComments;
                      PromotedCategory=Category7 }
      { 162     ;2   ;Action    ;
                      Name=Approvals;
                      AccessByPermission=TableData 454=R;
                      CaptionML=[ENU=Approvals;
                                 ESP=Aprobaciones];
                      ToolTipML=[ENU=View a list of the records that are waiting to be approved. For example, you can see who requested the record to be approved, when it was sent, and when it is due to be approved.;
                                 ESP=Permite ver una lista de los registros en espera de aprobaci¢n. Por ejemplo, puede ver qui‚n ha solicitado la aprobaci¢n del registro, cu ndo se envi¢ y la fecha de vencimiento de la aprobaci¢n.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Image=Approvals;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 WorkflowsEntriesBuffer@1001 : Record 832;
                               BEGIN
                                 WorkflowsEntriesBuffer.RunWorkflowEntriesPage(RECORDID,DATABASE::"Sales Header","Document Type","No.");
                               END;
                                }
      { 6       ;2   ;Action    ;
                      Name=Function_CustomerCard;
                      ShortCutKey=Shift+F7;
                      CaptionML=[ENU=Customer;
                                 ESP=Cliente];
                      ToolTipML=[ENU=View or edit detailed information about the customer on the sales document.;
                                 ESP=Permite ver o editar la informaci¢n detallada sobre el cliente en el documento de venta.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 21;
                      RunPageLink=No.=FIELD(Sell-to Customer No.);
                      Promoted=Yes;
                      Enabled=IsCustomerOrContactNotEmpty;
                      Image=Customer;
                      PromotedCategory=Category11 }
      { 116     ;2   ;Action    ;
                      Name=Dimensions;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Promoted=Yes;
                      Enabled="No." <> '';
                      PromotedIsBig=Yes;
                      Image=Dimensions;
                      PromotedCategory=Category7;
                      OnAction=BEGIN
                                 ShowDocDim;
                                 CurrPage.SAVERECORD;
                               END;
                                }
      { 1901458458;2 ;Action    ;
                      Name=DocAttach;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Image=Attach;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1001 : Page 1173;
                                 RecRef@1000 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 1900000004;  ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 29      ;1   ;ActionGroup;
                      CaptionML=[ENU=Approval;
                                 ESP=Aprobaci¢n] }
      { 27      ;2   ;Action    ;
                      Name=Approve;
                      CaptionML=[ENU=Approve;
                                 ESP=Aprobar];
                      ToolTipML=[ENU=Approve the requested changes.;
                                 ESP=Aprueba los cambios solicitados.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistForCurrUser;
                      PromotedIsBig=Yes;
                      Image=Approve;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 ApprovalsMgmt.ApproveRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 25      ;2   ;Action    ;
                      Name=Reject;
                      CaptionML=[ENU=Reject;
                                 ESP=Rechazar];
                      ToolTipML=[ENU=Reject the approval request.;
                                 ESP=Rechaza la solicitud de aprobaci¢n.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistForCurrUser;
                      PromotedIsBig=Yes;
                      Image=Reject;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 ApprovalsMgmt.RejectRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 23      ;2   ;Action    ;
                      Name=Delegate;
                      CaptionML=[ENU=Delegate;
                                 ESP=Delegar];
                      ToolTipML=[ENU=Delegate the approval to a substitute approver.;
                                 ESP=Delega la aprobaci¢n a un aprobador sustituto.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistForCurrUser;
                      Image=Delegate;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 ApprovalsMgmt.DelegateRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 21      ;2   ;Action    ;
                      Name=Comment;
                      CaptionML=[ENU=Comments;
                                 ESP=Comentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistForCurrUser;
                      Image=ViewComments;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.GetApprovalComment(Rec);
                               END;
                                }
      { 9       ;1   ;ActionGroup;
                      CaptionML=[ENU=Release;
                                 ESP=Lanzar];
                      Image=ReleaseDoc }
      { 123     ;2   ;Action    ;
                      Name=Release;
                      ShortCutKey=Ctrl+F9;
                      CaptionML=[ENU=Re&lease;
                                 ESP=Lan&zar];
                      ToolTipML=[ENU=Release the document to the next stage of processing. When a document is released, it will be included in all availability calculations from the expected receipt date of the items. You must reopen the document before you can make changes to it.;
                                 ESP=Lance el documento a la siguiente etapa de procesamiento. Cuando se lanza un documento, este se incluir  en todos los c lculos de disponibilidad a partir de la fecha de recepci¢n esperada de los productos. Debe volver a abrir el documento antes de realizar cambios en ‚l.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Enabled=IsCustomerOrContactNotEmpty;
                      PromotedIsBig=Yes;
                      Image=ReleaseDoc;
                      PromotedCategory=Category8;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ReleaseSalesDoc@1000 : Codeunit 414;
                               BEGIN
                                 ReleaseSalesDoc.PerformManualRelease(Rec);
                               END;
                                }
      { 124     ;2   ;Action    ;
                      Name=Reopen;
                      CaptionML=[ENU=Re&open;
                                 ESP=&Volver a abrir];
                      ToolTipML=[ENU=Reopen the document to change it after it has been approved. Approved documents have the Released status and must be opened before they can be changed.;
                                 ESP=Permite volver a abrir el documento para cambiarlo una vez que se haya aprobado. Los documentos aprobados tienen el estado Lanzado y se deben abrir para poder cambiarlos.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Enabled=Status <> Status::Open;
                      Image=ReOpen;
                      PromotedCategory=Category8;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ReleaseSalesDoc@1001 : Codeunit 414;
                               BEGIN
                                 ReleaseSalesDoc.PerformManualReopen(Rec);
                               END;
                                }
      { 62      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 74      ;2   ;Action    ;
                      Name=CreatePurchaseInvoice;
                      CaptionML=[ENU=Create Purchase Invoice;
                                 ESP=Crear factura de compra];
                      ToolTipML=[ENU=Create a new purchase invoice to buy all the items that are required by the sales document, even if some of the items are already available.;
                                 ESP=Permite crear una nueva factura de compra para comprar todos los productos solicitados en el documento de venta, aunque algunos de los productos ya est‚n disponibles.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=No;
                      PromotedIsBig=Yes;
                      Image=NewPurchaseInvoice;
                      PromotedCategory=Category7;
                      OnAction=VAR
                                 SelectedSalesLine@1001 : Record 37;
                                 PurchDocFromSalesDoc@1000 : Codeunit 1314;
                               BEGIN
                                 CurrPage.SalesLines.PAGE.SETSELECTIONFILTER(SelectedSalesLine);
                                 PurchDocFromSalesDoc.CreatePurchaseInvoice(Rec,SelectedSalesLine);
                               END;
                                }
      { 66      ;2   ;Action    ;
                      Name=GetRecurringSalesLines;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get Recurring Sales Lines;
                                 ESP=Obtener l¡neas de venta peri¢dicas];
                      ToolTipML=[ENU=Insert sales document lines that you have set up for the customer as recurring. Recurring sales lines could be for a monthly replenishment order or a fixed freight expense.;
                                 ESP=Inserta las l¡neas del documento de venta que se configuraron para el cliente como peri¢dicas. Las l¡neas de venta peri¢dicas pueden ser un pedido de reposici¢n mensual o un gasto de flete fijo.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Enabled=IsCustomerOrContactNotEmpty;
                      PromotedIsBig=Yes;
                      Image=CustomerCode;
                      PromotedCategory=Category6;
                      OnAction=VAR
                                 StdCustSalesCode@1000 : Record 172;
                               BEGIN
                                 StdCustSalesCode.InsertSalesLines(Rec);
                               END;
                                }
      { 63      ;2   ;Action    ;
                      Name=CalculateInvoiceDiscount;
                      AccessByPermission=TableData 19=R;
                      CaptionML=[ENU=Calculate &Invoice Discount;
                                 ESP=Calcular dto. en la &factura];
                      ToolTipML=[ENU=Calculate the invoice discount for the entire sales document when all sales invoice lines are entered.;
                                 ESP=Calcula el descuento de factura de todo el documento de venta cuando se introduzcan todas las l¡neas de factura de venta.];
                      ApplicationArea=#Basic,#Suite;
                      Enabled=IsCustomerOrContactNotEmpty;
                      Image=CalculateInvoiceDiscount;
                      OnAction=BEGIN
                                 ApproveCalcInvDisc;
                                 SalesCalcDiscountByType.ResetRecalculateInvoiceDisc(Rec);
                               END;
                                }
      { 64      ;2   ;Action    ;
                      Name=CopyDocument;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Copy Document;
                                 ESP=Copiar l¡neas];
                      ToolTipML=[ENU=Copy document lines and header information from another sales document to this document. You can copy a posted sales invoice into a new sales invoice to quickly create a similar document.;
                                 ESP=Copia las l¡neas del documento y la informaci¢n de cabecera de otro documento de venta en este. Una factura de venta registrada se puede copiar en una nueva factura de venta para crear un documento similar con rapidez.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Enabled="No." <> '';
                      PromotedIsBig=Yes;
                      Image=CopyDocument;
                      PromotedCategory=Category6;
                      OnAction=BEGIN
                                 CopySalesDoc.SetSalesHeader(Rec);
                                 CopySalesDoc.RUNMODAL;
                                 CLEAR(CopySalesDoc);
                                 IF GET("Document Type","No.") THEN;
                               END;
                                }
      { 115     ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Move Negative Lines;
                                 ESP=Mover l¡neas negativas];
                      ToolTipML=[ENU=Prepare to create a replacement sales order in a sales return process.;
                                 ESP=Preparar un pedido de venta de reposici¢n en un proceso de devoluci¢n de venta.];
                      ApplicationArea=#Basic,#Suite;
                      Image=MoveNegativeLines;
                      OnAction=BEGIN
                                 CLEAR(MoveNegSalesLines);
                                 MoveNegSalesLines.SetSalesHeader(Rec);
                                 MoveNegSalesLines.RUNMODAL;
                                 MoveNegSalesLines.ShowDocument;
                               END;
                                }
      { 47      ;2   ;ActionGroup;
                      CaptionML=[ENU=Incoming Document;
                                 ESP=Documento entrante];
                      ActionContainerType=NewDocumentItems;
                      Image=Documents }
      { 45      ;3   ;Action    ;
                      Name=IncomingDocCard;
                      CaptionML=[ENU=View Incoming Document;
                                 ESP=Ver documento entrante];
                      ToolTipML=[ENU=View any incoming document records and file attachments that exist for the entry or document.;
                                 ESP=Permite ver los registros de documentos entrantes y los archivos adjuntos que existen para el movimiento o el documento.];
                      ApplicationArea=#Basic,#Suite;
                      Enabled=HasIncomingDocument;
                      Image=ViewOrder;
                      OnAction=VAR
                                 IncomingDocument@1000 : Record 130;
                               BEGIN
                                 IncomingDocument.ShowCardFromEntryNo("Incoming Document Entry No.");
                               END;
                                }
      { 41      ;3   ;Action    ;
                      Name=SelectIncomingDoc;
                      AccessByPermission=TableData 130=R;
                      CaptionML=[ENU=Select Incoming Document;
                                 ESP=Seleccionar documento entrante];
                      ToolTipML=[ENU=Select an incoming document record and file attachment that you want to link to the entry or document.;
                                 ESP=Permite seleccionar un registro de documento entrante y un archivo adjunto que desee vincular al movimiento o al documento.];
                      ApplicationArea=#Basic,#Suite;
                      Image=SelectLineToApply;
                      OnAction=VAR
                                 IncomingDocument@1000 : Record 130;
                               BEGIN
                                 VALIDATE("Incoming Document Entry No.",IncomingDocument.SelectIncomingDocument("Incoming Document Entry No.",RECORDID));
                               END;
                                }
      { 39      ;3   ;Action    ;
                      Name=IncomingDocAttachFile;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Create Incoming Document from File;
                                 ESP=Crear documento entrante desde archivo];
                      ToolTipML=[ENU=Create an incoming document record by selecting a file to attach, and then link the incoming document record to the entry or document.;
                                 ESP=Permite crear un registro de documento entrante al seleccionar un archivo que se ha de adjuntar y luego vincular el registro de documento entrante al movimiento o al documento.];
                      ApplicationArea=#Basic,#Suite;
                      Enabled=NOT HasIncomingDocument;
                      Image=Attach;
                      OnAction=VAR
                                 IncomingDocumentAttachment@1000 : Record 133;
                               BEGIN
                                 IncomingDocumentAttachment.NewAttachmentFromSalesDocument(Rec);
                               END;
                                }
      { 37      ;3   ;Action    ;
                      Name=RemoveIncomingDoc;
                      CaptionML=[ENU=Remove Incoming Document;
                                 ESP=Eliminar documento entrante];
                      ToolTipML=[ENU=Remove any incoming document records and file attachments.;
                                 ESP=Elimina cualquier registro de documentos entrantes y los archivos adjuntos.];
                      ApplicationArea=#Basic,#Suite;
                      Enabled=HasIncomingDocument;
                      Image=RemoveLine;
                      OnAction=VAR
                                 IncomingDocument@1000 : Record 130;
                               BEGIN
                                 IF IncomingDocument.GET("Incoming Document Entry No.") THEN
                                   IncomingDocument.RemoveLinkToRelatedRecord;
                                 "Incoming Document Entry No." := 0;
                                 MODIFY(TRUE);
                               END;
                                }
      { 49      ;1   ;ActionGroup;
                      CaptionML=[ENU=Request Approval;
                                 ESP=Aprobaci¢n solic.] }
      { 159     ;2   ;Action    ;
                      Name=SendApprovalRequest;
                      CaptionML=[ENU=Send A&pproval Request;
                                 ESP=Enviar solicitud a&probaci¢n];
                      ToolTipML=[ENU=Request approval of the document.;
                                 ESP=Permite solicitar la aprobaci¢n del documento.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=NOT OpenApprovalEntriesExist AND CanRequestApprovalForFlow;
                      PromotedIsBig=Yes;
                      Image=SendApprovalRequest;
                      PromotedCategory=Category9;
                      OnAction=BEGIN
                                 IF ApprovalsMgmt.CheckSalesApprovalPossible(Rec) THEN
                                   ApprovalsMgmt.OnSendSalesDocForApproval(Rec);
                               END;
                                }
      { 160     ;2   ;Action    ;
                      Name=CancelApprovalRequest;
                      CaptionML=[ENU=Cancel Approval Re&quest;
                                 ESP=&Cancelar solicitud aprobaci¢n];
                      ToolTipML=[ENU=Cancel the approval request.;
                                 ESP=Cancela la solicitud de aprobaci¢n.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Enabled=CanCancelApprovalForRecord OR CanCancelApprovalForFlow;
                      Image=CancelApprovalRequest;
                      PromotedCategory=Category9;
                      OnAction=VAR
                                 WorkflowWebhookMgt@1000 : Codeunit 1543;
                               BEGIN
                                 ApprovalsMgmt.OnCancelSalesApprovalRequest(Rec);
                                 WorkflowWebhookMgt.FindAndCancel(RECORDID);
                               END;
                                }
      { 215     ;2   ;ActionGroup;
                      CaptionML=[ENU=Flow;
                                 ESP=Flujo de trabajo];
                      Image=Flow }
      { 216     ;3   ;Action    ;
                      Name=CreateFlow;
                      CaptionML=[ENU=Create a Flow;
                                 ESP=Crear un flujo de trabajo];
                      ToolTipML=[ENU=Create a new Flow from a list of relevant Flow templates.;
                                 ESP=Crea un nuevo flujo de trabajo a partir de una lista de plantillas de flujo de trabajo pertinentes.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=IsSaaS;
                      Image=Flow;
                      PromotedCategory=Category9;
                      OnAction=VAR
                                 FlowServiceManagement@1001 : Codeunit 6400;
                                 FlowTemplateSelector@1000 : Page 6400;
                               BEGIN
                                 // Opens page 6400 where the user can use filtered templates to create new flows.
                                 FlowTemplateSelector.SetSearchText(FlowServiceManagement.GetSalesTemplateFilter);
                                 FlowTemplateSelector.RUN;
                               END;
                                }
      { 217     ;3   ;Action    ;
                      Name=SeeFlows;
                      CaptionML=[ENU=See my Flows;
                                 ESP=Ver mis flujos de trabajo];
                      ToolTipML=[ENU=View and configure Flows that you created.;
                                 ESP=Permite ver y configurar los flujos de trabajo que ha creado.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 6401;
                      Promoted=Yes;
                      Image=Flow;
                      PromotedCategory=Category9 }
      { 69      ;1   ;ActionGroup;
                      CaptionML=[ENU=P&osting;
                                 ESP=&Registro];
                      Image=Post }
      { 71      ;2   ;Action    ;
                      Name=Post;
                      ShortCutKey=F9;
                      CaptionML=[ENU=P&ost;
                                 ESP=&Registrar];
                      ToolTipML=[ENU=Finalize the document or journal by posting the amounts and quantities to the related accounts in your company books.;
                                 ESP=Finaliza el documento o el diario registrando los importes y las cantidades en las cuentas relacionadas de los libros de su empresa.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PostOrder;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 Post(CODEUNIT::"Sales-Post (Yes/No)",NavigateAfterPost::"Posted Document");
                               END;
                                }
      { 7       ;2   ;Action    ;
                      Name=PostAndNew;
                      ShortCutKey=Shift+F9;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Post and New;
                                 ESP=Registrar y nuevo];
                      ToolTipML=[ENU=Post the sales document and create a new, empty one.;
                                 ESP=Registrar el documento de ventas y crear un nuevo vac¡o.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=PostOrder;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 Post(CODEUNIT::"Sales-Post (Yes/No)",NavigateAfterPost::"New Document");
                               END;
                                }
      { 76      ;2   ;Action    ;
                      Name=PostAndSend;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Post and &Send;
                                 ESP=Registrar y &enviar];
                      ToolTipML=[ENU=Finalize and prepare to send the document according to the customer's sending profile, such as attached to an email. The Send document to window opens first so you can confirm or select a sending profile.;
                                 ESP=Permite finalizar y preparar el documento para enviarlo seg£n el perfil que cuenta con las preferencias de env¡o del cliente, por ejemplo, adjunto en un correo electr¢nico. La ventana "Enviar documento a" se abre primero para que se pueda confirmar o seleccionar un perfil de env¡o.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=PostSendTo;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 Post(CODEUNIT::"Sales-Post and Send",NavigateAfterPost::Nowhere);
                               END;
                                }
      { 68      ;2   ;Action    ;
                      Name=Preview;
                      CaptionML=[ENU=Preview Posting;
                                 ESP=Vista previa de registro];
                      ToolTipML=[ENU=Review the different types of entries that will be created when you post the document or journal.;
                                 ESP=Permite revisar los diferentes tipos de movimientos que se crear n al registrar el documento o el diario.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=ViewPostedOrder;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 ShowPreview;
                               END;
                                }
      { 55      ;2   ;Action    ;
                      Name=DraftInvoice;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Draft Invoice;
                                 ESP=Borrador de factura];
                      ToolTipML=[ENU=View or print the sales invoice as a draft before you perform the actual posting.;
                                 ESP=Ver o imprimir la factura de venta como borrador antes de realizar el registro propiamente dicho.];
                      ApplicationArea=#Basic,#Suite;
                      Image=ViewPostedOrder;
                      PromotedCategory=Category5;
                      OnAction=VAR
                                 DocumentPrint@1000 : Codeunit 229;
                               BEGIN
                                 DocumentPrint.PrintSalesHeader(Rec);
                               END;
                                }
      { 50      ;2   ;Action    ;
                      Name=ProformaInvoice;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Pro Forma Invoice;
                                 ESP=Factura proforma];
                      ToolTipML=[ENU=View or print the pro forma sales invoice.;
                                 ESP=Permite ver o imprimir la factura de venta proforma.];
                      ApplicationArea=#Basic,#Suite;
                      Image=ViewPostedOrder;
                      PromotedCategory=Category5;
                      OnAction=VAR
                                 DocumentPrint@1000 : Codeunit 229;
                               BEGIN
                                 DocumentPrint.PrintProformaSalesInvoice(Rec);
                               END;
                                }
      { 78      ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Test Report;
                                 ESP=Informe prueba];
                      ToolTipML=[ENU=View a test report so that you can find and correct any errors before you perform the actual posting of the journal or document.;
                                 ESP=Permite ver un informe de prueba para poder encontrar y corregir cualquier error antes de hacer el registro real del diario o el documento.];
                      ApplicationArea=#Basic,#Suite;
                      Image=TestReport;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 ReportPrint.PrintSalesHeader(Rec);
                               END;
                                }
      { 3       ;2   ;Action    ;
                      CaptionML=[ENU=Remove From Job Queue;
                                 ESP=Quitar de cola de proyecto];
                      ToolTipML=[ENU=Remove the scheduled processing of this record from the job queue.;
                                 ESP=Permite quitar el procesamiento programado de este registro de la cola de proyectos.];
                      ApplicationArea=#Basic,#Suite;
                      Image=RemoveLine;
                      OnAction=BEGIN
                                 CancelBackgroundPosting;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                CaptionML=[ENU=General;
                           ESP=General];
                GroupType=Group }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the involved entry or record, according to the specified number series.;
                           ESP=Especifica el n£mero de la entrada o el registro relacionado, seg£n la serie num‚rica especificada.];
                ApplicationArea=#All;
                SourceExpr="No.";
                Importance=Standard;
                Visible=DocNoVisible;
                OnAssistEdit=BEGIN
                               IF AssistEdit(xRec) THEN
                                 CurrPage.UPDATE;
                             END;
                              }

    { 53  ;2   ;Field     ;
                CaptionML=[ENU=Customer No.;
                           ESP=N.§ de cliente];
                ToolTipML=[ENU=Specifies the number of the customer who will receive the products and be billed by default.;
                           ESP=Especifica el n£mero del cliente que recibir  los productos y al que se facturar  de forma predeterminada.];
                ApplicationArea=#Basic,#Suite;
                NotBlank=Yes;
                SourceExpr="Sell-to Customer No.";
                Importance=Additional;
                Visible=NOT IsSaaS;
                OnValidate=BEGIN
                             SelltoCustomerNoOnAfterValidate(Rec,xRec);
                             CurrPage.UPDATE;
                           END;
                            }

    { 4   ;2   ;Field     ;
                CaptionML=[ENU=Customer Name;
                           ESP=Nombre del cliente];
                ToolTipML=[ENU=Specifies the name of the customer who will receive the products and be billed by default.;
                           ESP=Especifica el nombre del cliente que recibir  los productos y al que se facturar  de forma predeterminada.];
                ApplicationArea=#Basic,#Suite;
                NotBlank=Yes;
                SourceExpr="Sell-to Customer Name";
                Importance=Promoted;
                OnValidate=VAR
                             ApplicationAreaMgmtFacade@1000 : Codeunit 9179;
                           BEGIN
                             SelltoCustomerNoOnAfterValidate(Rec,xRec);

                             IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                               SalesCalcDiscountByType.ApplyDefaultInvoiceDiscount(0,Rec);

                             CurrPage.UPDATE;
                           END;

                ShowMandatory=TRUE }

    { 35  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies additional posting information for the document. After you post the document, the description can add detail to vendor and customer ledger entries.;
                           ESP=Especifica la informaci¢n de registro adicional del documento. Despu‚s de registrar el documento, la descripci¢n puede agregar detalles a los movimientos de cliente y proveedor.];
                ApplicationArea=#Suite;
                SourceExpr="Posting Description";
                Visible=FALSE }

    { 1170170000;2;Field  ;
                SourceExpr="Importe comisi¢n (DL)" }

    { 100 ;2   ;Group     ;
                CaptionML=[ENU=Sell-to;
                           ESP=Direcci¢n venta];
                GroupType=Group }

    { 75  ;3   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the address where the customer is located.;
                           ESP=Especifica la direcci¢n donde reside el cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Address";
                Importance=Additional;
                QuickEntry=FALSE }

    { 77  ;3   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies additional address information.;
                           ESP=Especifica informaci¢n adicional sobre la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Address 2";
                Importance=Additional;
                QuickEntry=FALSE }

    { 79  ;3   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to City";
                Importance=Additional;
                QuickEntry=FALSE }

    { 60  ;3   ;Group     ;
                Visible=IsSellToCountyVisible;
                GroupType=Group }

    { 70  ;4   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county of the address.;
                           ESP=Especifica el estado, la provincia o la comarca de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to County";
                Importance=Additional;
                QuickEntry=FALSE }

    { 81  ;3   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the postal code.;
                           ESP=Especifica el c¢digo postal.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Post Code";
                Importance=Additional;
                QuickEntry=FALSE }

    { 73  ;3   ;Field     ;
                CaptionML=[ENU=Country/Region Code;
                           ESP=C¢digo pa¡s/regi¢n];
                ToolTipML=[ENU=Specifies the country or region of the address.;
                           ESP=Especifica el pa¡s o la regi¢n de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Country/Region Code";
                Importance=Additional;
                OnValidate=BEGIN
                             IsSellToCountyVisible := FormatAddress.UseCounty("Sell-to Country/Region Code");
                           END;

                QuickEntry=FALSE }

    { 87  ;3   ;Field     ;
                CaptionML=[ENU=Contact No.;
                           ESP=N§ contacto];
                ToolTipML=[ENU=Specifies the number of the contact that the sales document will be sent to.;
                           ESP=Especifica el n£mero del contacto a quien se enviar  el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Contact No.";
                Importance=Additional;
                OnValidate=BEGIN
                             IF ApplicationAreaMgmtFacade.IsAdvancedEnabled THEN
                               IF GETFILTER("Sell-to Contact No.") = xRec."Sell-to Contact No." THEN
                                 IF "Sell-to Contact No." <> xRec."Sell-to Contact No." THEN
                                   SETRANGE("Sell-to Contact No.");
                           END;
                            }

    { 8   ;2   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the person to contact at the customer.;
                           ESP=Especifica el nombre de la persona de contacto del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Contact";
                Editable="Sell-to Customer No." <> '' }

    { 19  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's reference. The contents will be printed on sales documents.;
                           ESP=Especifica la referencia del cliente. El contenido se imprimir  en los documentos de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Your Reference";
                Importance=Additional }

    { 43  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date when the related document was created.;
                           ESP=Especifica la fecha en la que se cre¢ el documento correspondiente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Document Date";
                Importance=Additional }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date when the posting of the sales document will be recorded.;
                           ESP=Especifica la fecha en que se registrar  el registro del documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posting Date";
                Importance=Promoted;
                OnValidate=BEGIN
                             SaveInvoiceDiscountAmount;
                           END;
                            }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when the sales invoice must be paid.;
                           ESP=Especifica cu ndo se debe pagar la factura de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Due Date";
                Importance=Promoted }

    { 13  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the incoming document that this sales document is created for.;
                           ESP=Especifica el n£mero del documento entrante para el que se crea este documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Incoming Document Entry No.";
                Importance=Additional;
                Visible=FALSE }

    { 126 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a document number that refers to the customer's or vendor's numbering system.;
                           ESP=Especifica un n£mero de documento que hace referencia al sistema de numeraci¢n del cliente o el proveedor.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="External Document No.";
                Importance=Additional;
                ShowMandatory=ExternalDocNoMandatory }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the name of the salesperson who is assigned to the customer.;
                           ESP=Especifica el nombre del vendedor asignado al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Salesperson Code";
                Importance=Additional;
                OnValidate=BEGIN
                             SalespersonCodeOnAfterValidate;
                           END;
                            }

    { 129 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the campaign that the document is linked to.;
                           ESP=Especifica el n£mero de la campa¤a a la que est  vinculado el documento.];
                ApplicationArea=#RelationshipMgmt;
                SourceExpr="Campaign No.";
                Importance=Additional }

    { 118 ;2   ;Field     ;
                AccessByPermission=TableData 5714=R;
                ToolTipML=[ENU=Specifies the code of the responsibility center, such as a distribution hub, that is associated with the involved user, company, customer, or vendor.;
                           ESP=Especifica el c¢digo del centro de responsabilidad, como, por ejemplo, un centro de distribuci¢n que est‚ asociado al usuario, la empresa, el cliente o el proveedor relacionado.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Responsibility Center";
                Importance=Additional }

    { 67  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the ID of the user who is responsible for the document.;
                           ESP=Especifica el id. del usuario responsable del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Assigned User ID";
                Importance=Additional }

    { 112 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the document is open, waiting to be approved, has been invoiced for prepayment, or has been released to the next stage of processing.;
                           ESP=Especifica si el documento est  pendiente, en espera de aprobaci¢n, facturado para prepago o ha pasado a la etapa siguiente de procesamiento.];
                ApplicationArea=#Suite;
                SourceExpr=Status;
                Importance=Additional }

    { 1100100;2;Field     ;
                ToolTipML=[ENU=Specifies the number of the posted invoice that will be created if you post the sales invoice.;
                           ESP=Especifica el n£mero de la factura registrada que se crear  si se registra la factura de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posting No." }

    { 5   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the status of a job queue entry or task that handles the posting of sales invoices.;
                           ESP=Especifica el estado de un movimiento de la cola de proyectos o de una tarea que controla el registro de las facturas de venta.];
                ApplicationArea=#All;
                SourceExpr="Job Queue Status";
                Importance=Additional;
                Visible=JobQueuesUsed }

    { 135 ;2   ;Group     ;
                CaptionML=[ENU=Work Description;
                           ESP=Descripci¢n del trabajo];
                GroupType=Group }

    { 117 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the products or service being offered;
                           ESP=Especifica los productos o servicios que se ofrecen.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=WorkDescription;
                Importance=Additional;
                MultiLine=Yes;
                OnValidate=BEGIN
                             SetWorkDescription(WorkDescription);
                           END;

                ShowCaption=No }

    { 56  ;1   ;Part      ;
                Name=SalesLines;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=Document No.=FIELD(No.);
                PagePartID=Page47;
                Enabled="Sell-to Customer No." <> '';
                Editable="Sell-to Customer No." <> '' }

    { 1905885101;1;Group  ;
                CaptionML=[ENU=Invoice Details;
                           ESP=Detalles factura];
                GroupType=Group }

    { 107 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the currency of amounts on the sales document.;
                           ESP=Especifica la divisa de los importes en el documento de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Currency Code";
                Importance=Promoted;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             SalesCalcDiscountByType.ApplyDefaultInvoiceDiscount(0,Rec);
                           END;

                OnAssistEdit=BEGIN
                               CLEAR(ChangeExchangeRate);
                               IF "Posting Date" <> 0D THEN
                                 ChangeExchangeRate.SetParameter("Currency Code","Currency Factor","Posting Date")
                               ELSE
                                 ChangeExchangeRate.SetParameter("Currency Code","Currency Factor",WORKDATE);
                               IF ChangeExchangeRate.RUNMODAL = ACTION::OK THEN BEGIN
                                 VALIDATE("Currency Factor",ChangeExchangeRate.GetParameter);
                                 SaveInvoiceDiscountAmount;
                               END;
                               CLEAR(ChangeExchangeRate);
                             END;
                              }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when items on the document are shipped or were shipped. A shipment date is usually calculated from a requested delivery date plus lead time.;
                           ESP=Especifica cu ndo se van a enviar o se han enviado los productos del documento. Se calcula normalmente una fecha de env¡o con la fecha de entrega solicitada y el plazo de seguridad.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Date";
                Importance=Promoted }

    { 1100105;2;Field     ;
                ToolTipML=[ENU=Specifies the type of the posted document that this document or journal line will be applied to when you post, for example to register payment.;
                           ESP=Especifica el tipo del documento registrado en el que se liquidar  esta l¡nea de diario o documento al registrar, por ejemplo, pagos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Applies-to Doc. Type" }

    { 1100107;2;Field     ;
                ToolTipML=[ENU=Specifies the number of the posted document that this document or journal line will be applied to when you post, for example to register payment.;
                           ESP=Especifica el n£mero del documento registrado en el que se liquidar  esta l¡nea de diario o documento al registrar, por ejemplo, pagos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Applies-to Doc. No." }

    { 1901792801;2;Group  ;
                CaptionML=[ENU=Payment;
                           ESP=Pago] }

    { 1100020;3;Field     ;
                ToolTipML=[ENU=Specifies a code associated with a payment address other than the customer's standard payment address.;
                           ESP=Especifica un c¢digo asociado a una direcci¢n de pago diferente de la direcci¢n de pago habitual del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Pay-at Code" }

    { 1100022;3;Field     ;
                ToolTipML=[ENU=Specifies the customer bank code to assign to the sales header in this field.;
                           ESP=Especifica el c¢digo de banco de cliente que debe asignarse a la cabecera de ventas en este campo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cust. Bank Acc. Code" }

    { 58  ;2   ;Group     ;
                Visible=ShowQuoteNo;
                GroupType=Group }

    { 83  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the sales quote that the sales order was created from. You can track the number to sales quote documents that you have printed, saved, or emailed.;
                           ESP=Especifica el n£mero de la oferta de venta a partir de la cual se cre¢ el pedido de venta. Puede hacer un seguimiento del n£mero y ver los documentos de oferta de venta que imprimi¢, guard¢ o envi¢ por correo electr¢nico.];
                ApplicationArea=#All;
                SourceExpr="Quote No." }

    { 121 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the Unit Price and Line Amount fields on document lines should be shown with or without VAT.;
                           ESP=Especifica si los campos Precio venta e Importe l¡nea en las l¡neas de documento deben mostrarse con o sin IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Prices Including VAT";
                OnValidate=BEGIN
                             CurrPage.UPDATE;
                           END;
                            }

    { 156 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT specification of the involved customer or vendor to link transactions made for this record with the appropriate general ledger account according to the VAT posting setup.;
                           ESP=Indica la especificaci¢n de IVA del cliente o el proveedor relacionado para vincular las transacciones realizadas para este registro con la cuenta de contabilidad general correspondiente de acuerdo con la configuraci¢n de registro de IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Bus. Posting Group";
                OnValidate=VAR
                             ApplicationAreaMgmtFacade@1000 : Codeunit 9179;
                           BEGIN
                             IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                               SalesCalcDiscountByType.ApplyDefaultInvoiceDiscount(0,Rec);

                             CurrPage.UPDATE;
                           END;
                            }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a formula that calculates the payment due date, payment discount date, and payment discount amount.;
                           ESP=Especifica una f¢rmula que calcula la fecha de vencimiento del pago, la fecha de descuento por pronto pago y el importe de descuento por pronto pago.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Terms Code";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 101 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how to make payment, such as with bank transfer, cash, or check.;
                           ESP=Especifica c¢mo realizar el pago, por ejemplo transferencia bancaria, en efectivo o con cheque.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Method Code";
                Importance=Promoted;
                OnValidate=BEGIN
                             UpdatePaymentService;
                           END;

                ShowMandatory=TRUE }

    { 72  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the transaction is related to trade with a third party within the EU.;
                           ESP=Especifica si la transacci¢n est  relacionada con comercio con terceros dentro de la UE.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="EU 3-Party Trade" }

    { 174 ;2   ;Group     ;
                Visible=PaymentServiceVisible;
                GroupType=Group }

    { 175 ;3   ;Field     ;
                Name=SelectedPayments;
                CaptionML=[ENU=Payment Service;
                           ESP=Servicio de pago];
                ToolTipML=[ENU=Specifies the online payment service, such as PayPal, that customers can use to pay the sales document.;
                           ESP=Especifica el servicio de pago en l¡nea, como PayPal, que los clientes pueden usar para pagar el documento de venta.];
                ApplicationArea=#All;
                SourceExpr=GetSelectedPaymentServicesText;
                Enabled=PaymentServiceEnabled;
                Editable=FALSE;
                MultiLine=Yes;
                OnAssistEdit=BEGIN
                               ChangePaymentServiceSetting;
                             END;
                              }

    { 84  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                OnValidate=BEGIN
                             CurrPage.UPDATE;
                           END;
                            }

    { 88  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                OnValidate=BEGIN
                             CurrPage.UPDATE;
                           END;
                            }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the payment discount percentage granted if the customer pays on or before the date entered in the Pmt. Discount Date field.;
                           ESP=Especifica el porcentaje de descuento por pronto pago concedido si el cliente paga en o antes de la fecha introducida en el campo Fecha dto. P.P.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Discount %" }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date on which the amount in the entry must be paid for a payment discount to be granted.;
                           ESP=Especifica cu ndo hay que pagar el importe del movimiento para conseguir un descuento por pronto pago.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Pmt. Discount Date";
                Importance=Additional }

    { 15  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the direct-debit mandate that the customer has signed to allow direct debit collection of payments.;
                           ESP=Especifica la orden de domiciliaci¢n de adeudo directo que el cliente ha firmado para permitir realizar cobros por domiciliaci¢n de pagos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Direct Debit Mandate ID" }

    { 90  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the location from where inventory items to the customer on the sales document are to be shipped by default.;
                           ESP=Especifica el almac‚n desde el que se env¡an de forma predeterminada los productos de inventario al cliente en el documento de venta.];
                ApplicationArea=#Location;
                SourceExpr="Location Code";
                Importance=Additional }

    { 1100005;2;Group     ;
                CaptionML=[ENU=SII Information;
                           ESP=Informaci¢n SII];
                GroupType=Group }

    { 1100007;3;Field     ;
                CaptionML=[ENU=Operation Description;
                           ESP=Descripci¢n de la operaci¢n];
                ToolTipML=[ENU=Specifies the Operation Description.;
                           ESP=Especifica la descripci¢n de la operaci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=OperationDescription;
                MultiLine=Yes;
                OnValidate=VAR
                             SIIManagement@1100000 : Codeunit 10756;
                           BEGIN
                             SIIManagement.SplitOperationDescription(OperationDescription,"Operation Description","Operation Description 2");
                             VALIDATE("Operation Description");
                             VALIDATE("Operation Description 2");
                             MODIFY(TRUE);
                           END;
                            }

    { 1100003;3;Field     ;
                ToolTipML=[ENU=Specifies the Special Scheme Code.;
                           ESP=Especifica el c¢digo de esquema especial.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Special Scheme Code" }

    { 1100001;3;Field     ;
                ToolTipML=[ENU=Specifies the Special Scheme Code.;
                           ESP=Especifica el c¢digo de esquema especial.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Invoice Type" }

    { 1100002;3;Field     ;
                ToolTipML=[ENU=Specifies the ID Type.;
                           ESP=Especifica el tipo de id.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="ID Type" }

    { 1100008;3;Field     ;
                ToolTipML=[ENU=Specifies the name of the company sucessor in connection with corporate restructuring.;
                           ESP=Especifica el nombre de la sucesora de la empresa en relaci¢n con reestructuraciones corporativas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Succeeded Company Name" }

    { 1100006;3;Field     ;
                ToolTipML=[ENU=Specifies the VAT registration number of the company sucessor in connection with corporate restructuring.;
                           ESP=Especifica el CIF/NIF de la sucesora de la empresa en relaci¢n con reestructuraciones corporativos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Succeeded VAT Registration No." }

    { 1900000002;1;Group  ;
                CaptionML=[ENU=Shipping and Billing;
                           ESP=Env¡o y facturaci¢n];
                Enabled="Sell-to Customer No." <> '';
                GroupType=Group }

    { 34  ;2   ;Group     ;
                GroupType=Group }

    { 200 ;3   ;Group     ;
                GroupType=Group }

    { 201 ;4   ;Field     ;
                Name=ShippingOptions;
                CaptionML=[ENU=Ship-to;
                           ESP=Direcci¢n de env¡o];
                ToolTipML=[ENU=Specifies the address that the products on the sales document are shipped to. Default (Sell-to Address): The same as the customer's sell-to address. Alternate Ship-to Address: One of the customer's alternate ship-to addresses. Custom Address: Any ship-to address that you specify in the fields below.;
                           ESP=Especifica la direcci¢n a la que se env¡an los productos del documento de venta. Predeterminada (direcci¢n de env¡o): la misma que la direcci¢n de env¡o del cliente. Direcci¢n de env¡o alternativa: una de las direcciones de env¡o alternativas del cliente. Direcci¢n personalizada: cualquier direcci¢n que especifique en los campos siguientes.];
                OptionCaptionML=[ENU=Default (Sell-to Address),Alternate Shipping Address,Custom Address;
                                 ESP=Predeterminada (direcci¢n de venta),Direcci¢n de env¡o alternativa,Direcci¢n personalizada];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=ShipToOptions;
                OnValidate=VAR
                             ShipToAddress@1001 : Record 222;
                             ShipToAddressList@1000 : Page 301;
                           BEGIN
                             CASE ShipToOptions OF
                               ShipToOptions::"Default (Sell-to Address)":
                                 BEGIN
                                   VALIDATE("Ship-to Code",'');
                                   CopySellToAddressToShipToAddress;
                                 END;
                               ShipToOptions::"Alternate Shipping Address":
                                 BEGIN
                                   ShipToAddress.SETRANGE("Customer No.","Sell-to Customer No.");
                                   ShipToAddressList.LOOKUPMODE := TRUE;
                                   ShipToAddressList.SETTABLEVIEW(ShipToAddress);

                                   IF ShipToAddressList.RUNMODAL = ACTION::LookupOK THEN BEGIN
                                     ShipToAddressList.GETRECORD(ShipToAddress);
                                     VALIDATE("Ship-to Code",ShipToAddress.Code);
                                     IsShipToCountyVisible := FormatAddress.UseCounty(ShipToAddress."Country/Region Code");
                                   END ELSE
                                     ShipToOptions := ShipToOptions::"Custom Address";
                                 END;
                               ShipToOptions::"Custom Address":
                                 BEGIN
                                   VALIDATE("Ship-to Code",'');
                                   IsShipToCountyVisible := FormatAddress.UseCounty("Ship-to Country/Region Code");
                                 END;
                             END;
                           END;
                            }

    { 202 ;4   ;Group     ;
                Visible=NOT (ShipToOptions = ShipToOptions::"Default (Sell-to Address)");
                GroupType=Group }

    { 65  ;5   ;Field     ;
                CaptionML=[ENU=Code;
                           ESP=C¢digo];
                ToolTipML=[ENU=Specifies the code for another shipment address than the customer's own address, which is entered by default.;
                           ESP=Especifica el c¢digo para otra direcci¢n de env¡o distinta a la propia direcci¢n del cliente, que se especifica de forma predeterminada.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Code";
                Importance=Promoted;
                Editable=ShipToOptions = ShipToOptions::"Alternate Shipping Address";
                OnValidate=VAR
                             ShipToAddress@1000 : Record 222;
                           BEGIN
                             IF (xRec."Ship-to Code" <> '') AND ("Ship-to Code" = '') THEN
                               ERROR(EmptyShipToCodeErr);
                             IF "Ship-to Code" <> '' THEN BEGIN
                               ShipToAddress.GET("Sell-to Customer No.","Ship-to Code");
                               IsShipToCountyVisible := FormatAddress.UseCounty(ShipToAddress."Country/Region Code");
                             END ELSE
                               IsShipToCountyVisible := FALSE;
                           END;
                            }

    { 36  ;5   ;Field     ;
                CaptionML=[ENU=Name;
                           ESP=Nombre];
                ToolTipML=[ENU=Specifies the name that products on the sales document will be shipped to.;
                           ESP=Especifica el nombre al que se enviar n los productos en el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Name";
                Editable=ShipToOptions = ShipToOptions::"Custom Address" }

    { 38  ;5   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the address that products on the sales document will be shipped to.;
                           ESP=Especifica la direcci¢n a la que se enviar n los productos en el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Address";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 40  ;5   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies additional address information.;
                           ESP=Especifica informaci¢n adicional sobre la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Address 2";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 42  ;5   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to City";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 82  ;5   ;Group     ;
                Visible=IsShipToCountyVisible;
                GroupType=Group }

    { 89  ;6   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county of the address.;
                           ESP=Especifica el estado, la provincia o la comarca de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to County";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 80  ;5   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the postal code.;
                           ESP=Especifica el c¢digo postal.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Post Code";
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                QuickEntry=FALSE }

    { 17  ;5   ;Field     ;
                CaptionML=[ENU=Country/Region;
                           ESP=Pa¡s/regi¢n];
                ToolTipML=[ENU=Specifies the customer's country/region.;
                           ESP=Especifica el pa¡s o regi¢n del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Country/Region Code";
                Importance=Additional;
                Editable=ShipToOptions = ShipToOptions::"Custom Address";
                OnValidate=BEGIN
                             IsShipToCountyVisible := FormatAddress.UseCounty("Ship-to Country/Region Code");
                           END;

                QuickEntry=FALSE }

    { 44  ;4   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the contact person at the address that products on the sales document will be shipped to.;
                           ESP=Especifica el nombre de la persona de contacto en la direcci¢n a la que se enviar n los productos en el documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Contact" }

    { 16  ;3   ;Group     ;
                CaptionML=[ENU=Shipment Method;
                           ESP=Condiciones env¡o];
                GroupType=Group }

    { 46  ;4   ;Field     ;
                CaptionML=[ENU=Code;
                           ESP=C¢digo];
                ToolTipML=[ENU=Specifies how items on the sales document are shipped to the customer.;
                           ESP=Especifica la manera en que los productos del documento de venta se env¡an al cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Method Code";
                Importance=Additional }

    { 103 ;4   ;Field     ;
                CaptionML=[ENU=Agent;
                           ESP=Agente];
                ToolTipML=[ENU=Specifies which shipping agent is used to transport the items on the sales document to the customer.;
                           ESP=Especifica el transportista que se usa para transportar los productos del documento de venta al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Code";
                Importance=Additional }

    { 11  ;4   ;Field     ;
                CaptionML=[ENU=Agent service;
                           ESP=Servicio de agente];
                ToolTipML=[ENU=Specifies which shipping agent service is used to transport the items on the sales document to the customer.;
                           ESP=Especifica el servicio de transportista que se usa para transportar los productos del documento de venta al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Service Code";
                Importance=Additional }

    { 105 ;4   ;Field     ;
                ToolTipML=[ENU=Specifies the shipping agent's package number.;
                           ESP=Especifica el n£mero de paquete del transportista.];
                ApplicationArea=#Suite;
                SourceExpr="Package Tracking No.";
                Importance=Additional }

    { 203 ;2   ;Group     ;
                GroupType=Group }

    { 204 ;3   ;Field     ;
                Name=BillToOptions;
                CaptionML=[ENU=Bill-to;
                           ESP=Direcci¢n facturaci¢n];
                ToolTipML=[ENU=Specifies the customer that the sales invoice will be sent to. Default (Customer): The same as the customer on the sales invoice. Another Customer: Any customer that you specify in the fields below.;
                           ESP=Especifica el cliente al que se enviar  la factura de venta. Predeterminado (cliente): el mismo que el cliente en la factura de venta. Otro cliente: cualquier cliente que especifique en los campos siguientes.];
                OptionCaptionML=[ENU=Default (Customer),Another Customer,Custom Address;
                                 ESP=Predeterminado (cliente),Otro cliente,Direcci¢n personalizada];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=BillToOptions;
                OnValidate=BEGIN
                             IF BillToOptions = BillToOptions::"Default (Customer)" THEN BEGIN
                               VALIDATE("Bill-to Customer No.","Sell-to Customer No.");
                               RecallModifyAddressNotification(GetModifyBillToCustomerAddressNotificationId);
                             END;

                             CopySellToAddressToBillToAddress;
                           END;
                            }

    { 205 ;3   ;Group     ;
                Visible=NOT (BillToOptions = BillToOptions::"Default (Customer)");
                GroupType=Group }

    { 14  ;4   ;Field     ;
                CaptionML=[ENU=Name;
                           ESP=Nombre];
                ToolTipML=[ENU=Specifies the customer to whom you will send the sales invoice, when different from the customer that you are selling to.;
                           ESP=Especifica el cliente al que se enviar  la factura de venta, cuando es distinto del cliente al que se realiza la venta.];
                ApplicationArea=#Basic,#Suite;
                NotBlank=Yes;
                SourceExpr="Bill-to Name";
                Importance=Promoted;
                Enabled=BillToOptions = BillToOptions::"Another Customer";
                Editable=BillToOptions = BillToOptions::"Another Customer";
                OnValidate=VAR
                             ApplicationAreaMgmtFacade@1000 : Codeunit 9179;
                           BEGIN
                             IF GETFILTER("Bill-to Customer No.") = xRec."Bill-to Customer No." THEN
                               IF "Bill-to Customer No." <> xRec."Bill-to Customer No." THEN
                                 SETRANGE("Bill-to Customer No.");

                             CurrPage.SAVERECORD;
                             IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                               SalesCalcDiscountByType.ApplyDefaultInvoiceDiscount(0,Rec);

                             CurrPage.UPDATE(FALSE);
                           END;
                            }

    { 18  ;4   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the address of the customer that you will send the invoice to.;
                           ESP=Especifica la direcci¢n del cliente a quien se enviar  la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Address";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 20  ;4   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies additional address information.;
                           ESP=Especifica informaci¢n adicional sobre la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Address 2";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 22  ;4   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to City";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 85  ;4   ;Group     ;
                Visible=IsBillToCountyVisible;
                GroupType=Group }

    { 92  ;5   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county of the address.;
                           ESP=Especifica el estado, la provincia o la comarca de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to County";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 91  ;4   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the postal code.;
                           ESP=Especifica el c¢digo postal.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Post Code";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                QuickEntry=FALSE }

    { 93  ;4   ;Field     ;
                CaptionML=[ENU=Country/Region;
                           ESP=Pa¡s/regi¢n];
                ToolTipML=[ENU=Specifies the country or region of the address.;
                           ESP=Especifica el pa¡s o la regi¢n de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Country/Region Code";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                OnValidate=BEGIN
                             IsBillToCountyVisible := FormatAddress.UseCounty("Bill-to Country/Region Code");
                           END;

                QuickEntry=FALSE }

    { 86  ;4   ;Field     ;
                CaptionML=[ENU=Contact No.;
                           ESP=N§ contacto];
                ToolTipML=[ENU=Specifies the number of the contact the invoice will be sent to.;
                           ESP=Especifica el n£mero del contacto a quien se enviar  la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Contact No.";
                Importance=Additional;
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.") }

    { 24  ;4   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the person you should contact at the customer who you are sending the invoice to.;
                           ESP=Especifica el nombre de la persona con quien contactarse cuando es necesario comunicarse con el cliente al que se enviar  la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Contact";
                Enabled=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.");
                Editable=(BillToOptions = BillToOptions::"Custom Address") OR ("Bill-to Customer No." <> "Sell-to Customer No.") }

    { 1907468901;1;Group  ;
                CaptionML=[ENU=Foreign Trade;
                           ESP=Comercio exterior];
                GroupType=Group }

    { 99  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a specification of the document's transaction, for the purpose of reporting to INTRASTAT.;
                           ESP=Especifica una especificaci¢n de transacci¢n del documento de venta con el fin de notificarla a INTRASTAT.];
                ApplicationArea=#Suite;
                SourceExpr="Transaction Specification" }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of transaction that the document represents, for the purpose of reporting to INTRASTAT.;
                           ESP=Especifica el tipo de transacci¢n que representa el documento con el fin de notificarlo a INTRASTAT.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Transaction Type" }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the transport method, for the purpose of reporting to INTRASTAT.;
                           ESP=Especifica el modo de transporte con el fin de informar a INTRASTAT.];
                ApplicationArea=#Suite;
                SourceExpr="Transport Method" }

    { 95  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the point of exit through which you ship the items out of your country/region, for reporting to Intrastat.;
                           ESP=Especifica el punto de salida a trav‚s del cual se enviar n los productos fuera de su pa¡s o regi¢n, con el fin de informar a Intrastat.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Exit Point" }

    { 97  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the area of the customer or vendor, for the purpose of reporting to INTRASTAT.;
                           ESP=Especifica el  rea del cliente o proveedor con el fin de informar a INTRASTAT.];
                ApplicationArea=#Suite;
                SourceExpr=Area }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1901275107;1;Part   ;
                Name=Attached Documents;
                CaptionML=[ENU=Attachments;
                           ESP=Datos adjuntos];
                ApplicationArea=#All;
                SubPageLink=Table ID=CONST(36),
                            No.=FIELD(No.),
                            Document Type=FIELD(Document Type);
                PagePartID=Page1174;
                PartType=Page }

    { 31  ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=Table ID=CONST(36),
                            Document Type=FIELD(Document Type),
                            Document No.=FIELD(No.);
                PagePartID=Page9103;
                Visible=OpenApprovalEntriesExistForCurrUser;
                PartType=Page }

    { 1903720907;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Sell-to Customer No.);
                PagePartID=Page9080;
                Visible=FALSE;
                PartType=Page }

    { 1907234507;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Bill-to Customer No.);
                PagePartID=Page9081;
                Visible=FALSE;
                PartType=Page }

    { 1902018507;1;Part   ;
                ApplicationArea=#Advanced;
                SubPageLink=No.=FIELD(Bill-to Customer No.);
                PagePartID=Page9082;
                PartType=Page }

    { 1900316107;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Sell-to Customer No.);
                PagePartID=Page9084;
                PartType=Page }

    { 1903433807;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Bill-to Customer No.);
                PagePartID=Page35304;
                Visible=TRUE;
                PartType=Page }

    { 1903433607;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(Bill-to Customer No.);
                PagePartID=Page35306;
                Visible=TRUE;
                PartType=Page }

    { 1906127307;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=Document Type=FIELD(Document Type),
                            Document No.=FIELD(Document No.),
                            Line No.=FIELD(Line No.);
                PagePartID=Page9087;
                ProviderID=56;
                Visible=FALSE;
                PartType=Page }

    { 1901314507;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page9089;
                ProviderID=56;
                PartType=Page }

    { 33  ;1   ;Part      ;
                Name=IncomingDocAttachFactBox;
                ApplicationArea=#Basic,#Suite;
                PagePartID=Page193;
                Visible=FALSE;
                PartType=Page;
                ShowFilter=No }

    { 1906354007;1;Part   ;
                Name=ApprovalFactBox;
                ApplicationArea=#Basic,#Suite;
                PagePartID=Page9092;
                Visible=FALSE;
                PartType=Page }

    { 1907012907;1;Part   ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page9108;
                ProviderID=56;
                Visible=FALSE;
                PartType=Page }

    { 51  ;1   ;Part      ;
                Name=WorkflowStatus;
                ApplicationArea=#All;
                PagePartID=Page1528;
                Visible=ShowWorkflowStatus;
                Enabled=FALSE;
                Editable=FALSE;
                PartType=Page;
                ShowFilter=No }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      CopySalesDoc@1002 : Report 292;
      MoveNegSalesLines@1006 : Report 6699;
      ApplicationAreaMgmtFacade@1011 : Codeunit 9179;
      ReportPrint@1003 : Codeunit 228;
      UserMgt@1004 : Codeunit 5700;
      SalesCalcDiscountByType@1007 : Codeunit 56;
      ApprovalsMgmt@1013 : Codeunit 1535;
      LinesInstructionMgt@1015 : Codeunit 1320;
      CustomerMgt@1059 : Codeunit 1302;
      FormatAddress@1024 : Codeunit 365;
      ChangeExchangeRate@1001 : Page 511;
      NavigateAfterPost@1017 : 'Posted Document,New Document,Nowhere';
      WorkDescription@1018 : Text;
      HasIncomingDocument@1012 : Boolean;
      DocNoVisible@1005 : Boolean;
      ExternalDocNoMandatory@1008 : Boolean;
      OpenApprovalEntriesExistForCurrUser@1009 : Boolean;
      OpenApprovalEntriesExist@1000 : Boolean;
      ShowWorkflowStatus@1010 : Boolean;
      PaymentServiceVisible@1032 : Boolean;
      PaymentServiceEnabled@1033 : Boolean;
      OpenPostedSalesInvQst@1020 : TextConst '@@@="%1 = posted document number";ENU=The invoice is posted as number %1 and moved to the Posted Sales Invoices window.\\Do you want to open the posted invoice?;ESP=La factura se registr¢ con el n£mero %1 y se movi¢ a la ventana de facturas de venta registradas.\\¨Quiere abrir la factura registrada?';
      IsCustomerOrContactNotEmpty@1021 : Boolean;
      ShowQuoteNo@1029 : Boolean;
      JobQueuesUsed@1031 : Boolean;
      CanCancelApprovalForRecord@1014 : Boolean;
      DocumentIsPosted@1016 : Boolean;
      ShipToOptions@1050 : 'Default (Sell-to Address),Alternate Shipping Address,Custom Address';
      BillToOptions@1051 : 'Default (Customer),Another Customer,Custom Address';
      EmptyShipToCodeErr@1052 : TextConst 'ENU=The Code field can only be empty if you select Custom Address in the Ship-to field.;ESP=El campo C¢digo solo puede estar vac¡o si selecciona Direcci¢n personalizada en el campo Direcci¢n de env¡o.';
      TPV@1170170001 : Record 7014655;
      GestAccTPV@1170170000 : Codeunit 7014552;
      IsSaaS@1019 : Boolean;
      IsBillToCountyVisible@1030 : Boolean;
      IsSellToCountyVisible@1028 : Boolean;
      IsShipToCountyVisible@1027 : Boolean;
      CanRequestApprovalForFlow@1023 : Boolean;
      CanCancelApprovalForFlow@1022 : Boolean;
      OperationDescription@1100000 : Text[500];
      SkipConfirmationDialogOnClosing@1025 : Boolean;

    LOCAL PROCEDURE ActivateFields@11();
    BEGIN
      IsBillToCountyVisible := FormatAddress.UseCounty("Bill-to Country/Region Code");
      IsSellToCountyVisible := FormatAddress.UseCounty("Sell-to Country/Region Code");
      IsShipToCountyVisible := FormatAddress.UseCounty("Ship-to Country/Region Code");
    END;

    LOCAL PROCEDURE Post@4(PostingCodeunitID@1000 : Integer;Navigate@1005 : Option);
    VAR
      SalesHeader@1002 : Record 36;
      SalesInvoiceHeader@1003 : Record 112;
      OfficeMgt@1004 : Codeunit 1630;
      InstructionMgt@1006 : Codeunit 1330;
      PreAssignedNo@1001 : Code[20];
      IsScheduledPosting@1007 : Boolean;
    BEGIN
      IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
        LinesInstructionMgt.SalesCheckAllLinesHaveQuantityAssigned(Rec);
      PreAssignedNo := "No.";

      SendToPosting(PostingCodeunitID);

      IsScheduledPosting := "Job Queue Status" = "Job Queue Status"::"Scheduled for Posting";
      DocumentIsPosted := (NOT SalesHeader.GET("Document Type","No.")) OR IsScheduledPosting;
      OnPostOnAfterSetDocumentIsPosted(SalesHeader,IsScheduledPosting,DocumentIsPosted);

      IF IsScheduledPosting THEN
        CurrPage.CLOSE;
      CurrPage.UPDATE(FALSE);

      IF PostingCodeunitID <> CODEUNIT::"Sales-Post (Yes/No)" THEN
        EXIT;

      IF OfficeMgt.IsAvailable THEN BEGIN
        SalesInvoiceHeader.SETCURRENTKEY("Pre-Assigned No.");
        SalesInvoiceHeader.SETRANGE("Pre-Assigned No.",PreAssignedNo);
        IF SalesInvoiceHeader.FINDFIRST THEN
          PAGE.RUN(PAGE::"Posted Sales Invoice",SalesInvoiceHeader);
      END ELSE
        CASE Navigate OF
          NavigateAfterPost::"Posted Document":
            IF InstructionMgt.IsEnabled(InstructionMgt.ShowPostedConfirmationMessageCode) THEN
              ShowPostedConfirmationMessage(PreAssignedNo);
          NavigateAfterPost::"New Document":
            IF DocumentIsPosted THEN BEGIN
              SalesHeader.INIT;
              SalesHeader.VALIDATE("Document Type",SalesHeader."Document Type"::Invoice);
              OnPostOnBeforeSalesHeaderInsert(SalesHeader);
              SalesHeader.INSERT(TRUE);
              PAGE.RUN(PAGE::"Sales Invoice",SalesHeader);
            END;
        END;
    END;

    LOCAL PROCEDURE ApproveCalcInvDisc@8();
    BEGIN
      CurrPage.SalesLines.PAGE.ApproveCalcInvDisc;
    END;

    LOCAL PROCEDURE SaveInvoiceDiscountAmount@10();
    VAR
      DocumentTotals@1000 : Codeunit 57;
    BEGIN
      CurrPage.SAVERECORD;
      DocumentTotals.SalesRedistributeInvoiceDiscountAmountsOnDocument(Rec);
      CurrPage.UPDATE(FALSE);
    END;

    LOCAL PROCEDURE ShowPostedConfirmationMessage@17(PreAssignedNo@1001 : Code[20]);
    VAR
      SalesInvoiceHeader@1000 : Record 112;
      InstructionMgt@1002 : Codeunit 1330;
    BEGIN
      SalesInvoiceHeader.SETCURRENTKEY("Pre-Assigned No.");
      SalesInvoiceHeader.SETRANGE("Pre-Assigned No.",PreAssignedNo);
      IF SalesInvoiceHeader.FINDFIRST THEN
        IF InstructionMgt.ShowConfirm(STRSUBSTNO(OpenPostedSalesInvQst,SalesInvoiceHeader."No."),
             InstructionMgt.ShowPostedConfirmationMessageCode)
        THEN
          PAGE.RUN(PAGE::"Posted Sales Invoice",SalesInvoiceHeader);
    END;

    LOCAL PROCEDURE SalespersonCodeOnAfterValidate@19011896();
    BEGIN
      CurrPage.SalesLines.PAGE.UpdatePage(TRUE);
    END;

    LOCAL PROCEDURE SetDocNoVisible@3();
    VAR
      DocumentNoVisibility@1000 : Codeunit 1400;
      DocType@1003 : 'Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,Reminder,FinChMemo';
    BEGIN
      DocNoVisible := DocumentNoVisibility.SalesDocumentNoIsVisible(DocType::Invoice,"No.");
    END;

    LOCAL PROCEDURE SetExtDocNoMandatoryCondition@2();
    VAR
      SalesReceivablesSetup@1000 : Record 311;
    BEGIN
      SalesReceivablesSetup.GET;
      ExternalDocNoMandatory := SalesReceivablesSetup."Ext. Doc. No. Mandatory"
    END;

    LOCAL PROCEDURE ShowPreview@5();
    VAR
      SalesPostYesNo@1000 : Codeunit 81;
    BEGIN
      SalesPostYesNo.Preview(Rec);
    END;

    LOCAL PROCEDURE SetControlAppearance@6();
    VAR
      ApprovalsMgmt@1002 : Codeunit 1535;
      WorkflowWebhookMgt@1000 : Codeunit 1543;
    BEGIN
      HasIncomingDocument := "Incoming Document Entry No." <> 0;
      SetExtDocNoMandatoryCondition;

      OpenApprovalEntriesExistForCurrUser := ApprovalsMgmt.HasOpenApprovalEntriesForCurrentUser(RECORDID);
      OpenApprovalEntriesExist := ApprovalsMgmt.HasOpenApprovalEntries(RECORDID);
      CanCancelApprovalForRecord := ApprovalsMgmt.CanCancelApprovalForRecord(RECORDID);

      IsCustomerOrContactNotEmpty := ("Sell-to Customer No." <> '') OR ("Sell-to Contact No." <> '');

      WorkflowWebhookMgt.GetCanRequestAndCanCancel(RECORDID,CanRequestApprovalForFlow,CanCancelApprovalForFlow);
    END;

    [External]
    PROCEDURE SetSkipConfirmationDialogOnClosing@12(Skip@1000 : Boolean);
    BEGIN
      SkipConfirmationDialogOnClosing := Skip;
    END;

    LOCAL PROCEDURE UpdatePaymentService@7();
    VAR
      PaymentServiceSetup@1000 : Record 1060;
    BEGIN
      PaymentServiceEnabled := PaymentServiceSetup.CanChangePaymentService(Rec);
    END;

    LOCAL PROCEDURE UpdateShipToBillToGroupVisibility@9();
    BEGIN
      CustomerMgt.CalculateShipToBillToOptions(ShipToOptions,BillToOptions,Rec);
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeStatisticsAction@1(VAR SalesHeader@1000 : Record 36;VAR Handled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnPostOnAfterSetDocumentIsPosted@13(SalesHeader@1000 : Record 36;VAR IsScheduledPosting@1001 : Boolean;VAR DocumentIsPosted@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnPostOnBeforeSalesHeaderInsert@14(VAR SalesHeader@1000 : Record 36);
    BEGIN
    END;

    BEGIN
    END.
  }
}

OBJECT Page 46 Sales Order Subform
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=16:11:43;
    Modified=Yes;
    Version List=NAVW114.07,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Lines;
               ESP=L¡neas];
    MultipleNewLines=Yes;
    LinksAllowed=No;
    SourceTable=Table37;
    DelayedInsert=Yes;
    SourceTableView=WHERE(Document Type=FILTER(Order));
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnInit=VAR
             ApplicationAreaMgmtFacade@1001 : Codeunit 9179;
           BEGIN
             SalesSetup.GET;
             InventorySetup.GET;
             Currency.InitRoundingPrecision;
             TempOptionLookupBuffer.FillBuffer(TempOptionLookupBuffer."Lookup Type"::Sales);
             IsFoundation := ApplicationAreaMgmtFacade.IsFoundationEnabled;
           END;

    OnOpenPage=VAR
                 Location@1000 : Record 14;
               BEGIN
                 IF Location.READPERMISSION THEN
                   LocationCodeVisible := NOT Location.ISEMPTY;

                 SetDimensionsVisibility;
               END;

    OnFindRecord=BEGIN
                   DocumentTotals.SalesCheckAndClearTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
                   EXIT(FIND(Which));
                 END;

    OnAfterGetRecord=BEGIN
                       ShowShortcutDimCode(ShortcutDimCode);
                       UpdateTypeText;
                       SetItemChargeFieldsStyle;
                     END;

    OnNewRecord=BEGIN
                  InitType;
                  SetDefaultType;

                  CLEAR(ShortcutDimCode);
                  UpdateTypeText;
                END;

    OnModifyRecord=BEGIN
                     DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
                   END;

    OnDeleteRecord=VAR
                     ReserveSalesLine@1000 : Codeunit 99000832;
                   BEGIN
                     IF (Quantity <> 0) AND ItemExists("No.") THEN BEGIN
                       COMMIT;
                       IF NOT ReserveSalesLine.DeleteLineConfirm(Rec) THEN
                         EXIT(FALSE);
                       ReserveSalesLine.DeleteLine(Rec);
                     END;
                     DocumentTotals.SalesDocTotalsNotUpToDate;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           GetTotalSalesHeader;
                           CalculateTotals;
                           SetLocationCodeMandatory;
                           UpdateEditableOnRow;
                           UpdateTypeText;
                           SetItemChargeFieldsStyle;
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 55      ;1   ;Action    ;
                      Name=SelectMultiItems;
                      AccessByPermission=TableData 27=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Select items;
                                 ESP=Seleccionar productos];
                      ToolTipML=[ENU=Add two or more items from the full list of your inventory items.;
                                 ESP=Agregue dos o m s productos de la lista completa de sus productos de inventario.];
                      ApplicationArea=#Basic,#Suite;
                      Image=NewItem;
                      OnAction=BEGIN
                                 SelectMultipleItems;
                               END;
                                }
      { 1907935204;1 ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 ESP=&L¡nea];
                      Image=Line }
      { 1906587504;2 ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 1905623604;3 ;Action    ;
                      Name=GetPrice;
                      AccessByPermission=TableData 7002=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get Price;
                                 ESP=Traer precio];
                      ToolTipML=[ENU=Insert the lowest possible price in the Unit Price field according to any special price that you have set up.;
                                 ESP=Inserte el precio m s bajo posible en el campo Precio venta, seg£n el precio especial que haya configurado.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Price;
                      OnAction=BEGIN
                                 ShowPrices;
                               END;
                                }
      { 1901770504;3 ;Action    ;
                      AccessByPermission=TableData 7004=R;
                      CaptionML=[ENU=Get Li&ne Discount;
                                 ESP=Traer descuento l¡&nea];
                      ToolTipML=[ENU=Insert the best possible discount in the Line Discount field according to any special discounts that you have set up.;
                                 ESP=Inserte el mejor descuento posible en el campo Descuento l¡nea, seg£n el descuento especial que haya configurado.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Text;
                      OnAction=BEGIN
                                 ShowLineDisc
                               END;
                                }
      { 1901741804;3 ;Action    ;
                      Name=ExplodeBOM_Functions;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=E&xplode BOM;
                                 ESP=&Desplegar L.M.];
                      ToolTipML=[ENU=Insert new lines for the components on the bill of materials, for example to sell the parent item as a kit. CAUTION: The line for the parent item will be deleted and represented by a description only. To undo, you must delete the component lines and add a line the parent item again.;
                                 ESP=Insertar nuevas l¡neas para los componentes de la lista de materiales, por ejemplo, para vender el producto principal como un kit. ATENCIàN: La l¡nea para el producto principal se eliminar  y quedar  representada tan solo por una descripci¢n. Para deshacerlo, debe eliminar las l¡neas de componente y volver a agregar una l¡nea de producto principal.];
                      ApplicationArea=#Suite;
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
      { 1903099004;3 ;Action    ;
                      Name=Insert Ext. Texts;
                      AccessByPermission=TableData 279=R;
                      CaptionML=[ENU=Insert &Ext. Texts;
                                 ESP=Insertar t&extos adicionales];
                      ToolTipML=[ENU=Insert the extended item description that is set up for the item that is being processed on the line.;
                                 ESP=Insertar la descripci¢n de producto ampliada que se configur¢ para el producto que se est  procesando en la l¡nea.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Text;
                      OnAction=BEGIN
                                 InsertExtendedText(TRUE);
                               END;
                                }
      { 1905427504;3 ;Action    ;
                      Name=Reserve;
                      Ellipsis=Yes;
                      CaptionML=[ENU=&Reserve;
                                 ESP=&Reserva];
                      ToolTipML=[ENU=Reserve the quantity that is required on the document line that you opened this window for.;
                                 ESP=Reservar la cantidad necesaria en la l¡nea de documento para la que abri¢ esta ventana.];
                      ApplicationArea=#Reservation;
                      Image=Reserve;
                      OnAction=BEGIN
                                 FIND;
                                 ShowReservation;
                               END;
                                }
      { 1903502504;3 ;Action    ;
                      Name=OrderTracking;
                      CaptionML=[ENU=Order &Tracking;
                                 ESP=&Seguimiento pedido];
                      ToolTipML=[ENU=Tracks the connection of a supply to its corresponding demand. This can help you find the original demand that created a specific production order or purchase order.;
                                 ESP=Realiza un seguimiento de la conexi¢n de una oferta hasta su demanda correspondiente. Esto puede ayudarle a encontrar la demanda original que cre¢ un pedido de producci¢n o un pedido de compra determinados.];
                      ApplicationArea=#Basic,#Suite;
                      Image=OrderTracking;
                      OnAction=BEGIN
                                 ShowTracking;
                               END;
                                }
      { 1170170014;3 ;Action    ;
                      CaptionML=ESP=Autorizar margen lineas;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=AuthorizeCreditCard;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 AutorizarLineaMargen;//BAIN-0034
                               END;
                                }
      { 1905968604;3 ;Action    ;
                      Name=Select Nonstoc&k Items;
                      AccessByPermission=TableData 5718=R;
                      CaptionML=[ENU=Select Ca&talog Items;
                                 ESP=Seleccionar productos del ca&t logo];
                      ToolTipML=[ENU="View the list of catalog items that exist in the system. ";
                                 ESP="Permite ver la lista de productos del cat logo que existe en el sistema. "];
                      ApplicationArea=#Basic,#Suite;
                      Image=NonStockItem;
                      OnAction=BEGIN
                                 ShowNonstockItems;
                               END;
                                }
      { 1170170013;2 ;Action    ;
                      CaptionML=[ENU=Create new analysis;
                                 ESP=Lanzar nuevo an lisis];
                      Image=BarChart;
                      OnAction=BEGIN
                                 GestAnalisis.CreaAnalisisDesdeLinVenta(Rec); // VNTES
                               END;
                                }
      { 1900580804;2 ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 ESP=Disponibilidad prod. por];
                      Image=ItemAvailability }
      { 5       ;3   ;Action    ;
                      Name=<Action3>;
                      CaptionML=[ENU=Event;
                                 ESP=Evento];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 ESP=Permite ver c¢mo el saldo disponible real y previsto de un art¡culo se desarrollar  a lo largo del tiempo seg£n la oferta y la demanda.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 1904522204;3 ;Action    ;
                      Name=ItemAvailabilityByPeriod;
                      CaptionML=[ENU=Period;
                                 ESP=Periodo];
                      ToolTipML=[ENU=Show the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 ESP=Muestra la cantidad proyectada del producto a lo largo de los periodos de tiempo, como d¡as, semanas o meses.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Period;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 1902056104;3 ;Action    ;
                      Name=ItemAvailabilityByVariant;
                      CaptionML=[ENU=Variant;
                                 ESP=Variante];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 ESP=Permite ver o editar las variantes del art¡culo. En lugar de configurar cada color de un art¡culo como un art¡culo diferente, puede configurar varios colores como variantes del art¡culo.];
                      ApplicationArea=#Planning;
                      Image=ItemVariant;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 1900639404;3 ;Action    ;
                      Name=ItemAvailabilityByLocation;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 ESP=Almac‚n];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 ESP=Permite ver la cantidad real y proyectada del producto por almac‚n.];
                      ApplicationArea=#Location;
                      Image=Warehouse;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 15      ;3   ;Action    ;
                      AccessByPermission=TableData 5870=R;
                      CaptionML=[ENU=BOM Level;
                                 ESP=Nivel L.M.];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 ESP=Permite ver las cifras correspondientes a los productos en listas de materiales que indican cu ntas unidades de un producto principal puede producir seg£n la disponibilidad de productos secundarios.];
                      ApplicationArea=#Assembly;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 33      ;2   ;ActionGroup;
                      CaptionML=[ENU=Related Information;
                                 ESP=Informaci¢n relacionada] }
      { 1900186704;3 ;Action    ;
                      AccessByPermission=TableData 27=R;
                      CaptionML=[ENU=Reservation Entries;
                                 ESP=Movs. reserva];
                      ToolTipML=[ENU=View the entries for every reservation that is made, either manually or automatically.;
                                 ESP=Permite ver los movimientos para cada reserva que se realiza, ya sea manual o autom ticamente.];
                      ApplicationArea=#Reservation;
                      Image=ReservationLedger;
                      OnAction=BEGIN
                                 ShowReservationEntries(TRUE);
                               END;
                                }
      { 1905987604;3 ;Action    ;
                      Name=ItemTrackingLines;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=Item &Tracking Lines;
                                 ESP=L¡ns. se&guim. prod.];
                      ToolTipML=[ENU=View or edit serial numbers and lot numbers that are assigned to the item on the document or journal line.;
                                 ESP=Permite ver o editar n£meros de serie y n£meros de lote asignados al producto en el documento o la l¡nea del diario.];
                      ApplicationArea=#ItemTracking;
                      Image=ItemTrackingLines;
                      OnAction=BEGIN
                                 OpenItemTrackingLines;
                               END;
                                }
      { 1901633104;3 ;Action    ;
                      Name=SelectItemSubstitution;
                      AccessByPermission=TableData 5715=R;
                      CaptionML=[ENU=Select Item Substitution;
                                 ESP=Seleccionar prod. sustitutivo];
                      ToolTipML=[ENU=Select another item that has been set up to be sold instead of the original item if it is unavailable.;
                                 ESP=Seleccione otro producto que se haya configurado para venderse en vez del producto original si no est  disponible.];
                      ApplicationArea=#Suite;
                      Image=SelectItemSubstitution;
                      OnAction=BEGIN
                                 CurrPage.SAVERECORD;
                                 ShowItemSub;
                                 CurrPage.UPDATE(TRUE);
                                 IF (Reserve = Reserve::Always) AND ("No." <> xRec."No.") THEN BEGIN
                                   AutoReserve;
                                   CurrPage.UPDATE(FALSE);
                                 END;
                               END;
                                }
      { 1902085804;3 ;Action    ;
                      Name=Dimensions;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Image=Dimensions;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 1903418704;3 ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      Image=ViewComments;
                      OnAction=BEGIN
                                 ShowLineComments;
                               END;
                                }
      { 1907184504;3 ;Action    ;
                      AccessByPermission=TableData 5800=R;
                      CaptionML=[ENU=Item Charge &Assignment;
                                 ESP=Asi&gnaci¢n cargos prod.];
                      ToolTipML=[ENU=Assign additional direct costs, for example for freight, to the item on the line.;
                                 ESP=Asignar costes directos adicionales, por ejemplo para flete, al art¡culo en la l¡nea.];
                      ApplicationArea=#ItemCharges;
                      Image=ItemCosts;
                      OnAction=BEGIN
                                 ItemChargeAssgnt;
                                 SetItemChargeFieldsStyle;
                               END;
                                }
      { 1905403704;3 ;Action    ;
                      Name=OrderPromising;
                      AccessByPermission=TableData 99000880=R;
                      CaptionML=[ENU=Order &Promising;
                                 ESP=Comprom&iso entrega];
                      ToolTipML=[ENU=Calculate the shipment and delivery dates based on the item's known and expected availability dates, and then promise the dates to the customer.;
                                 ESP=Calcular las fechas de env¡o y entrega seg£n las fechas de disponibilidad conocidas y previstas del art¡culo y, despu‚s, comprometer dichas fechas ante el cliente.];
                      ApplicationArea=#OrderPromising;
                      Image=OrderPromising;
                      OnAction=BEGIN
                                 OrderPromisingLine;
                               END;
                                }
      { 1170170001;3 ;Action    ;
                      CaptionML=[ENU=Analysis;
                                 ESP=An lisis];
                      Image=AnalysisView;
                      OnAction=BEGIN
                                 GestAnalisis.T37MostrarAnalisis(Rec); // VNTES
                               END;
                                }
      { 1905403814;3 ;Action    ;
                      Name=DocAttach;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Image=Attach;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1000 : Page 1173;
                                 RecRef@1001 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 7       ;2   ;ActionGroup;
                      CaptionML=[ENU=Assemble to Order;
                                 ESP=Ensamblar para pedido];
                      ActionContainerType=NewDocumentItems;
                      Image=AssemblyBOM }
      { 9       ;3   ;Action    ;
                      Name=AssembleToOrderLines;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Assemble-to-Order Lines;
                                 ESP=Ensamblar para l¡neas de pedido];
                      ToolTipML=[ENU=View any linked assembly order lines if the documents represents an assemble-to-order sale.;
                                 ESP=Permite ver todas las l¡neas del pedido de ensamblado vinculado si los documentos representan una venta de tipo ensamblar para pedido.];
                      ApplicationArea=#Assembly;
                      Image=Grid;
                      OnAction=BEGIN
                                 ShowAsmToOrderLines;
                               END;
                                }
      { 11      ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Roll Up &Price;
                                 ESP=Revertir &precio];
                      ToolTipML=[ENU=Update the unit price of the assembly item according to any changes that you have made to the assembly components.;
                                 ESP=Actualice el precio unitario del elemento del ensamblado de acuerdo con los cambios que haya efectuado en los componentes del ensamblado.];
                      ApplicationArea=#Assembly;
                      Image=Restore;
                      OnAction=BEGIN
                                 RollupAsmPrice;
                               END;
                                }
      { 13      ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Roll Up &Cost;
                                 ESP=Distribuir &coste];
                      ToolTipML=[ENU=Update the unit cost of the assembly item according to any changes that you have made to the assembly components.;
                                 ESP=Actualice el coste unitario del elemento de ensamblado de acuerdo con los cambios que haya efectuado en los componentes del ensamblado.];
                      ApplicationArea=#Assembly;
                      Image=CostBudget;
                      OnAction=BEGIN
                                 RollUpAsmCost;
                               END;
                                }
      { 1905483604;3 ;Action    ;
                      Name=DocumentLineTracking;
                      CaptionML=[ENU=Document &Line Tracking;
                                 ESP=Seguimiento de &l¡nea de documento];
                      ToolTipML=[ENU="View related open, posted, or archived documents or document lines. ";
                                 ESP="Permite ver documentos abiertos, registrados o archivados relacionados, o las l¡neas de documento. "];
                      ApplicationArea=#Basic,#Suite;
                      Image=Navigate;
                      OnAction=BEGIN
                                 ShowDocumentLineTracking;
                               END;
                                }
      { 31      ;2   ;Action    ;
                      Name=DeferralSchedule;
                      CaptionML=[ENU=Deferral Schedule;
                                 ESP=Previsi¢n fraccionamiento];
                      ToolTipML=[ENU=View or edit the deferral schedule that governs how revenue made with this sales document is deferred to different accounting periods when the document is posted.;
                                 ESP=Permite ver o editar la previsi¢n de fraccionamiento que administra el modo de fraccionar los ingresos realizados con este documento de venta en per¡odos contables diferentes cuando se registra el documento.];
                      ApplicationArea=#Suite;
                      Enabled="Deferral Code" <> '';
                      Image=PaymentPeriod;
                      OnAction=BEGIN
                                 ShowDeferralSchedule;
                               END;
                                }
      { 1905926804;1 ;ActionGroup;
                      CaptionML=[ENU=O&rder;
                                 ESP=&Pedido];
                      Image=Order }
      { 1903645604;2 ;ActionGroup;
                      CaptionML=[ENU=Dr&op Shipment;
                                 ESP=Env¡&o directo];
                      Image=Delivery }
      { 1907981104;3 ;Action    ;
                      AccessByPermission=TableData 120=R;
                      CaptionML=[ENU=Purchase &Order;
                                 ESP=Pedido de &compra];
                      ToolTipML=[ENU=View the purchase order that is linked to the sales order, for drop shipment or special order.;
                                 ESP=Permite ver el pedido de compra vinculado al pedido de venta para env¡o directo o especial.];
                      ApplicationArea=#Suite;
                      Image=Document;
                      OnAction=BEGIN
                                 OpenPurchOrderForm;
                               END;
                                }
      { 1903587004;2 ;ActionGroup;
                      CaptionML=[ENU=Speci&al Order;
                                 ESP=&Pedido especial];
                      Image=SpecialOrder }
      { 1903192904;3 ;Action    ;
                      Name=OpenSpecialPurchaseOrder;
                      AccessByPermission=TableData 120=R;
                      CaptionML=[ENU=Purchase &Order;
                                 ESP=Pedido de &compra];
                      ToolTipML=[ENU=View the purchase order that is linked to the sales order, for drop shipment or special order.;
                                 ESP=Permite ver el pedido de compra vinculado al pedido de venta para env¡o directo o especial.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Document;
                      OnAction=BEGIN
                                 OpenSpecialPurchOrderForm;
                               END;
                                }
      { 666     ;2   ;Action    ;
                      Name=BlanketOrder;
                      CaptionML=[ENU=Blanket Order;
                                 ESP=Pedido abierto];
                      ToolTipML=[ENU=View the blanket sales order.;
                                 ESP=Permite ver el pedido de venta abierto.];
                      ApplicationArea=#Suite;
                      Image=BlanketOrder;
                      OnAction=VAR
                                 SalesHeader@1000 : Record 36;
                                 BlanketSalesOrder@1001 : Page 507;
                               BEGIN
                                 TESTFIELD("Blanket Order No.");
                                 SalesHeader.SETRANGE("No.","Blanket Order No.");
                                 IF NOT SalesHeader.ISEMPTY THEN BEGIN
                                   BlanketSalesOrder.SETTABLEVIEW(SalesHeader);
                                   BlanketSalesOrder.EDITABLE := FALSE;
                                   BlanketSalesOrder.RUN;
                                 END;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of entity that will be posted for this sales line, such as Item, Resource, or G/L Account.;
                           ESP=Especifica el tipo de entidad que se registrar  para esta l¡nea de venta, como Producto, Recurso o Cuenta C/G.];
                ApplicationArea=#Advanced;
                SourceExpr=Type;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             SetLocationCodeMandatory;
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 37  ;2   ;Field     ;
                Name=FilteredTypeField;
                CaptionML=[ENU=Type;
                           ESP=Tipo];
                ToolTipML=[ENU="Specifies the type of transaction that will be posted with the document line. If you select Comment, then you can enter any text in the Description field, such as a message to a customer. ";
                           ESP="Especifica el tipo de transacci¢n que se registrar  con la l¡nea del documento. Si selecciona Comentario, puede escribir cualquier texto en el campo Descripci¢n; por ejemplo, un mensaje a un cliente. "];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TypeAsText;
                TableRelation="Option Lookup Buffer"."Option Caption" WHERE (Lookup Type=CONST(Sales));
                Visible=IsFoundation;
                Editable=CurrPageIsEditable;
                LookupPageID=Option Lookup List;
                OnValidate=BEGIN
                             TempOptionLookupBuffer.SetCurrentType(Type);
                             IF TempOptionLookupBuffer.AutoCompleteOption(TypeAsText,TempOptionLookupBuffer."Lookup Type"::Sales) THEN
                               VALIDATE(Type,TempOptionLookupBuffer.ID);
                             TempOptionLookupBuffer.ValidateOption(TypeAsText);
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 1170170000;2;Field  ;
                SourceExpr="C¢d. conjunto" }

    { 1170170002;2;Field  ;
                Name=NoConLookupConjunto;
                CaptionML=ENU=No.;
                SourceExpr="No.";
                OnValidate=BEGIN
                             //I-23069
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             ShowShortcutDimCode(ShortcutDimCode);

                             QuantityOnAfterValidate;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                             //F-23069
                           END;

                OnLookup=VAR
                           GestionBaines@1170170000 : Codeunit 50005;
                         BEGIN
                           GestionBaines.ConjuntoLookpNoLinVenta(Rec);//23069
                         END;
                          }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of a general ledger account, item, resource, additional cost, or fixed asset, depending on the contents of the Type field.;
                           ESP=Especifica el n£mero de una cuenta de contabilidad, un producto, un recurso, un coste adicional o un activo fijo, seg£n el contenido del campo Tipo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No.";
                Visible=False;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             ShowShortcutDimCode(ShortcutDimCode);

                             QuantityOnAfterValidate;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine }

    { 68  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cross-referenced item number. If you enter a cross reference between yours and your vendor's or customer's item number, then this number will override the standard item number when you enter the cross-reference number on a sales or purchase document.;
                           ESP=Especifica el n£mero de producto de la referencia cruzada. Si introduce una referencia cruzada entre su n£mero de producto y el del proveedor o el cliente, sobrescribir  el n£mero de producto est ndar cuando introduzca el n£mero de referencia cruzada en un documento de venta o de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cross-Reference No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             DeltaUpdateTotals;
                           END;

                OnLookup=BEGIN
                           CrossReferenceNoLookUp;
                           NoOnAfterValidate;
                           UpdateEditableOnRow;
                           OnCrossReferenceNoOnLookup(Rec);
                         END;
                          }

    { 1136;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the intercompany partner that the transaction is related to if the entry was created from an intercompany transaction.;
                           ESP=Especifica el c¢digo del socio de empresas vinculadas relacionado con la transacci¢n si el movimiento se ha creado a partir de una transacci¢n entre empresas vinculadas.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Code";
                Visible=FALSE }

    { 130 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the item or account in your IC partner's company that corresponds to the item or account on the line.;
                           ESP=Especifica el producto o la cuenta de la empresa de su socio IC que corresponda al producto o la cuenta de la l¡nea.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Ref. Type";
                Visible=FALSE }

    { 132 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the IC partner. If the line is being sent to one of your intercompany partners, this field is used together with the IC Partner Ref. Type field to indicate the item or account in your partner's company that corresponds to the line.;
                           ESP=Especifica el socio IC. Si la l¡nea se est  enviando a uno de los socios de empresas vinculadas, este campo se usa junto con el campo Tipo referencia socio IC para indicar el art¡culo o la cuenta de la empresa del socio que corresponde a la l¡nea.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Reference";
                Visible=FALSE }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESP=Especifica la variante del producto que figura en la l¡nea.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE;
                OnValidate=BEGIN
                             VariantCodeOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 104 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that a substitute is available for the item on the sales line.;
                           ESP=Especifica si hay un sustituto disponible para el producto en la l¡nea de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Substitution Available";
                Visible=FALSE }

    { 74  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which purchaser is assigned to the vendor.;
                           ESP=Especifica el comprador asignado al proveedor.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Purchasing Code";
                Visible=FALSE }

    { 70  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that this item is a catalog item.;
                           ESP=Especifica que este es un producto del cat logo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Nonstock;
                Visible=FALSE }

    { 78  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT product posting group. Links business transactions made for the item, resource, or G/L account with the general ledger, to account for VAT amounts resulting from trade with that record.;
                           ESP=Especifica el grupo de registro de IVA de producto. Vincula las transacciones empresariales realizadas para el producto, el recurso o la cuenta C/G con el fin de contabilizar los importes de IVA que derivan de la comercializaci¢n de ese registro.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Prod. Posting Group";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the entry of the product to be sold. To add a non-transactional text line, fill in the Description field only.;
                           ESP=Especifica una descripci¢n del movimiento del producto que se va a vender. Para agregar una l¡nea de texto no transaccional, rellene solo el campo Descripci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Description;
                OnValidate=BEGIN
                             UpdateEditableOnRow;

                             IF "No." = xRec."No." THEN
                               EXIT;

                             NoOnAfterValidate;
                             ShowShortcutDimCode(ShortcutDimCode);
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine;
                QuickEntry=FALSE }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if your vendor ships the items directly to your customer.;
                           ESP=Especifica si el proveedor env¡a directamente los art¡culos al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Drop Shipment";
                Visible=FALSE }

    { 106 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that the item on the sales line is a special-order item.;
                           ESP=Especifica que el producto de la l¡nea de venta corresponde a un producto de pedido especial.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Special Order";
                Visible=FALSE }

    { 110 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code explaining why the item was returned.;
                           ESP=Especifica el c¢digo que explica el motivo de la devoluci¢n del producto.];
                ApplicationArea=#Suite;
                SourceExpr="Return Reason Code";
                Visible=FALSE }

    { 42  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the inventory location from which the items sold should be picked and where the inventory decrease is registered.;
                           ESP=Especifica el lugar del inventario del que hay que seleccionar los productos vendidos y d¢nde hay que registrar la disminuci¢n de inventario.];
                ApplicationArea=#Location;
                SourceExpr="Location Code";
                Visible=LocationCodeVisible;
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             LocationCodeOnAfterValidate;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=LocationCodeMandatory;
                QuickEntry=FALSE }

    { 114 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the bin where the items are picked or put away.;
                           ESP=Especifica la ubicaci¢n en la que se recogen o se dejan los art¡culos.];
                ApplicationArea=#Warehouse;
                SourceExpr="Bin Code";
                Visible=FALSE }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether a reservation can be made for items on this line.;
                           ESP=Especifica si es posible realizar una reserva de los productos de esta l¡nea.];
                ApplicationArea=#Reservation;
                SourceExpr=Reserve;
                Visible=FALSE;
                OnValidate=BEGIN
                             ReserveOnAfterValidate;
                           END;
                            }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units are being sold.;
                           ESP=Especifica cu ntas unidades se han vendido.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr=Quantity;
                Enabled=NOT IsCommentLine;
                Editable=NOT IsCommentLine;
                OnValidate=BEGIN
                             QuantityOnAfterValidate;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the sales line quantity that you want to supply by assembly.;
                           ESP=Especifica cu ntas unidades de la cantidad de la l¡nea de venta desea suministrar mediante ensamblado.];
                ApplicationArea=#Assembly;
                BlankZero=Yes;
                SourceExpr="Qty. to Assemble to Order";
                Visible=FALSE;
                OnValidate=BEGIN
                             QtyToAsmToOrderOnAfterValidate;
                           END;

                OnDrillDown=BEGIN
                              ShowAsmToOrderLines;
                            END;
                             }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been reserved.;
                           ESP=Especifica cu ntas unidades del producto de la l¡nea se han reservado.];
                ApplicationArea=#Reservation;
                BlankZero=Yes;
                SourceExpr="Reserved Quantity";
                QuickEntry=FALSE }

    { 44  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           ESP=Especifica c¢mo se mide cada unidad del producto o el recurso, por ejemplo, en piezas u horas. De forma predeterminada, se inserta el valor en el campo Unidad de medida base de la ficha de producto o recurso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit of Measure Code";
                Enabled=UnitofMeasureCodeIsChangeable;
                Editable=UnitofMeasureCodeIsChangeable;
                OnValidate=BEGIN
                             UnitofMeasureCodeOnAfterValida;
                           END;

                QuickEntry=FALSE }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit of measure for the item or resource on the sales line.;
                           ESP=Especifica la unidad de medida del producto o recurso en la l¡nea de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Unit of Measure";
                Visible=FALSE }

    { 38  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit cost of the item on the line.;
                           ESP=Especifica el coste unitario del producto que figura en la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE }

    { 112 ;2   ;Field     ;
                Name=SalesPriceExist;
                CaptionML=[ENU=Sales Price Exists;
                           ESP=Existe precio venta];
                ToolTipML=[ENU=Specifies that there is a specific price for this customer.;
                           ESP=Especifica que existe un precio espec¡fico para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=PriceExists;
                Visible=FALSE;
                Editable=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the price for one unit on the sales line.;
                           ESP=Especifica el precio de una unidad en la l¡nea de venta.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Unit Price";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 1170170012;2;Field  ;
                SourceExpr="Comercial Price" }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount percentage that is granted for the item on the line.;
                           ESP=Especifica el porcentaje de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Discount %";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 76  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount, excluding any invoice discount amount, that must be paid for products on the line.;
                           ESP=Especifica el importe neto, menos cualquier importe de descuento en factura, que se debe pagar por los productos de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Amount";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 116 ;2   ;Field     ;
                Name=SalesLineDiscExists;
                CaptionML=[ENU=Sales Line Disc. Exists;
                           ESP=Existe dto. l¡nea venta];
                ToolTipML=[ENU=Specifies that there is a specific discount for this customer.;
                           ESP=Especifica que existe un descuento espec¡fico para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=LineDiscExists;
                Visible=FALSE;
                Editable=FALSE }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount amount that is granted for the item on the line.;
                           ESP=Especifica la cantidad de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Line Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 136 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the prepayment percentage to use to calculate the prepayment for sales.;
                           ESP=Especifica el porcentaje de prepago que se debe usar para calcular el prepago de las ventas.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepayment %";
                Visible=FALSE }

    { 138 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the prepayment amount of the line in the currency of the sales document if a prepayment percentage is specified for the sales line.;
                           ESP=Especifica la cantidad de prepago de la l¡nea, en la divisa del documento de venta, si se especific¢ un porcentaje de prepago para la l¡nea de venta.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepmt. Line Amount";
                Visible=FALSE }

    { 140 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the prepayment amount that has already been invoiced to the customer for this sales line.;
                           ESP=Especifica el importe de prepago que ya se ha facturado al cliente para esta l¡nea de venta.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepmt. Amt. Inv.";
                Visible=FALSE }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the invoice line is included when the invoice discount is calculated.;
                           ESP=Especifica si la l¡nea de factura se incluye cuando se calcula el descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Invoice Disc.";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 90  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total calculated invoice discount amount for the line.;
                           ESP=Especifica el importe total de descuento en factura calculado para la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Inv. Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 1170170003;2;Field  ;
                SourceExpr=Promotion;
                Visible=FALSE;
                Editable=FALSE }

    { 1170170004;2;Field  ;
                SourceExpr="Promo Code";
                Visible=FALSE }

    { 39  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the actual invoice discount amount that will be posted for the line in next invoice.;
                           ESP=Especifica el importe de descuento en factura real que se registrar  para la l¡nea en la pr¢xima factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Inv. Disc. Amount to Invoice";
                Visible=FALSE }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of items that remain to be shipped.;
                           ESP=Especifica la cantidad de los productos que queda por enviar.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Qty. to Ship";
                OnValidate=BEGIN
                             IF "Qty. to Asm. to Order (Base)" <> 0 THEN BEGIN
                               CurrPage.SAVERECORD;
                               CurrPage.UPDATE(FALSE);
                             END;
                           END;
                            }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been posted as shipped.;
                           ESP=Permite especificar cu ntas unidades del producto que figura en la l¡nea se han registrado como enviadas.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Quantity Shipped";
                QuickEntry=FALSE }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity that remains to be invoiced. It is calculated as Quantity - Qty. Invoiced.;
                           ESP=Permite especificar la cantidad que queda por facturar. Se calcula como Cantidad menos Cant. facturada.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Qty. to Invoice" }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been posted as invoiced.;
                           ESP=Especifica cu ntas unidades del producto que figura en la l¡nea se han registrado como facturadas.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Quantity Invoiced" }

    { 142 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the prepayment amount that has already been deducted from ordinary invoices posted for this sales order line.;
                           ESP=Especifica el importe de prepago que ya se descont¢ de las facturas normales registradas para esta l¡nea de pedido de venta.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepmt Amt to Deduct";
                Visible=FALSE }

    { 144 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the prepayment amount that has already been deducted from ordinary invoices posted for this sales order line.;
                           ESP=Especifica el importe de prepago que ya se descont¢ de las facturas normales registradas para esta l¡nea de pedido de venta.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepmt Amt Deducted";
                Visible=FALSE }

    { 46  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you can assign item charges to this line.;
                           ESP=Especifica que es posible asignar cargos de producto a esta l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Allow Item Charge Assignment";
                Visible=FALSE }

    { 5800;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item charge will be assigned to the line.;
                           ESP=Especifica cu ntas unidades del cargo de producto se asignar n a la l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Qty. to Assign";
                StyleExpr=ItemChargeStyleExpression;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdateForm(FALSE);
                            END;

                QuickEntry=FALSE }

    { 102 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of the item charge that was assigned to a specified item when you posted this sales line.;
                           ESP=Especifica la cantidad de cargo de producto que se ha asignado a un producto determinado al registrar esta l¡nea de venta.];
                ApplicationArea=#ItemCharges;
                BlankZero=Yes;
                SourceExpr="Qty. Assigned";
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              CurrPage.UPDATE(FALSE);
                            END;

                QuickEntry=FALSE }

    { 82  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that the customer has asked for the order to be delivered.;
                           ESP=Especifica la fecha en la que el cliente ha solicitado que se entregue el pedido.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Requested Delivery Date";
                Visible=FALSE;
                OnValidate=BEGIN
                             UpdateForm(TRUE);
                           END;
                            }

    { 84  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that you have promised to deliver the order, as a result of the Order Promising function.;
                           ESP=Especifica la fecha de entrega que acord¢ con el cliente como resultado de la funci¢n Compromiso entrega.];
                ApplicationArea=#OrderPromising;
                SourceExpr="Promised Delivery Date";
                Visible=FALSE;
                OnValidate=BEGIN
                             UpdateForm(TRUE);
                           END;
                            }

    { 86  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the planned date that the shipment will be delivered at the customer's address. If the customer requests a delivery date, the program calculates whether the items will be available for delivery on this date. If the items are available, the planned delivery date will be the same as the requested delivery date. If not, the program calculates the date that the items are available for delivery and enters this date in the Planned Delivery Date field.;
                           ESP=Especifica la fecha prevista de entrega del env¡o en la direcci¢n del cliente. Si el cliente solicita una fecha de entrega, el programa calcula si los productos estar n disponibles para la entrega en esta fecha. Si los productos est n disponibles, la fecha de entrega planificada ser  la misma que la fecha de entrega solicitada. De lo contrario, el programa calcula la fecha en que los productos estar n disponibles para la entrega y la especificar  en el campo Fecha entrega planificada.];
                ApplicationArea=#Planning;
                SourceExpr="Planned Delivery Date";
                OnValidate=BEGIN
                             UpdateForm(TRUE);
                           END;

                QuickEntry=FALSE }

    { 88  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that the shipment should ship from the warehouse. If the customer requests a delivery date, the program calculates the planned shipment date by subtracting the shipping time from the requested delivery date. If the customer does not request a delivery date or the requested delivery date cannot be met, the program calculates the content of this field by adding the shipment time to the shipping date.;
                           ESP=Especifica la fecha en que deber¡a salir el env¡o del almac‚n. Si el cliente solicita una fecha de entrega, el programa calcula la fecha de env¡o prevista y, para ello, resta la hora de env¡o de la fecha de entrega solicitada. Si el cliente no solicita una fecha de entrega o la fecha de entrega solicitada no puede cumplirse, el programa calcula el contenido de este campo sumando la hora de env¡o a la fecha de env¡o.];
                ApplicationArea=#Planning;
                SourceExpr="Planned Shipment Date";
                OnValidate=BEGIN
                             UpdateForm(TRUE);
                           END;
                            }

    { 100 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when items on the document are shipped or were shipped. A shipment date is usually calculated from a requested delivery date plus lead time.;
                           ESP=Especifica cu ndo se van a enviar o se han enviado los productos del documento. Se calcula normalmente una fecha de env¡o con la fecha de entrega solicitada y el plazo de seguridad.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Date";
                OnValidate=BEGIN
                             ShipmentDateOnAfterValidate;
                           END;

                QuickEntry=FALSE }

    { 92  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the shipping agent who is transporting the items.;
                           ESP=Especifica el c¢digo del transportista que traslada los productos.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Code";
                Visible=FALSE }

    { 94  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the service, such as a one-day delivery, that is offered by the shipping agent.;
                           ESP=Especifica el c¢digo de servicio (por ejemplo, entrega en un d¡a) que ofrece el transportista.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Service Code";
                Visible=FALSE }

    { 96  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how long it takes from when the items are shipped from the warehouse to when they are delivered.;
                           ESP=Especifica el tiempo que transcurre desde que se env¡an los productos desde el almac‚n hasta que se entregan.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipping Time";
                Visible=FALSE }

    { 134 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which work type the resource applies to when the sale is related to a job.;
                           ESP=Especifica a qu‚ tipo de trabajo corresponde el recurso cuando una venta se relaciona con un trabajo.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Work Type Code";
                Visible=FALSE }

    { 17  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units on the sales order line remain to be handled in warehouse documents.;
                           ESP=Especifica cu ntas unidades de la l¡nea de pedido de venta faltan controlar en los documentos de almac‚n.];
                ApplicationArea=#Warehouse;
                SourceExpr="Whse. Outstanding Qty.";
                Visible=FALSE }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units on the sales order line remain to be handled in warehouse documents.;
                           ESP=Especifica cu ntas unidades de la l¡nea de pedido de venta faltan controlar en los documentos de almac‚n.];
                ApplicationArea=#Warehouse;
                SourceExpr="Whse. Outstanding Qty. (Base)";
                Visible=FALSE }

    { 19  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many assemble-to-order units on the sales order line need to be assembled and handled in warehouse documents.;
                           ESP=Especifica cu ntas unidades de ensamblar para pedido de la l¡nea de pedido de venta se deben ensamblar y controlar en los documentos de almac‚n.];
                ApplicationArea=#Warehouse;
                SourceExpr="ATO Whse. Outstanding Qty.";
                Visible=FALSE }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many assemble-to-order units on the sales order line remain to be assembled and handled in warehouse documents.;
                           ESP=Especifica cu ntas unidades de ensamblar para pedido de la l¡nea de pedido de venta falta ensamblar y controlar en los documentos de almac‚n.];
                ApplicationArea=#Warehouse;
                SourceExpr="ATO Whse. Outstd. Qty. (Base)";
                Visible=FALSE }

    { 98  ;2   ;Field     ;
                ToolTipML=[ENU="Specifies a date formula for the time it takes to get items ready to ship from this location. The time element is used in the calculation of the delivery date as follows: Shipment Date + Outbound Warehouse Handling Time = Planned Shipment Date + Shipping Time = Planned Delivery Date.";
                           ESP="Especifica una f¢rmula de fecha con el tiempo que se tarda en preparar los productos para su env¡o desde este almac‚n. El elemento de tiempo se utiliza en el c lculo de la fecha de entrega de la siguiente manera: fecha env¡o + tiempo de manipulaci¢n en el almac‚n de salida = fecha env¡o planificada + tiempo env¡o = fecha entrega planificada."];
                ApplicationArea=#Warehouse;
                SourceExpr="Outbound Whse. Handling Time";
                Visible=FALSE }

    { 62  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order that the record originates from.;
                           ESP=Especifica el n£mero del pedido abierto a partir del cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order No.";
                Visible=FALSE }

    { 66  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order line that the record originates from.;
                           ESP=Especifica el n£mero de la l¡nea de pedido abierto a partir de la cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order Line No.";
                Visible=FALSE }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that will be used on related fixed asset ledger entries.;
                           ESP=Especifica la fecha que se usar  en los movimientos de activos fijos relacionados.];
                ApplicationArea=#FixedAssets;
                SourceExpr="FA Posting Date";
                Visible=FALSE }

    { 40  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if depreciation was calculated until the FA posting date of the line.;
                           ESP=Especifica si la amortizaci¢n se calcul¢ hasta la fecha de registro del activo fijo de la l¡nea.];
                ApplicationArea=#FixedAssets;
                SourceExpr="Depr. until FA Posting Date";
                Visible=FALSE }

    { 36  ;2   ;Field     ;
                Name=<Depr. until FA Posting Date>;
                ToolTipML=[ENU=Specifies the code for the depreciation book to which the line will be posted if you have selected Fixed Asset in the Type field for this line.;
                           ESP=Especifica el c¢digo del libro de amortizaci¢n en el que se registrar  la l¡nea, si ha seleccionado Activo fijo en el campo Tipo de esta l¡nea.];
                ApplicationArea=#FixedAssets;
                SourceExpr="Depreciation Book Code";
                Visible=FALSE }

    { 80  ;2   ;Field     ;
                ToolTipML=[ENU="Specifies, if the type is Fixed Asset, that information on the line is to be posted to all the assets defined depreciation books. ";
                           ESP="Especifica, si el tipo es Activo fijo, que la informaci¢n de la l¡nea deber  registrarse en todos los libros de amortizaci¢n definidos para activos. "];
                ApplicationArea=#FixedAssets;
                SourceExpr="Use Duplication List";
                Visible=FALSE }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a depreciation book code if you want the journal line to be posted to that depreciation book, as well as to the depreciation book in the Depreciation Book Code field.;
                           ESP=Especifica un c¢digo de libro de amortizaci¢n si desea que la l¡nea del diario se registre en ese libro, as¡ como en el libro de amortizaci¢n del campo C¢d. libro amortizaci¢n.];
                ApplicationArea=#FixedAssets;
                SourceExpr="Duplicate in Depreciation Book";
                Visible=FALSE }

    { 108 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied from.;
                           ESP=Especifica el n£mero del movimiento de art¡culo desde el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-from Item Entry";
                Visible=FALSE }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied -to.;
                           ESP=Especifica el n£mero del movimiento de art¡culo en el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-to Item Entry";
                Visible=FALSE }

    { 1170170005;2;Field  ;
                SourceExpr="Line Type" }

    { 1170170006;2;Field  ;
                SourceExpr="Gift Reason Code" }

    { 1170170007;2;Field  ;
                SourceExpr="Price Unit Price" }

    { 1170170008;2;Field  ;
                SourceExpr="Qty. Input Unit Of Measure" }

    { 1170170009;2;Field  ;
                SourceExpr="Price Unit Of Measure Code" }

    { 1170170010;2;Field  ;
                SourceExpr="Qty. On Price UOM" }

    { 1170170011;2;Field  ;
                SourceExpr="Quantity (Price UOM)" }

    { 29  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the deferral template that governs how revenue earned with this sales document is deferred to the different accounting periods when the good or service was delivered.;
                           ESP=Especifica la plantilla de fraccionamiento que administra el modo de fraccionar los ingresos realizados con este documento de venta en per¡odos contables diferentes cuando se registra el documento.];
                ApplicationArea=#Suite;
                SourceExpr="Deferral Code";
                TableRelation="Deferral Template"."Deferral Code";
                Visible=FALSE;
                Enabled=(Type <> Type::"Fixed Asset") AND (Type <> Type::" ");
                OnAssistEdit=BEGIN
                               ShowDeferralSchedule;
                             END;
                              }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Visible=DimVisible1 }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                Visible=DimVisible2 }

    { 300 ;2   ;Field     ;
                Name=ShortcutDimCode3;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[3];
                CaptionClass='1,2,3';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(3),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible3;
                OnValidate=BEGIN
                             ValidateShortcutDimension(3);
                           END;
                            }

    { 302 ;2   ;Field     ;
                Name=ShortcutDimCode4;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[4];
                CaptionClass='1,2,4';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(4),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible4;
                OnValidate=BEGIN
                             ValidateShortcutDimension(4);
                           END;
                            }

    { 304 ;2   ;Field     ;
                Name=ShortcutDimCode5;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[5];
                CaptionClass='1,2,5';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(5),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible5;
                OnValidate=BEGIN
                             ValidateShortcutDimension(5);
                           END;
                            }

    { 306 ;2   ;Field     ;
                Name=ShortcutDimCode6;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[6];
                CaptionClass='1,2,6';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(6),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible6;
                OnValidate=BEGIN
                             ValidateShortcutDimension(6);
                           END;
                            }

    { 308 ;2   ;Field     ;
                Name=ShortcutDimCode7;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[7];
                CaptionClass='1,2,7';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(7),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible7;
                OnValidate=BEGIN
                             ValidateShortcutDimension(7);
                           END;
                            }

    { 310 ;2   ;Field     ;
                Name=ShortcutDimCode8;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[8];
                CaptionClass='1,2,8';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(8),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible8;
                OnValidate=BEGIN
                             ValidateShortcutDimension(8);
                           END;
                            }

    { 146 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the document number.;
                           ESP=Especifica el n£mero de documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Document No.";
                Visible=FALSE;
                Editable=FALSE }

    { 148 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the line number.;
                           ESP=Especifica el n£mero de l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Line No.";
                Visible=FALSE;
                Editable=FALSE }

    { 51  ;1   ;Group     ;
                GroupType=Group }

    { 45  ;2   ;Group     ;
                GroupType=Group }

    { 35  ;3   ;Field     ;
                CaptionML=[ENU=Subtotal Excl. VAT;
                           ESP=Subtotal IVA excl.];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document.;
                           ESP=Especifica la suma del valor del campo "Importe l¡nea excl. IVA" en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Line Amount";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalLineAmountWithVATAndCurrencyCaption(Currency.Code,TotalSalesHeader."Prices Including VAT");
                Editable=FALSE }

    { 43  ;3   ;Field     ;
                Name=Invoice Discount Amount;
                CaptionML=[ENU=Invoice Discount Amount;
                           ESP=Importe descuento factura];
                ToolTipML=[ENU=Specifies a discount amount that is deducted from the value in the Total Incl. VAT field. You can enter or change the amount manually.;
                           ESP=Especifica un importe de descuento que se deduce del valor del campo "Total IVA incl.". Se puede introducir o cambiar el importe manualmente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=InvoiceDiscountAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetInvoiceDiscAmountWithVATAndCurrencyCaption(FIELDCAPTION("Inv. Discount Amount"),Currency.Code);
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 41  ;3   ;Field     ;
                Name=Invoice Disc. Pct.;
                CaptionML=[ENU=Invoice Discount %;
                           ESP=% descuento en factura];
                ToolTipML=[ENU=Specifies a discount percentage that is granted if criteria that you have set up for the customer are met.;
                           ESP=Especifica un porcentaje de descuento que se concede si se cumplen los criterios que ha configurado para el cliente.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:3;
                SourceExpr=InvoiceDiscountPct;
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 28  ;2   ;Group     ;
                GroupType=Group }

    { 27  ;3   ;Field     ;
                Name=Total Amount Excl. VAT;
                DrillDown=No;
                CaptionML=[ENU=Total Amount Excl. VAT;
                           ESP=Importe total excl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe l¡n. IVA exc. en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine.Amount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalExclVATCaption(Currency.Code);
                Editable=FALSE }

    { 25  ;3   ;Field     ;
                Name=Total VAT Amount;
                CaptionML=[ENU=Total VAT;
                           ESP=IVA total];
                ToolTipML=[ENU=Specifies the sum of VAT amounts on all lines in the document.;
                           ESP=Especifica la suma de los importes de IVA en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=VATAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalVATCaption(Currency.Code);
                Editable=FALSE }

    { 23  ;3   ;Field     ;
                Name=Total Amount Incl. VAT;
                CaptionML=[ENU=Total Amount Incl. VAT;
                           ESP=Importe total incl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Incl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe de l¡nea con IVA en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Amount Including VAT";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalInclVATCaption(Currency.Code);
                Editable=FALSE }

  }
  CODE
  {
    VAR
      Currency@1021 : Record 4;
      TotalSalesHeader@1016 : Record 36;
      TotalSalesLine@1009 : Record 37;
      SalesHeader@1000 : Record 36;
      SalesSetup@1015 : Record 311;
      InventorySetup@1027 : Record 313;
      TempOptionLookupBuffer@1013 : TEMPORARY Record 1670;
      ApplicationAreaMgmtFacade@1010 : Codeunit 9179;
      SalesPriceCalcMgt@1006 : Codeunit 7000;
      TransferExtendedText@1002 : Codeunit 378;
      ItemAvailFormsMgt@1001 : Codeunit 353;
      SalesCalcDiscountByType@1008 : Codeunit 56;
      DocumentTotals@1007 : Codeunit 57;
      VATAmount@1005 : Decimal;
      AmountWithDiscountAllowed@1026 : Decimal;
      ShortcutDimCode@1003 : ARRAY [8] OF Code[20];
      Text001@1004 : TextConst 'ENU=You cannot use the Explode BOM function because a prepayment of the sales order has been invoiced.;ESP=No puede usar la funci¢n Desplegar L.M. puesto que se ha facturado un prepago del pedido de venta.';
      LocationCodeMandatory@1017 : Boolean;
      InvDiscAmountEditable@1014 : Boolean;
      UnitofMeasureCodeIsChangeable@1011 : Boolean;
      LocationCodeVisible@1020 : Boolean;
      IsFoundation@1019 : Boolean;
      IsCommentLine@1024 : Boolean;
      CurrPageIsEditable@1025 : Boolean;
      IsBlankNumber@1041 : Boolean;
      InvoiceDiscountAmount@1022 : Decimal;
      InvoiceDiscountPct@1023 : Decimal;
      GestAnalisis@1170170000 : Codeunit 7014480;
      UpdateInvDiscountQst@1012 : TextConst 'ENU=One or more lines have been invoiced. The discount distributed to invoiced lines will not be taken into account.\\Do you want to update the invoice discount?;ESP=Se han facturado una o varias l¡neas. No se tendr  en cuenta el descuento distribuido entre las l¡neas facturadas.\\¨Desea actualizar el descuento en factura?';
      ItemChargeStyleExpression@1029 : Text;
      TypeAsText@1018 : Text[30];
      DimVisible1@1033 : Boolean;
      DimVisible2@1034 : Boolean;
      DimVisible3@1035 : Boolean;
      DimVisible4@1036 : Boolean;
      DimVisible5@1037 : Boolean;
      DimVisible6@1038 : Boolean;
      DimVisible7@1039 : Boolean;
      DimVisible8@1040 : Boolean;

    [External]
    PROCEDURE ApproveCalcInvDisc@1();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Disc. (Yes/No)",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ValidateInvoiceDiscountAmount@30();
    VAR
      SalesHeader@1000 : Record 36;
      ConfirmManagement@1001 : Codeunit 27;
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      IF SalesHeader.InvoicedLineExists THEN
        IF NOT ConfirmManagement.ConfirmProcess(UpdateInvDiscountQst,TRUE) THEN
          EXIT;

      SalesCalcDiscountByType.ApplyInvDiscBasedOnAmt(InvoiceDiscountAmount,SalesHeader);
      DocumentTotals.SalesDocTotalsNotUpToDate;
      CurrPage.UPDATE(FALSE);
    END;

    [External]
    PROCEDURE CalcInvDisc@6();
    VAR
      SalesCalcDiscount@1000 : Codeunit 60;
    BEGIN
      SalesCalcDiscount.CalculateInvoiceDiscountOnLine(Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    [External]
    PROCEDURE ExplodeBOM@3();
    BEGIN
      IF "Prepmt. Amt. Inv." <> 0 THEN
        ERROR(Text001);
      CODEUNIT.RUN(CODEUNIT::"Sales-Explode BOM",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    [External]
    PROCEDURE OpenPurchOrderForm@4();
    VAR
      PurchHeader@1000 : Record 38;
      PurchOrder@1001 : Page 50;
    BEGIN
      TESTFIELD("Purchase Order No.");
      PurchHeader.SETRANGE("No.","Purchase Order No.");
      PurchOrder.SETTABLEVIEW(PurchHeader);
      PurchOrder.EDITABLE := FALSE;
      PurchOrder.RUN;
    END;

    [External]
    PROCEDURE OpenSpecialPurchOrderForm@14();
    VAR
      PurchHeader@1001 : Record 38;
      PurchRcptHeader@1002 : Record 120;
      PurchOrder@1000 : Page 50;
    BEGIN
      TESTFIELD("Special Order Purchase No.");
      PurchHeader.SETRANGE("No.","Special Order Purchase No.");
      IF NOT PurchHeader.ISEMPTY THEN BEGIN
        PurchOrder.SETTABLEVIEW(PurchHeader);
        PurchOrder.EDITABLE := FALSE;
        PurchOrder.RUN;
      END ELSE BEGIN
        PurchRcptHeader.SETRANGE("Order No.","Special Order Purchase No.");
        IF PurchRcptHeader.COUNT = 1 THEN
          PAGE.RUN(PAGE::"Posted Purchase Receipt",PurchRcptHeader)
        ELSE
          PAGE.RUN(PAGE::"Posted Purchase Receipts",PurchRcptHeader);
      END;
    END;

    [External]
    PROCEDURE InsertExtendedText@5(Unconditionally@1000 : Boolean);
    BEGIN
      OnBeforeInsertExtendedText(Rec);
      IF TransferExtendedText.SalesCheckIfAnyExtText(Rec,Unconditionally) THEN BEGIN
        CurrPage.SAVERECORD;
        COMMIT;
        TransferExtendedText.InsertSalesExtText(Rec);
      END;
      IF TransferExtendedText.MakeUpdate THEN
        UpdateForm(TRUE);
    END;

    [External]
    PROCEDURE ShowNonstockItems@11();
    BEGIN
      ShowNonstock;
    END;

    [External]
    PROCEDURE ShowTracking@13();
    VAR
      TrackingForm@1000 : Page 99000822;
    BEGIN
      TrackingForm.SetSalesLine(Rec);
      TrackingForm.RUNMODAL;
    END;

    [External]
    PROCEDURE ItemChargeAssgnt@5800();
    BEGIN
      ShowItemChargeAssgnt;
    END;

    [External]
    PROCEDURE UpdateForm@12(SetSaveRecord@1000 : Boolean);
    BEGIN
      CurrPage.UPDATE(SetSaveRecord);
    END;

    [External]
    PROCEDURE ShowPrices@15();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLinePrice(SalesHeader,Rec);
    END;

    [External]
    PROCEDURE ShowLineDisc@16();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLineLineDisc(SalesHeader,Rec);
    END;

    [External]
    PROCEDURE OrderPromisingLine@17();
    VAR
      OrderPromisingLine@1000 : TEMPORARY Record 99000880;
      OrderPromisingLines@1001 : Page 99000959;
    BEGIN
      OrderPromisingLine.SETRANGE("Source Type","Document Type");
      OrderPromisingLine.SETRANGE("Source ID","Document No.");
      OrderPromisingLine.SETRANGE("Source Line No.","Line No.");

      OrderPromisingLines.SetSourceType(OrderPromisingLine."Source Type"::Sales);
      OrderPromisingLines.SETTABLEVIEW(OrderPromisingLine);
      OrderPromisingLines.RUNMODAL;
    END;

    LOCAL PROCEDURE NoOnAfterValidate@409();
    BEGIN
      InsertExtendedText(FALSE);
      IF (Type = Type::"Charge (Item)") AND ("No." <> xRec."No.") AND
         (xRec."No." <> '')
      THEN
        CurrPage.SAVERECORD;

      SaveAndAutoAsmToOrder;

      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        IF ("Outstanding Qty. (Base)" <> 0) AND ("No." <> xRec."No.") THEN BEGIN
          AutoReserve;
          CurrPage.UPDATE(FALSE);
        END;
      END;
    END;

    LOCAL PROCEDURE VariantCodeOnAfterValidate@21();
    BEGIN
      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE LocationCodeOnAfterValidate@8594();
    BEGIN
      SaveAndAutoAsmToOrder;

      IF (Reserve = Reserve::Always) AND
         ("Outstanding Qty. (Base)" <> 0) AND
         ("Location Code" <> xRec."Location Code")
      THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE ReserveOnAfterValidate@8303();
    BEGIN
      IF (Reserve = Reserve::Always) AND ("Outstanding Qty. (Base)" <> 0) THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
    END;

    LOCAL PROCEDURE QuantityOnAfterValidate@6272();
    BEGIN
      IF Type = Type::Item THEN
        CASE Reserve OF
          Reserve::Always:
            BEGIN
              CurrPage.SAVERECORD;
              AutoReserve;
            END;
        END;

      OnAfterQuantityOnAfterValidate(Rec,xRec);
    END;

    LOCAL PROCEDURE QtyToAsmToOrderOnAfterValidate@19();
    BEGIN
      CurrPage.SAVERECORD;
      IF Reserve = Reserve::Always THEN
        AutoReserve;
      CurrPage.UPDATE(TRUE);
    END;

    LOCAL PROCEDURE UnitofMeasureCodeOnAfterValida@1752();
    BEGIN
      DeltaUpdateTotals;
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE ShipmentDateOnAfterValidate@2525();
    BEGIN
      IF (Reserve = Reserve::Always) AND
         ("Outstanding Qty. (Base)" <> 0) AND
         ("Shipment Date" <> xRec."Shipment Date")
      THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
        CurrPage.UPDATE(FALSE);
      END ELSE
        CurrPage.UPDATE(TRUE);
    END;

    LOCAL PROCEDURE SaveAndAutoAsmToOrder@20();
    BEGIN
      IF (Type = Type::Item) AND IsAsmToOrderRequired THEN BEGIN
        CurrPage.SAVERECORD;
        AutoAsmToOrder;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    [External]
    PROCEDURE ShowDocumentLineTracking@26();
    VAR
      DocumentLineTracking@1000 : Page 6560;
    BEGIN
      CLEAR(DocumentLineTracking);
      DocumentLineTracking.SetDoc(0,"Document No.","Line No.","Blanket Order No.","Blanket Order Line No.",'',0);
      DocumentLineTracking.RUNMODAL;
    END;

    LOCAL PROCEDURE SetLocationCodeMandatory@22();
    BEGIN
      LocationCodeMandatory := InventorySetup."Location Mandatory" AND (Type = Type::Item);
    END;

    LOCAL PROCEDURE GetTotalSalesHeader@9();
    BEGIN
      DocumentTotals.GetTotalSalesHeaderAndCurrency(Rec,TotalSalesHeader,Currency);
    END;

    LOCAL PROCEDURE CalculateTotals@28();
    BEGIN
      DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
      DocumentTotals.CalculateSalesSubPageTotals(TotalSalesHeader,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      DocumentTotals.RefreshSalesLine(Rec);
    END;

    LOCAL PROCEDURE DeltaUpdateTotals@2();
    BEGIN
      DocumentTotals.SalesDeltaUpdateTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      CurrPage.SAVERECORD;
      SendLineInvoiceDiscountResetNotification;
    END;

    LOCAL PROCEDURE UpdateEditableOnRow@18();
    BEGIN
      IsCommentLine := NOT HasTypeToFillMandatoryFields;
      UnitofMeasureCodeIsChangeable := NOT IsCommentLine;

      CurrPageIsEditable := CurrPage.EDITABLE;
      IsBlankNumber := ("No." = '') OR IsCommentLine;
      InvDiscAmountEditable := CurrPageIsEditable AND NOT SalesSetup."Calc. Inv. Discount";
    END;

    LOCAL PROCEDURE UpdateTypeText@10();
    VAR
      RecRef@1000 : RecordRef;
    BEGIN
      IF NOT IsFoundation THEN
        EXIT;
      RecRef.GETTABLE(Rec);
      TypeAsText := TempOptionLookupBuffer.FormatOption(RecRef.FIELD(FIELDNO(Type)));
    END;

    LOCAL PROCEDURE SetItemChargeFieldsStyle@24();
    BEGIN
      ItemChargeStyleExpression := '';
      IF AssignedItemCharge AND ("Qty. Assigned" <> Quantity) THEN
        ItemChargeStyleExpression := 'Unfavorable';
    END;

    LOCAL PROCEDURE SetDimensionsVisibility@29();
    VAR
      DimMgt@1000 : Codeunit 408;
    BEGIN
      DimVisible1 := FALSE;
      DimVisible2 := FALSE;
      DimVisible3 := FALSE;
      DimVisible4 := FALSE;
      DimVisible5 := FALSE;
      DimVisible6 := FALSE;
      DimVisible7 := FALSE;
      DimVisible8 := FALSE;

      DimMgt.UseShortcutDims(
        DimVisible1,DimVisible2,DimVisible3,DimVisible4,DimVisible5,DimVisible6,DimVisible7,DimVisible8);

      CLEAR(DimMgt);
    END;

    LOCAL PROCEDURE SetDefaultType@31();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeSetDefaultType(Rec,xRec,IsHandled);
      IF NOT IsHandled THEN // Set default type Item
        IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
          IF xRec."Document No." = '' THEN
            Type := Type::Item;
    END;

    LOCAL PROCEDURE ValidateShortcutDimension@8(DimIndex@1001 : Integer);
    VAR
      AssembleToOrderLink@1000 : Record 904;
    BEGIN
      ValidateShortcutDimCode(DimIndex,ShortcutDimCode[DimIndex]);
      AssembleToOrderLink.UpdateAsmDimFromSalesLine(Rec);

      OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,DimIndex);
    END;

    LOCAL PROCEDURE "--BAIN-0054--"@1170000000();
    BEGIN
    END;

    PROCEDURE CalcDtoPromo@1170170003();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Ventas-Calc. dto. promocional",Rec); // VNTES
    END;

    PROCEDURE AprobarCalcDtoPromo@1170170004();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Ventas-Prom. (s¡/no)",Rec); // VNTES
    END;

    [Integration(TRUE)]
    LOCAL PROCEDURE OnAfterQuantityOnAfterValidate@23(VAR SalesLine@1000 : Record 37;xSalesLine@1001 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateShortcutDimCode@27(VAR SalesLine@1000 : Record 37;VAR ShortcutDimCode@1001 : ARRAY [8] OF Code[20];DimIndex@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInsertExtendedText@25(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSetDefaultType@38(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCrossReferenceNoOnLookup@7(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    PROCEDURE AutorizarLineaMargen@1170170006();
    VAR
      LinVtas@1170170000 : Record 37;
      GestionBaines@1170170001 : Codeunit 50005;
    BEGIN
      //I-BAIN-0034
      CurrPage.SETSELECTIONFILTER(LinVtas);
      IF LinVtas.FIND('-') THEN REPEAT
        GestionBaines.MargenMinimoAutorizar(LinVtas);
        LinVtas.MODIFY;
      UNTIL LinVtas.NEXT = 0;
      CurrPage.UPDATE(FALSE);
      //F-BAIN-0034
    END;

    BEGIN
    {
      BAIN-0054 VM 130308 Sacar un bot¢n aparte para calcular el descuento promocional
    }
    END.
  }
}

OBJECT Page 47 Sales Invoice Subform
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=16:12:18;
    Modified=Yes;
    Version List=NAVW114.04,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Lines;
               ESP=L¡neas];
    MultipleNewLines=Yes;
    LinksAllowed=No;
    SourceTable=Table37;
    DelayedInsert=Yes;
    SourceTableView=WHERE(Document Type=FILTER(Invoice));
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnInit=BEGIN
             SalesSetup.GET;
             Currency.InitRoundingPrecision;
             TempOptionLookupBuffer.FillBuffer(TempOptionLookupBuffer."Lookup Type"::Sales);
             IsFoundation := ApplicationAreaMgmtFacade.IsFoundationEnabled;
           END;

    OnOpenPage=VAR
                 Location@1000 : Record 14;
               BEGIN
                 IF Location.READPERMISSION THEN
                   LocationCodeVisible := NOT Location.ISEMPTY;

                 SetDimensionsVisibility;
               END;

    OnFindRecord=BEGIN
                   DocumentTotals.SalesCheckAndClearTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
                   EXIT(FIND(Which));
                 END;

    OnAfterGetRecord=BEGIN
                       ShowShortcutDimCode(ShortcutDimCode);
                       UpdateTypeText;
                       SetItemChargeFieldsStyle;
                     END;

    OnNewRecord=BEGIN
                  InitType;
                  SetDefaultType;

                  CLEAR(ShortcutDimCode);
                  UpdateTypeText;
                END;

    OnModifyRecord=BEGIN
                     DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
                   END;

    OnDeleteRecord=VAR
                     ReserveSalesLine@1000 : Codeunit 99000832;
                   BEGIN
                     IF (Quantity <> 0) AND ItemExists("No.") THEN BEGIN
                       COMMIT;
                       IF NOT ReserveSalesLine.DeleteLineConfirm(Rec) THEN
                         EXIT(FALSE);
                       ReserveSalesLine.DeleteLine(Rec);
                     END;
                     DocumentTotals.SalesDocTotalsNotUpToDate;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           GetTotalSalesHeader;
                           CalculateTotals;
                           UpdateEditableOnRow;
                           SetItemChargeFieldsStyle;
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 37      ;1   ;Action    ;
                      Name=SelectMultiItems;
                      AccessByPermission=TableData 27=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Select items;
                                 ESP=Seleccionar productos];
                      ToolTipML=[ENU=Add two or more items from the full list of your inventory items.;
                                 ESP=Agregue dos o m s productos de la lista completa de sus productos de inventario.];
                      ApplicationArea=#Basic,#Suite;
                      Image=NewItem;
                      OnAction=BEGIN
                                 SelectMultipleItems;
                               END;
                                }
      { 1907935204;1 ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 ESP=&L¡nea];
                      Image=Line }
      { 1906587504;2 ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 1903079504;3 ;Action    ;
                      AccessByPermission=TableData 7002=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get &Price;
                                 ESP=&Traer precio];
                      ToolTipML=[ENU=Insert the lowest possible price in the Unit Price field according to any special price that you have set up.;
                                 ESP=Inserte el precio m s bajo posible en el campo Precio venta, seg£n el precio especial que haya configurado.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Price;
                      OnAction=BEGIN
                                 ShowPrices
                               END;
                                }
      { 1907415004;3 ;Action    ;
                      AccessByPermission=TableData 7004=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get Li&ne Discount;
                                 ESP=Traer descuento l¡&nea];
                      ToolTipML=[ENU=Insert the best possible discount in the Line Discount field according to any special discounts that you have set up.;
                                 ESP=Inserte el mejor descuento posible en el campo Descuento l¡nea, seg£n el descuento especial que haya configurado.];
                      ApplicationArea=#Basic,#Suite;
                      Image=LineDiscount;
                      OnAction=BEGIN
                                 ShowLineDisc
                               END;
                                }
      { 1903098604;3 ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=E&xplode BOM;
                                 ESP=&Desplegar L.M.];
                      ToolTipML=[ENU=Insert new lines for the components on the bill of materials, for example to sell the parent item as a kit. CAUTION: The line for the parent item will be deleted and represented by a description only. To undo, you must delete the component lines and add a line the parent item again.;
                                 ESP=Insertar nuevas l¡neas para los componentes de la lista de materiales, por ejemplo, para vender el producto principal como un kit. ATENCIàN: La l¡nea para el producto principal se eliminar  y quedar  representada tan solo por una descripci¢n. Para deshacerlo, debe eliminar las l¡neas de componente y volver a agregar una l¡nea de producto principal.];
                      ApplicationArea=#Suite;
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
      { 1900206204;3 ;Action    ;
                      Name=InsertExtTexts;
                      AccessByPermission=TableData 279=R;
                      CaptionML=[ENU=Insert &Ext. Texts;
                                 ESP=Insertar &textos adicionales];
                      ToolTipML=[ENU=Insert the extended item description that is set up for the item that is being processed on the line.;
                                 ESP=Insertar la descripci¢n de producto ampliada que se configur¢ para el producto que se est  procesando en la l¡nea.];
                      ApplicationArea=#Suite;
                      Image=Text;
                      Scope=Repeater;
                      OnAction=BEGIN
                                 InsertExtendedText(TRUE);
                               END;
                                }
      { 1900545004;3 ;Action    ;
                      Name=GetShipmentLines;
                      AccessByPermission=TableData 110=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get &Shipment Lines;
                                 ESP=&Traer l¡neas alb. venta];
                      ToolTipML=[ENU=Select multiple shipments to the same customer because you want to combine them on one invoice.;
                                 ESP=Seleccione varios env¡os al mismo cliente porque desea combinarlos en una factura.];
                      ApplicationArea=#Suite;
                      Image=Shipment;
                      OnAction=BEGIN
                                 GetShipment;
                               END;
                                }
      { 1170170002;3 ;Action    ;
                      CaptionML=ESP=Autorizar margen lineas;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=AuthorizeCreditCard;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 AutorizarLineaMargen;//BAIN-0034
                               END;
                                }
      { 1905427604;2 ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 ESP=Disponibilidad prod. por];
                      Image=ItemAvailability }
      { 5       ;3   ;Action    ;
                      CaptionML=[ENU=Event;
                                 ESP=Evento];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 ESP=Permite ver c¢mo el saldo disponible real y previsto de un art¡culo se desarrollar  a lo largo del tiempo seg£n la oferta y la demanda.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 1900639404;3 ;Action    ;
                      CaptionML=[ENU=Period;
                                 ESP=Periodo];
                      ToolTipML=[ENU=Show the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 ESP=Muestra la cantidad proyectada del producto a lo largo de los periodos de tiempo, como d¡as, semanas o meses.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Period;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 1904974904;3 ;Action    ;
                      CaptionML=[ENU=Variant;
                                 ESP=Variante];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 ESP=Permite ver o editar las variantes del art¡culo. En lugar de configurar cada color de un art¡culo como un art¡culo diferente, puede configurar varios colores como variantes del art¡culo.];
                      ApplicationArea=#Planning;
                      Image=ItemVariant;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 1904945204;3 ;Action    ;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 ESP=Almac‚n];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 ESP=Permite ver la cantidad real y proyectada del producto por almac‚n.];
                      ApplicationArea=#Location;
                      Image=Warehouse;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 3       ;3   ;Action    ;
                      AccessByPermission=TableData 5870=R;
                      CaptionML=[ENU=BOM Level;
                                 ESP=Nivel L.M.];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 ESP=Permite ver las cifras correspondientes a los productos en listas de materiales que indican cu ntas unidades de un producto principal puede producir seg£n la disponibilidad de productos secundarios.];
                      ApplicationArea=#Assembly;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 23      ;2   ;ActionGroup;
                      CaptionML=[ENU=Related Information;
                                 ESP=Informaci¢n relacionada] }
      { 1904522204;3 ;Action    ;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Image=Dimensions;
                      Scope=Repeater;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 1900948904;3 ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      Image=ViewComments;
                      OnAction=BEGIN
                                 ShowLineComments;
                               END;
                                }
      { 1907184504;3 ;Action    ;
                      AccessByPermission=TableData 5800=R;
                      CaptionML=[ENU=Item Charge &Assignment;
                                 ESP=Asi&gnaci¢n cargos prod.];
                      ToolTipML=[ENU=Assign additional direct costs, for example for freight, to the item on the line.;
                                 ESP=Asignar costes directos adicionales, por ejemplo para flete, al art¡culo en la l¡nea.];
                      ApplicationArea=#ItemCharges;
                      Image=ItemCosts;
                      OnAction=BEGIN
                                 ShowItemChargeAssgnt;
                                 SetItemChargeFieldsStyle;
                               END;
                                }
      { 1905987604;3 ;Action    ;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=Item &Tracking Lines;
                                 ESP=L¡ns. se&guim. prod.];
                      ToolTipML=[ENU=View or edit serial numbers and lot numbers that are assigned to the item on the document or journal line.;
                                 ESP=Permite ver o editar n£meros de serie y n£meros de lote asignados al producto en el documento o la l¡nea del diario.];
                      ApplicationArea=#ItemTracking;
                      Image=ItemTrackingLines;
                      OnAction=BEGIN
                                 OpenItemTrackingLines;
                               END;
                                }
      { 35      ;3   ;Action    ;
                      Name=DocAttach;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Image=Attach;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1000 : Page 1173;
                                 RecRef@1001 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 17      ;3   ;Action    ;
                      Name=DeferralSchedule;
                      CaptionML=[ENU=Deferral Schedule;
                                 ESP=Previsi¢n fraccionamiento];
                      ToolTipML=[ENU=View or edit the deferral schedule that governs how revenue made with this sales document is deferred to different accounting periods when the document is posted.;
                                 ESP=Permite ver o editar la previsi¢n de fraccionamiento que administra el modo de fraccionar los ingresos realizados con este documento de venta en per¡odos contables diferentes cuando se registra el documento.];
                      ApplicationArea=#Suite;
                      Enabled="Deferral Code" <> '';
                      Image=PaymentPeriod;
                      OnAction=BEGIN
                                 ShowDeferralSchedule;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of entity that will be posted for this sales line, such as Item, Resource, or G/L Account.;
                           ESP=Especifica el tipo de entidad que se registrar  para esta l¡nea de venta, como Producto, Recurso o Cuenta C/G.];
                ApplicationArea=#Advanced;
                SourceExpr=Type;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 77  ;2   ;Field     ;
                Name=FilteredTypeField;
                CaptionML=[ENU=Type;
                           ESP=Tipo];
                ToolTipML=[ENU="Specifies the type of transaction that will be posted with the document line. If you select Comment, then you can enter any text in the Description field, such as a message to a customer. ";
                           ESP="Especifica el tipo de transacci¢n que se registrar  con la l¡nea del documento. Si selecciona Comentario, puede escribir cualquier texto en el campo Descripci¢n; por ejemplo, un mensaje a un cliente. "];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TypeAsText;
                TableRelation="Option Lookup Buffer"."Option Caption" WHERE (Lookup Type=CONST(Sales));
                Visible=IsFoundation;
                Editable=CurrPageIsEditable;
                LookupPageID=Option Lookup List;
                OnValidate=BEGIN
                             TempOptionLookupBuffer.SetCurrentType(Type);
                             IF TempOptionLookupBuffer.AutoCompleteOption(TypeAsText,TempOptionLookupBuffer."Lookup Type"::Sales) THEN
                               VALIDATE(Type,TempOptionLookupBuffer.ID);
                             TempOptionLookupBuffer.ValidateOption(TypeAsText);
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 1170170001;2;Field  ;
                SourceExpr="C¢d. conjunto" }

    { 1170170000;2;Field  ;
                Name=NoConLookupConjunto;
                CaptionML=ENU=No.;
                SourceExpr="No.";
                OnValidate=BEGIN
                             //I-23069
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             ShowShortcutDimCode(ShortcutDimCode);
                             UpdateTypeText;
                             DeltaUpdateTotals;
                             //F-23069
                           END;

                OnLookup=VAR
                           GestionBaines@1170170000 : Codeunit 50005;
                         BEGIN
                           GestionBaines.ConjuntoLookpNoLinVenta(Rec);//23069
                         END;
                          }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of a general ledger account, item, resource, additional cost, or fixed asset, depending on the contents of the Type field.;
                           ESP=Especifica el n£mero de una cuenta de contabilidad, un producto, un recurso, un coste adicional o un activo fijo, seg£n el contenido del campo Tipo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             ShowShortcutDimCode(ShortcutDimCode);
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=Type <> Type::" " }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cross-referenced item number. If you enter a cross reference between yours and your vendor's or customer's item number, then this number will override the standard item number when you enter the cross-reference number on a sales or purchase document.;
                           ESP=Especifica el n£mero de producto de la referencia cruzada. Si introduce una referencia cruzada entre su n£mero de producto y el del proveedor o el cliente, sobrescribir  el n£mero de producto est ndar cuando introduzca el n£mero de referencia cruzada en un documento de venta o de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cross-Reference No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             DeltaUpdateTotals;
                           END;

                OnLookup=BEGIN
                           CrossReferenceNoLookUp;
                           NoOnAfterValidate;
                           UpdateEditableOnRow;
                           OnCrossReferenceNoOnLookup(Rec);
                         END;
                          }

    { 74  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the intercompany partner that the transaction is related to if the entry was created from an intercompany transaction.;
                           ESP=Especifica el c¢digo del socio de empresas vinculadas relacionado con la transacci¢n si el movimiento se ha creado a partir de una transacci¢n entre empresas vinculadas.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Code";
                Visible=FALSE }

    { 46  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the item or account in your IC partner's company that corresponds to the item or account on the line.;
                           ESP=Especifica el producto o la cuenta de la empresa de su socio IC que corresponda al producto o la cuenta de la l¡nea.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Ref. Type";
                Visible=FALSE }

    { 70  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the IC partner. If the line is being sent to one of your intercompany partners, this field is used together with the IC Partner Ref. Type field to indicate the item or account in your partner's company that corresponds to the line.;
                           ESP=Especifica el socio IC. Si la l¡nea se est  enviando a uno de los socios de empresas vinculadas, este campo se usa junto con el campo Tipo referencia socio IC para indicar el art¡culo o la cuenta de la empresa del socio que corresponde a la l¡nea.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Reference";
                Visible=FALSE }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESP=Especifica la variante del producto que figura en la l¡nea.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 62  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that this item is a catalog item.;
                           ESP=Especifica que este es un producto del cat logo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Nonstock;
                Visible=FALSE }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT product posting group. Links business transactions made for the item, resource, or G/L account with the general ledger, to account for VAT amounts resulting from trade with that record.;
                           ESP=Especifica el grupo de registro de IVA de producto. Vincula las transacciones empresariales realizadas para el producto, el recurso o la cuenta C/G con el fin de contabilizar los importes de IVA que derivan de la comercializaci¢n de ese registro.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Prod. Posting Group";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the entry, which is based on the contents of the Type and No. fields.;
                           ESP=Especifica una descripci¢n del movimiento, que depende del contenido de los campos Tipo y N.§.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Description;
                OnValidate=BEGIN
                             UpdateEditableOnRow;

                             IF "No." = xRec."No." THEN
                               EXIT;

                             NoOnAfterValidate;
                             ShowShortcutDimCode(ShortcutDimCode);
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code explaining why the item was returned.;
                           ESP=Especifica el c¢digo que explica el motivo de la devoluci¢n del producto.];
                ApplicationArea=#Suite;
                SourceExpr="Return Reason Code";
                Visible=FALSE }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the inventory location from which the items sold should be picked and where the inventory decrease is registered.;
                           ESP=Especifica el lugar del inventario del que hay que seleccionar los productos vendidos y d¢nde hay que registrar la disminuci¢n de inventario.];
                ApplicationArea=#Location;
                SourceExpr="Location Code";
                Visible=LocationCodeVisible;
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 76  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the bin where the items are picked or put away.;
                           ESP=Especifica la ubicaci¢n en la que se recogen o se dejan los art¡culos.];
                ApplicationArea=#Warehouse;
                SourceExpr="Bin Code";
                Visible=FALSE }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units are being sold.;
                           ESP=Especifica cu ntas unidades se han vendido.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr=Quantity;
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             ValidateAutoReserve;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           ESP=Especifica c¢mo se mide cada unidad del producto o el recurso, por ejemplo, en piezas u horas. De forma predeterminada, se inserta el valor en el campo Unidad de medida base de la ficha de producto o recurso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit of Measure Code";
                Enabled=UnitofMeasureCodeIsChangeable;
                Editable=UnitofMeasureCodeIsChangeable;
                OnValidate=BEGIN
                             ValidateAutoReserve;
                             DeltaUpdateTotals;
                           END;
                            }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit of measure for the item or resource on the sales line.;
                           ESP=Especifica la unidad de medida del producto o recurso en la l¡nea de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Unit of Measure";
                Visible=FALSE }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit cost of the item on the line.;
                           ESP=Especifica el coste unitario del producto que figura en la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE }

    { 88  ;2   ;Field     ;
                CaptionML=[ENU=Sales Price Exists;
                           ESP=Existe precio venta];
                ToolTipML=[ENU=Specifies that there is a specific price for this customer.;
                           ESP=Especifica que existe un precio espec¡fico para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=PriceExists;
                Visible=FALSE;
                Editable=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the price for one unit on the sales line.;
                           ESP=Especifica el precio de una unidad en la l¡nea de venta.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Unit Price";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount percentage that is granted for the item on the line.;
                           ESP=Especifica el porcentaje de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Discount %";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 64  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount, excluding any invoice discount amount, that must be paid for products on the line.;
                           ESP=Especifica el importe neto, menos cualquier importe de descuento en factura, que se debe pagar por los productos de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Amount";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 90  ;2   ;Field     ;
                CaptionML=[ENU=Sales Line Disc. Exists;
                           ESP=Existe dto. l¡nea venta];
                ToolTipML=[ENU=Specifies that there is a specific discount for this customer.;
                           ESP=Especifica que existe un descuento espec¡fico para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=LineDiscExists;
                Visible=FALSE;
                Editable=FALSE }

    { 40  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount amount that is granted for the item on the line.;
                           ESP=Especifica la cantidad de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Line Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 42  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the invoice line is included when the invoice discount is calculated.;
                           ESP=Especifica si la l¡nea de factura se incluye cuando se calcula el descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Invoice Disc.";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 80  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the invoice discount amount for the line.;
                           ESP=Especifica el importe de descuento en factura para la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Inv. Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 84  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you can assign item charges to this line.;
                           ESP=Especifica que es posible asignar cargos de producto a esta l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Allow Item Charge Assignment";
                Visible=FALSE }

    { 36  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item charge will be assigned to the line.;
                           ESP=Especifica cu ntas unidades del cargo de producto se asignar n a la l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Qty. to Assign";
                StyleExpr=ItemChargeStyleExpression;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdatePage(FALSE);
                            END;
                             }

    { 82  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of the item charge that was assigned to a specified item when you posted this sales line.;
                           ESP=Especifica la cantidad de cargo de producto que se ha asignado a un producto determinado al registrar esta l¡nea de venta.];
                ApplicationArea=#ItemCharges;
                BlankZero=Yes;
                SourceExpr="Qty. Assigned";
                Visible=FALSE;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdatePage(FALSE);
                            END;
                             }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the related job. If you fill in this field and the Job Task No. field, then a job ledger entry will be posted together with the sales line.;
                           ESP=Especifica el n£mero del proyecto relacionado. Si rellena este campo y el campo N.§ tarea proyecto, se registrar  un movimiento de proyecto junto con la l¡nea de ventas.];
                ApplicationArea=#Jobs;
                SourceExpr="Job No.";
                Visible=FALSE;
                Editable=FALSE;
                OnValidate=BEGIN
                             ShowShortcutDimCode(ShortcutDimCode);
                           END;
                            }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the related job task.;
                           ESP=Especifica el n£mero de tarea del proyecto relacionada.];
                ApplicationArea=#Jobs;
                SourceExpr="Job Task No.";
                Visible=FALSE;
                Editable=FALSE }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the entry number of the job planning line that the sales line is linked to.;
                           ESP=Especifica el n£mero de movimiento de la l¡nea de planificaci¢n del proyecto a la que est  vinculada la l¡nea de venta.];
                ApplicationArea=#Jobs;
                SourceExpr="Job Contract Entry No.";
                Visible=FALSE;
                Editable=FALSE }

    { 19  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT category in connection with electronic document sending. For example, when you send sales documents through the PEPPOL service, the value in this field is used to populate several fields, such as the ClassifiedTaxCategory element in the Item group. It is also used to populate the TaxCategory element in both the TaxSubtotal and AllowanceCharge group. The number is based on the UNCL5305 standard.;
                           ESP=Especifica la categor¡a en conexi¢n con el env¡o de documentos electr¢nicos. Por ejemplo, cuando se env¡a un documento de venta a trav‚s del servicio PEPPOL, el valor de este campo se usa para rellenar varios campos, como el elemento ClassifiedTaxCategory en el grupo de productos. Tambi‚n se usa para rellenar el elemento TaxCategory en los grupos TaxSubtotal y AllowanceCharge. El n£mero se basa en el est ndar UNCL5305.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Tax Category";
                Visible=FALSE }

    { 25  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the shipping agent who is transporting the items.;
                           ESP=Especifica el c¢digo del transportista que traslada los productos.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Code";
                Visible=FALSE }

    { 27  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the service, such as a one-day delivery, that is offered by the shipping agent.;
                           ESP=Especifica el c¢digo de servicio (por ejemplo, entrega en un d¡a) que ofrece el transportista.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Service Code";
                Visible=FALSE }

    { 72  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which work type the resource applies to when the sale is related to a job.;
                           ESP=Especifica a qu‚ tipo de trabajo corresponde el recurso cuando una venta se relaciona con un trabajo.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Work Type Code";
                Visible=FALSE }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order that the record originates from.;
                           ESP=Especifica el n£mero del pedido abierto a partir del cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order No.";
                Visible=FALSE }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order line that the record originates from.;
                           ESP=Especifica el n£mero de la l¡nea de pedido abierto a partir de la cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order Line No.";
                Visible=FALSE }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that will be used on related fixed asset ledger entries.;
                           ESP=Especifica la fecha que se usar  en los movimientos de activos fijos relacionados.];
                ApplicationArea=#FixedAssets;
                SourceExpr="FA Posting Date";
                Visible=FALSE }

    { 44  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if depreciation was calculated until the FA posting date of the line.;
                           ESP=Especifica si la amortizaci¢n se calcul¢ hasta la fecha de registro del activo fijo de la l¡nea.];
                ApplicationArea=#FixedAssets;
                SourceExpr="Depr. until FA Posting Date";
                Visible=FALSE }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the depreciation book to which the line will be posted if you have selected Fixed Asset in the Type field for this line.;
                           ESP=Especifica el c¢digo del libro de amortizaci¢n en el que se registrar  la l¡nea, si ha seleccionado Activo fijo en el campo Tipo de esta l¡nea.];
                ApplicationArea=#FixedAssets;
                SourceExpr="Depreciation Book Code";
                Visible=FALSE }

    { 68  ;2   ;Field     ;
                ToolTipML=[ENU="Specifies, if the type is Fixed Asset, that information on the line is to be posted to all the assets defined depreciation books. ";
                           ESP="Especifica, si el tipo es Activo fijo, que la informaci¢n de la l¡nea deber  registrarse en todos los libros de amortizaci¢n definidos para activos. "];
                ApplicationArea=#FixedAssets;
                SourceExpr="Use Duplication List";
                Visible=FALSE }

    { 66  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a depreciation book code if you want the journal line to be posted to that depreciation book, as well as to the depreciation book in the Depreciation Book Code field.;
                           ESP=Especifica un c¢digo de libro de amortizaci¢n si desea que la l¡nea del diario se registre en ese libro, as¡ como en el libro de amortizaci¢n del campo C¢d. libro amortizaci¢n.];
                ApplicationArea=#FixedAssets;
                SourceExpr="Duplicate in Depreciation Book";
                Visible=FALSE }

    { 38  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied from.;
                           ESP=Especifica el n£mero del movimiento de art¡culo desde el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-from Item Entry";
                Visible=FALSE }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied -to.;
                           ESP=Especifica el n£mero del movimiento de art¡culo en el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-to Item Entry";
                Visible=FALSE }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the deferral template that governs how revenue earned with this sales document is deferred to the different accounting periods when the good or service was delivered.;
                           ESP=Especifica la plantilla de fraccionamiento que administra el modo de fraccionar los ingresos realizados con este documento de venta en per¡odos contables diferentes cuando se registra el documento.];
                ApplicationArea=#Suite;
                SourceExpr="Deferral Code";
                Visible=FALSE;
                Enabled=(Type <> Type::"Fixed Asset") AND (Type <> Type::" ");
                OnAssistEdit=BEGIN
                               ShowDeferralSchedule;
                             END;
                              }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Visible=DimVisible1 }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                Visible=DimVisible2 }

    { 300 ;2   ;Field     ;
                Name=ShortcutDimCode3;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[3];
                CaptionClass='1,2,3';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(3),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible3;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(3,ShortcutDimCode[3]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,3);
                           END;
                            }

    { 302 ;2   ;Field     ;
                Name=ShortcutDimCode4;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[4];
                CaptionClass='1,2,4';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(4),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible4;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(4,ShortcutDimCode[4]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,4);
                           END;
                            }

    { 304 ;2   ;Field     ;
                Name=ShortcutDimCode5;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[5];
                CaptionClass='1,2,5';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(5),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible5;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(5,ShortcutDimCode[5]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,5);
                           END;
                            }

    { 306 ;2   ;Field     ;
                Name=ShortcutDimCode6;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[6];
                CaptionClass='1,2,6';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(6),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible6;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(6,ShortcutDimCode[6]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,6);
                           END;
                            }

    { 308 ;2   ;Field     ;
                Name=ShortcutDimCode7;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[7];
                CaptionClass='1,2,7';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(7),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible7;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(7,ShortcutDimCode[7]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,7);
                           END;
                            }

    { 310 ;2   ;Field     ;
                Name=ShortcutDimCode8;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[8];
                CaptionClass='1,2,8';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(8),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible8;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(8,ShortcutDimCode[8]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,8);
                           END;
                            }

    { 104 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the document number.;
                           ESP=Especifica el n£mero de documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Document No.";
                Visible=FALSE;
                Editable=FALSE }

    { 106 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the line number.;
                           ESP=Especifica el n£mero de l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Line No.";
                Visible=FALSE;
                Editable=FALSE }

    { 39  ;1   ;Group     ;
                GroupType=Group }

    { 33  ;2   ;Group     ;
                GroupType=Group }

    { 7   ;3   ;Field     ;
                CaptionML=[ENU=Subtotal Excl. VAT;
                           ESP=Subtotal IVA excl.];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document.;
                           ESP=Especifica la suma del valor del campo "Importe l¡nea excl. IVA" en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Line Amount";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalLineAmountWithVATAndCurrencyCaption(Currency.Code,TotalSalesHeader."Prices Including VAT");
                Editable=FALSE }

    { 31  ;3   ;Field     ;
                Name=Invoice Discount Amount;
                CaptionML=[ENU=Invoice Discount Amount;
                           ESP=Importe descuento factura];
                ToolTipML=[ENU=Specifies a discount amount that is deducted from the value in the Total Incl. VAT field. You can enter or change the amount manually.;
                           ESP=Especifica un importe de descuento que se deduce del valor del campo "Total IVA incl.". Se puede introducir o cambiar el importe manualmente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=InvoiceDiscountAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetInvoiceDiscAmountWithVATAndCurrencyCaption(FIELDCAPTION("Inv. Discount Amount"),Currency.Code);
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 29  ;3   ;Field     ;
                Name=Invoice Disc. Pct.;
                CaptionML=[ENU=Invoice Discount %;
                           ESP=% descuento en factura];
                ToolTipML=[ENU=Specifies a discount percentage that is granted if criteria that you have set up for the customer are met.;
                           ESP=Especifica un porcentaje de descuento que se concede si se cumplen los criterios que ha configurado para el cliente.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:3;
                SourceExpr=InvoiceDiscountPct;
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 15  ;2   ;Group     ;
                GroupType=Group }

    { 13  ;3   ;Field     ;
                Name=Total Amount Excl. VAT;
                DrillDown=No;
                CaptionML=[ENU=Total Amount Excl. VAT;
                           ESP=Importe total excl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe l¡n. IVA exc. en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine.Amount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalExclVATCaption(Currency.Code);
                Editable=FALSE }

    { 11  ;3   ;Field     ;
                Name=Total VAT Amount;
                CaptionML=[ENU=Total VAT;
                           ESP=IVA total];
                ToolTipML=[ENU=Specifies the sum of VAT amounts on all lines in the document.;
                           ESP=Especifica la suma de los importes de IVA en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=VATAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalVATCaption(Currency.Code);
                Editable=FALSE }

    { 9   ;3   ;Field     ;
                Name=Total Amount Incl. VAT;
                CaptionML=[ENU=Total Amount Incl. VAT;
                           ESP=Importe total incl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Incl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe de l¡nea con IVA en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Amount Including VAT";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalInclVATCaption(Currency.Code);
                Editable=FALSE }

  }
  CODE
  {
    VAR
      TotalSalesHeader@1014 : Record 36;
      TotalSalesLine@1013 : Record 37;
      Currency@1024 : Record 4;
      SalesSetup@1010 : Record 311;
      TempOptionLookupBuffer@1018 : TEMPORARY Record 1670;
      ApplicationAreaMgmtFacade@1008 : Codeunit 9179;
      TransferExtendedText@1003 : Codeunit 378;
      SalesPriceCalcMgt@1005 : Codeunit 7000;
      ItemAvailFormsMgt@1001 : Codeunit 353;
      SalesCalcDiscByType@1015 : Codeunit 56;
      DocumentTotals@1016 : Codeunit 57;
      VATAmount@1017 : Decimal;
      InvoiceDiscountAmount@1009 : Decimal;
      InvoiceDiscountPct@1023 : Decimal;
      AmountWithDiscountAllowed@1021 : Decimal;
      ShortcutDimCode@1004 : ARRAY [8] OF Code[20];
      UpdateAllowedVar@1002 : Boolean;
      Text000@1006 : TextConst 'ENU=Unable to run this function while in View mode.;ESP=No es posible ejecutar esta funci¢n en el modo Ver.';
      LocationCodeVisible@1007 : Boolean;
      InvDiscAmountEditable@1012 : Boolean;
      IsCommentLine@1000 : Boolean;
      IsBlankNumber@1033 : Boolean;
      UnitofMeasureCodeIsChangeable@1011 : Boolean;
      IsFoundation@1020 : Boolean;
      CurrPageIsEditable@1019 : Boolean;
      ItemChargeStyleExpression@1022 : Text;
      TypeAsText@1098 : Text[30];
      DimVisible1@1032 : Boolean;
      DimVisible2@1031 : Boolean;
      DimVisible3@1030 : Boolean;
      DimVisible4@1029 : Boolean;
      DimVisible5@1028 : Boolean;
      DimVisible6@1027 : Boolean;
      DimVisible7@1026 : Boolean;
      DimVisible8@1025 : Boolean;

    [External]
    PROCEDURE ApproveCalcInvDisc@1();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Disc. (Yes/No)",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ValidateInvoiceDiscountAmount@22();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      SalesCalcDiscByType.ApplyInvDiscBasedOnAmt(InvoiceDiscountAmount,SalesHeader);
      DocumentTotals.SalesDocTotalsNotUpToDate;
      CurrPage.UPDATE(FALSE);
    END;

    [External]
    PROCEDURE CalcInvDisc@8();
    VAR
      SalesCalcDiscount@1000 : Codeunit 60;
    BEGIN
      SalesCalcDiscount.CalculateInvoiceDiscountOnLine(Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    [External]
    PROCEDURE ExplodeBOM@3();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Explode BOM",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    [External]
    PROCEDURE GetShipment@4();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Get Shipment",Rec);
    END;

    [External]
    PROCEDURE InsertExtendedText@7(Unconditionally@1000 : Boolean);
    BEGIN
      OnBeforeInsertExtendedText(Rec);
      IF TransferExtendedText.SalesCheckIfAnyExtText(Rec,Unconditionally) THEN BEGIN
        CurrPage.SAVERECORD;
        COMMIT;
        TransferExtendedText.InsertSalesExtText(Rec);
      END;
      IF TransferExtendedText.MakeUpdate THEN
        UpdatePage(TRUE);
    END;

    [External]
    PROCEDURE UpdatePage@12(SetSaveRecord@1000 : Boolean);
    BEGIN
      CurrPage.UPDATE(SetSaveRecord);
    END;

    [External]
    PROCEDURE ShowPrices@15();
    BEGIN
      TotalSalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLinePrice(TotalSalesHeader,Rec);
    END;

    [External]
    PROCEDURE ShowLineDisc@16();
    BEGIN
      TotalSalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLineLineDisc(TotalSalesHeader,Rec);
    END;

    [External]
    PROCEDURE SetUpdateAllowed@5(UpdateAllowed@1000 : Boolean);
    BEGIN
      UpdateAllowedVar := UpdateAllowed;
    END;

    [External]
    PROCEDURE UpdateAllowed@20() : Boolean;
    BEGIN
      IF UpdateAllowedVar = FALSE THEN BEGIN
        MESSAGE(Text000);
        EXIT(FALSE);
      END;
      EXIT(TRUE);
    END;

    LOCAL PROCEDURE NoOnAfterValidate@19066594();
    BEGIN
      InsertExtendedText(FALSE);

      IF (Type = Type::"Charge (Item)") AND ("No." <> xRec."No.") AND (xRec."No." <> '') THEN
        CurrPage.SAVERECORD;
    END;

    LOCAL PROCEDURE UpdateEditableOnRow@11();
    BEGIN
      IsCommentLine := NOT HasTypeToFillMandatoryFields;
      UnitofMeasureCodeIsChangeable := NOT IsCommentLine;

      CurrPageIsEditable := CurrPage.EDITABLE;
      IsBlankNumber := ("No." = '') OR IsCommentLine;
      InvDiscAmountEditable := CurrPageIsEditable AND NOT SalesSetup."Calc. Inv. Discount";
    END;

    LOCAL PROCEDURE ValidateAutoReserve@19032465();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
    END;

    LOCAL PROCEDURE GetTotalSalesHeader@13();
    BEGIN
      DocumentTotals.GetTotalSalesHeaderAndCurrency(Rec,TotalSalesHeader,Currency);
    END;

    LOCAL PROCEDURE CalculateTotals@6();
    BEGIN
      DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
      DocumentTotals.CalculateSalesSubPageTotals(TotalSalesHeader,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      DocumentTotals.RefreshSalesLine(Rec);
    END;

    LOCAL PROCEDURE DeltaUpdateTotals@2();
    BEGIN
      DocumentTotals.SalesDeltaUpdateTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      CurrPage.SAVERECORD;
      SendLineInvoiceDiscountResetNotification;
    END;

    LOCAL PROCEDURE UpdateTypeText@18();
    VAR
      RecRef@1000 : RecordRef;
    BEGIN
      RecRef.GETTABLE(Rec);
      TypeAsText := TempOptionLookupBuffer.FormatOption(RecRef.FIELD(FIELDNO(Type)));
    END;

    LOCAL PROCEDURE SetItemChargeFieldsStyle@24();
    BEGIN
      ItemChargeStyleExpression := '';
      IF AssignedItemCharge THEN
        ItemChargeStyleExpression := 'Unfavorable';
    END;

    LOCAL PROCEDURE SetDimensionsVisibility@14();
    VAR
      DimMgt@1000 : Codeunit 408;
    BEGIN
      DimVisible1 := FALSE;
      DimVisible2 := FALSE;
      DimVisible3 := FALSE;
      DimVisible4 := FALSE;
      DimVisible5 := FALSE;
      DimVisible6 := FALSE;
      DimVisible7 := FALSE;
      DimVisible8 := FALSE;

      DimMgt.UseShortcutDims(
        DimVisible1,DimVisible2,DimVisible3,DimVisible4,DimVisible5,DimVisible6,DimVisible7,DimVisible8);

      CLEAR(DimMgt);
    END;

    LOCAL PROCEDURE SetDefaultType@17();
    VAR
      IsHandled@1000 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeSetDefaultType(Rec,xRec,IsHandled);
      IF NOT IsHandled THEN // Set default type Item
        IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
          IF xRec."Document No." = '' THEN
            Type := Type::Item;
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateShortcutDimCode@27(VAR SalesLine@1000 : Record 37;VAR ShortcutDimCode@1001 : ARRAY [8] OF Code[20];DimIndex@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInsertExtendedText@10(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSetDefaultType@19(VAR SalesLine@1000 : Record 37;VAR xSalesLine@1001 : Record 37;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCrossReferenceNoOnLookup@9(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    PROCEDURE AutorizarLineaMargen@1170170006();
    VAR
      LinVtas@1170170000 : Record 37;
      GestionBaines@1170170001 : Codeunit 50005;
    BEGIN
      //I-BAIN-0034
      CurrPage.SETSELECTIONFILTER(LinVtas);
      IF LinVtas.FIND('-') THEN REPEAT
        GestionBaines.MargenMinimoAutorizar(LinVtas);
        LinVtas.MODIFY;
      UNTIL LinVtas.NEXT = 0;
      CurrPage.UPDATE(FALSE);
      //F-BAIN-0034
    END;

    BEGIN
    END.
  }
}

OBJECT Page 95 Sales Quote Subform
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=[ 9:21:44];
    Modified=Yes;
    Version List=NAVW114.04,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Lines;
               ESP=L¡neas];
    MultipleNewLines=Yes;
    LinksAllowed=No;
    SourceTable=Table37;
    DelayedInsert=Yes;
    SourceTableView=WHERE(Document Type=FILTER(Quote));
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnInit=VAR
             ApplicationAreaMgmtFacade@1001 : Codeunit 9179;
           BEGIN
             SalesSetup.GET;
             Currency.InitRoundingPrecision;
             TempOptionLookupBuffer.FillBuffer(TempOptionLookupBuffer."Lookup Type"::Sales);
             IsFoundation := ApplicationAreaMgmtFacade.IsFoundationEnabled;
           END;

    OnOpenPage=BEGIN
                 SetDimensionsVisibility;
               END;

    OnFindRecord=BEGIN
                   DocumentTotals.SalesCheckAndClearTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
                   EXIT(FIND(Which));
                 END;

    OnAfterGetRecord=BEGIN
                       ShowShortcutDimCode(ShortcutDimCode);
                       UpdateTypeText;
                       SetItemChargeFieldsStyle;
                     END;

    OnNewRecord=VAR
                  ApplicationAreaMgmtFacade@1001 : Codeunit 9179;
                BEGIN
                  InitType;
                  IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                    IF xRec."Document No." = '' THEN
                      Type := Type::Item;

                  CLEAR(ShortcutDimCode);
                  UpdateTypeText;
                END;

    OnModifyRecord=BEGIN
                     DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
                   END;

    OnDeleteRecord=VAR
                     ReserveSalesLine@1000 : Codeunit 99000832;
                   BEGIN
                     IF (Quantity <> 0) AND ItemExists("No.") THEN BEGIN
                       COMMIT;
                       IF NOT ReserveSalesLine.DeleteLineConfirm(Rec) THEN
                         EXIT(FALSE);
                       ReserveSalesLine.DeleteLine(Rec);
                     END;
                     DocumentTotals.SalesDocTotalsNotUpToDate;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           GetTotalSalesHeader;
                           CalculateTotals;
                           UpdateEditableOnRow;
                           UpdateTypeText;
                           SetItemChargeFieldsStyle;
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 44      ;1   ;Action    ;
                      Name=SelectMultiItems;
                      AccessByPermission=TableData 27=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Select items;
                                 ESP=Seleccionar productos];
                      ToolTipML=[ENU=Add two or more items from the full list of your inventory items.;
                                 ESP=Agregue dos o m s productos de la lista completa de sus productos de inventario.];
                      ApplicationArea=#Basic,#Suite;
                      Image=NewItem;
                      OnAction=BEGIN
                                 SelectMultipleItems;
                               END;
                                }
      { 17      ;1   ;Action    ;
                      Name=InsertExtTexts;
                      AccessByPermission=TableData 279=R;
                      CaptionML=[ENU=Insert &Ext. Texts;
                                 ESP=Insertar &textos adicionales];
                      ToolTipML=[ENU=Insert the extended item description that is set up for the item that is being processed on the line.;
                                 ESP=Insertar la descripci¢n de producto ampliada que se configur¢ para el producto que se est  procesando en la l¡nea.];
                      ApplicationArea=#Suite;
                      Image=Text;
                      OnAction=BEGIN
                                 InsertExtendedText(TRUE);
                               END;
                                }
      { 1907075804;1 ;Action    ;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Image=Dimensions;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 1907935204;1 ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 ESP=&L¡nea];
                      Image=Line }
      { 1901743104;2 ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 ESP=Disponibilidad prod. por];
                      Image=ItemAvailability }
      { 5       ;3   ;Action    ;
                      CaptionML=[ENU=Event;
                                 ESP=Evento];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 ESP=Permite ver c¢mo el saldo disponible real y previsto de un art¡culo se desarrollar  a lo largo del tiempo seg£n la oferta y la demanda.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 1907981204;3 ;Action    ;
                      CaptionML=[ENU=Period;
                                 ESP=Periodo];
                      ToolTipML=[ENU=Show the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 ESP=Muestra la cantidad proyectada del producto a lo largo de los periodos de tiempo, como d¡as, semanas o meses.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Period;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 1903587104;3 ;Action    ;
                      CaptionML=[ENU=Variant;
                                 ESP=Variante];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 ESP=Permite ver o editar las variantes del art¡culo. En lugar de configurar cada color de un art¡culo como un art¡culo diferente, puede configurar varios colores como variantes del art¡culo.];
                      ApplicationArea=#Planning;
                      Image=ItemVariant;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 1903134404;3 ;Action    ;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 ESP=Almac‚n];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 ESP=Permite ver la cantidad real y proyectada del producto por almac‚n.];
                      ApplicationArea=#Location;
                      Image=Warehouse;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 26      ;3   ;Action    ;
                      AccessByPermission=TableData 5870=R;
                      CaptionML=[ENU=BOM Level;
                                 ESP=Nivel L.M.];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 ESP=Permite ver las cifras correspondientes a los productos en listas de materiales que indican cu ntas unidades de un producto principal puede producir seg£n la disponibilidad de productos secundarios.];
                      ApplicationArea=#Assembly;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 1901092104;2 ;Action    ;
                      CaptionML=[ENU=Select Item Substitution;
                                 ESP=Seleccionar prod. sustitutivo];
                      ToolTipML=[ENU=Select another item that has been set up to be sold instead of the original item if it is unavailable.;
                                 ESP=Seleccione otro producto que se haya configurado para venderse en vez del producto original si no est  disponible.];
                      ApplicationArea=#Suite;
                      Image=SelectItemSubstitution;
                      OnAction=BEGIN
                                 ShowItemSub;
                               END;
                                }
      { 1902027204;2 ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      Image=ViewComments;
                      OnAction=BEGIN
                                 ShowLineComments;
                               END;
                                }
      { 1907184504;2 ;Action    ;
                      AccessByPermission=TableData 5800=R;
                      CaptionML=[ENU=Item Charge &Assignment;
                                 ESP=&Asignaci¢n cargos prod.];
                      ToolTipML=[ENU=Assign additional direct costs, for example for freight, to the item on the line.;
                                 ESP=Asignar costes directos adicionales, por ejemplo para flete, al art¡culo en la l¡nea.];
                      ApplicationArea=#ItemCharges;
                      Image=ItemCosts;
                      OnAction=BEGIN
                                 ItemChargeAssgnt;
                                 SetItemChargeFieldsStyle;
                               END;
                                }
      { 1905987604;2 ;Action    ;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=Item &Tracking Lines;
                                 ESP=L¡ns. se&guim. prod.];
                      ToolTipML=[ENU=View or edit serial numbers and lot numbers that are assigned to the item on the document or journal line.;
                                 ESP=Permite ver o editar n£meros de serie y n£meros de lote asignados al producto en el documento o la l¡nea del diario.];
                      ApplicationArea=#ItemTracking;
                      Image=ItemTrackingLines;
                      OnAction=VAR
                                 Item@1001 : Record 27;
                               BEGIN
                                 Item.GET("No.");
                                 Item.TESTFIELD("Assembly Policy",Item."Assembly Policy"::"Assemble-to-Stock");
                                 TESTFIELD("Qty. to Asm. to Order (Base)",0);
                                 OpenItemTrackingLines;
                               END;
                                }
      { 1170170002;2 ;Action    ;
                      CaptionML=ESP=An lisis;
                      Image=AnalysisView;
                      OnAction=BEGIN
                                 GestAnalisis.T37MostrarAnalisis(Rec); // VNTES
                               END;
                                }
      { 13      ;2   ;Action    ;
                      Name=Select Nonstoc&k Items;
                      AccessByPermission=TableData 5718=R;
                      CaptionML=[ENU=Select Ca&talog Items;
                                 ESP=Seleccionar productos del ca&t logo];
                      ToolTipML=[ENU="View the list of catalog items that exist in the system. ";
                                 ESP="Permite ver la lista de productos del cat logo que existe en el sistema. "];
                      ApplicationArea=#Basic,#Suite;
                      Image=NonStockItem;
                      OnAction=BEGIN
                                 ShowNonstockItems;
                               END;
                                }
      { 43      ;2   ;Action    ;
                      Name=DocAttach;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Image=Attach;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1000 : Page 1173;
                                 RecRef@1001 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 15      ;2   ;ActionGroup;
                      CaptionML=[ENU=Assemble to Order;
                                 ESP=Ensamblar para pedido];
                      ActionContainerType=NewDocumentItems;
                      Image=AssemblyBOM }
      { 3       ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Assemble-to-Order Lines;
                                 ESP=Ensamblar para l¡neas de pedido];
                      ToolTipML=[ENU=View any linked assembly order lines if the documents represents an assemble-to-order sale.;
                                 ESP=Permite ver todas las l¡neas del pedido de ensamblado vinculado si los documentos representan una venta de tipo ensamblar para pedido.];
                      ApplicationArea=#Assembly;
                      Image=CostAccountingSetup;
                      OnAction=BEGIN
                                 ShowAsmToOrderLines;
                               END;
                                }
      { 9       ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Roll Up &Price;
                                 ESP=Revertir &precio];
                      ToolTipML=[ENU=Update the unit price of the assembly item according to any changes that you have made to the assembly components.;
                                 ESP=Actualice el precio unitario del elemento del ensamblado de acuerdo con los cambios que haya efectuado en los componentes del ensamblado.];
                      ApplicationArea=#Assembly;
                      Image=CostBudget;
                      OnAction=BEGIN
                                 RollupAsmPrice;
                               END;
                                }
      { 7       ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Roll Up &Cost;
                                 ESP=Distribuir &coste];
                      ToolTipML=[ENU=Update the unit cost of the assembly item according to any changes that you have made to the assembly components.;
                                 ESP=Actualice el coste unitario del elemento de ensamblado de acuerdo con los cambios que haya efectuado en los componentes del ensamblado.];
                      ApplicationArea=#Assembly;
                      Image=CashFlow;
                      OnAction=BEGIN
                                 RollUpAsmCost;
                               END;
                                }
      { 1170170001;2 ;ActionGroup;
                      CaptionML=[ENU=Analysis;
                                 ESP=An lisis];
                      Image=AnalysisView }
      { 25      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=F&unciones];
                      Image=Action }
      { 1170170000;2 ;Action    ;
                      CaptionML=[ENU=Create new analysis;
                                 ESP=Lanzar nuevo an lisis];
                      Image=BarChart;
                      OnAction=BEGIN
                                 GestAnalisis.CreaAnalisisDesdeLinVenta(Rec); // VNTES
                               END;
                                }
      { 23      ;2   ;Action    ;
                      AccessByPermission=TableData 7002=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get &Price;
                                 ESP=Traer &precio];
                      ToolTipML=[ENU=Insert the lowest possible price in the Unit Price field according to any special price that you have set up.;
                                 ESP=Inserte el precio m s bajo posible en el campo Precio venta, seg£n el precio especial que haya configurado.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Price;
                      OnAction=BEGIN
                                 ShowPrices
                               END;
                                }
      { 21      ;2   ;Action    ;
                      AccessByPermission=TableData 7004=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get Li&ne Discount;
                                 ESP=Traer descuento l¡&nea];
                      ToolTipML=[ENU=Insert the best possible discount in the Line Discount field according to any special discounts that you have set up.;
                                 ESP=Inserte el mejor descuento posible en el campo Descuento l¡nea, seg£n el descuento especial que haya configurado.];
                      ApplicationArea=#Basic,#Suite;
                      Image=LineDiscount;
                      OnAction=BEGIN
                                 ShowLineDisc
                               END;
                                }
      { 19      ;2   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=E&xplode BOM;
                                 ESP=D&esplegar L.M.];
                      ToolTipML=[ENU=Insert new lines for the components on the bill of materials, for example to sell the parent item as a kit. CAUTION: The line for the parent item will be deleted and represented by a description only. To undo, you must delete the component lines and add a line the parent item again.;
                                 ESP=Insertar nuevas l¡neas para los componentes de la lista de materiales, por ejemplo, para vender el producto principal como un kit. ATENCIàN: La l¡nea para el producto principal se eliminar  y quedar  representada tan solo por una descripci¢n. Para deshacerlo, debe eliminar las l¡neas de componente y volver a agregar una l¡nea de producto principal.];
                      ApplicationArea=#Suite;
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of entity that will be posted for this sales line, such as Item, Resource, or G/L Account.;
                           ESP=Especifica el tipo de entidad que se registrar  para esta l¡nea de venta, como Producto, Recurso o Cuenta C/G.];
                ApplicationArea=#Advanced;
                SourceExpr=Type;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 41  ;2   ;Field     ;
                Name=FilteredTypeField;
                CaptionML=[ENU=Type;
                           ESP=Tipo];
                ToolTipML=[ENU="Specifies the type of transaction that will be posted with the document line. If you select Comment, then you can enter any text in the Description field, such as a message to a customer. ";
                           ESP="Especifica el tipo de transacci¢n que se registrar  con la l¡nea del documento. Si selecciona Comentario, puede escribir cualquier texto en el campo Descripci¢n; por ejemplo, un mensaje a un cliente. "];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TypeAsText;
                TableRelation="Option Lookup Buffer"."Option Caption" WHERE (Lookup Type=CONST(Sales));
                Visible=IsFoundation;
                Editable=CurrPageIsEditable;
                LookupPageID=Option Lookup List;
                OnValidate=BEGIN
                             TempOptionLookupBuffer.SetCurrentType(Type);
                             IF TempOptionLookupBuffer.AutoCompleteOption(TypeAsText,TempOptionLookupBuffer."Lookup Type"::Sales) THEN
                               VALIDATE(Type,TempOptionLookupBuffer.ID);
                             TempOptionLookupBuffer.ValidateOption(TypeAsText);
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 1170170004;2;Field  ;
                SourceExpr="C¢d. conjunto" }

    { 1170170003;2;Field  ;
                Name=NoConLookupConjunto;
                CaptionML=ENU=No.;
                SourceExpr="No.";
                OnValidate=BEGIN
                             //I-23069
                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                             //F-23069
                           END;

                OnLookup=VAR
                           GestionBaines@1170170000 : Codeunit 50005;
                         BEGIN
                           GestionBaines.ConjuntoLookpNoLinVenta(Rec);//23069
                         END;
                          }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of a general ledger account, item, resource, additional cost, or fixed asset, depending on the contents of the Type field.;
                           ESP=Especifica el n£mero de una cuenta de contabilidad, un producto, un recurso, un coste adicional o un activo fijo, seg£n el contenido del campo Tipo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cross-referenced item number. If you enter a cross reference between yours and your vendor's or customer's item number, then this number will override the standard item number when you enter the cross-reference number on a sales or purchase document.;
                           ESP=Especifica el n£mero de producto de la referencia cruzada. Si introduce una referencia cruzada entre su n£mero de producto y el del proveedor o el cliente, sobrescribir  el n£mero de producto est ndar cuando introduzca el n£mero de referencia cruzada en un documento de venta o de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cross-Reference No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             CrossReferenceNoOnAfterValidat;
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             DeltaUpdateTotals;
                           END;

                OnLookup=BEGIN
                           CrossReferenceNoLookUp;
                           InsertExtendedText(FALSE);
                           NoOnAfterValidate;
                           UpdateEditableOnRow;
                           OnCrossReferenceNoOnLookup(Rec);
                         END;
                          }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESP=Especifica la variante del producto que figura en la l¡nea.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE;
                OnValidate=BEGIN
                             VariantCodeOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that a substitute is available for the item on the sales line.;
                           ESP=Especifica si hay un sustituto disponible para el producto en la l¡nea de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Substitution Available";
                Visible=FALSE }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that this item is a catalog item.;
                           ESP=Especifica que este es un producto del cat logo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Nonstock;
                Visible=FALSE }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT product posting group. Links business transactions made for the item, resource, or G/L account with the general ledger, to account for VAT amounts resulting from trade with that record.;
                           ESP=Especifica el grupo de registro de IVA de producto. Vincula las transacciones empresariales realizadas para el producto, el recurso o la cuenta C/G con el fin de contabilizar los importes de IVA que derivan de la comercializaci¢n de ese registro.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Prod. Posting Group";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the entry of the product to be sold. To add a non-transactional text line, fill in the Description field only.;
                           ESP=Especifica una descripci¢n del movimiento del producto que se va a vender. Para agregar una l¡nea de texto no transaccional, rellene solo el campo Descripci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Description;
                OnValidate=BEGIN
                             UpdateEditableOnRow;

                             IF "No." = xRec."No." THEN
                               EXIT;

                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the inventory location from which the items sold should be picked and where the inventory decrease is registered.;
                           ESP=Especifica el lugar del inventario del que hay que seleccionar los productos vendidos y d¢nde hay que registrar la disminuci¢n de inventario.];
                ApplicationArea=#Location;
                SourceExpr="Location Code";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             LocationCodeOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units are being sold.;
                           ESP=Especifica cu ntas unidades se han vendido.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr=Quantity;
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             QuantityOnAfterValidate;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 11  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the sales line quantity that you want to supply by assembly.;
                           ESP=Especifica cu ntas unidades de la cantidad de la l¡nea de venta desea suministrar mediante ensamblado.];
                ApplicationArea=#Assembly;
                SourceExpr="Qty. to Assemble to Order";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                StyleExpr=ItemChargeStyleExpression;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             CurrPage.UPDATE(TRUE);
                           END;

                OnDrillDown=BEGIN
                              ShowAsmToOrderLines;
                            END;
                             }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           ESP=Especifica c¢mo se mide cada unidad del producto o el recurso, por ejemplo, en piezas u horas. De forma predeterminada, se inserta el valor en el campo Unidad de medida base de la ficha de producto o recurso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit of Measure Code";
                Enabled=UnitofMeasureCodeIsChangeable;
                Editable=UnitofMeasureCodeIsChangeable;
                OnValidate=BEGIN
                             UnitofMeasureCodeOnAfterValida;
                           END;
                            }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit of measure for the item or resource on the sales line.;
                           ESP=Especifica la unidad de medida del producto o recurso en la l¡nea de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Unit of Measure";
                Visible=FALSE }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit cost of the item on the line.;
                           ESP=Especifica el coste unitario del producto que figura en la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE }

    { 38  ;2   ;Field     ;
                CaptionML=[ENU=Sales Price Exists;
                           ESP=Existe precio venta];
                ToolTipML=[ENU=Specifies that there is a specific price for this customer.;
                           ESP=Especifica que existe un precio espec¡fico para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=PriceExists;
                Visible=FALSE;
                Editable=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the price for one unit on the sales line.;
                           ESP=Especifica el precio de una unidad en la l¡nea de venta.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Unit Price";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount percentage that is granted for the item on the line.;
                           ESP=Especifica el porcentaje de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Discount %";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount, excluding any invoice discount amount, that must be paid for products on the line.;
                           ESP=Especifica el importe neto, menos cualquier importe de descuento en factura, que se debe pagar por los productos de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Amount";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 60  ;2   ;Field     ;
                CaptionML=[ENU=Sales Line Disc. Exists;
                           ESP=Existe dto. l¡nea venta];
                ToolTipML=[ENU=Specifies that there is a specific discount for this customer.;
                           ESP=Especifica que existe un descuento espec¡fico para este cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=LineDiscExists;
                Visible=FALSE;
                Editable=FALSE }

    { 64  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount amount that is granted for the item on the line.;
                           ESP=Especifica la cantidad de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Line Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 62  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the invoice line is included when the invoice discount is calculated.;
                           ESP=Especifica si la l¡nea de factura se incluye cuando se calcula el descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Invoice Disc.";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 39  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the invoice discount amount for the line.;
                           ESP=Especifica el importe de descuento en factura para la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Inv. Discount Amount";
                Visible=FALSE;
                Editable=FALSE;
                OnValidate=BEGIN
                             UpdatePage;
                             DeltaUpdateTotals;
                           END;
                            }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you can assign item charges to this line.;
                           ESP=Especifica que es posible asignar cargos de producto a esta l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Allow Item Charge Assignment";
                Visible=FALSE }

    { 36  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item charge will be assigned to the line.;
                           ESP=Especifica cu ntas unidades del cargo de producto se asignar n a la l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Qty. to Assign";
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdateForm(FALSE);
                            END;
                             }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how much of the item charge has been assigned.;
                           ESP=Especifica la cantidad del cargo de producto que se ha asignado.];
                ApplicationArea=#ItemCharges;
                BlankZero=Yes;
                SourceExpr="Qty. Assigned";
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdateForm(FALSE);
                            END;
                             }

    { 27  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the shipping agent who is transporting the items.;
                           ESP=Especifica el c¢digo del transportista que traslada los productos.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Code";
                Visible=FALSE }

    { 40  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the service, such as a one-day delivery, that is offered by the shipping agent.;
                           ESP=Especifica el c¢digo de servicio (por ejemplo, entrega en un d¡a) que ofrece el transportista.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Service Code";
                Visible=FALSE }

    { 76  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which work type the resource applies to when the sale is related to a job.;
                           ESP=Especifica a qu‚ tipo de trabajo corresponde el recurso cuando una venta se relaciona con un trabajo.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Work Type Code";
                Visible=FALSE }

    { 42  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order that the record originates from.;
                           ESP=Especifica el n£mero del pedido abierto a partir del cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order No.";
                Visible=FALSE }

    { 46  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order line that the record originates from.;
                           ESP=Especifica el n£mero de la l¡nea de pedido abierto a partir de la cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order Line No.";
                Visible=FALSE }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied -to.;
                           ESP=Especifica el n£mero del movimiento de art¡culo en el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-to Item Entry";
                Visible=FALSE }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Visible=DimVisible1 }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                Visible=DimVisible2 }

    { 300 ;2   ;Field     ;
                Name=ShortcutDimCode3;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[3];
                CaptionClass='1,2,3';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(3),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible3;
                OnValidate=BEGIN
                             ValidateShortcutDimension(3);
                           END;
                            }

    { 302 ;2   ;Field     ;
                Name=ShortcutDimCode4;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[4];
                CaptionClass='1,2,4';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(4),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible4;
                OnValidate=BEGIN
                             ValidateShortcutDimension(4);
                           END;
                            }

    { 304 ;2   ;Field     ;
                Name=ShortcutDimCode5;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[5];
                CaptionClass='1,2,5';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(5),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible5;
                OnValidate=BEGIN
                             ValidateShortcutDimension(5);
                           END;
                            }

    { 306 ;2   ;Field     ;
                Name=ShortcutDimCode6;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[6];
                CaptionClass='1,2,6';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(6),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible6;
                OnValidate=BEGIN
                             ValidateShortcutDimension(6);
                           END;
                            }

    { 308 ;2   ;Field     ;
                Name=ShortcutDimCode7;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[7];
                CaptionClass='1,2,7';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(7),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible7;
                OnValidate=BEGIN
                             ValidateShortcutDimension(7);
                           END;
                            }

    { 310 ;2   ;Field     ;
                Name=ShortcutDimCode8;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[8];
                CaptionClass='1,2,8';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(8),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible8;
                OnValidate=BEGIN
                             ValidateShortcutDimension(8);
                           END;
                            }

    { 53  ;1   ;Group     ;
                GroupType=Group }

    { 49  ;2   ;Group     ;
                GroupType=Group }

    { 37  ;3   ;Field     ;
                Name=Subtotal Excl. VAT;
                CaptionML=[ENU=Subtotal Excl. VAT;
                           ESP=Subtotal IVA excl.];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document.;
                           ESP=Especifica la suma del valor del campo "Importe l¡nea excl. IVA" en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Line Amount";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalLineAmountWithVATAndCurrencyCaption(Currency.Code,TotalSalesHeader."Prices Including VAT");
                Editable=FALSE }

    { 47  ;3   ;Field     ;
                Name=Invoice Discount Amount;
                CaptionML=[ENU=Invoice Discount Amount;
                           ESP=Importe descuento factura];
                ToolTipML=[ENU=Specifies a discount amount that is deducted from the value in the Total Incl. VAT field. You can enter or change the amount manually.;
                           ESP=Especifica un importe de descuento que se deduce del valor del campo "Total IVA incl.". Se puede introducir o cambiar el importe manualmente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=InvoiceDiscountAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetInvoiceDiscAmountWithVATAndCurrencyCaption(FIELDCAPTION("Inv. Discount Amount"),Currency.Code);
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 45  ;3   ;Field     ;
                Name=Invoice Disc. Pct.;
                CaptionML=[ENU=Invoice Discount %;
                           ESP=% descuento en factura];
                ToolTipML=[ENU=Specifies a discount percentage that is granted if criteria that you have set up for the customer are met.;
                           ESP=Especifica un porcentaje de descuento que se concede si se cumplen los criterios que ha configurado para el cliente.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:3;
                SourceExpr=InvoiceDiscountPct;
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 35  ;2   ;Group     ;
                GroupType=Group }

    { 33  ;3   ;Field     ;
                Name=Total Amount Excl. VAT;
                DrillDown=No;
                CaptionML=[ENU=Total Amount Excl. VAT;
                           ESP=Importe total excl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe l¡n. IVA exc. en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine.Amount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalExclVATCaption(Currency.Code);
                Editable=FALSE }

    { 31  ;3   ;Field     ;
                Name=Total VAT Amount;
                CaptionML=[ENU=Total VAT;
                           ESP=IVA total];
                ToolTipML=[ENU=Specifies the sum of VAT amounts on all lines in the document.;
                           ESP=Especifica la suma de los importes de IVA en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=VATAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalVATCaption(Currency.Code);
                Editable=FALSE }

    { 29  ;3   ;Field     ;
                Name=Total Amount Incl. VAT;
                CaptionML=[ENU=Total Amount Incl. VAT;
                           ESP=Importe total incl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Incl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe de l¡nea con IVA en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Amount Including VAT";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalInclVATCaption(Currency.Code);
                Editable=FALSE }

  }
  CODE
  {
    VAR
      TotalSalesHeader@1017 : Record 36;
      TotalSalesLine@1016 : Record 37;
      SalesHeader@1000 : Record 36;
      Currency@1005 : Record 4;
      SalesSetup@1018 : Record 311;
      TempOptionLookupBuffer@1020 : TEMPORARY Record 1670;
      TransferExtendedText@1002 : Codeunit 378;
      SalesPriceCalcMgt@1004 : Codeunit 7000;
      ItemAvailFormsMgt@1001 : Codeunit 353;
      SalesCalcDiscByType@1015 : Codeunit 56;
      DocumentTotals@1014 : Codeunit 57;
      VATAmount@1013 : Decimal;
      AmountWithDiscountAllowed@1021 : Decimal;
      ShortcutDimCode@1003 : ARRAY [8] OF Code[20];
      IsCommentLine@1012 : Boolean;
      UnitofMeasureCodeIsChangeable@1008 : Boolean;
      IsFoundation@1009 : Boolean;
      CurrPageIsEditable@1019 : Boolean;
      IsBlankNumber@1031 : Boolean;
      InvoiceDiscountAmount@1011 : Decimal;
      InvoiceDiscountPct@1006 : Decimal;
      InvDiscAmountEditable@1007 : Boolean;
      GestAnalisis@1170170000 : Codeunit 7014480;
      ItemChargeStyleExpression@1026 : Text;
      TypeAsText@1010 : Text[30];
      DimVisible1@1030 : Boolean;
      DimVisible2@1029 : Boolean;
      DimVisible3@1028 : Boolean;
      DimVisible4@1027 : Boolean;
      DimVisible5@1025 : Boolean;
      DimVisible6@1024 : Boolean;
      DimVisible7@1023 : Boolean;
      DimVisible8@1022 : Boolean;

    [External]
    PROCEDURE ApproveCalcInvDisc@1();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Disc. (Yes/No)",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ValidateInvoiceDiscountAmount@22();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      SalesCalcDiscByType.ApplyInvDiscBasedOnAmt(InvoiceDiscountAmount,SalesHeader);
      DocumentTotals.SalesDocTotalsNotUpToDate;
      CurrPage.UPDATE(FALSE);
    END;

    [External]
    PROCEDURE CalcInvDisc@17();
    VAR
      SalesCalcDiscount@1000 : Codeunit 60;
    BEGIN
      SalesCalcDiscount.CalculateInvoiceDiscountOnLine(Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ExplodeBOM@3();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Explode BOM",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    [External]
    PROCEDURE InsertExtendedText@4(Unconditionally@1000 : Boolean);
    BEGIN
      OnBeforeInsertExtendedText(Rec);
      IF TransferExtendedText.SalesCheckIfAnyExtText(Rec,Unconditionally) THEN BEGIN
        CurrPage.SAVERECORD;
        COMMIT;
        TransferExtendedText.InsertSalesExtText(Rec);
      END;
      IF TransferExtendedText.MakeUpdate THEN
        UpdateForm(TRUE);
    END;

    LOCAL PROCEDURE ShowItemSub@8();
    BEGIN
      ShowItemSub;
    END;

    LOCAL PROCEDURE ShowNonstockItems@10();
    BEGIN
      ShowNonstock;
    END;

    LOCAL PROCEDURE ItemChargeAssgnt@5800();
    BEGIN
      ShowItemChargeAssgnt;
    END;

    [External]
    PROCEDURE UpdateForm@12(SetSaveRecord@1000 : Boolean);
    BEGIN
      CurrPage.UPDATE(SetSaveRecord);
    END;

    LOCAL PROCEDURE ShowPrices@15();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLinePrice(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE ShowLineDisc@16();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLineLineDisc(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE ShowLineComments@11();
    BEGIN
      ShowLineComments;
    END;

    LOCAL PROCEDURE NoOnAfterValidate@19066594();
    BEGIN
      InsertExtendedText(FALSE);
      IF (Type = Type::"Charge (Item)") AND ("No." <> xRec."No.") AND
         (xRec."No." <> '')
      THEN
        CurrPage.SAVERECORD;

      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE LocationCodeOnAfterValidate@2();
    BEGIN
      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE VariantCodeOnAfterValidate@9();
    BEGIN
      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE CrossReferenceNoOnAfterValidat@19048248();
    BEGIN
      InsertExtendedText(FALSE);
    END;

    LOCAL PROCEDURE QuantityOnAfterValidate@19032465();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
      DeltaUpdateTotals;
    END;

    LOCAL PROCEDURE UnitofMeasureCodeOnAfterValida@19057939();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
      DeltaUpdateTotals;
    END;

    LOCAL PROCEDURE SaveAndAutoAsmToOrder@13();
    BEGIN
      IF (Type = Type::Item) AND IsAsmToOrderRequired THEN BEGIN
        CurrPage.SAVERECORD;
        AutoAsmToOrder;
      END;
    END;

    LOCAL PROCEDURE UpdateEditableOnRow@19();
    BEGIN
      IsCommentLine := NOT HasTypeToFillMandatoryFields;
      UnitofMeasureCodeIsChangeable := NOT IsCommentLine;

      CurrPageIsEditable := CurrPage.EDITABLE;
      IsBlankNumber := ("No." = '') OR IsCommentLine;
      InvDiscAmountEditable := CurrPageIsEditable AND NOT SalesSetup."Calc. Inv. Discount";
    END;

    LOCAL PROCEDURE UpdatePage@20();
    VAR
      SalesHeader@1001 : Record 36;
    BEGIN
      CurrPage.UPDATE;
      SalesHeader.GET("Document Type","Document No.");
      SalesCalcDiscByType.ApplyDefaultInvoiceDiscount(TotalSalesHeader."Invoice Discount Amount",SalesHeader);
    END;

    LOCAL PROCEDURE GetTotalSalesHeader@14();
    BEGIN
      DocumentTotals.GetTotalSalesHeaderAndCurrency(Rec,TotalSalesHeader,Currency);
    END;

    LOCAL PROCEDURE CalculateTotals@6();
    BEGIN
      DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
      DocumentTotals.CalculateSalesSubPageTotals(TotalSalesHeader,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      DocumentTotals.RefreshSalesLine(Rec);
    END;

    LOCAL PROCEDURE DeltaUpdateTotals@28();
    BEGIN
      DocumentTotals.SalesDeltaUpdateTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      CurrPage.SAVERECORD;
      SendLineInvoiceDiscountResetNotification;
    END;

    LOCAL PROCEDURE UpdateTypeText@24();
    VAR
      RecRef@1000 : RecordRef;
    BEGIN
      RecRef.GETTABLE(Rec);
      TypeAsText := TempOptionLookupBuffer.FormatOption(RecRef.FIELD(FIELDNO(Type)));
    END;

    LOCAL PROCEDURE SetItemChargeFieldsStyle@30();
    BEGIN
      ItemChargeStyleExpression := '';
      IF AssignedItemCharge THEN
        ItemChargeStyleExpression := 'Unfavorable';
    END;

    LOCAL PROCEDURE SetDimensionsVisibility@21();
    VAR
      DimMgt@1000 : Codeunit 408;
    BEGIN
      DimVisible1 := FALSE;
      DimVisible2 := FALSE;
      DimVisible3 := FALSE;
      DimVisible4 := FALSE;
      DimVisible5 := FALSE;
      DimVisible6 := FALSE;
      DimVisible7 := FALSE;
      DimVisible8 := FALSE;

      DimMgt.UseShortcutDims(
        DimVisible1,DimVisible2,DimVisible3,DimVisible4,DimVisible5,DimVisible6,DimVisible7,DimVisible8);

      CLEAR(DimMgt);
    END;

    LOCAL PROCEDURE ValidateShortcutDimension@7(DimIndex@1000 : Integer);
    VAR
      AssembleToOrderLink@1001 : Record 904;
    BEGIN
      ValidateShortcutDimCode(DimIndex,ShortcutDimCode[DimIndex]);
      AssembleToOrderLink.UpdateAsmDimFromSalesLine(Rec);

      OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,DimIndex);
    END;

    LOCAL PROCEDURE "--BAIN-0054--"@1170000000();
    BEGIN
    END;

    PROCEDURE CalcDtoPromo@1170170003();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Ventas-Calc. dto. promocional",Rec); // VNTES
    END;

    PROCEDURE AprobarCalcDtoPromo@1170170004();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Ventas-Prom. (s¡/no)",Rec); // VNTES
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateShortcutDimCode@27(VAR SalesLine@1000 : Record 37;VAR ShortcutDimCode@1001 : ARRAY [8] OF Code[20];DimIndex@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInsertExtendedText@18(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCrossReferenceNoOnLookup@5(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    BEGIN
    {
      BAINES
      ==============================
      BAIN-0135 AC 080311 Se a¤ade c lculo de dto. promo
    }
    END.
  }
}

OBJECT Page 96 Sales Cr. Memo Subform
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=[ 9:22:17];
    Modified=Yes;
    Version List=NAVW114.04,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Lines;
               ESP=L¡neas];
    MultipleNewLines=Yes;
    LinksAllowed=No;
    SourceTable=Table37;
    DelayedInsert=Yes;
    SourceTableView=WHERE(Document Type=FILTER(Credit Memo));
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnInit=VAR
             ApplicationAreaMgmtFacade@1001 : Codeunit 9179;
           BEGIN
             SalesSetup.GET;
             Currency.InitRoundingPrecision;
             TempOptionLookupBuffer.FillBuffer(TempOptionLookupBuffer."Lookup Type"::Sales);
             IsFoundation := ApplicationAreaMgmtFacade.IsFoundationEnabled;
           END;

    OnOpenPage=BEGIN
                 SetDimensionsVisibility;
               END;

    OnFindRecord=BEGIN
                   DocumentTotals.SalesCheckAndClearTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
                   EXIT(FIND(Which));
                 END;

    OnAfterGetRecord=BEGIN
                       ShowShortcutDimCode(ShortcutDimCode);
                       UpdateTypeText;
                       SetItemChargeFieldsStyle
                     END;

    OnNewRecord=VAR
                  ApplicationAreaMgmtFacade@1001 : Codeunit 9179;
                BEGIN
                  InitType;

                  // Default to Inventory for the first line and to previous line type for the others
                  IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                    IF xRec."Document No." = '' THEN
                      Type := Type::Item;

                  CLEAR(ShortcutDimCode);
                  UpdateTypeText;
                END;

    OnModifyRecord=BEGIN
                     DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
                   END;

    OnDeleteRecord=VAR
                     ReserveSalesLine@1000 : Codeunit 99000832;
                   BEGIN
                     IF (Quantity <> 0) AND ItemExists("No.") THEN BEGIN
                       COMMIT;
                       IF NOT ReserveSalesLine.DeleteLineConfirm(Rec) THEN
                         EXIT(FALSE);
                       ReserveSalesLine.DeleteLine(Rec);
                     END;
                     DocumentTotals.SalesDocTotalsNotUpToDate;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           GetTotalSalesHeader;
                           CalculateTotals;
                           UpdateEditableOnRow;
                           UpdateTypeText;
                           SetItemChargeFieldsStyle;
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1902056104;1 ;Action    ;
                      Name=InsertExtTexts;
                      AccessByPermission=TableData 279=R;
                      CaptionML=[ENU=Insert &Ext. Texts;
                                 ESP=Insertar &textos adicionales];
                      ToolTipML=[ENU=Insert the extended item description that is set up for the item that is being processed on the line.;
                                 ESP=Insertar la descripci¢n de producto ampliada que se configur¢ para el producto que se est  procesando en la l¡nea.];
                      ApplicationArea=#Suite;
                      Image=Text;
                      OnAction=BEGIN
                                 InsertExtendedText(TRUE);
                               END;
                                }
      { 1902740304;1 ;Action    ;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Image=Dimensions;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 19      ;1   ;Action    ;
                      Name=DeferralSchedule;
                      CaptionML=[ENU=Deferral Schedule;
                                 ESP=Previsi¢n fraccionamiento];
                      ToolTipML=[ENU=View or edit the deferral schedule that governs how revenue made with this sales document is deferred to different accounting periods when the document is posted.;
                                 ESP=Permite ver o editar la previsi¢n de fraccionamiento que administra el modo de fraccionar los ingresos realizados con este documento de venta en per¡odos contables diferentes cuando se registra el documento.];
                      ApplicationArea=#Suite;
                      Enabled="Deferral Code" <> '';
                      Image=PaymentPeriod;
                      OnAction=BEGIN
                                 ShowDeferralSchedule;
                               END;
                                }
      { 1906587504;1 ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 1904522204;2 ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=E&xplode BOM;
                                 ESP=&Desplegar L.M.];
                      ToolTipML=[ENU=Insert new lines for the components on the bill of materials, for example to sell the parent item as a kit. CAUTION: The line for the parent item will be deleted and represented by a description only. To undo, you must delete the component lines and add a line the parent item again.;
                                 ESP=Insertar nuevas l¡neas para los componentes de la lista de materiales, por ejemplo, para vender el producto principal como un kit. ATENCIàN: La l¡nea para el producto principal se eliminar  y quedar  representada tan solo por una descripci¢n. Para deshacerlo, debe eliminar las l¡neas de componente y volver a agregar una l¡nea de producto principal.];
                      ApplicationArea=#Suite;
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
      { 1901991804;2 ;Action    ;
                      AccessByPermission=TableData 6660=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get Return &Receipt Lines;
                                 ESP=Traer l¡ns. &recep. devol.];
                      ToolTipML=[ENU=Select a posted return receipt for the item that you want to assign the item charge to, for example, if you received an invoice for the item charge after you posted the original return receipt.;
                                 ESP="Seleccione una recepci¢n de devoluci¢n registrada para el producto al que desea asignar el cargo de producto; por ejemplo, si ha recibido una factura para el cargo del producto despu‚s de registrar la recepci¢n de devoluci¢n original."];
                      ApplicationArea=#SalesReturnOrder;
                      Image=ReturnReceipt;
                      OnAction=BEGIN
                                 GetReturnReceipt;
                               END;
                                }
      { 1170170000;2 ;Action    ;
                      CaptionML=[ENU=Analysis;
                                 ESP=Traer l¡ns. pedidos distribuci¢n];
                      Image=ReturnReceipt;
                      OnAction=BEGIN
                                 CODEUNIT.RUN(CODEUNIT::"Ventas-Traer peds. distrib.",Rec); // VNTES
                               END;
                                }
      { 1170170001;2 ;Action    ;
                      CaptionML=[ENU=Create new analysis;
                                 ESP=Lanzar nuevo an lisis];
                      Image=BarChart;
                      OnAction=VAR
                                 GestAnalisis@1170170000 : Codeunit 7014480;
                               BEGIN
                                 GestAnalisis.CreaAnalisisDesdeLinVenta(Rec); // VNTES
                               END;
                                }
      { 1907935204;1 ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 ESP=&L¡nea];
                      Image=Line }
      { 1907981204;2 ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 ESP=Disponibilidad prod. por];
                      Image=ItemAvailability }
      { 5       ;3   ;Action    ;
                      CaptionML=[ENU=Event;
                                 ESP=Evento];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 ESP=Permite ver c¢mo el saldo disponible real y previsto de un art¡culo se desarrollar  a lo largo del tiempo seg£n la oferta y la demanda.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 1903587104;3 ;Action    ;
                      CaptionML=[ENU=Period;
                                 ESP=Periodo];
                      ToolTipML=[ENU=Show the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 ESP=Muestra la cantidad proyectada del producto a lo largo de los periodos de tiempo, como d¡as, semanas o meses.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Period;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 1903193004;3 ;Action    ;
                      CaptionML=[ENU=Variant;
                                 ESP=Variante];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 ESP=Permite ver o editar las variantes del art¡culo. En lugar de configurar cada color de un art¡culo como un art¡culo diferente, puede configurar varios colores como variantes del art¡culo.];
                      ApplicationArea=#Planning;
                      Image=ItemVariant;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 1901743104;3 ;Action    ;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 ESP=Almac‚n];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 ESP=Permite ver la cantidad real y proyectada del producto por almac‚n.];
                      ApplicationArea=#Location;
                      Image=Warehouse;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 7       ;3   ;Action    ;
                      AccessByPermission=TableData 5870=R;
                      CaptionML=[ENU=BOM Level;
                                 ESP=Nivel L.M.];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 ESP=Permite ver las cifras correspondientes a los productos en listas de materiales que indican cu ntas unidades de un producto principal puede producir seg£n la disponibilidad de productos secundarios.];
                      ApplicationArea=#Assembly;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 1907838004;2 ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      Image=ViewComments;
                      OnAction=BEGIN
                                 ShowLineComments;
                               END;
                                }
      { 1907184504;2 ;Action    ;
                      AccessByPermission=TableData 5800=R;
                      CaptionML=[ENU=Item Charge &Assignment;
                                 ESP=&Asignaci¢n cargos prod.];
                      ToolTipML=[ENU=Assign additional direct costs, for example for freight, to the item on the line.;
                                 ESP=Asignar costes directos adicionales, por ejemplo para flete, al art¡culo en la l¡nea.];
                      ApplicationArea=#ItemCharges;
                      Image=ItemCosts;
                      OnAction=BEGIN
                                 ItemChargeAssgnt;
                                 SetItemChargeFieldsStyle
                               END;
                                }
      { 1905987604;2 ;Action    ;
                      Name=ItemTrackingLines;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=Item &Tracking Lines;
                                 ESP=L¡ns. se&guim. prod.];
                      ToolTipML=[ENU=View or edit serial numbers and lot numbers that are assigned to the item on the document or journal line.;
                                 ESP=Permite ver o editar n£meros de serie y n£meros de lote asignados al producto en el documento o la l¡nea del diario.];
                      ApplicationArea=#ItemTracking;
                      Image=ItemTrackingLines;
                      OnAction=BEGIN
                                 OpenItemTrackingLines;
                               END;
                                }
      { 1901458458;2 ;Action    ;
                      Name=DocAttach;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Image=Attach;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1000 : Page 1173;
                                 RecRef@1001 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 1170170002;2 ;Action    ;
                      CaptionML=[ENU=Analysis;
                                 ESP=An lisis];
                      Image=AnalysisView;
                      OnAction=VAR
                                 GestAnalisis@1170170000 : Codeunit 7014480;
                               BEGIN
                                 GestAnalisis.T37MostrarAnalisis(Rec); // VNTES
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of entity that will be posted for this sales line, such as Item, Resource, or G/L Account.;
                           ESP=Especifica el tipo de entidad que se registrar  para esta l¡nea de venta, como Producto, Recurso o Cuenta C/G.];
                ApplicationArea=#Advanced;
                SourceExpr=Type;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 9   ;2   ;Field     ;
                Name=FilteredTypeField;
                CaptionML=[ENU=Type;
                           ESP=Tipo];
                ToolTipML=[ENU="Specifies the type of transaction that will be posted with the document line. If you select Comment, then you can enter any text in the Description field, such as a message to a customer. ";
                           ESP="Especifica el tipo de transacci¢n que se registrar  con la l¡nea del documento. Si selecciona Comentario, puede escribir cualquier texto en el campo Descripci¢n; por ejemplo, un mensaje a un cliente. "];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TypeAsText;
                TableRelation="Option Lookup Buffer"."Option Caption" WHERE (Lookup Type=CONST(Sales));
                Visible=IsFoundation;
                Editable=CurrPageIsEditable;
                LookupPageID=Option Lookup List;
                OnValidate=BEGIN
                             TempOptionLookupBuffer.SetCurrentType(Type);
                             IF TempOptionLookupBuffer.AutoCompleteOption(TypeAsText,TempOptionLookupBuffer."Lookup Type"::Sales) THEN
                               VALIDATE(Type,TempOptionLookupBuffer.ID);
                             TempOptionLookupBuffer.ValidateOption(TypeAsText);
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 1170170003;2;Field  ;
                SourceExpr="C¢d. conjunto" }

    { 1170170004;2;Field  ;
                Name=NoConLookupConjunto;
                CaptionML=ENU=No.;
                SourceExpr="No.";
                OnValidate=BEGIN
                             //I-23069
                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                             //F-23069
                           END;

                OnLookup=VAR
                           GestionBaines@1170170000 : Codeunit 50005;
                         BEGIN
                           GestionBaines.ConjuntoLookpNoLinVenta(Rec);//23069
                         END;
                          }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of a general ledger account, item, resource, additional cost, or fixed asset, depending on the contents of the Type field.;
                           ESP=Especifica el n£mero de una cuenta de contabilidad, un producto, un recurso, un coste adicional o un activo fijo, seg£n el contenido del campo Tipo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cross-referenced item number. If you enter a cross reference between yours and your vendor's or customer's item number, then this number will override the standard item number when you enter the cross-reference number on a sales or purchase document.;
                           ESP=Especifica el n£mero de producto de la referencia cruzada. Si introduce una referencia cruzada entre su n£mero de producto y el del proveedor o el cliente, sobrescribir  el n£mero de producto est ndar cuando introduzca el n£mero de referencia cruzada en un documento de venta o de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cross-Reference No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             CrossReferenceNoOnAfterValidat;
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             DeltaUpdateTotals;
                           END;

                OnLookup=BEGIN
                           CrossReferenceNoLookUp;
                           InsertExtendedText(FALSE);
                           NoOnAfterValidate;
                           UpdateEditableOnRow;
                           OnCrossReferenceNoOnLookup(Rec);
                         END;
                          }

    { 46  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the intercompany partner that the transaction is related to if the entry was created from an intercompany transaction.;
                           ESP=Especifica el c¢digo del socio de empresas vinculadas relacionado con la transacci¢n si el movimiento se ha creado a partir de una transacci¢n entre empresas vinculadas.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Code";
                Visible=FALSE }

    { 40  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the item or account in your IC partner's company that corresponds to the item or account on the line.;
                           ESP=Especifica el producto o la cuenta de la empresa de su socio IC que corresponda al producto o la cuenta de la l¡nea.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Ref. Type";
                Visible=FALSE }

    { 42  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the IC partner. If the line is being sent to one of your intercompany partners, this field is used together with the IC Partner Ref. Type field to indicate the item or account in your partner's company that corresponds to the line.;
                           ESP=Especifica el socio IC. Si la l¡nea se est  enviando a uno de los socios de empresas vinculadas, este campo se usa junto con el campo Tipo referencia socio IC para indicar el art¡culo o la cuenta de la empresa del socio que corresponde a la l¡nea.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Reference";
                Visible=FALSE }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESP=Especifica la variante del producto que figura en la l¡nea.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 38  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that this item is a catalog item.;
                           ESP=Especifica que este es un producto del cat logo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Nonstock;
                Visible=FALSE }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT product posting group. Links business transactions made for the item, resource, or G/L account with the general ledger, to account for VAT amounts resulting from trade with that record.;
                           ESP=Especifica el grupo de registro de IVA de producto. Vincula las transacciones empresariales realizadas para el producto, el recurso o la cuenta C/G con el fin de contabilizar los importes de IVA que derivan de la comercializaci¢n de ese registro.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Prod. Posting Group";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the entry, which is based on the contents of the Type and No. fields.;
                           ESP=Especifica una descripci¢n del movimiento, que depende del contenido de los campos Tipo y N.§.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Description;
                OnValidate=BEGIN
                             UpdateEditableOnRow;

                             IF "No." = xRec."No." THEN
                               EXIT;

                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code explaining why the item was returned.;
                           ESP=Especifica el c¢digo que explica el motivo de la devoluci¢n del producto.];
                ApplicationArea=#Suite;
                SourceExpr="Return Reason Code";
                Visible=FALSE }

    { 72  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the inventory location from which the items sold should be picked and where the inventory decrease is registered.;
                           ESP=Especifica el lugar del inventario del que hay que seleccionar los productos vendidos y d¢nde hay que registrar la disminuci¢n de inventario.];
                ApplicationArea=#Location;
                SourceExpr="Location Code";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the bin where the items are picked or put away.;
                           ESP=Especifica la ubicaci¢n en la que se recogen o se dejan los art¡culos.];
                ApplicationArea=#Warehouse;
                SourceExpr="Bin Code";
                Visible=FALSE }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether a reservation can be made for items on this line.;
                           ESP=Especifica si es posible realizar una reserva de los productos de esta l¡nea.];
                ApplicationArea=#Reservation;
                SourceExpr=Reserve;
                Visible=FALSE;
                OnValidate=BEGIN
                             ReserveOnAfterValidate;
                           END;
                            }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units are being sold.;
                           ESP=Especifica cu ntas unidades se han vendido.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr=Quantity;
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             QuantityOnAfterValidate;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been reserved.;
                           ESP=Especifica cu ntas unidades del producto de la l¡nea se han reservado.];
                ApplicationArea=#Reservation;
                BlankZero=Yes;
                SourceExpr="Reserved Quantity";
                Visible=FALSE;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              COMMIT;
                              ShowReservationEntries(TRUE);
                              UpdateForm(TRUE);
                            END;
                             }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           ESP=Especifica c¢mo se mide cada unidad del producto o el recurso, por ejemplo, en piezas u horas. De forma predeterminada, se inserta el valor en el campo Unidad de medida base de la ficha de producto o recurso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit of Measure Code";
                Enabled=UnitofMeasureCodeIsChangeable;
                Editable=UnitofMeasureCodeIsChangeable;
                OnValidate=BEGIN
                             UnitofMeasureCodeOnAfterValida;
                           END;
                            }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit of measure for the item or resource on the sales line.;
                           ESP=Especifica la unidad de medida del producto o recurso en la l¡nea de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Unit of Measure";
                Visible=FALSE }

    { 70  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit cost of the item on the line.;
                           ESP=Especifica el coste unitario del producto que figura en la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the price for one unit on the sales line.;
                           ESP=Especifica el precio de una unidad en la l¡nea de venta.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Unit Price";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 92  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount, excluding any invoice discount amount, that must be paid for products on the line.;
                           ESP=Especifica el importe neto, menos cualquier importe de descuento en factura, que se debe pagar por los productos de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Amount";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount percentage that is granted for the item on the line.;
                           ESP=Especifica el porcentaje de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Discount %";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount amount that is granted for the item on the line.;
                           ESP=Especifica la cantidad de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Line Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the invoice line is included when the invoice discount is calculated.;
                           ESP=Especifica si la l¡nea de factura se incluye cuando se calcula el descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Invoice Disc.";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the invoice discount amount for the line.;
                           ESP=Especifica el importe de descuento en factura para la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Inv. Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you can assign item charges to this line.;
                           ESP=Especifica que es posible asignar cargos de producto a esta l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Allow Item Charge Assignment";
                Visible=FALSE }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item charge will be assigned to the line.;
                           ESP=Especifica cu ntas unidades del cargo de producto se asignar n a la l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Qty. to Assign";
                StyleExpr=ItemChargeStyleExpression;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdateForm(FALSE);
                            END;
                             }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of the item charge that was assigned to a specified item when you posted this sales line.;
                           ESP=Especifica la cantidad de cargo de producto que se ha asignado a un producto determinado al registrar esta l¡nea de venta.];
                ApplicationArea=#ItemCharges;
                BlankZero=Yes;
                SourceExpr="Qty. Assigned";
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdateForm(FALSE);
                            END;
                             }

    { 44  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the related job. If you fill in this field and the Job Task No. field, then a job ledger entry will be posted together with the sales line.;
                           ESP=Especifica el n£mero del proyecto relacionado. Si rellena este campo y el campo N.§ tarea proyecto, se registrar  un movimiento de proyecto junto con la l¡nea de ventas.];
                ApplicationArea=#Jobs;
                SourceExpr="Job No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             ShowShortcutDimCode(ShortcutDimCode);
                           END;
                            }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the related job task.;
                           ESP=Especifica el n£mero de tarea del proyecto relacionada.];
                ApplicationArea=#Jobs;
                SourceExpr="Job Task No.";
                Visible=FALSE }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT category in connection with electronic document sending. For example, when you send sales documents through the PEPPOL service, the value in this field is used to populate several fields, such as the ClassifiedTaxCategory element in the Item group. It is also used to populate the TaxCategory element in both the TaxSubtotal and AllowanceCharge group. The number is based on the UNCL5305 standard.;
                           ESP=Especifica la categor¡a en conexi¢n con el env¡o de documentos electr¢nicos. Por ejemplo, cuando se env¡a un documento de venta a trav‚s del servicio PEPPOL, el valor de este campo se usa para rellenar varios campos, como el elemento ClassifiedTaxCategory en el grupo de productos. Tambi‚n se usa para rellenar el elemento TaxCategory en los grupos TaxSubtotal y AllowanceCharge. El n£mero se basa en el est ndar UNCL5305.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Tax Category";
                Visible=FALSE }

    { 62  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which work type the resource applies to when the sale is related to a job.;
                           ESP=Especifica a qu‚ tipo de trabajo corresponde el recurso cuando una venta se relaciona con un trabajo.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Work Type Code";
                Visible=FALSE }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order that the record originates from.;
                           ESP=Especifica el n£mero del pedido abierto a partir del cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order No.";
                Visible=FALSE }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order line that the record originates from.;
                           ESP=Especifica el n£mero de la l¡nea de pedido abierto a partir de la cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order Line No.";
                Visible=FALSE }

    { 5810;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied from.;
                           ESP=Especifica el n£mero del movimiento de art¡culo desde el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-from Item Entry";
                Visible=FALSE }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied -to.;
                           ESP=Especifica el n£mero del movimiento de art¡culo en el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-to Item Entry";
                Visible=FALSE }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the deferral template that governs how revenue earned with this sales document is deferred to the different accounting periods when the good or service was delivered.;
                           ESP=Especifica la plantilla de fraccionamiento que administra el modo de fraccionar los ingresos realizados con este documento de venta en per¡odos contables diferentes cuando se registra el documento.];
                ApplicationArea=#Suite;
                SourceExpr="Deferral Code";
                Visible=FALSE;
                OnAssistEdit=BEGIN
                               ShowDeferralSchedule;
                             END;
                              }

    { 76  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Visible=DimVisible1 }

    { 74  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                Visible=DimVisible2 }

    { 300 ;2   ;Field     ;
                Name=ShortcutDimCode3;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[3];
                CaptionClass='1,2,3';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(3),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible3;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(3,ShortcutDimCode[3]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,3);
                           END;
                            }

    { 302 ;2   ;Field     ;
                Name=ShortcutDimCode4;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[4];
                CaptionClass='1,2,4';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(4),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible4;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(4,ShortcutDimCode[4]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,4);
                           END;
                            }

    { 304 ;2   ;Field     ;
                Name=ShortcutDimCode5;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[5];
                CaptionClass='1,2,5';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(5),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible5;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(5,ShortcutDimCode[5]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,5);
                           END;
                            }

    { 306 ;2   ;Field     ;
                Name=ShortcutDimCode6;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[6];
                CaptionClass='1,2,6';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(6),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible6;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(6,ShortcutDimCode[6]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,6);
                           END;
                            }

    { 308 ;2   ;Field     ;
                Name=ShortcutDimCode7;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[7];
                CaptionClass='1,2,7';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(7),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible7;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(7,ShortcutDimCode[7]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,7);
                           END;
                            }

    { 310 ;2   ;Field     ;
                Name=ShortcutDimCode8;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[8];
                CaptionClass='1,2,8';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(8),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible8;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(8,ShortcutDimCode[8]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,8);
                           END;
                            }

    { 39  ;1   ;Group     ;
                GroupType=Group }

    { 35  ;2   ;Group     ;
                GroupType=Group }

    { 27  ;3   ;Field     ;
                CaptionML=[ENU=Subtotal Excl. VAT;
                           ESP=Subtotal IVA excl.];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document.;
                           ESP=Especifica la suma del valor del campo "Importe l¡nea excl. IVA" en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Line Amount";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalLineAmountWithVATAndCurrencyCaption(Currency.Code,TotalSalesHeader."Prices Including VAT");
                Editable=FALSE }

    { 33  ;3   ;Field     ;
                Name=Invoice Discount Amount;
                CaptionML=[ENU=Invoice Discount Amount;
                           ESP=Importe descuento factura];
                ToolTipML=[ENU=Specifies a discount amount that is deducted from the value in the Total Incl. VAT field. You can enter or change the amount manually.;
                           ESP=Especifica un importe de descuento que se deduce del valor del campo "Total IVA incl.". Se puede introducir o cambiar el importe manualmente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=InvoiceDiscountAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetInvoiceDiscAmountWithVATAndCurrencyCaption(FIELDCAPTION("Inv. Discount Amount"),Currency.Code);
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 31  ;3   ;Field     ;
                Name=Invoice Disc. Pct.;
                CaptionML=[ENU=Invoice Discount %;
                           ESP=% descuento en factura];
                ToolTipML=[ENU=Specifies a discount percentage that is granted if criteria that you have set up for the customer are met.;
                           ESP=Especifica un porcentaje de descuento que se concede si se cumplen los criterios que ha configurado para el cliente.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:3;
                SourceExpr=InvoiceDiscountPct;
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 17  ;2   ;Group     ;
                GroupType=Group }

    { 15  ;3   ;Field     ;
                Name=Total Amount Excl. VAT;
                DrillDown=No;
                CaptionML=[ENU=Total Amount Excl. VAT;
                           ESP=Importe total excl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe l¡n. IVA exc. en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine.Amount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalExclVATCaption(Currency.Code);
                Editable=FALSE }

    { 13  ;3   ;Field     ;
                Name=Total VAT Amount;
                CaptionML=[ENU=Total VAT;
                           ESP=IVA total];
                ToolTipML=[ENU=Specifies the sum of VAT amounts on all lines in the document.;
                           ESP=Especifica la suma de los importes de IVA en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=VATAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalVATCaption(Currency.Code);
                Editable=FALSE }

    { 11  ;3   ;Field     ;
                Name=Total Amount Incl. VAT;
                CaptionML=[ENU=Total Amount Incl. VAT;
                           ESP=Importe total incl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Incl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe de l¡nea con IVA en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Amount Including VAT";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalInclVATCaption(Currency.Code);
                Editable=FALSE }

  }
  CODE
  {
    VAR
      TotalSalesHeader@1021 : Record 36;
      TotalSalesLine@1020 : Record 37;
      SalesSetup@1011 : Record 311;
      Currency@1016 : Record 4;
      TempOptionLookupBuffer@1018 : TEMPORARY Record 1670;
      TransferExtendedText@1000 : Codeunit 378;
      ItemAvailFormsMgt@1004 : Codeunit 353;
      SalesCalcDiscountByType@1015 : Codeunit 56;
      DocumentTotals@1014 : Codeunit 57;
      VATAmount@1013 : Decimal;
      AmountWithDiscountAllowed@1012 : Decimal;
      ShortcutDimCode@1001 : ARRAY [8] OF Code[20];
      InvDiscAmountEditable@1010 : Boolean;
      UnitofMeasureCodeIsChangeable@1003 : Boolean;
      InvoiceDiscountAmount@1006 : Decimal;
      InvoiceDiscountPct@1005 : Decimal;
      IsFoundation@1007 : Boolean;
      IsCommentLine@1008 : Boolean;
      CurrPageIsEditable@1002 : Boolean;
      IsBlankNumber@1029 : Boolean;
      TypeAsText@1009 : Text[30];
      ItemChargeStyleExpression@1026 : Text;
      DimVisible1@1028 : Boolean;
      DimVisible2@1027 : Boolean;
      DimVisible3@1025 : Boolean;
      DimVisible4@1024 : Boolean;
      DimVisible5@1023 : Boolean;
      DimVisible6@1022 : Boolean;
      DimVisible7@1019 : Boolean;
      DimVisible8@1017 : Boolean;

    [External]
    PROCEDURE ApproveCalcInvDisc@1();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Disc. (Yes/No)",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ExplodeBOM@3();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Explode BOM",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    [External]
    PROCEDURE CalcInvDisc@60();
    VAR
      SalesCalcDiscount@1000 : Codeunit 60;
    BEGIN
      SalesCalcDiscount.CalculateInvoiceDiscountOnLine(Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE GetReturnReceipt@2();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Get Return Receipts",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE InsertExtendedText@5(Unconditionally@1000 : Boolean);
    BEGIN
      OnBeforeInsertExtendedText(Rec);
      IF TransferExtendedText.SalesCheckIfAnyExtText(Rec,Unconditionally) THEN BEGIN
        CurrPage.SAVERECORD;
        COMMIT;
        TransferExtendedText.InsertSalesExtText(Rec);
      END;
      IF TransferExtendedText.MakeUpdate THEN
        UpdateForm(TRUE);
    END;

    LOCAL PROCEDURE OpenItemTrackingLines@6500();
    BEGIN
      OpenItemTrackingLines;
    END;

    LOCAL PROCEDURE ItemChargeAssgnt@5800();
    BEGIN
      ShowItemChargeAssgnt;
    END;

    [External]
    PROCEDURE UpdateForm@12(SetSaveRecord@1000 : Boolean);
    BEGIN
      CurrPage.UPDATE(SetSaveRecord);
    END;

    LOCAL PROCEDURE ShowLineComments@10();
    BEGIN
      ShowLineComments;
    END;

    LOCAL PROCEDURE NoOnAfterValidate@409();
    BEGIN
      InsertExtendedText(FALSE);
      IF (Type = Type::"Charge (Item)") AND ("No." <> xRec."No.") AND
         (xRec."No." <> '')
      THEN
        CurrPage.SAVERECORD;
    END;

    LOCAL PROCEDURE CrossReferenceNoOnAfterValidat@2059();
    BEGIN
      InsertExtendedText(FALSE);
    END;

    LOCAL PROCEDURE ReserveOnAfterValidate@8303();
    BEGIN
      IF (Reserve = Reserve::Always) AND ("Outstanding Qty. (Base)" <> 0) THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
    END;

    LOCAL PROCEDURE QuantityOnAfterValidate@6272();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
      DeltaUpdateTotals;
    END;

    LOCAL PROCEDURE UnitofMeasureCodeOnAfterValida@1752();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
      DeltaUpdateTotals;
    END;

    LOCAL PROCEDURE UpdateEditableOnRow@19();
    BEGIN
      IsCommentLine := NOT HasTypeToFillMandatoryFields;
      UnitofMeasureCodeIsChangeable := NOT IsCommentLine;

      CurrPageIsEditable := CurrPage.EDITABLE;
      IsBlankNumber := ("No." = '') OR IsCommentLine;
      InvDiscAmountEditable := CurrPageIsEditable AND NOT SalesSetup."Calc. Inv. Discount";
    END;

    LOCAL PROCEDURE CalculateTotals@8();
    BEGIN
      DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
      DocumentTotals.CalculateSalesSubPageTotals(TotalSalesHeader,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      DocumentTotals.RefreshSalesLine(Rec);
    END;

    LOCAL PROCEDURE DeltaUpdateTotals@28();
    BEGIN
      DocumentTotals.SalesDeltaUpdateTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      CurrPage.SAVERECORD;
      SendLineInvoiceDiscountResetNotification;
    END;

    LOCAL PROCEDURE GetTotalSalesHeader@13();
    BEGIN
      DocumentTotals.GetTotalSalesHeaderAndCurrency(Rec,TotalSalesHeader,Currency);
    END;

    LOCAL PROCEDURE ValidateInvoiceDiscountAmount@22();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      SalesCalcDiscountByType.ApplyInvDiscBasedOnAmt(InvoiceDiscountAmount,SalesHeader);
      CurrPage.UPDATE(FALSE);
    END;

    LOCAL PROCEDURE UpdateTypeText@7();
    VAR
      RecRef@1000 : RecordRef;
    BEGIN
      RecRef.GETTABLE(Rec);
      TypeAsText := TempOptionLookupBuffer.FormatOption(RecRef.FIELD(FIELDNO(Type)));
    END;

    LOCAL PROCEDURE SetItemChargeFieldsStyle@30();
    BEGIN
      ItemChargeStyleExpression := '';
      IF AssignedItemCharge THEN
        ItemChargeStyleExpression := 'Unfavorable';
    END;

    LOCAL PROCEDURE SetDimensionsVisibility@9();
    VAR
      DimMgt@1000 : Codeunit 408;
    BEGIN
      DimVisible1 := FALSE;
      DimVisible2 := FALSE;
      DimVisible3 := FALSE;
      DimVisible4 := FALSE;
      DimVisible5 := FALSE;
      DimVisible6 := FALSE;
      DimVisible7 := FALSE;
      DimVisible8 := FALSE;

      DimMgt.UseShortcutDims(
        DimVisible1,DimVisible2,DimVisible3,DimVisible4,DimVisible5,DimVisible6,DimVisible7,DimVisible8);

      CLEAR(DimMgt);
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateShortcutDimCode@27(VAR SalesLine@1000 : Record 37;VAR ShortcutDimCode@1001 : ARRAY [8] OF Code[20];DimIndex@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInsertExtendedText@6(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCrossReferenceNoOnLookup@4(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    BEGIN
    END.
  }
}

OBJECT Page 119 User Setup
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=13:29:43;
    Modified=Yes;
    Version List=NAVW114.00,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=User Setup;
               ESP=Configuraci¢n usuarios];
    ApplicationArea=#Basic,#Suite;
    SourceTable=Table91;
    PageType=List;
    UsageCategory=Administration;
    OnOpenPage=BEGIN
                 HideExternalUsers;
               END;

  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the ID of the user who posted the entry, to be used, for example, in the change log.;
                           ESP=Especifica el identificador del usuario que registr¢ el movimiento, que se usar , por ejemplo, en el registro de cambios.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="User ID" }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the earliest date on which the user is allowed to post to the company.;
                           ESP=Especifica la fecha m s antigua desde la que se permite al usuario registrar en la empresa.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Posting From" }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the last date on which the user is allowed to post to the company.;
                           ESP=Especifica la £ltima fecha desde la que se permite al usuario registrar en la empresa.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Posting To" }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to register the user's time usage defined as the time spent from when the user logs in to when the user logs out. Unexpected interruptions, such as idle session timeout, terminal server idle session timeout, or a client crash are not recorded.;
                           ESP=Especifica si se debe registrar el uso de tiempo por parte del usuario definido como el tiempo invertido desde que el usuario inicia sesi¢n hasta que la cierra. No se registran las interrupciones inesperadas, como el tiempo de espera de la sesi¢n inactiva, el tiempo de espera de la sesi¢n inactiva del servidor de terminal o un bloqueo del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Register Time" }

    { 5   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the salesperson or purchaser for the user.;
                           ESP=Especifica el c¢digo para el vendedor o el comprador para el usuario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Salespers./Purch. Code" }

    { 15  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the responsibility center to which you want to assign the user.;
                           ESP=Especifica el c¢digo del centro de responsabilidad que se quiere asignar al usuario.];
                ApplicationArea=#Suite;
                SourceExpr="Sales Resp. Ctr. Filter" }

    { 17  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the responsibility center to which you want to assign the user.;
                           ESP=Especifica el c¢digo del centro de responsabilidad que se quiere asignar al usuario.];
                ApplicationArea=#Suite;
                SourceExpr="Purchase Resp. Ctr. Filter" }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the responsibility center you want to assign to the user. The user will only be able to see service documents for the responsibility center specified in the field. This responsibility center will also be the default responsibility center when the user creates new service documents.;
                           ESP=Especifica el c¢digo del centro de responsabilidad que se quiere asignar al usuario. El usuario solo podr  ver los documentos de servicio del centro de responsabilidad especificado en el campo. Este centro de responsabilidad tambi‚n ser  el centro de responsabilidad predeterminado cuando el usuario cree nuevos documentos de servicio.];
                ApplicationArea=#Service;
                SourceExpr="Service Resp. Ctr. Filter" }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if a user is a time sheet administrator. A time sheet administrator can access any time sheet and then edit, change, or delete it.;
                           ESP=Especifica si un usuario es un administrador de partes de horas. Un administrador de partes de horas puede obtener acceso a cualquier parte de horas y modificarlo, cambiarlo o eliminarlo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Time Sheet Admin." }

    { 1170170000;2;Field  ;
                SourceExpr="Usuario TPV" }

    { 1170170001;2;Field  ;
                SourceExpr="C¢d. TPV por defecto" }

    { 1170170005;2;Field  ;
                SourceExpr="Nombre libro diario ventanilla" }

    { 1170170006;2;Field  ;
                SourceExpr="Secc. libro diario ventanilla" }

    { 7   ;2   ;Field     ;
                Name=Email;
                ToolTipML=[ENU=Specifies the user's email address.;
                           ESP=Especifica la direcci¢n de correo electr¢nico del usuario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="E-Mail" }

    { 1170170002;2;Field  ;
                SourceExpr="Autoriza margen m¡nimo ventas" }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                Visible=FALSE;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {

    BEGIN
    END.
  }
}

OBJECT Page 130 Posted Sales Shipment
{
  OBJECT-PROPERTIES
  {
    Date=20/04/20;
    Time=18:15:19;
    Modified=Yes;
    Version List=NAVW114.04,NAVES14.04,VNTES14.00.00,UPG365,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Posted Sales Shipment;
               ESP=Hist¢rico albaranes venta];
    InsertAllowed=No;
    SourceTable=Table110;
    PageType=Document;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Print/Send,Shipment;
                                ESP=Nuevo,Proceso,Informe,Imprimir y enviar,Env¡o];
    OnOpenPage=BEGIN
                 SetSecurityFilterOnRespCenter;
                 // VNTES.i
                 TraeTPV;
                 FILTERGROUP(2);
                 IF TPV.C¢digo <> '' THEN
                   SETRANGE("C¢d. TPV",TPV.C¢digo)
                 ELSE
                   SETRANGE("C¢d. TPV");
                 FILTERGROUP(0);
                 // VNTES.f
                 IsBillToCountyVisible := FormatAddress.UseCounty("Bill-to Country/Region Code");
                 IsShipToCountyVisible := FormatAddress.UseCounty("Ship-to Country/Region Code");
                 IsSellToCountyVisible := FormatAddress.UseCounty("Sell-to Country/Region Code");
               END;

    ActionList=ACTIONS
    {
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 47      ;1   ;ActionGroup;
                      CaptionML=[ENU=&Shipment;
                                 ESP=En&v¡o];
                      Image=Shipment }
      { 10      ;2   ;Action    ;
                      ShortCutKey=F7;
                      CaptionML=[ENU=Statistics;
                                 ESP=Estad¡sticas];
                      ToolTipML=[ENU=View statistical information, such as the value of posted entries, for the record.;
                                 ESP=Permite ver informaci¢n estad¡stica del registro, como el valor de los movimientos registrados.];
                      ApplicationArea=#Suite;
                      RunObject=Page 396;
                      RunPageLink=No.=FIELD(No.);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Statistics;
                      PromotedCategory=Category5 }
      { 78      ;2   ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=C&omentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      RunObject=Page 67;
                      RunPageLink=Document Type=CONST(Shipment),
                                  No.=FIELD(No.),
                                  Document Line No.=CONST(0);
                      Promoted=Yes;
                      Image=ViewComments;
                      PromotedCategory=Category5 }
      { 80      ;2   ;Action    ;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Dimensions;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 107     ;2   ;Action    ;
                      AccessByPermission=TableData 456=R;
                      CaptionML=[ENU=Approvals;
                                 ESP=Aprobaciones];
                      ToolTipML=[ENU=View a list of the records that are waiting to be approved. For example, you can see who requested the record to be approved, when it was sent, and when it is due to be approved.;
                                 ESP=Permite ver una lista de los registros en espera de aprobaci¢n. Por ejemplo, puede ver qui‚n ha solicitado la aprobaci¢n del registro, cu ndo se envi¢ y la fecha de vencimiento de la aprobaci¢n.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Image=Approvals;
                      PromotedCategory=Category5;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.ShowPostedApprovalEntries(RECORDID);
                               END;
                                }
      { 1170170001;2 ;Action    ;
                      CaptionML=[ENU=e-DAA's;
                                 ESP=E-DAAïs];
                      RunObject=Page 7061457;
                      RunPageView=SORTING(No. tabla,No. documento);
                      RunPageLink=No. tabla=CONST(110),
                                  No. documento=FIELD(No.);
                      Image=CalculateCost }
      { 1170170002;2 ;Action    ;
                      CaptionML=[ENU=Hist.e-DAA's;
                                 ESP=Hist§ E-DAAïs];
                      RunObject=Page 7061493;
                      RunPageView=SORTING(No. tabla,No. documento);
                      RunPageLink=No. tabla=CONST(110),
                                  No. documento=FIELD(No.);
                      Image=History }
      { 3       ;2   ;Action    ;
                      Name=CertificateOfSupplyDetails;
                      CaptionML=[ENU=Certificate of Supply Details;
                                 ESP=Detalles del certificado de suministro];
                      ToolTipML=[ENU=View the certificate of supply that you must send to your customer for signature as confirmation of receipt. You must print a certificate of supply if the shipment uses a combination of VAT business posting group and VAT product posting group that have been marked to require a certificate of supply in the VAT Posting Setup window.;
                                 ESP=Muestra el certificado de suministro que debe enviarse al cliente para su firma como confirmaci¢n de recibo. Debe imprimir un certificado de suministro si el env¡o usa una combinaci¢n de grupo de registro empresarial de IVA y un grupo de registro de producto de IVA que se hayan marcado para requerir un certificado de suministro en la ventana Config. grupos registro IVA.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 780;
                      RunPageLink=Document Type=FILTER(Sales Shipment),
                                  Document No.=FIELD(No.);
                      Image=Certificate }
      { 5       ;2   ;Action    ;
                      Name=PrintCertificateofSupply;
                      CaptionML=[ENU=Print Certificate of Supply;
                                 ESP=Imprimir certificado de suministro];
                      ToolTipML=[ENU=Print the certificate of supply that you must send to your customer for signature as confirmation of receipt.;
                                 ESP=Permite imprimir el certificado de suministro que debe enviarse al cliente para su firma como confirmaci¢n de recibo.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=No;
                      Image=PrintReport;
                      OnAction=VAR
                                 CertificateOfSupply@1002 : Record 780;
                               BEGIN
                                 CertificateOfSupply.SETRANGE("Document Type",CertificateOfSupply."Document Type"::"Sales Shipment");
                                 CertificateOfSupply.SETRANGE("Document No.","No.");
                                 CertificateOfSupply.Print;
                               END;
                                }
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 74      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 79      ;2   ;Action    ;
                      CaptionML=[ENU=&Track Package;
                                 ESP=Seguimiento pa&quete];
                      ToolTipML=[ENU="Open the shipping agent's tracking page to track the package. ";
                                 ESP=Abre la p gina de seguimiento del transportista para hacer un seguimiento del paquete.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=ItemTracking;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 StartTrackingSite;
                               END;
                                }
      { 1170170003;2 ;Action    ;
                      CaptionML=[ENU=Generate Annex I;
                                 ESP=Generar Anexo I];
                      Image=Capacity;
                      OnAction=VAR
                                 GenerarAnexo@1170170000 : Codeunit 7014608;
                               BEGIN
                                 GenerarAnexo.CrearAnexoI(110,0,"No.",TRUE);  //VNTES
                               END;
                                }
      { 1170170004;2 ;Action    ;
                      CaptionML=[ENU=Export EDI;
                                 ESP=E&xportar EDI];
                      Image=ExportFile;
                      OnAction=BEGIN
                                 //VNTES.i
                                 SalesShptHeader.RESET;
                                 SalesShptHeader.SETRANGE("No.","No.");
                                 SalesShptHeader.SETRANGE("Enviado EDI",FALSE);
                                 REPORT.RUNMODAL(REPORT::"Exportar albaranes E.D.I.",TRUE,FALSE,SalesShptHeader);
                                 //VNTES.f
                               END;
                                }
      { 1170170005;2 ;Action    ;
                      CaptionML=[ENU=EMCS Generate e-DAA;
                                 ESP=EMCS - Generar e-DAA];
                      Image=Capacity;
                      OnAction=BEGIN
                                 GestEMCS.CreateCabeceraEDAAVentaAlb(Rec); // VNTES
                               END;
                                }
      { 49      ;1   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=&Print;
                                 ESP=&Imprimir];
                      ToolTipML=[ENU=Print the shipping notice.;
                                 ESP=Imprimir el aviso de env¡o.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=Print;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CurrPage.SETSELECTIONFILTER(SalesShptHeader);
                                 SalesShptHeader.PrintRecords(TRUE);
                               END;
                                }
      { 50      ;1   ;Action    ;
                      CaptionML=[ENU=&Navigate;
                                 ESP=&Navegar];
                      ToolTipML=[ENU=Find all entries and documents that exist for the document number and posting date on the selected entry or document.;
                                 ESP=Buscar todos los movimientos y los documentos que existen para el n£mero de documento y la fecha de registro que constan en el movimiento o documento seleccionados.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=Navigate;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 Navigate;
                               END;
                                }
      { 35      ;1   ;Action    ;
                      Name=Update Document;
                      CaptionML=[ENU=Update Document;
                                 ESP=Actualizar documento];
                      ToolTipML=[ENU=Add new information that is relevant to the document, such as information from the shipping agent. You can only edit a few fields because the document has already been posted.;
                                 ESP=Agregue nueva informaci¢n que sea relevante para el documento, como la informaci¢n del transportista. Solo puede editar algunos campos porque el documento ya se ha registrado.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Edit;
                      PromotedCategory=Process;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 PostedSalesShipmentUpdate@1000 : Page 1350;
                               BEGIN
                                 PostedSalesShipmentUpdate.LOOKUPMODE := TRUE;
                                 PostedSalesShipmentUpdate.SetRec(Rec);
                                 PostedSalesShipmentUpdate.RUNMODAL;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                CaptionML=[ENU=General;
                           ESP=General] }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the record.;
                           ESP=Especifica el n£mero del registro.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No.";
                Importance=Promoted;
                Editable=FALSE }

    { 52  ;2   ;Field     ;
                CaptionML=[ENU=Customer;
                           ESP=Cliente];
                ToolTipML=[ENU=Specifies the name of customer at the sell-to address.;
                           ESP=Especifica el nombre del cliente en la direcci¢n de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Customer Name";
                Editable=FALSE }

    { 1170000000;2;Field  ;
                SourceExpr="Alias cliente" }

    { 1170000001;2;Field  ;
                CaptionML=ESP=Prefacturado;
                SourceExpr=FuncionesBAINES.Prefacturado(Rec);
                Editable=FALSE }

    { 6   ;2   ;Group     ;
                CaptionML=[ENU=Sell-to;
                           ESP=Direcci¢n venta];
                GroupType=Group }

    { 54  ;3   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the customer's sell-to address.;
                           ESP=Especifica la direcci¢n de venta del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Address";
                Importance=Additional;
                Editable=FALSE }

    { 56  ;3   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies the customer's extended sell-to address.;
                           ESP=Especifica la direcci¢n de venta ampliada del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Address 2";
                Importance=Additional;
                Editable=FALSE }

    { 58  ;3   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to City";
                Importance=Additional;
                Editable=FALSE }

    { 15  ;3   ;Group     ;
                Visible=IsSellToCountyVisible;
                GroupType=Group }

    { 11  ;4   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county as a part of the address.;
                           ESP=Especifica el estado, provincia o comarca como parte de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to County";
                Importance=Additional;
                Editable=FALSE }

    { 8   ;3   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the post code of the customer's sell-to address.;
                           ESP=Especifica el c¢digo postal de la direcci¢n de venta del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Post Code";
                Importance=Additional;
                Editable=FALSE }

    { 13  ;3   ;Field     ;
                CaptionML=[ENU=Country/Region;
                           ESP=Pa¡s/regi¢n];
                ToolTipML=[ENU=Specifies the country/region of the customer on the sales document.;
                           ESP=Especifica el pa¡s o la regi¢n del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Country/Region Code";
                Importance=Additional;
                Editable=FALSE }

    { 112 ;3   ;Field     ;
                CaptionML=[ENU=Contact No.;
                           ESP=N§ contacto];
                ToolTipML=[ENU=Specifies the contact number.;
                           ESP=Especifica el n£mero de contacto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Contact No.";
                Importance=Additional;
                Editable=FALSE }

    { 60  ;2   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the contact at the customer's sell-to address.;
                           ESP=Especifica el nombre del contacto en la direcci¢n de venta del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Sell-to Contact";
                Editable=FALSE }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many times the document has been printed.;
                           ESP=Especifica el n£mero de veces que se ha impreso el documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No. Printed";
                Importance=Additional;
                Editable=FALSE }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the posting date for the entry.;
                           ESP=Especifica la fecha de registro del movimiento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posting Date";
                Importance=Promoted;
                Editable=FALSE }

    { 27  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the posting date of the document.;
                           ESP=Especifica la fecha de registro del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Document Date";
                Importance=Additional;
                Editable=FALSE }

    { 84  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that the customer has asked for the order to be delivered.;
                           ESP=Especifica la fecha en la que el cliente ha solicitado que se entregue el pedido.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Requested Delivery Date";
                Editable=FALSE }

    { 87  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that you have promised to deliver the order, as a result of the Order Promising function.;
                           ESP=Especifica la fecha de entrega que acord¢ con el cliente como resultado de la funci¢n Compromiso entrega.];
                ApplicationArea=#OrderPromising;
                SourceExpr="Promised Delivery Date";
                Editable=FALSE }

    { 111 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the sales quote document if a quote was used to start the sales process.;
                           ESP=Especifica el n£mero de documento de oferta de venta si se us¢ alguna oferta para iniciar el proceso de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Quote No.";
                Editable=FALSE }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the sales order that this invoice was posted from.;
                           ESP=Especifica el n£mero del pedido de venta a partir del cual se registr¢ esta factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Order No.";
                Importance=Promoted;
                Editable=FALSE }

    { 89  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number that the customer uses in their own system to refer to this sales document.;
                           ESP=Especifica el n£mero que usa el cliente en su propio sistema para hacer referencia a este documento de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="External Document No.";
                Importance=Additional;
                Editable=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a code for the salesperson who normally handles this customer's account.;
                           ESP=Especifica un c¢digo para el vendedor que suele encargarse de la cuenta de este cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Salesperson Code";
                Importance=Additional;
                Editable=FALSE }

    { 82  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the responsibility center that serves the customer on this sales document.;
                           ESP=Especifica el c¢digo del centro de responsabilidad que atiende al cliente que consta en este documento de ventas.];
                ApplicationArea=#Suite;
                SourceExpr="Responsibility Center";
                Importance=Additional;
                Editable=FALSE }

    { 33  ;2   ;Group     ;
                CaptionML=[ENU=Work Description;
                           ESP=Descripci¢n del trabajo];
                GroupType=Group }

    { 31  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the products or services being offered.;
                           ESP=Especifica los productos o servicios que se ofrecen.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetWorkDescription;
                Importance=Additional;
                Editable=FALSE;
                MultiLine=Yes;
                ShowCaption=No }

    { 46  ;1   ;Part      ;
                Name=SalesShipmLines;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=Document No.=FIELD(No.);
                PagePartID=Page131 }

    { 1906801201;1;Group  ;
                CaptionML=[ENU=Shipping;
                           ESP=Env¡o];
                GroupType=Group }

    { 30  ;2   ;Field     ;
                CaptionML=[ENU=Address Code;
                           ESP=C¢digo de direcci¢n];
                ToolTipML=[ENU=Specifies the code for the customer's additional shipment address.;
                           ESP=Especifica el c¢digo de la direcci¢n adicional de env¡o del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Code";
                Importance=Promoted;
                Editable=FALSE }

    { 32  ;2   ;Field     ;
                CaptionML=[ENU=Name;
                           ESP=Nombre];
                ToolTipML=[ENU=Specifies the name of the customer that you delivered the items to.;
                           ESP=Especifica el nombre del cliente a quien se entregaron los art¡culos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Name";
                Editable=FALSE }

    { 34  ;2   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the address that you delivered the items to.;
                           ESP=Especifica la direcci¢n donde se entregaron los art¡culos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Address";
                Editable=FALSE }

    { 36  ;2   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies the extended address that you delivered the items to.;
                           ESP=Especifica la direcci¢n ampliada donde se entregaron los art¡culos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Address 2";
                Editable=FALSE }

    { 38  ;2   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to City";
                Editable=FALSE }

    { 21  ;2   ;Group     ;
                Visible=IsShipToCountyVisible;
                GroupType=Group }

    { 17  ;3   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county as a part of the address.;
                           ESP=Especifica el estado, provincia o comarca como parte de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to County";
                Editable=FALSE }

    { 69  ;2   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the post code of the customer's ship-to address.;
                           ESP=Especifica el c¢digo postal de la direcci¢n de env¡o del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Post Code";
                Importance=Promoted;
                Editable=FALSE }

    { 19  ;2   ;Field     ;
                CaptionML=[ENU=Country/Region;
                           ESP=Pa¡s/regi¢n];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Country/Region Code";
                Editable=FALSE }

    { 40  ;2   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the person you regularly contact at the address that the items were shipped to.;
                           ESP=Especifica el nombre de la persona con la que habitualmente contacta en la direcci¢n a la que se enviaron los art¡culos.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ship-to Contact";
                Editable=FALSE }

    { 65  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the location from where inventory items to the customer on the sales document are to be shipped by default.;
                           ESP=Especifica el almac‚n desde el que se env¡an de forma predeterminada los productos de inventario al cliente en el documento de venta.];
                ApplicationArea=#Location;
                SourceExpr="Location Code";
                Importance=Promoted;
                Editable=FALSE }

    { 91  ;2   ;Field     ;
                ToolTipML=[ENU="Specifies a date formula for the time it takes to get items ready to ship from this location. The time element is used in the calculation of the delivery date as follows: Shipment Date + Outbound Warehouse Handling Time = Planned Shipment Date + Shipping Time = Planned Delivery Date.";
                           ESP="Especifica una f¢rmula de fecha con el tiempo que se tarda en preparar los productos para su env¡o desde este almac‚n. El elemento de tiempo se utiliza en el c lculo de la fecha de entrega de la siguiente manera: fecha env¡o + tiempo de manipulaci¢n en el almac‚n de salida = fecha env¡o planificada + tiempo env¡o = fecha entrega planificada."];
                ApplicationArea=#Warehouse;
                SourceExpr="Outbound Whse. Handling Time";
                Editable=FALSE }

    { 95  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how long it takes from when the items are shipped from the warehouse to when they are delivered.;
                           ESP=Especifica el tiempo que transcurre desde que se env¡an los productos desde el almac‚n hasta que se entregan.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipping Time";
                Editable=FALSE }

    { 7   ;2   ;Group     ;
                CaptionML=[ENU=Shipment Method;
                           ESP=Condiciones env¡o];
                GroupType=Group }

    { 42  ;3   ;Field     ;
                CaptionML=[ENU=Code;
                           ESP=C¢digo];
                ToolTipML=[ENU=Specifies the shipment method for the shipment.;
                           ESP=Especifica un m‚todo de env¡o.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Method Code";
                Editable=FALSE }

    { 62  ;3   ;Field     ;
                CaptionML=[ENU=Agent;
                           ESP=Agente];
                ToolTipML=[ENU=Specifies which shipping agent is used to transport the items on the sales document to the customer.;
                           ESP=Especifica el transportista que se usa para transportar los productos del documento de venta al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Code";
                Importance=Additional;
                Editable=FALSE }

    { 93  ;3   ;Field     ;
                CaptionML=[ENU=Agent Service;
                           ESP=Servicio de agente];
                ToolTipML=[ENU=Specifies which shipping agent service is used to transport the items on the sales document to the customer.;
                           ESP=Especifica el servicio de transportista que se usa para transportar los productos del documento de venta al cliente.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Service Code";
                Importance=Additional;
                Editable=FALSE }

    { 72  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the shipping agent's package number.;
                           ESP=Especifica el n£mero de paquete del transportista.];
                ApplicationArea=#Suite;
                SourceExpr="Package Tracking No.";
                Importance=Additional;
                Editable=FALSE }

    { 44  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when items on the document are shipped or were shipped. A shipment date is usually calculated from a requested delivery date plus lead time.;
                           ESP=Especifica cu ndo se van a enviar o se han enviado los productos del documento. Se calcula normalmente una fecha de env¡o con la fecha de entrega solicitada y el plazo de seguridad.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Date";
                Importance=Promoted;
                Editable=FALSE }

    { 1170170000;2;Field  ;
                SourceExpr="No. Anexo" }

    { 1901792801;1;Group  ;
                CaptionML=[ENU=Payment;
                           ESP=Pago] }

    { 1100006;2;Field     ;
                ToolTipML=[ENU=Specifies the client's payment address code that was on the order header, Payments tab, from which this sales receipt was created.;
                           ESP=Especifica el c¢digo de la direcci¢n de pago del cliente que figuraba en la cabecera del pedido, pesta¤a Pagos, a partir del cual se gener¢ este albar n de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Pay-at Code";
                Editable=FALSE }

    { 1100008;2;Field     ;
                ToolTipML=[ENU=Specifies the client's bank code that was in the header, on the order from which this sales receipt was created.;
                           ESP=Especifica el c¢digo del banco del cliente que figuraba en la cabecera del pedido a partir del cual se gener¢ este albar n de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cust. Bank Acc. Code";
                Editable=FALSE }

    { 1905885101;1;Group  ;
                CaptionML=[ENU=Invoicing;
                           ESP=Facturaci¢n];
                GroupType=Group }

    { 18  ;2   ;Field     ;
                CaptionML=[ENU=Customer No.;
                           ESP=N§ cliente];
                ToolTipML=[ENU=Specifies the number of the customer at the billing address.;
                           ESP=Especifica el n£mero del cliente en la direcci¢n de facturaci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Customer No.";
                Importance=Additional;
                Editable=FALSE }

    { 20  ;2   ;Field     ;
                CaptionML=[ENU=Name;
                           ESP=Nombre];
                ToolTipML=[ENU=Specifies the name of the customer that you sent the invoice to.;
                           ESP=Especifica el nombre del cliente a quien se envi¢ la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Name";
                Editable=FALSE }

    { 22  ;2   ;Field     ;
                CaptionML=[ENU=Address;
                           ESP=Direcci¢n];
                ToolTipML=[ENU=Specifies the address that you sent the invoice to.;
                           ESP=Especifica la direcci¢n a la que se envi¢ la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Address";
                Importance=Additional;
                Editable=FALSE }

    { 24  ;2   ;Field     ;
                CaptionML=[ENU=Address 2;
                           ESP=Direcci¢n 2];
                ToolTipML=[ENU=Specifies the extended address that you sent the invoice to.;
                           ESP=Especifica la direcci¢n ampliada a la que se envi¢ la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Address 2";
                Importance=Additional;
                Editable=FALSE }

    { 26  ;2   ;Field     ;
                CaptionML=[ENU=City;
                           ESP=Poblaci¢n];
                ToolTipML=[ENU=Specifies the city of the customer on the sales document.;
                           ESP=Especifica la ciudad del cliente en el documento de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to City";
                Importance=Additional;
                Editable=FALSE }

    { 29  ;2   ;Group     ;
                Visible=IsBillToCountyVisible;
                GroupType=Group }

    { 23  ;3   ;Field     ;
                CaptionML=[ENU=County;
                           ESP=Provincia];
                ToolTipML=[ENU=Specifies the state, province or county as a part of the address.;
                           ESP=Especifica el estado, provincia o comarca como parte de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to County";
                Importance=Additional;
                Editable=FALSE }

    { 67  ;2   ;Field     ;
                CaptionML=[ENU=Post Code;
                           ESP=C¢digo postal];
                ToolTipML=[ENU=Specifies the post code of the customer's bill-to address.;
                           ESP=Especifica el c¢digo postal de la direcci¢n de facturaci¢n del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Post Code";
                Importance=Additional;
                Editable=FALSE }

    { 25  ;2   ;Field     ;
                CaptionML=[ENU=Country/Region Code;
                           ESP=C¢digo pa¡s/regi¢n];
                ToolTipML=[ENU=Specifies the country or region of the address.;
                           ESP=Especifica el pa¡s o la regi¢n de la direcci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Country/Region Code";
                Importance=Additional;
                Editable=FALSE }

    { 114 ;2   ;Field     ;
                CaptionML=[ENU=Contact No.;
                           ESP=N§ contacto];
                ToolTipML=[ENU=Specifies the number of the contact at the customer's bill-to address.;
                           ESP=Especifica el n£mero del contacto en la direcci¢n de facturaci¢n del cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Contact No.";
                Importance=Additional;
                Editable=FALSE }

    { 28  ;2   ;Field     ;
                CaptionML=[ENU=Contact;
                           ESP=Contacto];
                ToolTipML=[ENU=Specifies the name of the person you regularly contact at the customer to whom you sent the invoice.;
                           ESP=Especifica el nombre de la persona con la que habitualmente contacta cuando debe comunicarse con el cliente al que envi¢ la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Contact";
                Editable=FALSE }

    { 9   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Editable=FALSE }

    { 63  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                Editable=FALSE }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      SalesShptHeader@1000 : Record 110;
      TPV@1170170002 : Record 7014655;
      GestVtas@1170170001 : Codeunit 7014613;
      GestEMCS@1170170000 : Codeunit 7014538;
      FormatAddress@1004 : Codeunit 365;
      IsBillToCountyVisible@1003 : Boolean;
      IsSellToCountyVisible@1002 : Boolean;
      IsShipToCountyVisible@1001 : Boolean;
      "--BAINES-0052--"@1170000000 : Integer;
      FuncionesBAINES@1170000001 : Codeunit 50000;

    PROCEDURE TraeTPV@1170170000();
    VAR
      ConfUsuario@1170170001 : Record 91;
      GestAccTPV@1170170000 : Codeunit 7014552;
    BEGIN
      // VNTES.i
      CLEAR(TPV);
      IF ConfUsuario.GET(USERID) AND (ConfUsuario."Usuario TPV") THEN
        GestAccTPV.ObtTPVActual(TPV);
      // VNTES.i
    END;

    BEGIN
    {

      BAINES
      =========
      BAIN-0062 VM 120508 Se a¤ade el campo alias.
      BAIN-0038 JA 010208 A¤adir funci¢n prefacturado.
    }
    END.
  }
}

OBJECT Page 459 Sales & Receivables Setup
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=18:36:25;
    Modified=Yes;
    Version List=NAVW114.04,NAVES14.04,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Sales & Receivables Setup;
               ESP=Conf. ventas y cobros];
    ApplicationArea=#Basic,#Suite;
    InsertAllowed=No;
    DeleteAllowed=No;
    SourceTable=Table311;
    PageType=Card;
    UsageCategory=Administration;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Customer Groups,Payments;
                                ESP=Nuevo,Proceso,Informe,Grupos de clientes,Pagos];
    OnOpenPage=BEGIN
                 RESET;
                 IF NOT GET THEN BEGIN
                   INIT;
                   INSERT;
                 END;
                 UsarConceptos := "Usar conceptos de cargo";//VNTES
               END;

    OnAfterGetRecord=BEGIN
                       UsarConceptos := "Usar conceptos de cargo";//VNTES
                     END;

    ActionList=ACTIONS
    {
      { 47      ;    ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 45      ;1   ;Action    ;
                      CaptionML=[ENU=Customer Posting Groups;
                                 ESP=Grupos registro cliente];
                      ToolTipML=[ENU=Set up the posting groups to select from when you set up customer cards to link business transactions made for the customer with the appropriate account in the general ledger.;
                                 ESP=Permite configurar los grupos de registro entre los que seleccionar cuando se configuran fichas de cliente para vincular las transacciones empresariales realizadas para el cliente con la cuenta contable adecuada.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 110;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=CustomerGroup;
                      PromotedCategory=Category4 }
      { 43      ;1   ;Action    ;
                      CaptionML=[ENU=Customer Price Groups;
                                 ESP=Grupos precio cliente];
                      ToolTipML=[ENU=Set up the posting groups to select from when you set up customer cards to link business transactions made for the customer with the appropriate account in the general ledger.;
                                 ESP=Permite configurar los grupos de registro entre los que seleccionar cuando se configuran fichas de cliente para vincular las transacciones empresariales realizadas para el cliente con la cuenta contable adecuada.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 7;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Price;
                      PromotedCategory=Category4 }
      { 54      ;1   ;Action    ;
                      CaptionML=[ENU=Customer Disc. Groups;
                                 ESP=Grupos dto. cliente];
                      ToolTipML=[ENU=Set up discount group codes that you can use as criteria when you define special discounts on a customer, vendor, or item card.;
                                 ESP=Permite configurar los c¢digos de grupos de descuento que pueden utilizarse como criterios al definir descuentos especiales en una ficha de producto, proveedor o cliente.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 512;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Discount;
                      PromotedCategory=Category4 }
      { 53      ;1   ;ActionGroup;
                      CaptionML=[ENU=Payment;
                                 ESP=Pago] }
      { 35      ;2   ;Action    ;
                      CaptionML=[ENU=Payment Registration Setup;
                                 ESP=Configuraci¢n de registro de pago];
                      ToolTipML=[ENU=Set up the payment journal template and the balancing account that is used to post received customer payments. Define how you prefer to process customer payments in the Payment Registration window.;
                                 ESP=Permite configurar la plantilla de diario de pago y la cuenta de contrapartida que se utiliza para registrar los pagos de cliente recibidos. Defina c¢mo prefiere procesar los pagos de cliente en la ventana Registro de pago.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 982;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PaymentJournal;
                      PromotedCategory=Category5 }
      { 51      ;2   ;Action    ;
                      CaptionML=[ENU=Payment Methods;
                                 ESP=Formas pago];
                      ToolTipML=[ENU=Set up the payment methods that you select from the customer card to define how the customer must pay, for example by bank transfer.;
                                 ESP=Permite configurar los m‚todos de pago que pueden seleccionarse en la ficha cliente para definir c¢mo debe pagar el cliente, por ejemplo, mediante transferencia bancaria.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 427;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Payment;
                      PromotedCategory=Category5 }
      { 33      ;2   ;Action    ;
                      CaptionML=[ENU=Payment Terms;
                                 ESP=T‚rminos pago];
                      ToolTipML=[ENU=Set up the payment terms that you select from on customer cards to define when the customer must pay, such as within 14 days.;
                                 ESP=Permite configurar las condiciones de pago que pueden seleccionarse en las fichas cliente para definir cu ndo debe pagar el cliente, como en un plazo de 14 d¡as.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 4;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Payment;
                      PromotedCategory=Category5 }
      { 31      ;2   ;Action    ;
                      CaptionML=[ENU=Finance Charge Terms;
                                 ESP=T‚rminos inter‚s];
                      ToolTipML=[ENU=Set up the finance charge terms that you select from on customer cards to define how to calculate interest in case the customer's payment is late.;
                                 ESP=Permite configurar los t‚rminos de intereses que pueden seleccionarse en las fichas cliente para definir c¢mo calcular el inter‚s si el pago del cliente ha vencido.];
                      ApplicationArea=#Suite;
                      RunObject=Page 6;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=FinChargeMemo;
                      PromotedCategory=Category5 }
      { 29      ;2   ;Action    ;
                      CaptionML=[ENU=Reminder Terms;
                                 ESP=T‚rminos recordatorio];
                      ToolTipML=[ENU=Set up reminder terms that you select from on customer cards to define when and how to remind the customer of late payments.;
                                 ESP=Permite configurar los t‚rminos de recordatorio que pueden seleccionarse en las fichas cliente para definir cu ndo y c¢mo hacer recordar al cliente sobre los pagos vencidos.];
                      ApplicationArea=#Suite;
                      RunObject=Page 431;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=ReminderTerms;
                      PromotedCategory=Category5 }
      { 27      ;2   ;Action    ;
                      CaptionML=[ENU=Rounding Methods;
                                 ESP=M‚todos redondeo];
                      ToolTipML=[ENU=Define how amounts are rounded when you use functions to adjust or suggest item prices or standard costs.;
                                 ESP=Permite definir c¢mo se redondean los importes si se utilizan funciones para ajustar o proponer los precios de los productos o costes est ndar.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 65;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Calculate;
                      PromotedCategory=Category5 }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                CaptionML=[ENU=General;
                           ESP=General] }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to warn about the customer's status when you create a sales order or invoice.;
                           ESP=Especifica si se debe avisar del estado del cliente al generar una factura o un pedido de ventas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Credit Warnings" }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if a warning is displayed when you enter a quantity on a sales document that brings the item's inventory level below zero.;
                           ESP=Especifica si se muestra una advertencia al especificar una cantidad en un documento de venta que ponga el nivel de inventario del producto por debajo de cero.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Stockout Warning" }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if a posted shipment and a posted invoice are automatically created when you post an invoice.;
                           ESP=Especifica si al registrar una factura se crean autom ticamente un env¡o registrado y una factura registrada.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment on Invoice";
                Importance=Additional }

    { 57  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that a posted return receipt and a posted sales credit memo are automatically created when you post a credit memo.;
                           ESP=Especifica que al registrar un abono se crean autom ticamente una recepci¢n de devoluci¢n registrada y un abono de venta registrado.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Return Receipt on Credit Memo";
                Importance=Additional }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU="Specifies if amounts are rounded for sales invoices. Rounding is applied as specified in the Inv. Rounding Precision (LCY) field in the General Ledger Setup window. ";
                           ESP="Especifica si se redondean los importes para las facturas de venta. El redondeo se aplica tal como se especifica en el campo Precisi¢n redondeo fact. (DL) en la ventana Configuraci¢n contabilidad. "];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Invoice Rounding" }

    { 666 ;2   ;Field     ;
                Name=DefaultItemQuantity;
                CaptionML=[ENU=Default Item Quantity;
                           ESP=Cantidad de producto predeterminada];
                ToolTipML=[ENU=Specifies that the Quantity field is set to 1 when you fill in the Item No. field.;
                           ESP=Especifica que el campo Cantidad est  establecido en 1 cuando se rellena el campo N.§ producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Default Item Quantity" }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the system will suggest to create a new item when no item matches the number that you enter in the No. Field on sales lines.;
                           ESP=Especifica si el sistema propondr  la creaci¢n de un producto nuevo cuando no hay ning£n producto que coincide con el n£mero que especifique en el campo de n§. de las l¡neas de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Create Item from Item No." }

    { 41  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the system will suggest to create a new item when no item matches the description that you enter in the Description field on sales lines.;
                           ESP=Especifica si el sistema propondr  la creaci¢n de un producto nuevo cuando no hay ning£n producto que coincide con la descripci¢n que especifica en el campo Descripci¢n de las l¡neas de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Create Item from Description" }

    { 62  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if you want the name on customer cards to be copied to customer ledger entries during posting.;
                           ESP=Especifica si desea que la descripci¢n de las fichas de clientes se copien en los movimientos de clientes durante el registro.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Copy Customer Name to Entries" }

    { 9   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if it is mandatory to enter an external document number in the External Document No. field on a sales header or the External Document No. field on a general journal line.;
                           ESP=Especifica si es obligatorio especificar un n£mero de documento externo en el campo N.§ documento externo de una cabecera de venta o el campo N.§ documento externo de una l¡nea del diario general.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ext. Doc. No. Mandatory";
                Importance=Additional }

    { 44  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether it is allowed to apply customer payments in different currencies. None: All entries involved in one application must be in the same currency. EMU: You can apply entries in euro and one of the old national currencies (for EMU countries/regions) to one another. All: You can apply entries in different currencies to one another. The entries can be in any currency.;
                           ESP=Especifica si se permite aplicar pagos de cliente en divisas diferentes. Ninguno: todos los movimientos de una liquidaci¢n deben tener la misma divisa. UME: puede liquidar movimientos en euros y en una de las antiguas divisas de la UME entre s¡. Todos: puede liquidar movimientos en distintas divisas. Los movimientos pueden estar en cualquier divisa.];
                ApplicationArea=#Suite;
                SourceExpr="Appln. between Currencies" }

    { 1100000;2;Field     ;
                ToolTipML=[ENU=Specifies to post the invoice discount to a separate account.;
                           ESP=Especifica que el descuento en factura se registre en una cuenta independiente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Post Invoice Discount" }

    { 1100002;2;Field     ;
                ToolTipML=[ENU=Specifies to post the line discount to a separate account.;
                           ESP=Especifica que el descuento de l¡nea se registre en una cuenta independiente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Post Line Discount" }

    { 1100004;2;Field     ;
                ToolTipML=[ENU=Specifies to post the payment discount to a separate account.;
                           ESP=Especifica que el descuento por pronto pago se registre en una cuenta independiente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Post Payment Discount" }

    { 65  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the position of your company logo on business letters and documents.;
                           ESP=Especifica la posici¢n del logotipo de la empresa en cartas y documentos comerciales.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Logo Position on Documents";
                Importance=Additional }

    { 39  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the general ledger account that must be used for freight charges.;
                           ESP=Especifica la cuenta de contabilidad general que se debe usar para los cargos de transporte.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Freight G/L Acc. No." }

    { 77  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how to use the Posting Date field on sales documents.;
                           ESP=Especifica c¢mo utilizar el campo Fecha registro en los documentos de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Default Posting Date" }

    { 79  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the default value that is inserted in the Qty. to Ship field on sales order lines and in the Return Qty. to Receive field on sales return order lines.;
                           ESP=Especifica el valor predeterminado que se inserta en el campo Cantidad a enviar en l¡neas de pedido de venta y en el campo Cantidad dev. a recibir en l¡neas de pedido de devoluci¢n de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Default Quantity to Ship";
                Importance=Additional }

    { 36  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to copy comments from blanket sales orders to sales orders.;
                           ESP=Especifica si se van a copiar comentarios de los pedidos de venta abiertos a los pedidos de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Copy Comments Blanket to Order";
                Importance=Additional }

    { 40  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to copy comments from sales orders to sales invoices.;
                           ESP=Especifica si se van a copiar comentarios de los pedidos de venta a las facturas de venta.];
                ApplicationArea=#Comments;
                SourceExpr="Copy Comments Order to Invoice";
                Importance=Additional }

    { 42  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to copy comments from sales orders to shipments.;
                           ESP=Especifica si se van a copiar comentarios de los pedidos de venta a los albaranes.];
                ApplicationArea=#Comments;
                SourceExpr="Copy Comments Order to Shpt.";
                Importance=Additional }

    { 61  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to copy comments from sales return orders to sales credit memos.;
                           ESP=Especifica si se van a copiar comentarios de los pedidos de devoluci¢n de venta a los abonos de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Copy Cmts Ret.Ord. to Cr. Memo";
                Importance=Additional }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that comments are copied from the sales return order to the posted return receipt.;
                           ESP=Especifica que se copian comentarios del pedido de devoluci¢n de ventas a la recepci¢n de devoluci¢n registrada.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Copy Cmts Ret.Ord. to Ret.Rcpt";
                Importance=Additional }

    { 46  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to allow the manual adjustment of VAT amounts in sales documents.;
                           ESP=Especifica si se permite el ajuste manual de los importes de IVA en los documentos de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow VAT Difference" }

    { 22  ;2   ;Field     ;
                CaptionML=[ENU=Calc. Inv. and Pmt. Discount;
                           ESP=Calc. dto. factura y P.P.];
                ToolTipML=[ENU=Specifies if the invoice discount amount is automatically calculated with sales documents. If this check box is selected, then the invoice discount amount is calculated automatically when you do either of the following on a sales document: View statistics, View a test report, Print, Post.;
                           ESP=Especifica si el importe de descuento en factura se calcula autom ticamente con documentos de ventas. Si esta casilla est  activada, el importe de descuento en factura se calcular  autom ticamente al realizar una de las siguientes opciones en un documento de ventas: Ver estad¡sticas, Ver un informe de prueba, Imprimir y Registrar.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Calc. Inv. Discount" }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the invoice discount is calculated according to the VAT identifier that is defined in the VAT posting setup. If you choose not to select this check box, the invoice discount will be calculated based on the invoice total.;
                           ESP=Especifica si el descuento de factura se calcula seg£n el identificador de IVA que est  definido en la configuraci¢n de registro de IVA. Si decide no activar esta casilla, el descuento de factura se calcular  seg£n el total de la factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Calc. Inv. Disc. per VAT ID";
                Visible=FALSE }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a VAT business posting group for customers for whom you want the item price including VAT to apply.;
                           ESP=Especifica un grupo de registro de IVA de negocio para los clientes a los que desea aplicar el precio de producto con el IVA incluido.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Bus. Posting Gr. (Price)" }

    { 59  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that a return transaction cannot be posted unless the Appl.-from Item Entry field on the sales order line specifies an entry.;
                           ESP=Especifica que no se puede registrar una transacci¢n de devoluci¢n sin que el campo Liquid.-de mov. pdto. de la l¡nea del pedido de venta indique un movimiento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Exact Cost Reversing Mandatory";
                Importance=Additional }

    { 1100008;2;Field     ;
                ToolTipML=[ENU=Specifies if the document number correction is required, for the electronic payment to be made.;
                           ESP=Especifica si se requiere una correcci¢n del n£mero de documento para realizar el pago electr¢nico.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Correct. Doc. No. Mandatory" }

    { 71  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you cannot ship or invoice an order that has an unpaid prepayment amount.;
                           ESP=Especifica que no se puede enviar ni facturar un pedido que tenga una cantidad de prepago sin abonar.];
                ApplicationArea=#Prepayments;
                SourceExpr="Check Prepmt. when Posting";
                Importance=Additional }

    { 13  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how often the job must run that automatically updates the status of orders that are pending prepayment.;
                           ESP=Especifica con qu‚ frecuencia el trabajo debe ejecutarse para actualizar autom ticamente el estado de los pedidos de compraventa pendientes de prepago.];
                ApplicationArea=#Prepayments;
                SourceExpr="Prepmt. Auto Update Frequency" }

    { 81  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to automatically archive sales quotes and sales orders when a sales quote/order is deleted.;
                           ESP=Especifica si se archivar n de forma autom tica ofertas y pedidos de venta al eliminar una oferta o un pedido de venta.];
                ApplicationArea=#Advanced;
                SourceExpr="Archive Quotes and Orders";
                Importance=Additional }

    { 1170170004;2;Field  ;
                SourceExpr="Ruta imp. datos terminal" }

    { 37  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if and when posted sales documents can be deleted. If you enter a date, posted sales documents with a posting date on or after this date cannot be deleted.;
                           ESP=Especifica si se pueden eliminar documentos de venta registrados y cu ndo pueden eliminarse. Si en este campo se indica una fecha, los documentos de venta registrados en esta fecha o una posterior no se pueden eliminar.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Document Deletion Before";
                Importance=Additional }

    { 11  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if changes to addresses made on sales documents are copied to the customer card. By default, changes are copied to the customer card.;
                           ESP=Especifica si los cambios de direcciones en los documentos de venta se copian a la ficha cliente. De forma predeterminada, los cambios se copian a la ficha cliente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ignore Updated Addresses" }

    { 7   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that the reservation confirmation message is not shown on sales lines. This is useful to avoid noise when you are processing many lines.;
                           ESP=Especifica que el mensaje de confirmaci¢n de reserva no se muestra en las l¡neas de ventas. Esto es £til para evitar ruido cuando se est n procesando demasiadas l¡neas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Skip Manual Reservation" }

    { 17  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a formula that determines how to calculate the quote expiration date based on the document date.;
                           ESP=Especifica una f¢rmula que determina c¢mo calcular la fecha de vencimiento de la oferta en funci¢n de la fecha de documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Quote Validity Calculation";
                Importance=Additional }

    { 1900309501;1;Group  ;
                CaptionML=[ENU=Dimensions;
                           ESP=Dimensiones] }

    { 63  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the dimension code for customer groups in your analysis report.;
                           ESP=Especifica el c¢digo de dimensi¢n para los grupos de clientes incluidos en el informe de an lisis.];
                ApplicationArea=#Dimensions;
                SourceExpr="Customer Group Dimension Code" }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the dimension code for salespeople in your analysis report;
                           ESP=Especifica el c¢digo de dimensi¢n para los vendedores incluidos en el informe de an lisis.];
                ApplicationArea=#Dimensions;
                SourceExpr="Salesperson Dimension Code" }

    { 1904569201;1;Group  ;
                CaptionML=[ENU=Numbering;
                           ESP=Serie num‚rica];
                GroupType=Group }

    { 85  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to customers.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a los clientes.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Customer Nos." }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to sales quotes.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a las ofertas de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Quote Nos." }

    { 38  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to blanket sales orders.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a los pedidos de venta abiertos.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order Nos." }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to sales orders.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a los pedidos de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Order Nos." }

    { 55  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to new sales return orders.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a los nuevos pedidos de venta.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Return Order Nos." }

    { 75  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to sales invoices.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a las facturas de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Invoice Nos." }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to posted sales invoices.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a las facturas de venta registradas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posted Invoice Nos." }

    { 74  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to sales credit memos.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a los abonos de venta.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Credit Memo Nos." }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to posted sales credit memos.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a los abonos de venta registrados.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posted Credit Memo Nos." }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to posted shipments.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a los env¡os registrados.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posted Shipment Nos." }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to posted return receipts.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a las recepciones de devoluci¢n registradas.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Posted Return Receipt Nos." }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to reminders.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a los recordatorios.];
                ApplicationArea=#Suite;
                SourceExpr="Reminder Nos." }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to issued reminders.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a los recordatorios emitidos.];
                ApplicationArea=#Suite;
                SourceExpr="Issued Reminder Nos." }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to finance charge memos.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a utilizar para asignar n£meros a los documentos de inter‚s.];
                ApplicationArea=#Suite;
                SourceExpr="Fin. Chrg. Memo Nos." }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to issued finance charge memos.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a los documentos de inter‚s emitidos.];
                ApplicationArea=#Suite;
                SourceExpr="Issued Fin. Chrg. M. Nos." }

    { 69  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to posted sales prepayment invoices.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a las facturas de prepago de ventas registradas.];
                ApplicationArea=#Prepayments;
                SourceExpr="Posted Prepmt. Inv. Nos." }

    { 67  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to posted sales prepayment credit memos.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a los abonos prepago de venta registrados.];
                ApplicationArea=#Prepayments;
                SourceExpr="Posted Prepmt. Cr. Memo Nos." }

    { 25  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign numbers to direct-debit mandates.;
                           ESP=Especifica el c¢digo de la serie num‚rica que se va a usar para asignar n£meros a las ¢rdenes de domiciliaci¢n de adeudo directo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Direct Debit Mandate Nos." }

    { 2   ;1   ;Group     ;
                CaptionML=[ENU=Background Posting;
                           ESP=Registro de fondo];
                GroupType=Group }

    { 19  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if you use job queues to post sales documents in the background.;
                           ESP=Especifica si usa colas de proyectos para registrar documentos de venta en segundo plano.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Post with Job Queue" }

    { 15  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if you use job queues to post and print sales documents in the background.;
                           ESP=Especifica si usa colas de proyectos para registrar e imprimir documentos de ventas en segundo plano.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Post & Print with Job Queue" }

    { 5   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the category of the job queue that you want to associate with background posting.;
                           ESP=Especifica el c¢digo para la categor¡a de la cola de proyecto que desea asociar al registro en segundo plano.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Job Queue Category Code" }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if a notification is sent when posting and printing is successfully completed.;
                           ESP=Especifica si se env¡a una notificaci¢n cuando el registro y la impresi¢n se completan correctamente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Notify On Success" }

    { 1170170005;1;Group  ;
                CaptionML=[ENU=Special taxes;
                           ESP=Impuestos especiales];
                GroupType=Group }

    { 1170170006;2;Field  ;
                SourceExpr="Calcular IIEE" }

    { 1170170007;2;Field  ;
                SourceExpr="Registro IIEE" }

    { 1170170008;2;Field  ;
                SourceExpr="Tipo IIEE" }

    { 1170170009;2;Field  ;
                SourceExpr="Calcular IIEE por botellas" }

    { 1170170010;1;Group  ;
                CaptionML=[ENU=Samples;
                           ESP=Muestras];
                GroupType=Group }

    { 1170170011;2;Field  ;
                SourceExpr="Grupo negocio muestras" }

    { 1170170012;2;Field  ;
                SourceExpr="Grupo IVA negocio muestras" }

    { 1170170013;2;Field  ;
                SourceExpr="C¢d. tarifa muestras" }

    { 1170170014;1;Group  ;
                CaptionML=[ENU=Sales concepts;
                           ESP=Conceptos];
                GroupType=Group }

    { 1170170015;2;Field  ;
                SourceExpr="Usar conceptos de cargo";
                OnValidate=BEGIN
                             UsarConceptos := "Usar conceptos de cargo";//VNTES
                           END;
                            }

    { 1170170016;2;Field  ;
                SourceExpr="C¢d. concepto cargo rappell";
                Editable=UsarConceptos }

    { 1170170017;2;Field  ;
                SourceExpr="C¢d. concepto cargo ventas";
                Editable=UsarConceptos }

    { 1170170018;2;Field  ;
                SourceExpr="C¢d. concepto cargo dto. fact.";
                Editable=UsarConceptos }

    { 1170170019;2;Field  ;
                SourceExpr="C¢d. concepto cargo dto. P.P.";
                Editable=UsarConceptos }

    { 1170170020;2;Field  ;
                SourceExpr="C¢d. concepto cargo dto. l¡nea";
                Editable=UsarConceptos }

    { 1170170021;2;Field  ;
                SourceExpr="C¢d. concepto cargo dto. prom.";
                Editable=UsarConceptos }

    { 1170170022;1;Group  ;
                CaptionML=[ENU=Promotions;
                           ESP=Promociones];
                GroupType=Group }

    { 1170170003;2;Field  ;
                SourceExpr="Aviso promoci¢n otras medidas" }

    { 1170170002;2;Field  ;
                SourceExpr="Aviso promoc. cliente gen‚rico" }

    { 1170170001;2;Field  ;
                SourceExpr="Calc. dto. promocional (F9)" }

    { 1170170000;2;Field  ;
                SourceExpr="Registro dto. promocional" }

    { 1904205101;1;Group  ;
                CaptionML=[ENU=Archiving;
                           ESP=Archivado] }

    { 72  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if you want to archive sales quotes when they are deleted.;
                           ESP=Especifica si desea archivar las ofertas de venta cuando se eliminan.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Archive Quotes" }

    { 68  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if deleted sales quotes can be manually archived with the Archived Sales Quotes batch job.;
                           ESP=Especifica si las ofertas de venta eliminadas se pueden archivar manualmente con el proceso Ofertas de venta archivadas.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Batch Archiving Quotes" }

    { 66  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you want to archive sales blanket orders when they are deleted.;
                           ESP=Especifica si desea archivar los pedidos de venta abiertos cuando se eliminan.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Archive Blanket Orders" }

    { 64  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you want to archive sales orders when they are deleted.;
                           ESP=Especifica si desea archivar los pedidos de venta cuando se eliminan.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Archive Orders" }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if you want to archive sales return orders when they are deleted.;
                           ESP=Especifica si desea archivar los pedidos de devoluci¢n de venta cuando se eliminan.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Archive Return Orders" }

    { 49  ;1   ;Group     ;
                CaptionML=[ENU=Dynamics 365 for Sales;
                           ESP=Dynamics 365 for Sales];
                GroupType=Group }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the sales line type that will be used for write-in products in Dynamics 365 for Sales.;
                           ESP=Especifica el tipo de l¡nea de venta que se va a utilizar para productos fuera de cat logo en Dynamics 365 for Sales.];
                ApplicationArea=#Suite;
                SourceExpr="Write-in Product Type" }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item or resource depending on the write-in product type that will be used for Dynamics 365 for Sales.;
                           ESP=Especifica el n£mero del producto o el recurso seg£n el tipo de producto fuera de cat logo que se va a utilizar para Dynamics 365 for Sales.];
                ApplicationArea=#Suite;
                SourceExpr="Write-in Product No." }

    { 1170170024;1;Group  ;
                CaptionML=ESP=BAINES;
                GroupType=Group }

    { 1170170023;2;Field  ;
                SourceExpr="Comisi¢n obligatoria" }

    { 1170170025;2;Field  ;
                SourceExpr="Bloqueo margen m¡nimo ventas" }

    { 1170170026;2;Field  ;
                SourceExpr="Prom. oblig. l¡ns.importe cero" }

    { 1170170027;2;Field  ;
                SourceExpr="Omitir facturar en pedido" }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                Visible=FALSE;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      UsarConceptos@1170170000 : Boolean INDATASET;

    BEGIN
    END.
  }
}

OBJECT Page 508 Blanket Sales Order Subform
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=[ 9:24:39];
    Modified=Yes;
    Version List=NAVW114.03,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Lines;
               ESP=L¡neas];
    MultipleNewLines=Yes;
    LinksAllowed=No;
    SourceTable=Table37;
    DelayedInsert=Yes;
    SourceTableView=WHERE(Document Type=FILTER(Blanket Order));
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnInit=BEGIN
             SalesReceivablesSetup.GET;
             Currency.InitRoundingPrecision;
           END;

    OnOpenPage=BEGIN
                 SetDimensionsVisibility;
               END;

    OnFindRecord=BEGIN
                   DocumentTotals.SalesCheckAndClearTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
                   EXIT(FIND(Which));
                 END;

    OnAfterGetRecord=BEGIN
                       ShowShortcutDimCode(ShortcutDimCode);
                       CLEAR(DocumentTotals);
                     END;

    OnNewRecord=BEGIN
                  InitType;
                  CLEAR(ShortcutDimCode);
                END;

    OnModifyRecord=BEGIN
                     DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
                   END;

    OnDeleteRecord=BEGIN
                     DocumentTotals.SalesDocTotalsNotUpToDate;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           GetTotalSalesHeader;
                           CalculateTotals;
                           UpdateEditableOnRow;
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1907935204;1 ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 ESP=&L¡nea];
                      Image=Line }
      { 1903866504;2 ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 ESP=Disponibilidad prod. por];
                      Image=ItemAvailability }
      { 3       ;3   ;Action    ;
                      CaptionML=[ENU=Event;
                                 ESP=Evento];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 ESP=Permite ver c¢mo el saldo disponible real y previsto de un art¡culo se desarrollar n a lo largo del tiempo seg£n los eventos de oferta y demanda.];
                      ApplicationArea=#Suite;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 1900544904;3 ;Action    ;
                      CaptionML=[ENU=Period;
                                 ESP=Periodo];
                      ToolTipML=[ENU=View the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 ESP=Permite ver la cantidad proyectada del producto a lo largo de los periodos de tiempo, como d¡as, semanas o meses.];
                      ApplicationArea=#Suite;
                      Image=Period;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 1901991304;3 ;Action    ;
                      CaptionML=[ENU=Variant;
                                 ESP=Variante];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 ESP=Permite ver o editar las variantes del art¡culo. En lugar de configurar cada color de un art¡culo como un art¡culo diferente, puede configurar varios colores como variantes del art¡culo.];
                      ApplicationArea=#Planning;
                      Image=ItemVariant;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 1901652204;3 ;Action    ;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 ESP=Almac‚n];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 ESP=Permite ver la cantidad real y proyectada del producto por almac‚n.];
                      ApplicationArea=#Location;
                      Image=Warehouse;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 25      ;3   ;Action    ;
                      CaptionML=[ENU=BOM Level;
                                 ESP=Nivel L.M.];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 ESP=Permite ver las cifras correspondientes a los productos en listas de materiales que indican cu ntas unidades de un producto principal puede producir seg£n la disponibilidad de productos secundarios.];
                      ApplicationArea=#Suite;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 1902740304;2 ;ActionGroup;
                      CaptionML=[ENU=Unposted Lines;
                                 ESP=L¡neas no registradas];
                      Image=Order }
      { 1907075804;3 ;Action    ;
                      CaptionML=[ENU=Orders;
                                 ESP=Pedidos];
                      ToolTipML=[ENU=View related sales orders.;
                                 ESP=Ver pedidos de venta relacionados.];
                      ApplicationArea=#Suite;
                      Image=Document;
                      OnAction=BEGIN
                                 ShowOrders;
                               END;
                                }
      { 1900639404;3 ;Action    ;
                      CaptionML=[ENU=Invoices;
                                 ESP=Facturas];
                      ToolTipML=[ENU=View a list of ongoing sales invoices for the order.;
                                 ESP=Permite ver una lista de facturas de venta en curso para el pedido.];
                      ApplicationArea=#Suite;
                      Image=Invoice;
                      OnAction=BEGIN
                                 ShowInvoices;
                               END;
                                }
      { 1906421304;3 ;Action    ;
                      AccessByPermission=TableData 6660=R;
                      CaptionML=[ENU=Return Orders;
                                 ESP=Devoluciones];
                      ToolTipML=[ENU=Open the list of ongoing return orders.;
                                 ESP=Abre la lista de pedidos de devoluci¢n de venta en curso.];
                      ApplicationArea=#SalesReturnOrder;
                      Image=ReturnOrder;
                      OnAction=BEGIN
                                 ShowReturnOrders;
                               END;
                                }
      { 1900609704;3 ;Action    ;
                      CaptionML=[ENU=Credit Memos;
                                 ESP=Abonos];
                      ToolTipML=[ENU=View a list of ongoing credit memos for the order.;
                                 ESP=Permite ver una lista de abonos en curso para el pedido.];
                      ApplicationArea=#Suite;
                      Image=CreditMemo;
                      OnAction=BEGIN
                                 ShowCreditMemos;
                               END;
                                }
      { 1904974904;2 ;ActionGroup;
                      CaptionML=[ENU=Posted Lines;
                                 ESP=L¡neas registradas];
                      Image=Post }
      { 1904945204;3 ;Action    ;
                      CaptionML=[ENU=Shipments;
                                 ESP=Env¡os];
                      ToolTipML=[ENU=View a list of ongoing sales shipments for the order.;
                                 ESP=Permite ver una lista de albaranes de venta registrados para el pedido.];
                      ApplicationArea=#Suite;
                      Image=Shipment;
                      OnAction=BEGIN
                                 ShowPostedOrders;
                               END;
                                }
      { 1901092104;3 ;Action    ;
                      CaptionML=[ENU=Invoices;
                                 ESP=Facturas];
                      ToolTipML=[ENU=View a list of ongoing sales invoices for the order.;
                                 ESP=Permite ver una lista de facturas de venta en curso para el pedido.];
                      ApplicationArea=#Suite;
                      Image=Invoice;
                      OnAction=BEGIN
                                 ShowPostedInvoices;
                               END;
                                }
      { 1903984904;3 ;Action    ;
                      AccessByPermission=TableData 6660=R;
                      CaptionML=[ENU=Return Receipts;
                                 ESP=Recep. devoluci¢n];
                      ToolTipML=[ENU=View a list of posted return receipts for the order.;
                                 ESP=Permite ver una lista de recepciones de devoluci¢n registradas para el pedido.];
                      ApplicationArea=#Suite;
                      Image=ReturnReceipt;
                      OnAction=BEGIN
                                 ShowPostedReturnReceipts;
                               END;
                                }
      { 1901033504;3 ;Action    ;
                      CaptionML=[ENU=Credit Memos;
                                 ESP=Abonos];
                      ToolTipML=[ENU=View a list of ongoing credit memos for the order.;
                                 ESP=Permite ver una lista de abonos en curso para el pedido.];
                      ApplicationArea=#Suite;
                      Image=CreditMemo;
                      OnAction=BEGIN
                                 ShowPostedCreditMemos;
                               END;
                                }
      { 1900186704;2 ;Action    ;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Image=Dimensions;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 37      ;2   ;Action    ;
                      Name=DocAttach;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Image=Attach;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1000 : Page 1173;
                                 RecRef@1001 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
      { 1900978604;2 ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESP=Co&mentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      Image=ViewComments;
                      OnAction=BEGIN
                                 ShowLineComments;
                               END;
                                }
      { 15      ;2   ;ActionGroup;
                      CaptionML=[ENU=Assemble to Order;
                                 ESP=Ensamblar para pedido];
                      ActionContainerType=NewDocumentItems;
                      Image=AssemblyBOM }
      { 5       ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Assemble-to-Order Lines;
                                 ESP=Ensamblar para l¡neas de pedido];
                      ToolTipML=[ENU=View any linked assembly order lines if the documents represents an assemble-to-order sale.;
                                 ESP=Permite ver todas las l¡neas del pedido de ensamblado vinculado si los documentos representan una venta de tipo ensamblar para pedido.];
                      ApplicationArea=#Assembly;
                      Image=Grid;
                      OnAction=BEGIN
                                 ShowAsmToOrderLines;
                               END;
                                }
      { 13      ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Roll Up &Price;
                                 ESP=Revertir &precio];
                      ToolTipML=[ENU=Update the unit price of the assembly item according to any changes that you have made to the assembly components.;
                                 ESP=Actualice el precio unitario del elemento del ensamblado de acuerdo con los cambios que haya efectuado en los componentes del ensamblado.];
                      ApplicationArea=#Assembly;
                      Image=Restore;
                      OnAction=BEGIN
                                 RollupAsmPrice;
                               END;
                                }
      { 9       ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Roll Up &Cost;
                                 ESP=Distribuir &coste];
                      ToolTipML=[ENU=Update the unit cost of the assembly item according to any changes that you have made to the assembly components.;
                                 ESP=Actualice el coste unitario del elemento de ensamblado de acuerdo con los cambios que haya efectuado en los componentes del ensamblado.];
                      ApplicationArea=#Assembly;
                      Image=CostBudget;
                      OnAction=BEGIN
                                 RollUpAsmCost;
                               END;
                                }
      { 1170170000;2 ;ActionGroup;
                      CaptionML=[ENU=Analysis;
                                 ESP=An lisis];
                      Image=AnalysisView }
      { 1170170001;2 ;Action    ;
                      Name=An lisis;
                      CaptionML=ENU=Analysis;
                      Image=AnalysisView;
                      OnAction=BEGIN
                                 GestAnalisis.T37MostrarAnalisis(Rec); // VNTES
                               END;
                                }
      { 1901994904;2 ;Action    ;
                      Name=DocumentLineTracking;
                      CaptionML=[ENU=Document &Line Tracking;
                                 ESP=Seguimiento de &l¡nea de documento];
                      ToolTipML=[ENU=View related open, posted, or archived documents or document lines.;
                                 ESP=Permite ver documentos abiertos, registrados o archivados relacionados, o las l¡neas de documento.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Navigate;
                      OnAction=BEGIN
                                 ShowDocumentLineTracking;
                               END;
                                }
      { 23      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=F&unciones];
                      Image=Action }
      { 1170170002;2 ;Action    ;
                      Name=Lanzar nuevo an lisis;
                      CaptionML=ENU=Create new analysis;
                      Image=BarChart;
                      OnAction=BEGIN
                                 GestAnalisis.CreaAnalisisDesdeLinVenta(Rec); // VNTES
                               END;
                                }
      { 21      ;2   ;Action    ;
                      AccessByPermission=TableData 7002=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get &Price;
                                 ESP=Traer &precio];
                      ToolTipML=[ENU=Insert the lowest possible price in the Unit Price field according to any special price that you have set up.;
                                 ESP=Inserte el precio m s bajo posible en el campo Precio venta, seg£n el precio especial que haya configurado.];
                      ApplicationArea=#Suite;
                      Image=Price;
                      OnAction=BEGIN
                                 ShowPrices
                               END;
                                }
      { 19      ;2   ;Action    ;
                      AccessByPermission=TableData 7004=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get Li&ne Discount;
                                 ESP=Traer descuento l¡&nea];
                      ToolTipML=[ENU=Insert the best possible discount in the Line Discount field according to any special discounts that you have set up.;
                                 ESP=Inserte el mejor descuento posible en el campo Descuento l¡nea, seg£n el descuento especial que haya configurado.];
                      ApplicationArea=#Suite;
                      Image=LineDiscount;
                      OnAction=BEGIN
                                 ShowLineDisc
                               END;
                                }
      { 17      ;2   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=E&xplode BOM;
                                 ESP=D&esplegar L.M.];
                      ToolTipML=[ENU=Insert new lines for the components on the bill of materials, for example to sell the parent item as a kit. CAUTION: The line for the parent item will be deleted and represented by a description only. To undo, you must delete the component lines and add a line the parent item again.;
                                 ESP=Insertar nuevas l¡neas para los componentes de la lista de materiales, por ejemplo, para vender el producto principal como un kit. ATENCIàN: La l¡nea para el producto principal se eliminar  y quedar  representada tan solo por una descripci¢n. Para deshacerlo, debe eliminar las l¡neas de componente y volver a agregar una l¡nea de producto principal.];
                      ApplicationArea=#Suite;
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
      { 11      ;2   ;Action    ;
                      AccessByPermission=TableData 279=R;
                      CaptionML=[ENU=Insert &Ext. Texts;
                                 ESP=Insertar &textos adicionales];
                      ToolTipML=[ENU=Insert the extended item description that is set up for the item that is being processed on the line.;
                                 ESP=Insertar la descripci¢n de producto ampliada que se configur¢ para el producto que se est  procesando en la l¡nea.];
                      ApplicationArea=#Suite;
                      Image=Text;
                      OnAction=BEGIN
                                 InsertExtendedText(TRUE);
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the line type.;
                           ESP=Especifica el tipo de l¡nea.];
                ApplicationArea=#Suite;
                SourceExpr=Type;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 1170170003;2;Field  ;
                SourceExpr="C¢d. conjunto" }

    { 1170170004;2;Field  ;
                Name=NoConLookupConjunto;
                CaptionML=ENU=No.;
                SourceExpr="No.";
                OnValidate=BEGIN
                             //I-23069
                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             DeltaUpdateTotals;
                             //F-23069
                           END;

                OnLookup=VAR
                           GestionBaines@1170170000 : Codeunit 50005;
                         BEGIN
                           GestionBaines.ConjuntoLookpNoLinVenta(Rec);//23069
                         END;
                          }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the involved entry or record, according to the specified number series.;
                           ESP=Especifica el n£mero de la entrada o el registro relacionado, seg£n la serie num‚rica especificada.];
                ApplicationArea=#Suite;
                SourceExpr="No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cross-referenced item number. If you enter a cross reference between yours and your vendor's or customer's item number, then this number will override the standard item number when you enter the cross-reference number on a sales or purchase document.;
                           ESP=Especifica el n£mero de producto de la referencia cruzada. Si introduce una referencia cruzada entre su n£mero de producto y el del proveedor o el cliente, sobrescribir  el n£mero de producto est ndar cuando introduzca el n£mero de referencia cruzada en un documento de venta o de compra.];
                ApplicationArea=#Suite;
                SourceExpr="Cross-Reference No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             CrossReferenceNoOnAfterValidat;
                             DeltaUpdateTotals;
                           END;

                OnLookup=BEGIN
                           CrossReferenceNoLookUp;
                           InsertExtendedText(FALSE);
                           OnCrossReferenceNoOnLookup(Rec);
                         END;
                          }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESP=Especifica la variante del producto que figura en la l¡nea.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE;
                OnValidate=BEGIN
                             VariantCodeOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT specification of the involved item or resource to link transactions made for this record with the appropriate general ledger account according to the VAT posting setup.;
                           ESP=Indica la especificaci¢n de IVA del elemento o el recurso relacionado para vincular las transacciones realizadas para este registro con la cuenta de contabilidad general correspondiente de acuerdo con la configuraci¢n de registro de IVA.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Prod. Posting Group";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the blanket sales order.;
                           ESP=Especifica una descripci¢n del pedido de venta abierto.];
                ApplicationArea=#Suite;
                SourceExpr=Description;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 36  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the location from where inventory items to the customer on the sales document are to be shipped by default.;
                           ESP=Especifica el almac‚n desde el que se env¡an de forma predeterminada los productos de inventario al cliente en el documento de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Location Code";
                OnValidate=BEGIN
                             LocationCodeOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of the sales order line.;
                           ESP=Especifica la cantidad de la l¡nea de pedido de venta.];
                ApplicationArea=#Suite;
                BlankZero=Yes;
                SourceExpr=Quantity;
                OnValidate=BEGIN
                             QuantityOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 7   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the blanket sales line quantity that you want to supply by assembly.;
                           ESP=Especifica cu ntas unidades de la cantidad de la l¡nea de venta abierta desea suministrar mediante ensamblado.];
                ApplicationArea=#Assembly;
                SourceExpr="Qty. to Assemble to Order";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             CurrPage.UPDATE(TRUE);
                           END;

                OnDrillDown=BEGIN
                              ShowAsmToOrderLines;
                            END;
                             }

    { 42  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the work type code of the service line linked to this entry.;
                           ESP=Especifica el c¢digo de tipo de trabajo de la l¡nea de servicio vinculada a este movimiento.];
                ApplicationArea=#Manufacturing;
                SourceExpr="Work Type Code";
                Visible=FALSE }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           ESP=Especifica c¢mo se mide cada unidad del producto o el recurso, por ejemplo, en piezas u horas. De forma predeterminada, se inserta el valor en el campo Unidad de medida base de la ficha de producto o recurso.];
                ApplicationArea=#Suite;
                SourceExpr="Unit of Measure Code";
                OnValidate=BEGIN
                             UnitofMeasureCodeOnAfterValida;
                             DeltaUpdateTotals;
                           END;
                            }

    { 46  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the name of the item or resource's unit of measure, such as piece or hour.;
                           ESP=Especifica el nombre de la unidad de medida del producto o recurso, como la unidad o la hora.];
                ApplicationArea=#Suite;
                SourceExpr="Unit of Measure";
                Visible=FALSE }

    { 38  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cost, in LCY, of one unit of the item or resource on the line.;
                           ESP=Especifica el coste, en DL, de una unidad del producto o recurso en la l¡nea.];
                ApplicationArea=#Suite;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE }

    { 30  ;2   ;Field     ;
                CaptionML=[ENU=Sale Price Exists;
                           ESP=Existe precio venta];
                ToolTipML=[ENU=Specifies that there is a specific price for this customer. The sales prices can be seen in the Sales Prices window.;
                           ESP=Especifica que para este cliente existe un precio espec¡fico. Los precios de venta pueden verse en la ventana Precios ventas.];
                ApplicationArea=#Suite;
                SourceExpr=PriceExists;
                Visible=FALSE;
                Editable=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the price of one unit of the item or resource. You can enter a price manually or have it entered according to the Price/Profit Calculation field on the related card.;
                           ESP=Especifica el precio de una unidad del producto o recurso. Puede introducir un precio manualmente o hacer que se introduzca bas ndose en el campo C lculo precio/bf§ bruto en la ficha relacionada.];
                ApplicationArea=#Suite;
                BlankZero=Yes;
                SourceExpr="Unit Price";
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount percentage that is granted for the item on the line.;
                           ESP=Especifica el porcentaje de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Suite;
                BlankZero=Yes;
                SourceExpr="Line Discount %";
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount, excluding any invoice discount amount, that must be paid for products on the line.;
                           ESP=Especifica el importe neto, menos cualquier importe de descuento en factura, que se debe pagar por los productos de la l¡nea.];
                ApplicationArea=#Suite;
                BlankZero=Yes;
                SourceExpr="Line Amount";
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 40  ;2   ;Field     ;
                CaptionML=[ENU=Sales Line Disc. Exists;
                           ESP=Existe dto. l¡nea venta];
                ToolTipML=[ENU=Specifies that there is a specific discount for this customer. The sales line discounts can be seen in the Sales Line Discounts window.;
                           ESP=Especifica que para este cliente existe un descuento espec¡fico. Los descuentos de l¡nea de venta pueden verse en la ventana Descuentos l¡nea ventas.];
                ApplicationArea=#Suite;
                SourceExpr=LineDiscExists;
                Visible=FALSE;
                Editable=FALSE }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount amount that is granted for the item on the line.;
                           ESP=Especifica la cantidad de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Suite;
                SourceExpr="Line Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the invoice line is included when the invoice discount is calculated.;
                           ESP=Especifica si la l¡nea de factura se incluye cuando se calcula el descuento en la factura.];
                ApplicationArea=#Suite;
                SourceExpr="Allow Invoice Disc.";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of items that remain to be shipped.;
                           ESP=Especifica la cantidad de los productos que queda por enviar.];
                ApplicationArea=#Suite;
                BlankZero=Yes;
                SourceExpr="Qty. to Ship" }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been posted as shipped.;
                           ESP=Permite especificar cu ntas unidades del producto que figura en la l¡nea se han registrado como enviadas.];
                ApplicationArea=#Suite;
                BlankZero=Yes;
                SourceExpr="Quantity Shipped" }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been posted as invoiced.;
                           ESP=Especifica cu ntas unidades del producto que figura en la l¡nea se han registrado como facturadas.];
                ApplicationArea=#Suite;
                BlankZero=Yes;
                SourceExpr="Quantity Invoiced" }

    { 90  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when items on the document are shipped or were shipped. A shipment date is usually calculated from a requested delivery date plus lead time.;
                           ESP=Especifica cu ndo se van a enviar o se han enviado los productos del documento. Se calcula normalmente una fecha de env¡o con la fecha de entrega solicitada y el plazo de seguridad.];
                ApplicationArea=#Suite;
                SourceExpr="Shipment Date" }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Visible=DimVisible1 }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                Visible=DimVisible2 }

    { 300 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[3];
                CaptionClass='1,2,3';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(3),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible3;
                OnValidate=BEGIN
                             ValidateShortcutDimension(3);
                           END;
                            }

    { 302 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[4];
                CaptionClass='1,2,4';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(4),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible4;
                OnValidate=BEGIN
                             ValidateShortcutDimension(4);
                           END;
                            }

    { 304 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[5];
                CaptionClass='1,2,5';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(5),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible5;
                OnValidate=BEGIN
                             ValidateShortcutDimension(5);
                           END;
                            }

    { 306 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[6];
                CaptionClass='1,2,6';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(6),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible6;
                OnValidate=BEGIN
                             ValidateShortcutDimension(6);
                           END;
                            }

    { 308 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[7];
                CaptionClass='1,2,7';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(7),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible7;
                OnValidate=BEGIN
                             ValidateShortcutDimension(7);
                           END;
                            }

    { 310 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[8];
                CaptionClass='1,2,8';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(8),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible8;
                OnValidate=BEGIN
                             ValidateShortcutDimension(8);
                           END;
                            }

    { 53  ;1   ;Group     ;
                GroupType=Group }

    { 49  ;2   ;Group     ;
                GroupType=Group }

    { 27  ;3   ;Field     ;
                Name=SubtotalExclVAT;
                CaptionML=[ENU=Subtotal Excl. VAT;
                           ESP=Subtotal IVA excl.];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document.;
                           ESP=Especifica la suma del valor del campo "Importe l¡nea excl. IVA" en todas las l¡neas del documento.];
                ApplicationArea=#Suite;
                SourceExpr=TotalSalesLine."Line Amount";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalLineAmountWithVATAndCurrencyCaption(Currency.Code,TotalSalesHeader."Prices Including VAT");
                Editable=FALSE }

    { 48  ;3   ;Field     ;
                Name=Invoice Discount Amount;
                CaptionML=[ENU=Invoice Discount Amount;
                           ESP=Importe descuento factura];
                ToolTipML=[ENU=Specifies a discount amount that is deducted from the value in the Total Incl. VAT field.;
                           ESP=Especifica un importe de descuento que se deduce del valor del campo Total IVA incl.];
                ApplicationArea=#Suite;
                SourceExpr=InvoiceDiscountAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetInvoiceDiscAmountWithVATAndCurrencyCaption(FIELDCAPTION("Inv. Discount Amount"),Currency.Code);
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 47  ;3   ;Field     ;
                Name=Invoice Disc. Pct.;
                CaptionML=[ENU=Invoice Discount %;
                           ESP=% descuento en factura];
                ToolTipML=[ENU=Specifies a discount percentage that is granted if criteria that you have set up for the customer are met.;
                           ESP=Especifica un porcentaje de descuento que se concede si se cumplen los criterios que ha configurado para el cliente.];
                ApplicationArea=#Suite;
                DecimalPlaces=0:2;
                SourceExpr=InvoiceDiscountPct;
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 35  ;2   ;Group     ;
                GroupType=Group }

    { 33  ;3   ;Field     ;
                Name=Total Amount Excl. VAT;
                DrillDown=No;
                CaptionML=[ENU=Total Amount Excl. VAT;
                           ESP=Importe total excl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe l¡n. IVA exc. en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento factura.];
                ApplicationArea=#Suite;
                SourceExpr=TotalSalesLine.Amount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalExclVATCaption(Currency.Code);
                Editable=FALSE }

    { 31  ;3   ;Field     ;
                Name=Total VAT Amount;
                CaptionML=[ENU=Total VAT;
                           ESP=IVA total];
                ToolTipML=[ENU=Specifies the sum of VAT amounts on all lines in the document.;
                           ESP=Especifica la suma de los importes de IVA en todas las l¡neas del documento.];
                ApplicationArea=#Suite;
                SourceExpr=VATAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalVATCaption(Currency.Code);
                Editable=FALSE }

    { 29  ;3   ;Field     ;
                Name=Total Amount Incl. VAT;
                CaptionML=[ENU=Total Amount Incl. VAT;
                           ESP=Importe total incl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Incl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe l¡n. IVA inc. en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento factura.];
                ApplicationArea=#Suite;
                SourceExpr=TotalSalesLine."Amount Including VAT";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalInclVATCaption(Currency.Code);
                Editable=FALSE }

  }
  CODE
  {
    VAR
      CurrentSalesLine@1005 : Record 37;
      SalesLine@1001 : Record 37;
      GestAnalisis@1170170000 : Codeunit 7014480;
      TotalSalesHeader@1014 : Record 36;
      TotalSalesLine@1013 : Record 37;
      SalesHeader@1000 : Record 36;
      Currency@1007 : Record 4;
      SalesReceivablesSetup@1026 : Record 311;
      TransferExtendedText@1002 : Codeunit 378;
      SalesPriceCalcMgt@1004 : Codeunit 7000;
      ItemAvailFormsMgt@1006 : Codeunit 353;
      SalesCalcDiscountByType@1017 : Codeunit 56;
      DocumentTotals@1016 : Codeunit 57;
      VATAmount@1015 : Decimal;
      InvoiceDiscountAmount@1010 : Decimal;
      InvoiceDiscountPct@1009 : Decimal;
      AmountWithDiscountAllowed@1011 : Decimal;
      ShortcutDimCode@1003 : ARRAY [8] OF Code[20];
      InvDiscAmountEditable@1012 : Boolean;
      DimVisible1@1024 : Boolean;
      DimVisible2@1023 : Boolean;
      DimVisible3@1022 : Boolean;
      DimVisible4@1021 : Boolean;
      DimVisible5@1020 : Boolean;
      DimVisible6@1019 : Boolean;
      DimVisible7@1018 : Boolean;
      DimVisible8@1008 : Boolean;
      UpdateInvDiscountQst@1025 : TextConst 'ENU=One or more lines have been invoiced. The discount distributed to invoiced lines will not be taken into account.\\Do you want to update the invoice discount?;ESP=Se han facturado una o varias l¡neas. No se tendr  en cuenta el descuento distribuido entre las l¡neas facturadas.\\¨Desea actualizar el descuento en factura?';

    [External]
    PROCEDURE ApproveCalcInvDisc@6();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Disc. (Yes/No)",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ValidateInvoiceDiscountAmount@30();
    VAR
      SalesHeader@1000 : Record 36;
      ConfirmManagement@1001 : Codeunit 27;
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      IF SalesHeader.InvoicedLineExists THEN
        IF NOT ConfirmManagement.ConfirmProcess(UpdateInvDiscountQst,TRUE) THEN
          EXIT;

      SalesCalcDiscountByType.ApplyInvDiscBasedOnAmt(InvoiceDiscountAmount,SalesHeader);
      DocumentTotals.SalesDocTotalsNotUpToDate;
      CurrPage.UPDATE(FALSE);
    END;

    LOCAL PROCEDURE ExplodeBOM@3();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Explode BOM",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    [External]
    PROCEDURE InsertExtendedText@5(Unconditionally@1000 : Boolean);
    BEGIN
      OnBeforeInsertExtendedText(Rec);
      IF TransferExtendedText.SalesCheckIfAnyExtText(Rec,Unconditionally) THEN BEGIN
        CurrPage.SAVERECORD;
        COMMIT;
        TransferExtendedText.InsertSalesExtText(Rec);
      END;
      IF TransferExtendedText.MakeUpdate THEN
        UpdateForm(TRUE);
    END;

    [External]
    PROCEDURE UpdateForm@12(SetSaveRecord@1000 : Boolean);
    BEGIN
      CurrPage.UPDATE(SetSaveRecord);
    END;

    LOCAL PROCEDURE GetTotalSalesHeader@21();
    BEGIN
      DocumentTotals.GetTotalSalesHeaderAndCurrency(Rec,TotalSalesHeader,Currency);
    END;

    LOCAL PROCEDURE CalculateTotals@28();
    BEGIN
      DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
      DocumentTotals.CalculateSalesSubPageTotals(TotalSalesHeader,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      DocumentTotals.RefreshSalesLine(Rec);
    END;

    LOCAL PROCEDURE DeltaUpdateTotals@1();
    BEGIN
      DocumentTotals.SalesDeltaUpdateTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      CurrPage.SAVERECORD;
      SendLineInvoiceDiscountResetNotification;
    END;

    LOCAL PROCEDURE UpdateEditableOnRow@8();
    BEGIN
      InvDiscAmountEditable := CurrPage.EDITABLE AND NOT SalesReceivablesSetup."Calc. Inv. Discount";
    END;

    LOCAL PROCEDURE ShowPrices@15();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLinePrice(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE ShowLineDisc@16();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLineLineDisc(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE ShowOrders@2();
    BEGIN
      CurrentSalesLine := Rec;
      SalesLine.RESET;
      SalesLine.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
      SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
      SalesLine.SETRANGE("Blanket Order No.",CurrentSalesLine."Document No.");
      SalesLine.SETRANGE("Blanket Order Line No.",CurrentSalesLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Sales Lines",SalesLine);
    END;

    LOCAL PROCEDURE ShowInvoices@4();
    BEGIN
      CurrentSalesLine := Rec;
      SalesLine.RESET;
      SalesLine.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
      SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Invoice);
      SalesLine.SETRANGE("Blanket Order No.",CurrentSalesLine."Document No.");
      SalesLine.SETRANGE("Blanket Order Line No.",CurrentSalesLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Sales Lines",SalesLine);
    END;

    LOCAL PROCEDURE ShowReturnOrders@9();
    BEGIN
      CurrentSalesLine := Rec;
      SalesLine.RESET;
      SalesLine.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
      SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::"Return Order");
      SalesLine.SETRANGE("Blanket Order No.",CurrentSalesLine."Document No.");
      SalesLine.SETRANGE("Blanket Order Line No.",CurrentSalesLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Sales Lines",SalesLine);
    END;

    LOCAL PROCEDURE ShowCreditMemos@10();
    BEGIN
      CurrentSalesLine := Rec;
      SalesLine.RESET;
      SalesLine.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
      SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::"Credit Memo");
      SalesLine.SETRANGE("Blanket Order No.",CurrentSalesLine."Document No.");
      SalesLine.SETRANGE("Blanket Order Line No.",CurrentSalesLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Sales Lines",SalesLine);
    END;

    LOCAL PROCEDURE ShowPostedOrders@17();
    VAR
      SaleShptLine@1000 : Record 111;
    BEGIN
      CurrentSalesLine := Rec;
      SaleShptLine.RESET;
      SaleShptLine.SETCURRENTKEY("Blanket Order No.","Blanket Order Line No.");
      SaleShptLine.SETRANGE("Blanket Order No.",CurrentSalesLine."Document No.");
      SaleShptLine.SETRANGE("Blanket Order Line No.",CurrentSalesLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Posted Sales Shipment Lines",SaleShptLine);
    END;

    LOCAL PROCEDURE ShowPostedInvoices@14();
    VAR
      SalesInvLine@1000 : Record 113;
    BEGIN
      CurrentSalesLine := Rec;
      SalesInvLine.RESET;
      SalesInvLine.SETCURRENTKEY("Blanket Order No.","Blanket Order Line No.");
      SalesInvLine.SETRANGE("Blanket Order No.",CurrentSalesLine."Document No.");
      SalesInvLine.SETRANGE("Blanket Order Line No.",CurrentSalesLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Posted Sales Invoice Lines",SalesInvLine);
    END;

    LOCAL PROCEDURE ShowPostedReturnReceipts@13();
    VAR
      ReturnRcptLine@1000 : Record 6661;
    BEGIN
      CurrentSalesLine := Rec;
      ReturnRcptLine.RESET;
      ReturnRcptLine.SETCURRENTKEY("Blanket Order No.","Blanket Order Line No.");
      ReturnRcptLine.SETRANGE("Blanket Order No.",CurrentSalesLine."Document No.");
      ReturnRcptLine.SETRANGE("Blanket Order Line No.",CurrentSalesLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Posted Return Receipt Lines",ReturnRcptLine);
    END;

    LOCAL PROCEDURE ShowPostedCreditMemos@11();
    VAR
      SalesCrMemoLine@1000 : Record 115;
    BEGIN
      CurrentSalesLine := Rec;
      SalesCrMemoLine.RESET;
      SalesCrMemoLine.SETCURRENTKEY("Blanket Order No.","Blanket Order Line No.");
      SalesCrMemoLine.SETRANGE("Blanket Order No.",CurrentSalesLine."Document No.");
      SalesCrMemoLine.SETRANGE("Blanket Order Line No.",CurrentSalesLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Posted Sales Credit Memo Lines",SalesCrMemoLine);
    END;

    LOCAL PROCEDURE NoOnAfterValidate@19066594();
    BEGIN
      InsertExtendedText(FALSE);

      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE LocationCodeOnAfterValidate@20();
    BEGIN
      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE VariantCodeOnAfterValidate@19();
    BEGIN
      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE CrossReferenceNoOnAfterValidat@19048248();
    BEGIN
      InsertExtendedText(FALSE);
    END;

    LOCAL PROCEDURE QuantityOnAfterValidate@19032465();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;

      IF (Type = Type::Item) AND
         (Quantity <> xRec.Quantity)
      THEN
        CurrPage.UPDATE(TRUE);
    END;

    LOCAL PROCEDURE UnitofMeasureCodeOnAfterValida@19057939();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
    END;

    LOCAL PROCEDURE SaveAndAutoAsmToOrder@23();
    BEGIN
      IF (Type = Type::Item) AND IsAsmToOrderRequired THEN BEGIN
        CurrPage.SAVERECORD;
        AutoAsmToOrder;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    [External]
    PROCEDURE ShowDocumentLineTracking@24();
    VAR
      DocumentLineTracking@1000 : Page 6560;
    BEGIN
      CLEAR(DocumentLineTracking);
      DocumentLineTracking.SetDoc(2,"Document No.","Line No.","Blanket Order No.","Blanket Order Line No.",'',0);
      DocumentLineTracking.RUNMODAL;
    END;

    LOCAL PROCEDURE SetDimensionsVisibility@22();
    VAR
      DimMgt@1000 : Codeunit 408;
    BEGIN
      DimVisible1 := FALSE;
      DimVisible2 := FALSE;
      DimVisible3 := FALSE;
      DimVisible4 := FALSE;
      DimVisible5 := FALSE;
      DimVisible6 := FALSE;
      DimVisible7 := FALSE;
      DimVisible8 := FALSE;

      DimMgt.UseShortcutDims(
        DimVisible1,DimVisible2,DimVisible3,DimVisible4,DimVisible5,DimVisible6,DimVisible7,DimVisible8);

      CLEAR(DimMgt);
    END;

    LOCAL PROCEDURE ValidateShortcutDimension@25(DimIndex@1000 : Integer);
    VAR
      AssembleToOrderLink@1001 : Record 904;
    BEGIN
      ValidateShortcutDimCode(DimIndex,ShortcutDimCode[DimIndex]);
      AssembleToOrderLink.UpdateAsmDimFromSalesLine(Rec);

      OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,DimIndex);
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateShortcutDimCode@27(VAR SalesLine@1000 : Record 37;VAR ShortcutDimCode@1001 : ARRAY [8] OF Code[20];DimIndex@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInsertExtendedText@18(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCrossReferenceNoOnLookup@7(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    BEGIN
    END.
  }
}

OBJECT Page 6631 Sales Return Order Subform
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=[ 9:25:09];
    Modified=Yes;
    Version List=NAVW114.04,VNTES14.00.00,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Lines;
               ESP=L¡neas];
    MultipleNewLines=Yes;
    LinksAllowed=No;
    SourceTable=Table37;
    DelayedInsert=Yes;
    SourceTableView=WHERE(Document Type=FILTER(Return Order));
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnInit=VAR
             ApplicationAreaMgmtFacade@1000 : Codeunit 9179;
           BEGIN
             SalesSetup.GET;
             Currency.InitRoundingPrecision;
             TempOptionLookupBuffer.FillBuffer(TempOptionLookupBuffer."Lookup Type"::Sales);
             IsFoundation := ApplicationAreaMgmtFacade.IsFoundationEnabled;
           END;

    OnOpenPage=VAR
                 Location@1000 : Record 14;
               BEGIN
                 IF Location.READPERMISSION THEN
                   LocationCodeVisible := NOT Location.ISEMPTY;

                 SetDimensionsVisibility;
               END;

    OnFindRecord=BEGIN
                   DocumentTotals.SalesCheckAndClearTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
                   EXIT(FIND(Which));
                 END;

    OnAfterGetRecord=BEGIN
                       ShowShortcutDimCode(ShortcutDimCode);
                       UpdateTypeText;
                       SetItemChargeFieldsStyle;
                     END;

    OnNewRecord=BEGIN
                  InitType;

                  // Default to Item for the first line and to previous line type for the others
                  IF ApplicationAreaMgmtFacade.IsFoundationEnabled THEN
                    IF xRec."Document No." = '' THEN
                      Type := Type::Item;
                  CLEAR(ShortcutDimCode);
                  UpdateTypeText;
                END;

    OnModifyRecord=BEGIN
                     DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
                   END;

    OnDeleteRecord=VAR
                     ReserveSalesLine@1000 : Codeunit 99000832;
                   BEGIN
                     IF (Quantity <> 0) AND ItemExists("No.") THEN BEGIN
                       COMMIT;
                       IF NOT ReserveSalesLine.DeleteLineConfirm(Rec) THEN
                         EXIT(FALSE);
                       ReserveSalesLine.DeleteLine(Rec);
                     END;
                     DocumentTotals.SalesDocTotalsNotUpToDate;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           GetTotalSalesHeader;
                           CalculateTotals;
                           SetLocationCodeMandatory;
                           UpdateEditableOnRow;
                           UpdateTypeText;
                           SetItemChargeFieldsStyle;
                           UpdateCurrency;
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1906587504;1 ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 1901991504;2 ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=E&xplode BOM;
                                 ESP=D&esplegar L.M.];
                      ToolTipML=[ENU=Insert new lines for the components on the bill of materials, for example to sell the parent item as a kit. CAUTION: The line for the parent item will be deleted and represented by a description only. To undo, you must delete the component lines and add a line the parent item again.;
                                 ESP=Insertar nuevas l¡neas para los componentes de la lista de materiales, por ejemplo, para vender el producto principal como un kit. ATENCIàN: La l¡nea para el producto principal se eliminar  y quedar  representada tan solo por una descripci¢n. Para deshacerlo, debe eliminar las l¡neas de componente y volver a agregar una l¡nea de producto principal.];
                      ApplicationArea=#Suite;
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
      { 1901991804;2 ;Action    ;
                      AccessByPermission=TableData 279=R;
                      CaptionML=[ENU=Insert &Ext. Texts;
                                 ESP=Insertar t&extos adicionales];
                      ToolTipML=[ENU=Insert the extended item description that is set up for the item that is being processed on the line.;
                                 ESP=Insertar la descripci¢n de producto ampliada que se configur¢ para el producto que se est  procesando en la l¡nea.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Text;
                      OnAction=BEGIN
                                 InsertExtendedText(TRUE);
                               END;
                                }
      { 1902085804;2 ;Action    ;
                      Name=Reserve;
                      CaptionML=[ENU=&Reserve;
                                 ESP=&Reservar];
                      ToolTipML=[ENU=Reserve the quantity that is required on the document line that you opened this window for.;
                                 ESP=Reservar la cantidad necesaria en la l¡nea de documento para la que abri¢ esta ventana.];
                      ApplicationArea=#Reservation;
                      Image=Reserve;
                      OnAction=BEGIN
                                 PageShowReservation;
                               END;
                                }
      { 1906421304;2 ;Action    ;
                      CaptionML=[ENU=Order &Tracking;
                                 ESP=Seguimien&to pedido];
                      ToolTipML=[ENU=Tracks the connection of a supply to its corresponding demand. This can help you find the original demand that created a specific production order or purchase order.;
                                 ESP=Realiza un seguimiento de la conexi¢n de una oferta hasta su demanda correspondiente. Esto puede ayudarle a encontrar la demanda original que cre¢ un pedido de producci¢n o un pedido de compra determinados.];
                      ApplicationArea=#ItemTracking;
                      Image=OrderTracking;
                      OnAction=BEGIN
                                 ShowTracking;
                               END;
                                }
      { 1170170002;2 ;Action    ;
                      CaptionML=[ENU=Create new analysis;
                                 ESP=Lanzar nuevo an lisis];
                      Image=BarChart;
                      OnAction=BEGIN
                                 GestAnalisis.CreaAnalisisDesdeLinVenta(Rec); // VNTES
                               END;
                                }
      { 1907935204;1 ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 ESP=&L¡nea];
                      Image=Line }
      { 1907981204;2 ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 ESP=Disponibilidad prod. por];
                      Image=ItemAvailability }
      { 5       ;3   ;Action    ;
                      CaptionML=[ENU=Event;
                                 ESP=Evento];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 ESP=Permite ver c¢mo el saldo disponible real y previsto de un art¡culo se desarrollar  a lo largo del tiempo seg£n la oferta y la demanda.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 1903587104;3 ;Action    ;
                      CaptionML=[ENU=Period;
                                 ESP=Periodo];
                      ToolTipML=[ENU=Show the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 ESP=Muestra la cantidad proyectada del producto a lo largo de los periodos de tiempo, como d¡as, semanas o meses.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Period;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 1903193004;3 ;Action    ;
                      CaptionML=[ENU=Variant;
                                 ESP=Variante];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 ESP=Permite ver o editar las variantes del art¡culo. En lugar de configurar cada color de un art¡culo como un art¡culo diferente, puede configurar varios colores como variantes del art¡culo.];
                      ApplicationArea=#Planning;
                      Image=ItemVariant;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 1901743104;3 ;Action    ;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 ESP=Almac‚n];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 ESP=Permite ver la cantidad real y proyectada del producto por almac‚n.];
                      ApplicationArea=#Location;
                      Image=Warehouse;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 3       ;3   ;Action    ;
                      CaptionML=[ENU=BOM Level;
                                 ESP=Nivel L.M.];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 ESP=Permite ver las cifras correspondientes a los productos en listas de materiales que indican cu ntas unidades de un producto principal puede producir seg£n la disponibilidad de productos secundarios.];
                      ApplicationArea=#Assembly;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 1902740304;2 ;Action    ;
                      Name=Dimensions;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESP=Dimensiones];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESP=Permite ver o editar dimensiones, como el  rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.];
                      ApplicationArea=#Dimensions;
                      Image=Dimensions;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 1900525904;2 ;Action    ;
                      Name=Comments;
                      CaptionML=[ENU=Co&mments;
                                 ESP=Co&mentarios];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESP=Permite ver o agregar comentarios para el registro.];
                      ApplicationArea=#Comments;
                      Image=ViewComments;
                      OnAction=BEGIN
                                 ShowLineComments;
                               END;
                                }
      { 1907184504;2 ;Action    ;
                      AccessByPermission=TableData 5800=R;
                      CaptionML=[ENU=Item Charge &Assignment;
                                 ESP=&Asignaci¢n cargos prod.];
                      ToolTipML=[ENU=Assign additional direct costs, for example for freight, to the item on the line.;
                                 ESP=Asignar costes directos adicionales, por ejemplo para flete, al art¡culo en la l¡nea.];
                      ApplicationArea=#ItemCharges;
                      Image=ItemCosts;
                      OnAction=BEGIN
                                 ItemChargeAssgnt;
                                 SetItemChargeFieldsStyle;
                               END;
                                }
      { 1905987604;2 ;Action    ;
                      Name=ItemTrackingLines;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=Item &Tracking Lines;
                                 ESP=L¡ns. se&guim. prod.];
                      ToolTipML=[ENU=View or edit serial numbers and lot numbers that are assigned to the item on the document or journal line.;
                                 ESP=Permite ver o editar n£meros de serie y n£meros de lote asignados al producto en el documento o la l¡nea del diario.];
                      ApplicationArea=#ItemTracking;
                      Image=ItemTrackingLines;
                      OnAction=BEGIN
                                 OpenItemTrackingLines;
                               END;
                                }
      { 1905483604;2 ;Action    ;
                      Name=DocumentLineTracking;
                      CaptionML=[ENU=Document &Line Tracking;
                                 ESP=Seguimiento de &l¡nea de documento];
                      ToolTipML=[ENU=View related open, posted, or archived documents or document lines.;
                                 ESP=Permite ver documentos abiertos, registrados o archivados relacionados, o las l¡neas de documento.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Navigate;
                      OnAction=BEGIN
                                 ShowDocumentLineTracking;
                               END;
                                }
      { 19      ;2   ;Action    ;
                      Name=DeferralSchedule;
                      CaptionML=[ENU=Deferral Schedule;
                                 ESP=Previsi¢n fraccionamiento];
                      ToolTipML=[ENU=View or edit the deferral schedule that governs how revenue made with this sales document is deferred to different accounting periods when the document is posted.;
                                 ESP=Permite ver o editar la previsi¢n de fraccionamiento que administra el modo de fraccionar los ingresos realizados con este documento de venta en per¡odos contables diferentes cuando se registra el documento.];
                      ApplicationArea=#Suite;
                      Enabled="Deferral Code" <> '';
                      Image=PaymentPeriod;
                      OnAction=VAR
                                 DeferralUtilities@1000 : Codeunit 1720;
                               BEGIN
                                 IF ShowDeferrals("Posting Date","Currency Code") THEN BEGIN
                                   "Returns Deferral Start Date" :=
                                     DeferralUtilities.GetDeferralStartDate(DeferralUtilities.GetSalesDeferralDocType,"Document Type",
                                       "Document No.","Line No.","Deferral Code","Posting Date");
                                   CurrPage.SAVERECORD;
                                 END;
                               END;
                                }
      { 1170170000;2 ;ActionGroup;
                      CaptionML=[ENU=Analysis;
                                 ESP=An lisis];
                      Image=AnalysisView }
      { 1170170001;3 ;Action    ;
                      CaptionML=[ENU=Analysis;
                                 ESP=An lisis];
                      Image=AnalysisView;
                      OnAction=BEGIN
                                 GestAnalisis.T37MostrarAnalisis(Rec); // VNTES
                               END;
                                }
      { 23      ;2   ;Action    ;
                      Name=DocAttach;
                      CaptionML=[ENU=Attachments;
                                 ESP=Datos adjuntos];
                      ToolTipML=[ENU=Add a file as an attachment. You can attach images as well as documents.;
                                 ESP=Permite agregar un archivo como adjunto. Puede adjuntar im genes y documentos.];
                      ApplicationArea=#All;
                      Image=Attach;
                      OnAction=VAR
                                 DocumentAttachmentDetails@1000 : Page 1173;
                                 RecRef@1001 : RecordRef;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentAttachmentDetails.OpenForRecRef(RecRef);
                                 DocumentAttachmentDetails.RUNMODAL;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of entity that will be posted for this sales line, such as Item, Resource, or G/L Account.;
                           ESP=Especifica el tipo de entidad que se registrar  para esta l¡nea de venta, como Producto, Recurso o Cuenta C/G.];
                ApplicationArea=#Advanced;
                SourceExpr=Type;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             SetLocationCodeMandatory;

                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 39  ;2   ;Field     ;
                Name=FilteredTypeField;
                CaptionML=[ENU=Type;
                           ESP=Tipo];
                ToolTipML=[ENU="Specifies the type of transaction that will be posted with the document line. If you select Comment, then you can enter any text in the Description field, such as a message to a customer. ";
                           ESP="Especifica el tipo de transacci¢n que se registrar  con la l¡nea del documento. Si selecciona Comentario, puede escribir cualquier texto en el campo Descripci¢n; por ejemplo, un mensaje a un cliente. "];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TypeAsText;
                TableRelation="Option Lookup Buffer"."Option Caption" WHERE (Lookup Type=CONST(Sales));
                Visible=IsFoundation;
                Editable=CurrPageIsEditable;
                LookupPageID=Option Lookup List;
                OnValidate=BEGIN
                             TempOptionLookupBuffer.SetCurrentType(Type);
                             IF TempOptionLookupBuffer.AutoCompleteOption(TypeAsText,TempOptionLookupBuffer."Lookup Type"::Sales) THEN
                               VALIDATE(Type,TempOptionLookupBuffer.ID);
                             TempOptionLookupBuffer.ValidateOption(TypeAsText);
                             UpdateEditableOnRow;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;
                            }

    { 1170170004;2;Field  ;
                SourceExpr="C¢d. conjunto" }

    { 1170170003;2;Field  ;
                Name=NoConLookupConjunto;
                CaptionML=ENU=No.;
                SourceExpr="No.";
                OnValidate=BEGIN
                             //I-23069
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             ShowShortcutDimCode(ShortcutDimCode);

                             QuantityOnAfterValidate;
                             UpdateTypeText;
                             DeltaUpdateTotals;

                             //F-23069
                           END;

                OnLookup=VAR
                           GestionBaines@1170170000 : Codeunit 50005;
                         BEGIN
                           GestionBaines.ConjuntoLookpNoLinVenta(Rec);//23069
                         END;
                          }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of a general ledger account, item, resource, additional cost, or fixed asset, depending on the contents of the Type field.;
                           ESP=Especifica el n£mero de una cuenta de contabilidad, un producto, un recurso, un coste adicional o un activo fijo, seg£n el contenido del campo Tipo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             ShowShortcutDimCode(ShortcutDimCode);

                             QuantityOnAfterValidate;
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine }

    { 34  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cross-referenced item number. If you enter a cross reference between yours and your vendor's or customer's item number, then this number will override the standard item number when you enter the cross-reference number on a sales or purchase document.;
                           ESP=Especifica el n£mero de producto de la referencia cruzada. Si introduce una referencia cruzada entre su n£mero de producto y el del proveedor o el cliente, sobrescribir  el n£mero de producto est ndar cuando introduzca el n£mero de referencia cruzada en un documento de venta o de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Cross-Reference No.";
                Visible=FALSE;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             UpdateEditableOnRow;
                             DeltaUpdateTotals;
                           END;

                OnLookup=BEGIN
                           CrossReferenceNoLookUp;
                           NoOnAfterValidate;
                           UpdateEditableOnRow;
                           OnCrossReferenceNoOnLookup(Rec);
                         END;
                          }

    { 64  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the item or account in your IC partner's company that corresponds to the item or account on the line.;
                           ESP=Especifica el art¡culo o la cuenta de la empresa del socio IC que corresponde al art¡culo o la cuenta que consta en la l¡nea.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Ref. Type";
                Visible=FALSE }

    { 68  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the IC partner. If the line is being sent to one of your intercompany partners, this field is used together with the IC Partner Ref. Type field to indicate the item or account in your partner's company that corresponds to the line.;
                           ESP=Especifica el socio IC. Si la l¡nea se est  enviando a uno de los socios de empresas vinculadas, este campo se usa junto con el campo Tipo referencia socio IC para indicar el art¡culo o la cuenta de la empresa del socio que corresponde a la l¡nea.];
                ApplicationArea=#Intercompany;
                SourceExpr="IC Partner Reference";
                Visible=FALSE }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESP=Especifica la variante del producto que figura en la l¡nea.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 38  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that this item is a catalog item.;
                           ESP=Especifica que este es un producto del cat logo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Nonstock;
                Visible=FALSE }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the VAT product posting group. Links business transactions made for the item, resource, or G/L account with the general ledger, to account for VAT amounts resulting from trade with that record.;
                           ESP=Especifica el grupo de registro de IVA de producto. Vincula las transacciones empresariales realizadas para el producto, el recurso o la cuenta C/G con el fin de contabilizar los importes de IVA que derivan de la comercializaci¢n de ese registro.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Prod. Posting Group";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the entry of the product to be sold. To add a non-transactional text line, fill in the Description field only.;
                           ESP=Especifica una descripci¢n del movimiento del producto que se va a vender. Para agregar una l¡nea de texto no transaccional, rellene solo el campo Descripci¢n.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Description;
                OnValidate=BEGIN
                             UpdateEditableOnRow;

                             IF "No." = xRec."No." THEN
                               EXIT;

                             NoOnAfterValidate;
                             ShowShortcutDimCode(ShortcutDimCode);
                             UpdateTypeText;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=NOT IsCommentLine;
                QuickEntry=FALSE }

    { 66  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code explaining why the item was returned.;
                           ESP=Especifica el c¢digo que explica el motivo de la devoluci¢n del producto.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Return Reason Code" }

    { 72  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the location from where inventory items to the customer on the sales document are to be shipped by default.;
                           ESP=Especifica el almac‚n desde el que se env¡an de forma predeterminada los productos de inventario al cliente en el documento de venta.];
                ApplicationArea=#Location;
                SourceExpr="Location Code";
                Visible=LocationCodeVisible;
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             LocationCodeOnAfterValidate;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=LocationCodeMandatory;
                QuickEntry=FALSE }

    { 62  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the bin where the items are picked or put away.;
                           ESP=Especifica la ubicaci¢n donde se recogen o se dejan los productos.];
                ApplicationArea=#Warehouse;
                SourceExpr="Bin Code";
                Visible=FALSE }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether items will never, automatically (Always), or optionally be reserved for this customer. Optional means that you must manually reserve items for this customer.;
                           ESP=Especifica si los productos no se reservar n nunca, lo har n autom ticamente (siempre) u opcionalmente para este cliente. Opcional significa que se deben reservar manualmente los productos para este cliente.];
                ApplicationArea=#Reservation;
                SourceExpr=Reserve;
                Visible=FALSE;
                OnValidate=BEGIN
                             ReserveOnAfterValidate;
                           END;
                            }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units are being returned.;
                           ESP=Especifica cu ntas unidades se han devuelto.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr=Quantity;
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             QuantityOnAfterValidate;
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 26  ;2   ;Field     ;
                Name=Reserved Quantity;
                ApplicationArea=#Reservation;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=ReverseReservedQtySign;
                CaptionClass=FIELDCAPTION("Reserved Quantity");
                Visible=FALSE;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              COMMIT;
                              ShowReservationEntries(TRUE);
                              UpdateForm(TRUE);
                            END;

                QuickEntry=FALSE }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           ESP=Especifica c¢mo se mide cada unidad del producto o el recurso, por ejemplo, en piezas u horas. De forma predeterminada, se inserta el valor en el campo Unidad de medida base de la ficha de producto o recurso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit of Measure Code";
                Enabled=UnitofMeasureCodeIsChangeable;
                Editable=UnitofMeasureCodeIsChangeable;
                OnValidate=BEGIN
                             UnitofMeasureCodeOnAfterValida;
                             DeltaUpdateTotals;
                           END;

                QuickEntry=FALSE }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit of measure for the item or resource on the sales line.;
                           ESP=Especifica la unidad de medida del producto o recurso en la l¡nea de venta.];
                ApplicationArea=#Suite;
                SourceExpr="Unit of Measure";
                Visible=FALSE }

    { 70  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit cost of the item on the line.;
                           ESP=Especifica el coste unitario del producto que figura en la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the price for one unit on the sales line.;
                           ESP=Especifica el precio de una unidad en la l¡nea de venta.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Unit Price";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount percentage that is granted for the item on the line.;
                           ESP=Especifica el porcentaje de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Discount %";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 92  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount, excluding any invoice discount amount, that must be paid for products on the line.;
                           ESP=Especifica el importe neto, menos cualquier importe de descuento en factura, que se debe pagar por los productos de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Line Amount";
                Enabled=NOT IsBlankNumber;
                Editable=NOT IsBlankNumber;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;

                ShowMandatory=(NOT IsCommentLine) AND ("No." <> '') }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount amount that is granted for the item on the line.;
                           ESP=Especifica la cantidad de descuento aplicable al producto de la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Line Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the invoice line is included when the invoice discount is calculated.;
                           ESP=Especifica si la l¡nea de factura se incluye cuando se calcula el descuento en la factura.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Allow Invoice Disc.";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                             DeltaUpdateTotals;
                           END;
                            }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the invoice discount amount for the line.;
                           ESP=Especifica el importe de descuento en factura para la l¡nea.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Inv. Discount Amount";
                Visible=FALSE;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 82  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of items that remain to be shipped.;
                           ESP=Especifica la cantidad de los productos que queda por enviar.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Return Qty. to Receive" }

    { 84  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been posted as shipped.;
                           ESP=Permite especificar cu ntas unidades del producto que figura en la l¡nea se han registrado como enviadas.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Return Qty. Received" }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity that remains to be invoiced. It is calculated as Quantity - Qty. Invoiced.;
                           ESP=Permite especificar la cantidad que queda por facturar. Se calcula como Cantidad menos Cant. facturada.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Qty. to Invoice" }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been posted as invoiced.;
                           ESP=Especifica cu ntas unidades del producto que figura en la l¡nea se han registrado como facturadas.];
                ApplicationArea=#Basic,#Suite;
                BlankZero=Yes;
                SourceExpr="Quantity Invoiced" }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that you can assign item charges to this line.;
                           ESP=Especifica que es posible asignar cargos de producto a esta l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Allow Item Charge Assignment";
                Visible=FALSE }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item charge will be assigned to the line.;
                           ESP=Especifica cu ntas unidades del cargo de producto se asignar n a la l¡nea.];
                ApplicationArea=#ItemCharges;
                SourceExpr="Qty. to Assign";
                StyleExpr=ItemChargeStyleExpression;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdateForm(FALSE);
                            END;

                QuickEntry=FALSE }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of the item charge that was assigned to a specified item when you posted this sales line.;
                           ESP=Especifica la cantidad de cargo de producto que se ha asignado a un producto determinado al registrar esta l¡nea de venta.];
                ApplicationArea=#ItemCharges;
                BlankZero=Yes;
                SourceExpr="Qty. Assigned";
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemChargeAssgnt;
                              UpdateForm(FALSE);
                            END;

                QuickEntry=FALSE }

    { 78  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that the customer has asked for the order to be delivered.;
                           ESP=Especifica la fecha en la que el cliente ha solicitado que se entregue el pedido.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Requested Delivery Date";
                Visible=FALSE;
                OnValidate=BEGIN
                             UpdateForm(TRUE);
                           END;
                            }

    { 80  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that you have promised to deliver the order, as a result of the Order Promising function.;
                           ESP=Especifica la fecha de entrega que acord¢ con el cliente como resultado de la funci¢n Compromiso entrega.];
                ApplicationArea=#OrderPromising;
                SourceExpr="Promised Delivery Date";
                Visible=FALSE;
                OnValidate=BEGIN
                             UpdateForm(TRUE);
                           END;
                            }

    { 94  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the planned date that the shipment will be delivered at the customer's address. If the customer requests a delivery date, the program calculates whether the items will be available for delivery on this date. If the items are available, the planned delivery date will be the same as the requested delivery date. If not, the program calculates the date that the items are available for delivery and enters this date in the Planned Delivery Date field.;
                           ESP=Especifica la fecha prevista de entrega del env¡o en la direcci¢n del cliente. Si el cliente solicita una fecha de entrega, el programa calcula si los productos estar n disponibles para la entrega en esta fecha. Si los productos est n disponibles, la fecha de entrega planificada ser  la misma que la fecha de entrega solicitada. De lo contrario, el programa calcula la fecha en que los productos estar n disponibles para la entrega y la especificar  en el campo Fecha entrega planificada.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Planned Delivery Date";
                Visible=FALSE;
                OnValidate=BEGIN
                             UpdateForm(TRUE);
                           END;

                QuickEntry=FALSE }

    { 96  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that the shipment should ship from the warehouse. If the customer requests a delivery date, the program calculates the planned shipment date by subtracting the shipping time from the requested delivery date. If the customer does not request a delivery date or the requested delivery date cannot be met, the program calculates the content of this field by adding the shipment time to the shipping date.;
                           ESP=Especifica la fecha en que deber¡a salir el env¡o del almac‚n. Si el cliente solicita una fecha de entrega, el programa calcula la fecha de env¡o prevista y, para ello, resta la hora de env¡o de la fecha de entrega solicitada. Si el cliente no solicita una fecha de entrega o la fecha de entrega solicitada no puede cumplirse, el programa calcula el contenido de este campo sumando la hora de env¡o a la fecha de env¡o.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Planned Shipment Date";
                Visible=FALSE;
                OnValidate=BEGIN
                             UpdateForm(TRUE);
                           END;
                            }

    { 98  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when items on the document are shipped or were shipped. A shipment date is usually calculated from a requested delivery date plus lead time.;
                           ESP=Especifica cu ndo se van a enviar o se han enviado los productos del documento. Se calcula normalmente una fecha de env¡o con la fecha de entrega solicitada y el plazo de seguridad.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Date";
                Visible=FALSE;
                OnValidate=BEGIN
                             ShipmentDateOnAfterValidate;
                           END;

                QuickEntry=FALSE }

    { 100 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the shipping agent who is transporting the items.;
                           ESP=Especifica el c¢digo del transportista que traslada los productos.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Shipping Agent Code";
                Visible=FALSE }

    { 102 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the service, such as a one-day delivery, that is offered by the shipping agent.;
                           ESP=Especifica el c¢digo de servicio (por ejemplo, entrega en un d¡a) que ofrece el transportista.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Shipping Agent Service Code";
                Visible=FALSE }

    { 104 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how long it takes from when the items are shipped from the warehouse to when they are delivered.;
                           ESP=Especifica el tiempo que transcurre desde que se env¡an los productos desde el almac‚n hasta que se entregan.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Shipping Time";
                Visible=FALSE }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order that the record originates from.;
                           ESP=Especifica el n£mero del pedido abierto a partir del cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order No.";
                Visible=FALSE }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the blanket order line that the record originates from.;
                           ESP=Especifica el n£mero de la l¡nea de pedido abierto a partir de la cual se origina el registro.];
                ApplicationArea=#Suite;
                SourceExpr="Blanket Order Line No.";
                Visible=FALSE }

    { 5810;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied from.;
                           ESP=Especifica el n£mero del movimiento de producto desde el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-from Item Entry";
                Visible=FALSE }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item ledger entry that the document or journal line is applied -to.;
                           ESP=Especifica el n£mero del movimiento de producto en el que se liquida la l¡nea de documento o diario.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Appl.-to Item Entry";
                Visible=FALSE }

    { 17  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the deferral template that governs how revenue earned with this sales document is deferred to the different accounting periods when the good or service was delivered.;
                           ESP=Especifica la plantilla de fraccionamiento que administra el modo de fraccionar los ingresos realizados con este documento de venta en per¡odos contables diferentes cuando se entreg¢ el bien o servicio.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Deferral Code";
                Visible=FALSE;
                Enabled=(Type <> Type::"Fixed Asset") AND (Type <> Type::" ");
                OnAssistEdit=BEGIN
                               ShowDeferralSchedule;
                             END;
                              }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the starting date of the returns deferral period.;
                           ESP=Especifica la fecha de inicio del periodo de fraccionamiento de devoluciones.];
                ApplicationArea=#SalesReturnOrder;
                SourceExpr="Returns Deferral Start Date";
                Visible=FALSE;
                Enabled=(Type <> Type::"Fixed Asset") AND (Type <> Type::" ") }

    { 76  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Visible=DimVisible1 }

    { 74  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                Visible=DimVisible2 }

    { 300 ;2   ;Field     ;
                Name=ShortcutDimCode3;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 3.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 3.];
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[3];
                CaptionClass='1,2,3';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(3),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible3;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(3,ShortcutDimCode[3]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,3);
                           END;
                            }

    { 302 ;2   ;Field     ;
                Name=ShortcutDimCode4;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 4.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 4.];
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[4];
                CaptionClass='1,2,4';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(4),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible4;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(4,ShortcutDimCode[4]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,4);
                           END;
                            }

    { 304 ;2   ;Field     ;
                Name=ShortcutDimCode5;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 5.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 5.];
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[5];
                CaptionClass='1,2,5';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(5),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible5;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(5,ShortcutDimCode[5]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,5);
                           END;
                            }

    { 306 ;2   ;Field     ;
                Name=ShortcutDimCode6;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 6.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 6.];
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[6];
                CaptionClass='1,2,6';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(6),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible6;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(6,ShortcutDimCode[6]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,6);
                           END;
                            }

    { 308 ;2   ;Field     ;
                Name=ShortcutDimCode7;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 7.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 7.];
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[7];
                CaptionClass='1,2,7';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(7),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible7;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(7,ShortcutDimCode[7]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,7);
                           END;
                            }

    { 310 ;2   ;Field     ;
                Name=ShortcutDimCode8;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 8.;
                           ESP=Especifica el c¢digo de dimensi¢n del acceso directo 8.];
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[8];
                CaptionClass='1,2,8';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(8),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=DimVisible8;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(8,ShortcutDimCode[8]);

                             OnAfterValidateShortcutDimCode(Rec,ShortcutDimCode,8);
                           END;
                            }

    { 37  ;1   ;Group     ;
                GroupType=Group }

    { 33  ;2   ;Group     ;
                GroupType=Group }

    { 7   ;3   ;Field     ;
                Name=SubtotalExclVAT;
                CaptionML=[ENU=Subtotal Excl. VAT;
                           ESP=Subtotal IVA excl.];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document.;
                           ESP=Especifica la suma del valor del campo "Importe l¡nea excl. IVA" en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Line Amount";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalLineAmountWithVATAndCurrencyCaption(Currency.Code,TotalSalesHeader."Prices Including VAT");
                Editable=FALSE }

    { 31  ;3   ;Field     ;
                Name=Invoice Discount Amount;
                CaptionML=[ENU=Invoice Discount Amount;
                           ESP=Importe descuento factura];
                ToolTipML=[ENU=Specifies a discount amount that is deducted from the value in the Total Incl. VAT field. You can enter or change the amount manually.;
                           ESP=Especifica un importe de descuento que se deduce del valor del campo Total IVA incl. Se puede especificar o cambiar el importe manualmente.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=InvoiceDiscountAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetInvoiceDiscAmountWithVATAndCurrencyCaption(FIELDCAPTION("Inv. Discount Amount"),Currency.Code);
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 29  ;3   ;Field     ;
                Name=Invoice Disc. Pct.;
                CaptionML=[ENU=Invoice Discount %;
                           ESP=% descuento en factura];
                ToolTipML=[ENU=Specifies a discount percentage that is granted if criteria that you have set up for the customer are met.;
                           ESP=Especifica un porcentaje de descuento que se concede si se cumplen los criterios que ha configurado para el cliente.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:3;
                SourceExpr=InvoiceDiscountPct;
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.SalesDocTotalsNotUpToDate;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalSalesAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 15  ;2   ;Group     ;
                GroupType=Group }

    { 13  ;3   ;Field     ;
                Name=Total Amount Excl. VAT;
                DrillDown=No;
                CaptionML=[ENU=Total Amount Excl. VAT;
                           ESP=Importe total excl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Excl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe l¡n. IVA exc. en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine.Amount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalExclVATCaption(Currency.Code);
                Editable=FALSE }

    { 11  ;3   ;Field     ;
                Name=Total VAT Amount;
                CaptionML=[ENU=Total VAT;
                           ESP=IVA total];
                ToolTipML=[ENU=Specifies the sum of VAT amounts on all lines in the document.;
                           ESP=Especifica la suma de los importes de IVA en todas las l¡neas del documento.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=VATAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalVATCaption(Currency.Code);
                Editable=FALSE }

    { 9   ;3   ;Field     ;
                Name=Total Amount Incl. VAT;
                CaptionML=[ENU=Total Amount Incl. VAT;
                           ESP=Importe total incl. IVA];
                ToolTipML=[ENU=Specifies the sum of the value in the Line Amount Incl. VAT field on all lines in the document minus any discount amount in the Invoice Discount Amount field.;
                           ESP=Especifica la suma del valor del campo Importe de l¡nea con IVA en todas las l¡neas del documento menos cualquier importe de descuento en el campo Importe descuento en factura.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=TotalSalesLine."Amount Including VAT";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalInclVATCaption(Currency.Code);
                Editable=FALSE }

  }
  CODE
  {
    VAR
      Currency@1021 : Record 4;
      TotalSalesHeader@1005 : Record 36;
      TotalSalesLine@1004 : Record 37;
      SalesSetup@1022 : Record 311;
      TempOptionLookupBuffer@1013 : TEMPORARY Record 1670;
      ApplicationAreaMgmtFacade@1001 : Codeunit 9179;
      TransferExtendedText@1000 : Codeunit 378;
      ItemAvailFormsMgt@1002 : Codeunit 353;
      SalesCalcDiscByType@1008 : Codeunit 56;
      DocumentTotals@1007 : Codeunit 57;
      VATAmount@1006 : Decimal;
      AmountWithDiscountAllowed@1009 : Decimal;
      InvoiceDiscountAmount@1012 : Decimal;
      InvoiceDiscountPct@1010 : Decimal;
      ShortcutDimCode@1017 : ARRAY [8] OF Code[20];
      GestAnalisis@1170170000 : Codeunit 7014480;
      LocationCodeMandatory@1018 : Boolean;
      InvDiscAmountEditable@1014 : Boolean;
      TypeAsText@1016 : Text[30];
      ItemChargeStyleExpression@1026 : Text;
      IsFoundation@1015 : Boolean;
      UnitofMeasureCodeIsChangeable@1027 : Boolean;
      LocationCodeVisible@1020 : Boolean;
      IsCommentLine@1024 : Boolean;
      IsBlankNumber@1033 : Boolean;
      CurrPageIsEditable@1003 : Boolean;
      DimVisible1@1032 : Boolean;
      DimVisible2@1031 : Boolean;
      DimVisible3@1030 : Boolean;
      DimVisible4@1029 : Boolean;
      DimVisible5@1028 : Boolean;
      DimVisible6@1025 : Boolean;
      DimVisible7@1023 : Boolean;
      DimVisible8@1019 : Boolean;

    [External]
    PROCEDURE ApproveCalcInvDisc@1();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Disc. (Yes/No)",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ValidateInvoiceDiscountAmount@30();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      SalesCalcDiscByType.ApplyInvDiscBasedOnAmt(InvoiceDiscountAmount,SalesHeader);
      DocumentTotals.SalesDocTotalsNotUpToDate;
      CurrPage.UPDATE(FALSE);
    END;

    [External]
    PROCEDURE CalcInvDisc@6();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Calc. Discount",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ExplodeBOM@3();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Explode BOM",Rec);
      DocumentTotals.SalesDocTotalsNotUpToDate;
    END;

    [External]
    PROCEDURE InsertExtendedText@5(Unconditionally@1000 : Boolean);
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeInsertExtendedText(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF TransferExtendedText.SalesCheckIfAnyExtText(Rec,Unconditionally) THEN BEGIN
        CurrPage.SAVERECORD;
        COMMIT;
        TransferExtendedText.InsertSalesExtText(Rec);
      END;
      IF TransferExtendedText.MakeUpdate THEN
        UpdateForm(TRUE);
    END;

    LOCAL PROCEDURE PageShowReservation@2();
    BEGIN
      FIND;
      ShowReservation;
    END;

    LOCAL PROCEDURE ShowTracking@13();
    VAR
      TrackingForm@1000 : Page 99000822;
    BEGIN
      TrackingForm.SetSalesLine(Rec);
      TrackingForm.RUNMODAL;
    END;

    LOCAL PROCEDURE ItemChargeAssgnt@5800();
    BEGIN
      ShowItemChargeAssgnt;
    END;

    [External]
    PROCEDURE UpdateForm@12(SetSaveRecord@1000 : Boolean);
    BEGIN
      CurrPage.UPDATE(SetSaveRecord);
    END;

    [External]
    PROCEDURE ShowDocumentLineTracking@25();
    VAR
      DocumentLineTracking@1000 : Page 6560;
    BEGIN
      CLEAR(DocumentLineTracking);
      DocumentLineTracking.SetDoc(8,"Document No.","Line No.","Blanket Order No.","Blanket Order Line No.",'',0);
      DocumentLineTracking.RUNMODAL;
    END;

    LOCAL PROCEDURE NoOnAfterValidate@409();
    BEGIN
      InsertExtendedText(FALSE);
      IF (Type = Type::"Charge (Item)") AND ("No." <> xRec."No.") AND
         (xRec."No." <> '')
      THEN
        CurrPage.SAVERECORD;
    END;

    LOCAL PROCEDURE LocationCodeOnAfterValidate@8594();
    BEGIN
      IF (Reserve = Reserve::Always) AND
         ("Outstanding Qty. (Base)" <> 0) AND
         ("Location Code" <> xRec."Location Code")
      THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE ReserveOnAfterValidate@8303();
    BEGIN
      IF (Reserve = Reserve::Always) AND ("Outstanding Qty. (Base)" <> 0) THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE QuantityOnAfterValidate@6272();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE ShipmentDateOnAfterValidate@2525();
    BEGIN
      IF (Reserve = Reserve::Always) AND
         ("Outstanding Qty. (Base)" <> 0) AND
         ("Shipment Date" <> xRec."Shipment Date")
      THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
        CurrPage.UPDATE(FALSE);
      END ELSE
        CurrPage.UPDATE(TRUE);
    END;

    LOCAL PROCEDURE UnitofMeasureCodeOnAfterValida@1752();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
      END;
    END;

    LOCAL PROCEDURE SetLocationCodeMandatory@22();
    VAR
      InventorySetup@1000 : Record 313;
    BEGIN
      InventorySetup.GET;
      LocationCodeMandatory := InventorySetup."Location Mandatory" AND (Type = Type::Item);
    END;

    LOCAL PROCEDURE GetTotalSalesHeader@9();
    BEGIN
      DocumentTotals.GetTotalSalesHeaderAndCurrency(Rec,TotalSalesHeader,Currency);
    END;

    LOCAL PROCEDURE CalculateTotals@28();
    BEGIN
      DocumentTotals.SalesCheckIfDocumentChanged(Rec,xRec);
      DocumentTotals.CalculateSalesSubPageTotals(TotalSalesHeader,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      DocumentTotals.RefreshSalesLine(Rec);
    END;

    LOCAL PROCEDURE DeltaUpdateTotals@8();
    BEGIN
      DocumentTotals.SalesDeltaUpdateTotals(Rec,xRec,TotalSalesLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      CurrPage.SAVERECORD;
      SendLineInvoiceDiscountResetNotification;
    END;

    LOCAL PROCEDURE ReverseReservedQtySign@7() : Decimal;
    BEGIN
      CALCFIELDS("Reserved Quantity");
      EXIT(-"Reserved Quantity");
    END;

    LOCAL PROCEDURE UpdateEditableOnRow@18();
    BEGIN
      IsCommentLine := NOT HasTypeToFillMandatoryFields;
      UnitofMeasureCodeIsChangeable := NOT IsCommentLine;

      CurrPageIsEditable := CurrPage.EDITABLE;
      IsBlankNumber := ("No." = '') OR IsCommentLine;
      InvDiscAmountEditable := CurrPageIsEditable AND NOT SalesSetup."Calc. Inv. Discount";
    END;

    LOCAL PROCEDURE UpdateTypeText@10();
    VAR
      RecRef@1000 : RecordRef;
    BEGIN
      IF NOT IsFoundation THEN
        EXIT;

      RecRef.GETTABLE(Rec);
      TypeAsText := TempOptionLookupBuffer.FormatOption(RecRef.FIELD(FIELDNO(Type)));
    END;

    LOCAL PROCEDURE SetItemChargeFieldsStyle@24();
    BEGIN
      ItemChargeStyleExpression := '';
      IF AssignedItemCharge THEN
        ItemChargeStyleExpression := 'Unfavorable';
    END;

    LOCAL PROCEDURE SetDimensionsVisibility@16();
    VAR
      DimMgt@1000 : Codeunit 408;
    BEGIN
      DimVisible1 := FALSE;
      DimVisible2 := FALSE;
      DimVisible3 := FALSE;
      DimVisible4 := FALSE;
      DimVisible5 := FALSE;
      DimVisible6 := FALSE;
      DimVisible7 := FALSE;
      DimVisible8 := FALSE;

      DimMgt.UseShortcutDims(
        DimVisible1,DimVisible2,DimVisible3,DimVisible4,DimVisible5,DimVisible6,DimVisible7,DimVisible8);

      CLEAR(DimMgt);
    END;

    LOCAL PROCEDURE UpdateCurrency@4();
    BEGIN
      IF Currency.Code <> TotalSalesHeader."Currency Code" THEN
        IF NOT Currency.GET(TotalSalesHeader."Currency Code") THEN BEGIN
          CLEAR(Currency);
          Currency.InitRoundingPrecision;
        END
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterValidateShortcutDimCode@27(VAR SalesLine@1000 : Record 37;VAR ShortcutDimCode@1001 : ARRAY [8] OF Code[20];DimIndex@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeInsertExtendedText@14(VAR SalesLine@1000 : Record 37;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCrossReferenceNoOnLookup@11(VAR SalesLine@1000 : Record 37);
    BEGIN
    END;

    BEGIN
    END.
  }
}

OBJECT Page 7012 Purchase Prices
{
  OBJECT-PROPERTIES
  {
    Date=30/04/20;
    Time=11:17:34;
    Modified=Yes;
    Version List=NAVW114.00,UPG365,BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Purchase Prices;
               ESP=Precios compra];
    SourceTable=Table7012;
    DataCaptionExpr=GetCaption;
    DelayedInsert=Yes;
    PageType=Worksheet;
    OnOpenPage=BEGIN
                 GetRecFilters;
                 SetRecFilters;
                 IsLookupMode := CurrPage.LOOKUPMODE;
               END;

    ActionList=ACTIONS
    {
      { 3       ;    ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 5       ;1   ;Action    ;
                      Name=CopyPrices;
                      CaptionML=[ENU=Copy Prices;
                                 ESP=Copiar precios];
                      ToolTipML=[ENU=Select prices and press OK to copy them to Vendor No.;
                                 ESP=Seleccione precios y haga clic en Aceptar para copiarlos a N.§ de proveedor.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Visible=NOT IsLookupMode;
                      Image=Copy;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CopyPrices;
                                 CurrPage.UPDATE;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 25  ;1   ;Group     ;
                CaptionML=[ENU=General;
                           ESP=General] }

    { 26  ;2   ;Field     ;
                Name=VendNoFilterCtrl;
                CaptionML=[ENU=Vendor No. Filter;
                           ESP=Filtro n£m. proveedor];
                ToolTipML=[ENU=Specifies a filter for which purchase prices display.;
                           ESP=Especifica un filtro para indicar qu‚ precios de compra se deben mostrar.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=VendNoFilter;
                OnValidate=BEGIN
                             VendNoFilterOnAfterValidate;
                           END;

                OnLookup=VAR
                           VendList@1005 : Page 27;
                         BEGIN
                           VendList.LOOKUPMODE := TRUE;
                           IF VendList.RUNMODAL = ACTION::LookupOK THEN
                             Text := VendList.GetSelectionFilter
                           ELSE
                             EXIT(FALSE);

                           EXIT(TRUE);
                         END;
                          }

    { 32  ;2   ;Field     ;
                Name=ItemNoFIlterCtrl;
                CaptionML=[ENU=Item No. Filter;
                           ESP=Filtro n§ prod.];
                ToolTipML=[ENU=Specifies a filter for which purchase prices to display.;
                           ESP=Especifica un filtro para indicar qu‚ precios de compra se deben mostrar.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=ItemNoFilter;
                OnValidate=BEGIN
                             ItemNoFilterOnAfterValidate;
                           END;

                OnLookup=VAR
                           ItemList@1002 : Page 31;
                         BEGIN
                           ItemList.LOOKUPMODE := TRUE;
                           IF ItemList.RUNMODAL = ACTION::LookupOK THEN
                             Text := ItemList.GetSelectionFilter
                           ELSE
                             EXIT(FALSE);

                           EXIT(TRUE);
                         END;
                          }

    { 30  ;2   ;Field     ;
                CaptionML=[ENU=Starting Date Filter;
                           ESP=Filtro fecha inicio];
                ToolTipML=[ENU=Specifies a filter for which purchase prices to display.;
                           ESP=Especifica un filtro para indicar qu‚ precios de compra se deben mostrar.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=StartingDateFilter;
                OnValidate=VAR
                             TextManagement@1030 : Codeunit 41;
                           BEGIN
                             TextManagement.MakeDateFilter(StartingDateFilter);
                             StartingDateFilterOnAfterValid;
                           END;
                            }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the vendor who offers the line discount on the item.;
                           ESP=Especifica el n£mero del proveedor que ofrece el descuento de l¡nea para el producto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Vendor No." }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item that the purchase price applies to.;
                           ESP=Especifica el n£mero del producto al que se aplica este precio de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Item No." }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESP=Especifica la variante del producto que figura en la l¡nea.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the currency code of the purchase price.;
                           ESP=Especifica el c¢digo de divisa del precio de compra.];
                ApplicationArea=#Suite;
                SourceExpr="Currency Code";
                Visible=FALSE }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           ESP=Especifica c¢mo se mide cada unidad del producto o el recurso, por ejemplo, en piezas u horas. De forma predeterminada, se inserta el valor en el campo Unidad de medida base de la ficha de producto o recurso.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit of Measure Code" }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the minimum quantity of the item that you must buy from the vendor in order to get the purchase price.;
                           ESP=Especifica la cantidad m¡nima del producto que se debe comprar al proveedor para obtener el precio de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Minimum Quantity" }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cost of one unit of the selected item or resource.;
                           ESP=Especifica el coste unitario del art¡culo o recurso seleccionado.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Direct Unit Cost" }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date from which the purchase price is valid.;
                           ESP=Especifica la fecha a partir de la cual es v lido el precio de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Starting Date" }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date to which the purchase price is valid.;
                           ESP=Especifica la fecha hasta la que es v lido el precio de compra.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Ending Date" }

    { 1170000000;2;Field  ;
                SourceExpr="Precio cargo 1" }

    { 1170000001;2;Field  ;
                SourceExpr="Precio cargo 2" }

    { 1170170000;2;Field  ;
                SourceExpr="Rappell 1 %" }

    { 1170170001;2;Field  ;
                SourceExpr="Rappell 2 %" }

    { 1170170002;2;Field  ;
                SourceExpr="Rappell 3 %" }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                Visible=FALSE;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      Vend@1003 : Record 23;
      VendNoFilter@1000 : Text;
      ItemNoFilter@1001 : Text;
      StartingDateFilter@1002 : Text[30];
      NoDataWithinFilterErr@1004 : TextConst '@@@=%1: Field(Code), %2: GetFilter(Code);ENU=There is no %1 within the filter %2.;ESP=No hay %1 dentro del filtro %2.';
      IsLookupMode@1005 : Boolean;
      MultipleVendorsSelectedErr@1006 : TextConst 'ENU=More than one vendor uses these purchase prices. To copy prices, the Vendor No. Filter field must contain one vendor only.;ESP=M s de un proveedor usa estos precios de compra. Para copiar precios, el campo Filtro n£m. proveedor debe contener un solo proveedor.';

    LOCAL PROCEDURE GetRecFilters@2();
    BEGIN
      IF GETFILTERS <> '' THEN BEGIN
        VendNoFilter := GETFILTER("Vendor No.");
        ItemNoFilter := GETFILTER("Item No.");
        EVALUATE(StartingDateFilter,GETFILTER("Starting Date"));
      END;
    END;

    [External]
    PROCEDURE SetRecFilters@1();
    BEGIN
      IF VendNoFilter <> '' THEN
        SETFILTER("Vendor No.",VendNoFilter)
      ELSE
        SETRANGE("Vendor No.");

      IF StartingDateFilter <> '' THEN
        SETFILTER("Starting Date",StartingDateFilter)
      ELSE
        SETRANGE("Starting Date");

      IF ItemNoFilter <> '' THEN
        SETFILTER("Item No.",ItemNoFilter)
      ELSE
        SETRANGE("Item No.");

      CheckFilters(DATABASE::Vendor,VendNoFilter);
      CheckFilters(DATABASE::Item,ItemNoFilter);

      CurrPage.UPDATE(FALSE);
    END;

    LOCAL PROCEDURE GetCaption@3() : Text;
    VAR
      ObjTransl@1000 : Record 377;
      SourceTableName@1002 : Text[250];
      Description@1001 : Text[100];
    BEGIN
      GetRecFilters;

      IF ItemNoFilter <> '' THEN
        SourceTableName := ObjTransl.TranslateObject(ObjTransl."Object Type"::Table,27)
      ELSE
        SourceTableName := '';

      IF Vend.GET(COPYSTR(VendNoFilter,1,MAXSTRLEN(Vend."No."))) THEN
        Description := Vend.Name;

      EXIT(STRSUBSTNO('%1 %2 %3 %4 ',VendNoFilter,Description,SourceTableName,ItemNoFilter));
    END;

    LOCAL PROCEDURE VendNoFilterOnAfterValidate@19075608();
    VAR
      Item@1000 : Record 27;
    BEGIN
      IF Item.GET("Item No.") THEN
        CurrPage.SAVERECORD;
      SetRecFilters;
    END;

    LOCAL PROCEDURE StartingDateFilterOnAfterValid@19055286();
    BEGIN
      CurrPage.SAVERECORD;
      SetRecFilters;
    END;

    LOCAL PROCEDURE ItemNoFilterOnAfterValidate@19009808();
    BEGIN
      CurrPage.SAVERECORD;
      SetRecFilters;
    END;

    [External]
    PROCEDURE CheckFilters@4(TableNo@1000 : Integer;FilterTxt@1001 : Text);
    VAR
      FilterRecordRef@1002 : RecordRef;
      FilterFieldRef@1003 : FieldRef;
    BEGIN
      IF FilterTxt = '' THEN
        EXIT;
      CLEAR(FilterRecordRef);
      CLEAR(FilterFieldRef);
      FilterRecordRef.OPEN(TableNo);
      FilterFieldRef := FilterRecordRef.FIELD(1);
      FilterFieldRef.SETFILTER(FilterTxt);
      IF FilterRecordRef.ISEMPTY THEN
        ERROR(NoDataWithinFilterErr,FilterRecordRef.CAPTION,FilterTxt);
    END;

    LOCAL PROCEDURE CopyPrices@6();
    VAR
      Vendor@1001 : Record 23;
      PurchasePrice@1004 : Record 7012;
      SelectedPurchasePrice@1005 : Record 7012;
      PurchasePrices@1002 : Page 7012;
      CopyToVendorNo@1003 : Code[20];
    BEGIN
      Vendor.SETFILTER("No.",VendNoFilter);
      IF Vendor.COUNT <> 1 THEN
        ERROR(MultipleVendorsSelectedErr);
      CopyToVendorNo := COPYSTR(VendNoFilter,1,MAXSTRLEN(CopyToVendorNo));

      PurchasePrice.SETFILTER("Vendor No.",'<>%1',VendNoFilter);
      PurchasePrices.LOOKUPMODE(TRUE);
      PurchasePrices.SETTABLEVIEW(PurchasePrice);
      IF PurchasePrices.RUNMODAL = ACTION::LookupOK THEN BEGIN
        PurchasePrices.GetSelectionFilter(SelectedPurchasePrice);
        CopyPurchPriceToVendorsPurchPrice(SelectedPurchasePrice,CopyToVendorNo);
      END;
    END;

    [External]
    PROCEDURE GetSelectionFilter@5(VAR PurchasePrice@1001 : Record 7012);
    BEGIN
      CurrPage.SETSELECTIONFILTER(PurchasePrice);
    END;

    BEGIN
    {

      BAINES
      ==================
      BAIN-0063 JA 150508 Se a¤aden los campos: "Precio cargo 1","Precio cargo 2"
    }
    END.
  }
}

OBJECT Page 50006 Hoja de costes de tarifa
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=11:37:12;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Sales Price Worksheet;
               ESP=Hoja precios venta];
    ApplicationArea=#Suite;
    SaveValues=Yes;
    SourceTable=Table7023;
    DelayedInsert=Yes;
    SourceTableView=SORTING(Cambio coste tarifa)
                    WHERE(Cambio coste tarifa=CONST(Yes));
    PageType=Worksheet;
    UsageCategory=Tasks;
    AdditionalSearchTermsML=[ENU=special price,alternate price;
                             ESP=precio especial,precio alternativo];
    OnNewRecord=BEGIN
                  "Cambio coste tarifa" := TRUE;
                END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 31      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESP=Acci&ones];
                      Image=Action }
      { 32      ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Suggest &Item Price on Wksh.;
                                 ESP=Sugerir precio coste &producto en hoja];
                      ToolTipML=[ENU=Create suggestions for changing the agreed item unit prices for your sales prices in the Sales Prices window on the basis of the unit price on the item cards. When the batch job has completed, you can see the result in the Sales Price Worksheet window. You can also use the Suggest Sales Price on Wksh. batch job to create suggestions for new sales prices.;
                                 ESP=Crea propuestas para modificar los precios de venta acordados de los productos que figuran en la ventana Precios de venta en funci¢n del precio unitario de las fichas de producto. Una vez finalizado el proceso, podr  ver el resultado en la ventana Hoja precios venta. Tambi‚n puede utilizar el proceso Sugerir precio venta en hoja para crear propuestas de precios de venta nuevos.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=SuggestItemPrice;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 REPORT.RUNMODAL(REPORT::"Sugerir precio coste tarifa",TRUE,TRUE);
                                 CurrPage.UPDATE(FALSE);
                               END;
                                }
      { 36      ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=I&mplement Price Change;
                                 ESP=&Realizar cambio precio];
                      ToolTipML=[ENU=Update the alternate prices in the Sales Prices window with the ones in the Sales Price Worksheet window.;
                                 ESP=Actualiza los precios alternativos que aparecen en la ventana Precios de venta con aquellos que figuran en la ventana Hoja precios venta.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=ImplementPriceChange;
                      PromotedCategory=Process;
                      Scope=Repeater;
                      OnAction=BEGIN
                                 REPORT.RUNMODAL(REPORT::"Realizar cambio tarifa coste",TRUE,TRUE,Rec);
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the item for which sales prices are being changed or set up.;
                           ESP=Especifica el n£mero del producto cuyos precios de venta se est n modificando o configurando.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Item No." }

    { 5   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the description of the item on the worksheet line.;
                           ESP=Especifica la descripci¢n del producto en la l¡nea de la hoja de c lculo.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Item Description";
                Visible=FALSE;
                Editable=FALSE }

    { 1170170006;2;Field  ;
                SourceExpr="Nombre proveedor" }

    { 1170170000;2;Field  ;
                SourceExpr="Coste tarifa actual" }

    { 1170170001;2;Field  ;
                SourceExpr="Precio £ltima compra" }

    { 1170170002;2;Field  ;
                SourceExpr="Coste tarifa nuevo" }

    { 1170170004;2;Field  ;
                SourceExpr="N§  Proveedor" }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                Visible=FALSE;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {

    BEGIN
    END.
  }
}

OBJECT Page 50007 Margen grupo precio/producto
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=16:39:34;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Resource Capacity;
               ESP=Margen grupo precio/producto];
    SaveValues=Yes;
    InsertAllowed=No;
    DeleteAllowed=No;
    ModifyAllowed=No;
    LinksAllowed=No;
    SourceTable=Table27;
    DataCaptionExpr='';
    PageType=ListPlus;
    OnOpenPage=BEGIN
                 SetColumns(SetWanted::Initial);
                 UpdateMatrixSubform;
               END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1170170001;1 ;Action    ;
                      CaptionML=ESP=Actualizar margen multiple;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=MakeOrder;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CurrPage.MatrixForm.PAGE.ActualizarMargenMultiple(PorcentajeMultiple);
                                 PorcentajeMultiple := 0;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                CaptionML=[ENU=Matrix Options;
                           ESP=Opciones matriz] }

    { 1170170000;2;Field  ;
                CaptionML=ESP=Filtro tabla horizontal;
                SourceExpr=FiltroTablaHorizontal;
                TableRelation="Customer Price Group";
                OnValidate=BEGIN
                             SetColumns(SetWanted::Initial);
                             UpdateMatrixSubform;
                           END;
                            }

    { 1170170002;2;Field  ;
                CaptionML=ESP=Porcentaje para actualizar m£ltiple;
                SourceExpr=PorcentajeMultiple }

    { 1102601000;1;Part   ;
                Name=MatrixForm;
                ApplicationArea=#Jobs;
                PagePartID=Page50008 }

  }
  CODE
  {
    VAR
      PeriodType@1001 : 'Day,Week,Month,Quarter,Year,Accounting Period';
      QtyType@1002 : 'Net Change,Balance at Date';
      ColumnSet@1007 : Text[1024];
      SetWanted@1005 : 'Initial,Previous,Same,Next,PreviousColumn,NextColumn';
      PKFirstRecInCurrSet@1006 : Text[100];
      CurrSetLength@1008 : Integer;
      MatrixRecord@1170170009 : Record 6;
      MatrixRecords@1170170008 : ARRAY [32] OF Record 6;
      MatrixRecordRef@1170170007 : RecordRef;
      MATRIX_CaptionSet@1170170006 : ARRAY [32] OF Text[1024];
      MATRIX_CaptionRange@1170170005 : Text[100];
      MATRIX_PKFirstRecInCurrSet@1170170004 : Text[100];
      MATRIX_CurrSetLength@1170170003 : Integer;
      MATRIX_SetWanted@1170170002 : 'Initial,Previous,Same,Next';
      ShowColumnName@1170170000 : Boolean;
      FiltroTablaHorizontal@1170170001 : Text[50];
      DateFilter@1170170010 : Text[200];
      PorcentajeMultiple@1170170011 : Decimal;

    PROCEDURE SetColumns@6(SetWanted@1002 : 'Initial,Previous,Same,Next');
    VAR
      MatrixMgt@1000 : Codeunit 9200;
      CaptionFieldNo@1001 : Integer;
      CurrentMatrixRecordOrdinal@1003 : Integer;
    BEGIN
      CLEAR(MATRIX_CaptionSet);
      CLEAR(MatrixRecords);
      CurrentMatrixRecordOrdinal := 1;
      MatrixRecord.SETFILTER(Code,FiltroTablaHorizontal);
      MatrixRecordRef.GETTABLE(MatrixRecord);
      MatrixRecordRef.SETTABLE(MatrixRecord);

      IF ShowColumnName THEN
        CaptionFieldNo := MatrixRecord.FIELDNO(Description)
      ELSE
        CaptionFieldNo := MatrixRecord.FIELDNO(Code);

      MatrixMgt.GenerateMatrixData(MatrixRecordRef,SetWanted,ARRAYLEN(MatrixRecords),CaptionFieldNo,MATRIX_PKFirstRecInCurrSet,
        MATRIX_CaptionSet,MATRIX_CaptionRange,MATRIX_CurrSetLength);

      IF MATRIX_CurrSetLength > 0 THEN BEGIN
        MatrixRecord.SETPOSITION(MATRIX_PKFirstRecInCurrSet);
        MatrixRecord.FIND;
        REPEAT
          MatrixRecords[CurrentMatrixRecordOrdinal].COPY(MatrixRecord);
          CurrentMatrixRecordOrdinal := CurrentMatrixRecordOrdinal + 1;
        UNTIL (CurrentMatrixRecordOrdinal > MATRIX_CurrSetLength) OR (MatrixRecord.NEXT <> 1);
      END;
    END;

    LOCAL PROCEDURE UpdateMatrixSubform@1102601000();
    BEGIN
      CurrPage.MatrixForm.PAGE.Load(QtyType,MATRIX_CaptionSet,MatrixRecords,CurrSetLength);
      CurrPage.UPDATE(FALSE);
    END;

    BEGIN
    END.
  }
}

OBJECT Page 50008 Margen Productos Matrix
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=16:42:05;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    Editable=Yes;
    CaptionML=[ENU=Matriz subform;
               ESP=Matriz subform];
    LinksAllowed=No;
    SourceTable=Table27;
    PageType=ListPart;
    OnAfterGetRecord=VAR
                       MATRIX_CurrentColumnOrdinal@1043 : Integer;
                     BEGIN
                       MATRIX_CurrentColumnOrdinal := 0;
                       IF MatrixRecord.FIND('-') THEN
                         REPEAT
                           MATRIX_CurrentColumnOrdinal := MATRIX_CurrentColumnOrdinal + 1;
                           MATRIX_OnAfterGetRecord(MATRIX_CurrentColumnOrdinal);
                         UNTIL (MatrixRecord.NEXT(1) = 0) OR (MATRIX_CurrentColumnOrdinal = MATRIX_NoOfMatrixColumns);
                     END;

  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 1170170000;2;Field  ;
                SourceExpr="Vendor No." }

    { 1170170001;2;Field  ;
                SourceExpr="No." }

    { 1170170002;2;Field  ;
                SourceExpr=Description }

    { 1170170003;2;Field  ;
                SourceExpr="Description 2" }

    { 1170170004;2;Field  ;
                SourceExpr="Item Category Code" }

    { 1011;2   ;Field     ;
                Name=Field1;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[1];
                CaptionClass='3,' + MATRIX_ColumnCaption[1];
                OnValidate=BEGIN
                             ValidateCantidad(1);
                           END;
                            }

    { 1012;2   ;Field     ;
                Name=Field2;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[2];
                CaptionClass='3,' + MATRIX_ColumnCaption[2];
                OnValidate=BEGIN
                             ValidateCantidad(2);
                           END;
                            }

    { 1013;2   ;Field     ;
                Name=Field3;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[3];
                CaptionClass='3,' + MATRIX_ColumnCaption[3];
                OnValidate=BEGIN
                             ValidateCantidad(3);
                           END;
                            }

    { 1014;2   ;Field     ;
                Name=Field4;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[4];
                CaptionClass='3,' + MATRIX_ColumnCaption[4];
                OnValidate=BEGIN
                             ValidateCantidad(4);
                           END;
                            }

    { 1015;2   ;Field     ;
                Name=Field5;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[5];
                CaptionClass='3,' + MATRIX_ColumnCaption[5];
                OnValidate=BEGIN
                             ValidateCantidad(5);
                           END;
                            }

    { 1016;2   ;Field     ;
                Name=Field6;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[6];
                CaptionClass='3,' + MATRIX_ColumnCaption[6];
                OnValidate=BEGIN
                             ValidateCantidad(6);
                           END;
                            }

    { 1017;2   ;Field     ;
                Name=Field7;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[7];
                CaptionClass='3,' + MATRIX_ColumnCaption[7];
                OnValidate=BEGIN
                             ValidateCantidad(7);
                           END;
                            }

    { 1018;2   ;Field     ;
                Name=Field8;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[8];
                CaptionClass='3,' + MATRIX_ColumnCaption[8];
                OnValidate=BEGIN
                             ValidateCantidad(8);
                           END;
                            }

    { 1019;2   ;Field     ;
                Name=Field9;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[9];
                CaptionClass='3,' + MATRIX_ColumnCaption[9];
                OnValidate=BEGIN
                             ValidateCantidad(9);
                           END;
                            }

    { 1020;2   ;Field     ;
                Name=Field10;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[10];
                CaptionClass='3,' + MATRIX_ColumnCaption[10];
                OnValidate=BEGIN
                             ValidateCantidad(10);
                           END;
                            }

    { 1021;2   ;Field     ;
                Name=Field11;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[11];
                CaptionClass='3,' + MATRIX_ColumnCaption[11];
                OnValidate=BEGIN
                             ValidateCantidad(11);
                           END;
                            }

    { 1022;2   ;Field     ;
                Name=Field12;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[12];
                CaptionClass='3,' + MATRIX_ColumnCaption[12];
                OnValidate=BEGIN
                             ValidateCantidad(12);
                           END;
                            }

  }
  CODE
  {
    VAR
      MatrixRecord@1170170000 : Record 6;
      MatrixRecords@1000 : ARRAY [32] OF Record 6;
      QtyType@1081 : 'Net Change,Balance at Date';
      MATRIX_NoOfMatrixColumns@1084 : Integer;
      MATRIX_CellData@1085 : ARRAY [32] OF Decimal;
      MATRIX_ColumnCaption@1001 : ARRAY [32] OF Text[1024];
      ConfMultiple@1170170001 : TextConst 'ESP=¨Est  seguro de que quiere asignar el porcentaje %1 a los registros seleccionados?';

    PROCEDURE Load@3(QtyType1@1000 : 'Net Change,Balance at Date';MatrixColumns1@1001 : ARRAY [32] OF Text[1024];VAR MatrixRecords1@1002 : ARRAY [32] OF Record 6;NoOfMatrixColumns1@1004 : Integer);
    VAR
      i@1005 : Integer;
    BEGIN
      QtyType := QtyType1;
      COPYARRAY(MATRIX_ColumnCaption,MatrixColumns1,1);
      FOR i := 1 TO ARRAYLEN(MatrixRecords) DO
        MatrixRecords[i].COPY(MatrixRecords1[i]);
      MATRIX_NoOfMatrixColumns := NoOfMatrixColumns1;
    END;

    LOCAL PROCEDURE ValidateCantidad@1(MATRIX_ColumnOrdinal@1000 : Integer);
    VAR
      MargenPorc@1170170000 : Record 50004;
    BEGIN
      ActMargen("No.",MatrixRecords[MATRIX_ColumnOrdinal].Code,
        MATRIX_CellData[MATRIX_ColumnOrdinal]);
    END;

    LOCAL PROCEDURE MATRIX_OnAfterGetRecord@1047(ColumnID@1000 : Integer);
    VAR
      MargenGrupoProducto@1170170000 : Record 50004;
    BEGIN
      IF NOT MargenGrupoProducto.GET(MargenGrupoProducto."Sales Type"::"Customer Price Group",
                             MatrixRecords[ColumnID].Code,
                            "No.") THEN MargenGrupoProducto.INIT;
      MATRIX_CellData[ColumnID] := MargenGrupoProducto."% margen";
    END;

    LOCAL PROCEDURE ActMargen@1170170001(NumProducto@1170170001 : Code[20];GrupoPrecio@1170170002 : Code[20];dPorcen@1170170003 : Decimal);
    VAR
      MargenPorc@1170170000 : Record 50004;
    BEGIN
      // I-BAIN-0129
      IF NOT MargenPorc.GET(MargenPorc."Sales Type"::"Customer Price Group",
                            GrupoPrecio,
                            NumProducto) THEN BEGIN
        IF dPorcen = 0 THEN EXIT;
        MargenPorc."Sales Type" := MargenPorc."Sales Type"::"Customer Price Group";
        MargenPorc."Sales Code" := GrupoPrecio;
        MargenPorc."N§ producto" := NumProducto;
        MargenPorc."% margen" := dPorcen;
        MargenPorc.INSERT;
      END ELSE BEGIN
        IF dPorcen = 0 THEN BEGIN
          MargenPorc.DELETE;
        END ELSE BEGIN
          MargenPorc."% margen" := dPorcen;
          MargenPorc.MODIFY;
        END;
      END;
      // F-BAIN-0129
    END;

    PROCEDURE ActualizarMargenMultiple@1170170004(dPorcen@1170170000 : Decimal);
    VAR
      RcProducto@1170170003 : Record 27;
      GrupoPrecio@1170170002 : Record 6;
      Ventana@1170170001 : Dialog;
    BEGIN
      // I-BAIN-0129
      IF NOT CONFIRM(ConfMultiple,TRUE,dPorcen) THEN
        EXIT;
      Ventana.OPEN('Actualizando producto #1#########');
      CurrPage.SETSELECTIONFILTER(RcProducto);
      IF RcProducto.FIND('-') THEN
      REPEAT
        Ventana.UPDATE(1,RcProducto."No.");
        GrupoPrecio.RESET;
        IF GrupoPrecio.FIND('-') THEN
        REPEAT
          ActMargen(RcProducto."No.",GrupoPrecio.Code,dPorcen);
        UNTIL GrupoPrecio.NEXT = 0;
      UNTIL RcProducto.NEXT = 0;
      Ventana.CLOSE;
      // F-BAIN-0129
    END;

    BEGIN
    END.
  }
}

OBJECT Page 50011 Zonas comisi¢n cliente
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=17:54:11;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    CaptionML=ESP=Zonas comisi¢n cliente;
    SourceTable=Table7014620;
    PageType=List;
    ActionList=ACTIONS
    {
      { 1170170004;  ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 1170170005;1 ;Action    ;
                      CaptionML=ESP=Comisiones;
                      RunObject=Page 50013;
                      RunPageLink=C¢d. zona comisi¢n cliente=FIELD(C¢digo);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Apply }
    }
  }
  CONTROLS
  {
    { 1170170000;0;Container;
                ContainerType=ContentArea }

    { 1170170001;1;Group  ;
                Name=Group;
                GroupType=Repeater }

    { 1170170002;2;Field  ;
                SourceExpr=C¢digo }

    { 1170170003;2;Field  ;
                SourceExpr=Descripci¢n }

  }
  CODE
  {

    BEGIN
    END.
  }
}

OBJECT Page 50012 Grupos comisi¢n producto
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=17:54:43;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    CaptionML=ESP=Grupos comisi¢n producto;
    SourceTable=Table7014621;
    PageType=List;
    ActionList=ACTIONS
    {
      { 1170170005;  ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 1170170006;1 ;Action    ;
                      CaptionML=ESP=Comisiones;
                      RunObject=Page 50013;
                      RunPageLink=C¢d. grupo comisi¢n producto=FIELD(C¢digo);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Apply }
    }
  }
  CONTROLS
  {
    { 1170170000;0;Container;
                ContainerType=ContentArea }

    { 1170170001;1;Group  ;
                Name=Group;
                GroupType=Repeater }

    { 1170170002;2;Field  ;
                SourceExpr=C¢digo }

    { 1170170003;2;Field  ;
                SourceExpr=Descripci¢n }

    { 1170170004;2;Field  ;
                SourceExpr="M‚todo aplicaci¢n" }

  }
  CODE
  {

    BEGIN
    END.
  }
}

OBJECT Page 50013 Conf. comisi¢n clite./producto
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=17:15:55;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    CaptionML=ESP=Conf. comisi¢n clite./producto;
    SourceTable=Table7014622;
    PageType=List;
  }
  CONTROLS
  {
    { 1170170000;0;Container;
                ContainerType=ContentArea }

    { 1170170001;1;Group  ;
                Name=Group;
                GroupType=Repeater }

    { 1170170002;2;Field  ;
                SourceExpr="C¢d. tipo cliente" }

    { 1170170003;2;Field  ;
                SourceExpr="C¢d. grupo comisi¢n producto" }

    { 1170170004;2;Field  ;
                SourceExpr="C¢d. zona comisi¢n cliente" }

    { 1170170005;2;Field  ;
                SourceExpr="Fecha inicio" }

    { 1170170006;2;Field  ;
                SourceExpr="% comisi¢n" }

  }
  CODE
  {

    BEGIN
    END.
  }
}

OBJECT Page 50029 Lista conjuntos de producto
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=18:22:13;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    Editable=No;
    SourceTable=Table50010;
    PageType=List;
    CardPageID=Ficha conjunto productos;
  }
  CONTROLS
  {
    { 1170170000;0;Container;
                ContainerType=ContentArea }

    { 1170170001;1;Group  ;
                Name=Group;
                GroupType=Repeater }

    { 1170170002;2;Field  ;
                SourceExpr=C¢digo }

    { 1170170003;2;Field  ;
                SourceExpr=Descripci¢n }

    { 1170170004;2;Field  ;
                SourceExpr="C¢d. unidad medida precio" }

  }
  CODE
  {

    BEGIN
    END.
  }
}

OBJECT Page 50030 Ficha conjunto productos
{
  OBJECT-PROPERTIES
  {
    Date=27/04/20;
    Time=19:09:36;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    SourceTable=Table50010;
    PageType=Card;
    ActionList=ACTIONS
    {
      { 1170170005;  ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 1170170006;1 ;Action    ;
                      CaptionML=ESP=Productos;
                      RunObject=Page 31;
                      RunPageLink=C¢d. conjunto=FIELD(C¢digo);
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Item }
    }
  }
  CONTROLS
  {
    { 1170170000;0;Container;
                ContainerType=ContentArea }

    { 1170170001;1;Group  ;
                Name=General;
                GroupType=Group }

    { 1170170002;2;Field  ;
                SourceExpr=C¢digo }

    { 1170170003;2;Field  ;
                SourceExpr=Descripci¢n }

    { 1170170004;2;Field  ;
                SourceExpr="C¢d. unidad medida precio" }

    { 1170170007;2;Field  ;
                CaptionML=ESP=Existencias totales ud. precio;
                SourceExpr=ExistenciasTotalesUdadPrecio }

  }
  CODE
  {

    BEGIN
    END.
  }
}

OBJECT Page 50038 Margen m¡nimo gr. precio/prod.
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=16:44:15;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Resource Capacity;
               ESP=Margen m¡nimo gr. precio/prod.];
    SaveValues=Yes;
    InsertAllowed=No;
    DeleteAllowed=No;
    ModifyAllowed=No;
    LinksAllowed=No;
    SourceTable=Table27;
    DataCaptionExpr='';
    PageType=ListPlus;
    OnOpenPage=BEGIN
                 SetColumns(SetWanted::Initial);
                 UpdateMatrixSubform;
               END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1170170001;1 ;Action    ;
                      CaptionML=ESP=Actualizar margen multiple;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=MakeOrder;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CurrPage.MatrixForm.PAGE.ActualizarMargenMultiple(PorcentajeMultiple);
                                 PorcentajeMultiple := 0;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                CaptionML=[ENU=Matrix Options;
                           ESP=Opciones matriz] }

    { 1170170000;2;Field  ;
                CaptionML=ESP=Filtro tabla horizontal;
                SourceExpr=FiltroTablaHorizontal;
                TableRelation="Customer Price Group";
                OnValidate=BEGIN
                             SetColumns(SetWanted::Initial);
                             UpdateMatrixSubform;
                           END;
                            }

    { 1170170002;2;Field  ;
                CaptionML=ESP=Porcentaje para actualizar m£ltiple;
                SourceExpr=PorcentajeMultiple }

    { 1102601000;1;Part   ;
                Name=MatrixForm;
                ApplicationArea=#Jobs;
                PagePartID=Page50039 }

  }
  CODE
  {
    VAR
      PeriodType@1001 : 'Day,Week,Month,Quarter,Year,Accounting Period';
      QtyType@1002 : 'Net Change,Balance at Date';
      ColumnSet@1007 : Text[1024];
      SetWanted@1005 : 'Initial,Previous,Same,Next,PreviousColumn,NextColumn';
      PKFirstRecInCurrSet@1006 : Text[100];
      CurrSetLength@1008 : Integer;
      MatrixRecord@1170170009 : Record 6;
      MatrixRecords@1170170008 : ARRAY [32] OF Record 6;
      MatrixRecordRef@1170170007 : RecordRef;
      MATRIX_CaptionSet@1170170006 : ARRAY [32] OF Text[1024];
      MATRIX_CaptionRange@1170170005 : Text[100];
      MATRIX_PKFirstRecInCurrSet@1170170004 : Text[100];
      MATRIX_CurrSetLength@1170170003 : Integer;
      MATRIX_SetWanted@1170170002 : 'Initial,Previous,Same,Next';
      ShowColumnName@1170170000 : Boolean;
      FiltroTablaHorizontal@1170170001 : Text[50];
      DateFilter@1170170010 : Text[200];
      PorcentajeMultiple@1170170011 : Decimal;

    PROCEDURE SetColumns@6(SetWanted@1002 : 'Initial,Previous,Same,Next');
    VAR
      MatrixMgt@1000 : Codeunit 9200;
      CaptionFieldNo@1001 : Integer;
      CurrentMatrixRecordOrdinal@1003 : Integer;
    BEGIN
      CLEAR(MATRIX_CaptionSet);
      CLEAR(MatrixRecords);
      CurrentMatrixRecordOrdinal := 1;
      MatrixRecord.SETFILTER(Code,FiltroTablaHorizontal);
      MatrixRecordRef.GETTABLE(MatrixRecord);
      MatrixRecordRef.SETTABLE(MatrixRecord);

      IF ShowColumnName THEN
        CaptionFieldNo := MatrixRecord.FIELDNO(Description)
      ELSE
        CaptionFieldNo := MatrixRecord.FIELDNO(Code);

      MatrixMgt.GenerateMatrixData(MatrixRecordRef,SetWanted,ARRAYLEN(MatrixRecords),CaptionFieldNo,MATRIX_PKFirstRecInCurrSet,
        MATRIX_CaptionSet,MATRIX_CaptionRange,MATRIX_CurrSetLength);

      IF MATRIX_CurrSetLength > 0 THEN BEGIN
        MatrixRecord.SETPOSITION(MATRIX_PKFirstRecInCurrSet);
        MatrixRecord.FIND;
        REPEAT
          MatrixRecords[CurrentMatrixRecordOrdinal].COPY(MatrixRecord);
          CurrentMatrixRecordOrdinal := CurrentMatrixRecordOrdinal + 1;
        UNTIL (CurrentMatrixRecordOrdinal > MATRIX_CurrSetLength) OR (MatrixRecord.NEXT <> 1);
      END;
    END;

    LOCAL PROCEDURE UpdateMatrixSubform@1102601000();
    BEGIN
      CurrPage.MatrixForm.PAGE.Load(QtyType,MATRIX_CaptionSet,MatrixRecords,CurrSetLength);
      CurrPage.UPDATE(FALSE);
    END;

    BEGIN
    END.
  }
}

OBJECT Page 50039 Margen m¡nimo Matrix
{
  OBJECT-PROPERTIES
  {
    Date=28/04/20;
    Time=16:43:31;
    Modified=Yes;
    Version List=BAN;
  }
  PROPERTIES
  {
    Editable=Yes;
    CaptionML=[ENU=Matriz subform;
               ESP=Matriz subform];
    LinksAllowed=No;
    SourceTable=Table27;
    PageType=ListPart;
    OnAfterGetRecord=VAR
                       MATRIX_CurrentColumnOrdinal@1043 : Integer;
                     BEGIN
                       MATRIX_CurrentColumnOrdinal := 0;
                       IF MatrixRecord.FIND('-') THEN
                         REPEAT
                           MATRIX_CurrentColumnOrdinal := MATRIX_CurrentColumnOrdinal + 1;
                           MATRIX_OnAfterGetRecord(MATRIX_CurrentColumnOrdinal);
                         UNTIL (MatrixRecord.NEXT(1) = 0) OR (MATRIX_CurrentColumnOrdinal = MATRIX_NoOfMatrixColumns);
                     END;

  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 1170170000;2;Field  ;
                SourceExpr="Vendor No." }

    { 1170170001;2;Field  ;
                SourceExpr="No." }

    { 1170170002;2;Field  ;
                SourceExpr=Description }

    { 1170170003;2;Field  ;
                SourceExpr="Description 2" }

    { 1170170004;2;Field  ;
                SourceExpr="Item Category Code" }

    { 1011;2   ;Field     ;
                Name=Field1;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[1];
                CaptionClass='3,' + MATRIX_ColumnCaption[1];
                OnValidate=BEGIN
                             ValidateCantidad(1);
                           END;
                            }

    { 1012;2   ;Field     ;
                Name=Field2;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[2];
                CaptionClass='3,' + MATRIX_ColumnCaption[2];
                OnValidate=BEGIN
                             ValidateCantidad(2);
                           END;
                            }

    { 1013;2   ;Field     ;
                Name=Field3;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[3];
                CaptionClass='3,' + MATRIX_ColumnCaption[3];
                OnValidate=BEGIN
                             ValidateCantidad(3);
                           END;
                            }

    { 1014;2   ;Field     ;
                Name=Field4;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[4];
                CaptionClass='3,' + MATRIX_ColumnCaption[4];
                OnValidate=BEGIN
                             ValidateCantidad(4);
                           END;
                            }

    { 1015;2   ;Field     ;
                Name=Field5;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[5];
                CaptionClass='3,' + MATRIX_ColumnCaption[5];
                OnValidate=BEGIN
                             ValidateCantidad(5);
                           END;
                            }

    { 1016;2   ;Field     ;
                Name=Field6;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[6];
                CaptionClass='3,' + MATRIX_ColumnCaption[6];
                OnValidate=BEGIN
                             ValidateCantidad(6);
                           END;
                            }

    { 1017;2   ;Field     ;
                Name=Field7;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[7];
                CaptionClass='3,' + MATRIX_ColumnCaption[7];
                OnValidate=BEGIN
                             ValidateCantidad(7);
                           END;
                            }

    { 1018;2   ;Field     ;
                Name=Field8;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[8];
                CaptionClass='3,' + MATRIX_ColumnCaption[8];
                OnValidate=BEGIN
                             ValidateCantidad(8);
                           END;
                            }

    { 1019;2   ;Field     ;
                Name=Field9;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[9];
                CaptionClass='3,' + MATRIX_ColumnCaption[9];
                OnValidate=BEGIN
                             ValidateCantidad(9);
                           END;
                            }

    { 1020;2   ;Field     ;
                Name=Field10;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[10];
                CaptionClass='3,' + MATRIX_ColumnCaption[10];
                OnValidate=BEGIN
                             ValidateCantidad(10);
                           END;
                            }

    { 1021;2   ;Field     ;
                Name=Field11;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[11];
                CaptionClass='3,' + MATRIX_ColumnCaption[11];
                OnValidate=BEGIN
                             ValidateCantidad(11);
                           END;
                            }

    { 1022;2   ;Field     ;
                Name=Field12;
                ApplicationArea=#Jobs;
                DecimalPlaces=0:5;
                BlankZero=Yes;
                SourceExpr=MATRIX_CellData[12];
                CaptionClass='3,' + MATRIX_ColumnCaption[12];
                OnValidate=BEGIN
                             ValidateCantidad(12);
                           END;
                            }

  }
  CODE
  {
    VAR
      MatrixRecord@1170170000 : Record 6;
      MatrixRecords@1000 : ARRAY [32] OF Record 6;
      QtyType@1081 : 'Net Change,Balance at Date';
      MATRIX_NoOfMatrixColumns@1084 : Integer;
      MATRIX_CellData@1085 : ARRAY [32] OF Decimal;
      MATRIX_ColumnCaption@1001 : ARRAY [32] OF Text[1024];
      ConfMultiple@1170170001 : TextConst 'ESP=¨Est  seguro de que quiere asignar el porcentaje %1 a los registros seleccionados?';

    PROCEDURE Load@3(QtyType1@1000 : 'Net Change,Balance at Date';MatrixColumns1@1001 : ARRAY [32] OF Text[1024];VAR MatrixRecords1@1002 : ARRAY [32] OF Record 6;NoOfMatrixColumns1@1004 : Integer);
    VAR
      i@1005 : Integer;
    BEGIN
      QtyType := QtyType1;
      COPYARRAY(MATRIX_ColumnCaption,MatrixColumns1,1);
      FOR i := 1 TO ARRAYLEN(MatrixRecords) DO
        MatrixRecords[i].COPY(MatrixRecords1[i]);
      MATRIX_NoOfMatrixColumns := NoOfMatrixColumns1;
    END;

    LOCAL PROCEDURE ValidateCantidad@1(MATRIX_ColumnOrdinal@1000 : Integer);
    VAR
      MargenPorc@1170170000 : Record 50004;
    BEGIN
      ActMargen("No.",MatrixRecords[MATRIX_ColumnOrdinal].Code,
        MATRIX_CellData[MATRIX_ColumnOrdinal]);
    END;

    LOCAL PROCEDURE MATRIX_OnAfterGetRecord@1047(ColumnID@1000 : Integer);
    VAR
      MargenGrupoProducto@1170170000 : Record 50005;
    BEGIN
      IF NOT MargenGrupoProducto.GET(MargenGrupoProducto."Sales Type"::"Customer Price Group",
                             MatrixRecords[ColumnID].Code,
                            "No.") THEN MargenGrupoProducto.INIT;
      MATRIX_CellData[ColumnID] := MargenGrupoProducto."% margen";
    END;

    LOCAL PROCEDURE ActMargen@1170170001(NumProducto@1170170001 : Code[20];GrupoPrecio@1170170002 : Code[20];dPorcen@1170170003 : Decimal);
    VAR
      MargenPorc@1170170000 : Record 50005;
    BEGIN
      // I-BAIN-0129
      IF NOT MargenPorc.GET(MargenPorc."Sales Type"::"Customer Price Group",
                            GrupoPrecio,
                            NumProducto) THEN BEGIN
        IF dPorcen = 0 THEN EXIT;
        MargenPorc."Sales Type" := MargenPorc."Sales Type"::"Customer Price Group";
        MargenPorc."Sales Code" := GrupoPrecio;
        MargenPorc."N§ producto" := NumProducto;
        MargenPorc."% margen" := dPorcen;
        MargenPorc.INSERT;
      END ELSE BEGIN
        IF dPorcen = 0 THEN BEGIN
          MargenPorc.DELETE;
        END ELSE BEGIN
          MargenPorc."% margen" := dPorcen;
          MargenPorc.MODIFY;
        END;
      END;
      // F-BAIN-0129
    END;

    PROCEDURE ActualizarMargenMultiple@1170170004(dPorcen@1170170000 : Decimal);
    VAR
      RcProducto@1170170003 : Record 27;
      GrupoPrecio@1170170002 : Record 6;
      Ventana@1170170001 : Dialog;
    BEGIN
      // I-BAIN-0129
      IF NOT CONFIRM(ConfMultiple,TRUE,dPorcen) THEN
        EXIT;
      Ventana.OPEN('Actualizando producto #1#########');
      CurrPage.SETSELECTIONFILTER(RcProducto);
      IF RcProducto.FIND('-') THEN
      REPEAT
        Ventana.UPDATE(1,RcProducto."No.");
        GrupoPrecio.RESET;
        IF GrupoPrecio.FIND('-') THEN
        REPEAT
          ActMargen(RcProducto."No.",GrupoPrecio.Code,dPorcen);
        UNTIL GrupoPrecio.NEXT = 0;
      UNTIL RcProducto.NEXT = 0;
      Ventana.CLOSE;
      // F-BAIN-0129
    END;

    BEGIN
    END.
  }
}

